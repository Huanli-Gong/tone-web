(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[9114],{80876:function(q){q.exports={log_td:"log_td___3ViXg",log_table:"log_table___3W2Yo",cell:"cell___1iA9a",no_margin_line:"no_margin_line___1Z9Kp"}},4798:function(q){q.exports={cover:"cover___Mo5GD"}},98273:function(q){q.exports={cover:"cover___3PIkw"}},11063:function(q){q.exports={DeployModal_root:"DeployModal_root___1OL4b",Alert:"Alert___1ubcT"}},93929:function(q){q.exports={filter:"filter___3oqYG",confirm:"confirm___30iCS"}},5149:function(q,V,e){"use strict";var xe=e(71194),U=e(50146),G=e(20310),A=e(67294),Y=e(16917),S=e(12788),M=e(85893),T,D=S.ZP.div(T||(T=(0,G.Z)([`
    margin-top: 5px;
`]))),c=function(p){var o=(0,Y.tT)("disclaimer"),n=o.openModal,N=o.handleDisclaimerClose,i=function(){p.onOk(!0),N()},u=function(){p.onOk(!1),N()};return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(U.Z,{width:670,title:!1,open:n,onOk:i,style:{top:"25%"},onCancel:u,children:(0,M.jsxs)("div",{style:{margin:"16px 0px",fontSize:14},children:[(0,M.jsxs)(D,{style:{fontWeight:"bold",fontSize:18,marginBottom:10},children:[(0,M.jsx)(Y._H,{id:"disclaimer.title"}),"\uFF1A"]}),(0,M.jsxs)(D,{children:[(0,M.jsx)("b",{children:"1."}),"\xA0",(0,M.jsx)(Y._H,{id:"disclaimer.content.one"}),"\uFF0C",(0,M.jsx)("b",{children:(0,M.jsx)(Y._H,{id:"disclaimer.content.two"})}),"\u3002"]}),(0,M.jsxs)(D,{children:[(0,M.jsx)("b",{children:"2."}),"\xA0",(0,M.jsx)(Y._H,{id:"disclaimer.content.three"}),"\uFF0C",(0,M.jsx)("b",{children:(0,M.jsx)(Y._H,{id:"disclaimer.content.four"})}),"\u3002"]})]})})})};V.Z=c},52653:function(q,V,e){"use strict";e.d(V,{Z:function(){return h}});var xe=e(9715),U=e(20526),G=e(13254),A=e(14277),Y=e(20228),S=e(11382),M=e(71153),T=e(60331),D=e(39428),c=e(34792),K=e(48086),p=e(3182),o=e(2824),n=e(43358),N=e(34041),i=e(67294),u=e(16917),E=e(20009);function j(){return _.apply(this,arguments)}function _(){return _=(0,p.Z)((0,D.Z)().mark(function s(){var d,I=arguments;return(0,D.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return d=I.length>0&&I[0]!==void 0?I[0]:{},C.abrupt("return",(0,u.WY)("/api/server/server_tag/",{params:d}));case 2:case"end":return C.stop()}},s)})),_.apply(this,arguments)}var r=e(85893),Z=N.Z.Option,h=function(s){var d=(0,u.YB)(),I=d.formatMessage,x=s.isQuery,C=s.list,t=(0,E.UO)(),R=t.ws_id,Q=(0,i.useState)(!0),F=(0,o.Z)(Q,2),y=F[0],H=F[1],J=(0,i.useState)([]),v=(0,o.Z)(J,2),a=v[0],l=v[1],m=(0,i.useState)(),O=(0,o.Z)(m,2),f=O[0],k=O[1],_e=(0,i.useState)({total:0,page_num:1,page_size:20}),B=(0,o.Z)(_e,2),b=B[0],ee=B[1],ae=function(){var P=(0,p.Z)((0,D.Z)().mark(function L(g){var W,ne,$,oe=arguments;return(0,D.Z)().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return W=oe.length>1&&oe[1]!==void 0?oe[1]:"concat",H(!0),le.prev=2,le.next=5,j(g);case 5:ne=le.sent,ne.code===200?(W==="concat"?($=a.concat(ne.data||[]),l($||[])):W==="reset"&&l(ne.data||[]),ee(ne)):K.default.error(ne.msg||I({id:"operation.failed"})),H(!1),le.next=13;break;case 10:le.prev=10,le.t0=le.catch(2),H(!1);case 13:case"end":return le.stop()}},L,null,[[2,10]])}));return function(g){return P.apply(this,arguments)}}(),te=function(){var P=(0,p.Z)((0,D.Z)().mark(function L(g){var W;return(0,D.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(W=g&&g.replace(/\s*/g,""),!(f&&f==W)){$.next=3;break}return $.abrupt("return");case 3:k(W),ae({name:W,page_num:1,page_size:20,ws_id:R},"reset");case 5:case"end":return $.stop()}},L)}));return function(g){return P.apply(this,arguments)}}();(0,i.useEffect)(function(){x==="edit"&&ae({tag_id_list:C+"",page_num:1,page_size:20,ws_id:R},"reset"),x==="add"&&te()},[x,C]);var X=function(L){var g=b.page_num,W=b.page_size,ne=b.total,$=L.target,oe=$.clientHeight,Ee=$.scrollHeight,le=$.scrollTop;oe+le>=Ee&&!isNaN(g)&&Math.ceil(ne/W)>g&&ae({name:f,page_num:g+1,page_size:W,ws_id:R},"concat")},z=function(){te()},se=function(L){var g=L.label,W=L.closable,ne=L.onClose,$=g.props||{},oe=$.color,Ee=$.children;return(0,r.jsx)(T.Z,{color:oe,closable:W,onClose:ne,style:{marginRight:3},children:Ee})};return(0,r.jsx)(U.Z.Item,{name:"tags",label:(0,r.jsx)(u._H,{id:"device.tag"}),children:(0,r.jsx)(N.Z,{mode:"multiple",allowClear:!0,notFoundContent:y?(0,r.jsx)(S.Z,{size:"small"}):(0,r.jsx)(A.Z,{image:A.Z.PRESENTED_IMAGE_SIMPLE}),filterOption:!1,loading:y,placeholder:(0,r.jsx)(u._H,{id:"device.tag.dispatch.tag"}),onSearch:te,style:{width:"100%"},showArrow:!0,onClear:z,onPopupScroll:X,tagRender:se,children:a.map(function(P){return(0,r.jsx)(Z,{value:P.id,children:(0,r.jsx)(T.Z,{color:P.tag_color,children:P.name},P.id)},P.id)})})})}},21318:function(q,V,e){"use strict";var xe=e(13254),U=e(14277),G=e(20228),A=e(11382),Y=e(9715),S=e(20526),M=e(43358),T=e(34041),D=e(39428),c=e(3182),K=e(67294),p=e(16917),o=e(20009),n=e(90105),N=e(85893),i=function(){var E=(0,p.YB)(),j=E.formatMessage,_=(0,o.UO)(),r=_.ws_id,Z=(0,p.QT)(function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,n.tR)({keyword:x,scope:"aligroup",ws_id:r,page_num:1,page_size:500})},{debounceInterval:300}),h=Z.data,s=Z.loading,d=Z.run,I=function(){var x=(0,c.Z)((0,D.Z)().mark(function C(){var t,R=arguments;return(0,D.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:t=R.length>0&&R[0]!==void 0?R[0]:"",d(t);case 2:case"end":return F.stop()}},C)}));return function(){return x.apply(this,arguments)}}();return h?(0,N.jsx)(S.Z.Item,{name:"emp_id",label:"Owner",rules:[{required:!0,message:j({id:"please.select"})}],children:(0,N.jsx)(T.Z,{allowClear:!0,notFoundContent:s?(0,N.jsx)(A.Z,{size:"small"}):(0,N.jsx)(U.Z,{image:U.Z.PRESENTED_IMAGE_SIMPLE}),placeholder:j({id:"select.owner"}),filterOption:!1,onSearch:I,style:{width:"100%"},showArrow:!0,showSearch:!0,listHeight:160,getPopupContainer:function(C){return C.parentNode},children:h==null?void 0:h.map(function(x,C){return(0,N.jsxs)(T.Z.Option,{value:x.emp_id,children:[x.last_name,"(",x.first_name===""?x.last_name:x.first_name,")",!1]},C)})})}):(0,N.jsx)(S.Z.Item,{label:"Owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,N.jsx)(T.Z,{placeholder:"\u8BF7\u9009\u62E9Owner"})})};V.Z=i},14552:function(q,V,e){"use strict";var xe=e(22385),U=e(89456),G=e(11849),A=e(2824),Y=e(93224),S=e(20310),M=e(67294),T=e(12788),D=e(60035),c=e(85893),K=["title","children","width","color","placement","style"],p,o=T.ZP.div(p||(p=(0,S.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),n=function(i){var u=i.title,E=i.children,j=i.width,_=i.color,r=i.placement,Z=r===void 0?"topLeft":r,h=i.style,s=(0,Y.Z)(i,K),d=(0,M.useRef)(null),I=(0,M.useState)(!1),x=(0,A.Z)(I,2),C=x[0],t=x[1],R=(0,D.CR)(),Q=R.width,F=function(){var J,v,a=d==null||(J=d.current)===null||J===void 0?void 0:J.clientWidth,l=d==null||(v=d.current)===null||v===void 0?void 0:v.scrollWidth;t(a<l)};(0,M.useEffect)(function(){F()},[u,Q]);var y=(0,c.jsx)(o,(0,G.Z)((0,G.Z)({ref:d,style:(0,G.Z)({width:j,color:_},h)},s),{},{children:E||u||"-"}));return C?(0,c.jsx)(U.Z,{title:u,placement:Z,overlayStyle:{wordBreak:"break-all"},children:y}):y};V.Z=n},13958:function(q,V,e){"use strict";e.d(V,{Z:function(){return h}});var xe=e(57338),U=e(440),G=e(66456),A=e(79764),Y=e(11849),S=e(48736),M=e(27049),T=e(13062),D=e(71230),c=e(39428),K=e(3182),p=e(2824),o=e(67294),n=e(16917);function N(s){return(0,n.WY)("/api/sys/operation/log/",{params:s})}var i=e(20009),u=e(14552),E=e(80876),j=e.n(E),_=e(96486),r=e(85893),Z=function(d){return d==="0"?(0,r.jsx)(n._H,{id:"operation.not.release"}):d==="1"?(0,r.jsx)(n._H,{id:"operation.release"}):d==="2"?(0,r.jsx)(n._H,{id:"device.failed.save"}):d==="cloud"?(0,r.jsx)(n._H,{id:"device.cloud"}):d==="cloud_efficiency"?(0,r.jsx)(n._H,{id:"device.cloud_efficiency"}):d==="cloud_ssd"?(0,r.jsx)(n._H,{id:"device.cloud_ssd"}):d==="cloud_essd"?(0,r.jsx)(n._H,{id:"device.cloud_essd"}):d},h=(0,o.forwardRef)(function(s,d){var I=s.operation_object,x=(0,i.UO)(),C=x.ws_id,t=(0,n.YB)(),R=t.formatMessage,Q=(0,o.useState)({}),F=(0,p.Z)(Q,2),y=F[0],H=F[1],J=(0,o.useState)(!1),v=(0,p.Z)(J,2),a=v[0],l=v[1],m=(0,o.useState)(!0),O=(0,p.Z)(m,2),f=O[0],k=O[1],_e=function(){var X=(0,K.Z)((0,c.Z)().mark(function z(se){var P;return(0,c.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return k(!0),g.next=3,N({operation_object:I,pid:se,ws_id:C});case 3:P=g.sent,H(P||{}),k(!1);case 6:case"end":return g.stop()}},z)}));return function(se){return X.apply(this,arguments)}}();(0,o.useImperativeHandle)(d,function(){return{show:function(z){l(!0),_e(z)}}});var B=function(z){var se=[{fieldName:"template_name",text:"\u914D\u7F6E\u540D\u79F0"},{fieldName:"release_rule",text:"\u7528\u5B8C\u91CA\u653E"},{fieldName:"manufacturer",text:"\u4E91\u5382\u5546/Ak"},{fieldName:"zone",text:"Region/Zone"},{fieldName:"instance_type",text:"\u89C4\u683C"},{fieldName:"storage_type",text:"\u6570\u636E\u76D8"},{fieldName:"image",text:"\u955C\u50CF"},{fieldName:"system_disk_category",text:"\u7CFB\u7EDF\u76D8"},{fieldName:"bandwidth",text:"\u5E26\u5BBD"},{fieldName:"extra_param",text:"\u6269\u5C55\u5B57\u6BB5"},{fieldName:"image_name",text:"\u955C\u50CF"},{fieldName:"channel_type",text:"\u63A7\u5236\u901A\u9053"},{fieldName:"ips",text:"\u673A\u5668"},{fieldName:"ip",text:"\u673A\u5668"},{fieldName:"name",text:"\u673A\u5668\u540D\u79F0"},{fieldName:"state",text:"\u4F7F\u7528\u72B6\u6001"},{fieldName:"description",text:"\u5907\u6CE8"},{fieldName:"owner",text:"Owner"},{fieldName:"tag",text:"\u6807\u7B7E"},{fieldName:"private_ip",text:"\u79C1\u7F51IP"}],P=se.filter(function(L){return z===L.fieldName});return P.length?R({id:"log.listName.".concat(P[0].fieldName)}):Z(z)},b=function(z){return z.map(function(se,P){var L="";return(0,_.isArray)(se)&&!!se.length?L=JSON.stringify(se):L=String(se),(0,r.jsxs)(D.Z,{justify:"center",children:[(0,r.jsx)(D.Z,{justify:"center",className:j().cell,children:L&&!!L.length?(0,r.jsx)(u.Z,{title:B(L),width:160,children:B(L)}):"-"}),P!==z.length-1&&(0,r.jsx)(M.Z,{className:j().no_margin_line})]},P)})},ee={align:"center",className:"log_td"},ae=[{title:(0,r.jsx)(n._H,{id:"log.columns.operation_type"}),align:"center",dataIndex:"operation_type"},{title:(0,r.jsx)(n._H,{id:"log.columns.edit.content"}),align:"center",children:[(0,Y.Z)({title:(0,r.jsx)(n._H,{id:"log.columns.fieldName"}),render:function(z){return b(Object.keys(JSON.parse(z.new_values)))}},ee),(0,Y.Z)({title:(0,r.jsx)(n._H,{id:"log.columns.old_values"}),render:function(z){return b(Object.values(JSON.parse(z.old_values)))}},ee),(0,Y.Z)({title:(0,r.jsx)(n._H,{id:"log.columns.new_values"}),render:function(z){return b(Object.values(JSON.parse(z.new_values)))}},ee)]},{title:(0,r.jsx)(n._H,{id:"log.columns.creator"}),align:"center",dataIndex:"creator"},{title:(0,r.jsx)(n._H,{id:"log.columns.gmt_created"}),align:"center",dataIndex:"gmt_created"}],te=function(){l(!1),H({})};return(0,r.jsx)(U.Z,{maskClosable:!1,keyboard:!1,visible:a,forceRender:!0,title:(0,r.jsx)(n._H,{id:"log.operation.title"}),onClose:te,width:"910",children:(0,r.jsx)(A.Z,{loading:f,rowKey:"id",size:"small",className:j().log_table,bordered:!0,pagination:{pageSize:y.page_size||10},columns:ae,dataSource:y.data&&y.data.filter(function(X){return X.new_values!=="{}"})})})})},36761:function(q,V,e){"use strict";var xe=e(49111),U=e(19650),G=e(57663),A=e(71577),Y=e(48736),S=e(27049),M=e(43358),T=e(34041),D=e(54029),c=e(79166),K=e(2824),p=e(67294),o=e(16917),n=e(85893),N=function(u){var E=u.confirm,j=u.onConfirm,_=u.dataArr,r=u.value,Z=(0,p.useState)([]),h=(0,K.Z)(Z,2),s=h[0],d=h[1],I=(0,p.useState)(r),x=(0,K.Z)(I,2),C=x[0],t=x[1];(0,p.useEffect)(function(){d(_)},[]),(0,p.useEffect)(function(){t(r)},[r]);var R=function(H){var J=_.filter(function(v){return v.toLowerCase().includes(H)});d(J)},Q=function(H){t(H),d(_)},F=function(H){switch(H){case"Available":return(0,n.jsx)(c.Z,{status:"success",text:"Available"});case"Alive":return(0,n.jsx)(c.Z,{status:"success",text:"Alive"});case"Occupied":return(0,n.jsx)(c.Z,{status:"processing",text:"Occupied"});case"Reserved":return(0,n.jsx)(c.Z,{status:"default",text:"Reserved"});case"Broken":return(0,n.jsx)(c.Z,{status:"error",text:"Broken"});case"Online":return(0,n.jsx)(c.Z,{status:"success",text:"Online"});case"Offline":return(0,n.jsx)(c.Z,{status:"error",text:"Offline"});case"Unusable":return(0,n.jsx)(c.Z,{status:"default",text:"Unusable"});default:return(0,n.jsx)(n.Fragment,{})}};return(0,n.jsxs)("div",{style:{padding:8},children:[(0,n.jsx)("div",{children:(0,n.jsx)(T.Z,{allowClear:!0,style:{width:"100%"},placeholder:(0,n.jsx)(o._H,{id:"ws.dashboard.please.select.state"}),showSearch:!0,onSearch:R,onChange:Q,value:C,options:s.map(function(y){return{value:y,label:F(y)}})})}),(0,n.jsx)(S.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(A.Z,{onClick:function(){E==null||E(),j(C)},type:"link",size:"small",style:{width:75},children:(0,n.jsx)(o._H,{id:"operation.search"})}),(0,n.jsx)(A.Z,{type:"text",onClick:function(){E==null||E(),t(void 0),j(void 0),d(_)},size:"small",style:{width:75,border:"none"},children:(0,n.jsx)(o._H,{id:"operation.reset"})})]})]})};V.Z=N},62865:function(q,V,e){"use strict";e.d(V,{Z:function(){return I}});var xe=e(49111),U=e(19650),G=e(57663),A=e(71577),Y=e(48736),S=e(27049),M=e(43358),T=e(34041),D=e(20228),c=e(11382),K=e(71153),p=e(60331),o=e(39428),n=e(34792),N=e(48086),i=e(3182),u=e(2824),E=e(67294),j=e(96486),_=e(16917);function r(x){return(0,_.WY)("/api/server/server_tag/",{params:x})}var Z=e(4798),h=e.n(Z),s=e(85893),d=function(C){var t=C.ws_id,R=C.confirm,Q=C.onConfirm,F=C.value,y=(0,_.YB)(),H=y.formatMessage,J=(0,E.useState)({total:0,page_num:1,page_size:10}),v=(0,u.Z)(J,2),a=v[0],l=v[1],m=(0,E.useState)(!1),O=(0,u.Z)(m,2),f=O[0],k=O[1],_e=(0,E.useState)([]),B=(0,u.Z)(_e,2),b=B[0],ee=B[1],ae=(0,E.useState)(),te=(0,u.Z)(ae,2),X=te[0],z=te[1],se=(0,E.useState)((F==null?void 0:F.map(function(re){return+re}))||[]),P=(0,u.Z)(se,2),L=P[0],g=P[1],W=(0,E.useState)(!0),ne=(0,u.Z)(W,2),$=ne[0],oe=ne[1],Ee=(0,E.useState)(!1),le=(0,u.Z)(Ee,2),ye=le[0],Se=le[1],Ze=function(){var re=(0,i.Z)((0,o.Z)().mark(function de(ue){var ce,me,w,fe=arguments;return(0,o.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return ce=fe.length>1&&fe[1]!==void 0?fe[1]:"concat",oe(!0),he.prev=2,he.next=5,r(ue);case 5:me=he.sent,me.code===200?ce==="concat"?(w=b.concat(me.data||[]),ee(w||[]),l(me),w.length===me.total&&k(!0)):ce==="reset"&&(ee(me.data||[]),l(me)):N.default.error(me.msg||H({id:"request.failed"})),oe(!1),he.next=13;break;case 10:he.prev=10,he.t0=he.catch(2),oe(!1);case 13:case"end":return he.stop()}},de,null,[[2,10]])}));return function(ue){return re.apply(this,arguments)}}(),ie=function(){var re=(0,i.Z)((0,o.Z)().mark(function de(ue){var ce;return(0,o.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(ce=ue&&ue.replace(/\s*/g,""),!(X&&X==ce)){w.next=3;break}return w.abrupt("return");case 3:z(ce),Ze({name:ce,page_num:1,page_size:10,ws_id:t},"reset");case 5:case"end":return w.stop()}},de)}));return function(ue){return re.apply(this,arguments)}}(),Ie=function(de){var ue=a.page_num,ce=a.page_size,me=a.total,w=de.target,fe=w.clientHeight,Me=w.scrollHeight,he=w.scrollTop;fe+he+1>=Me&&!(0,j.isNaN)(ue)&&Math.ceil(me/ce)>ue&&!f&&Ze({name:X,page_num:ue+1,page_size:ce,ws_id:t},"concat")};(0,E.useEffect)(function(){ie()},[]);var Re=function(de){var ue,ce,me=de.label,w=de.closable,fe=de.onClose;return(0,s.jsx)(p.Z,{color:(ue=me.props)===null||ue===void 0?void 0:ue.color,closable:w,onClose:fe,style:{marginRight:3},children:(ce=me.props)===null||ce===void 0?void 0:ce.children})};return(0,s.jsxs)("div",{style:{padding:8,width:200},children:[(0,s.jsx)("div",{className:h().cover,onClick:function(){ye||R==null||R()}}),(0,s.jsx)(T.Z,{mode:"multiple",allowClear:!0,notFoundContent:$?(0,s.jsx)(c.Z,{size:"small"}):null,filterOption:!1,showSearch:!0,onSearch:ie,onPopupScroll:$?function(){}:Ie,style:{width:"100%"},onChange:function(de){return g(de)},showArrow:!1,autoFocus:!0,onFocus:function(){Se(!0)},onBlur:function(){setTimeout(function(){Se(!1)},200)},value:L,tagRender:Re,options:b==null?void 0:b.map(function(re){return{value:re.id,label:(0,s.jsx)(p.Z,{color:re.tag_color,children:re.name})}})}),(0,s.jsx)(S.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,s.jsxs)(U.Z,{children:[(0,s.jsx)(A.Z,{onClick:function(){R==null||R(),Q(L)},type:"link",size:"small",style:{width:75},children:(0,s.jsx)(_._H,{id:"operation.search"})}),(0,s.jsx)(A.Z,{type:"text",onClick:function(){R==null||R(),g(void 0),k(!1),Q(void 0),ie()},size:"small",style:{width:75,border:"none"},children:(0,s.jsx)(_._H,{id:"operation.reset"})})]})]})},I=d},27687:function(q,V,e){"use strict";var xe=e(49111),U=e(19650),G=e(57663),A=e(71577),Y=e(48736),S=e(27049),M=e(43358),T=e(34041),D=e(20228),c=e(11382),K=e(39428),p=e(3182),o=e(2824),n=e(67294),N=e(20009),i=e(16917),u=e(90105),E=e(98273),j=e.n(E),_=e(85893),r=function(h){var s=h.confirm,d=h.onConfirm,I=h.value,x=h.page_size,C=h.mode,t=C===void 0?"multiple":C,R=(0,N.UO)(),Q=R.ws_id,F=(0,n.useState)([]),y=(0,o.Z)(F,2),H=y[0],J=y[1],v=(0,n.useState)(),a=(0,o.Z)(v,2),l=a[0],m=a[1],O=(0,n.useState)(),f=(0,o.Z)(O,2),k=f[0],_e=f[1],B=(0,n.useState)(!0),b=(0,o.Z)(B,2),ee=b[0],ae=b[1],te=(0,n.useState)(!1),X=(0,o.Z)(te,2),z=X[0],se=X[1],P=function(){var g=(0,p.Z)((0,K.Z)().mark(function W(ne){var $,oe,Ee;return(0,K.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if($=ne&&ne.replace(/\s*/g,""),!(l&&l==$)){ye.next=3;break}return ye.abrupt("return");case 3:return m($),ae(!0),ye.next=7,(0,u.tR)({ws_id:Q,keyword:$,page_size:x||10,page_num:1});case 7:oe=ye.sent,Ee=oe.data,J(Array.isArray(Ee)?Ee:[]),ae(!1);case 11:case"end":return ye.stop()}},W)}));return function(ne){return g.apply(this,arguments)}}();(0,n.useEffect)(function(){P()},[]);var L=function(){P()};return(0,_.jsxs)("div",{style:{padding:8},children:[(0,_.jsx)("div",{className:j().cover,onClick:function(){z||s==null||s()}}),(0,_.jsx)(T.Z,{mode:t,allowClear:!0,notFoundContent:ee?(0,_.jsx)(c.Z,{size:"small"}):"Not Found",filterOption:!1,showSearch:!0,onSearch:P,style:{width:"100%"},onChange:function(W){return _e(W)},onDeselect:L,onClear:L,showArrow:!1,autoFocus:!0,value:k,onFocus:function(){se(!0)},onBlur:function(){setTimeout(function(){se(!1)},200)},options:H==null?void 0:H.map(function(g){return{label:g.last_name,value:g.id}})}),(0,_.jsx)(S.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,_.jsxs)(U.Z,{children:[(0,_.jsx)(A.Z,{onClick:function(){s==null||s(),d(k)},type:"link",size:"small",style:{width:75},children:(0,_.jsx)(i._H,{id:"operation.search"})}),(0,_.jsx)(A.Z,{type:"text",onClick:function(){s==null||s(),_e(void 0),d(void 0),P()},size:"small",style:{width:75,border:"none"},children:(0,_.jsx)(i._H,{id:"operation.reset"})})]})]})};V.Z=r},87415:function(q,V,e){"use strict";e.d(V,{mQ:function(){return D},gM:function(){return c},nU:function(){return p}});var xe=e(58024),U=e(91894),G=e(20310),A=e(12788),Y,S,M,T,D=(0,A.ZP)(U.Z)(Y||(Y=(0,G.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),c=(0,A.ZP)(D)(S||(S=(0,G.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),K=(0,A.ZP)(U.Z)(M||(M=(0,G.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),p=(0,A.ZP)(K)(T||(T=(0,G.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},94955:function(q,V,e){"use strict";e.d(V,{Z:function(){return J}});var xe=e(71194),U=e(50146),G=e(20228),A=e(11382),Y=e(43358),S=e(34041),M=e(20136),T=e(55241),D=e(88983),c=e(47933),K=e(47673),p=e(4107),o=e(17462),n=e(76772),N=e(22385),i=e(89456),u=e(39428),E=e(34792),j=e(48086),_=e(3182),r=e(9715),Z=e(20526),h=e(2824),s=e(67294),d=e(1870),I=e(16917),x=e(71153),C=e(60331),t=e(85893),R=(0,s.forwardRef)(function(v,a){var l=v||{},m=l.onChange,O=l.dataSource,f=O===void 0?[]:O,k=l.delCallback;function _e(B,b){if(B.preventDefault(),f&&Array.isArray(f)){var ee=f.filter(function(te){return te.id!==b}),ae=ee.map(function(te){return te.id});m(ae),k(ee)}}return(0,t.jsx)("div",{ref:a,children:f.map(function(B){return(0,t.jsx)(C.Z,{closable:!(f&&f.length===1),onClose:function(ee){return _e(ee,B.id)},children:B.ip},B.id)})})}),Q=e(1693),F=e(11063),y=e.n(F),H=e(96486),J=(0,s.forwardRef)(function(v,a){var l,m,O=(0,I.YB)(),f=O.formatMessage,k=Z.Z.useForm(),_e=(0,h.Z)(k,1),B=_e[0],b=(0,s.useState)(!1),ee=(0,h.Z)(b,2),ae=ee[0],te=ee[1],X=(0,s.useState)(""),z=(0,h.Z)(X,2),se=z[0],P=z[1],L=(0,s.useState)(""),g=(0,h.Z)(L,2),W=g[0],ne=g[1],$=(0,s.useState)(!1),oe=(0,h.Z)($,2),Ee=oe[0],le=oe[1],ye=(0,s.useState)([]),Se=(0,h.Z)(ye,2),Ze=Se[0],ie=Se[1],Ie=(0,s.useState)([]),Re=(0,h.Z)(Ie,2),re=Re[0],de=Re[1],ue=(0,s.useState)("common"),ce=(0,h.Z)(ue,2),me=ce[0],w=ce[1],fe=(0,s.useState)({}),Me=(0,h.Z)(fe,2),he=Me[0],Be=Me[1],Te=(0,s.useMemo)(function(){return["openanolis","opensource"].includes("opensource")},[]),We=Z.Z.useWatch("arch",B),Ue=Z.Z.useWatch("os",B),Ne=function(){de([]),w("common"),Be({}),le(!1)},Fe=function(){var Ce=(0,_.Z)((0,u.Z)().mark(function ge(){var ve,je,Pe,De,pe;return(0,u.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.prev=0,Oe.next=3,(0,Q.un)({arch:We,os:Ue});case 3:ve=Oe.sent,je=ve.code,Pe=ve.msg,De=ve.data,pe=De===void 0?[]:De,je===200?(0,H.isString)(pe)?ie([]):ie(pe):j.default.error(Pe||f({id:"device.failed.to.request.version"})),Oe.next=13;break;case 11:Oe.prev=11,Oe.t0=Oe.catch(0);case 13:case"end":return Oe.stop()}},ge,null,[[0,11]])}));return function(){return Ce.apply(this,arguments)}}();(0,s.useImperativeHandle)(a,function(){return{show:function(ge){var ve=ge.detailData,je=ge.radio_type,Pe=ge.instance_id;if(le(!0),ne(je),Te){B.setFieldsValue({instance_id:Pe});return}var De=ve.map(function(pe){return{ip:pe,id:pe}});de(De),B.setFieldsValue({ips:ve})}}});var He=function(ge){de(ge)},$e=function(ge){w(ge.target.value)},ze=function(){B.validateFields().then(function(){var ge=(0,_.Z)((0,u.Z)().mark(function ve(je){var Pe,De,pe,Le,Oe,Ke;return(0,u.Z)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return te(!0),P(f({id:"device.deploying"})),Ae.next=4,(0,Q.Ty)(je);case 4:Pe=Ae.sent,De=Pe.code,pe=Pe.msg,Le=Pe.data,Oe=Le===void 0?{}:Le,De===200?(Ke=Oe.fail_servers)!==null&&Ke!==void 0&&Ke.length?Be(Oe):(j.default.success(f({id:"device.deploy.finish"})),B.resetFields(),Ne(),v.callback(Oe)):j.default.error(pe||f({id:"device.deploy.failed"})),te(!1),P("");case 12:case"end":return Ae.stop()}},ve)}));return function(ve){return ge.apply(this,arguments)}}()).catch(function(){te(!1),P("")})},be=function(){ae||(B.resetFields(),Ne())},Ve=function(){var ge=he.success_servers,ve=ge===void 0?[]:ge,je=he.fail_servers,Pe=je===void 0?[]:je,De=ve==null?void 0:ve.map(function(pe){return pe.ip}).join(" / ");return(0,t.jsxs)("div",{children:[ve!=null&&ve.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{color:"#1890FF"},children:De}),"\xA0",(0,t.jsx)(I._H,{id:"device.deploy.success"}),"\uFF1B\xA0"]}):null,Pe==null?void 0:Pe.map(function(pe){return(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#F5222D"},children:pe&&pe.ip}),"\xA0",(0,t.jsx)(I._H,{id:"device.deploy.failed"}),"\xA0",(0,t.jsx)(i.Z,{placement:"bottomLeft",title:pe&&pe.msg,children:(0,t.jsx)("a",{children:(0,t.jsx)(I._H,{id:"view.details"})})})]},pe.ip)})]})},Ge=function(){Be({})},Ye=function(){return Te?"active":W==="cloudManage"?"passive":"active"};return(0,s.useEffect)(function(){Ee&&We&&Ue&&Fe()},[Ee,We,Ue]),(0,t.jsx)(U.Z,{className:y().DeployModal_root,title:f({id:"agent.deploy.btn"}),open:Ee,maskClosable:!1,width:460,confirmLoading:ae,closable:!ae,onOk:ze,onCancel:be,children:(0,t.jsxs)(A.Z,{tip:se,spinning:ae,children:[(l=he.success_servers)!==null&&l!==void 0&&l.length||(m=he.fail_servers)!==null&&m!==void 0&&m.length?(0,t.jsx)("div",{className:y().Alert,children:(0,t.jsx)(n.Z,{message:Ve(),type:"info",showIcon:!0,closable:!0,onClose:Ge})}):null,(0,t.jsxs)(Z.Z,{form:B,layout:"vertical",initialValues:{channel:"common",mode:Ye(),user:"root",arch:"x86_64",os:"Linux"},children:[!Te&&(0,t.jsx)(Z.Z.Item,{label:"IP",name:"ips",rules:[{required:!0,message:f({id:"DeployModal.ids.message"})}],children:(0,t.jsx)(R,{dataSource:re,delCallback:He})}),Te&&(0,t.jsx)(Z.Z.Item,{label:"InstanceID",name:"instance_id",children:(0,t.jsx)(p.Z,{disabled:!0})}),!Te&&(0,t.jsx)(Z.Z.Item,{label:(0,t.jsx)(I._H,{id:"device.deploy.mode"}),name:"channel",children:(0,t.jsxs)(c.ZP.Group,{onChange:$e,children:[(0,t.jsx)(c.ZP,{value:"common",children:(0,t.jsx)(I._H,{id:"device.deploy.mode.common"})}),!Te&&W!=="cloudManage"&&(0,t.jsx)(c.ZP,{value:null,children:f({id:"device.deploy.mode.self_agent"},{data:null})})]})}),(0,t.jsx)(Z.Z.Item,{label:"Mode",name:"mode",children:(0,t.jsxs)(c.ZP.Group,{children:[(0,t.jsxs)(c.ZP,{value:"active",children:["active",(0,t.jsx)(T.Z,{placement:"topLeft",content:(0,t.jsx)(I._H,{id:"device.mode.active"}),children:(0,t.jsx)(d.Z,{style:{opacity:.65,marginLeft:2}})})]}),(0,t.jsxs)(c.ZP,{value:"passive",children:["passive",(0,t.jsx)(T.Z,{placement:"topLeft",content:(0,t.jsx)(I._H,{id:"device.mode.passive"}),children:(0,t.jsx)(d.Z,{style:{opacity:.65,marginLeft:2}})})]})]})}),(0,t.jsx)(Z.Z.Item,{label:"OS",name:"os",required:!0,children:(0,t.jsx)(S.Z,{options:[{value:"Linux",label:"Linux"},{value:"Debian",label:"Debian"}]})}),(0,t.jsx)(Z.Z.Item,{label:"arch",name:"arch",required:!0,children:(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(S.Z.Option,{value:"x86_64",children:"x86_64"}),(0,t.jsx)(S.Z.Option,{value:"aarch64",children:"aarch64"})]})}),(0,t.jsx)(Z.Z.Item,{label:(0,t.jsx)(I._H,{id:"agent.modal.Version"}),name:"version",rules:[{required:!0,message:f({id:"please.select"})}],children:(0,t.jsx)(S.Z,{placeholder:f({id:"please.select"}),showSearch:!0,optionFilterProp:"children",filterOption:function(ge,ve){return ve.children.toLowerCase().indexOf(ge.toLowerCase())>=0},children:Ze==null?void 0:Ze.map(function(Ce){return(0,t.jsx)(S.Z.Option,{value:Ce.version,children:Ce.version},Ce.id)})})}),!Te&&me==="common"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.Z.Item,{label:"User",name:"user",rules:[{required:!1,max:20,message:f({id:"device.user.message"})}],children:(0,t.jsx)(p.Z,{placeholder:f({id:"please.enter"}),autoComplete:"off"})}),(0,t.jsx)(Z.Z.Item,{label:"Password",name:"password",children:(0,t.jsx)(p.Z.Password,{placeholder:f({id:"please.enter"})})})]})]})]})})})},47883:function(q,V,e){"use strict";var xe=e(71194),U=e(50146),G=e(49111),A=e(19650),Y=e(402),S=e(97272),M=e(57663),T=e(71577),D=e(2824),c=e(67294),K=e(16917),p=e(57119),o=e(85893),n=function(i,u){var E=(0,K.YB)(),j=i.onOk,_=c.useState(!1),r=(0,D.Z)(_,2),Z=r[0],h=r[1],s=c.useState([]),d=(0,D.Z)(s,2),I=d[0],x=d[1],C=c.useState(""),t=(0,D.Z)(C,2),R=t[0],Q=t[1],F=function(){h(!1),Q(""),x([])},y=function(){F()},H=function(){j==null||j(I),y()};return c.useEffect(function(){return function(){F()}},[]),c.useImperativeHandle(u,function(){return{show:function(v,a){Q(a),x(v),h(!0)}}}),(0,o.jsx)(U.Z,{title:(0,o.jsx)(K._H,{id:"delete.tips"}),centered:!0,open:Z,onCancel:y,footer:[(0,o.jsx)(T.Z,{onClick:H,children:(0,o.jsx)(K._H,{id:"operation.confirm.delete"})},"submit"),(0,o.jsx)(T.Z,{type:"primary",onClick:y,children:(0,o.jsx)(K._H,{id:"operation.cancel"})},"back")],width:300,children:(0,o.jsxs)(A.Z,{children:[(0,o.jsx)(S.Z.Text,{type:"danger",children:(0,o.jsx)(p.Z,{})}),(0,o.jsx)(S.Z.Text,{type:"danger",children:E.formatMessage({id:"device.delete.prompt"},{data:R})})]})})};V.Z=c.forwardRef(n)},76865:function(q,V,e){"use strict";var xe=e(57663),U=e(71577),G=e(48736),A=e(27049),Y=e(49111),S=e(19650),M=e(63185),T=e(9676),D=e(2824),c=e(67294),K=e(16917),p=e(93929),o=e.n(p),n=e(85893),N=function(u){var E=u.list,j=u.confirm,_=u.onConfirm,r=u.value,Z=(0,c.useState)(r||[]),h=(0,D.Z)(Z,2),s=h[0],d=h[1],I=(0,c.useState)(!1),x=(0,D.Z)(I,2),C=x[0],t=x[1],R=(0,c.useState)(!1),Q=(0,D.Z)(R,2),F=Q[0],y=Q[1],H=function(l){y(!!l.length&&l.length<E.length),d(l),t(l.length===E.length)},J=E.map(function(a){return a.id}),v=function(l){d(l.target.checked?J:[]),t(l.target.checked),y(!1)};return c.useEffect(function(){return function(){d([]),t(!1),y(!1)}},[]),(0,n.jsxs)("div",{className:o().filter,children:[(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",maxHeight:280,overflow:"auto"},children:(0,n.jsxs)(S.Z,{style:{paddingLeft:8,paddingRight:8},direction:"vertical",size:4,children:[(0,n.jsx)(T.Z,{indeterminate:F,className:o().domain,onChange:v,checked:C,children:(0,n.jsx)(K._H,{id:"operation.select.all"})}),(0,n.jsx)(T.Z.Group,{onChange:H,value:s,children:(0,n.jsx)(S.Z,{direction:"vertical",size:4,children:E.map(function(a){return(0,n.jsx)(T.Z,{className:o().domain,value:a.id,children:a.name},a.id)})})})]})}),(0,n.jsx)(A.Z,{style:{margin:"10px 0"}}),(0,n.jsxs)("div",{className:o().confirm,children:[(0,n.jsx)(U.Z,{size:"small",type:"link",onClick:function(){j==null||j();var l=s&&s.join(",");_(l)},children:(0,n.jsx)(K._H,{id:"operation.ok"})}),(0,n.jsx)(U.Z,{size:"small",type:"text",onClick:function(){j==null||j(),d([]),_(void 0),t(!1),y(!1)},children:(0,n.jsx)(K._H,{id:"operation.reset"})})]})]})};V.Z=N},76772:function(q,V,e){"use strict";e.d(V,{Z:function(){return J}});var xe=e(22122),U=e(28481),G=e(96156),A=e(38819),Y=e(15873),S=e(43061),M=e(73218),T=e(54549),D=e(68855),c=e(57119),K=e(40847),p=e(68628),o=e(94184),n=e.n(o),N=e(4733),i=e(67294),u=e(53124),E=e(5467),j=e(96159),_=e(6610),r=e(5991),Z=e(46070),h=e(51814),s=e(77608),d=e(10379);function I(v,a,l){return a=(0,s.Z)(a),(0,Z.Z)(v,(0,h.Z)()?Reflect.construct(a,l||[],(0,s.Z)(v).constructor):a.apply(v,l))}var x=function(v){(0,d.Z)(a,v);function a(){var l;return(0,_.Z)(this,a),l=I(this,a,arguments),l.state={error:void 0,info:{componentStack:""}},l}return(0,r.Z)(a,[{key:"componentDidCatch",value:function(m,O){this.setState({error:m,info:O})}},{key:"render",value:function(){var m=this.props,O=m.message,f=m.description,k=m.children,_e=this.state,B=_e.error,b=_e.info,ee=b&&b.componentStack?b.componentStack:null,ae=typeof O=="undefined"?(B||"").toString():O,te=typeof f=="undefined"?ee:f;return B?i.createElement(J,{type:"error",message:ae,description:i.createElement("pre",null,te)}):k}}]),a}(i.Component),C=x,t=function(v,a){var l={};for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&a.indexOf(m)<0&&(l[m]=v[m]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,m=Object.getOwnPropertySymbols(v);O<m.length;O++)a.indexOf(m[O])<0&&Object.prototype.propertyIsEnumerable.call(v,m[O])&&(l[m[O]]=v[m[O]]);return l},R={success:A.Z,info:K.Z,error:S.Z,warning:D.Z},Q={success:Y.Z,info:p.Z,error:M.Z,warning:c.Z},F=function(a){var l=a.description,m=a.icon,O=a.prefixCls,f=a.type,k=(l?Q:R)[f]||null;return m?(0,j.wm)(m,i.createElement("span",{className:"".concat(O,"-icon")},m),function(){return{className:n()("".concat(O,"-icon"),(0,G.Z)({},m.props.className,m.props.className))}}):i.createElement(k,{className:"".concat(O,"-icon")})},y=function(a){var l=a.isClosable,m=a.closeText,O=a.prefixCls,f=a.closeIcon,k=a.handleClose;return l?i.createElement("button",{type:"button",onClick:k,className:"".concat(O,"-close-icon"),tabIndex:0},m?i.createElement("span",{className:"".concat(O,"-close-text")},m):f):null},H=function(a){var l=a.description,m=a.prefixCls,O=a.message,f=a.banner,k=a.className,_e=k===void 0?"":k,B=a.style,b=a.onMouseEnter,ee=a.onMouseLeave,ae=a.onClick,te=a.afterClose,X=a.showIcon,z=a.closable,se=a.closeText,P=a.closeIcon,L=P===void 0?i.createElement(T.Z,null):P,g=a.action,W=t(a,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),ne=i.useState(!1),$=(0,U.Z)(ne,2),oe=$[0],Ee=$[1],le=i.useRef(),ye=i.useContext(u.E_),Se=ye.getPrefixCls,Ze=ye.direction,ie=Se("alert",m),Ie=function(fe){var Me;Ee(!0),(Me=W.onClose)===null||Me===void 0||Me.call(W,fe)},Re=function(){var fe=W.type;return fe!==void 0?fe:f?"warning":"info"},re=se?!0:z,de=Re(),ue=f&&X===void 0?!0:X,ce=n()(ie,"".concat(ie,"-").concat(de),(0,G.Z)((0,G.Z)((0,G.Z)((0,G.Z)({},"".concat(ie,"-with-description"),!!l),"".concat(ie,"-no-icon"),!ue),"".concat(ie,"-banner"),!!f),"".concat(ie,"-rtl"),Ze==="rtl"),_e),me=(0,E.Z)(W);return i.createElement(N.ZP,{visible:!oe,motionName:"".concat(ie,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(fe){return{maxHeight:fe.offsetHeight}},onLeaveEnd:te},function(w){var fe=w.className,Me=w.style;return i.createElement("div",(0,xe.Z)({ref:le,"data-show":!oe,className:n()(ce,fe),style:(0,xe.Z)((0,xe.Z)({},B),Me),onMouseEnter:b,onMouseLeave:ee,onClick:ae,role:"alert"},me),ue?i.createElement(F,{description:l,icon:W.icon,prefixCls:ie,type:de}):null,i.createElement("div",{className:"".concat(ie,"-content")},O?i.createElement("div",{className:"".concat(ie,"-message")},O):null,l?i.createElement("div",{className:"".concat(ie,"-description")},l):null),g?i.createElement("div",{className:"".concat(ie,"-action")},g):null,i.createElement(y,{isClosable:!!re,closeText:se,prefixCls:ie,closeIcon:L,handleClose:Ie}))})};H.ErrorBoundary=C;var J=H}}]);
