(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{"7Gu5":function(e,t,a){"use strict";a.r(t);a("T2oS");var n=a("W9HT"),r=(a("Awhp"),a("KrTs")),c=a("k1fw"),i=a("9og8"),s=a("tJVT"),o=(a("Znn+"),a("ZTPi")),u=(a("5NDa"),a("5rEg")),l=a("WmNS"),p=a.n(l),m=a("q1tI"),_=a.n(m),f=a("l+S1"),d=a("y3Kf"),h=(a("DjyN"),a("NUBc")),b=(a("tU7J"),a("wFql")),g=(a("DYRE"),a("zeV3")),v=(a("miYZ"),a("tsqr")),w=a("c+yx"),y=a("WsGo"),O=a("GGyo"),j=a.n(O),E=function(e){var t=e.searchKey,a=void 0===t?"":t,n=e.tabKey,r=e.ws_id,o=e.refresh,u=e.loadingCallback,l=void 0===u?function(){}:u,d=Object(m["useState"])([]),O=Object(s["a"])(d,2),E=O[0],k=O[1],S=Object(m["useState"])({pageNum:1,pageSize:20,total:0}),N=Object(s["a"])(S,2),T=N[0],x=N[1],z=function(){var e=Object(i["a"])(p.a.mark((function e(t){var r,i,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,Object(y["a"])(Object(c["a"])({search_key:a,search_type:n},t));case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:r=e.t0,i=r.data,s=void 0===i?{}:i,200===r.code&&Array.isArray(s.data)&&s.data.length&&"all"===n?(k(s.data),x({pageNum:s.page_num,pageSize:s.page_size,total:s.total})):200===r.code&&Array.isArray(s)&&s.length?(k(s),x({pageNum:r.page_num,pageSize:r.page_size,total:r.total})):(k([]),x({pageNum:1,pageSize:20,total:0}),200!==r.code&&v["default"].error(r.msg||"\u8bf7\u6c42\u5931\u8d25\uff01")),l(!1),e.next=18;break;case 13:e.prev=13,e.t1=e["catch"](0),k([]),x({pageNum:1,pageSize:20,total:0}),l(!1);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();Object(m["useEffect"])((function(){a&&z({page_num:T.pageNum,page_size:T.pageSize})}),[a,n]),Object(m["useEffect"])((function(){a&&z({page_num:T.pageNum,page_size:T.pageSize})}),[o]);var C=function(e){if(e.id&&e.test_suite_id){var t=document.createElement("a");t.target="_blank",t.rel="noopener noreferrer",t.href="/ws/".concat(r,"/suite_search/conf_Details?suite_id=").concat(e.test_suite_id,"&case_id=").concat(e.id,"&suite_name=").concat(encodeURIComponent(e.suite_name),"&conf_name=").concat(encodeURIComponent(e.name)),t.click()}},G=function(e,t){x(Object(c["a"])(Object(c["a"])({},T),{},{pageNum:e,pageSize:t})),z({page_num:e,page_size:t})},L=function(e){if(e&&a){var t=new RegExp("("+a+")","g"),n=e.replace(t,"<span style='color: #f00;opacity:1'>".concat(a,"</span>"));return _.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}})}return e},P=T.total,W=T.pageSize;return _.a.createElement("div",{className:j.a.searchList},E.map((function(e){return _.a.createElement("div",{className:j.a.searchList_item,key:e.id},_.a.createElement("div",{className:j.a.head},_.a.createElement("p",{className:j.a.title,onClick:function(){return C(e)}},L(e.name)),_.a.createElement("div",{className:j.a.author},e.creator_name)),_.a.createElement("span",{className:j.a.subTitle},L(e.suite_name)),_.a.createElement("div",{className:j.a.content_tag},_.a.createElement("span",null,Object(w["l"])(e.run_mode)),_.a.createElement(g["b"],null,e.test_type&&_.a.createElement("div",{className:j.a.type_tag},Object(w["l"])(e.test_type)),e.domain_name_list&&e.domain_name_list.split(",").map((function(e,t){return _.a.createElement("div",{className:j.a.type_tag,key:t},e)})))),_.a.createElement("div",{className:j.a.content},_.a.createElement(b["a"].Paragraph,{ellipsis:{rows:2,expandable:!1},style:{marginBottom:0}},"\u8bf4\u660e\uff1a",L(e.doc))),_.a.createElement("div",{className:"".concat(j.a.content," ").concat(j.a.content_remarks)},_.a.createElement(b["a"].Paragraph,{ellipsis:{rows:2,expandable:!1},style:{marginBottom:0}},"\u5907\u6ce8\uff1a",L(e.description))))})),_.a.createElement(h["a"],{total:T.total,pageSize:T.pageSize,current:T.pageNum,showSizeChanger:!0,hideOnSinglePage:!0,onChange:G,onShowSizeChange:G}),0!==P&&W>=P&&_.a.createElement("div",{className:j.a.little_data_tips},"\uff5e\u5df2\u7ecf\u5230\u5e95\u5566\uff5e"),0===P&&_.a.createElement("div",{className:j.a.no_data_tips},_.a.createElement(f["a"],{style:{fontSize:36,color:"#b3b3b3"}}),_.a.createElement("p",null,"\u672a\u80fd\u627e\u5230\u76f8\u5173\u641c\u7d22"),_.a.createElement("div",null,"\u8bf7\u5c1d\u8bd5\u641c\u7d22\u5176\u5b83\u76f8\u5173\u7684\u5185\u5bb9")),_.a.createElement("div",{className:j.a.footer}))},k=E,S=a("M78s"),N=a.n(S),T=a("WHYC"),x=u["a"].Search,z=o["a"].TabPane,C=function(e){var t=Object(T["h"])(),a=t.ws_id,u=t.keyword,l="string"===typeof u?u:"",h=Object(m["useState"])(400),b=Object(s["a"])(h,2),g=b[0],v=b[1],w=Object(m["useState"])(!1),O=Object(s["a"])(w,2),j=O[0],E=O[1],S=Object(m["useState"])(!1),C=Object(s["a"])(S,2),G=C[0],L=C[1],P=Object(m["useState"])("all"),W=Object(s["a"])(P,2),R=W[0],H=W[1],I=Object(m["useState"])(""),K=Object(s["a"])(I,2),A=K[0],B=K[1],V=Object(m["useState"])({total_num:0,suite_num:0,conf_num:0,domain_num:0}),q=Object(s["a"])(V,2),F=q[0],J=q[1],U=Object(m["useState"])(0),D=Object(s["a"])(U,2),M=D[0],Z=D[1],Y=Object(m["useRef"])(null),Q=function(){var e=Object(i["a"])(p.a.mark((function e(t){var a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["b"])(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:a=e.t0,200===a.code&&a.data&&Object.keys(a.data).length&&J(Object(c["a"])({},a.data));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function X(){var e=window.innerHeight;v(e)}Object(m["useEffect"])((function(){return window.document.title="\u641c\u7d22\u7ed3\u679c",function(){window.document.title="T-One"}}),[]),Object(m["useEffect"])((function(){X()}),[]),Object(m["useEffect"])((function(){return window.addEventListener("resize",X),function(){window.removeEventListener("resize",X)}}),[]),Object(m["useEffect"])((function(){Q({search_key:l}),B(l)}),[l]);var $=function(e){e&&(Q({search_key:e}),B(e),L(!G))},ee=function(e){H(e)},te=function(e){var t=Y.current.scrollTop;Z(t)},ae=function(){Y.current.scrollTo(0,0)},ne=[{name:"\u5168\u90e8",key:"all",fieldName:"total_num"},{name:"Suite",key:"suite",fieldName:"suite_num"},{name:"Conf",key:"conf",fieldName:"conf_num"},{name:"\u9886\u57df",key:"domain",fieldName:"domain_num"}],re={backgroundColor:"#E6F7FF",color:"#1890FF",marginTop:-3},ce={backgroundColor:"#0000000a",color:"#000",marginTop:-3};return _.a.createElement("div",{className:N.a.TestSuiteSearch_wrapper,style:{height:g-50,overflow:"auto"},onScroll:te,ref:Y},_.a.createElement("div",{className:N.a.header,style:{display:"block"}}),_.a.createElement("div",{className:N.a.content,style:{minHeight:g-270}},_.a.createElement(x,{className:N.a.content_search,defaultValue:l,prefix:_.a.createElement(f["a"],{style:{color:"#bfbfbf",marginTop:4,marginRight:8}}),placeholder:"\u8bf7\u8f93\u5165Test Suite\u3001\u9886\u57df\u540d\u79f0\u76f8\u5173\u7684\u68c0\u7d22\u5185\u5bb9",allowClear:!0,enterButton:"\u68c0\u7d22",onSearch:$}),_.a.createElement("div",null,_.a.createElement(o["a"],{defaultActiveKey:"all",onChange:ee},ne.map((function(e,t){return _.a.createElement(z,{key:e.key,tab:_.a.createElement("span",null,e.name," ",_.a.createElement(r["a"],{count:F[e.fieldName],overflowCount:999,showZero:!0,style:R===e.key?re:ce})),disabled:j})}))),_.a.createElement(n["a"],{spinning:j},_.a.createElement(k,{searchKey:A,tabKey:R,ws_id:a,refresh:G,loadingCallback:E})))),_.a.createElement("div",{className:N.a.define_backTop,onClick:ae,style:{display:M>200?"block":"none",paddingTop:7}},_.a.createElement(d["a"],{className:N.a.backTop_icon})))};t["default"]=C},GGyo:function(e,t,a){e.exports={searchList:"searchList___3vW9d",searchList_item:"searchList_item___5xQec",head:"head___2yWJl",title:"title___3R3Rf",author:"author___pGPvj",subTitle:"subTitle___3GNiV",content_tag:"content_tag___14Vo0",type_tag:"type_tag___2CWpe",content:"content___1Hh65",content_remarks:"content_remarks___2fLmP",little_data_tips:"little_data_tips___395rH",no_data_tips:"no_data_tips___3auGs",footer:"footer___25W41"}},M78s:function(e,t,a){e.exports={TestSuiteSearch_wrapper:"TestSuiteSearch_wrapper___1sgot",header:"header___1PC9t",content:"content___15Umy",content_search:"content_search___1me9s",initialPage:"initialPage___3IObk",headerInfo:"headerInfo___m1Xqh",define_backTop:"define_backTop___H91_C",backTop_icon:"backTop_icon___Peemf"}},WsGo:function(e,t,a){"use strict";a.d(t,"i",(function(){return s})),a.d(t,"h",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l})),a.d(t,"g",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"c",(function(){return _})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return d}));var n=a("9og8"),r=a("WmNS"),c=a.n(r),i=a("9kvl"),s=function(){var e=Object(n["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_suite/retrieve/",{method:"GET",params:{total_num:!0}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_suite/retrieve/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/retrieve/quantity/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(c.a.mark((function e(t){var a,n,r,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.search_key,n=t.search_type,r=t.page_num,s=t.page_size,e.abrupt("return",Object(i["h"])("/api/case/test_suite/retrieve/",{method:"POST",params:{page_num:r,page_size:s},data:{search_key:a,search_type:n}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_suite/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_metric/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(n["a"])(c.a.mark((function e(t){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.case_id,e.abrupt("return",Object(i["h"])("/api/case/test_case/detail/".concat(a,"/"),{method:"GET",params:{retrieve:1}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_suite/retrieve/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["h"])("/api/case/test_metric/",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y3Kf:function(e,t,a){"use strict";var n=a("VTBJ"),r=a("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},i=c,s=a("6VBw"),o=function(e,t){return r["createElement"](s["a"],Object(n["a"])(Object(n["a"])({},e),{},{ref:t,icon:i}))};o.displayName="UpOutlined";t["a"]=r["forwardRef"](o)}}]);