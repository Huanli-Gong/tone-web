(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1237,2485],{42579:function(Ye,fn,t){"use strict";t.d(fn,{Z:function(){return K}});var v=t(28991),Be=t(67294),ye={icon:function(Qe,tn){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:Qe}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z",fill:tn}},{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:Qe}}]}},name:"plus-circle",theme:"twotone"},a=ye,Ge=t(27029),n=function(Qe,tn){return Be.createElement(Ge.Z,(0,v.Z)((0,v.Z)({},Qe),{},{ref:tn,icon:a}))},An=Be.forwardRef(n),K=An},95949:function(Ye){Ye.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},32261:function(Ye){Ye.exports={filter:"filter___1IKYx",confirm:"confirm___3RbBO",domain:"domain___1-UgM"}},45896:function(Ye){Ye.exports={warp:"warp___3sqbf",selectCascader:"selectCascader___ei33u"}},22704:function(Ye){Ye.exports={warp:"warp___1vm-z",tree:"tree___2UOGt"}},98025:function(Ye){Ye.exports={warp:"warp___KB6l1",pagination:"pagination___3bije",hidden:"hidden___3iAk1"}},87922:function(Ye){Ye.exports={warp:"warp___31IgT",pagination:"pagination___21nhK",hidden:"hidden___2DJ9Y",row:"row___LOziI",tag_popover_style:"tag_popover_style___17NS3",btn_style:"btn_style___QUzyN"}},99833:function(Ye,fn,t){"use strict";t.d(fn,{f:function(){return Kn}});var v=t(49111),Be=t(19650),ye=t(11849),a=t(22385),Ge=t(89456),n=t(93224),An=t(67294),K=t(95949),jn=t.n(K),Qe=t(1870),tn=t(85893),te=["desc","title"],Kn=function(Je){var dn=Je.desc,tt=Je.title,me=(0,n.Z)(Je,te);return(0,tn.jsxs)(Be.Z,{children:[(0,tn.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:tt}),(0,tn.jsx)(Ge.Z,(0,ye.Z)((0,ye.Z)({overlayClassName:jn().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},me),{},{title:dn,color:"#fff",children:(0,tn.jsx)(Qe.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},60751:function(Ye,fn,t){"use strict";var v=t(57663),Be=t(71577),ye=t(48736),a=t(27049),Ge=t(49111),n=t(19650),An=t(88983),K=t(47933),jn=t(2824),Qe=t(67294),tn=t(32261),te=t.n(tn),Kn=t(24480),L=t(16917),Je=t(85893),dn=function(me){var rt=me.list,on=me.confirm,Gn=me.onConfirm,Ee=me.roleType,j=(0,L.YB)(),G=j.formatMessage,un=(0,Qe.useState)(),r=(0,jn.Z)(un,2),Xe=r[0],kn=r[1],yn=function(at){kn(at.target.value)};return(0,Je.jsxs)("div",{className:te().filter,children:[(0,Je.jsx)(K.ZP.Group,{onChange:yn,value:Xe,children:(0,Je.jsx)(n.Z,{direction:"vertical",children:rt.map(function(e){return(0,Je.jsx)(K.ZP,{className:te().domain,value:e.id,children:Ee==="role"?(0,Kn.u)(e.name,G):e.name},e.id)})})}),(0,Je.jsx)(a.Z,{style:{margin:"10px 0"}}),(0,Je.jsxs)("div",{className:te().confirm,children:[(0,Je.jsx)(Be.Z,{size:"small",type:"link",style:{border:"none"},onClick:function(){on==null||on(),Gn(Xe)},children:(0,Je.jsx)(L._H,{id:"operation.ok"})}),(0,Je.jsx)(Be.Z,{size:"small",type:"text",onClick:function(){on==null||on(),kn(void 0),Gn(void 0)},children:(0,Je.jsx)(L._H,{id:"operation.reset"})})]})]})};fn.Z=dn},18851:function(Ye,fn,t){"use strict";t.r(fn),t.d(fn,{default:function(){return zr}});var v=t(2824),Be=t(18106),ye=t(73272),a=t(67294),Ge=t(20009),n=t(16917),An=t(13062),K=t(71230),jn=t(71194),Qe=t(50146),tn=t(57663),te=t(71577),Kn=t(402),L=t(97272),Je=t(71153),dn=t(60331),tt=t(49111),me=t(19650),rt=t(22385),on=t(89456),Gn=t(34792),Ee=t(48086),j=t(39428),G=t(3182),un=t(32059),r=t(11849),Xe=t(99069),kn=t(1870),yn=t(57119),e=t(85893),at=function(T){var M=T.name,D=T.formatMessage;return M=="cloud"?(0,e.jsx)("div",{children:D({id:"device.cloud"})}):M=="cloud_efficiency"?(0,e.jsx)("div",{children:D({id:"device.cloud_efficiency"})}):M=="cloud_ssd"?(0,e.jsx)("div",{children:D({id:"device.cloud_ssd"})}):M=="cloud_essd"?(0,e.jsx)("div",{children:D({id:"device.cloud_essd"})}):(0,e.jsx)("div",{children:"-"})},it=function(T,M){var D={cloud:M({id:"device.cloud"}),cloud_efficiency:M({id:"device.cloud_efficiency"}),cloud_ssd:M({id:"device.cloud_ssd"}),cloud_essd:M({id:"device.cloud_essd"})};return D[T]},st=function(T){var M,D;return T[T.length-1]!=="latest"?T[T.length-1]:"".concat((M=T[1].props)===null||M===void 0?void 0:M.children,":").concat((D=T[2].props)===null||D===void 0?void 0:D.children,":latest")},lt=at,Zt=t(37763),zn=t.n(Zt),dt=t(94955),C=t(13090),ee=t(39067),ie=t(27687),rn=t(62865),$=t(13958),Qn=t(57338),ot=t(440),na=t(20228),It=t(11382),ta=t(54029),_t=t(79166),ra=t(77883),Jn=t(61241),aa=t(36877),ut=t(75948),ia=t(88983),In=t(47933),sa=t(89032),m=t(15746),la=t(47673),vn=t(4107),Ht=t(86582),da=t(9715),z=t(20526),oa=t(43358),cn=t(34041),re=t(10938),Mt=t(21318),Xn=t(60035),se=t(24480),tr=t(42579),Dt=t(28991),rr={icon:function(T,M){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:T}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z",fill:M}},{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:T}}]}},name:"minus-circle",theme:"twotone"},ar=rr,ir=t(27029),sr=function(T,M){return a.createElement(ir.Z,(0,Dt.Z)((0,Dt.Z)({},T),{},{ref:M,icon:ar}))},lr=a.forwardRef(sr),dr=lr,or=t(45896),Wn=t.n(or),ur=t(27047),Ot=t(52653),jt=t(99833),cr=t(5149),Et=cn.Z.Option,Pt=[{value:"aliyun_eci",label:"aliyun_eci",isLeaf:!1},{value:"aliyun_ecs",label:"aliyun_ecs",isLeaf:!1}],fr=function(T){return Object.prototype.toString.call(T)==="[object Array]"},vr=function(T){return Object.prototype.toString.call(T)==="[object Object]"},pr=function(T){var M=[{param_key:"",param_value:""}];return fr(T)&&JSON.stringify(T)==="[]"||vr(T)&&JSON.stringify(T)==="{}"?M:T},mr=function(T){var M,D,Y,F,le=T.onRef,i=T.is_instance,N=T.onSuccess,he=T.type,Ze=(0,n.YB)(),h=Ze.formatMessage,de=(0,n.tT)("disclaimer"),be=de.openModal,Re=de.handleDisclaimerOpen,Le=(0,Ge.UO)(),He=Le.ws_id,Ae=z.Z.useForm(),$e=(0,v.Z)(Ae,1),U=$e[0],Me=(0,a.useState)({list:[],isQuery:""}),De=(0,v.Z)(Me,2),Ke=De[0],Ce=De[1],_e=(0,a.useState)(Pt),ae=(0,v.Z)(_e,2),oe=ae[0],fe=ae[1],ze=(0,a.useState)(!1),qe=(0,v.Z)(ze,2),A=qe[0],w=qe[1],ve=(0,a.useState)(!1),ne=(0,v.Z)(ve,2),H=ne[0],k=ne[1],f=(0,a.useState)([]),b=(0,v.Z)(f,2),ge=b[0],X=b[1],We=(0,a.useState)([]),V=(0,v.Z)(We,2),Se=V[0],Te=V[1],Mn=(0,a.useState)([]),Dn=(0,v.Z)(Mn,2),On=Dn[0],gn=Dn[1],Bn=(0,a.useState)(!1),En=(0,v.Z)(Bn,2),u=En[0],Oe=En[1],Pn=(0,a.useState)([]),Ne=(0,v.Z)(Pn,2),pn=Ne[0],mn=Ne[1],Cn=(0,a.useState)({}),xn=(0,v.Z)(Cn,2),Ue=xn[0],Zn=xn[1],E=(0,a.useState)(!0),Rn=(0,v.Z)(E,2),ln=Rn[0],nn=Rn[1],Nn=(0,a.useState)({}),Ln=(0,v.Z)(Nn,2),ke=Ln[0],$n=Ln[1],qn=(0,a.useState)({validate:!0,meg:""}),Un=(0,v.Z)(qn,2),Sn=Un[0],wn=Un[1],bn=(0,a.useState)(!0),Z=(0,v.Z)(bn,2),d=Z[0],l=Z[1],O=(0,a.useState)(""),P=(0,v.Z)(O,2),q=P[0],_=P[1],o=(0,a.useState)(!1),c=(0,v.Z)(o,2),W=c[0],J=c[1],an=(0,a.useState)(!0),pe=(0,v.Z)(an,2),hn=pe[0],Vn=pe[1],Fn=(0,a.useState)(),Bt=(0,v.Z)(Fn,2),wt=Bt[0],Nt=Bt[1],Wr=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g,S,B,ue,R,Ve,Fe,Ie,xe;return(0,j.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,re.L0)({cluster_id:s});case 2:if(Q.t0=Q.sent,Q.t0){Q.next=5;break}Q.t0={};case 5:I=Q.t0,p=I.code,g=I.data,S=g===void 0?[]:g,p===200&&!!S.length?(B=S[S.length-1].test_server,ue=B===void 0?{}:B,R=ue.manufacturer,Ve=ue.ak_id,Fe=ue.region,Ie=ue.zone,Ve&&R&&Fe&&Ie&&(Vn(!1),_(R),Oe(!0),xe={ak_id:Ve,id:R,region:Fe,zone:Ie},i?Promise.all([ht(xe),mt(xe)]).then(function(){w(!1),nn(!1)}):Promise.all([ht(xe),vt(xe),et(xe),pt(xe)]).then(function(){w(!1),nn(!1)}),U.setFieldsValue({manufacturer:[R,Ve],region:[Fe,Ie]}))):Vn(!0);case 10:case"end":return Q.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),vt=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p;return(0,j.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,re.BS)(s);case 2:I=S.sent,p=I.data,X(p||[]),(!p||p.length===0)&&Vr();case 6:case"end":return S.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),et=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g;return(0,j.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,re.iB)(s);case 2:I=B.sent,p=I.data,g=p===void 0?[]:p,Te(g);case 6:case"end":return B.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),pt=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p;return(0,j.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,re.F$)(s);case 2:I=S.sent,p=I.data,Zn(p);case 5:case"end":return S.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),mt=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p;return(0,j.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,re.Ti)(s);case 2:I=S.sent,p=I.data,gn(p||[]);case 5:case"end":return S.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),Br=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g,S;return(0,j.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return I=s[s.length-1],ue.next=3,(0,re.mN)({ak_id:I.ak_id,region:I.value});case 3:p=ue.sent,g=p.data,S=p.code,S===200?(I.children=g&&g.map(function(R){return{label:(0,Xn.Px)(R.id),value:R.id}}),mn((0,Ht.Z)(pn))):setTimeout(function(){I.children=[],mn((0,Ht.Z)(pn))},500);case 7:case"end":return ue.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),Nr=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g,S,B,ue,R;return(0,j.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return I=s[s.length-1],Fe.next=3,(0,re.aB)({ws_id:He,provider:I.value});case 3:p=Fe.sent,g=p.code,S=p.data,B=S===void 0?[]:S,ue=p.msg,g===200?(R=oe.map(function(Ie){return Ie.value===I.value?(0,r.Z)((0,r.Z)({},Ie),{},{children:B.map(function(xe){return{label:xe.name,value:xe.id}})}):Ie}),fe(R)):(setTimeout(function(){var Ie=oe.map(function(xe){return xe.value===I.value?(0,r.Z)((0,r.Z)({},xe),{},{children:[]}):xe});fe(Ie)},500),wn({validate:!1,meg:ue||h({id:"device.no.compliant.AK"})}),U.setFieldsValue({manufacturer:void 0}));case 9:case"end":return Fe.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),bt={instance_type:void 0,instance_type_one:void 0,instance_type_two:void 0,storage_type:void 0,storage_size:40,storage_number:0,system_disk_category:void 0,system_disk_size:40},Ur=function(){U.setFieldsValue((0,r.Z)((0,r.Z)({},bt),{},{region:void 0,image:void 0}))},Ut=function(){U.setFieldsValue((0,r.Z)((0,r.Z)({},bt),{},{image:void 0}))},Vr=function(){U.setFieldsValue((0,r.Z)({},bt))},Yr=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s,I){var p,g,S,B,ue,R,Ve,Fe,Ie,xe;return(0,j.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(hn){Q.next=6;break}nn(!0),Ut(),s&&s.length?(p=s[0],_(p),w(!0),g=U.getFieldValue("region"),S={ak_id:s[1],region:g[0],zone:g[1]},i?Promise.all([mt(S)]).then(function(){w(!1),nn(!1)}):Promise.all([vt(S),et(S),pt(S)]).then(function(){w(!1),nn(!1)})):(X([]),gn([]),Te([]),Zn({})),Q.next=26;break;case 6:if(nn(!0),Ur(),!(s&&s.length)){Q.next=24;break}return Q.next=11,(0,re.Yh)({ak_id:s[1]});case 11:B=Q.sent,ue=B.code,R=B.data,Ve=R===void 0?[]:R,Fe=B.msg,Ie=[],ue===200?(Ie=Ve==null?void 0:Ve.map(function(en){return{value:en.id,label:(0,Xn.Px)(en.id),ak_id:s[1],isLeaf:!1}}),wn({validate:!0,meg:""})):wn({validate:!1,meg:Fe||h({id:"device.no.compliant.AK"})}),mn(Ie),l(!!Ie.length),xe=s[0],_(xe.value),Q.next=26;break;case 24:wn({validate:!0,meg:""}),mn([]);case 26:case"end":return Q.stop()}},x)}));return function(s,I){return y.apply(this,arguments)}}(),ht=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g,S,B,ue,R,Ve,Fe,Ie,xe;return(0,j.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return w(!0),Q.next=3,(0,re.aB)({ws_id:He,provider:s.id});case 3:return I=Q.sent,p=I.data,g=p===void 0?[]:p,Q.next=8,(0,re.Yh)({ak_id:s.ak_id});case 8:return S=Q.sent,B=S.data,ue=B===void 0?[]:B,Q.next=13,(0,re.mN)({ak_id:s.ak_id,region:s.region});case 13:R=Q.sent,Ve=R.data,Fe=Ve===void 0?[]:Ve,Ie=ue.map(function(en){return en.id==s.region?{value:en.id,label:(0,Xn.Px)(en.id),ak_id:s.ak_id,isLeaf:!1,children:Fe.map(function(_n){return{label:_n.id,value:_n.id}})}:{value:en.id,label:(0,Xn.Px)(en.id),ak_id:s.ak_id,isLeaf:!1}}),xe=Pt.map(function(en){return en.value===s.id?{value:s.id,label:s.id,isLeaf:!1,children:g.map(function(_n){return{label:_n.name,value:_n.id}})}:en}),fe(xe),mn(Ie),w(!1);case 21:case"end":return Q.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),Gr=function(x,s){if(Array.isArray(s)&&s.length){var I={ak_id:s[0].ak_id,region:x[0],zone:x[1]};w(!0),gn([]),Te([]),X([]),Zn({}),U.setFieldsValue({image:void 0,instance_id:void 0,instance_type:void 0,storage_type:void 0,system_disk_category:void 0}),Oe(!0),i?Promise.all([mt(I)]).then(function(){w(!1),nn(!1)}):Promise.all([vt(I),et(I),pt(I)]).then(function(){w(!1),nn(!1)})}else Ut()},Qr=function(x){var s=U.getFieldValue("region"),I=U.getFieldValue("manufacturer"),p={ak_id:I[1],region:s[0],zone:s[1],instance_type:x};et(p)},Jr=function(x){Nt(x),$n({}),he==="cluster"&&Wr(x),k(!0),Oe(!1),gn([]),Te([]),X([]),mn([]),Zn({}),Ce((0,r.Z)((0,r.Z)({},Ke),{},{isQuery:"add",list:[]})),U.resetFields()};(0,a.useImperativeHandle)(le,function(){return{newMachine:function(x){Jr(x)},editMachine:function(x){Xr(x)}}});var Xr=function(x){var s;Vn(!0),Nt(x.cluster_id),$n(x),Oe(!0),k(!0);var I=x.tag_list.map(function(R){return R.id});Ce((0,r.Z)((0,r.Z)({},Ke),{},{isQuery:"edit",list:I}));var p=(0,r.Z)({},x);p.extra_param=pr(p.extra_param),p.tags=((s=p.tag_list)===null||s===void 0?void 0:s.map(function(R){return R.id}))||[],p.is_instance=p.is_instance?1:0,p.manufacturer=[p.manufacturer,p.ak_id],p.region=[p.region,p.zone],p.kernel_install=p.kernel_install?1:0,_(x.manufacturer);var g={ak_id:p.ak_id,region:p.region[0],zone:p.region[1],id:p.manufacturer[0],instance_type:p.instance_type};if(p.ak_name=="aliyun_eci"){var S=p.instance_type,B=S.indexOf("C"),ue=S.indexOf("G");p.instance_type_one=Number(S.substring(0,B)),p.instance_type_two=Number(S.substring(B+1,ue))}i?Promise.all([ht(g),mt(g)]).then(function(){w(!1),nn(!1)}):Promise.all([ht(g),vt(g),et(g),pt(g)]).then(function(){w(!1),nn(!1)}),U.setFieldsValue(p)};(0,a.useEffect)(function(){if(Object.keys(ke).length&&ke.image&&Se.length){var y=Se.filter(function(B){return B.id===ke.image});if(q==="aliyun_eci"){var x=y.length?y[0].platform:"",s=x?[x,ke.image]:void 0;U.setFieldsValue({image:s})}else if(y.length){var I=y[0].owner_alias,p=y[0].platform,g=y[0].os_name,S=I?[(0,se.Wj)(I,h),p,g,ke.image]:void 0;U.setFieldsValue({image:S})}}},[Se]);var Vt=function(){var y=(0,G.Z)((0,j.Z)().mark(function x(s){var I,p,g,S,B,ue,R,Ve,Fe,Ie,xe,Yn,Q,en,_n,kt,gt,Gt,Qt,Jt,xt,nt,Xt,Tn,qt,er,nr;return(0,j.Z)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(J(!0),p=(I=s.extra_param)===null||I===void 0?void 0:I.filter(function(sn){return sn.param_key}),g=(0,r.Z)((0,r.Z)({},s),{},{ws_id:He,is_instance:i,extra_param:p}),s.hasOwnProperty("manufacturer")&&(g.manufacturer=s==null?void 0:s.manufacturer[0],g.ak_id=s.manufacturer[1],g.region=s.region[0],g.zone=s.region[1]),s.hasOwnProperty("instance_id")&&(S=s.instance_id.label,g.instance_id=s.instance_id.value,g.name=S.indexOf(" / ")>-1?S.split(" / ")[1]:S),q==="aliyun_eci"?g.instance_type="".concat(s.instance_type_one,"C").concat(s.instance_type_two,"G"):g.instance_type=s.instance_type,s.hasOwnProperty("image")&&s.image.length?q==="aliyun_eci"?(g.image=s.image[1],Ve=(0,se.Eu)(Se,"platform")||[],Fe=Ve.find(function(sn){return sn.value==s.image[0]})||{},Ie=(B=Fe.children)===null||B===void 0?void 0:B.find(function(sn){return sn.value==s.image[1]}),g.image_name=(ue=Ie.label)===null||ue===void 0||(R=ue.props)===null||R===void 0?void 0:R.children):s.image[3]==="latest"?(xe="".concat(s.image[1],":").concat(s.image[2],":").concat(s.image[3]),g.image=xe,g.image_name=xe):s.image.indexOf(":latest")>0?(g.image=s.image,g.image_name=s.image):(g.image=s.image[3],gt=(0,se.We)(Se,"owner_alias","platform","os_name")||[],Gt=(gt==null?void 0:gt.find(function(sn){return sn.value==s.image[0]}))||{},Qt=((Yn=Gt.children)===null||Yn===void 0?void 0:Yn.find(function(sn){return sn.value==s.image[1]}))||{},Jt=((Q=Qt.children)===null||Q===void 0?void 0:Q.find(function(sn){return sn.value==s.image[2]}))||{},xt=(en=Jt.children)===null||en===void 0?void 0:en.find(function(sn){return sn.value==s.image[3]}),g.image_name=xt==null||(_n=xt.label)===null||_n===void 0||(kt=_n.props)===null||kt===void 0?void 0:kt.children):g.image=void 0,g.description=s.description||"",g.cluster_id=wt,nt=ke.id,Xt=ke.machineId,he!=="cluster"){je.next=23;break}if(!nt){je.next=17;break}return je.next=14,(0,re.oz)(Xt,(0,r.Z)({},g));case 14:je.t0=je.sent,je.next=20;break;case 17:return je.next=19,(0,re.MH)((0,r.Z)({},g));case 19:je.t0=je.sent;case 20:Tn=je.t0,je.next=33;break;case 23:if(!nt){je.next=29;break}return je.next=26,(0,re.cm)(nt,(0,r.Z)({},g));case 26:je.t1=je.sent,je.next=32;break;case 29:return je.next=31,(0,re.X6)((0,r.Z)({},g));case 31:je.t1=je.sent;case 32:Tn=je.t1;case 33:Tn.code===200?(Ee.default.success(h({id:"operation.success"})),he==="cluster"?N({parentId:wt}):N(g.is_instance||i,nt),Tt()):Tn.code===201?(qt=Tn.msg,er=Tn.link_msg,nr=(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:qt.replace(er,'<a href="/system/user" target="_blank">$&</a>')}}),Ee.default.warning(nr)):(0,se.EV)(Tn.code,Tn.msg),J(!1);case 35:case"end":return je.stop()}},x)}));return function(s){return y.apply(this,arguments)}}(),Yt=function(){U.validateFields().then(function(x){var s=x.extra_param||[];if(s.length){var I=s.map(function(g){return g.param_key}),p=new Set(I);p.size==I.length?Vt(x):(Ee.default.warn("\u6269\u5C55\u5B57\u6BB5\u91CD\u540D\uFF0C\u8BF7\u4FEE\u6539\u540E\u63D0\u4EA4!!!"),U.scrollToField("extra_param"))}else Vt(x)})},qr=(0,a.useCallback)(function(y){y&&Yt()},[wt,Se]),Tt=function(){l(!0),_(""),$n({}),k(!1),J(!1),U.resetFields(),fe([{value:"aliyun_eci",label:"aliyun_eci",isLeaf:!1},{value:"aliyun_ecs",label:"aliyun_ecs",isLeaf:!1}])},ea=(0,a.useMemo)(function(){return ke&&ke.state==="Occupied"},[ke]);return(0,e.jsxs)(ot.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(n._H,{id:ke.id?i?"device.device.edit":"device.config.edit":i?"device.add.btn":"device.config.btn"}),width:724,onClose:Tt,open:H,bodyStyle:{paddingBottom:80},destroyOnClose:!0,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(te.Z,{onClick:Tt,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(te.Z,{onClick:ke.id?Yt:Re,type:"primary",loading:W,children:(0,e.jsx)(n._H,{id:"operation.ok"})})]})}),children:[(0,e.jsx)(It.Z,{spinning:A,children:(0,e.jsx)(z.Z,{layout:"vertical",form:U,initialValues:{instance_type_one:1,instance_type_two:1,system_disk_size:40,storage_size:40,storage_number:0,release_rule:1,kernel_install:1,bandwidth:10,storage_type:"cloud_efficiency",extra_param:[{param_key:"",param_value:""}],channel_type:"toneagent",state:"Available",mode:"passive"},children:(0,e.jsxs)(K.Z,{gutter:16,children:[i?null:(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{name:"name",label:(0,e.jsx)(n._H,{id:"device.name"}),validateTrigger:"onBlur",rules:[{required:!0,message:h({id:"device.name.message"})},function(){return{validator:function(){var y=(0,G.Z)((0,j.Z)().mark(function s(I,p){var g,S,B;return(0,j.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!p){R.next=12;break}return g={is_instance:0,name:p,ws_id:He},S=ke.id?(0,r.Z)((0,r.Z)({},g),{},{cloud_server_id:ke.id}):(0,r.Z)({},g),R.next=5,(0,re.x1)(S);case 5:if(R.t0=R.sent,R.t0){R.next=8;break}R.t0={};case 8:if(B=R.t0,B.code!==200){R.next=11;break}return R.abrupt("return",Promise.resolve());case 11:return R.abrupt("return",Promise.reject(B.msg||h({id:"validator.failed"})));case 12:case"end":return R.stop()}},s)}));function x(s,I){return y.apply(this,arguments)}return x}()}},{pattern:/^[A-Za-z][A-Za-z0-9\._-]{1,32}$/,message:h({id:"device.name.message"})}],children:(0,e.jsx)(vn.Z,{autoComplete:"off",placeholder:h({id:"please.enter"})})})}),i?null:(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{name:"release_rule",label:(0,e.jsx)(n._H,{id:"device.release_rule"}),rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsxs)(In.ZP.Group,{children:[(0,e.jsx)(In.ZP,{value:0,children:(0,e.jsx)(n._H,{id:"operation.not.release"})}),(0,e.jsx)(In.ZP,{value:1,children:(0,e.jsx)(n._H,{id:"operation.release"})}),(0,e.jsx)(In.ZP,{value:2,children:(0,e.jsx)(jt.f,{title:h({id:"device.failed.save"}),desc:h({id:"device.failed.save.24h"})})})]})})}),!ke.id||!i?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{name:"manufacturer",label:(0,e.jsx)(n._H,{id:"device.manufacturer/ak"}),validateStatus:Sn.validate?"":"error",help:Sn.validate?void 0:Sn.meg,rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(ut.Z,{disabled:he==="cluster"&&!hn,options:oe,loadData:Nr,onChange:Yr,dropdownMenuColumnStyle:{width:165},dropdownClassName:Wn().selectCascader})})}):null,q===""?null:!ke.id||!i?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:"Region/Zone",name:"region",validateStatus:d?"":"error",help:d?void 0:h({id:"device.region/zone"}),rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(ut.Z,{disabled:(pn==null?void 0:pn.length)===0||he==="cluster"&&!hn,options:pn,loadData:Br,onChange:Gr,dropdownMenuColumnStyle:{width:165},dropdownClassName:Wn().selectCascader})})}):null,u&&!ke.id&&i?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.own.server"}),name:"instance_id",rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(cn.Z,{showSearch:!0,optionFilterProp:"children",placeholder:h({id:"please.select"}),labelInValue:!0,disabled:On.length==0,filterOption:function(x,s){return s.children.toLowerCase().indexOf(x.toLowerCase())>=0},children:On.map(function(y,x){return(0,e.jsx)(Et,{value:y.id,children:y.ip?"".concat(y.ip," / ").concat(y.name):y.name},x)})})})}):null,u?i?null:(0,e.jsx)(e.Fragment,{children:q==="aliyun_eci"?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsxs)(K.Z,{children:[(0,e.jsxs)(m.Z,{span:8,style:{display:"flex",alignItems:"flex-start"},children:[(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.instance_type"}),name:"instance_type_one",rules:[{required:!0,message:h({id:"please.enter"})}],children:(0,e.jsx)(Jn.Z,{min:1,style:{width:70},placeholder:h({id:"device.spec.size"}),disabled:ln||Se.length===0})}),(0,e.jsx)("span",{style:{marginTop:"30px",background:"#fafafa",padding:"4px 10px",border:"1px solid #d9d9d9",borderLeft:"none"},children:"C"})]}),(0,e.jsxs)(m.Z,{span:16,style:{display:"flex",alignItems:"flex-start",paddingLeft:6},children:[(0,e.jsx)(z.Z.Item,{label:"",name:"instance_type_two",rules:[{required:!0,message:h({id:"please.enter"})}],children:(0,e.jsx)(Jn.Z,{min:1,style:{width:70,marginTop:30},placeholder:h({id:"device.spec.size"}),disabled:ln||Se.length===0})}),(0,e.jsx)("span",{style:{marginTop:"30px",background:"#fafafa",padding:"4px 10px",border:"1px solid #d9d9d9",borderLeft:"none"},children:"G"})]})]})}):(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.instance_type"}),name:"instance_type",rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(cn.Z,{disabled:ln||Se.length===0,showSearch:!0,placeholder:h({id:"please.select"}),optionFilterProp:"children",filterOption:function(x,s){return s.children.toLowerCase().indexOf(x.toLowerCase())>=0},onSelect:Qr,children:ge==null?void 0:ge.map(function(y,x){return(0,e.jsx)(Et,{value:y.Value,children:y.Value},x)})})})})}):null,u?i?null:q==="aliyun_eci"?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.image"}),name:"image",rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(ut.Z,{placeholder:h({id:"please.select"}),disabled:Se.length===0,options:(0,se.Eu)(Se,"platform"),displayRender:st,dropdownMatchSelectWidth:!0,dropdownClassName:Wn().selectCascader})})}):(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.image"}),name:"image",rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsx)(ut.Z,{placeholder:h({id:"please.select"}),disabled:Se.length===0,options:(0,se.We)(Se,"owner_alias","platform","os_name"),displayRender:st,dropdownMenuColumnStyle:{width:(724-48)/4},dropdownClassName:Wn().selectCascader})})}):null,u&&q!=="aliyun_eci"&&!i?(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.system.disk"}),name:"system_disk_category",rules:[{required:!0,message:h({id:"please.select"})}],children:(Ue==null||(M=Ue.sys_cat)===null||M===void 0?void 0:M.length)===0?(0,e.jsx)(cn.Z,{placeholder:h({id:"device.resource.shortage"}),disabled:!0}):(0,e.jsx)(cn.Z,{placeholder:h({id:"please.select"}),disabled:ln,options:Ue==null||(D=Ue.sys_cat)===null||D===void 0?void 0:D.map(function(y){return{label:y.title,value:y.value}})})})}):null,u&&q!=="aliyun_eci"&&!i?(0,e.jsxs)(m.Z,{span:4,style:{display:"flex",alignItems:"flex-start"},children:[(0,e.jsx)(z.Z.Item,{name:"system_disk_size",label:" ",rules:[{required:!1,message:h({id:"please.select"})}],children:(0,e.jsx)(Jn.Z,{placeholder:h({id:"device.spec.size"}),style:{width:70},min:20,max:500,disabled:ln||Se.length===0})}),(0,e.jsx)("span",{style:{marginTop:"30px",background:"#fafafa",padding:"4px 10px",border:"1px solid #d9d9d9",borderLeft:"none"},children:"G"})]}):null,u&&q!=="aliyun_eci"&&!i?(0,e.jsx)(m.Z,{span:4,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.storage_type"}),name:"storage_type",children:(Ue==null||(Y=Ue.data_cat)===null||Y===void 0?void 0:Y.length)==0?(0,e.jsx)(cn.Z,{placeholder:h({id:"device.resource.shortage"}),disabled:!0}):(0,e.jsx)(cn.Z,{placeholder:h({id:"please.select"}),disabled:ln,options:Ue==null||(F=Ue.data_cat)===null||F===void 0?void 0:F.map(function(y){return{label:y.title,value:y.value}})})})}):null,u&&q!=="aliyun_eci"&&!i?(0,e.jsxs)(m.Z,{span:4,style:{display:"flex",alignItems:"flex-start"},children:[(0,e.jsx)(z.Z.Item,{name:"storage_size",label:" ",rules:[{required:!1,message:h({id:"please.enter"})}],children:(0,e.jsx)(Jn.Z,{placeholder:h({id:"device.spec.size"}),style:{width:70},min:20,max:500,disabled:ln||Se.length===0})}),(0,e.jsx)("span",{style:{marginTop:"30px",background:"#fafafa",padding:"4px 10px",border:"1px solid #d9d9d9",borderLeft:"none"},children:"G"})]}):null,u&&q!=="aliyun_eci"&&!i?(0,e.jsxs)(m.Z,{span:4,style:{display:"flex",alignItems:"flex-start"},children:[(0,e.jsx)(z.Z.Item,{name:"storage_number",label:" ",rules:[{required:!1,message:h({id:"please.enter"})}],children:(0,e.jsx)(Jn.Z,{placeholder:h({id:"device.quantity"}),style:{width:70},min:0,max:16,disabled:ln||Se.length===0})}),(0,e.jsx)("span",{style:{marginTop:"30px",background:"#fafafa",padding:"4px 10px",border:"1px solid #d9d9d9",borderLeft:"none"},children:(0,e.jsx)(n._H,{id:"device.one"})})]}):null,i?null:(0,e.jsx)(m.Z,{span:12,className:Wn().warp,children:(0,e.jsx)(z.Z.Item,{name:"bandwidth",label:(0,e.jsx)(n._H,{id:"device.bandwidth"}),rules:[{required:!0,message:h({id:"please.enter"})}],children:(0,e.jsx)(vn.Z,{type:"number",min:10,style:{width:"100%"},addonAfter:"Mbit/s",placeholder:h({id:"please.enter"})})})}),i?null:(0,e.jsx)(m.Z,{span:24,className:Wn().warp,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(jt.f,{title:h({id:"device.extended.fields"}),desc:h({id:"device.aliyun.params"})}),labelAlign:"left",style:{marginBottom:0},children:(0,e.jsx)(z.Z.List,{name:"extra_param",children:function(x,s){var I=s.add,p=s.remove;return x.map(function(g,S){return(0,e.jsxs)(K.Z,{gutter:20,style:{marginBottom:8},children:[(0,e.jsx)(m.Z,{span:11,children:(0,e.jsxs)(K.Z,{children:[(0,e.jsx)(m.Z,{span:4,style:{paddingTop:4},children:(0,e.jsx)("span",{children:"Key:"})}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(z.Z.Item,{name:[g.name,"param_key"],children:(0,e.jsx)(vn.Z,{})})})]})}),(0,e.jsx)(m.Z,{span:11,children:(0,e.jsxs)(K.Z,{children:[(0,e.jsx)(m.Z,{span:4,style:{paddingTop:4},children:(0,e.jsx)("span",{children:"Value:"})}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(z.Z.Item,{name:[g.name,"param_value"],children:(0,e.jsx)(vn.Z,{})})})]})}),(0,e.jsx)(m.Z,{span:2,style:{paddingTop:5},children:(0,e.jsxs)(me.Z,{children:[S===x.length-1&&(0,e.jsx)(tr.Z,{onClick:function(){I()},style:{cursor:"pointer"}}),x.length>1&&(0,e.jsx)(dr,{style:{cursor:"pointer"},twoToneColor:"#E02020",onClick:function(){return p(g.name)}})]})})]},g.key)})}})})}),(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(Mt.Z,{})}),he==="cluster"?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{name:"kernel_install",label:(0,e.jsx)(n._H,{id:"device.kernel_install"}),rules:[{required:!0,message:h({id:"please.select"})}],children:(0,e.jsxs)(In.ZP.Group,{children:[(0,e.jsx)(In.ZP,{value:1,children:(0,e.jsx)(n._H,{id:"operation.yes"})}),(0,e.jsx)(In.ZP,{value:0,children:(0,e.jsx)(n._H,{id:"operation.no"})})]})})}):null,he==="cluster"?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.var_name"}),name:"var_name",rules:[{required:!0,message:h({id:"placeholder.enter.device.var_name"})}],children:(0,e.jsx)(vn.Z,{autoComplete:"off",placeholder:h({id:"please.enter"})})})}):null,he==="cluster"&&!!i?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{name:"private_ip",label:(0,e.jsx)(jt.f,{title:h({id:"device.private_ip"}),desc:h({id:"device.private_ip.desc"})}),children:(0,e.jsx)(vn.Z,{autoComplete:"off",placeholder:h({id:"please.enter"})})})}):null,he==="standalone"?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(Ot.Z,(0,r.Z)({},Ke))}):null,(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.channel_type"}),name:"channel_type",rules:[{required:!0,message:h({id:"device.channel_type.message"})}],children:(0,e.jsx)(ur.k,{disabled:"opensource"})})}),i?(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.usage.state"}),name:"state",hasFeedback:!0,rules:[{required:!0,message:h({id:"device.usage.state.message"})}],children:(0,e.jsxs)(cn.Z,{placeholder:h({id:"device.usage.state.message"}),disabled:ea,children:[(0,e.jsx)(cn.Z.Option,{value:"Available",children:(0,e.jsx)(_t.Z,{status:"success",text:"Available"})}),(0,e.jsx)(cn.Z.Option,{value:"Reserved",children:(0,e.jsx)(_t.Z,{status:"default",text:"Reserved"})}),(0,e.jsx)(cn.Z.Option,{value:"Unusable",children:(0,e.jsx)(_t.Z,{status:"default",text:"Unusable"})})]})})}):null,(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.description"}),name:"description",children:(0,e.jsx)(vn.Z.TextArea,{rows:3,placeholder:h({id:"please.enter"})})})}),!i&&!1]})})}),be&&(0,e.jsx)(cr.Z,{onOk:qr})]})},yt=mr,ct=t(71459),Ct=t(1693),ua=t(24793),Hn=t(97183),hr=t(87922),Pe=t.n(hr),gr=(0,a.forwardRef)(function(we,T){var M,D=(0,n.YB)(),Y=D.formatMessage,F=(0,a.useState)(),le=(0,v.Z)(F,2),i=le[0],N=le[1],he=(0,a.useState)(),Ze=(0,v.Z)(he,2),h=Ze[0],de=Ze[1],be=(0,a.useState)(!1),Re=(0,v.Z)(be,2),Le=Re[0],He=Re[1],Ae=(0,a.useState)(!0),$e=(0,v.Z)(Ae,2),U=$e[0],Me=$e[1],De=(0,a.useState)(!1),Ke=(0,v.Z)(De,2),Ce=Ke[0],_e=Ke[1],ae=(0,a.useRef)(null),oe=function(){var A=(0,G.Z)((0,j.Z)().mark(function w(ve){var ne,H,k;return(0,j.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Me(!0),b.next=3,(0,Ct.vq)({ip:ve.private_ip,channel_type:ve.channel_type});case 3:ne=b.sent,H=ne.code,k=ne.data,He(H===200?k:ve.channel_state),Me(!1);case 8:case"end":return b.stop()}},w)}));return function(ve){return A.apply(this,arguments)}}();(0,a.useImperativeHandle)(T,function(){return{show:function(w,ve){_e(!0),de(ve),N(w),oe(w)}}});var fe=function(){_e(!1),N(null)},ze=function(w){var ve;(ve=ae.current)===null||ve===void 0||ve.show((0,r.Z)((0,r.Z)({},w),{},{detailData:[w==null?void 0:w.private_ip],radio_type:"cloudManage"}))},qe=function(){};return(0,e.jsxs)(ot.Z,{maskClosable:!1,keyboard:!1,forceRender:!0,title:(0,e.jsx)(n._H,{id:"device.details"}),width:"510",open:Ce,onClose:fe,children:[(0,e.jsxs)(It.Z,{spinning:U,children:[(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.hardware"})}),!!h&&(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.instance.id"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.instance_id})]}),!!h&&(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.ip.address"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.private_ip})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsx)(m.Z,{span:6,children:"Region/Zone:"}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.region_zone})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.instance_type"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.instance_type})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.bandwidth"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.bandwidth})]}),(i==null?void 0:i.manufacturer)!=="aliyun_eci"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.system.disk"}),":"]}),(0,e.jsxs)(m.Z,{span:18,children:[it(i==null?void 0:i.system_disk_category,Y),"/",i==null?void 0:i.system_disk_size,"G"]})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.storage_type"}),":"]}),(0,e.jsxs)(m.Z,{span:18,children:[it(i==null?void 0:i.storage_type,Y),"/",i==null?void 0:i.storage_size,"G/",i==null?void 0:i.storage_number,"\u4E2A"]})]})]})]}),(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.software"})}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.image"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.image_name})]})]}),!!h&&(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.usage.state"})}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.server.state"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.real_state})]})]}),!!h&&(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.channel_type"})}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsx)(m.Z,{span:6,children:"Channel:"}),(0,e.jsxs)(m.Z,{span:18,children:[(0,e.jsx)("span",{children:i==null?void 0:i.channel_type}),(0,e.jsx)("span",{className:Pe().btn_style,onClick:function(){return ze(i)},children:(0,e.jsx)(n._H,{id:"device.redeploy"})})]})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.state"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:Le==null?void 0:Le.toString()})]})]}),JSON.stringify(i==null?void 0:i.extra_param)!=="{}"&&(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.extended.fields"})}),i==null||(M=i.extra_param)===null||M===void 0?void 0:M.map(function(A,w){return A.param_key&&A.param_value!==""&&(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsx)(m.Z,{span:6}),(0,e.jsxs)(m.Z,{span:18,children:[A.param_key,":",A.param_value]})]},w)})]}),(0,e.jsxs)(Hn.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.scheduling.label"})}),(0,e.jsx)(K.Z,{style:{marginTop:10},children:(i==null?void 0:i.tag_list)&&(i==null?void 0:i.tag_list.map(function(A){return(0,e.jsx)(dn.Z,{color:A.tag_color,children:A.name},A.id)}))})]}),(0,e.jsxs)(Hn.Z.Content,{children:[(0,e.jsx)(L.Z.Text,{strong:!0,children:(0,e.jsx)(n._H,{id:"device.others.info"})}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.machine.name"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.name})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsx)(m.Z,{span:6,children:"Owner:"}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.owner_name})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.creation_time"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.gmt_created})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.modify_time"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.gmt_modified})]}),(0,e.jsxs)(K.Z,{gutter:20,className:Pe().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(n._H,{id:"device.description"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:i==null?void 0:i.description})]})]})]}),(0,e.jsx)(dt.Z,{ref:ae,callback:qe})]})}),xr=gr,Zr=(0,a.forwardRef)(function(we,T){var M=we.onOk,D=(0,n.YB)(),Y=D.formatMessage,F=(0,a.useState)(!1),le=(0,v.Z)(F,2),i=le[0],N=le[1],he=(0,a.useState)(!1),Ze=(0,v.Z)(he,2),h=Ze[0],de=Ze[1],be=(0,a.useState)({}),Re=(0,v.Z)(be,2),Le=Re[0],He=Re[1],Ae=z.Z.useForm(),$e=(0,v.Z)(Ae,1),U=$e[0];(0,a.useImperativeHandle)(T,function(){return{show:function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};N(!0),He(Ce);var _e="".concat(Ce.name,"-copy-").concat((0,se.FE)());U.setFieldsValue({server_name:_e,server_id:Ce.id})}}});var Me=function(){N(!1),U.resetFields()},De=function(){U.validateFields().then(function(){var Ce=(0,G.Z)((0,j.Z)().mark(function _e(ae){var oe,fe,ze;return(0,j.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return de(!0),A.next=3,(0,re.xN)(ae);case 3:oe=A.sent,fe=oe.msg,ze=oe.code,ze===200?(M(),Me(),Ee.default.success(Y({id:"operation.success"}))):(0,se.EV)(ze,fe),de(!1);case 8:case"end":return A.stop()}},_e)}));return function(_e){return Ce.apply(this,arguments)}}()).catch(function(Ce){console.log(Ce),de(!1)})};return(0,e.jsxs)(ot.Z,{title:(0,e.jsx)(n._H,{id:"device.copy"}),maskClosable:!1,keyboard:!1,open:i,width:"380",onClose:Me,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(te.Z,{onClick:Me,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(te.Z,{type:"primary",disabled:h,onClick:De,children:(0,e.jsx)(n._H,{id:"operation.ok"})})]})}),children:[(0,e.jsxs)(me.Z,{style:{paddingBottom:12,wordBreak:"break-word"},children:[(0,e.jsx)("div",{style:{color:"rgba(0,0,0,.8)",fontWeight:600,whiteSpace:"nowrap"},children:(0,e.jsx)(n._H,{id:"device.config.name.original"})}),(0,e.jsx)("div",{style:{color:" rgba(0,0,0,0.65)"},children:Le.name})]}),(0,e.jsxs)(z.Z,{layout:"vertical",form:U,children:[(0,e.jsx)(z.Z.Item,{name:"server_id",noStyle:!0}),(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.config.name.new"}),name:"server_name",rules:[{required:!0,message:Y({id:"please.enter"})},{pattern:/^[A-Za-z0-9\._-]{1,64}$/g,message:Y({id:"please.enter.message64"})}],children:(0,e.jsx)(vn.Z,{autoComplete:"off",placeholder:Y({id:"please.enter"})})})]})]})}),_r=t(96486),jr=t.n(_r),Rt=t(36761),Lt=t(76865),yr=t(60751),$t=t(77764),Ft=t(86213),At=t(85450),ce=t(10753),ft=t(87735),Kt=t(44586),Cr=[{value:"toneagent",label:"ToneAgent"}].map(function(we){return{id:we.value,name:we.label}}),Sr=function(we){var T=we.tab,M=(0,Ge.TH)(),D=M.query,Y=(0,n.YB)(),F=Y.formatMessage,le=(0,n.Kd)()==="en-US",i=(0,Ge.UO)(),N=i.ws_id,he=(0,n.md)(),Ze=(0,a.useRef)(null),h=(0,a.useState)(Object.prototype.toString.call(D==null?void 0:D.is_instance)==="[object String]"?+(D==null?void 0:D.is_instance):0),de=(0,v.Z)(h,2),be=de[0],Re=de[1],Le=(0,a.useState)(!0),He=(0,v.Z)(Le,2),Ae=He[0],$e=He[1],U=(0,a.useState)(!1),Me=(0,v.Z)(U,2),De=Me[0],Ke=Me[1],Ce=(0,a.useState)({}),_e=(0,v.Z)(Ce,2),ae=_e[0],oe=_e[1],fe=(0,a.useState)(!1),ze=(0,v.Z)(fe,2),qe=ze[0],A=ze[1],w=(0,a.useState)(!1),ve=(0,v.Z)(w,2),ne=ve[0],H=ve[1],k=(0,a.useState)({}),f=(0,v.Z)(k,2),b=f[0],ge=f[1],X=(0,a.useState)(!0),We=(0,v.Z)(X,2),V=We[0],Se=We[1],Te=(0,a.useRef)(),Mn=(0,a.useRef)(null),Dn=(0,a.useRef)(null),On=(0,a.useRef)(null),gn={t:T,page_num:1,page_size:10,ws_id:N},Bn=(0,a.useState)((0,r.Z)((0,r.Z)({},gn),D)),En=(0,v.Z)(Bn,2),u=En[0],Oe=En[1],Pn=(0,se.YM)(u),Ne=function(d){return{filterDropdown:function(O){var P=O.confirm;return(0,e.jsx)(ee.Z,{confirm:P,value:u[d],onConfirm:function(_){var o;return Oe((0,r.Z)((0,r.Z)({},u),{},(o={},(0,un.Z)(o,d,_),(0,un.Z)(o,"page_num",1),o)))}})},onFilterDropdownVisibleChange:function(O){O&&Se(!V)},filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u[d]?"#1890ff":void 0}})}}},pn=function(d,l){return{filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u[d]?"#1890ff":void 0}})},filterDropdown:function(P){var q=P.confirm;return(0,e.jsx)(Lt.Z,{list:l,value:u[d],confirm:q,onConfirm:function(o){var c;return Oe((0,r.Z)((0,r.Z)({},u),{},(c={},(0,un.Z)(c,d,o),(0,un.Z)(c,"page_num",1),c)))}})}}},mn=function(d,l){return{filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u[d]?"#1890ff":void 0}})},filterDropdown:function(P){var q=P.confirm;return(0,e.jsx)(yr.Z,{list:l,value:u[d],confirm:q,onConfirm:function(o){var c;return Oe((0,r.Z)((0,r.Z)({},u),{},(c={},(0,un.Z)(c,d,o),(0,un.Z)(c,"page_num",1),c)))}})}}},Cn=function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(){var l,O,P;return(0,j.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return l=u.name,O=(0,r.Z)((0,r.Z)({},u),{},{is_instance:Boolean(+be),server_conf:l}),n.m8.replace("/ws/".concat(N,"/device/cloud?").concat((0,ft.stringify)((0,r.Z)((0,r.Z)({},O),{},{is_instance:O.is_instance?1:0})))),$e(!0),_.next=6,(0,re.$x)(O);case 6:P=_.sent,$e(!1),P&&oe(P);case 9:case"end":return _.stop()}},d)}));return function(){return Z.apply(this,arguments)}}(),xn=function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(l){var O,P,q;return(0,j.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,re.vu)({server_id:l.id,server_provider:"aliyun"});case 2:O=o.sent,P=O.code,q=O.msg,P===200?(Ee.default.success(F({id:"device.synchronization.state.success"})),Cn()):(0,se.EV)(P,q);case 6:case"end":return o.stop()}},d)}));return function(l){return Z.apply(this,arguments)}}(),Ue=(0,se.YM)(ae),Zn=function(d){var l={0:F({id:"operation.not.release"}),1:F({id:"operation.release"}),2:F({id:"device.failed.save"})};return l[d]||""},E=+be,Rn=function(d){var l;(l=Mn.current)===null||l===void 0||l.show((0,r.Z)((0,r.Z)({},d),{},{detailData:[d.private_ip],radio_type:"cloudManage"}))},ln=(0,a.useCallback)(function(Z){Te.current.show(Z)},[]),nn=function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(l){var O,P,q;return(0,j.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,re.kA)({id:l});case 3:O=o.sent,P=O.code,q=O.msg,P===200?Ee.default.success(F({id:"operation.success"})):(0,se.EV)(P,q),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),console.log(o.t0);case 12:case"end":return o.stop()}},d,null,[[0,9]])}));return function(l){return Z.apply(this,arguments)}}(),Nn=jr().debounce(function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(l,O){var P,q,_;return(0,j.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return Ke(!0),P=Pn.current.page_size,q={ws_id:N,is_release:O},c.next=5,(0,re.BG)(l,q);case 5:_=c.sent,_.code==200?(Oe((0,r.Z)((0,r.Z)({},u),{},{page_num:(0,se.NG)(Pn,Ue),page_size:P})),Ee.default.success(F({id:"operation.success"})),A(!1),H(!1)):((0,se.EV)(_.code,_.msg),setTimeout(function(){A(!1),H(!1)},300)),Ke(!1);case 8:case"end":return c.stop()}},d)}));return function(d,l){return Z.apply(this,arguments)}}(),300),Ln=function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(l,O){var P;return(0,j.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return ge((0,r.Z)((0,r.Z)({},l),{},{is_release:O})),_.next=3,(0,Ct.Z9)({server_id:l.id,run_mode:"standalone",server_provider:"aliyun"});case 3:P=_.sent,P.data.length>0?A(!0):H(!0);case 5:case"end":return _.stop()}},d)}));return function(l,O){return Z.apply(this,arguments)}}(),ke=function(){var Z=(0,G.Z)((0,j.Z)().mark(function d(){var l;return(0,j.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,se.MR)({name:b.name,id:b.id});case 2:l=P.sent,l&&window.open("/ws/".concat(N,"/refenerce/6/?pk=").concat(l));case 4:case"end":return P.stop()}},d)}));return function(){return Z.apply(this,arguments)}}();(0,a.useEffect)(function(){Cn()},[u]);var $n=function(d){Re(d),Oe(gn),n.m8.push("/ws/".concat(N,"/device/cloud?").concat((0,ft.stringify)((0,r.Z)((0,r.Z)({},D),{},{is_instance:d}))))},qn=function(){var d;(d=Ze.current)===null||d===void 0||d.newMachine(void 0)},Un=function(d){var l;(l=Ze.current)===null||l===void 0||l.editMachine(d)},Sn=function(d){E==d?Cn():Oe((0,r.Z)((0,r.Z)({},u),{},{is_instance:d}))},wn=[(0,r.Z)((0,r.Z)({title:E?(0,e.jsx)(n._H,{id:"device.instance.name"}):(0,e.jsx)(n._H,{id:"device.config.name"}),dataIndex:"name",width:140,fixed:"left",ellipsis:{showTitle:!1}},Ne("name")),{},{render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:l.name},children:(0,e.jsx)(zn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[(u==null?void 0:u.name)||""],autoEscape:!0,textToHighlight:l.name.toString()})})}}),!!E&&(0,r.Z)((0,r.Z)({title:"IP",dataIndex:"private_ip",width:140},Ne("private_ip")),{},{ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(C.Z,{exists:!0,val:d,param:l.id,provider:"aliyun",machine_pool:!0})}}),!!E&&(0,r.Z)((0,r.Z)({title:"SN",dataIndex:"sn"},Ne("sn")),{},{width:140,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:l.sn})}}),!!E&&{title:"TSN",dataIndex:"tsn",width:140,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:l.tsn})}},!!E&&(0,r.Z)((0,r.Z)({title:"InstanceId",dataIndex:"instance_id"},Ne("instance_id")),{},{width:140,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:l.instance_id})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.manufacturer/ak"}),dataIndex:"manufacturer"},Ne("manufacturer_ak_name")),{},{width:160,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:"".concat(l.manufacturer,"/").concat(l.ak_name)})}}),(0,r.Z)((0,r.Z)({title:"Region/Zone",width:160,dataIndex:"region"},Ne("region_zone")),{},{ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:"".concat(l.region,"/").concat(l.zone)})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.instance_type"}),width:le?160:110,dataIndex:"instance_type"},Ne("instance_type")),{},{ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:l.instance_type})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.image"}),dataIndex:"image"},Ne("image")),{},{width:160,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:l.image})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.bandwidth"}),width:le?120:70},Ne("bandwidth")),{},{dataIndex:"bandwidth",ellipsis:{showTitle:!1},render:function(d){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:d})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.storage_type"})},pn("storage_type",[["cloud",F({id:"device.cloud"})],["cloud_efficiency",F({id:"device.cloud_efficiency"})],["cloud_ssd",F({id:"device.cloud_ssd"})],["cloud_essd",F({id:"device.cloud_essd"})]].map(function(Z){return{id:Z[0],name:Z[1]}}))),{},{dataIndex:"storage_type",width:le?130:90,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(lt,{name:l.storage_type,formatMessage:F})}}),(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.release_rule"}),align:"center"},mn("release_rule",[{id:0,name:F({id:"operation.not.release"})},{id:1,name:F({id:"operation.release"})},{id:2,name:F({id:"device.failed.save"})}])),{},{dataIndex:"release_rule",width:le?150:110,ellipsis:{showTitle:!1},render:function(d,l){return Zn(l.release_rule)}}),{title:(0,e.jsx)(n._H,{id:"device.console_conf"}),width:le?170:100,dataIndex:"console_conf",ellipsis:{showTitle:!1},render:function(d){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:d})}},{title:(0,e.jsx)(n._H,{id:"device.channel_type"}),width:100,ellipsis:{showTitle:!1},dataIndex:"channel_type",filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u!=null&&u.channel_type?"#1890ff":void 0}})},filterDropdown:function(d){var l=d.confirm;return(0,e.jsx)(Lt.Z,{list:Cr,value:u==null?void 0:u.channel_type,confirm:l,onConfirm:function(P){return Oe((0,r.Z)((0,r.Z)({},u),{},{channel_type:P,page_num:1}))}})}},!!E&&{title:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(n._H,{id:"device.usage.state"}),(0,e.jsx)(on.Z,{title:F({id:"device.usage.state.Tooltip"}),children:(0,e.jsx)(kn.Z,{})})]}),dataIndex:"state",width:le?150:120,ellipsis:{showTitle:!1},render:function(d,l){return(0,ct.Ul)(d,l,N)},filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u!=null&&u.state?"#1890ff":void 0}})},filterDropdown:function(d){var l=d.confirm;return(0,e.jsx)(Rt.Z,{confirm:l,onConfirm:function(P){return Oe((0,r.Z)((0,r.Z)({},u),{},{state:P,page_num:1}))},value:u==null?void 0:u.state,tabType:E,dataArr:["Available","Occupied","Broken","Reserved","Unusable"]})}},!!E&&{title:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(n._H,{id:"device.real_state"}),(0,e.jsx)(on.Z,{title:F({id:"device.real_state.Tooltip"}),children:(0,e.jsx)(kn.Z,{})})]}),width:le?150:120,ellipsis:{showTitle:!1},dataIndex:"real_state",render:function(d,l){return(0,ct.Ul)(d,l,N)},filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u!=null&&u.real_state?"#1890ff":void 0}})},filterDropdown:function(d){var l=d.confirm;return(0,e.jsx)(Rt.Z,{confirm:l,onConfirm:function(P){return Oe((0,r.Z)((0,r.Z)({},u),{},{real_state:P,page_num:1}))},value:u==null?void 0:u.real_state,tabType:E,dataArr:["Online","Offline"]})}},{title:"Owner",width:120,dataIndex:"owner_name",ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:u!=null&&u.owner?"#1890ff":void 0}})},filterDropdown:function(d){var l=d.confirm;return(0,e.jsx)(ie.Z,{value:u==null?void 0:u.owner,confirm:l,onConfirm:function(P){Oe((0,r.Z)((0,r.Z)({},u),{},{owner:P,page_num:1}))}})}},{title:(0,e.jsx)(n._H,{id:"device.tag"}),dataIndex:"tags",width:240,ellipsis:{showTitle:!1},filterIcon:function(){var d;return(0,e.jsx)(Xe.Z,{style:{color:u!=null&&u.tags&&(u==null||(d=u.tags)===null||d===void 0?void 0:d.length)>0?"#1890ff":void 0}})},filterDropdown:function(d){var l=d.confirm;return(0,e.jsx)(rn.Z,{value:u==null?void 0:u.tags,ws_id:N,run_mode:"standalone",autoFocus:V,confirm:l,onConfirm:function(P){Oe((0,r.Z)((0,r.Z)({},u),{},{tags:P,page_num:1}))}})},render:function(d,l){return(0,e.jsx)($t.Z,{list:l.tag_list.map(function(O){return(0,e.jsx)(dn.Z,{color:O.tag_color,children:O.name},(0,Kt.Z)())})})}},(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.description"}),width:140,dataIndex:"description"},Ne("description")),{},{ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:l.description},children:(0,e.jsx)(zn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[(u==null?void 0:u.description)||""],autoEscape:!0,textToHighlight:l.description?l.description.toString():"-"})})}}),{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),fixed:"right",valueType:"option",key:"operation",width:E?le?440:360:230,ellipsis:{showTitle:!1},render:function(d,l){return(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(L.Z.Link,{onClick:function(){return Dn.current.show(l,E)},children:(0,e.jsx)(n._H,{id:"operation.detail"})}),!E&&(0,e.jsx)(L.Z.Link,{onClick:function(){return On.current.show(l)},children:(0,e.jsx)(n._H,{id:"operation.copy"})}),(0,e.jsx)(n.Nv,{accessible:he.WsMemberOperateSelf(l.owner),fallback:(0,e.jsxs)(me.Z,{onClick:function(){return(0,se.WR)()},children:[!!E&&(0,e.jsx)(L.Z.Link,{children:(0,e.jsx)(n._H,{id:"device.synchronization.state"})}),(0,e.jsx)(L.Z.Link,{children:(0,e.jsx)(n._H,{id:"operation.edit"})}),!!E&&(0,e.jsx)(L.Z.Link,{children:(0,e.jsx)(n._H,{id:"device.deploy"})}),!!E&&(0,e.jsx)(L.Z.Link,{children:(0,e.jsx)(n._H,{id:"operation.delete"})}),(0,e.jsx)(L.Z.Link,{children:E?(0,e.jsx)(n._H,{id:"operation.release"}):(0,e.jsx)(n._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(me.Z,{children:[!!E&&(0,e.jsx)(L.Z.Link,{onClick:function(){return xn(l)},children:(0,e.jsx)(n._H,{id:"device.synchronization.state"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return Un(l)},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),!!E&&(0,e.jsx)(L.Z.Link,{onClick:function(){return Rn(l)},children:(0,e.jsx)(n._H,{id:"device.deploy"})}),!!E&&(0,e.jsx)(L.Z.Link,{onClick:function(){return Ln((0,r.Z)({},l),!1)},children:(0,e.jsx)(n._H,{id:"operation.delete"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return Ln((0,r.Z)({},l),!!E)},children:E?(0,e.jsx)(n._H,{id:"operation.release"}):(0,e.jsx)(n._H,{id:"operation.delete"})})]})}),!!E&&(0,e.jsx)(L.Z.Link,{onClick:function(){return nn(l.id)},children:(0,e.jsx)(n._H,{id:"operation.sync.name"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return ln(l.id)},children:(0,e.jsx)(n._H,{id:"operation.log"})})]})}}],bn=b[E?"private_ip":"name"];return(0,e.jsxs)("div",{className:Pe().warp,children:[(0,e.jsxs)(ye.Z,{type:"card",onTabClick:$n,activeKey:be+"",tabBarExtraContent:(0,e.jsx)(te.Z,{type:"primary",onClick:qn,children:E?(0,e.jsx)(n._H,{id:"device.add.server.instance"}):(0,e.jsx)(n._H,{id:"device.add.server.config"})}),children:[(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"device.server.config"})},0),(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"device.server.instance"})},1)]}),(0,e.jsx)(At.sL,{size:"small",loading:Ae,columns:wn,refreshDeps:[E,N,he,le,u],name:"ws-cloud-server-standalone-".concat(E?"setting":"server"),dataSource:ae.data,rowKey:"id",pagination:!1}),(0,e.jsx)(Ft.Z,{total:ae.total,pageSize:u==null?void 0:u.page_size,currentPage:u==null?void 0:u.page_num,onPageChange:function(d,l){Oe((0,r.Z)((0,r.Z)({},u),{},{page_num:d,page_size:l}))}}),(0,e.jsx)($.Z,{ref:Te,operation_object:"machine_cloud_server"}),(0,e.jsx)(yt,{onRef:Ze,is_instance:E,onSuccess:Sn,type:"standalone"}),(0,e.jsx)(dt.Z,{ref:Mn}),(0,e.jsx)(xr,{ref:Dn}),(0,e.jsx)(Zr,{ref:On,onOk:function(){return Oe((0,r.Z)((0,r.Z)({},u),{},{page_num:1}))}}),(0,e.jsxs)(Qe.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(n._H,{id:E?"delete.tips":"device.tips"})}),centered:!0,open:qe,onCancel:function(){return A(!1)},footer:[(0,e.jsx)(te.Z,{type:"danger",onClick:function(){return Nn(b.id,b.is_release)},loading:De,children:(0,e.jsx)(n._H,{id:b.is_release?"operation.release":"operation.confirm.delete"})},"submit"),(0,e.jsx)(te.Z,{onClick:function(){return A(!1)},children:(0,e.jsx)(n._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(yn.Z,{style:{marginRight:4}}),(0,e.jsx)(n._H,{id:"device.delete.tips"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:ke,children:(0,e.jsx)(n._H,{id:"view.quote.details"})})]}),(0,e.jsx)(Qe.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(n._H,{id:E?"device.tips":"delete.tips"})}),centered:!0,open:ne,onCancel:function(){return H(!1)},footer:[(0,e.jsx)(te.Z,{type:"danger",onClick:function(){return Nn(b.id,b.is_release)},loading:De,children:!E||!b.is_release?(0,e.jsx)(n._H,{id:"operation.confirm.delete"}):(0,e.jsx)(n._H,{id:"operation.release"})},"submit"),(0,e.jsx)(te.Z,{onClick:function(){return H(!1)},children:(0,e.jsx)(n._H,{id:"operation.cancel"})},"back")],width:"30%",children:(0,e.jsx)("div",{style:{color:"red",marginBottom:5},children:(0,e.jsxs)(K.Z,{align:"middle",children:[(0,e.jsx)(yn.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsxs)("div",{children:[(!E||!b.is_release)&&!E?F({id:"device.delete.config"},{data:bn}):null,(!E||!b.is_release)&&!!E?F({id:"device.delete.instance"},{data:bn}):null,!(!E||!b.is_release)&&!E?F({id:"device.release.config"},{data:bn}):null,!(!E||!b.is_release)&&!!E?F({id:"device.release.instance"},{data:bn}):null]})]})})})]})},ca=t(66456),wr=t(79764),br=t(98025),Tr=t.n(br),kr=t(44378),Ir=t(68002),fa=t(62350),Hr=t(24565),Mr=t(93224),zt=t(38819),Wt=t(15873),Dr=t(22704),St=t.n(Dr),Or=["test_server"],Er=function(T){var M=(0,n.YB)(),D=M.formatMessage,Y=(0,n.Kd)()==="en-US",F=(0,Ge.UO)(),le=F.ws_id,i=T.cluster_id,N=T.width,he=T.onRef,Ze=T.size,h=T.top,de=T.is_instance,be=(0,a.useState)(!1),Re=(0,v.Z)(be,2),Le=Re[0],He=Re[1],Ae=(0,a.useState)([]),$e=(0,v.Z)(Ae,2),U=$e[0],Me=$e[1],De=(0,a.useRef)(null),Ke=(0,n.md)(),Ce=(0,a.useRef)(),_e=function(){var H=(0,G.Z)((0,j.Z)().mark(function k(){var f,b;return(0,j.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return He(!0),X.next=3,(0,re.L0)({cluster_id:i});case 3:if(X.t0=X.sent,X.t0){X.next=6;break}X.t0={};case 6:b=X.t0,He(!1),b.data=(f=b.data)===null||f===void 0?void 0:f.map(function(We){return We.machineId=We.id,(0,r.Z)((0,r.Z)({},We),We.test_server)}),Array.isArray(b.data)?Me(b.data):Me([]),He(!1);case 11:case"end":return X.stop()}},k)}));return function(){return H.apply(this,arguments)}}(),ae=function(){var H=(0,G.Z)((0,j.Z)().mark(function k(f){var b,ge,X;return(0,j.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,V.next=3,(0,re.kA)({id:f});case 3:b=V.sent,ge=b.code,X=b.msg,ge===200?Ee.default.success(D({id:"operation.success"})):(0,se.EV)(ge,X),V.next=12;break;case 9:V.prev=9,V.t0=V.catch(0),console.log(V.t0);case 12:case"end":return V.stop()}},k,null,[[0,9]])}));return function(f){return H.apply(this,arguments)}}(),oe=(0,a.useCallback)(function(H){Ce.current.show(H)},[]),fe=function(){var H=(0,G.Z)((0,j.Z)().mark(function k(f,b){var ge,X,We,V;return(0,j.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(f.machineId){Te.next=2;break}return Te.abrupt("return");case 2:return ge=f.test_server,X=(0,Mr.Z)(f,Or),We=b==="role"?(0,r.Z)((0,r.Z)((0,r.Z)({},ge),X),{},{role:"local"}):(0,r.Z)((0,r.Z)((0,r.Z)({},ge),X),{},{baseline_server:1}),Te.next=6,(0,re.oz)(f.machineId,We);case 6:V=Te.sent,V.code===200?(Ee.default.success(D({id:"operation.success"})),_e()):(0,se.EV)(V.code,V.msg);case 8:case"end":return Te.stop()}},k)}));return function(f,b){return H.apply(this,arguments)}}(),ze=function(k){var f={0:D({id:"operation.not.release"}),1:D({id:"operation.release"}),2:D({id:"device.failed.save"})};return f[k]||""},qe=function(){var H=(0,G.Z)((0,j.Z)().mark(function k(f){var b,ge,X;return(0,j.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,re.vu)({server_id:f.server_id,server_provider:"aliyun"});case 2:b=V.sent,ge=b.code,X=b.msg,ge===200?(Ee.default.success(D({id:"device.synchronization.state.success"})),_e()):(0,se.EV)(ge,X);case 6:case"end":return V.stop()}},k)}));return function(f){return H.apply(this,arguments)}}(),A=function(k){De.current&&De.current.editMachine((0,r.Z)((0,r.Z)({},k),{},{cluster_id:i}))},w=function(){var H=(0,G.Z)((0,j.Z)().mark(function k(f){var b,ge,X;return(0,j.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,re.XW)(f.machineId);case 2:b=V.sent,ge=b.code,X=b.msg,ge===200?(_e(),Ee.default.success(D({id:"request.delete.success"}))):Ee.default.success(X);case 6:case"end":return V.stop()}},k)}));return function(f){return H.apply(this,arguments)}}();(0,a.useImperativeHandle)(he,function(){return{reload:function(){_e()}}});var ve=[{title:de?(0,e.jsx)(n._H,{id:"device.server.instance"}):(0,e.jsx)(n._H,{id:"device.server.config"}),dataIndex:"name",width:160,fixed:"left",ellipsis:{showTitle:!1},render:function(k,f){return de?(0,e.jsx)(C.Z,{exists:!0,val:k,param:f.id,provider:"aliyun",machine_pool:!0}):(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.name})}},!!de&&{title:"SN",dataIndex:"sn",width:150,ellipsis:{showTitle:!1},render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.sn})}},!!de&&{title:"TSN",dataIndex:"tsn",width:150,ellipsis:{showTitle:!1},render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.tsn})}},!1,{title:(0,e.jsx)(n._H,{id:"device.manufacturer/ak"}),dataIndex:"manufacturer",width:120,ellipsis:{showTitle:!1},render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:"".concat(f.manufacturer,"/").concat(f.ak_name)})}},{title:"Region/Zone",width:120,ellipsis:{showTitle:!1},dataIndex:"region",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:"".concat(f.region,"/").concat(f.zone)})}},{title:(0,e.jsx)(n._H,{id:"device.instance_type"}),dataIndex:"instance_type",width:120,ellipsis:{showTitle:!1},render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.instance_type})}},{title:(0,e.jsx)(n._H,{id:"device.image"}),width:120,ellipsis:{showTitle:!1},dataIndex:"image",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:f.image},children:f.image_name})}},{title:(0,e.jsx)(n._H,{id:"device.bandwidth"}),width:100,dataIndex:"bandwidth"},{title:(0,e.jsx)(n._H,{id:"device.storage_type"}),dataIndex:"storage_type",ellipsis:{showTitle:!1},width:100,render:function(k,f){return(0,e.jsx)(lt,{name:f.storage_type,formatMessage:D})}},{title:(0,e.jsx)(n._H,{id:"device.console_conf"}),width:Y?170:100,ellipsis:{showTitle:!1},dataIndex:"console_conf",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.console_conf})}},{title:(0,e.jsx)(n._H,{id:"device.release_rule"}),dataIndex:"release_rule",width:Y?150:110,ellipsis:{showTitle:!1},render:function(k,f){return ze(f.release_rule)}},{title:(0,e.jsx)(n._H,{id:"device.private_ip"}),width:160,ellipsis:{showTitle:!1},dataIndex:"private_ip",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.private_ip})}},{title:(0,e.jsx)(n._H,{id:"device.channel_type"}),dataIndex:"channel_type",width:100,ellipsis:{showTitle:!1},render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.channel_type})}},{title:"Owner",width:100,ellipsis:{showTitle:!1},dataIndex:"owner_name",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:f.owner_name})}},{title:(0,e.jsx)(n._H,{id:"device.local.server"}),dataIndex:"role",width:120,align:"center",render:function(k,f){return f.role==="local"?(0,e.jsx)(zt.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(Wt.Z,{onClick:function(){return fe(f,"role")},style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"}})}},{title:(0,e.jsx)(n._H,{id:"device.baseline_server"}),dataIndex:"baseline_server",width:140,align:"center",render:function(k,f){return k?(0,e.jsx)(zt.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(Wt.Z,{onClick:function(){return fe(f,"baseline_server")},style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"}})}},{title:(0,e.jsx)(n._H,{id:"device.install.kernel"}),dataIndex:"kernel_install",width:120,render:function(k){return k?(0,e.jsx)(n._H,{id:"operation.yes"}):(0,e.jsx)(n._H,{id:"operation.no"})}},{title:(0,e.jsx)(n._H,{id:"device.var_name"}),dataIndex:"var_name",width:Y?170:110,ellipsis:{showTitle:!1}},!!de&&{title:(0,e.jsx)(n._H,{id:"device.server.state"}),width:120,dataIndex:"state",ellipsis:{showTitle:!1},render:function(k,f){return(0,ct.Ul)(f.test_server.state,f.test_server,le)}},!!de&&{title:(0,e.jsx)(n._H,{id:"device.real_state"}),width:160,dataIndex:"real_state",ellipsis:{showTitle:!1},render:function(k,f){return(0,ct.Ul)(f.test_server.real_state,f.test_server,le)}},{title:(0,e.jsx)(n._H,{id:"device.description"}),width:120,ellipsis:{showTitle:!1},dataIndex:"description",render:function(k,f){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},width:100,children:f.description})}},{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),fixed:"right",valueType:"option",key:"operation",width:Y?300:260,render:function(k,f){return(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(n.Nv,{accessible:Ke.WsMemberOperateSelf(f.test_server.owner),fallback:(0,e.jsxs)(me.Z,{children:[!!de&&(0,e.jsx)(L.Z.Link,{onClick:function(){return(0,se.WR)()},children:(0,e.jsx)(n._H,{id:"device.synchronization.state"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return(0,se.WR)()},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return(0,se.WR)()},children:(0,e.jsx)(n._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(me.Z,{children:[!!de&&(0,e.jsx)(L.Z.Link,{onClick:function(){return qe(f)},children:(0,e.jsx)(n._H,{id:"device.synchronization.state"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){A(f)},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(Hr.Z,{title:(0,e.jsx)(L.Z.Text,{type:"danger",children:D({id:"delete.prompt"},{data:"(".concat(f.name,")")})}),placement:"topRight",okText:(0,e.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(n._H,{id:"operation.confirm.delete"}),onCancel:function(){w(f)},overlayStyle:{width:"280px"},icon:(0,e.jsx)(yn.Z,{style:{color:"red"}}),children:(0,e.jsx)(L.Z.Link,{children:(0,e.jsx)(n._H,{id:"operation.delete"})})})]})}),!!de&&(0,e.jsx)(L.Z.Link,{onClick:function(){return ae(f.server_id)},children:(0,e.jsx)(n._H,{id:"operation.sync.name"})}),(0,e.jsx)(L.Z.Link,{onClick:function(){return oe(f.id)},children:(0,e.jsx)(n._H,{id:"operation.log"})})]})}}];(0,a.useEffect)(function(){_e()},[]);var ne=function(){_e()};return(0,e.jsxs)("div",{className:St().warp,children:[(0,e.jsx)("div",{className:St().tree,style:{backgroundSize:"40px ".concat(Ze,"px"),height:h,backgroundPosition:"left center"}}),!!U.length&&(0,e.jsx)("div",{className:St().tree,style:{backgroundSize:"40px ".concat(Ze,"px"),height:Ze*U.length+30,top:h}}),(0,e.jsx)(At.sL,{style:{width:N-79},loading:Le,scroll:{x:"100%"},columns:ve,refreshDeps:[de,le,Y],name:"ws-cloud-device-group",showHeader:!!U.length,dataSource:U,rowKey:"id",pagination:!1}),(0,e.jsx)($.Z,{ref:Ce,operation_object:"machine_cloud_server"}),(0,e.jsx)(yt,{onRef:De,is_instance:de,onSuccess:ne,type:"cluster",cluster_id:i})]})},Pr=Er,Rr=function(T){var M=T.outParam,D=T.tagFlag,Y=T.is_instance,F=T.params,le=T.setParams,i=(0,n.YB)(),N=i.formatMessage,he=(0,Ge.UO)(),Ze=he.ws_id,h=z.Z.useForm(),de=(0,v.Z)(h,1),be=de[0],Re=(0,a.useState)(!1),Le=(0,v.Z)(Re,2),He=Le[0],Ae=Le[1],$e=(0,a.useState)({}),U=(0,v.Z)($e,2),Me=U[0],De=U[1];(0,a.useEffect)(function(){be.resetFields(),JSON.stringify(M)!=="{}"&&setTimeout(function(){var ae,oe=((ae=M.tag_list)===null||ae===void 0?void 0:ae.map(function(fe){return fe.id}))||[];be.setFieldsValue((0,r.Z)((0,r.Z)({},M),{},{tags:oe}))},1)},[M]),(0,a.useEffect)(function(){JSON.stringify(D)!=="{}"&&!!D.isQuery.length&&Ae(!0)},[D]);var Ke=function(){var ae=(0,G.Z)((0,j.Z)().mark(function oe(fe){var ze,qe,A,w;return(0,j.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(JSON.stringify(M)==="{}"){ne.next=15;break}return ze={description:fe.description||"",tags:fe.tags,emp_id:fe.emp_id,name:fe.name,ws_id:Ze},ne.next=4,(0,re.Tv)(M.id,ze);case 4:if(ne.t0=ne.sent,ne.t0){ne.next=7;break}ne.t0={};case 7:if(qe=ne.t0,qe.code!==200){ne.next=13;break}return Ae(!1),Ee.default.success(N({id:"operation.success"})),le((0,r.Z)((0,r.Z)({},F),{},{refresh:!F.refresh})),ne.abrupt("return");case 13:return De((0,r.Z)((0,r.Z)({},qe),{},{error:!0})),ne.abrupt("return");case 15:return A=(0,r.Z)((0,r.Z)({},fe),{},{ws_id:Ze,is_instance:String(Y)}),A.description=fe.description||"",A.cluster_type="aliyun",ne.next=20,(0,re.Rp)((0,r.Z)({},A));case 20:if(w=ne.sent,w.code!==200){ne.next=26;break}return Ae(!1),Ee.default.success(N({id:"operation.success"})),le((0,r.Z)((0,r.Z)({},F),{},{page:1,refresh:!F.refresh})),ne.abrupt("return");case 26:De((0,r.Z)((0,r.Z)({},w),{},{error:!0}));case 27:case"end":return ne.stop()}},oe)}));return function(fe){return ae.apply(this,arguments)}}(),Ce=function(){be.validateFields().then(function(oe){return Ke(oe)})},_e=a.useMemo(function(){var ae=JSON.stringify(M)!=="{}",oe=!!Y;return oe?ae?"device.cluster.edit":"device.cluster.btn":ae?"device.edit.cluster.config":"device.add.cluster.config"},[M,Y]);return(0,e.jsx)(ot.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(n._H,{id:_e}),width:376,onClose:function(){return Ae(!1)},open:He,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(te.Z,{onClick:function(){return Ae(!1)},style:{marginRight:8},children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(te.Z,{type:"primary",onClick:function(){return Ce()},children:JSON.stringify(M)!=="{}"?(0,e.jsx)(n._H,{id:"operation.update"}):(0,e.jsx)(n._H,{id:"operation.ok"})})]}),children:(0,e.jsx)(z.Z,{layout:"vertical",form:be,children:(0,e.jsxs)(K.Z,{gutter:16,children:[(0,e.jsx)(m.Z,{span:24,children:(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(n._H,{id:"device.cluster.name.s"}),name:"name",rules:[{required:!0,message:N({id:"device.cluster.name.s.message"})}],validateStatus:Me.error?"error":void 0,help:Me.msg==="cluster existed"?N({id:"device.cluster.name.s.existed"}):Me.msg,children:(0,e.jsx)(vn.Z,{autoComplete:"off",placeholder:N({id:"please.enter"}),onChange:function(oe){return De({})}})})}),(0,e.jsx)(m.Z,{span:24,children:(0,e.jsx)(Mt.Z,{})}),(0,e.jsx)(m.Z,{span:24,children:(0,e.jsx)(Ot.Z,(0,r.Z)({},D))}),(0,e.jsx)(m.Z,{span:24,children:(0,e.jsx)(z.Z.Item,{name:"description",label:(0,e.jsx)(n._H,{id:"device.description"}),children:(0,e.jsx)(vn.Z.TextArea,{rows:3,placeholder:N({id:"please.enter"})})})})]})})})},Lr=Rr,$r=t(47883),Fr=function(T){var M=T.tab,D=(0,Ge.TH)(),Y=D.query,F=(0,n.YB)(),le=F.formatMessage,i=(0,Ge.UO)(),N=i.ws_id,he=z.Z.useForm(),Ze=(0,v.Z)(he,1),h=Ze[0],de=(0,n.md)(),be=(0,a.useRef)(null),Re=(0,a.useRef)(null),Le=(0,a.useRef)(null),He=(0,a.useState)(Object.prototype.toString.call(Y==null?void 0:Y.is_instance)==="[object String]"?+(Y==null?void 0:Y.is_instance):0),Ae=(0,v.Z)(He,2),$e=Ae[0],U=Ae[1],Me=(0,a.useState)(!1),De=(0,v.Z)(Me,2),Ke=De[0],Ce=De[1],_e=(0,a.useState)({}),ae=(0,v.Z)(_e,2),oe=ae[0],fe=ae[1],ze={t:M,refresh:!0,page_num:1,page_size:10,name:"",owner:"",tags:"",description:"",cluster_type:"aliyun",ws_id:N},qe=(0,a.useState)((0,r.Z)((0,r.Z)({},ze),Y)),A=(0,v.Z)(qe,2),w=A[0],ve=A[1],ne=(0,a.useState)({list:[],isQuery:""}),H=(0,v.Z)(ne,2),k=H[0],f=H[1],b=(0,a.useState)({}),ge=(0,v.Z)(b,2),X=ge[0],We=ge[1],V=(0,a.useState)([]),Se=(0,v.Z)(V,2),Te=Se[0],Mn=Se[1],Dn=39,On=41,gn=(0,a.useState)(!1),Bn=(0,v.Z)(gn,2),En=Bn[0],u=Bn[1],Oe=(0,a.useState)({}),Pn=(0,v.Z)(Oe,2),Ne=Pn[0],pn=Pn[1],mn=(0,a.useState)(!0),Cn=(0,v.Z)(mn,2),xn=Cn[0],Ue=Cn[1],Zn=(0,a.useRef)(),E=(0,a.useRef)(),Rn=(0,se.YM)(w),ln=(0,a.useCallback)(function(_){Zn.current.show(_)},[]),nn=function(){var _=(0,G.Z)((0,j.Z)().mark(function o(){var c,W,J=arguments;return(0,j.Z)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return c=J.length>0&&J[0]!==void 0?J[0]:{},Ce(!0),pe.next=4,(0,re.Sy)((0,r.Z)({},c));case 4:W=pe.sent,n.m8.replace("/ws/".concat(N,"/device/cloud?").concat((0,ft.stringify)((0,r.Z)((0,r.Z)({},c),{},{is_instance:c.is_instance?1:0})))),W&&fe(W),Ce(!1);case 8:case"end":return pe.stop()}},o)}));return function(){return _.apply(this,arguments)}}(),Nn=(0,se.YM)(oe),Ln=function(){We({}),f((0,r.Z)((0,r.Z)({},k),{},{isQuery:"add",list:[]})),h.resetFields()};(0,a.useEffect)(function(){nn((0,r.Z)((0,r.Z)({},w),{},{is_instance:+$e}))},[w,$e]);var ke=(0,Xn.CR)(),$n=ke.width,qn=function(o){var c=o.tag_list.map(function(W){return W.id});f((0,r.Z)((0,r.Z)({},k),{},{isQuery:"edit",list:c})),We((0,r.Z)({},o))},Un=function(){var _=(0,G.Z)((0,j.Z)().mark(function o(c){var W,J;return(0,j.Z)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pn(c),pe.next=3,(0,Ct.Z9)({server_id:c.id,run_mode:"cluster",server_provider:"aliyun"});case 3:W=pe.sent,W.data.length>0?u(!0):(J=E.current)===null||J===void 0||J.show(c,"(".concat(c.name,")"));case 5:case"end":return pe.stop()}},o)}));return function(c){return _.apply(this,arguments)}}(),Sn=function(){var _=(0,G.Z)((0,j.Z)().mark(function o(c){var W,J,an,pe,hn;return(0,j.Z)().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return W={ws_id:N},J=Rn.current.page_size,Fn.next=4,(0,re.rc)(c,W);case 4:an=Fn.sent,pe=an.code,hn=an.msg,pe===200?(Ee.default.success(le({id:"operation.success"})),u(!1),ve((0,r.Z)((0,r.Z)({},w),{},{page_num:(0,se.NG)(Rn,Nn),page_size:J}))):(0,se.EV)(pe,hn);case 8:case"end":return Fn.stop()}},o)}));return function(c){return _.apply(this,arguments)}}(),wn=function(){var _=(0,G.Z)((0,j.Z)().mark(function o(c,W){var J,an;return(0,j.Z)().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:J=W.id+"",an=c?Te.concat([J]):Te.filter(function(Vn){return Vn!==J}),Mn(an);case 3:case"end":return hn.stop()}},o)}));return function(c,W){return _.apply(this,arguments)}}(),bn=function(o){var c;(c=be.current)===null||c===void 0||c.newMachine(o)},Z=function(){var _=(0,G.Z)((0,j.Z)().mark(function o(){var c;return(0,j.Z)().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,se.MR)({name:Ne.name,id:Ne.id});case 2:c=J.sent,c&&window.open("/ws/".concat(N,"/refenerce/7/?pk=").concat(c));case 4:case"end":return J.stop()}},o)}));return function(){return _.apply(this,arguments)}}(),d=function(o){var c=o.parentId;if(console.log(o),c&&Te.indexOf(c+"")<0){var W=Te.concat([c+""]);Mn(W)}Re.current&&Re.current.reload("add",{parentRowId:c})},l=function(o){return{filterDropdown:function(W){var J=W.confirm;return(0,e.jsx)(ee.Z,{confirm:J,onConfirm:function(pe){return ve((0,r.Z)((0,r.Z)({},w),{},(0,un.Z)({page_num:1},o,pe)))}})},onFilterDropdownVisibleChange:function(W){W&&Ue(!xn)},filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:w[o]?"#1890ff":void 0}})}}},O=[(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.cluster.name"}),dataIndex:"name",width:150},l("name")),{},{render:function(o,c){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:c.name},children:(0,e.jsx)(zn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[w.name||""],autoEscape:!0,textToHighlight:c.name.toString()})})}}),{title:"Owner",dataIndex:"owner_name",width:150,filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:w.owner?"#1890ff":void 0}})},filterDropdown:function(o){var c=o.confirm;return(0,e.jsx)(ie.Z,{autoFocus:xn,confirm:c,onConfirm:function(J){ve((0,r.Z)((0,r.Z)({},w),{},{page_num:1,owner:J}))}})},onFilterDropdownVisibleChange:function(o){o&&Ue(!xn)},render:function(o,c){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:!0},children:c.owner_name})}},{title:(0,e.jsx)(n._H,{id:"device.tag"}),dataIndex:"tag_list",ellipsis:{showTitle:!1},width:240,filterIcon:function(){return(0,e.jsx)(Xe.Z,{style:{color:w.tags&&w.tags.length>0?"#1890ff":void 0}})},filterDropdown:function(o){var c=o.confirm;return(0,e.jsx)(rn.Z,{ws_id:N,run_mode:"cluster",autoFocus:xn,confirm:c,onConfirm:function(J){ve((0,r.Z)((0,r.Z)({},w),{},{page_num:1,tags:J}))}})},render:function(o,c){return(0,e.jsx)($t.Z,{list:c.tag_list.map(function(W){return(0,e.jsx)(dn.Z,{color:W.tag_color,children:W.name},(0,Kt.Z)())})})}},(0,r.Z)((0,r.Z)({title:(0,e.jsx)(n._H,{id:"device.description"}),dataIndex:"description",width:300},l("description")),{},{render:function(o,c){return(0,e.jsx)(ce.K,{ellipsis:{tooltip:c.description},children:(0,e.jsx)(zn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[w.description||""],autoEscape:!0,textToHighlight:c.description?c.description.toString():"-"})})}}),{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),valueType:"option",dataIndex:"id",width:180,render:function(o,c){return(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){bn(c.id)},children:(0,e.jsx)(n._H,{id:"operation.add"})}),(0,e.jsx)(n.Nv,{accessible:de.WsMemberOperateSelf(c.owner),fallback:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return(0,se.WR)()},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return(0,se.WR)()},children:(0,e.jsx)(n._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return qn(c)},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return Un(c)},children:(0,e.jsx)(n._H,{id:"operation.delete"})})]})}),(0,e.jsx)(te.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return ln(c.id)},children:(0,e.jsx)(n._H,{id:"operation.log"})})]})}}],P=function(o){U(o),ve(ze),n.m8.replace("/ws/".concat(N,"/device/cloud?").concat((0,ft.stringify)((0,r.Z)((0,r.Z)({},Y),{},{isInstance:o}))))},q=+$e;return(0,e.jsxs)("div",{className:Tr().warp,children:[(0,e.jsxs)(ye.Z,{type:"card",onTabClick:P,activeKey:$e+"",tabBarExtraContent:(0,e.jsx)(te.Z,{type:"primary",onClick:Ln,children:q?(0,e.jsx)(n._H,{id:"device.add.cluster.instance"}):(0,e.jsx)(n._H,{id:"device.add.cluster.config"})}),children:[(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"device.cluster.config"})},0),(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"device.cluster.instance"})},1)]}),(0,e.jsx)(wr.Z,{size:"small",loading:Ke,columns:O,dataSource:oe.data,rowKey:function(o){return o.id+""},pagination:!1,expandable:{expandedRowRender:function(o){return(0,e.jsx)(Pr,{onRef:Re,size:On,top:Dn,is_instance:q,width:$n-200-68,cluster_id:o.id})},onExpand:function(o,c){wn(o,c)},expandedRowKeys:Te,expandIcon:function(o){var c=o.expanded,W=o.onExpand,J=o.record;return c?(0,e.jsx)(kr.Z,{onClick:function(pe){return W(J,pe)}}):(0,e.jsx)(Ir.Z,{onClick:function(pe){return W(J,pe)}})}}}),(0,e.jsx)(K.Z,{justify:"space-between",style:{padding:"16px 20px 0"},ref:Le,children:(0,e.jsx)(Ft.Z,{total:oe.total,pageSize:w==null?void 0:w.page_size,currentPage:w==null?void 0:w.page_num,onPageChange:function(o,c){ve((0,r.Z)((0,r.Z)({},w),{},{page_num:o,page_size:c}))}})}),(0,e.jsx)(Lr,{outParam:X,tagFlag:k,is_instance:q,params:w,setParams:ve}),(0,e.jsx)($.Z,{ref:Zn,operation_object:"machine_cluster_aliyun"}),(0,e.jsx)(yt,{onRef:be,is_instance:q,onSuccess:d,type:"cluster"}),(0,e.jsxs)(Qe.Z,{title:(0,e.jsx)(n._H,{id:"delete.tips"}),centered:!0,open:En,onCancel:function(){return u(!1)},footer:[(0,e.jsx)(te.Z,{onClick:function(){return Sn(Ne.id)},children:(0,e.jsx)(n._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(te.Z,{type:"primary",onClick:function(){return u(!1)},children:(0,e.jsx)(n._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(yn.Z,{style:{marginRight:4}}),(0,e.jsx)(n._H,{id:"device.cluster.delete.tips"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:Z,children:(0,e.jsx)(n._H,{id:"view.quote.details"})})]}),(0,e.jsx)($r.Z,{ref:E,onOk:function(o){var c=o.id;return Sn(c)}})]})},Ar=(0,a.forwardRef)(Fr),Kr=t(87415),zr=function(){var we=(0,Ge.UO)(),T=we.ws_id,M=(0,Ge.TH)(),D=M.query.t,Y=ye.Z.TabPane,F=(0,a.useState)(D!=null?D:"standalone"),le=(0,v.Z)(F,2),i=le[0],N=le[1],he=(0,a.useState)(new Date().getTime()),Ze=(0,v.Z)(he,2),h=Ze[0],de=Ze[1],be=function(Le){N(Le),de(new Date().getTime()),n.m8.push("/ws/".concat(T,"/device/cloud?t=").concat(Le))};return(0,e.jsx)(Kr.mQ,{title:(0,e.jsxs)(ye.Z,{defaultActiveKey:"1",onTabClick:be,activeKey:i,children:[(0,e.jsx)(Y,{tab:(0,e.jsx)(n._H,{id:"standalone"})},"standalone"),(0,e.jsx)(Y,{tab:(0,e.jsx)(n._H,{id:"cluster"})},"cluster")]}),children:i==="standalone"?(0,e.jsx)(Sr,{tab:i},h):(0,e.jsx)(Ar,{tab:i},h)})}},10938:function(Ye,fn,t){"use strict";t.d(fn,{$x:function(){return Ge},X6:function(){return An},xN:function(){return jn},cm:function(){return tn},BG:function(){return Kn},BS:function(){return me},Ti:function(){return rt},iB:function(){return on},F$:function(){return Gn},x1:function(){return Ee},Sy:function(){return G},Rp:function(){return un},Tv:function(){return r},rc:function(){return Xe},aB:function(){return kn},Yh:function(){return yn},mN:function(){return e},L0:function(){return it},MH:function(){return st},oz:function(){return lt},XW:function(){return Zt},vu:function(){return zn},kA:function(){return dt}});var v=t(39428),Be=t(11849),ye=t(3182),a=t(16917);function Ge(){return n.apply(this,arguments)}function n(){return n=(0,ye.Z)((0,v.Z)().mark(function C(){var ee,ie=arguments;return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return ee=ie.length>0&&ie[0]!==void 0?ie[0]:{},$.abrupt("return",(0,a.WY)("/api/server/cloud_server/",{params:ee}));case 2:case"end":return $.stop()}},C)})),n.apply(this,arguments)}function An(){return K.apply(this,arguments)}function K(){return K=(0,ye.Z)((0,v.Z)().mark(function C(){var ee,ie=arguments;return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return ee=ie.length>0&&ie[0]!==void 0?ie[0]:{},$.abrupt("return",(0,a.WY)("/api/server/cloud_server/",{method:"POST",data:(0,Be.Z)({},ee)}));case 2:case"end":return $.stop()}},C)})),K.apply(this,arguments)}function jn(){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,ye.Z)((0,v.Z)().mark(function C(){var ee,ie=arguments;return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return ee=ie.length>0&&ie[0]!==void 0?ie[0]:{},$.abrupt("return",(0,a.WY)("/api/server/cloud_server/copy/",{method:"POST",data:(0,Be.Z)({},ee)}));case 2:case"end":return $.stop()}},C)})),Qe.apply(this,arguments)}function tn(C){return te.apply(this,arguments)}function te(){return te=(0,ye.Z)((0,v.Z)().mark(function C(ee){var ie,rn=arguments;return(0,v.Z)().wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:return ie=rn.length>1&&rn[1]!==void 0?rn[1]:{},Qn.abrupt("return",(0,a.WY)("/api/server/cloud_server/detail/".concat(ee,"/"),{method:"PUT",data:(0,Be.Z)({},ie)}));case 2:case"end":return Qn.stop()}},C)})),te.apply(this,arguments)}function Kn(C,ee){return L.apply(this,arguments)}function L(){return L=(0,ye.Z)((0,v.Z)().mark(function C(ee,ie){return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,a.WY)("/api/server/cloud_server/detail/".concat(ee,"/"),{method:"DELETE",data:(0,Be.Z)({},ie)}));case 1:case"end":return $.stop()}},C)})),L.apply(this,arguments)}function Je(){return dn.apply(this,arguments)}function dn(){return dn=_asyncToGenerator(_regeneratorRuntime().mark(function C(){var ee,ie=arguments;return _regeneratorRuntime().wrap(function($){for(;;)switch($.prev=$.next){case 0:return ee=ie.length>0&&ie[0]!==void 0?ie[0]:{},$.abrupt("return",request("/api/server/server_tag/",{params:ee}));case 2:case"end":return $.stop()}},C)})),dn.apply(this,arguments)}function tt(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return request("/api/auth/user/",{params:C})}function me(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/instance_type/",{params:C})}function rt(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/aliyun/",{params:C})}function on(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/image/",{params:C})}function Gn(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/disk/categories/",{params:C})}function Ee(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/check/cloud_name/",{params:C})}function j(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return request("/api/server/check/var_name/",{method:"POST",data:_objectSpread({},C)})}function G(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/test_cluster/",{params:C})}function un(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/test_cluster/",{method:"POST",data:(0,Be.Z)({},C)})}function r(C,ee){return(0,a.WY)("/api/server/test_cluster/detail/".concat(C,"/"),{method:"PUT",data:(0,Be.Z)({},ee)})}function Xe(C,ee){return(0,a.WY)("/api/server/test_cluster/detail/".concat(C,"/"),{method:"DELETE",data:ee})}function kn(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_ak/",{params:C})}function yn(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/region/",{params:C})}function e(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/cloud_server/zone/",{params:C})}function at(C){return request("/api/server/test_cluster/cloud_type/".concat(C,"/"))}function it(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/test_cluster/cloud_server/",{params:C})}function st(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.WY)("/api/server/test_cluster/cloud_server/",{method:"POST",data:(0,Be.Z)({},C)})}function lt(C){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,a.WY)("/api/server/test_cluster/cloud_server/detail/".concat(C,"/"),{method:"PUT",data:(0,Be.Z)({},ee)})}function Zt(C){return(0,a.WY)("/api/server/test_cluster/cloud_server/detail/".concat(C,"/"),{method:"DELETE"})}var zn=function(){var C=(0,ye.Z)((0,v.Z)().mark(function ee(ie){return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,a.WY)("/api/server/sync_state/",{method:"post",data:ie}));case 1:case"end":return $.stop()}},ee)}));return function(ie){return C.apply(this,arguments)}}(),dt=function(){var C=(0,ye.Z)((0,v.Z)().mark(function ee(ie){return(0,v.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,a.WY)("/api/server/sync_cloud_server_info/",{params:ie}));case 1:case"end":return $.stop()}},ee)}));return function(ie){return C.apply(this,arguments)}}()}}]);
