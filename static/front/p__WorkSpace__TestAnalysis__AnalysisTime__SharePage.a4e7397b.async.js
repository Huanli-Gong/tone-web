(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[2684,2485],{86772:function(xe,R,a){"use strict";a.r(R),a.d(R,{default:function(){return le}});var S=a(39428),l=a(11849),E=a(3182),D=a(2824),je=a(49111),j=a(19650),Ze=a(22385),K=a(89456),Se=a(402),L=a(97272),De=a(48736),A=a(27049),f=a(67294),O=a(16917),N=a(20009),P=a(21401),Q=a(65923),W=a(27807),X=a(97015),w=a(68470),I=a(28991),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},q=k,_=a(27029),ee=function(r,d){return f.createElement(_.Z,(0,I.Z)((0,I.Z)({},r),{},{ref:d,icon:q}))},te=f.forwardRef(ee),B=te,z=a(14780),ae=a(99846),t=a(85893),ne=[["test_type","ws.result.details.test_type"],["env","analysis.env"],["project","analysis.project"],["tag","analysis.tag"],["date","analysis.date"]],ie=new Map(ne),re=function(r){var d=(0,O.YB)(),o=d.formatMessage,h=ie.get(r);return h?o({id:h}):""},M=function(r){var d=r.name,o=r.content,h=r.hasDivider,p=h===void 0?!1:h,C=re(d);return o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.Z,{title:C,children:(0,t.jsx)(L.Z.Text,{children:o||"-"})}),p&&(0,t.jsx)(A.Z,{type:"vertical"})]}):(0,t.jsxs)(t.Fragment,{children:["-",p&&(0,t.jsx)(A.Z,{type:"vertical"})]})},$=function(r){var d=r.name,o=r.context;return o?(0,t.jsxs)(j.Z,{children:[(0,t.jsx)("span",{children:d}),o]}):(0,t.jsx)(t.Fragment,{})},se=function(){var r,d,o,h=(0,N.UO)(),p=h.share_id,C=(0,O.YB)(),F=C.formatMessage,de=f.useState(),G=(0,D.Z)(de,2),e=G[0],H=G[1],oe=f.useState(!0),V=(0,D.Z)(oe,2),ve=V[0],Y=V[1],ue=f.useState(!0),b=(0,D.Z)(ue,2),ce=b[0],x=b[1],fe=f.useState([]),U=(0,D.Z)(fe,2),m=U[0],J=U[1],he=function(){var v=(0,E.Z)((0,S.Z)().mark(function u(c){var n,s,y,g,Z;return(0,S.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return x(!0),i.next=3,(0,P.mq)((0,l.Z)((0,l.Z)({},c),{},{share_id:p}));case 3:if(n=i.sent,s=n.data,y=n.code,x(!1),y===200){i.next=9;break}return i.abrupt("return");case 9:g=s.case_map,Z=s.job_list,H(function(ge){return(0,l.Z)((0,l.Z)({},ge),{},{case_map:g})}),J(Z);case 12:case"end":return i.stop()}},u)}));return function(c){return v.apply(this,arguments)}}(),pe=function(){var v=(0,E.Z)((0,S.Z)().mark(function u(){var c,n,s,y,g,Z;return(0,S.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return Y(!0),i.next=3,(0,P.dv)({share_id:p});case 3:if(c=i.sent,n=c.data,s=c.code,Y(!1),s===200){i.next=9;break}return i.abrupt("return");case 9:if(y=n.provider_env,g=n.test_type,Z=n.metricList,H((0,l.Z)((0,l.Z)({},n),{},{test_type_name:F({id:"analysis.".concat(g)}),provider_name:F({id:y}),metric:Z})),g!=="functional"&&!(n!=null&&n.fetchData)&&x(!1),g!=="functional"){i.next=20;break}if(!((n==null?void 0:n.show_type)==="pass_rate"&&!(n!=null&&n.case_name))){i.next=16;break}return x(!1),i.abrupt("return");case 16:if(!((n==null?void 0:n.show_type)==="result_trend"&&!(n!=null&&n.sub_case_name))){i.next=19;break}return x(!1),i.abrupt("return");case 19:he(n);case 20:case"end":return i.stop()}},u)}));return function(){return v.apply(this,arguments)}}();f.useEffect(function(){pe()},[]);var me=function(u){J(function(c){var n=u.map(function(s){return s.id});return c.filter(function(s){return!n.includes(s.id)}).concat(u).sort(function(s,y){return y.id-s.id})})};return ve?(0,t.jsx)(z.Z,{}):(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{background:"#fff",padding:"24px 24px 12px 24px",display:"flex",flexDirection:"column",gap:10},children:[(0,t.jsx)("h4",{style:{fontSize:24},children:(0,t.jsxs)(j.Z,{children:["\u65F6\u5E8F\u5206\u6790\u5206\u4EAB",(0,t.jsx)(B,{}),e==null?void 0:e.test_type_name]})}),(0,t.jsxs)("div",{children:[(e==null?void 0:e.test_type)==="performance"&&(0,t.jsx)(M,{hasDivider:!0,name:"env",content:e==null?void 0:e.provider_name}),(0,t.jsx)(M,{hasDivider:!0,name:"project",content:e==null?void 0:e.project}),(0,t.jsx)(M,{hasDivider:!0,name:"tag",content:(e==null?void 0:e.tag)||F({id:"analysis.indistinguishable"})}),(0,t.jsx)(M,{name:"date",content:(0,t.jsxs)(j.Z,{children:[e==null?void 0:e.start_time,(0,t.jsx)(B,{}),e==null?void 0:e.end_time]})})]}),(0,t.jsx)($,{name:"Test Suite: ",context:e==null?void 0:e.suite_name}),(0,t.jsx)($,{name:(e==null?void 0:e.test_type)==="performance"?"Test Case:":"Test Conf: ",context:e==null?void 0:e.case_name}),(e==null?void 0:e.test_type)==="performance"&&(e==null?void 0:e.metric)&&(0,t.jsxs)(j.Z,{align:"start",children:[(0,t.jsx)("span",{children:"Metric: "}),(0,t.jsx)(L.Z.Paragraph,{ellipsis:{rows:2,tooltip:!0},children:e==null||(r=e.metric)===null||r===void 0?void 0:r.map(function(v){return(0,t.jsx)("div",{children:v},v)})})]}),(e==null?void 0:e.test_type)!=="performance"&&(e==null?void 0:e.show_type)!=="pass_rate"&&(0,t.jsx)($,{name:"Test Subcase: ",context:e==null?void 0:e.sub_case_name})]}),ce&&(0,t.jsx)(z.Z,{}),(e==null?void 0:e.test_type)==="performance"&&(e==null||(d=e.fetchData)===null||d===void 0?void 0:d.length)>0&&(0,t.jsx)("div",{style:{display:"flex",marginTop:10},children:(0,t.jsx)(j.Z,{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)"},direction:"vertical",children:e==null||(o=e.fetchData)===null||o===void 0?void 0:o.map(function(v){var u={key:v.metric,fetchData:(0,l.Z)((0,l.Z)({},v),{},{share_id:p}),setLoading:x,provider_env:e==null?void 0:e.provider_env,valueChange:me};return(e==null?void 0:e.provider_env)==="aliyun"?(0,t.jsx)(Q.Z,(0,l.Z)({},u)):(0,t.jsx)(W.ZP,(0,l.Z)({},u))})})}),(e==null?void 0:e.test_type)==="functional"&&(e==null?void 0:e.case_map)&&(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)(X.Z,(0,l.Z)({share_id:p,dataSource:e==null?void 0:e.case_map},e))}),(m==null?void 0:m.length)>0&&(0,t.jsx)("div",{children:(0,t.jsx)(w.Z,{refresh:function(){},dataSource:m,test_type:e==null?void 0:e.test_type,show_type:e==null?void 0:e.show_type})}),(m==null?void 0:m.length)===0&&(0,t.jsx)("div",{style:{marginTop:10,minHeight:480,background:"#fff"},children:(0,t.jsx)(ae.Z,{})})]})},le=se}}]);
