(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5443,2485],{77429:function(Re){Re.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},47415:function(Re){Re.exports={job_test_form:"job_test_form___1bVwL"}},87415:function(Re,_e,t){"use strict";t.d(_e,{mQ:function(){return me},gM:function(){return V},nU:function(){return Ze}});var K=t(58024),$=t(91894),oe=t(20310),E=t(12788),Fe,ue,v,ae,me=(0,E.ZP)($.Z)(Fe||(Fe=(0,oe.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),V=(0,E.ZP)(me)(ue||(ue=(0,oe.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),ye=(0,E.ZP)($.Z)(v||(v=(0,oe.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),Ze=(0,E.ZP)(ye)(ae||(ae=(0,oe.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},72529:function(Re,_e,t){"use strict";t.d(_e,{gN:function(){return Z},tZ:function(){return A},yQ:function(){return Ee},Pc:function(){return ie},KS:function(){return ce},YV:function(){return R},Nq:function(){return ve},JQ:function(){return Oe},iK:function(){return he},fD:function(){return De},QN:function(){return b},ud:function(){return h}});var K=t(402),$=t(97272),oe=t(49111),E=t(19650),Fe=t(20136),ue=t(55241),v=t(11849),ae=t(71153),me=t(60331),V=t(89032),ye=t(15746),Ze=t(13062),H=t(71230),Y=t(22385),P=t(89456),le=t(20310),d=t(36017),_=t(35247),f=t(67294),r=t(77429),J=t.n(r),pe=t(8212),Pe=t(1870),Be=t(20009),G=t(16917),He=t(12788),Ce=t(24480),Ae=t(60035),Se=t(10753),a=t(85893),y,o,T=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),Z=function(n){var s=(0,Be.UO)(),i=s.ws_id;return(0,a.jsxs)(_.Z,{style:{marginBottom:n.bottomHeight},children:[(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return G.m8.push("/ws/".concat(i,"/test_result"))},children:(0,a.jsx)(G._H,{id:"ws.result.details.test.result"})})}),(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)(G._H,{id:"ws.result.details.result.details"})})]})},e=new Map([["success","#81BF84"],["fail","#C84C5A"],["running","#649FF6"],["stop","#1D1D1D"],["pending","#1D1D1D"],["skip","#1D1D1D"],["warning","#faad14"]]),N=function(n){return e.get(n)||""},W=He.ZP.span(y||(y=(0,le.Z)([`
    color: `,`;
    fontWeight: 500;
    text-transform: capitalize;
`])),function(l){var n=l.color;return n}),A=function(n){var s=n;return Object.prototype.toString.call(n)==="[object Boolean]"&&(s=n?"success":"fail"),(0,a.jsx)(W,{color:N(s),children:s})},Ee=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(i){return i?(0,a.jsx)(Se.K,{ellipsis:{tooltip:!0},children:i}):n}}},ie=function(n){var s=n.title,i=n.width,c=i===void 0?"100%":i,g=n.onEdit,w=n.access,B=(0,f.useRef)(),U=(0,Be.UO)(),L=U.share_id;return(0,a.jsx)("div",{ref:B,style:{width:c},children:(0,a.jsxs)(H.Z,{style:{width:c},justify:"start",align:"middle",children:[(0,a.jsx)(P.Z,{placement:"topLeft",title:s,children:(0,a.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s||"-"})}),!L&&(0,a.jsx)(pe.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return w?g():(0,Ce.WR)()}})]})})},de=function(n){return T.get(n)||"#D9D9D9"},D=function(n){var s=n.text,i=(0,G.YB)(),c=(0,Ae.oM)(i.formatMessage({id:"request.copy.success"}));return(0,a.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return c(s)},children:i.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},Te=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(i){return i?_jsx(_Tooltip,{overlayClassName:styles.tootip_overflow,placement:"topLeft",title:_jsxs(_Row,{children:[_jsx(_Col,{span:24,style:{whiteSpace:"break-spaces"},children:i}),_jsx(_Col,{span:24,children:_jsx(_Row,{justify:"center",children:_jsx(D,{text:i})})})]}),children:i}):n}}},ce=function(n){var s=n.text,i=n.defaultText,c=i===void 0?"-":i;return s?(0,a.jsx)(P.Z,{overlayClassName:J().tootip_overflow,placement:"topLeft",title:(0,a.jsxs)(H.Z,{children:[(0,a.jsx)(ye.Z,{span:24,style:{whiteSpace:"break-spaces"},children:s}),(0,a.jsx)(ye.Z,{span:24,children:(0,a.jsx)(H.Z,{justify:"center",children:(0,a.jsx)(D,{text:s})})})]}),children:s}):c},R=function(n){return n==="decline"?"#C84C5A":n==="normal"?"#000000":n==="increase"?"#81BF84":""},ve=function(n,s,i){return n==="decline"?(0,a.jsx)("span",{style:{color:"#C84C5A"},children:i({id:"ws.result.details.".concat(n)})}):n==="normal"?(0,a.jsx)("span",{style:{color:"#000000"},children:i({id:"ws.result.details.".concat(n)})}):n==="increase"?(0,a.jsx)("span",{style:{color:"#81BF84"},children:i({id:"ws.result.details.".concat(n)})}):s||"-"},z=(0,He.ZP)(me.Z)(o||(o=(0,le.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(l){var n=l.no_margin;return n?"margin-right: 0;":""}),I=function(n){return(0,a.jsx)(z,(0,v.Z)({},(0,v.Z)((0,v.Z)({},n),{},{collection:void 0})))},k=function(n){var s=(0,G.YB)(),i=s.formatMessage;return(0,a.jsx)(P.Z,{title:i({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,a.jsx)(z,(0,v.Z)({},n))})},C=function(n){var s=n.title;return(0,a.jsx)(ue.Z,{title:s,placement:"right",trigger:"hover",overlayClassName:J().tag_popover_style,children:(0,a.jsx)(Pe.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},m=function(n){var s=n.state;return(0,a.jsx)(I,(0,v.Z)((0,v.Z)({},n),{},{color:de(s),style:T.get(s)?void 0:{color:"#1d1d1d"},children:s==="success"?"complete":s}))},fe=function(n){var s=n.state;return(0,a.jsx)(k,(0,v.Z)((0,v.Z)({},n),{},{color:de(s),style:T.get(s)?void 0:{color:"#1d1d1d"},children:s==="success"?"complete":s}))},Oe=function(n){var s=(0,G.YB)(),i=s.formatMessage,c=n.state,g=n.run_state,w=g===void 0?"":g,B=n.state_desc,U=(0,Be.UO)(),L=U.ws_id;return c==="running"?B?(0,a.jsxs)(E.Z,{size:0,children:[(0,a.jsx)(m,(0,v.Z)((0,v.Z)({},n),{},{children:c})),(0,a.jsx)(C,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:B.replace(/(\d+)/g,'<a href="/ws/'.concat(L,'/test_result/$1" target="_blank">$1</a>'))}})})]}):w?(0,a.jsxs)(E.Z,{size:0,children:[(0,a.jsx)(m,(0,v.Z)((0,v.Z)({},n),{},{children:c})),(0,a.jsx)(C,{title:i({id:"ws.result.details.not.assigned.server"})})]}):(0,a.jsxs)(E.Z,{size:0,children:[(0,a.jsx)(m,(0,v.Z)((0,v.Z)({},n),{},{children:c})),(0,a.jsx)(C,{title:i({id:"ws.result.details.running,please.wait"})})]}):c==="pending"&&B?(0,a.jsxs)(E.Z,{size:0,children:[(0,a.jsx)(m,(0,v.Z)((0,v.Z)({},n),{},{children:c})),(0,a.jsx)(C,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:B.replace(/(\d+)/g,'<a href="/ws/'.concat(L,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,a.jsx)(m,(0,v.Z)({},n))},he=function(n){return(0,a.jsx)(fe,(0,v.Z)((0,v.Z)({},n),{},{no_margin:1}))},De=function(n){var s=n.title,i=n.desc,c=n.placement,g=c===void 0?"bottom":c;return(0,a.jsxs)(E.Z,{children:[(0,a.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:s}),(0,a.jsx)(P.Z,{overlayClassName:J().table_question_tooltip,placement:g,arrowPointAtCenter:!0,title:i,color:"#fff",children:(0,a.jsx)(Pe.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},b=function(n){var s=n.title,i=n.test_value,c=n.value_list,g=n.cv_value,w=n.max_value,B=n.min_value,U=n.metric,L=n.result,ge=(0,G.YB)(),We=ge.formatMessage,Le=(0,Ae.oM)(We({id:"request.copy.success"})),F=function(ee){return ee?new Number(ee).toFixed(2):null},be=F(w),xe=F(B),ze=g,se=F(i),O=c.map(function(Q){return F(Q)}),S="".concat(U," ").concat(s,`:
Avg: `).concat(se,`
CV:  `).concat(ze);S+=be?`
Max: `.concat(be):"",S+=xe?`
Min: `.concat(xe):"",S+=O.length?`
Test Record
`:"",S+=O.reduce(function(Q,ee,Me){return Q.concat("(".concat(Me+1,") ").concat(ee,`
`))},"");var q="".concat(se,"\xB1").concat(ze),Ie=function(){return L==="decline"?(0,a.jsx)("span",{className:J().result_popover_span,style:{color:"#C84C5A"},children:q}):L==="increase"?(0,a.jsx)("span",{className:J().result_popover_span,style:{color:"#81BF84"},children:q}):(0,a.jsx)("span",{className:J().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:q})};return(0,a.jsx)(ue.Z,{overlayClassName:J().metric_list_copy,title:(0,a.jsxs)(H.Z,{justify:"space-between",children:[(0,a.jsx)("b",{children:s}),(0,a.jsx)("span",{onClick:function(){return Le(S)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,a.jsx)(G._H,{id:"operation.copy"})})]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(H.Z,{children:[(0,a.jsx)("b",{children:"Avg\uFF1A"}),(0,a.jsx)("span",{children:se})]}),(0,a.jsxs)(H.Z,{children:[(0,a.jsx)("b",{children:"CV\uFF1A"}),(0,a.jsx)("span",{children:ze})]}),(0,a.jsxs)(H.Z,{children:[(0,a.jsx)("b",{children:"Max\uFF1A"}),(0,a.jsx)("span",{children:be})]}),(0,a.jsxs)(H.Z,{children:[(0,a.jsx)("b",{children:"Min\uFF1A"}),(0,a.jsx)("span",{children:xe})]}),O.length>0&&(0,a.jsx)(H.Z,{style:{marginTop:16},children:(0,a.jsx)("b",{children:"Test Record"})}),O.map(function(Q,ee){return(0,a.jsx)(H.Z,{children:"(".concat(ee+1,")").concat(Q)},ee)})]}),children:Ie()})},h=function(n,s){return s&&(0,a.jsx)(ye.Z,{span:24,children:(0,a.jsxs)(H.Z,{children:[(0,a.jsx)($.Z.Text,{style:{width:70,fontWeight:600,marginRight:8},children:n}),(0,a.jsx)($.Z.Paragraph,{style:{width:"calc( 100% - 70px - 8px)"},ellipsis:!0,children:s})]})})}},62691:function(Re,_e,t){"use strict";t.r(_e),t.d(_e,{default:function(){return Te}});var K=t(71194),$=t(50146),oe=t(57663),E=t(71577),Fe=t(20228),ue=t(11382),v=t(49111),ae=t(19650),me=t(54029),V=t(79166),ye=t(402),Ze=t(97272),H=t(34792),Y=t(48086),P=t(39428),le=t(3182),d=t(11849),_=t(2824),f=t(67294),r=t(16917),J=t(20009),pe=t(22406),Pe=t(57119),Be=t(57338),G=t(440),He=t(88983),Ce=t(47933),Ae=t(47673),Se=t(4107),a=t(9715),y=t(20526),o=t(24480),T=t(47415),Z=t.n(T),e=t(85893),N=(0,f.forwardRef)(function(ce,R){var ve=ce.onOk,z=(0,r.YB)(),I=z.formatMessage,k=(0,f.useState)(!1),C=(0,_.Z)(k,2),m=C[0],fe=C[1],Oe=(0,f.useState)(!1),he=(0,_.Z)(Oe,2),De=he[0],b=he[1],h=(0,f.useState)(""),l=(0,_.Z)(h,2),n=l[0],s=l[1],i=(0,f.useState)(""),c=(0,_.Z)(i,2),g=c[0],w=c[1],B=(0,f.useState)({}),U=(0,_.Z)(B,2),L=U[0],ge=U[1],We=y.Z.useForm(),Le=(0,_.Z)(We,1),F=Le[0];(0,f.useImperativeHandle)(R,function(){return{show:function(O){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O&&w(O),O==="copy"){s(S.name);var q="".concat(S.name,"-copy-").concat((0,o.FE)());F.setFieldsValue({name:q})}else F.setFieldsValue({name:S.name,description:S.description,enable:S.enable});fe(!0),ge(S)}}});var be=function(){fe(!1),F.resetFields()},xe=function(O,S){S===200?(ve(),fe(!1),F.resetFields(),Y.default.success(I({id:"operation.success"}))):(0,o.EV)(S,O),b(!1)},ze=function(){b(!0),F.validateFields().then(function(){var O=(0,le.Z)((0,P.Z)().mark(function S(q){var Ie,Q,ee,Me,M,re;return(0,P.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(console.log(q,L),g!=="copy"){X.next=10;break}return X.next=4,(0,pe.cg)((0,d.Z)((0,d.Z)({},q),{},{template_id:L.id}));case 4:Ie=X.sent,Q=Ie.msg,ee=Ie.code,xe(Q,ee),X.next=16;break;case 10:return X.next=12,(0,pe.iM)((0,d.Z)((0,d.Z)({},q),{},{template_id:L.id,update_item:"template"}));case 12:Me=X.sent,M=Me.msg,re=Me.code,xe(M,re);case 16:case"end":return X.stop()}},S)}));return function(S){return O.apply(this,arguments)}}()).catch(function(O){console.log(O),b(!1)})};return(0,e.jsxs)(G.Z,{title:(0,e.jsx)(r._H,{id:"job.templates.".concat(g)}),maskClosable:!1,keyboard:!1,open:m,width:"380",onClose:be,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)(E.Z,{onClick:be,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(E.Z,{type:"primary",disabled:De,onClick:ze,children:~g.indexOf("edit")?(0,e.jsx)(r._H,{id:"operation.update"}):(0,e.jsx)(r._H,{id:"operation.ok"})})]})}),children:[g==="copy"&&(0,e.jsxs)(ae.Z,{style:{paddingBottom:12},children:[(0,e.jsx)("div",{style:{color:"rgba(0,0,0,.8)",fontWeight:600},children:(0,e.jsx)(r._H,{id:"job.templates.original.name"})}),(0,e.jsx)("div",{style:{color:" rgba(0,0,0,0.65)"},children:n})]}),(0,e.jsxs)(y.Z,{layout:"vertical",form:F,className:Z().job_test_form,children:[(0,e.jsx)(y.Z.Item,{label:g==="edit"?(0,e.jsx)(r._H,{id:"job.templates.template.name"}):(0,e.jsx)(r._H,{id:"job.templates.new.template.name"}),name:"name",rules:[{required:!0,message:I({id:"job.templates.template.name.message"})},{pattern:/^[A-Za-z0-9\._-]{1,64}$/g,message:I({id:"please.enter.message64"})}],children:(0,e.jsx)(Se.Z,{autoComplete:"off",placeholder:I({id:"job.templates.template.name.message"})})}),(0,e.jsx)(y.Z.Item,{label:(0,e.jsx)(r._H,{id:"job.templates.templates.desc"}),name:"description",children:(0,e.jsx)(Se.Z.TextArea,{rows:3,placeholder:I({id:"job.templates.templates.desc.placeholder"})})}),(0,e.jsx)(y.Z.Item,{label:(0,e.jsx)(r._H,{id:"job.templates.enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)(Ce.ZP.Group,{children:[(0,e.jsx)(Ce.ZP,{value:!0,children:(0,e.jsx)(r._H,{id:"operation.yes"})}),(0,e.jsx)(Ce.ZP,{value:!1,children:(0,e.jsx)(r._H,{id:"operation.no"})})]})})]})]})}),W=t(86213),A=t(78037),Ee=t(87415),ie=t(96486),de=t(85450),D=t(72529),Te=function(){var ce=(0,r.YB)(),R=ce.formatMessage,ve=(0,J.UO)(),z=ve.ws_id,I=(0,r.md)(),k={page_num:1,page_size:10,ws_id:z},C=(0,r.tT)("@@initialState"),m=C.initialState,fe=C.setInitialState,Oe=(0,f.useState)(!1),he=(0,_.Z)(Oe,2),De=he[0],b=he[1],h=(0,f.useState)(!1),l=(0,_.Z)(h,2),n=l[0],s=l[1],i=(0,f.useState)({data:[],total:0}),c=(0,_.Z)(i,2),g=c[0],w=c[1],B=(0,f.useState)(!1),U=(0,_.Z)(B,2),L=U[0],ge=U[1],We=(0,f.useState)({}),Le=(0,_.Z)(We,2),F=Le[0],be=Le[1],xe=(0,f.useRef)(),ze=(0,J.TH)(),se=ze.state,O=(0,f.useRef)(),S=(0,f.useState)(0),q=(0,_.Z)(S,2),Ie=q[0],Q=q[1],ee=(0,f.useState)(se&&JSON.stringify(se)!=="{}"?(0,d.Z)((0,d.Z)({},k),se):k),Me=(0,_.Z)(ee,2),M=Me[0],re=Me[1],Xe=(0,o.YM)(M),X=function(){var x=(0,le.Z)((0,P.Z)().mark(function u(){var p,j,te;return(0,P.Z)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return ge(!0),je.next=3,(0,pe.qi)(M);case 3:p=je.sent,j=p.code,te=p.msg,j===200?w(p):(0,o.EV)(j,te),ge(!1);case 7:case"end":return je.stop()}},u)}));return function(){return x.apply(this,arguments)}}(),Ve=function(){X()};(0,f.useEffect)(function(){X()},[M]);var Ye=function(){var x=(0,le.Z)((0,P.Z)().mark(function u(p){var j;return(0,P.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return be(p),ne.next=3,(0,pe.pi)({template_id:p.id});case 3:j=ne.sent,j.data.length>0?b(!0):s(!0);case 5:case"end":return ne.stop()}},u)}));return function(p){return x.apply(this,arguments)}}(),$e=function(){var x=(0,le.Z)((0,P.Z)().mark(function u(){var p,j,te,ne,je,Ne,Qe,Ue;return(0,P.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,(0,pe.Ug)({template_id:F.id,ws_id:z});case 2:p=we.sent,j=p.code,te=p.msg,j===200?(ne=(0,ie.cloneDeep)(M),je=ne.page_size,Ne=ne.page_num,Qe=(0,ie.get)(g,"total")%je==1,Ue=Math.floor((0,ie.get)(g,"total")/je),Qe&&Ue&&Ue+1<=Ne?(ne.page_num=Ue,re(ne)):X(),fe((0,d.Z)((0,d.Z)({},m),{},{refreshMenu:!(m!=null&&m.refreshMenu)})),b(!1),s(!1),Y.default.success(R({id:"operation.success"}))):(0,o.EV)(j,te);case 6:case"end":return we.stop()}},u)}));return function(){return x.apply(this,arguments)}}(),Je=function(){var x=(0,le.Z)((0,P.Z)().mark(function u(){var p;return(0,P.Z)().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,o.MR)({name:F.name,id:F.id});case 2:p=te.sent,p&&window.open("/ws/".concat(z,"/refenerce/3/?pk=").concat(p));case 4:case"end":return te.stop()}},u)}));return function(){return x.apply(this,arguments)}}(),Ge=function(u){var p=u.id,j=u.job_type;if(!j)return Y.default.warning(R({id:"job.templates.delete.the.problem.template"}));r.m8.push({pathname:"/ws/".concat(z,"/test_template/").concat(p,"/preview"),state:M})},ke=function(u){xe.current.show("copy",u)},qe=[(0,d.Z)((0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.name"}),dataIndex:"name",fixed:"left",width:240},(0,A.QT)(M,re,"name")),(0,D.yQ)("-")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.description"}),width:150,dataIndex:"description"},(0,A.QT)(M,re,"description")),(0,D.yQ)("-")),(0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.enable"}),ellipsis:!0,width:80,dataIndex:"enable",render:function(u){return(0,e.jsx)(V.Z,{status:u?"success":"error",text:(0,e.jsx)(Ze.Z.Text,{children:u?(0,e.jsx)(r._H,{id:"job.templates.enable"}):(0,e.jsx)(r._H,{id:"job.templates.stop"})})})}},(0,A.KW)(M,re,[{name:R({id:"job.templates.enable"}),value:1},{name:R({id:"job.templates.stop"}),value:0}],"enable")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.job_type"}),dataIndex:"job_type",width:130},(0,D.yQ)("-")),(0,A.Ht)(M,re,m==null?void 0:m.jobTypeList.map(function(x){var u=x.id,p=x.name;return{name:p,value:u}}),"job_type_id")),(0,d.Z)((0,d.Z)({width:90,title:(0,e.jsx)(r._H,{id:"job.templates.creator_name"})},(0,D.yQ)("-")),{},{dataIndex:"creator_name"},(0,A.ln)(M,re,"creator")),(0,d.Z)((0,d.Z)({width:90},(0,D.yQ)("-")),{},{title:(0,e.jsx)(r._H,{id:"job.templates.update_user"}),dataIndex:"update_user"},(0,A.ln)(M,re,"update_user")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.gmt_created"}),width:120},(0,D.yQ)("-")),{},{dataIndex:"gmt_created"}),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(r._H,{id:"job.templates.gmt_modified"}),width:120},(0,D.yQ)("-")),{},{dataIndex:"gmt_modified"}),{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),width:155,fixed:"right",key:"operation",render:function(u,p){return(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)("span",{onClick:function(){return Ge(u)},style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(r._H,{id:"operation.preview"})}),(0,e.jsx)(r.Nv,{accessible:I.WsMemberOperateSelf(p.creator),fallback:(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,o.WR)()},children:(0,e.jsx)(r._H,{id:"operation.copy"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,o.WR)()},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,o.WR)()},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return ke(u)},children:(0,e.jsx)(r._H,{id:"operation.copy"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return et(u)},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return Ye((0,d.Z)({},p))},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]})})]})}}],et=function(u){var p=u.id,j=u.job_type;if(!j)return Y.default.warning(R({id:"job.templates.delete.the.problem.template"}));r.m8.push({pathname:"/ws/".concat(z,"/test_template/").concat(p,"/edit"),state:M})},Ke=function(){return Q(O.current.clientWidth)};return(0,f.useEffect)(function(){return Ke(),window.addEventListener("resize",Ke),function(){window.removeEventListener("resize",Ke)}},[]),(0,e.jsxs)(Ee.gM,{title:(0,e.jsx)(r._H,{id:"job.templates.list"}),children:[(0,e.jsxs)(ue.Z,{spinning:L,children:[(0,e.jsx)("div",{ref:O,children:(0,e.jsx)(de.sL,{name:"ws-job-template-manage",size:"small",dataSource:g.data,columns:qe,pagination:!1,refreshDeps:[M,I,m==null?void 0:m.jobTypeList,z],scroll:{x:Ie}})}),(0,e.jsx)(W.Z,{pageSize:M.page_size,currentPage:M.page_num,total:g.total,onPageChange:function(u,p){return re((0,d.Z)((0,d.Z)({},M),{},{page_size:p,page_num:u}))}})]}),(0,e.jsx)(N,{ref:xe,onOk:Ve}),(0,e.jsxs)($.Z,{title:(0,e.jsx)(r._H,{id:"job.templates.delete.prompt"}),centered:!0,open:De,onCancel:function(){return b(!1)},footer:[(0,e.jsx)(E.Z,{onClick:$e,children:(0,e.jsx)(r._H,{id:"operation.delete"})},"submit"),(0,e.jsx)(E.Z,{type:"primary",onClick:function(){return b(!1)},children:(0,e.jsx)(r._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(Pe.Z,{style:{marginRight:4}}),(0,e.jsx)(r._H,{id:"job.templates.delete.prompt.ps"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:Je,children:(0,e.jsx)(r._H,{id:"job.templates.view.details"})})]}),(0,e.jsx)($.Z,{title:(0,e.jsx)(r._H,{id:"job.templates.delete.prompt"}),centered:!0,open:n,onCancel:function(){return s(!1)},footer:[(0,e.jsx)(E.Z,{onClick:$e,children:(0,e.jsx)(r._H,{id:"operation.delete"})},"submit"),(0,e.jsx)(E.Z,{type:"primary",onClick:function(){return s(!1)},children:(0,e.jsx)(r._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(Pe.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(r._H,{id:"delete.prompt"})]})})]})}},85450:function(Re,_e,t){"use strict";t.d(_e,{sL:function(){return a},ny:function(){return Ae},Fu:function(){return Se}});var K=t(11849),$=t(2824),oe=t(93224),E=t(32059),Fe=t(66456),ue=t(79764),v=t(86582),ae=t(19273),me=t(20310),V=t(67294),ye=t(1706),Ze=t(12788),H=t(57392),Y=t(85893),P=["width","onResizeStart","onResize","onResizeStop","resize"],le=["columns","name","onColumnsChange"],d,_,f,r=Ze.ZP.div(d||(d=(0,me.Z)([`
    position: relative;
    width: 100%;
`]))),J=Ze.ZP.div.attrs(function(y){return{style:{left:y.left,height:y==null?void 0:y.height}}})(_||(_=(0,me.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),pe=(0,Ze.ZP)(ye.Resizable)(f||(f=(0,me.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(y){var o=y.resize;return o?"col-resize":"default"}),Pe=function(o){var T=o.width,Z=o.onResizeStart,e=o.onResize,N=o.onResizeStop,W=o.resize,A=(0,oe.Z)(o,P);return(0,Y.jsx)(pe,(0,K.Z)((0,K.Z)({width:T||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:Z,onResize:e,onResizeStop:N,resize:W?1:0},A),{},{children:(0,Y.jsx)("th",(0,K.Z)({},A))}))},Be=function(o){var T=o.columns,Z=T===void 0?[]:T,e=o.name,N=o.onColumnsChange,W=(0,oe.Z)(o,le),A=V.useState(0),Ee=(0,$.Z)(A,2),ie=Ee[0],de=Ee[1],D=V.useState(0),Te=(0,$.Z)(D,2),ce=Te[0],R=Te[1],ve=V.useState(!1),z=(0,$.Z)(ve,2),I=z[0],k=z[1],C=V.useRef(null),m=(0,H.Z)(C),fe=function(h){return function(l,n){var s;if((0,ae.Z)(n),!!Z[h].ellipsis){var i=l.clientX,c=i-((s=C.current)===null||s===void 0?void 0:s.getBoundingClientRect().x);R(c),de(c),k(!0)}}},Oe=function(){return function(h){var l,n=h.clientX,s=n-((l=C.current)===null||l===void 0?void 0:l.getBoundingClientRect().x);de(s)}},he=function(h){return function(l,n){var s,i=n.size,c=l.clientX,g=c-((s=C.current)===null||s===void 0?void 0:s.getBoundingClientRect().x),w=(0,v.Z)(Z);if(w[h].ellipsis){var B=i.width+=g-ce,U=w[h],L=U.dataIndex,ge=U.key;B>20&&(w[h]=(0,K.Z)((0,K.Z)({},w[h]),{},{width:B}),e&&Se(e,L||ge,B),N==null||N())}de(0),R(0),k(!1)}},De=V.useMemo(function(){return Z.reduce(function(b,h){return h.width?b+=h==null?void 0:h.width:b},0)},[Z]);return(0,Y.jsxs)(r,{ref:C,className:"resize-table-wrapper",children:[(0,Y.jsx)(ue.Z,(0,K.Z)((0,K.Z)({},W),{},{components:{header:{cell:Pe}},scroll:(o==null?void 0:o.scroll)||{x:De||(m==null?void 0:m.width)},columns:Z.filter(Boolean).map(function(b,h){return(0,K.Z)((0,K.Z)({},b),{},{onHeaderCell:function(n){return{resize:!!b.ellipsis,width:n.width,onResizeStart:fe(h),onResize:Oe(),onResizeStop:he(h)}}})})})),I&&(0,Y.jsx)(J,{height:m==null?void 0:m.height,left:ie||ce})]})},G=Be,He=["name","columns","refreshDeps","onColumnsChange"],Ce="umi_locale",Ae=function(o,T){var Z=localStorage.getItem(o),e=localStorage.getItem(Ce)||"zh-CN";if(!!Z)return JSON.parse(Z)["".concat(e,"-").concat(T)]},Se=function(o,T,Z){var e=localStorage.getItem(o),N=localStorage.getItem(Ce)||"zh-CN",W=(0,E.Z)({},"".concat(N,"-").concat(T),Z);e?localStorage.setItem(o,JSON.stringify(Object.assign(JSON.parse(e),W))):localStorage.setItem(o,JSON.stringify(W))},a=function(o){var T=o.name,Z=o.columns,e=o.refreshDeps,N=e===void 0?[]:e,W=o.onColumnsChange,A=(0,oe.Z)(o,He),Ee=V.useState([]),ie=(0,$.Z)(Ee,2),de=ie[0],D=ie[1],Te=function(){return(Z==null?void 0:Z.filter(Boolean).map(function(R){var ve=R.dataIndex,z=R.key,I=R.width,k=ve||z,C=Ae(T,k);!C&&I&&Se(T,k,I);var m=C||I;return m&&(R.width=m),R}))||[]};return V.useEffect(function(){D(Te())},N),(0,Y.jsx)(G,(0,K.Z)({name:T,columns:de,setColumns:D,size:"small",onColumnsChange:function(){W==null||W(),D(Te())}},A))}}}]);
