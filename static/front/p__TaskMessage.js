(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"1oAU":function(e,a,t){e.exports={msg_warp:"msg_warp___2VY0H",msg_notice:"msg_notice___h-rIg"}},CAof:function(e,a,t){e.exports={font_default:"font_default___2ygo0",read_father:"read_father___dMWj8",read_warp:"read_warp___2OIRE",msg_text:"msg_text___3uzSd",msg_read:"msg_read___qIrGr",msg_unread:"msg_unread___2rPyw",read_content:"read_content___2OaJf",msg_record:"msg_record___lSAfW",msg_title:"msg_title___2Pp1O",msg_detail:"msg_detail___1YPJS",msg_default:"msg_default___2CIIh",msg_time:"msg_time___3PUYG",msg_badge:"msg_badge___WQRPU",list_user:"list_user___2qRji",list_title:"list_title___2tLZD",list_ws_name:"list_ws_name___3Cj2H"}},YZAq:function(e,a,t){"use strict";t.r(a);t("B9cy");var n=t("Ol7k"),s=(t("Awhp"),t("KrTs")),r=(t("Znn+"),t("ZTPi")),c=t("tJVT"),l=t("q1tI"),i=t.n(l),m=t("1oAU"),_=t.n(m),o=t("9kvl"),u=(t("T2oS"),t("W9HT")),d=(t("14J3"),t("BMrR")),p=(t("DjyN"),t("NUBc")),g=t("k1fw"),E=(t("jCWc"),t("kPKH")),f=(t("DYRE"),t("zeV3")),w=(t("+L6B"),t("2/Rp")),b=(t("tU7J"),t("wFql")),h=t("9og8"),N=t("WmNS"),x=t.n(N),v=(t("R9oj"),t("ECub"));function j(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var O=function(e){return j(e),i.a.createElement("div",{style:{marginTop:300}},i.a.createElement(v["a"],{image:v["a"].PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u901a\u77e5"}))},T=O,y=t("eRi9"),k=t("CAof"),C=t.n(k),S=t("c+yx"),z=function(e){var a=e.tab,t=e.height,n=Object(l["useState"])([]),r=Object(c["a"])(n,2),m=r[0],_=r[1],N=Object(l["useState"])({page_num:1,page_size:20,is_read:""}),v=Object(c["a"])(N,2),j=v[0],O=v[1],k=Object(l["useState"])(!1),z=Object(c["a"])(k,2),J=z[0],P=z[1],A=Object(l["useState"])([]),I=Object(c["a"])(A,2),L=I[0],R=I[1],H=Object(o["m"])("msg",(function(e){return{msgNum:e.msgNum,increment:e.increment}})),U=H.msgNum,W=H.increment,M=function(){var e=Object(h["a"])(x.a.mark((function e(a){var t;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return P(!0),j.is_read=a,e.next=4,Object(y["o"])(j);case 4:t=e.sent,200===t.code&&(_(t.data),R(t),P(!1));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=Object(h["a"])(x.a.mark((function e(a){var t,n;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["y"])({msg_id:a.id});case 2:t=e.sent,200===t.code&&(M("1"),W()),n=JSON.parse(a.content),"machine_broken"===a.msg_type?window.open("/ws/".concat(n.ws_id,"/test_result/").concat(n.impact_job)):window.open("/ws/".concat(n.ws_id,"/test_result/").concat(n.job_id));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),V=function(){var e=Object(h["a"])(x.a.mark((function e(){var a;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["c"])();case 2:a=e.sent,200===a.code?(M("1"),W()):Object(S["m"])(a.code,a.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){M("0")};return Object(l["useEffect"])((function(){"1"===a&&M("1")}),[a,j]),i.a.createElement(u["a"],{spinning:J},m.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:C.a.read_father,style:{height:t-183}},i.a.createElement("div",{className:C.a.read_warp},i.a.createElement(f["b"],null,i.a.createElement(b["a"].Text,{className:C.a.msg_text},"\u4e00\u5171",U.task_msg_total_num,"\u6761\u901a\u77e5\uff0c\u5176\u4e2d",U.task_msg_unread_num,"\u6761\u672a\u8bfb"),i.a.createElement(b["a"].Text,{className:C.a.msg_read},i.a.createElement(w["a"],{type:"link",onClick:V,disabled:0===U.task_msg_unread_num},"\u5168\u90e8\u5df2\u8bfb")),i.a.createElement(b["a"].Text,{className:C.a.msg_unread},i.a.createElement(w["a"],{type:"link",onClick:Y,disabled:0===U.task_msg_unread_num},"\u53ea\u770b\u672a\u8bfb")))),i.a.createElement("div",{className:C.a.read_content},m.map((function(e,a){var t=JSON.parse(e.content);return"job_complete"===e.msg_type?i.a.createElement("div",{className:C.a.msg_record,key:e.id},i.a.createElement(b["a"].Text,{ellipsis:!0,style:{width:"99%"}},i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_title},"[Job] \u6d4b\u8bd5\u5b8c\u6210"),i.a.createElement("span",{className:C.a.msg_detail,onClick:function(){return q(e)}},t.job_name))),i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_time},e.gmt_created)),i.a.createElement("div",{className:C.a.msg_badge},e.is_read?"":i.a.createElement(s["a"],{dot:!0}))):"plan_complete"===e.msg_type?i.a.createElement("div",{className:C.a.msg_record,key:e.id},i.a.createElement(b["a"].Text,{ellipsis:!0,style:{width:"99%"}},i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_title},"[\u8ba1\u5212] \u6d4b\u8bd5\u5b8c\u6210"),i.a.createElement("span",{className:C.a.msg_detail,onClick:function(){return q(e)}},t.job_name))),i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_time},e.gmt_created)),i.a.createElement("div",{className:C.a.msg_badge},e.is_read?"":i.a.createElement(s["a"],{dot:!0}))):"machine_broken"===e.msg_type?i.a.createElement("div",{className:C.a.msg_record,key:e.id,onClick:function(){return q(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0,style:{width:"99%"}},i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_title},"[\u6545\u969c] \u6d4b\u8bd5\u673a\u5668\u6545\u969c"),i.a.createElement("span",{className:C.a.msg_detail,style:{color:"#E53333"}},t.sn,"/",t.ip),i.a.createElement("span",{className:C.a.msg_default},"\u4e0a\u7684\u4efb\u52a1\u5728\u6d4b\u8bd5\u51c6\u5907\u9636\u6bb5\u5931\u8d25, \u673a\u5668\u53ef\u80fd\u5df2\u7ecf"),i.a.createElement("span",{className:C.a.msg_detail,style:{color:"#E53333"}},"\u6545\u969c"),i.a.createElement("span",{className:C.a.msg_default},"\uff0c\u8bf7\u53ca\u65f6\u5904\u7406 \uff01\u5f71\u54cd\u7684Job:"),i.a.createElement("span",{className:C.a.msg_detail},t.impact_job),i.a.createElement("span",{className:C.a.msg_default},"\u5f71\u54cd\u7684Suite\u6709:"),i.a.createElement("span",{className:C.a.msg_detail},t.impact_suite))),i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_time},e.gmt_created)),i.a.createElement("div",{className:C.a.msg_badge},e.is_read?"":i.a.createElement(s["a"],{dot:!0}))):i.a.createElement("div",{className:C.a.msg_record,key:e.id},i.a.createElement(b["a"].Text,{ellipsis:!0,style:{width:"99%"}},i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_title},"[\u516c\u544a] \u7cfb\u7edf\u516c\u544a"))),i.a.createElement(b["a"].Text,null,i.a.createElement("span",{className:C.a.msg_time},e.gmt_created)),i.a.createElement("div",{className:C.a.msg_badge},e.is_read?"":i.a.createElement(s["a"],{dot:!0})))})))),i.a.createElement(d["a"],{style:{marginTop:15,height:35}},i.a.createElement(E["a"],{span:4,style:{paddingLeft:15}},"\u5171 ",L.total," \u6761"),i.a.createElement(E["a"],{span:20,style:{textAlign:"right"}},i.a.createElement(p["a"],{showQuickJumper:!0,total:L.total,showSizeChanger:!0,current:L.page_num,defaultPageSize:20,defaultCurrent:1,onChange:function(e,a){O(Object(g["a"])(Object(g["a"])({},j),{},{page_num:e,page_size:a}))},onShowSizeChange:function(e,a){O(Object(g["a"])(Object(g["a"])({},j),{},{page_num:e,page_size:a}))}})))):i.a.createElement(T,null))},J=z,P=(t("Mwp2"),t("VXEj")),A=(t("Telt"),t("Tckk")),I=t("UpVg"),L=function(e){var a=e.tab,t=e.height,n=Object(l["useState"])([]),r=Object(c["a"])(n,2),m=r[0],_=r[1],N=Object(l["useState"])(!1),v=Object(c["a"])(N,2),j=v[0],O=v[1],k=Object(l["useState"])([]),z=Object(c["a"])(k,2),J=z[0],L=z[1],R=Object(l["useState"])({page_num:1,page_size:20,is_read:"1"}),H=Object(c["a"])(R,2),U=H[0],W=H[1],M=Object(o["m"])("msg",(function(e){return{msgNum:e.msgNum,increment:e.increment}})),q=M.msgNum,V=M.increment,Y=function(){var e=Object(h["a"])(x.a.mark((function e(){var a;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["b"])();case 2:a=e.sent,200===a.code?(B(),V()):Object(S["m"])(a.code,a.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(h["a"])(x.a.mark((function e(){var a;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Object(y["k"])(U);case 3:a=e.sent,200===a.code&&(_(a.data),L(a),O(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(h["a"])(x.a.mark((function e(a){var t,n,s,r,c;return x.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.is_read){e.next=5;break}return e.next=3,Object(y["x"])({msg_id:a.id});case 3:t=e.sent,200===t.code&&(B(),V());case 5:n=JSON.parse(a.content),s=n.status,r=n.action,c=void 0===n.ws_info?"":n.ws_info.ws_id,Object(I["f"])(s,r,c);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(l["useEffect"])((function(){"2"===a&&B()}),[a,U]);var F=function(e){var a=JSON.parse(e.content);return"waiting"===a.status?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"\u7533\u8bf7",Object(I["e"])(a.action),"Workspace"),i.a.createElement(b["a"].Text,{className:C.a.list_ws_name},i.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)))):"passed"===a.status?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"join"===a.action?"\u901a\u8fc7\u4f60\u52a0\u5165":"\u901a\u8fc7"),i.a.createElement(b["a"].Text,{className:C.a.list_ws_name},i.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),i.a.createElement(b["a"].Text,{className:C.a.list_title},Object(I["c"])(a.action)))):"refused"===a.status?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"join"===a.action?"\u62d2\u7edd\u4f60\u52a0\u5165":"\u62d2\u7edd"),i.a.createElement(b["a"].Text,{className:C.a.list_title},a.ws_info.ws_show_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},Object(I["d"])(a.action)))):"set_ws_role"===a.action?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"add"===a.operator_info.action?"\u628a\u4f60\u6dfb\u52a0\u4e3a":"\u628a\u4f60\u8bbe\u7f6e\u4e3a"),i.a.createElement(b["a"].Text,{className:C.a.list_ws_name},i.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),i.a.createElement(b["a"].Text,{className:C.a.list_title},Object(S["u"])(a.role_title)))):"set_sys_role"===a.action?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"\u628a\u4f60\u6dfb\u52a0\u4e3aT-One"),i.a.createElement(b["a"].Text,{className:C.a.list_title},Object(S["u"])(a.role_title)))):"remove"===a.action?i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"\u628a\u4f60\u79fb\u9664"),i.a.createElement(b["a"].Text,{className:C.a.list_title},a.ws_info.ws_show_name))):i.a.createElement("div",{onClick:function(){return D(e)}},i.a.createElement(b["a"].Text,{ellipsis:!0},i.a.createElement(b["a"].Text,{className:C.a.list_user},a.operator_info.user_name),i.a.createElement(b["a"].Text,{className:C.a.list_title},"\u628a"),i.a.createElement(b["a"].Text,{className:C.a.list_ws_name},i.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),i.a.createElement(b["a"].Text,{className:C.a.list_title},"owner\u8f6c\u8ba9\u7ed9\u4f60")))};return i.a.createElement(u["a"],{spinning:j},m.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:C.a.read_father,style:{height:t-183}},i.a.createElement("div",{className:C.a.read_warp},i.a.createElement(f["b"],null,i.a.createElement(b["a"].Text,{className:C.a.msg_text},"\u4e00\u5171",null===q||void 0===q?void 0:q.apply_msg_total_num,"\u6761\u901a\u77e5\uff0c\u5176\u4e2d",null===q||void 0===q?void 0:q.apply_msg_unread_num,"\u6761\u672a\u8bfb"),i.a.createElement(b["a"].Text,{className:C.a.msg_read},i.a.createElement(w["a"],{type:"link",onClick:Y,disabled:0===q.apply_msg_unread_num},"\u5168\u90e8\u5df2\u8bfb")))),i.a.createElement("div",{className:C.a.read_content},i.a.createElement(P["b"],{itemLayout:"horizontal",dataSource:m,renderItem:function(e){var a=JSON.parse(e.content);return i.a.createElement(P["b"].Item,null,i.a.createElement(P["b"].Item.Meta,{avatar:i.a.createElement(A["a"],{src:a.operator_info.avatar}),title:i.a.createElement(I["a"],{item:e,onClick:function(){return D(e)}},F(e)),description:e.gmt_created}),i.a.createElement(f["b"],null,e.is_read?"":i.a.createElement(s["a"],{dot:!0}),e.is_read&&("set_ws_role"===a.action||"set_sys_role"===a.action||"remove"===a.action||"refused"==a.status&&"join"==a.action)?i.a.createElement(i.a.Fragment,null):i.a.createElement(w["a"],{style:{marginLeft:20},onClick:function(){return D(e)}},"\u67e5\u770b")))}}))),i.a.createElement(d["a"],{style:{marginTop:15,height:35}},i.a.createElement(E["a"],{span:4,style:{paddingLeft:15}},"\u5171 ",J.total," \u6761"),i.a.createElement(E["a"],{span:20,style:{textAlign:"right"}},i.a.createElement(p["a"],{showQuickJumper:!0,total:J.total,showSizeChanger:!0,current:J.page_num,defaultPageSize:20,defaultCurrent:1,onChange:function(e,a){W(Object(g["a"])(Object(g["a"])({},U),{},{page_num:e,page_size:a}))},onShowSizeChange:function(e,a){W(Object(g["a"])(Object(g["a"])({},U),{},{page_num:e,page_size:a}))}})))):i.a.createElement(T,null))},R=L,H=function(){var e=window.location.search.substring(1),a=Object(l["useState"])(innerHeight),t=Object(c["a"])(a,2),m=t[0],u=t[1],d=Object(l["useState"])("task"===e?"1":"2"),p=Object(c["a"])(d,2),g=p[0],E=p[1],f=r["a"].TabPane,w=function(){return u(innerHeight)},b=Object(o["m"])("msg"),h=b.msgNum,N=function(e){E(e)};return document.title="\u6d88\u606f\u901a\u77e5 T-One",Object(l["useEffect"])((function(){return window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}}),[]),i.a.createElement(n["a"],{style:{padding:"14px 20px 0 20px",height:m-50,minHeight:0,overflow:"auto"}},i.a.createElement(n["a"].Content,{style:{background:"#fff"}},i.a.createElement("div",{className:_.a.msg_warp},i.a.createElement("div",{className:_.a.msg_notice},"\u6d88\u606f\u901a\u77e5"),i.a.createElement(r["a"],{defaultActiveKey:g,onChange:N},i.a.createElement(f,{tab:(null===h||void 0===h?void 0:h.task_msg_unread_num)>0?i.a.createElement(s["a"],{dot:null===h||void 0===h?void 0:h.task_msg_state},"\u4efb\u52a1\u901a\u77e5"):"\u4efb\u52a1\u901a\u77e5",key:"1"},"1"===g&&i.a.createElement(J,{tab:g,height:m-50})),i.a.createElement(f,{tab:i.a.createElement(s["a"],{count:null===h||void 0===h?void 0:h.apply_msg_unread_num,offset:[(null===h||void 0===h?void 0:h.apply_msg_unread_num)<10?6:12,0]},"\u7cfb\u7edf\u901a\u77e5"),key:"2"},"2"===g&&i.a.createElement(R,{tab:g,height:m-50}))))))};a["default"]=H}}]);