(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"1oAU":function(H,W,s){H.exports={msg_warp:"msg_warp___2VY0H",msg_notice:"msg_notice___h-rIg"}},CAof:function(H,W,s){H.exports={font_default:"font_default___2ygo0",read_father:"read_father___dMWj8",read_warp:"read_warp___2OIRE",msg_text:"msg_text___3uzSd",msg_read:"msg_read___qIrGr",msg_unread:"msg_unread___2rPyw",read_content:"read_content___2OaJf",msg_record:"msg_record___lSAfW",msg_title:"msg_title___2Pp1O",msg_detail:"msg_detail___1YPJS",msg_default:"msg_default___2CIIh",msg_time:"msg_time___3PUYG",msg_badge:"msg_badge___WQRPU",list_user:"list_user___2qRji",list_title:"list_title___2tLZD",list_ws_name:"list_ws_name___3Cj2H"}},YZAq:function(H,W,s){"use strict";s.r(W);var Ne=s("B9cy"),ae=s("Ol7k"),je=s("Awhp"),C=s("KrTs"),Ce=s("Znn+"),te=s("ZTPi"),E=s("tJVT"),i=s("q1tI"),e=s.n(i),ie=s("1oAU"),ne=s.n(ie),K=s("9kvl"),be=s("T2oS"),se=s("W9HT"),Se=s("14J3"),le=s("BMrR"),xe=s("DjyN"),re=s("NUBc"),y=s("k1fw"),Oe=s("jCWc"),$=s("kPKH"),we=s("DYRE"),Q=s("zeV3"),ke=s("+L6B"),I=s("2/Rp"),Ae=s("tU7J"),n=s("wFql"),k=s("9og8"),oe=s("WmNS"),o=s.n(oe),Fe=s("R9oj"),ce=s("ECub");function de(z){if(z==null)throw new TypeError("Cannot destructure undefined")}var ge=function(f){return de(f),e.a.createElement("div",{style:{marginTop:300}},e.a.createElement(ce.a,{image:ce.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u901A\u77E5"}))},ue=ge,A=s("eRi9"),Ee=s("CAof"),t=s.n(Ee),V=s("c+yx"),fe=function(f){var b=f.tab,F=f.height,p=Object(i.useState)([]),S=Object(E.a)(p,2),T=S[0],J=S[1],m=Object(i.useState)({page_num:1,page_size:20,is_read:""}),x=Object(E.a)(m,2),v=x[0],_=x[1],Y=Object(i.useState)(!1),O=Object(E.a)(Y,2),R=O[0],Z=O[1],q=Object(i.useState)([]),P=Object(E.a)(q,2),N=P[0],G=P[1],L=Object(K.k)("msg",function(r){return{msgNum:r.msgNum,increment:r.increment}}),d=L.msgNum,U=L.increment,B=function(){var r=Object(k.a)(o.a.mark(function l(a){var u;return o.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return Z(!0),v.is_read=a,h.next=4,Object(A.p)(v);case 4:u=h.sent,u.code===200&&(J(u.data),G(u),Z(!1));case 6:case"end":return h.stop()}},l)}));return function(a){return r.apply(this,arguments)}}(),w=function(){var r=Object(k.a)(o.a.mark(function l(a){var u,c;return o.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(A.z)({msg_id:a.id});case 2:u=j.sent,u.code===200&&(B("1"),U()),c=JSON.parse(a.content),a.msg_type==="machine_broken"?window.open("/ws/".concat(c.ws_id,"/test_result/").concat(c.impact_job)):window.open("/ws/".concat(c.ws_id,"/test_result/").concat(c.job_id));case 6:case"end":return j.stop()}},l)}));return function(a){return r.apply(this,arguments)}}(),g=function(){var r=Object(k.a)(o.a.mark(function l(){var a;return o.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(A.c)();case 2:a=c.sent,a.code===200?(B("1"),U()):Object(V.r)(a.code,a.msg);case 4:case"end":return c.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),ee=function(){B("0")};return Object(i.useEffect)(function(){b==="1"&&B("1")},[b,v]),e.a.createElement(se.a,{spinning:R},T.length>0?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:t.a.read_father,style:{height:F-183}},e.a.createElement("div",{className:t.a.read_warp},e.a.createElement(Q.b,null,e.a.createElement(n.a.Text,{className:t.a.msg_text},"\u4E00\u5171",d.task_msg_total_num,"\u6761\u901A\u77E5\uFF0C\u5176\u4E2D",d.task_msg_unread_num,"\u6761\u672A\u8BFB"),e.a.createElement(n.a.Text,{className:t.a.msg_read},e.a.createElement(I.a,{type:"link",onClick:g,disabled:d.task_msg_unread_num===0},"\u5168\u90E8\u5DF2\u8BFB")),e.a.createElement(n.a.Text,{className:t.a.msg_unread},e.a.createElement(I.a,{type:"link",onClick:ee,disabled:d.task_msg_unread_num===0},"\u53EA\u770B\u672A\u8BFB")))),e.a.createElement("div",{className:t.a.read_content},T.map(function(r,l){var a=JSON.parse(r.content);return r.msg_type==="job_complete"?e.a.createElement("div",{className:t.a.msg_record,key:r.id},e.a.createElement(n.a.Text,{ellipsis:!0,style:{width:"99%"}},e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_title},"[Job] \u6D4B\u8BD5\u5B8C\u6210"),e.a.createElement("span",{className:t.a.msg_detail,onClick:function(){return w(r)}},a.job_name))),e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_time},r.gmt_created)),e.a.createElement("div",{className:t.a.msg_badge},r.is_read?"":e.a.createElement(C.a,{dot:!0}))):r.msg_type==="plan_complete"?e.a.createElement("div",{className:t.a.msg_record,key:r.id},e.a.createElement(n.a.Text,{ellipsis:!0,style:{width:"99%"}},e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_title},"[\u8BA1\u5212] \u6D4B\u8BD5\u5B8C\u6210"),e.a.createElement("span",{className:t.a.msg_detail,onClick:function(){return w(r)}},a.job_name))),e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_time},r.gmt_created)),e.a.createElement("div",{className:t.a.msg_badge},r.is_read?"":e.a.createElement(C.a,{dot:!0}))):r.msg_type==="machine_broken"?e.a.createElement("div",{className:t.a.msg_record,key:r.id,onClick:function(){return w(r)}},e.a.createElement(n.a.Text,{ellipsis:!0,style:{width:"99%"}},e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_title},"[\u6545\u969C] \u6D4B\u8BD5\u673A\u5668\u6545\u969C"),e.a.createElement("span",{className:t.a.msg_detail,style:{color:"#E53333"}},a.sn,"/",a.ip),e.a.createElement("span",{className:t.a.msg_default},"\u4E0A\u7684\u4EFB\u52A1\u5728\u6D4B\u8BD5\u51C6\u5907\u9636\u6BB5\u5931\u8D25, \u673A\u5668\u53EF\u80FD\u5DF2\u7ECF"),e.a.createElement("span",{className:t.a.msg_detail,style:{color:"#E53333"}},"\u6545\u969C"),e.a.createElement("span",{className:t.a.msg_default},"\uFF0C\u8BF7\u53CA\u65F6\u5904\u7406 \uFF01\u5F71\u54CD\u7684Job:"),e.a.createElement("span",{className:t.a.msg_detail},a.impact_job),e.a.createElement("span",{className:t.a.msg_default},"\u5F71\u54CD\u7684Suite\u6709:"),e.a.createElement("span",{className:t.a.msg_detail},a.impact_suite))),e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_time},r.gmt_created)),e.a.createElement("div",{className:t.a.msg_badge},r.is_read?"":e.a.createElement(C.a,{dot:!0}))):e.a.createElement("div",{className:t.a.msg_record,key:r.id},e.a.createElement(n.a.Text,{ellipsis:!0,style:{width:"99%"}},e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_title},"[\u516C\u544A] \u7CFB\u7EDF\u516C\u544A"))),e.a.createElement(n.a.Text,null,e.a.createElement("span",{className:t.a.msg_time},r.gmt_created)),e.a.createElement("div",{className:t.a.msg_badge},r.is_read?"":e.a.createElement(C.a,{dot:!0})))}))),e.a.createElement(le.a,{style:{marginTop:15,height:35}},e.a.createElement($.a,{span:4,style:{paddingLeft:15}},"\u5171 ",N.total," \u6761"),e.a.createElement($.a,{span:20,style:{textAlign:"right"}},e.a.createElement(re.a,{showQuickJumper:!0,total:N.total,showSizeChanger:!0,current:N.page_num,defaultPageSize:20,defaultCurrent:1,onChange:function(l,a){_(Object(y.a)(Object(y.a)({},v),{},{page_num:l,page_size:a}))},onShowSizeChange:function(l,a){_(Object(y.a)(Object(y.a)({},v),{},{page_num:l,page_size:a}))}})))):e.a.createElement(ue,null))},pe=fe,Be=s("Mwp2"),X=s("VXEj"),De=s("Telt"),ve=s("Tckk"),M=s("UpVg"),_e=function(f){var b=f.tab,F=f.height,p=Object(i.useState)([]),S=Object(E.a)(p,2),T=S[0],J=S[1],m=Object(i.useState)(!1),x=Object(E.a)(m,2),v=x[0],_=x[1],Y=Object(i.useState)([]),O=Object(E.a)(Y,2),R=O[0],Z=O[1],q=Object(i.useState)({page_num:1,page_size:20,is_read:"1"}),P=Object(E.a)(q,2),N=P[0],G=P[1],L=Object(K.k)("msg",function(r){return{msgNum:r.msgNum,increment:r.increment}}),d=L.msgNum,U=L.increment,B=function(){var r=Object(k.a)(o.a.mark(function l(){var a;return o.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(A.b)();case 2:a=c.sent,a.code===200?(w(),U()):Object(V.r)(a.code,a.msg);case 4:case"end":return c.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),w=function(){var r=Object(k.a)(o.a.mark(function l(){var a;return o.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return _(!0),c.next=3,Object(A.l)(N);case 3:a=c.sent,a.code===200&&(J(a.data),Z(a),_(!1));case 5:case"end":return c.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),g=function(){var r=Object(k.a)(o.a.mark(function l(a){var u,c,h,j,me;return o.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(a.is_read){D.next=5;break}return D.next=3,Object(A.y)({msg_id:a.id});case 3:u=D.sent,u.code===200&&(w(),U());case 5:c=JSON.parse(a.content),h=c.status,j=c.action,me=c.ws_info===void 0?"":c.ws_info.ws_id,Object(M.f)(h,j,me);case 10:case"end":return D.stop()}},l)}));return function(a){return r.apply(this,arguments)}}();Object(i.useEffect)(function(){b==="2"&&w()},[b,N]);var ee=function(l){var a=JSON.parse(l.content);return a.status==="waiting"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},"\u7533\u8BF7",Object(M.e)(a.action),"Workspace"),e.a.createElement(n.a.Text,{className:t.a.list_ws_name},e.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)))):a.status==="passed"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},a.action==="join"?"\u901A\u8FC7\u4F60\u52A0\u5165":"\u901A\u8FC7"),e.a.createElement(n.a.Text,{className:t.a.list_ws_name},e.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),e.a.createElement(n.a.Text,{className:t.a.list_title},Object(M.c)(a.action)))):a.status==="refused"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},a.action==="join"?"\u62D2\u7EDD\u4F60\u52A0\u5165":"\u62D2\u7EDD"),e.a.createElement(n.a.Text,{className:t.a.list_title},a.ws_info.ws_show_name),e.a.createElement(n.a.Text,{className:t.a.list_title},Object(M.d)(a.action)))):a.action==="set_ws_role"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},a.operator_info.action==="add"?"\u628A\u4F60\u6DFB\u52A0\u4E3A":"\u628A\u4F60\u8BBE\u7F6E\u4E3A"),e.a.createElement(n.a.Text,{className:t.a.list_ws_name},e.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),e.a.createElement(n.a.Text,{className:t.a.list_title},Object(V.z)(a.role_title)))):a.action==="set_sys_role"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},"\u628A\u4F60\u6DFB\u52A0\u4E3AT-One"),e.a.createElement(n.a.Text,{className:t.a.list_title},Object(V.z)(a.role_title)))):a.action==="remove"?e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},"\u628A\u4F60\u79FB\u9664"),e.a.createElement(n.a.Text,{className:t.a.list_title},a.ws_info.ws_show_name))):e.a.createElement("div",{onClick:function(){return g(l)}},e.a.createElement(n.a.Text,{ellipsis:!0},e.a.createElement(n.a.Text,{className:t.a.list_user},a.operator_info.user_name),e.a.createElement(n.a.Text,{className:t.a.list_title},"\u628A"),e.a.createElement(n.a.Text,{className:t.a.list_ws_name},e.a.createElement("span",{style:{cursor:"pointer"}},a.ws_info.ws_show_name)),e.a.createElement(n.a.Text,{className:t.a.list_title},"owner\u8F6C\u8BA9\u7ED9\u4F60")))};return e.a.createElement(se.a,{spinning:v},T.length>0?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:t.a.read_father,style:{height:F-183}},e.a.createElement("div",{className:t.a.read_warp},e.a.createElement(Q.b,null,e.a.createElement(n.a.Text,{className:t.a.msg_text},"\u4E00\u5171",d==null?void 0:d.apply_msg_total_num,"\u6761\u901A\u77E5\uFF0C\u5176\u4E2D",d==null?void 0:d.apply_msg_unread_num,"\u6761\u672A\u8BFB"),e.a.createElement(n.a.Text,{className:t.a.msg_read},e.a.createElement(I.a,{type:"link",onClick:B,disabled:d.apply_msg_unread_num===0},"\u5168\u90E8\u5DF2\u8BFB")))),e.a.createElement("div",{className:t.a.read_content},e.a.createElement(X.b,{itemLayout:"horizontal",dataSource:T,renderItem:function(l){var a=JSON.parse(l.content);return e.a.createElement(X.b.Item,null,e.a.createElement(X.b.Item.Meta,{avatar:e.a.createElement(ve.a,{src:a.operator_info.avatar}),title:e.a.createElement(M.a,{item:l,onClick:function(){return g(l)}},ee(l)),description:l.gmt_created}),e.a.createElement(Q.b,null,l.is_read?"":e.a.createElement(C.a,{dot:!0}),l.is_read?a.action==="set_ws_role"||a.action==="set_sys_role"||a.action==="remove"||a.status=="refused"&&a.action=="join"?e.a.createElement(e.a.Fragment,null):e.a.createElement(I.a,{style:{marginLeft:20},onClick:function(){return g(l)}},"\u67E5\u770B"):e.a.createElement(I.a,{style:{marginLeft:20},onClick:function(){return g(l)}},"\u67E5\u770B")))}}))),e.a.createElement(le.a,{style:{marginTop:15,height:35}},e.a.createElement($.a,{span:4,style:{paddingLeft:15}},"\u5171 ",R.total," \u6761"),e.a.createElement($.a,{span:20,style:{textAlign:"right"}},e.a.createElement(re.a,{showQuickJumper:!0,total:R.total,showSizeChanger:!0,current:R.page_num,defaultPageSize:20,defaultCurrent:1,onChange:function(l,a){G(Object(y.a)(Object(y.a)({},N),{},{page_num:l,page_size:a}))},onShowSizeChange:function(l,a){G(Object(y.a)(Object(y.a)({},N),{},{page_num:l,page_size:a}))}})))):e.a.createElement(ue,null))},he=_e,ye=s("hZgC"),Te=function(){var f=window.location.search.substring(1),b=Object(i.useState)(f==="task"?"1":"2"),F=Object(E.a)(b,2),p=F[0],S=F[1],T=te.a.TabPane,J=Object(K.k)("msg"),m=J.msgNum,x=function(O){S(O)};document.title="\u6D88\u606F\u901A\u77E5 T-One";var v=Object(ye.e)(),_=v.height;return e.a.createElement(ae.a,{style:{padding:"14px 20px 0 20px",height:_-50,minHeight:0,overflow:"auto"}},e.a.createElement(ae.a.Content,{style:{background:"#fff"}},e.a.createElement("div",{className:ne.a.msg_warp},e.a.createElement("div",{className:ne.a.msg_notice},"\u6D88\u606F\u901A\u77E5"),e.a.createElement(te.a,{defaultActiveKey:p,onChange:x},e.a.createElement(T,{tab:(m==null?void 0:m.task_msg_unread_num)>0?e.a.createElement(C.a,{dot:m==null?void 0:m.task_msg_state},"\u4EFB\u52A1\u901A\u77E5"):"\u4EFB\u52A1\u901A\u77E5",key:"1"},p==="1"&&e.a.createElement(pe,{tab:p,height:_-50})),e.a.createElement(T,{tab:e.a.createElement(C.a,{count:m==null?void 0:m.apply_msg_unread_num,offset:[(m==null?void 0:m.apply_msg_unread_num)<10?6:12,0]},"\u7CFB\u7EDF\u901A\u77E5"),key:"2"},p==="2"&&e.a.createElement(he,{tab:p,height:_-50}))))))},Ie=W.default=Te}}]);
