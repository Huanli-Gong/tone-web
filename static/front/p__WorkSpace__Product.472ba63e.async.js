(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5540,2485],{59465:function(Te,He,n){"use strict";n.d(He,{Z:function(){return ke}});var v=n(28991),T=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},a=i,t=n(27029),Me=function(Le,Pe){return T.createElement(t.Z,(0,v.Z)((0,v.Z)({},Le),{},{ref:Pe,icon:a}))},De=T.forwardRef(Me),ke=De},95949:function(Te){Te.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},84372:function(Te){Te.exports={all_store:"all_store___1YQCQ",product_item:"product_item___EPS69",product_item_active:"product_item_active___dm44V",remove:"remove___1i9Sm",remove_active:"remove_active___39bgQ",product_right_detail:"product_right_detail___SmtnF",detail_item_row:"detail_item_row___3hZFe",product_right_name:"product_right_name___32Q4S",product_right_all_branch:"product_right_all_branch___1YYFp",public_ellip:"public_ellip___1tlO5",right_branch_context:"right_branch_context___2G6ZI",right_branch_context_wrapper:"right_branch_context_wrapper___31TWm",right_branch_context_box_father:"right_branch_context_box_father___1MJkQ",right_branch_context_box_child:"right_branch_context_box_child___fsKkB",right_branch_context_box_child_empty:"right_branch_context_box_child_empty___2IDAm",right_branch_context_box_child_firstLine:"right_branch_context_box_child_firstLine___3QUc4",right_branch_context_box_child_secondLine:"right_branch_context_box_child_secondLine___3R-uN",title_detail_item:"title_detail_item___e2rIo",text_ellip:"text_ellip___3e-6i",title_detail_branch:"title_detail_branch___2A_8I",create_branch_name:"create_branch_name___Tlcv5",title_detail_items:"title_detail_items___ViWhA",title_detail_project:"title_detail_project___2AaiZ",menu_font_color:"menu_font_color___2Pdmo",create_project_name:"create_project_name___3nwfu",modalChange:"modalChange___RLvpQ",drawer_warpper:"drawer_warpper___1JPxX",content_warpper:"content_warpper___3SdPN",product_form:"product_form___2KDzS"}},96899:function(Te){Te.exports={all_product:"all_product___U38nf",text_ellip:"text_ellip___22QC2",product_row:"product_row___1gHkF",move_active:"move_active___3DxD5",move:"move___1zRjx",product_item_default:"product_item_default___2cmv4",product_item_old:"product_item_old___1zGok",product_item:"product_item___doe6B",product_item_active:"product_item_active___374Co",remove:"remove___1xqKH",remove_active:"remove_active___3b9wy",product_right_detail:"product_right_detail___1-IoG",detail_item_row:"detail_item_row___1K2Tl",title_detail_item:"title_detail_item___sxJPv",product_right_name:"product_right_name___1ntvP",content_warpper:"content_warpper___3QmV0",test_summary_job:"test_summary_job___IcYYj",product_right_all_project:"product_right_all_project___2iBpK",public_ellip:"public_ellip___3QHrH",right_project:"right_project___2nq8b",project_warpper:"project_warpper___2uH_y",project_default_icon:"project_default_icon___jPZm9",project_default_icon_en:"project_default_icon_en___M1yjA",project_child:"project_child___aV2bm",project_name:"project_name___1Sdiy",project_version:"project_version___1Phna",project_icon:"project_icon___1eUqo",project_create:"project_create___3yo3S",project_create_empty:"project_create_empty___13b70",title_detail_project:"title_detail_project___2ebpQ",create_project_name:"create_project_name___2nb-4",title_detail_items:"title_detail_items___2SFWv",drawer_warpper:"drawer_warpper___ocMg6",modal_warpper:"modal_warpper___3b4xK",menu_font_color:"menu_font_color___1u1Ma",modalChange:"modalChange___2R-0x",product_form:"product_form___3dDlg",product_helpForm:"product_helpForm___3ZMsO"}},17508:function(Te){Te.exports={layout:"layout___1Uz98",ws_slider:"ws_slider___1OjDP",ws_menu_styles:"ws_menu_styles___zKo5V",ws_sb_st:"ws_sb_st___rWsNb",content:"content___2zB0f",tab_style:"tab_style___1hBcK"}},99833:function(Te,He,n){"use strict";n.d(He,{f:function(){return Re}});var v=n(49111),T=n(19650),i=n(11849),a=n(22385),t=n(89456),Me=n(93224),De=n(67294),ke=n(95949),pe=n.n(ke),Le=n(1870),Pe=n(85893),$e=["desc","title"],Re=function(Ve){var me=Ve.desc,We=Ve.title,ce=(0,Me.Z)(Ve,$e);return(0,Pe.jsxs)(T.Z,{children:[(0,Pe.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:We}),(0,Pe.jsx)(t.Z,(0,i.Z)((0,i.Z)({overlayClassName:pe().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},ce),{},{title:me,color:"#fff",children:(0,Pe.jsx)(Le.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},14552:function(Te,He,n){"use strict";var v=n(22385),T=n(89456),i=n(11849),a=n(2824),t=n(93224),Me=n(20310),De=n(67294),ke=n(12788),pe=n(60035),Le=n(85893),Pe=["title","children","width","color","placement","style"],$e,Re=ke.ZP.div($e||($e=(0,Me.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),je=function(me){var We=me.title,ce=me.children,Xe=me.width,Ie=me.color,ze=me.placement,Q=ze===void 0?"topLeft":ze,qe=me.style,Oe=(0,t.Z)(me,Pe),y=(0,De.useRef)(null),fe=(0,De.useState)(!1),Qe=(0,a.Z)(fe,2),ge=Qe[0],et=Qe[1],l=(0,pe.CR)(),d=l.width,o=function(){var Ke,V,Ze=y==null||(Ke=y.current)===null||Ke===void 0?void 0:Ke.clientWidth,lt=y==null||(V=y.current)===null||V===void 0?void 0:V.scrollWidth;et(Ze<lt)};(0,De.useEffect)(function(){o()},[We,d]);var K=(0,Le.jsx)(Re,(0,i.Z)((0,i.Z)({ref:y,style:(0,i.Z)({width:Xe,color:Ie},qe)},Oe),{},{children:ce||We||"-"}));return ge?(0,Le.jsx)(T.Z,{title:We,placement:Q,overlayStyle:{wordBreak:"break-all"},children:K}):K};He.Z=je},87415:function(Te,He,n){"use strict";n.d(He,{mQ:function(){return pe},gM:function(){return Le},nU:function(){return $e}});var v=n(58024),T=n(91894),i=n(20310),a=n(12788),t,Me,De,ke,pe=(0,a.ZP)(T.Z)(t||(t=(0,i.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),Le=(0,a.ZP)(pe)(Me||(Me=(0,i.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),Pe=(0,a.ZP)(T.Z)(De||(De=(0,i.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),$e=(0,a.ZP)(Pe)(ke||(ke=(0,i.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},36725:function(Te,He,n){"use strict";n.r(He),n.d(He,{default:function(){return jr}});var v=n(18106),T=n(73272),i=n(2824),a=n(67294),t=n(16917),Me=n(20228),De=n(11382),ke=n(47673),pe=n(4107),Le=n(59250),Pe=n(13013),$e=n(30887),Re=n(28682),je=n(11849),Ve=n(89032),me=n(15746),We=n(13062),ce=n(71230),Xe=n(62350),Ie=n(24565),ze=n(402),Q=n(97272),qe=n(57663),Oe=n(71577),y=n(39428),fe=n(3182),Qe=n(34792),ge=n(48086),et=n(9715),l=n(20526),d=n(80766),o=n(57119),K=n(59465),r=n(92977),Ke=n(20009),V=n(8142),Ze=n(14552),lt=n(57338),Ge=n(440),xr=n(49111),Ee=n(19650),Pt=n(96899),Z=n.n(Pt),e=n(85893),Ot=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),w=l.Z.useForm(),L=(0,i.Z)(w,1),H=L[0],ie=(0,a.useState)(!1),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)(!1),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useState)(!1),F=(0,i.Z)(te,2),k=F[0],P=F[1],le=(0,a.useState)(),oe=(0,i.Z)(le,2),ae=oe[0],de=oe[1],A=(0,a.useState)("new"),xe=(0,i.Z)(A,2),D=xe[0],se=xe[1];(0,a.useImperativeHandle)(c,function(){return{show:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O(!0),se(B),de(s({id:"product.name.message"})),H.setFieldsValue(z),H.setFieldsValue({command:z.command===void 0?"uname -r":z.command})}}});var C=function(){H.resetFields(),P(!1),O(!1),de(void 0)},X=function(B,z,W){B===200?(u.onOk(W),ge.default.success(s({id:"operation.success"})),C()):B===1368?(J(!0),de(s({id:"product.name.existed"}))):ge.default.error(z),P(!1)},q=function(){de(void 0),P(!0),H.validateFields().then(function(){var B=(0,fe.Z)((0,y.Z)().mark(function z(W){var j,x,ne,ye,S,h;return(0,y.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(D!=="new"){E.next=9;break}return E.next=3,(0,V.ry)((0,je.Z)({ws_id:g},W));case 3:j=E.sent,x=j.code,ne=j.msg,X(x,ne,D),E.next=16;break;case 9:return W.ws_id=g,E.next=12,(0,V.nM)((0,je.Z)({prd_id:u.current.id},W));case 12:ye=E.sent,S=ye.code,h=ye.msg,X(S,h,D);case 16:case"end":return E.stop()}},z)}));return function(z){return B.apply(this,arguments)}}()).catch(function(B){console.log(B),P(!1)})};return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:D==="new"?"product.new.product.info":"product.edit.product.info"}),width:"380",onClose:C,open:p,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Oe.Z,{onClick:C,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Oe.Z,{type:"primary",disabled:k,onClick:q,children:D==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(l.Z,{form:H,layout:"vertical",children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.name"}),name:"name",className:ue?Z().product_form:Z().product_helpForm,help:ae,rules:[{required:!0,message:s({id:"product.name.message"}),pattern:/^[A-Za-z0-9\._-]{1,32}$/g}],children:(0,e.jsx)(pe.Z,{placeholder:s({id:"product.please.enter.name"})})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version.command"}),name:"command",className:Z().product_helpForm,help:(0,e.jsx)(t._H,{id:"product.version.command.help"}),children:(0,e.jsx)(pe.Z,{placeholder:s({id:"product.please.enter.version.command"})})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.description.option"}),name:"description",children:(0,e.jsx)(pe.Z.TextArea,{placeholder:s({id:"product.please.enter.comments"}),rows:4})})]})})}),gr=n(71194),Je=n(50146),Zr=n(66456),Et=n(79764),Ft=n(96486),Dt=n(38819),Rt=n(15873),Tt=n(99833),yr=n(88983),Ye=n(47933),Ae=n(24480),Ht=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),w=l.Z.useForm(),L=(0,i.Z)(w,1),H=L[0],ie=(0,a.useState)(!1),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)({}),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useState)(!0),F=(0,i.Z)(te,2),k=F[0],P=F[1];(0,a.useImperativeHandle)(c,function(){return{show:function(A){O(!0),P(!0),J(A),H.setFieldsValue(A)}}});var le=function(){O(!1)},oe=function(){P(!1)},ae=function(){var de=(0,fe.Z)((0,y.Z)().mark(function A(){return(0,y.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:H.validateFields().then(function(){var se=(0,fe.Z)((0,y.Z)().mark(function C(X){var q,re,B;return(0,y.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return X.ws_id=g,W.next=3,(0,V.ty)((0,je.Z)({project_id:ue.id},X));case 3:q=W.sent,re=q.code,B=q.msg,re===200?(u.onOk(),u.setVisible(!1),O(!1)):(0,Ae.EV)(re,B);case 7:case"end":return W.stop()}},C)}));return function(C){return se.apply(this,arguments)}}()).catch(function(){return P(!1)});case 1:case"end":return D.stop()}},A)}));return function(){return de.apply(this,arguments)}}();return(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"product.edit.project"}),open:p,onOk:ae,onCancel:le,maskClosable:!1,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Oe.Z,{onClick:le,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Oe.Z,{type:"primary",disabled:k,onClick:ae,children:(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(l.Z,{form:H,layout:"vertical",children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.project.name"}),name:"name",rules:[{required:!0,max:64,pattern:/^[A-Za-z0-9\._-]*$/g,message:s({id:"product.project.name.message"})}],children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.project.name"}),onChange:oe})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version"}),name:"product_version",initialValue:"uname -r",children:(0,e.jsx)(pe.Z,{autoComplete:"auto",onChange:oe})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"project.description.option"}),name:"description",children:(0,e.jsx)(pe.Z.TextArea,{placeholder:s({id:"product.please.enter.comments"}),rows:4,onChange:oe})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.dashboard.count"}),name:"is_show",children:(0,e.jsxs)(Ye.ZP.Group,{onChange:oe,children:[(0,e.jsx)(Ye.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ye.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]})})}),wr=n(20136),Mt=n(55241),kt=n(93224),Ne=n(20310),Ue=n(12788),Lt=["title","children","width","color","placement","style"],ot,Bt=Ue.ZP.div(ot||(ot=(0,Ne.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),$t=function(c){var m=c.title,s=c.children,g=c.width,w=c.color,L=c.placement,H=L===void 0?"topLeft":L,ie=c.style,Y=(0,kt.Z)(c,Lt),p=(0,a.useRef)(null),O=(0,a.useState)(!1),ee=(0,i.Z)(O,2),G=ee[0],ue=ee[1],J=function(){var k,P,le=p==null||(k=p.current)===null||k===void 0?void 0:k.clientWidth,oe=p==null||(P=p.current)===null||P===void 0?void 0:P.scrollWidth;ue(le<oe)};(0,a.useEffect)(function(){J()},[m]);var te=(0,e.jsx)(Bt,(0,je.Z)((0,je.Z)({ref:p,style:(0,je.Z)({width:g,color:w},ie)},Y),{},{children:s||m||"-"}));return G?(0,e.jsx)(Mt.Z,{content:m,placement:H,overlayStyle:{wordBreak:"break-all"},children:te}):te},It=$t,br=n(43358),dt=n(34041),Cr=n(22385),nt=n(89456),at=n(49101),At=(0,a.forwardRef)(function(u,c){var m,s=(0,t.YB)(),g=s.formatMessage,w=l.Z.useForm(),L=(0,i.Z)(w,1),H=L[0],ie=(0,a.useState)(!1),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)(!1),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useState)({}),F=(0,i.Z)(te,2),k=F[0],P=F[1],le=(0,a.useState)({}),oe=(0,i.Z)(le,2),ae=oe[0],de=oe[1],A=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),xe={ws_id:A};(0,a.useImperativeHandle)(c,function(){return{show:function(h){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};de(b.data.length),O(!0),P(h),C({ws_id:A})}}});var D=(0,t.QT)(function(S){return(0,V._L)(S)},{manual:!0}),se=D.data,C=D.run,X=(0,t.QT)(function(S){return(0,V._L)(S)},{manual:!0}),q=X.run,re=(0,a.useCallback)(function(S){S&&W({repo_id:S}),q({repo_id:S}).then(function(h){H.setFieldsValue({gitUrl:h[0].git_url})})},[]),B=(0,t.QT)(function(S){return(0,V.vS)(S)},{defaultParams:[xe],initialData:{data:[]},manual:!0,formatResult:function(h){return h}}),z=B.data,W=B.run,j=function(){var S=(0,fe.Z)((0,y.Z)().mark(function h(){return(0,y.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!ue){E.next=2;break}return E.abrupt("return");case 2:J(!0),H.validateFields().then(function(){var _e=(0,fe.Z)((0,y.Z)().mark(function ve(N){var R,$,we,be,M,f;return(0,y.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(N.ws_id=A,ae!==0){I.next=10;break}return I.next=4,(0,V.xN)((0,je.Z)({project_id:k.id,is_master:1},N));case 4:R=I.sent,$=R.code,we=R.msg,x($,we),I.next=16;break;case 10:return I.next=12,(0,V.xN)((0,je.Z)({project_id:k.id,is_master:0},N));case 12:be=I.sent,M=be.code,f=be.msg,x(M,f);case 16:case"end":return I.stop()}},ve)}));return function(ve){return _e.apply(this,arguments)}}()).catch(function(_e){console.log(_e),J(!1)});case 4:case"end":return E.stop()}},h)}));return function(){return S.apply(this,arguments)}}(),x=function(h,b){h===200?(ge.default.success(g({id:"operation.success"})),u.onOk(),O(!1),H.resetFields(),z.data=[]):(0,Ae.EV)(h,b),J(!1)},ne=function(){O(!1),J(!1),H.resetFields(),z.data=[]},ye=function(){window.location.replace("/ws/".concat(A,"/product?t=code"))};return(0,e.jsxs)(Je.Z,{title:(0,e.jsx)(t._H,{id:"code.add.code"}),open:p,onOk:j,onCancel:ne,cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),className:Z().modal_warpper,maskClosable:!1,children:[(0,e.jsx)("div",{className:Z().content_warpper,children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsxs)(Q.Z.Text,{style:{color:"rgba(0,0,0,0.85)",fontWeight:"bold",fontSize:14},children:[(0,e.jsx)(t._H,{id:"product.project.name"}),"\uFF1A"]}),(0,e.jsx)(nt.Z,{title:k.name,placement:"topLeft",overlayStyle:{wordBreak:"break-all"},children:(0,e.jsx)(Q.Z.Text,{style:{color:"#000",opacity:.65,fontSize:14},children:(0,e.jsx)("div",{className:Z().text_ellip,children:k.name})})})]})}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:Z().content_warpper,children:(0,e.jsxs)(l.Z,{form:H,layout:"vertical",children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories"}),name:"repo_id",rules:[{required:!0,message:g({id:"product.repositories.cannot.be.empty"})}],children:(0,e.jsx)(dt.Z,{placeholder:(0,e.jsx)(t._H,{id:"product.please.select.the.repositories"}),notFoundContent:(0,e.jsx)("div",{style:{height:0}}),onChange:re,options:se==null?void 0:se.map(function(S){return{value:S.id,label:S.name}}),filterOption:function(h,b){return b.label.toLowerCase().indexOf(h.toLowerCase())>=0},showSearch:!0,dropdownRender:function(h){return(0,e.jsxs)("div",{children:[h,(0,e.jsx)("div",{style:{display:"inline-block",flexWrap:"nowrap",width:"100%",padding:"8px 0 8px 8px"},onClick:ye,children:(0,e.jsxs)("span",{children:[(0,e.jsx)(at.Z,{style:{marginRight:6,color:"#1890FF"}}),(0,e.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:(0,e.jsx)(t._H,{id:"product.new.repositories"})})]})})]})}})}),(0,e.jsx)(l.Z.Item,{label:"GitUrl",name:"gitUrl",children:(0,e.jsx)(pe.Z,{placeholder:g({id:"product.please.select.gitUrl"}),disabled:!0})}),(0,e.jsx)(l.Z.Item,{label:"Branch",name:"branch_id",rules:[{required:!0,message:g({id:"product.branch.cannot.be.empty"})}],children:(0,e.jsx)(dt.Z,{allowClear:!0,showSearch:!0,filterOption:function(h,b){return b.label.toLowerCase().indexOf(h.toLowerCase())>=0},placeholder:(0,e.jsx)(t._H,{id:"product.please.select.branch"}),options:(m=z.data)===null||m===void 0?void 0:m.map(function(S){return{value:S.id,label:S.name}})})})]})})]})}),st=n(10753),Wt=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=(0,t.Kd)()==="en-US",w=(0,Ke.UO)(),L=w.ws_id,H=(0,a.useState)(!1),ie=(0,i.Z)(H,2),Y=ie[0],p=ie[1],O=(0,a.useState)("detail"),ee=(0,i.Z)(O,2),G=ee[0],ue=ee[1],J=(0,a.useState)({}),te=(0,i.Z)(J,2),F=te[0],k=te[1],P=(0,a.useRef)(null),le=(0,a.useRef)(null),oe=(0,a.useState)(!1),ae=(0,i.Z)(oe,2),de=ae[0],A=ae[1];(0,a.useImperativeHandle)(c,function(){return{show:function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),ue(b),k(E),"id"in E&&X({project_id:E.id})}}});var xe=(0,t.QT)(function(h){return(0,V.fW)(h)},{formatResult:function(b){return b},initialData:{data:[]},manual:!0}),D=xe.data,se=xe.loading,C=xe.refresh,X=xe.run;(0,a.useEffect)(function(){var h=u.projectData||{},b=h.data,E=b||[],_e=E.find(function(ve){return ve.id===F.id});(0,Ft.isUndefined)(_e)||k(_e)},[u.projectData]);var q=function(){p(!1)},re=function(){var h=(0,fe.Z)((0,y.Z)().mark(function b(E,_e){var ve;return(0,y.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,V.h5)({is_master:1,relation_id:_e.id});case 2:ve=R.sent,z(ve);case 4:case"end":return R.stop()}},b)}));return function(E,_e){return h.apply(this,arguments)}}(),B=function(){X({project_id:F.id})},z=function(b){b.code===200?(C(),ge.default.success(s({id:"operation.success"}))):(0,Ae.EV)(b.code,b.msg)},W=function(){var h=(0,fe.Z)((0,y.Z)().mark(function b(E){var _e,ve,N;return(0,y.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,V.yE)({relation_id:E.id});case 2:_e=$.sent,ve=_e.code,N=_e.msg,ve===200?(C(),ge.default.success(s({id:"operation.success"}))):(0,Ae.EV)(ve,N);case 6:case"end":return $.stop()}},b)}));return function(E){return h.apply(this,arguments)}}(),j=[{title:(0,e.jsx)(It,{title:s({id:"product.repositories"}),placement:"top"}),dataIndex:"branch_name",ellipsis:!0,render:function(b){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:b})}},{title:"GitUrl",dataIndex:"git_url",ellipsis:!0,render:function(b){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:b})}},{title:"Branch",dataIndex:"branch_name",ellipsis:!0,render:function(b){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:b})}},{title:(0,e.jsx)(Tt.f,{title:s({id:"product.is_master"}),desc:s({id:"product.is_master.desc"})}),width:g?160:90,dataIndex:"is_master",render:function(b,E){return E.is_master?(0,e.jsx)(Dt.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(Rt.Z,{style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"},onClick:function(){return re(b,E)}})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),width:g?100:80,render:function(b){return(0,e.jsx)("div",{children:b.is_master?(0,e.jsx)(Ee.Z,{children:(0,e.jsx)(Ie.Z,{title:(0,e.jsx)(t._H,{id:"product.is_master.cannot.be.deleted"}),placement:"bottomLeft",cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.delete"}),okType:"default",okButtonProps:{disabled:!0},children:(0,e.jsx)(Q.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})}):(0,e.jsx)(Ee.Z,{children:(0,e.jsx)(Ie.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),onConfirm:function(){return W(b)},placement:"bottomLeft",cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),children:(0,e.jsx)(Q.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})})})}}],x=function(){var h=(0,fe.Z)((0,y.Z)().mark(function b(){return(0,y.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,(0,V.th)({project_id:F.id,ws_id:L}).then(function(ve){ve.code===200&&(ge.default.success(s({id:"request.delete.success"})),A(!1),p(!1),ne())});case 2:case"end":return _e.stop()}},b)}));return function(){return h.apply(this,arguments)}}(),ne=function(){u.onOk()},ye=function(b){P.current.show(b)},S=function(b){le.current.show(b,D)};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:G==="detail"?(0,e.jsx)(t._H,{id:"product.detail.product"}):G,width:"680",onClose:q,visible:Y,className:Z().drawer_warpper,children:[(0,e.jsx)(Pe.Z,{placement:"bottom",overlayStyle:{cursor:"pointer"},overlay:(0,e.jsxs)(Re.Z,{children:[(0,e.jsx)(Re.Z.Item,{onClick:function(){return ye(F)},children:(0,e.jsx)(t._H,{id:"product.edit.project"})}),(0,e.jsx)(Re.Z.Item,{onClick:function(){return A(!0)},children:(0,e.jsx)("i",{className:Z().menu_font_color,children:(0,e.jsx)(t._H,{id:"product.delete.project"})})})]}),children:(0,e.jsx)(r.Z,{style:{cursor:"pointer",position:"absolute",right:55,top:21}})}),(0,e.jsxs)("div",{className:Z().content_warpper,children:[(0,e.jsxs)(Ee.Z,{className:Z().title_detail_items,children:[(0,e.jsxs)(Q.Z.Text,{className:Z().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.project.name"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:F.name,width:450})]}),(0,e.jsxs)(Ee.Z,{className:Z().title_detail_items,children:[(0,e.jsxs)(Q.Z.Text,{className:Z().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.version"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:F.product_version,width:450})]}),(0,e.jsxs)(Ee.Z,{className:Z().title_detail_items,children:[(0,e.jsxs)(Q.Z.Text,{className:Z().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.project.desc"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:F.description,width:500})]}),(0,e.jsxs)(Ee.Z,{className:Z().title_detail_items,children:[(0,e.jsxs)(Q.Z.Text,{className:Z().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.dashboard.count"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:F.is_show==1?s({id:"operation.yes"}):s({id:"operation.no"})})]})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsxs)("div",{className:Z().content_warpper,children:[(0,e.jsxs)(ce.Z,{style:{height:60,lineHeight:"60px"},children:[(0,e.jsx)(me.Z,{span:19,style:{color:"#000",fontWeight:"bold"},children:(0,e.jsx)(t._H,{id:"code.manage"})}),(0,e.jsx)(me.Z,{span:5,style:{textAlign:"right"},children:(0,e.jsx)(Oe.Z,{type:"primary",onClick:function(){return S(F)},children:(0,e.jsx)(t._H,{id:"code.add.code"})})})]}),(0,e.jsx)(Et.Z,{size:"small",rowKey:"id",loading:se,columns:j,dataSource:D.data,pagination:!1})]}),F.is_default?(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),className:Z().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),okButtonProps:{disabled:!0},getContainer:!1,visible:de,onOk:function(){return x()},onCancel:function(){return A(!1)},width:390,centered:!0,maskClosable:!1,children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"product.the.default.item.cannot.be.deleted"})})}):(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),className:Z().modalChange,okType:"danger",okText:(0,e.jsx)(t._H,{id:"operation.delete"}),getContainer:!1,visible:de,onOk:function(){return x()},onCancel:function(){return A(!1)},width:390,centered:!0,maskClosable:!1,children:(0,e.jsx)("p",{children:s({id:"product.are.you.sure.you.delete.project"},{data:F.name})})}),(0,e.jsx)(Ht,{ref:P,onOk:ne,setVisible:p}),(0,e.jsx)(At,{ref:le,onOk:B})]})}),Nt=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),w=l.Z.useForm(),L=(0,i.Z)(w,1),H=L[0],ie=(0,a.useState)(!1),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)(!1),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useState)(),F=(0,i.Z)(te,2),k=F[0],P=F[1],le=(0,a.useState)("new"),oe=(0,i.Z)(le,2),ae=oe[0],de=oe[1];(0,a.useImperativeHandle)(c,function(){return{show:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O(!0),de(C),H.setFieldsValue(X)}}});var A=function(){H.resetFields(),J(!1),O(!1),P(void 0)},xe=function(C,X){C===200?(u.onOk(),ge.default.success(s({id:"operation.success"})),A()):C===1371?P(s({id:"project.name.already.exists"})):ge.default.error(X),J(!1)},D=function(){J(!0),H.validateFields().then(function(){var C=(0,fe.Z)((0,y.Z)().mark(function X(q){var re,B,z;return(0,y.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(ae!=="new"){j.next=7;break}return j.next=3,(0,V.$L)((0,je.Z)({ws_id:g,product_id:u.current.id},q));case 3:re=j.sent,B=re.code,z=re.msg,xe(B,z);case 7:case"end":return j.stop()}},X)}));return function(X){return C.apply(this,arguments)}}()).catch(function(C){console.log(C),J(!1)})};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:ae==="new"?(0,e.jsx)(t._H,{id:"product.create.project"}):ae,width:"380",onClose:A,visible:p,className:Z().drawer_warpper,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Oe.Z,{onClick:A,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Oe.Z,{type:"primary",disabled:ue,onClick:D,children:(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:[(0,e.jsxs)("div",{className:Z().content_warpper,children:[(0,e.jsx)(Ee.Z,{style:{display:"revert",marginBottom:5},children:(0,e.jsx)(Q.Z.Text,{style:{color:"#000",opacity:.85,fontSize:14},children:(0,e.jsx)(t._H,{id:"product.name"})})}),(0,e.jsx)(Ee.Z,{className:Z().title_detail_project,children:(0,e.jsx)(Ze.Z,{title:u.current.name})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:Z().content_warpper,children:(0,e.jsxs)(l.Z,{form:H,layout:"vertical",initialValues:{is_show:1},className:Z().product_form,children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.project.name"}),name:"name",help:k,rules:[{required:!0,max:64,pattern:/^[A-Za-z0-9\._-]*$/g,message:s({id:"product.project.name.message"})}],children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.project.name"})})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version.option"}),name:"product_version",children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.version"})})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.description.option"}),name:"description",children:(0,e.jsx)(pe.Z.TextArea,{placeholder:s({id:"product.please.enter.desc"}),rows:4})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.dashboard.count"}),name:"is_show",children:(0,e.jsxs)(Ye.ZP.Group,{children:[(0,e.jsx)(Ye.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ye.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]})})]})}),it=n(56978),Ut=n(89628),Vt=n(9690),ct,Kt=["svgRef","title"];function tt(){return tt=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var m=arguments[c];for(var s in m)Object.prototype.hasOwnProperty.call(m,s)&&(u[s]=m[s])}return u},tt.apply(this,arguments)}function Yt(u,c){if(u==null)return{};var m=zt(u,c),s,g;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(u);for(g=0;g<w.length;g++)s=w[g],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(m[s]=u[s]))}return m}function zt(u,c){if(u==null)return{};var m={},s=Object.keys(u),g,w;for(w=0;w<s.length;w++)g=s[w],!(c.indexOf(g)>=0)&&(m[g]=u[g]);return m}var Qt=function(c){var m=c.svgRef,s=c.title,g=Yt(c,Kt);return a.createElement("svg",tt({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:m},g),s?a.createElement("title",null,s):null,ct||(ct=a.createElement("g",{id:"ws\\u7EA7dashboard\\u4F18\\u5316",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"\\u9879\\u76EE\\u52A0\\u7EDF\\u8BA1icon",transform:"translate(-582.000000, -305.000000)",fillRule:"nonzero"},a.createElement("g",{id:"Group-2",transform:"translate(563.000000, 254.000000)"},a.createElement("g",{id:"\\u7EDF\\u8BA1",transform:"translate(19.000000, 51.000000)"},a.createElement("rect",{id:"\\u77E9\\u5F62",fill:"#000000",opacity:0,x:0,y:0,width:16,height:16}),a.createElement("path",{d:"M3,2 L13,2 C13.5522847,2 14,2.44771525 14,3 L14,13 C14,13.5522847 13.5522847,14 13,14 L3,14 C2.44771525,14 2,13.5522847 2,13 L2,3 C2,2.44771525 2.44771525,2 3,2 Z M4,7 L4,12 L6,12 L6,7 L4,7 Z M7,5 L7,12 L9,12 L9,5 L7,5 Z M10,8 L10,12 L12,12 L12,8 L10,8 Z",id:"\\u5F62\\u72B6",fill:"#1890FF"})))))))},Gt=a.forwardRef(function(u,c){return a.createElement(Qt,tt({svgRef:c},u))}),Sr=n.p+"static/statistical.c556db2f.svg",ut,Jt=["svgRef","title"];function rt(){return rt=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var m=arguments[c];for(var s in m)Object.prototype.hasOwnProperty.call(m,s)&&(u[s]=m[s])}return u},rt.apply(this,arguments)}function Xt(u,c){if(u==null)return{};var m=qt(u,c),s,g;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(u);for(g=0;g<w.length;g++)s=w[g],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(m[s]=u[s]))}return m}function qt(u,c){if(u==null)return{};var m={},s=Object.keys(u),g,w;for(w=0;w<s.length;w++)g=s[w],!(c.indexOf(g)>=0)&&(m[g]=u[g]);return m}var er=function(c){var m=c.svgRef,s=c.title,g=Xt(c,Jt);return a.createElement("svg",rt({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:m},g),s?a.createElement("title",null,s):null,ut||(ut=a.createElement("g",{id:"ws\\u7EA7dashboard\\u4F18\\u5316",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"\\u9879\\u76EE\\u52A0\\u7EDF\\u8BA1icon",transform:"translate(-904.000000, -443.000000)",fill:"#000000",fillRule:"nonzero"},a.createElement("g",{id:"Group-2-Copy-6",transform:"translate(883.000000, 392.000000)"},a.createElement("g",{id:"\\u4E0D\\u7EDF\\u8BA1",transform:"translate(21.000000, 51.000000)"},a.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:16,height:16}),a.createElement("path",{d:"M3,2 L13,2 C13.5522847,2 14,2.44771525 14,3 L14,13 C14,13.5522847 13.5522847,14 13,14 L3,14 C2.44771525,14 2,13.5522847 2,13 L2,3 C2,2.44771525 2.44771525,2 3,2 Z M4,7 L4,12 L6,12 L6,7 L4,7 Z M7,5 L7,12 L9,12 L9,5 L7,5 Z M10,8 L10,12 L12,12 L12,8 L10,8 Z",id:"\\u5F62\\u72B6",fillOpacity:.25})))))))},tr=a.forwardRef(function(u,c){return a.createElement(er,rt({svgRef:c},u))}),Pr=n.p+"static/noStatistical.285fd03f.svg",pt={CARD:"card"},rr=function(c){var m=c.data,s=c.index,g=c.moveCard,w=c.handleProjecIcon,L=c.hanldeProjectDetail,H=(0,t.YB)(),ie=H.formatMessage,Y=(0,t.Kd)()==="en-US",p=m.id,O=m.name,ee=m.product_version,G=m.is_default,ue=m.is_show,J=m.description,te=(0,a.useRef)(null),F=(0,Ut.L)({accept:pt.CARD,collect:function(se){return{handlerId:se.getHandlerId()}},hover:function(se,C){var X;if(!!te.current){var q=se.index,re=s;if(q!==re){var B=(X=te.current)===null||X===void 0?void 0:X.getBoundingClientRect(),z=(B.bottom-B.top)/2,W=C.getClientOffset(),j=W.y-B.top;q<re&&j<z||q>re&&j>z||(g(q,re),se.index=re)}}}}),k=(0,i.Z)(F,2),P=k[0].handlerId,le=k[1],oe=(0,Vt.c)({type:pt.CARD,item:function(){return{id:p,index:s}},collect:function(se){return{isDragging:se.isDragging()}}}),ae=(0,i.Z)(oe,2),de=ae[0].isDragging,A=ae[1],xe=de?0:1;return A(le(te)),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{ref:te,style:{opacity:xe},"data-handler-id":P,className:Z().project_warpper,children:[(0,e.jsx)("div",{className:G?Z()["project_default_icon".concat(Y?"_en":"")]:Z().project_icon,onClick:function(){return w(p)}}),(0,e.jsxs)("div",{className:Z().project_child,onClick:function(){return L(m)},children:[(0,e.jsxs)(Ze.Z,{title:O,children:[(0,e.jsx)(Q.Z.Text,{className:Z().project_name,children:O}),(0,e.jsx)("div",{style:{height:6}})]}),(0,e.jsxs)(Ze.Z,{title:ee,children:[(0,e.jsxs)(Q.Z.Text,{className:Z().project_version,children:[ue?(0,e.jsx)(nt.Z,{placement:"bottomLeft",title:ie({id:"product.counted.on.the.dashboard"}),children:(0,e.jsx)(Gt,{style:{marginRight:6,verticalAlign:"text-bottom"}})}):(0,e.jsx)(nt.Z,{placement:"bottomLeft",title:ie({id:"product.not.counted.on.the.dashboard"}),children:(0,e.jsx)(tr,{style:{marginRight:6,verticalAlign:"text-bottom"}})}),ee]}),(0,e.jsx)("div",{style:{height:2}})]}),(0,e.jsxs)(Ze.Z,{title:J,children:[(0,e.jsx)(Q.Z.Text,{className:Z().project_version,children:J}),(0,e.jsx)("div",{style:{height:2}})]})]})]})})},nr=rr,ar={display:"flex",gap:10,flexFlow:"wrap",width:"100%"},sr=function(c){var m=c.dataSource,s=c.clickType,g=c.callBackFormTo,w=c.hanldCreateProject,L=c.handleProjecIcon,H=c.hanldeProjectDetail,ie=function(O,ee){g(O,ee,m)},Y=function(O,ee){return(0,e.jsx)(nr,{data:O,index:ee,moveCard:ie,handleProjecIcon:L,hanldeProjectDetail:H},O.id)};return(0,e.jsxs)("div",{style:ar,children:[m.map(function(p,O){return Y(p,O)}),s==="menu"&&(0,e.jsx)("div",{className:Z().project_create,onClick:w,children:(0,e.jsxs)("div",{className:Z().project_create_empty,children:[(0,e.jsx)(at.Z,{style:{marginRight:6}}),(0,e.jsx)(t._H,{id:"product.create.project"})]})})]})},ir=sr,lr=n(90900),or=n(57865),ht,ft,_t,mt,vt,jt,xt,gt=Ue.ZP.div(ht||(ht=(0,Ne.Z)([`
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #fff;
`]))),Zt=Ue.ZP.div(ft||(ft=(0,Ne.Z)([`
    height: calc(`,`px - 96px - 90px);
    width: 100%;
    overflow: hidden;
    display: flex;
    gap: 20px;
`])),innerHeight),yt=Ue.ZP.div(_t||(_t=(0,Ne.Z)([`
    width: 300px;
    border: 1px solid #eee;
    height: 100%;
`]))),wt=Ue.ZP.div(mt||(mt=(0,Ne.Z)([`
    width: calc(100% - 300px - 20px);
    height: 100%;
`]))),bt=Ue.ZP.div(vt||(vt=(0,Ne.Z)([`
    padding: 20px;
 
`]))),Ct=(0,Ue.ZP)(ce.Z)(jt||(jt=(0,Ne.Z)([`
    position: relative;
    width: 100%;
    height: 32px;
    background-color: rgba( 0,0,0, .02 );
    padding-left: 20px;
    line-height: 32px;
    font-size: 14px;
    font-weight: 700;
    color: rgba(0 , 0 , 0 , .85);
`]))),dr=Ue.ZP.div(xt||(xt=(0,Ne.Z)([`
    height: calc(100% - 72px - 32px - 8px);
    overflow: auto;  
`]))),cr=function(){var u,c,m=(0,t.YB)(),s=m.formatMessage,g=(0,Ke.UO)(),w=g.ws_id,L=(0,Ke.TH)(),H=L.query,ie=(0,a.useState)({}),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)("menu"),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useState)(null),F=(0,i.Z)(te,2),k=F[0],P=F[1],le=(0,a.useRef)(null),oe=(0,a.useRef)(null),ae=(0,a.useRef)(null),de=l.Z.useForm(),A=(0,i.Z)(de,1),xe=A[0],D=(0,t.QT)(function(M){return(0,V.OV)(M)},{defaultParams:[{ws_id:w}],initialData:{data:[]},formatResult:function(f){return f}}),se=D.data.data,C=se===void 0?[]:se,X=D.refresh,q=D.loading,re=D.run,B=(0,t.QT)(function(M){return(0,V.lk)(M)},{initialData:{data:[]},manual:!0,formatResult:function(f){return f}}),z=B.data,W=B.refresh,j=B.loading,x=B.run,ne=function(f){return C.findIndex(function(_){var I=_.id;return I===f-0})};(0,a.useEffect)(function(){C.length>0?"id"in p?O(C[ne(p.id)]):O(C[H.current?ne(H.current):0]):O({})},[C,H]);var ye=function(f){O(f),J("menu"),xe.setFieldsValue({server_type:void 0})},S=function(){var f;(f=le.current)===null||f===void 0||f.show("new")},h=function(f,_){f===200?(O({}),ge.default.success(s({id:"operation.success"})),X()):(0,Ae.EV)(f,_)},b=function(){var M=(0,fe.Z)((0,y.Z)().mark(function f(_){var I,Ce,U;return(0,y.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,(0,V.Ir)({ws_id:w,prd_id:_.id});case 2:I=Fe.sent,Ce=I.code,U=I.msg,h(Ce,U);case 6:case"end":return Fe.stop()}},f)}));return function(_){return M.apply(this,arguments)}}(),E=function(){var f;(f=le.current)===null||f===void 0||f.show("edit",p)},_e=function(f){var _;(_=oe.current)===null||_===void 0||_.show("detail",f)},ve=function(){var M=(0,fe.Z)((0,y.Z)().mark(function f(_){var I;return(0,y.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,V.ty)({project_id:_,is_default:1});case 2:I=U.sent,I.code===200?(W(),X(),ge.default.success("\u4FEE\u6539\u9ED8\u8BA4\u9879\u76EE\u6210\u529F")):(0,Ae.EV)(C.code,C.msg);case 4:case"end":return U.stop()}},f)}));return function(_){return M.apply(this,arguments)}}(),N=function(){var f;(f=ae.current)===null||f===void 0||f.show("new",{})},R=function(){var M=(0,fe.Z)((0,y.Z)().mark(function f(_){return(0,y.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:_=="new"?X().then(function(U){O(U.data[0])}):re({ws_id:w}).then(function(U){U.code===200&&x({product_id:p.id,ws_id:w})});case 1:case"end":return Ce.stop()}},f)}));return function(_){return M.apply(this,arguments)}}(),$=function(f){f===""?J("menu"):(J("searchButton"),x({product_id:p.id,name:f,ws_id:w}))};(0,a.useEffect)(function(){p.id&&x({product_id:p.id,ws_id:w})},[p.id]);var we=function(){var M=(0,fe.Z)((0,y.Z)().mark(function f(_){var I,Ce,U;return(0,y.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(_.destination){Fe.next=2;break}return Fe.abrupt("return");case 2:return Fe.next=4,(0,V.Zf)({ws_id:w,start_id:C[_.source.index].id,end_id:C[_.destination.index].id,from:_.source.index+1,to:_.destination.index+1});case 4:I=Fe.sent,Ce=I.code,U=I.msg,Ce===200?re({ws_id:w}).then(function(St){St.code===200&&x({product_id:p.id,ws_id:w})}):(0,Ae.EV)(Ce,U);case 8:case"end":return Fe.stop()}},f)}));return function(_){return M.apply(this,arguments)}}(),be=function(){var M=(0,fe.Z)((0,y.Z)().mark(function f(_,I,Ce){var U,Se,Fe;return(0,y.Z)().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.prev=0,Be.next=3,(0,V.c0)({product_id:p.id,ws_id:w,start_id:Ce[_].id,end_id:Ce[I].id,from:_+1,to:I+1});case 3:U=Be.sent,Se=U.code,Fe=U.msg,Se===200?x({product_id:p.id,ws_id:w}):(0,Ae.EV)(Se,Fe),Be.next=12;break;case 9:Be.prev=9,Be.t0=Be.catch(0),console.log(Be.t0);case 12:case"end":return Be.stop()}},f,null,[[0,9]])}));return function(_,I,Ce){return M.apply(this,arguments)}}();return(0,e.jsxs)(Zt,{children:[(0,e.jsxs)(yt,{children:[(0,e.jsx)(bt,{children:(0,e.jsx)(Oe.Z,{onClick:S,type:"primary",children:(0,e.jsx)(t._H,{id:"product.new.product"})})}),(0,e.jsx)(Ct,{justify:"space-between",children:(0,e.jsxs)(Q.Z.Text,{children:[(0,e.jsx)(t._H,{id:"product.all.product"})," (",(C==null?void 0:C.length)&&"".concat(C==null?void 0:C.length),")"]})}),(0,e.jsx)(it.Z5,{onDragEnd:we,children:(0,e.jsx)(it.bK,{droppableId:"droppable",children:function(f){return(0,e.jsxs)("div",(0,je.Z)((0,je.Z)({},f.droppableProps),{},{ref:f.innerRef,className:Z().all_product,children:[C==null?void 0:C.map(function(_,I){return(0,e.jsx)(it._l,{index:I,draggableId:String(I+1),product:_.id,children:function(U){return(0,a.createElement)(me.Z,(0,je.Z)((0,je.Z)((0,je.Z)({span:24,ref:U.innerRef},U.draggableProps),U.dragHandleProps),{},{key:_.id,onClick:function(){return ye(_)},onMouseEnter:function(){return P(_.id)},onMouseLeave:function(){return P(null)}}),(0,e.jsxs)(ce.Z,{className:Z().product_row,children:[(0,e.jsx)("div",{className:k===_.id?Z().move_active:Z().move,children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)("div",{className:_.is_default?Z().product_item_default:Z().product_item_old}),(0,e.jsxs)(ce.Z,{justify:"space-between",className:+p.id==+_.id?Z().product_item_active:Z().product_item,children:[(0,e.jsx)(Ze.Z,{title:_.name,width:210,children:(0,e.jsx)(Q.Z.Text,{children:_.name})}),_.is_default?(0,e.jsx)(Ie.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"product.default.products.cannot.be.deleted"})}),onConfirm:function(){return b(_)},cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)(o.Z,{style:{color:"red"}}),okButtonProps:{type:"default",disabled:!0},children:(0,e.jsx)(K.Z,{className:k===_.id?Z().remove_active:Z().remove})}):(0,e.jsx)(Ie.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"product.deletion.has.influence"})}),onCancel:function(){return b(_)},cancelText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),okText:(0,e.jsx)(t._H,{id:"operation.cancel"}),icon:(0,e.jsx)(o.Z,{style:{color:"red"}}),children:(0,e.jsx)(K.Z,{className:k===_.id?Z().remove_active:Z().remove})})]})]}))}},_.key||_.name)}),f.placeholder]}))}})})]}),(0,e.jsxs)(wt,{children:[(0,e.jsxs)(ce.Z,{className:Z().product_right_detail,align:"middle",children:[(0,e.jsx)(me.Z,{span:24,children:(0,e.jsxs)(ce.Z,{children:[(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:Z().detail_item_row,children:[(0,e.jsxs)(Q.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.name"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:p.name})]})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:Z().detail_item_row,children:[(0,e.jsxs)(Q.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.description"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:p.description})]})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:Z().detail_item_row,children:[(0,e.jsxs)(Q.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.version.command"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:p.command})]})})]})}),(0,e.jsx)(Pe.Z,{overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Re.Z,{children:(0,e.jsx)(Re.Z.Item,{onClick:E,children:(0,e.jsx)(t._H,{id:"product.edit.info"})})}),children:(0,e.jsx)(r.Z,{style:{cursor:"pointer",position:"absolute",right:0,top:5}})})]}),(0,e.jsxs)(ce.Z,{className:Z().right_project,children:[(0,e.jsxs)(ce.Z,{style:{width:"100%",height:62},children:[(0,e.jsxs)(Q.Z.Text,{className:Z().product_right_all_project,children:[(0,e.jsx)(t._H,{id:"product.all.items"})," (",((u=z.data)===null||u===void 0?void 0:u.length)&&"".concat((c=z.data)===null||c===void 0?void 0:c.length),")"]}),(0,e.jsx)(l.Z,{form:xe,children:(0,e.jsx)(l.Z.Item,{name:"server_type",children:(0,e.jsx)(pe.Z.Search,{placeholder:s({id:"product.search.for.items"}),onSearch:$,allowClear:!0,style:{width:200,height:32,marginTop:15}})})})]}),(0,e.jsx)(De.Z,{spinning:j,children:(0,e.jsx)(lr.W,{backend:or.PD,children:(0,e.jsx)(ir,{dataSource:z.data,clickType:ue,callBackFormTo:be,handleProjecIcon:ve,hanldCreateProject:N,hanldeProjectDetail:_e})})})]})]}),q&&(0,e.jsx)(gt,{children:(0,e.jsx)(De.Z,{spinning:q})}),(0,e.jsx)(Ot,{ref:le,current:p,onOk:R}),(0,e.jsx)(Wt,{ref:oe,onOk:W,projectData:z}),(0,e.jsx)(Nt,{ref:ae,current:p,onOk:W})]})},ur=n(84372),he=n.n(ur),pr=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=l.Z.useForm(),w=(0,i.Z)(g,1),L=w[0],H=(0,a.useState)(!1),ie=(0,i.Z)(H,2),Y=ie[0],p=ie[1],O=(0,a.useState)(!1),ee=(0,i.Z)(O,2),G=ee[0],ue=ee[1],J=(0,a.useState)("new"),te=(0,i.Z)(J,2),F=te[0],k=te[1],P=(0,a.useState)(),le=(0,i.Z)(P,2),oe=le[0],ae=le[1],de=(0,a.useState)(),A=(0,i.Z)(de,2),xe=A[0],D=A[1],se=(0,a.useState)(""),C=(0,i.Z)(se,2),X=C[0],q=C[1],re=(0,a.useState)(void 0),B=(0,i.Z)(re,2),z=B[0],W=B[1],j=(0,a.useState)(!1),x=(0,i.Z)(j,2),ne=x[0],ye=x[1],S=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1");(0,a.useImperativeHandle)(c,function(){return{show:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),k(N),ye(!1),ue(!1),q(void 0),W(void 0),ae(void 0),D(void 0),L.setFieldsValue(R)}}});var h=function(){L.resetFields(),ue(!1),p(!1)},b=function(){var ve=(0,fe.Z)((0,y.Z)().mark(function N(R){var $,we,be,M;return(0,y.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return $=R.target.value,we=/^.*\.git$/,_.next=4,(0,V.ff)({check_name:"repo",repo:$});case 4:be=_.sent,M=be.code,M==200?(q("success"),ye(!0),D(void 0)):we.test($)?(ue(!1),q("error"),D(s({id:"product.please.check.permission"})),ye(!0)):(q("warning"),D(s({id:"product.please.enter.right.gitUrl"})),ye(!0));case 7:case"end":return _.stop()}},N)}));return function(R){return ve.apply(this,arguments)}}(),E=function(N,R,$){N===200?(u.onOk($),ge.default.success(s({id:"operation.success"})),p(!1),L.resetFields()):N===1371?(ae(s({id:"product.repositories.already.exists"})),W("error"),ue(!1)):(ge.default.error(R),ue(!1))},_e=function(){ue(!0),L.validateFields().then(function(){var N=(0,fe.Z)((0,y.Z)().mark(function R($){var we,be,M,f,_,I;return(0,y.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(F!=="new"){U.next=9;break}return U.next=3,(0,V.h4)((0,je.Z)({ws_id:S},$));case 3:we=U.sent,be=we.code,M=we.msg,E(be,M,F),U.next=15;break;case 9:return U.next=11,(0,V.GW)((0,je.Z)({ws_id:S,repo_id:L.getFieldValue("id")},$));case 11:f=U.sent,_=f.code,I=f.msg,E(_,I,F);case 15:case"end":return U.stop()}},R)}));return function(R){return N.apply(this,arguments)}}()).catch(function(){return ue(!1)})};return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,title:F==="new"?(0,e.jsx)(t._H,{id:"product.new.repositories"}):(0,e.jsx)(t._H,{id:"product.edit.repositories"}),width:380,onClose:h,open:Y,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Oe.Z,{onClick:h,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Oe.Z,{type:"primary",disabled:G,onClick:_e,children:F==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(l.Z,{form:L,layout:"vertical",className:he().product_form,children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories"}),name:"name",rules:[{required:!0,message:s({id:"product.please.enter.repositories"})}],help:oe,validateStatus:z,children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.repositories"})})}),(0,e.jsx)(l.Z.Item,{label:"GitUrl",name:"git_url",rules:[{required:!0,message:s({id:"product.please.enter.gitUrl"})}],help:xe,validateStatus:X,hasFeedback:ne,children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.gitUrl"}),onBlur:function(N){return b(N)}})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories.desc"}),name:"description",children:(0,e.jsx)(pe.Z.TextArea,{placeholder:s({id:"product.please.enter.desc"}),rows:4})})]})})}),hr=(0,a.forwardRef)(function(u,c){var m=(0,t.YB)(),s=m.formatMessage,g=l.Z.useForm(),w=(0,i.Z)(g,1),L=w[0],H=(0,a.useState)(!1),ie=(0,i.Z)(H,2),Y=ie[0],p=ie[1],O=(0,a.useState)("new"),ee=(0,i.Z)(O,2),G=ee[0],ue=ee[1],J=(0,a.useState)(),te=(0,i.Z)(J,2),F=te[0],k=te[1],P=(0,a.useState)(!1),le=(0,i.Z)(P,2),oe=le[0],ae=le[1],de=(0,a.useState)(void 0),A=(0,i.Z)(de,2),xe=A[0],D=A[1],se=(0,a.useState)(!1),C=(0,i.Z)(se,2),X=C[0],q=C[1],re=(0,a.useState)(!1),B=(0,i.Z)(re,2),z=B[0],W=B[1],j=(0,a.useState)({}),x=(0,i.Z)(j,2),ne=x[0],ye=x[1];(0,a.useImperativeHandle)(c,function(){return{show:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),ue(R),ye($),W(!1),q(!1),D(void 0),k(void 0),L.setFieldsValue($)}}});var S=function(){L.resetFields(),p(!1)},h=function(){var N=(0,fe.Z)((0,y.Z)().mark(function R($){var we,be,M;return(0,y.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return we=$.target.value,_.next=3,(0,V.ff)({check_name:"branch",repo:u.current.git_url,branch:we});case 3:be=_.sent,M=be.code,M===200?(D("success"),q(!0),k(void 0)):(W(!1),D("error"),k(s({id:"product.please.check.whether.exists"})),q(!1)),we.replace(/(^\s*)|(\s*$)/g,"")===""&&(D("warning"),k(s({id:"please.enter"})),q(!0));case 7:case"end":return _.stop()}},R)}));return function($){return N.apply(this,arguments)}}(),b=function(R,$){R===200?(u.onOk(),ge.default.success(s({id:"operation.success"})),S()):R===1376?(k(s({id:"product.branch.already.exists"})),W(!1)):(ge.default.error($),W(!1))},E=function(){W(!0),L.validateFields().then(function(){var R=(0,fe.Z)((0,y.Z)().mark(function $(we){var be,M,f,_,I,Ce;return(0,y.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(G!=="new"){Se.next=9;break}return Se.next=3,(0,V.Qj)((0,je.Z)({repo_id:u.current.id},we));case 3:be=Se.sent,M=be.code,f=be.msg,b(M,f),Se.next=15;break;case 9:return Se.next=11,(0,V.o_)((0,je.Z)({branch_id:ne.id},we));case 11:_=Se.sent,I=_.code,Ce=_.msg,b(I,Ce);case 15:case"end":return Se.stop()}},$)}));return function($){return R.apply(this,arguments)}}()).catch(function(R){console.log(R),W(!1)})},_e=function(){var N=(0,fe.Z)((0,y.Z)().mark(function R(){var $,we,be;return(0,y.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,V.NA)({branch_id:ne.id});case 2:$=f.sent,we=$.code,be=$.msg,ve(we,be);case 6:case"end":return f.stop()}},R)}));return function(){return N.apply(this,arguments)}}(),ve=function(R,$){R===200?(ge.default.success(s({id:"operation.success"})),u.onOk(),S(),ae(!1)):ge.default.error($)};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:G==="new"?(0,e.jsx)(t._H,{id:"product.new.branch"}):(0,e.jsx)(t._H,{id:"product.edit.branch"}),width:"380",onClose:S,visible:Y,className:he().drawer_warpper,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Oe.Z,{onClick:S,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Oe.Z,{type:"primary",disabled:z,onClick:E,children:G==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:[G!=="new"&&(0,e.jsx)(Pe.Z,{placement:"topLeft",overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Re.Z,{children:(0,e.jsx)(Re.Z.Item,{onClick:function(){return ae(!0)},children:(0,e.jsx)("i",{className:he().menu_font_color,children:(0,e.jsx)(t._H,{id:"product.delete.branch"})})})}),children:(0,e.jsx)(r.Z,{style:{cursor:"pointer",position:"absolute",right:55,top:21}})}),(0,e.jsxs)("div",{className:he().content_warpper,children:[(0,e.jsx)(Ee.Z,{style:{display:"revert",marginBottom:5},children:(0,e.jsx)(Q.Z.Text,{style:{color:"#000",opacity:.85,fontSize:14,fontWeight:"bold"},children:(0,e.jsx)(t._H,{id:"product.repositories"})})}),(0,e.jsx)(Ee.Z,{className:he().title_detail_branch,children:(0,e.jsx)(Ze.Z,{title:u.current.name,width:320})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:he().content_warpper,children:(0,e.jsxs)(l.Z,{form:L,layout:"vertical",className:he().product_form,children:[(0,e.jsx)(l.Z.Item,{label:"Branch",rules:[{required:!0,message:s({id:"product.please.enter.branch"})}],name:"name",help:F,validateStatus:xe,hasFeedback:X,children:(0,e.jsx)(pe.Z,{autoComplete:"auto",placeholder:s({id:"product.please.enter.branch"}),onBlur:function(R){return h(R)}})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.branch.desc"}),name:"description",children:(0,e.jsx)(pe.Z.TextArea,{placeholder:s({id:"product.please.enter.desc"}),rows:4})})]})}),(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:he().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),open:oe,onOk:function(){return _e()},onCancel:function(){return ae(!1)},width:390,maskClosable:!1,children:(0,e.jsx)("p",{children:s({id:"product.are.you.sure.you.delete.branch"},{data:ne.name})})})]})}),fr=function(u){var c,m,s,g=(0,t.YB)(),w=g.formatMessage,L=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),H={ws_id:L},ie=(0,a.useState)({}),Y=(0,i.Z)(ie,2),p=Y[0],O=Y[1],ee=(0,a.useState)(null),G=(0,i.Z)(ee,2),ue=G[0],J=G[1],te=(0,a.useRef)(null),F=(0,a.useRef)(null),k=(0,t.QT)(function(j){return(0,V._L)(j)},{defaultParams:[H],initialData:{data:[]},formatResult:function(x){return x}}),P=k.data.data,le=k.refresh,oe=k.run,ae=k.loading,de=(0,t.QT)(function(j){return(0,V.vS)(j)},{initialData:{data:[]},formatResult:function(x){return x},manual:!0}),A=de.data,xe=de.refresh,D=de.run,se=function(x){O(x)};(0,a.useEffect)(function(){if(P.length>0)if("id"in p){var j=P.findIndex(function(x){var ne=x.id;return ne===p.id});O(P[j])}else O(P[0]);else O({})},[P]);var C=function(){var j=(0,fe.Z)((0,y.Z)().mark(function x(ne){return(0,y.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:ne==="new"?le().then(function(h){O(h.data[0])}):oe({ws_id:L}).then(function(h){h.code===200&&D({repo_id:p.id,ws_id:L})});case 1:case"end":return S.stop()}},x)}));return function(ne){return j.apply(this,arguments)}}(),X=function(){var x;(x=te.current)===null||x===void 0||x.show("new")},q=function(x,ne){x===200?(O({}),ge.default.success(w({id:"operation.success"})),le()):(0,Ae.EV)(x,ne)},re=function(){var j=(0,fe.Z)((0,y.Z)().mark(function x(ne){var ye,S,h;return(0,y.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,V.cQ)({repo_id:ne.id});case 2:ye=E.sent,S=ye.code,h=ye.msg,q(S,h);case 6:case"end":return E.stop()}},x)}));return function(ne){return j.apply(this,arguments)}}(),B=function(){var x;(x=te.current)===null||x===void 0||x.show("edit",p)},z=function(x){var ne;(ne=F.current)===null||ne===void 0||ne.show("edit",x)},W=function(){var x;(x=F.current)===null||x===void 0||x.show("new",{})};return(0,a.useEffect)(function(){p.id!==void 0&&D({repo_id:p.id})},[p.id]),(0,e.jsxs)(Zt,{children:[(0,e.jsxs)(yt,{children:[(0,e.jsx)(bt,{children:(0,e.jsx)(Oe.Z,{type:"primary",onClick:X,children:(0,e.jsx)(t._H,{id:"product.new.repositories"})})}),(0,e.jsx)(Ct,{justify:"space-between",children:(0,e.jsxs)(Q.Z.Text,{children:[(0,e.jsx)(t._H,{id:"product.repositories"})," (",(P==null?void 0:P.length)&&"".concat(P==null?void 0:P.length),")"]})}),(0,e.jsx)(dr,{children:(0,e.jsx)(ce.Z,{className:he().all_store,children:P==null?void 0:P.map(function(j){return(0,e.jsx)(me.Z,{span:24,className:+p.id==+j.id?he().product_item_active:he().product_item,onClick:function(){return se(j)},onMouseEnter:function(){return J(j.id)},onMouseLeave:function(){return J(null)},children:(0,e.jsxs)(ce.Z,{justify:"space-between",children:[(0,e.jsx)(Ze.Z,{title:j.name,width:210,children:(0,e.jsx)(Q.Z.Text,{children:j.name})}),(0,e.jsx)(Ie.Z,{title:(0,e.jsx)(t._H,{id:"product.delete.this.repositories"}),onConfirm:function(){return re(j)},okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),children:(0,e.jsx)(K.Z,{className:ue===j.id?he().remove_active:he().remove})})]})},j.id)})})})]}),(0,e.jsxs)(wt,{children:[(0,e.jsxs)(ce.Z,{className:he().product_right_detail,align:"middle",children:[(0,e.jsx)(me.Z,{span:24,children:(0,e.jsxs)(ce.Z,{children:[(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:he().detail_item_row,children:[(0,e.jsxs)(Q.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.repositories"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:p.name})]})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:he().detail_item_row,children:[(0,e.jsx)(Q.Z.Text,{strong:!0,children:"GitUrl\uFF1A"}),(0,e.jsx)(Ze.Z,{title:p.git_url})]})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsxs)(ce.Z,{className:he().detail_item_row,children:[(0,e.jsxs)(Q.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.repositories.desc"}),"\uFF1A"]}),(0,e.jsx)(Ze.Z,{title:p.description})]})})]})}),P.length?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Pe.Z,{overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Re.Z,{children:(0,e.jsx)(Re.Z.Item,{onClick:B,children:(0,e.jsx)(t._H,{id:"product.edit.info"})})}),children:(0,e.jsx)(r.Z,{style:{cursor:"pointer",position:"absolute",right:0,top:5}})})}):null]}),(0,e.jsxs)(ce.Z,{className:he().right_branch_context,children:[(0,e.jsx)(ce.Z,{style:{width:"100%",height:62},children:(0,e.jsxs)(Q.Z.Text,{className:he().product_right_all_branch,children:[(0,e.jsx)(t._H,{id:"product.all.branch"})," (",((c=A.data)===null||c===void 0?void 0:c.length)&&"".concat((m=A.data)===null||m===void 0?void 0:m.length),")"]})}),(0,e.jsx)(ce.Z,{className:he().right_branch_context_wrapper,children:(0,e.jsxs)("div",{className:he().right_branch_context_box_father,children:[(s=A.data)===null||s===void 0?void 0:s.map(function(j){return(0,e.jsx)("div",{style:{width:"22%"},children:(0,e.jsxs)("div",{className:he().right_branch_context_box_child,onClick:function(){return z(j)},children:[(0,e.jsxs)(Ze.Z,{title:j.name,children:[(0,e.jsx)(Q.Z.Text,{className:he().right_branch_context_box_child_firstLine,children:j.name}),(0,e.jsx)("div",{style:{height:6}})]}),(0,e.jsxs)(Ze.Z,{title:j.description,children:[(0,e.jsx)(Q.Z.Text,{className:he().right_branch_context_box_child_secondLine,children:j.description}),(0,e.jsx)("div",{style:{height:6}})]})]})},j.id)}),P.length?(0,e.jsx)("div",{style:{width:"22%"},children:(0,e.jsx)("div",{className:he().right_branch_context_box_child,children:(0,e.jsx)("div",{className:he().right_branch_context_box_child_empty,children:(0,e.jsxs)("span",{onClick:W,children:[(0,e.jsx)(at.Z,{}),(0,e.jsx)("i",{children:(0,e.jsx)(t._H,{id:"product.new.branch"})})]})})})}):null]})})]})]}),ae&&(0,e.jsx)(gt,{children:(0,e.jsx)(De.Z,{spinning:ae})}),(0,e.jsx)(pr,{ref:te,onOk:C}),(0,e.jsx)(hr,{ref:F,current:p,onOk:xe})]})},_r=n(17508),mr=n.n(_r),vr=n(87415),jr=function(u){var c=u.match.params.ws_id,m=u.location,s=(0,a.useState)(m.query.t||"product"),g=(0,i.Z)(s,2),w=g[0],L=g[1],H=function(Y){L(Y),t.m8.push("/ws/".concat(c,"/product?t=").concat(Y))};return(0,e.jsx)(vr.mQ,{title:(0,e.jsxs)(T.Z,{activeKey:w,onChange:H,className:mr().tab_style,children:[(0,e.jsx)(T.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"product.manage"})},"product"),(0,e.jsx)(T.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"code.manage"})},"code")]}),children:w==="product"?(0,e.jsx)(cr,{}):(0,e.jsx)(fr,{ws_id:c})})}},8142:function(Te,He,n){"use strict";n.d(He,{VX:function(){return a},Ir:function(){return t},ry:function(){return Me},nM:function(){return De},Zf:function(){return ke},OV:function(){return pe},c0:function(){return Le},lk:function(){return Pe},$L:function(){return $e},YK:function(){return Re},ty:function(){return je},th:function(){return Ve},_L:function(){return me},E7:function(){return We},h4:function(){return ce},GW:function(){return Xe},cQ:function(){return Ie},fW:function(){return ze},xN:function(){return Q},h5:function(){return qe},yE:function(){return Oe},vS:function(){return y},Qj:function(){return fe},o_:function(){return Qe},NA:function(){return ge},ff:function(){return et}});var v=n(39428),T=n(3182),i=n(16917),a=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),t=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/",{method:"delete",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Me=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),De=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),ke=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/drag/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),pe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/product/drag/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Le=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/drag/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Pe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/drag/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),$e=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Re=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),je=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Ve=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/project/",{method:"delete",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),me=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/repository/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),We=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/repository/project/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),ce=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/repository/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Xe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/repository/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Ie=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/repository/",{method:"delete",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),ze=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/relation/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Q=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/relation/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),qe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/relation/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Oe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/relation/",{method:"delete",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),y=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/",{params:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),fe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),Qe=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/",{method:"put",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),ge=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/branch/",{method:"delete",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}(),et=function(){var l=(0,T.Z)((0,v.Z)().mark(function d(o){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.WY)("/api/sys/check/gitlab/",{method:"post",data:o}));case 1:case"end":return r.stop()}},d)}));return function(o){return l.apply(this,arguments)}}()}}]);
