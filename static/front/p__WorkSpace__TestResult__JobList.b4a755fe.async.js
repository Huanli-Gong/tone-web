(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1995],{59465:function(ut,Ae,t){"use strict";t.d(Ae,{Z:function(){return i}});var a=t(28991),f=t(67294),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},_e=Pe,rt=t(27029),te=function(n,V){return f.createElement(rt.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:V,icon:_e}))},de=f.forwardRef(te),i=de},1977:function(ut,Ae,t){"use strict";t.d(Ae,{Z:function(){return i}});var a=t(28991),f=t(67294),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},_e=Pe,rt=t(27029),te=function(n,V){return f.createElement(rt.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:V,icon:_e}))},de=f.forwardRef(te),i=de},15818:function(ut){ut.exports={result_tabs:"result_tabs___3M8jQ",result_tab_item:"result_tab_item___1ayzC",result_tab_nums:"result_tab_nums___2N6S9",result_tab_nums_active:"result_tab_nums_active___17csa",result_table_row:"result_table_row___1aOzW",offline_flag:"offline_flag___37ZAh",filter_form:"filter_form___1cc4s",column_circle_text:"column_circle_text___23RwV",result_state:"result_state___VKg3t",result_state_active:"result_state_active___237xX",run_modal:"run_modal___C45x-",search_input_style:"search_input_style___3jIGo",select_program:"select_program___3Cksf",data_list:"data_list___sS_6A",button:"button___2dU9J",delete_icon:"delete_icon___16xQa",data_title:"data_title___XQu0t",data_clear:"data_clear___3xOit",data_share:"data_share___1rAqo",share_icon:"share_icon___3IZS7",copy_link_target:"copy_link_target___jeDRx",data_refresh_filter:"data_refresh_filter___3MJwE",share_refresh:"share_refresh___2JNMv",add_time_icon:"add_time_icon___1s-sZ",stateColorFn:"stateColorFn___3cn_m",group_box:"group_box___2ivnF",current_group:"current_group___2Kz0N",disabled_group:"disabled_group___KGRZA",create_job_type:"create_job_type___1H2Y3",create_job_type_icon:"create_job_type_icon___2KWKa",create_job_type_text:"create_job_type_text___1zJc6",bottom_box:"bottom_box___1UdQe",more_job_del_bottom:"more_job_del_bottom___11fry",text_num:"text_num___2mneP",select_baseline:"select_baseline___2F6Mv",sel_server:"sel_server___1M0Vn",select_text:"select_text___1W5-E",result_container:"result_container___1PNgv"}},22928:function(ut,Ae,t){"use strict";t.d(Ae,{oG:function(){return rt},_U:function(){return de},tk:function(){return oe},D8:function(){return V}});var a=t(11849),f=t(39428),Pe=t(3182),_e=t(16917);function rt(E){return te.apply(this,arguments)}function te(){return te=(0,Pe.Z)((0,f.Z)().mark(function E(B){return(0,f.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.abrupt("return",(0,_e.WY)("/api/job/tag/",{params:B}));case 1:case"end":return ce.stop()}},E)})),te.apply(this,arguments)}function de(E){return i.apply(this,arguments)}function i(){return i=(0,Pe.Z)((0,f.Z)().mark(function E(B){return(0,f.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.abrupt("return",(0,_e.WY)("/api/job/tag/",{method:"POST",data:(0,a.Z)({},B)}));case 1:case"end":return ce.stop()}},E)})),i.apply(this,arguments)}function oe(E,B){return n.apply(this,arguments)}function n(){return n=(0,Pe.Z)((0,f.Z)().mark(function E(B,H){return(0,f.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.abrupt("return",(0,_e.WY)("/api/job/tag/",{method:"PUT",data:(0,a.Z)((0,a.Z)({},H),{tag_id:B})}));case 1:case"end":return Oe.stop()}},E)})),n.apply(this,arguments)}var V=function(){var E=(0,Pe.Z)((0,f.Z)().mark(function B(H){return(0,f.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.abrupt("return",(0,_e.WY)("/api/job/tag/",{method:"DELETE",data:H}));case 1:case"end":return Oe.stop()}},B)}));return function(H){return E.apply(this,arguments)}}()},54564:function(ut,Ae,t){"use strict";var a=t(20228),f=t(11382),Pe=t(47673),_e=t(4107),rt=t(49111),te=t(19650),de=t(57663),i=t(71577),oe=t(11849),n=t(39428),V=t(3182),E=t(9715),B=t(20526),H=t(2824),ce=t(57338),Oe=t(440),wt=t(20310),Zt=t(43358),St=t(34041),he=t(67294),At=t(50310),dt=t(12788),Ht=t(96486),fe=t.n(Ht),He=t(16917),Tt=t(20009),yt=t(24480),Y=t(85893),ct,Ct=St.Z.Option,Fe=(0,dt.ZP)(Oe.Z)(ct||(ct=(0,wt.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`])));Ae.Z=(0,he.forwardRef)(function(J,we){var je=(0,He.YB)(),pe=je.formatMessage,e=(0,Tt.UO)(),Ie=e.ws_id,lt=J.onOk,ft=J.allGroup,vt=B.Z.useForm(),it=(0,H.Z)(vt,1),Me=it[0],$e=(0,he.useState)(!1),Ke=(0,H.Z)($e,2),Ye=Ke[0],Ne=Ke[1],gt=(0,he.useState)(!1),Re=(0,H.Z)(gt,2),mt=Re[0],xe=Re[1],Ge=(0,he.useState)({}),ke=(0,H.Z)(Ge,2),Ee=ke[0],Xe=ke[1],qe=(0,he.useState)(!0),Ue=(0,H.Z)(qe,2),Ce=Ue[0],Qe=Ue[1],et=(0,he.useState)([]),Be=(0,H.Z)(et,2),tt=Be[0],X=Be[1],Dt=(0,he.useState)([]),ht=(0,H.Z)(Dt,2),be=ht[0],_t=ht[1],Rt=(0,he.useState)([]),jt=(0,H.Z)(Rt,2),pt=jt[0],$t=jt[1];(0,he.useImperativeHandle)(we,function(){return{show:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(!0),Xe(ne),Me.setFieldsValue(ne),kt()}}});var Bt=function(){var Ve=(0,V.Z)((0,n.Z)().mark(function ne(){var ae,q,P,Le;return(0,n.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,(0,At.MD)({page_size:9999,page_num:1,ws_id:Ie});case 2:ae=nt.sent,q=ae.data,P=ae.code,Le=ae.msg,P===200&&$t(q),Qe(!1),P!==200&&(0,yt.EV)(P,Le);case 9:case"end":return nt.stop()}},ne)}));return function(){return Ve.apply(this,arguments)}}();(0,he.useEffect)(function(){Bt()},[]),(0,he.useEffect)(function(){var Ve=fe().find(pt,"is_default"),ne=null;Ve&&(ne=Ve.id);var ae=null;be.length===1&&(ae=be[0]);var q=null;tt.length===1&&(q=tt[0].id);var P=Me.getFieldsValue();P.template=ne,P.productVersion=ae,P.project=q,Me.setFieldsValue(P)},[pt,be,tt]);var kt=function(){var ne=[],ae=[];try{ft.forEach(function(q,P){q&&fe().isArray(q.members)&&q.members.length&&(ne.push(q.members[0].product_version),q.members.forEach(function(Le){return ae.push({id:Le.project_id,name:Le.project_name})}))}),ne=fe().uniq(ne),ae=fe().uniqWith(ae,fe().isEqual),ae=ae.filter(function(q){return q.id!==void 0}),_t(ne),X(ae)}catch(q){console.log(q)}},Pt=function(){Me.resetFields(),Ne(!1),xe(!1)},Ut=function(){Ne(!0),Me.validateFields().then(function(){var ne=(0,V.Z)((0,n.Z)().mark(function ae(q){var P,Le;return(0,n.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:P=q.template,Le=fe().find(pt,{id:P}),lt((0,oe.Z)((0,oe.Z)({},q),{},{is_default:fe().get(Le,"is_default")}),Ee),Pt();case 4:case"end":return nt.stop()}},ae)}));return function(ae){return ne.apply(this,arguments)}}()).catch(function(ne){console.log(ne),Ne(!1)})},Mt=function(ne){var ae="",q=pt;if(ne==="template"){var P=fe().find(q,"is_default");P&&(ae=P.id)}return ne==="productVersion"&&(q=be.filter(function(Le){return Le}),q.length===1&&(ae=q[0])),ne==="project"&&(q=tt,q.length===1&&(ae=q[0].id)),ae},Lt=function(ne){var ae="",q=pt;return ne==="template"&&(ae=pe({id:"report.please.select.template"})),ne==="productVersion"&&(q=be.filter(function(P){return P}),ae=pe({id:"report.select.productVersion"})),ne==="project"&&(q=tt,ae=pe({id:"report.select.project"})),(0,Y.jsx)(St.Z,{showSearch:!0,allowClear:!0,placeholder:ae,optionFilterProp:"children",style:{width:"100%"},onChange:function(Le){var ot=Me.getFieldsValue();ot[ne]=Le,Me.setFieldsValue(ot)},showArrow:!0,filterOption:function(Le,ot){return ot.children.toLowerCase().indexOf(Le.toLowerCase())>=0},children:q.map(function(P){return ne==="productVersion"?(0,Y.jsx)(Ct,{value:P,children:P},P):(0,Y.jsx)(Ct,{value:P.id,children:P.name},P.id)})})};return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(f.Z,{spinning:Ce,children:(0,Y.jsx)(Fe,{title:(0,Y.jsx)(He._H,{id:"report.generate.report"}),width:"375",onClose:Pt,visible:mt,footer:(0,Y.jsx)("div",{style:{textAlign:"right"},children:(0,Y.jsxs)(te.Z,{children:[(0,Y.jsx)(i.Z,{onClick:Pt,children:(0,Y.jsx)(He._H,{id:"operation.cancel"})}),(0,Y.jsx)(i.Z,{type:"primary",disabled:Ye,onClick:Ut,children:(0,Y.jsx)(He._H,{id:"operation.ok"})})]})}),children:(0,Y.jsxs)(B.Z,{form:Me,layout:"vertical",initialValues:{template:Mt("template"),productVersion:Mt("productVersion"),project:Mt("project")},children:[(0,Y.jsx)(B.Z.Item,{label:(0,Y.jsx)(He._H,{id:"report.columns.name"}),name:"name",rules:[{required:!0,message:pe({id:"report.please.enter.name"})}],children:(0,Y.jsx)(_e.Z,{autoComplete:"auto",placeholder:pe({id:"report.please.enter.name"})})}),(0,Y.jsx)(B.Z.Item,{label:(0,Y.jsx)(He._H,{id:"report.select.template"}),name:"template",rules:[{required:!0}],children:Lt("template")}),(0,Y.jsx)(B.Z.Item,{label:(0,Y.jsx)(He._H,{id:"report.columns.product_version"}),name:"productVersion",children:Lt("productVersion")}),(0,Y.jsx)(B.Z.Item,{label:(0,Y.jsx)(He._H,{id:"report.columns.project"}),name:"project",children:Lt("project")}),(0,Y.jsx)(B.Z.Item,{label:(0,Y.jsx)(He._H,{id:"report.description.input"}),name:"description",children:(0,Y.jsx)(_e.Z.TextArea,{placeholder:pe({id:"report.description.placeholder"})})})]})})})})})},48248:function(ut,Ae,t){"use strict";t.r(Ae),t.d(Ae,{default:function(){return ua}});var a=t(11849),f=t(2824),Pe=t(18106),_e=t(73272),rt=t(49111),te=t(19650),de=t(20310),i=t(67294),oe=t(12788),n=t(16917),V=t(20009),E=t(8990),B=t(47673),H=t(4107),ce=t(88983),Oe=t(47933),wt=t(20136),Zt=t(55241),St=t(13062),he=t(71230),At=t(63185),dt=t(9676),Ht=t(402),fe=t(97272),He=t(28991),Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},yt=Tt,Y=t(27029),ct=function(l,v){return i.createElement(Y.Z,(0,He.Z)((0,He.Z)({},l),{},{ref:v,icon:yt}))},Ct=i.forwardRef(ct),Fe=Ct,J=t(58491),we=t(57254),je=i.createContext(null),pe=function(){return i.useContext(je)},e=t(85893),Ie,lt=`
    color: #1890FF;
`,ft=oe.ZP.span(Ie||(Ie=(0,de.Z)([`
    cursor: pointer;
    `,`
`])),function(T){var l=T.active;return l?lt:""}),vt=function(){var l=pe(),v=l.initialColumns,c=l.setInitialColumns,p=l.DEFAULT_COLUMNS_SET_DATA,u=(0,n.YB)(),w=i.useState(!0),h=(0,f.Z)(w,2),C=h[0],M=h[1],$=i.useState(!1),b=(0,f.Z)($,2),j=b[0],_=b[1],L=Object.entries(v),G=L.map(function(D){var m=(0,f.Z)(D,1),g=m[0];return g}),W=L.map(function(D){var m=(0,f.Z)(D,2),g=m[0],Z=m[1].disabled;if(!Z)return g}).filter(Boolean),Ze=i.useState(W),Q=(0,f.Z)(Ze,2),F=Q[0],I=Q[1];i.useEffect(function(){I(W),M(!!W.length&&W.length<L.length),_(W.length===L.length)},[v]);var Te=function(m){c(function(g){return Object.fromEntries(Object.entries(g).map(function(Z){var S=(0,f.Z)(Z,2),K=S[0],ie=S[1];return[K,(0,a.Z)((0,a.Z)({},ie),{},{disabled:!m.includes(K)})]}))},[])},ee=function(m){var g=m.target.checked?G:[];I(g),M(!1),_(m.target.checked),Te(g)},N=function(m){I(m),M(!!m.length&&m.length<L.length),_(m.length===L.length),Te(m)},le=i.useMemo(function(){return v?Object.entries(v).sort(function(D,m){return m[1].order-D[1].order}):[]},[v]);return(0,e.jsx)(Zt.Z,{placement:"bottom",content:(0,e.jsxs)(te.Z,{direction:"vertical",size:4,children:[(0,e.jsxs)(he.Z,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[(0,e.jsx)(dt.Z,{indeterminate:C,checked:j,onChange:ee,children:(0,e.jsx)(fe.Z.Text,{strong:!0,children:u.formatMessage({defaultMessage:"\u5217\u5C55\u793A",id:"ws.result.list.columns.state.title"})})}),(0,e.jsx)(fe.Z.Link,{strong:!0,onClick:function(){return c(p)},children:u.formatMessage({defaultMessage:"\u91CD\u7F6E",id:"ws.result.list.columns.state.reset"})})]}),(0,e.jsx)(dt.Z,{checked:!0,disabled:!0,children:u.formatMessage({id:"ws.result.list.id"})},"id"),(0,e.jsx)(dt.Z.Group,{value:F,onChange:N,children:(0,e.jsx)(te.Z,{direction:"vertical",size:4,children:le.map(function(D){var m=(0,f.Z)(D,1),g=m[0];return(0,e.jsx)(dt.Z,{value:g,disabled:["id"].includes(g),children:u.formatMessage({id:"ws.result.list.".concat(g)})},g)})})})]}),children:(0,e.jsx)(fe.Z.Text,{style:{cursor:"pointer"},children:(0,e.jsx)(Fe,{})})})},it=function(l){var v=(0,n.YB)(),c=v.formatMessage,p=l.pageQuery,u=l.setPageQuery,w=l.stateCount,h=l.selectionType,C=l.onSelectionChange,M=l.onFilterChange,$=l.filter,b=(0,n.md)(),j=p.state,_=i.useState(""),L=(0,f.Z)(_,2),G=L[0],W=L[1];i.useEffect(function(){M&&M($)},[$]);var Ze=[{name:c({id:"all"}),key:"all_job",val:void 0},{name:"Pending",key:"pending_job",val:"pending"},{name:"Running",key:"running_job",val:"running"},{name:"Complete",key:"success_job",val:"success"},{name:"Fail",key:"fail_job",val:"fail"}];return(0,e.jsxs)(he.Z,{justify:"space-between",style:{height:48,padding:"0 20px"},children:[(0,e.jsx)(te.Z,{size:"large",children:Ze.map(function(Q){return(0,e.jsx)(ft,{active:j===Q.val,onClick:function(){return u(function(I){return(0,a.Z)((0,a.Z)({},I),{},{state:Q.val,page_num:1})})},children:"".concat(Q.name,"(").concat(w?w[Q.key]:0,")")},Q.key)})}),(0,e.jsxs)(te.Z,{size:16,children:[(0,e.jsxs)(te.Z,{children:[(0,e.jsxs)(fe.Z.Text,{children:[(0,e.jsx)(n._H,{id:"ws.result.list.selection.function"}),"\uFF1A"]}),(0,e.jsxs)(Oe.ZP.Group,{onChange:function(F){var I=F.target;return C(I.value)},value:h,children:[(0,e.jsx)(Oe.ZP,{value:1,children:(0,e.jsx)(n._H,{id:"ws.result.list.report.and.analysis"})}),b.WsMemberOperateSelf()&&(0,e.jsx)(Oe.ZP,{value:2,children:(0,e.jsx)(n._H,{id:"ws.result.list.batch.delete"})})]})]}),(0,e.jsx)(vt,{}),(0,e.jsx)(H.Z.Search,{style:{width:160},allowClear:!0,value:G,onChange:function(F){var I=F.target;return W(I.value)},onPressEnter:function(){return u(function(F){return(0,a.Z)((0,a.Z)({},F),{},{search:G.replaceAll(" ",""),page_num:1})})},onSearch:function(F){return u(function(I){return(0,a.Z)((0,a.Z)({},I),{},{search:F.replaceAll(" ",""),page_num:1})})}}),(0,e.jsx)("div",{onClick:function(){return M(!$)},style:{cursor:"pointer"},children:$?(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(n._H,{id:"ws.result.list.collapse.filter"}),(0,e.jsx)(J.Z,{})]}):(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(n._H,{id:"ws.result.list.expand.filter"}),(0,e.jsx)(we.Z,{})]})})]})]})},Me=it,$e=t(32059),Ke=t(86582),Ye=t(62350),Ne=t(24565),gt=t(89032),Re=t(15746),mt=t(71153),xe=t(60331),Ge=t(34792),ke=t(48086),Ee=t(39428),Xe=t(3182),qe=t(24480),Ue=t(86504),Ce=t(22263),Qe=t(72529),et=t(99833),Be=t(77764),tt=t(96486),X=t.n(tt),Dt=t(86213),ht=t(57663),be=t(71577),_t=t(8812),Rt,jt,pt,$t,Bt,kt=oe.ZP.div(Rt||(Rt=(0,de.Z)([`
    border-top: 1px solid rgba(0,0,0, 0.06);
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: 0 -1px 2px 0 rgba(0,0,0,0.03);
    background-color: #fff;
    z-index: 99;
`]))),Pt=oe.ZP.div(jt||(jt=(0,de.Z)([`
    border-top: 2px solid #1890ff;
    padding-left: 20px;
    font-weight: 700;
    color: #000;
    opacity: .85;
    height: 38px;
    line-height: 38px;
    border-bottom: 1px solid rgba(0,0,0,.06);
`]))),Ut=oe.ZP.div(pt||(pt=(0,de.Z)([`
    height: 68px;
    line-height: 22px;
    background: #fff;
    width: 100%;
    display: flex;
`]))),Mt=oe.ZP.div.attrs(function(T){return{style:{width:"calc(100% - ".concat((T==null?void 0:T.width)||0,"px)")}}})($t||($t=(0,de.Z)([`
    padding: 8px 20px;
    height: 100%;
    overflow-x: scroll;
    overflow-y: hidden;

    &>.ant-row {
        margin-bottom: 8px;
    }
`]))),Lt=oe.ZP.div(Bt||(Bt=(0,de.Z)([`
    height: 100%;
    width: 212px;
    background: #fff;
    box-shadow: -3px 0 2px 0 rgba(0,0,0,.05);
    padding: 0 10px;
    display: flex;
    align-items: center;
`]))),Ve=function(l,v){return(0,e.jsx)(he.Z,{wrap:!1,children:l.map(function(c){return(0,e.jsx)(xe.Z,{closable:!0,style:{fontSize:14,backgroundColor:"rgba(0,0,0,.04)"},onClose:function(){return v(function(u){return u.filter(function(w){return w!==c})})},children:c},c)})})},ne=function(l){var v=l.selectedRowKeys,c=l.setSelectedRowKeys,p=l.onOk,u=i.useRef(null),w=i.useMemo(function(){return v!=null&&v.length?"\uFF08".concat(v.length,"\uFF09"):""},[v]),h=i.useState(!1),C=(0,f.Z)(h,2),M=C[0],$=C[1],b=function(){if(!!u.current){var _=u.current,L=_.offsetWidth,G=_.scrollWidth;$(L<G)}};return i.useEffect(function(){return b(),window.addEventListener("resize",b),function(){window.removeEventListener("resize",b)}},[v]),(0,e.jsxs)(kt,{children:[(0,e.jsxs)(Pt,{children:["\u5220\u9664\u680F",w]}),(0,e.jsxs)(Ut,{children:[(0,e.jsxs)(Mt,{width:212,ref:u,children:[Ve(v.filter(function(j,_){return _%2==0}),c),Ve(v.filter(function(j,_){return _%2==1}),c)]}),(0,e.jsx)(Lt,{children:(0,e.jsxs)(te.Z,{size:18,style:{width:"100%",justifyContent:"end"},children:[M&&(0,e.jsx)(_t.Z,{style:{cursor:"pointer"},onClick:function(){var _;return(_=u.current)===null||_===void 0?void 0:_.scrollTo({left:u==null?void 0:u.current.scrollWidth})}}),(0,e.jsxs)(te.Z,{align:"center",children:[(0,e.jsx)(be.Z,{onClick:function(){return c([])},children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(Ne.Z,{title:(0,e.jsx)(n._H,{id:"delete.prompt"}),okText:(0,e.jsx)(n._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),onConfirm:p,placement:"topLeft",children:(0,e.jsx)(be.Z,{children:(0,e.jsx)(n._H,{id:"ws.result.list.batch.delete"})})})]})]})})]})]})},ae=ne,q=t(7253),P=t.n(q),Le=t(31298),ot=t(54549),nt=t(54564),Vt=t(38924),pn=t(1870),da=t(71194),gn=t(50146),ca=t(43358),st=t(34041),fa=t(13254),Et=t(14277),va=t(20228),Jt=t(11382),ma=t(9715),Gt=t(20526),_n=t(22928),jn=[{id:"keep_three_months",name:"\u4FDD\u7559\u4E09\u4E2A\u6708"},{id:"keep_six_months",name:"\u4FDD\u7559\u516D\u4E2A\u6708"},{id:"keep_one_year",name:"\u4FDD\u7559\u4E00\u5E74"}],Qt=jn.map(function(T){return T.id}),xn=(0,i.forwardRef)(function(T,l){var v=(0,n.YB)(),c=v.formatMessage,p=T.ws_id,u=(0,i.useState)(!1),w=(0,f.Z)(u,2),h=w[0],C=w[1],M=(0,i.useState)(!1),$=(0,f.Z)(M,2),b=$[0],j=$[1],_=(0,i.useState)([]),L=(0,f.Z)(_,2),G=L[0],W=L[1],Ze=i.useState({page_num:1,page_size:20}),Q=(0,f.Z)(Ze,2),F=Q[0],I=Q[1],Te=i.useState([]),ee=(0,f.Z)(Te,2),N=ee[0],le=ee[1],D=(0,i.useState)([]),m=(0,f.Z)(D,2),g=m[0],Z=m[1],S=Gt.Z.useForm(),K=(0,f.Z)(S,1),ie=K[0],k=function(){ie.resetFields(),C(!1),j(!1),W([]),le([]),Z([])};(0,i.useImperativeHandle)(l,function(){return{show:function(z){var se=z.data,A=se===void 0?[]:se;C(!0),W(A),I({page_num:1,page_size:20})}}});var ve=(0,n.QT)(function(){return(0,_n.oG)((0,a.Z)({ws_id:p},F))},{initialData:[],formatResult:function(z){return z},refreshDeps:[F],ready:h}),re=ve.data,ge=ve.loading,me=function(z){var se=z.target,A=se.clientHeight,R=se.scrollHeight,y=se.scrollTop;if(A+y===R){var o=F.page_num+1;o<=(re==null?void 0:re.total_page)&&I(function(r){return(0,a.Z)((0,a.Z)({},r),{},{page_num:r.page_num+1})})}};i.useEffect(function(){if(re!=null&&re.data){var O=re==null?void 0:re.data.filter(function(z){return z.source_tag==="\u7CFB\u7EDF\u6807\u7B7E"});le(function(z){return z.concat(O)})}},[re]);var De=function(){j(!1),ie.validateFields().then(function(){var z=(0,Xe.Z)((0,Ee.Z)().mark(function se(A){var R,y,o,r;return(0,Ee.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return R=(0,a.Z)((0,a.Z)({},A),{},{ws_id:p,job_id_list:G}),s.next=3,(0,E.fW)(R);case 3:y=s.sent,o=y.code,r=y.msg,o===200?(k(),T.callback({data:"ok"})):ke.default.error(r||c({id:"request.create.failed"}));case 7:case"end":return s.stop()}},se)}));return function(se){return z.apply(this,arguments)}}())},Je=function(){k()},ue=g.filter(function(O){return Qt.indexOf(O.label)>-1});return(0,e.jsx)(gn.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)(n._H,{id:"ws.result.list.batch.add.tag.jobs"}),(0,e.jsx)("span",{style:{fontSize:"12px"},children:(0,e.jsx)(n._H,{id:"ws.result.list.only.add.system.tag"})})]}),open:h,maskClosable:!1,onCancel:function(){!b&&Je()},width:600,destroyOnClose:!0,footer:[(0,e.jsx)(be.Z,{onClick:Je,disabled:b,children:(0,e.jsx)(n._H,{id:"operation.cancel"})},"back"),(0,e.jsx)(e.Fragment,{children:ue.length?(0,e.jsx)(Ne.Z,{title:c({id:"ws.result.details.keep.time.job.tag"},{data:ue[0].label}),onConfirm:De,okText:(0,e.jsx)(n._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),placement:"bottomRight",onCancel:function(){return j(!1)},children:(0,e.jsx)(be.Z,{onClick:function(){return j(!0)},type:"primary",children:(0,e.jsx)(n._H,{id:"operation.ok"})})}):(0,e.jsx)(be.Z,{onClick:De,type:"primary",children:(0,e.jsx)(n._H,{id:"operation.ok"})},"submit")})],children:(0,e.jsx)("div",{children:(0,e.jsx)(Gt.Z,{form:ie,labelCol:{span:4},wrapperCol:{span:16},children:(0,e.jsx)(Gt.Z.Item,{label:(0,e.jsx)(n._H,{id:"ws.result.details.job.tag"}),name:"tag_id",rules:[{required:!0,message:c({id:"please.select"})}],children:(0,e.jsx)(st.Z,{mode:"multiple",loading:ge,size:"small",onChange:function(z,se){var A=(se==null?void 0:se.map(function(R){return{value:R.value,label:R.label.props.children}}))||[];Z(A)},tagRender:function(z){var se,A,R=z.label,y=z.closable,o=z.onClose,r=z.value;return(0,e.jsx)(xe.Z,{color:(se=R.props)===null||se===void 0?void 0:se.color,closable:y,onClose:o,style:{marginRight:3},children:((A=R.props)===null||A===void 0?void 0:A.children)||r})},allowClear:!0,onPopupScroll:me,getPopupContainer:function(z){return z.parentNode},onSearch:X().debounce(function(O){le([]),I({page_num:1,page_size:20,name:O})},300),filterOption:!1,defaultActiveFirstOption:!1,notFoundContent:ge?(0,e.jsx)(Jt.Z,{}):(0,e.jsx)(Et.Z,{image:Et.Z.PRESENTED_IMAGE_SIMPLE}),options:N.map(function(O){var z=g.filter(function(R){return Qt.indexOf(R.label)>-1}),se=Qt.includes(O.name)&&z.length?O.name!==z[0].label:!1,A=se?(0,e.jsx)("span",{style:{color:"#bfbfbf"},children:O.name}):O.name;return{value:O.id,label:(0,e.jsx)(xe.Z,{color:O.tag_color,children:A}),disabled:se}})})})})})})}),bn=xn,Zn=function(T){var l=(0,n.YB)(),v=l.formatMessage,c=T.selectedChange,p=T.allSelectRowData,u=T.allSelectedRowKeys,w=T.callback,h=(0,V.UO)(),C=h.ws_id,M=(0,n.md)(),$=(0,i.useRef)(null),b=(0,i.useState)(!1),j=(0,f.Z)(b,2),_=j[0],L=j[1],G=(0,i.useState)([]),W=(0,f.Z)(G,2),Ze=W[0],Q=W[1],F=(0,i.useState)([]),I=(0,f.Z)(F,2),Te=I[0],ee=I[1],N=(0,i.useState)({}),le=(0,f.Z)(N,2),D=le[0],m=le[1],g=(0,i.useRef)(null),Z=(0,i.useRef)(null),S=function(){var y=document.querySelector("#job_group li"),o=document.getElementById("job_group");if(y&&o){var r=y.clientWidth+1,d=o.clientWidth;r>d&&L(!0)}};(0,i.useEffect)(function(){return window.addEventListener("resize",S),function(){window.removeEventListener("resize",S)}},[]),(0,i.useEffect)(function(){S()},[p]);var K=function(){c()},ie=function(y){var o;y!=="test_report/report"&&n.m8.push({pathname:"/ws/".concat(C,"/").concat(y),state:(o={},(0,$e.Z)(o,"".concat(C,"-compareData"),JSON.stringify([])),(0,$e.Z)(o,"".concat(C,"-noGroupJobData"),JSON.stringify(p)),(0,$e.Z)(o,"".concat(C,"-originType"),"test_result"),o)})},k=function(y){c(y,!1)},ve=function(){if($.current){var y=$.current.getScrollLeft();return y}},re=function(){var y=document.getElementById("job_group"),o=y.clientWidth;if($.current){var r=ve();$.current.scrollLeft(r+o-325)}},ge={width:"100%"};(0,i.useEffect)(function(){var R=[],y=[];p.forEach(function(o,r){r%2==0&&R.push(o),r%2==1&&y.push(o)}),Q(R),ee(y)},[p]);var me=function(){var R=(0,Xe.Z)((0,Ee.Z)().mark(function y(o){var r,d,s,x;return(0,Ee.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,E.J1)(o);case 2:r=U.sent,d=r.data,s=r.code,x=r.msg,s===200?m(d):(0,qe.EV)(s,x);case 7:case"end":return U.stop()}},y)}));return function(o){return R.apply(this,arguments)}}(),De=function(){var y,o={func_data:{base_job:[],compare_job:[]},perf_data:{base_job:[],compare_job:[]},group_num:1};X().isArray(p)&&p.forEach(function(r){r.test_type==="\u529F\u80FD\u6D4B\u8BD5"&&o.func_data.base_job.push(r.id),r.test_type==="\u6027\u80FD\u6D4B\u8BD5"&&o.perf_data.base_job.push(r.id),r.test_type==="functional"&&o.func_data.base_job.push({is_job:0,obj_id:r.id,baseline_type:"func"}),r.test_type==="performance"&&o.perf_data.base_job.push({is_job:0,obj_id:r.id,baseline_type:"perf"})}),me(o),(y=g.current)===null||y===void 0||y.show(p)},Je=function(){var R=(0,Xe.Z)((0,Ee.Z)().mark(function y(o){var r;return(0,Ee.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.k3)(o);case 2:return r=s.sent,s.abrupt("return",r);case 4:case"end":return s.stop()}},y)}));return function(o){return R.apply(this,arguments)}}(),ue=function(){var R=(0,Xe.Z)((0,Ee.Z)().mark(function y(o){var r;return(0,Ee.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.gQ)(o);case 2:return r=s.sent,s.abrupt("return",r);case 4:case"end":return s.stop()}},y)}));return function(o){return R.apply(this,arguments)}}(),O=function(){var y=p.length?p[0].product_version:"Group1",o={id:+new Date,members:p,name:"Group1",product_version:y,type:"job"};return o},z=function(){var y=[],o=O(),r=[],d=X().get(o,"members");d=X().isArray(d)?d:[],d=d.filter(function(U){return U});var s=o.type==="baseline";d.forEach(function(U){var ze=U.server_provider;s||r.push({is_baseline:0,obj_id:U.id,server_provider:ze}),s&&r.push({is_baseline:1,obj_id:U.id,server_provider:ze,baseline_type:U.test_type==="functional"?"func":"perf"})});var x={tag:o.product_version,base_objs:r},Se={base_group:x,compare_groups:y};return Se},se=function(y){var o=D.func_suite_dic||{},r=D.perf_suite_dic||{},d=0,s=Object.keys(o)||[],x=Object.keys(r)||[],Se=[],U=[];U.push({members:p});var ze={func_suite_dic:(0,Vt.wb)(o,U,d,s,Se),perf_suite_dic:(0,Vt.wb)(r,U,d,x,Se)},zt=(0,Vt.LN)(ze),ye=z();Promise.all([ue(ye),Je(zt)]).then(function(We){if(X().get(We[0],"code")===200&&X().get(We[1],"code")===200){n.m8.push({pathname:"/ws/".concat(C,"/test_create_report"),state:{environmentResult:We[0].data,baselineGroupIndex:0,allGroupData:[O()],testDataParam:X().cloneDeep(ze),domainGroupResult:We[1].data,compareResult:We[0].data,compareGroupData:ye,saveReportData:y}});return}if(We[0].code===1358){ke.default.error(ke.default.error(v({id:"ws.result.list.please.add.comparison.group"})));return}We[1].code!==200&&ke.default.error(We[1].msg)}).catch(function(We){ke.default.error(ke.default.error(v({id:"request.failed"}))),console.log(We)})},A=function(){var y=!1;if(X().isArray(p)){var o=X().reduce(p,function(r,d){var s=X().get(d,"product_version"),x=X().get(d,"product_id");return r.push({product_version:s,product_id:x}),r},[]);y=X().uniqWith(o,X().isEqual).length>1}return y};return(0,e.jsxs)("div",{className:P().job_compare,style:{display:p.length?"block":"none"},children:[(0,e.jsxs)("div",{className:P().title,children:[(0,e.jsx)(n._H,{id:"ws.result.list.compare.bar"}),(0,e.jsxs)("span",{children:["\uFF08",p.length,"\uFF09"]}),"  ",(0,e.jsx)(Zt.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)(n._H,{id:"ws.result.list.combining.rule"}),(0,e.jsx)("div",{children:(0,e.jsx)(n._H,{id:"ws.result.list.top.ranked"})})]}),placement:"right",children:(0,e.jsx)(pn.Z,{className:P().question_icon})})]}),(0,e.jsxs)("div",{className:P().job_group,id:"job_group",children:[(0,e.jsx)(Le.$B,{style:ge,ref:$,children:(0,e.jsx)("ul",{id:"box",children:(0,e.jsxs)("li",{children:[(0,e.jsx)("div",{className:P().job_item,children:Ze.map(function(R){return(0,e.jsx)(Ne.Z,{title:(0,e.jsx)(n._H,{id:"delete.prompt"}),okText:(0,e.jsx)(n._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),onConfirm:X().partial(k,R),placement:"topLeft",children:(0,e.jsxs)("span",{className:P().job_item_span,children:[(0,e.jsx)("span",{children:R.id}),(0,e.jsx)(ot.Z,{className:P().delete})]})},R.id)})}),(0,e.jsx)("div",{className:P().job_item,children:Te.map(function(R){return(0,e.jsx)(Ne.Z,{title:(0,e.jsx)(n._H,{id:"delete.prompt"}),okText:(0,e.jsx)(n._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),onConfirm:X().partial(k,R),placement:"topLeft",children:(0,e.jsxs)("span",{className:P().job_item_span,children:[R.id,(0,e.jsx)(ot.Z,{className:P().delete})]})},R.id)})})]})})}),(0,e.jsx)("div",{className:P().operate,children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(_t.Z,{onClick:re,style:{opacity:_?1:0,marginLeft:16,marginRight:8}}),(0,e.jsx)(be.Z,{onClick:K,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(n.Nv,{accessible:M.IsWsSetting(),children:(0,e.jsx)(be.Z,{type:"primary",onClick:X().partial(De),disabled:A(),children:(0,e.jsx)(n._H,{id:"ws.result.list.create.report"})})}),(0,e.jsx)(be.Z,{type:"primary",onClick:X().partial(ie,"test_analysis/compare"),children:(0,e.jsx)(n._H,{id:"ws.result.list.compare.analysis"})}),(0,e.jsx)(n.Nv,{accessible:M.loginBtn(),children:(0,e.jsx)(be.Z,{onClick:function(){return Z.current.show({data:u})},children:(0,e.jsx)(n._H,{id:"ws.result.list.batch.add.tag.jobs"})})})]})}),(0,e.jsx)(nt.Z,{ref:g,onOk:se,allGroup:[O()]}),(0,e.jsx)(bn,{ref:Z,ws_id:C,callback:w})]})]})},Sn=t(50130),yn=t(28686),Cn=t(15818),Rn=t.n(Cn),En=t(85450),Ot=t(10753),Xt,qt,On=oe.ZP.div(Xt||(Xt=(0,de.Z)([`
    background: #1890FF;
    color: #fff;
    padding: 0px 4px;
    height: 20px;
    margin-right: 6px;
    font-size: 12px;
    display: inline-block;
    line-height: 20px;
    text-align: center;
    border-radius: 2px;
`]))),wn=oe.ZP.div(qt||(qt=(0,de.Z)([`
    border-top: 1px solid rgba(0,0,0, 0.06);
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: 0 -1px 2px 0 rgba(0,0,0,0.03);
    background-color: #fff;
    z-index: 99;
`]))),Tn={page_num:1,page_size:20},Dn=function(l){var v=pe(),c=v.initialColumns,p=(0,n.YB)(),u=p.formatMessage,w=(0,n.Kd)()==="en-US",h=l.pageQuery,C=l.setPageQuery,M=l.radioValue,$=M===void 0?1:M,b=l.setRadioValue,j=l.countRefresh,_=l.dataSource,L=l.setDataSource,G=l.listRefresh,W=l.loading,Ze=l.callback,Q=(0,V.UO)(),F=Q.ws_id,I=(0,n.md)(),Te=i.useState([]),ee=(0,f.Z)(Te,2),N=ee[0],le=ee[1],D=i.useState([]),m=(0,f.Z)(D,2),g=m[0],Z=m[1],S=i.useRef(null),K=i.useState({}),ie=(0,f.Z)(K,2),k=ie[0],ve=ie[1];i.useEffect(function(){ve({})},[h]),i.useEffect(function(){return function(){Z([]),le([]),b(1)}},[h.tab]),i.useEffect(function(){return function(){C(function(o){return(0,a.Z)((0,a.Z)((0,a.Z)({},o),Tn),{},{ws_id:F})}),ve({})}},[C,F]),i.useEffect(function(){F&&De()},[F]);var re=function(){var o=(0,Xe.Z)((0,Ee.Z)().mark(function r(d){var s,x,Se,U,ze;return(0,Ee.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(s=d.collection,x=d.id,s){ye.next=7;break}return ye.next=4,(0,E.dN)({job_id:x});case 4:ye.t0=ye.sent,ye.next=10;break;case 7:return ye.next=9,(0,E.pi)({job_id:x});case 9:ye.t0=ye.sent;case 10:if(Se=ye.t0,U=Se.msg,ze=Se.code,ze===200){ye.next=15;break}return ye.abrupt("return",(0,qe.EV)(ze,U));case 15:L(function(We){return(0,a.Z)((0,a.Z)({},We),{},{data:We.data.map(function(at){return x!==at.id?at:(0,a.Z)((0,a.Z)({},at),{},{collection:!s})})})}),j();case 17:case"end":return ye.stop()}},r)}));return function(d){return o.apply(this,arguments)}}(),ge=function(){var o=(0,Xe.Z)((0,Ee.Z)().mark(function r(d){var s,x,Se,U,ze,zt,ye;return(0,Ee.Z)().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return s=d.id,at.next=3,(0,E.yi)({job_id:s});case 3:if(x=at.sent,Se=x.code,U=x.msg,Se===200){at.next=8;break}return at.abrupt("return",(0,qe.EV)(Se,U));case 8:ze=N.filter(function(Nt){return Number(Nt)!==Number(s)}),zt=g.filter(function(Nt){return Nt&&Number(Nt.id)!==Number(s)}),le(ze),Z(zt),ke.default.success(u({id:"operation.success"})),ye=Math.ceil(((_==null?void 0:_.total)-1)/h.page_size),ye<h.page_num?C((0,a.Z)((0,a.Z)({},h),{},{page_num:ye||1})):G(),j();case 16:case"end":return at.stop()}},r)}));return function(d){return o.apply(this,arguments)}}(),me=[I.IsWsSetting()&&{title:"",key:"collection",width:30,align:"center",fixed:"left",className:"collection_star result_job_hover_span",render:function(r){return(0,e.jsx)("div",{onClick:function(){return re(r)},children:r.collection?(0,e.jsx)(Ue.Z,{className:"is_collection_star",style:{color:"#F7B500"}}):(0,e.jsx)(Ce.Z,{className:"no_collection_star"})})}},{title:"Job ID",key:"id",fixed:"left",width:80,ellipsis:{showTitle:!1},className:"result_job_hover_span",render:function(r,d){return(0,e.jsx)("span",{onClick:function(){return(0,qe.N1)("/ws/".concat(F,"/test_result/").concat(d.id))},children:d.id})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.name"}),dataIndex:"name",width:200,ellipsis:{showTitle:!1},className:"result_job_hover_span",render:function(r,d){return(0,e.jsxs)(Ot.K,{ellipsis:{tooltip:(0,e.jsx)("span",{children:r||"-"})},children:[d.created_from==="offline"&&(0,e.jsx)(On,{children:(0,e.jsx)(n._H,{id:"ws.result.list.offline"})}),(0,e.jsx)(fe.Z.Link,{className:"result_job_hover_span",target:"_blank",href:"/ws/".concat(F,"/test_result/").concat(d.id),children:r})]})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.state"}),dataIndex:"state",width:120,render:function(r,d){return(0,e.jsx)(Qe.JQ,(0,a.Z)({},d))}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.tag_list"}),dataIndex:"tag_list",width:188,ellipsis:{showTitle:!1},render:function(r,d){var s;return(0,e.jsx)(Be.Z,{list:(d==null||(s=d.tag_list)===null||s===void 0?void 0:s.map(function(x){return(0,e.jsx)(xe.Z,{color:x.tag_color,children:x.name},x.name)}))||[]})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.test_type"}),width:w?140:80,dataIndex:"test_type",ellipsis:{showTitle:!1},render:function(r){var d=(0,qe.SE)(r);return(0,e.jsx)(n._H,{id:"".concat(d,".test"),defaultMessage:r})}},{title:(0,e.jsx)(et.f,{placement:"bottomLeft",title:(0,e.jsx)(n._H,{id:"ws.result.list.test_type.Tootip"}),desc:(0,e.jsxs)("ul",{style:{paddingInlineStart:"inherit",paddingTop:4,marginBottom:4,paddingLeft:0},children:[(0,e.jsx)("li",{children:(0,e.jsx)(n._H,{id:"ws.result.list.test_type.desc1"})}),(0,e.jsx)("li",{children:(0,e.jsx)(n._H,{id:"ws.result.list.test_type.desc2"})})]})}),dataIndex:"test_result",width:140,render:function(r,d){var s={};try{s=JSON.parse(r)}catch(x){console.log("JSON\u683C\u5F0F\u4E0D\u5BF9")}return X().isNull(s)?(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(Re.Z,{span:8,style:{color:"#1890FF"},children:"-"}),(0,e.jsx)(Re.Z,{span:8,style:{color:"#52C41A"},children:"-"}),(0,e.jsx)(Re.Z,{span:8,style:{color:"#FF4D4F"},children:"-"})]}):(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(Re.Z,{span:8,style:{color:"#1890FF"},children:s.total||"-"}),(0,e.jsx)(Re.Z,{span:8,style:{color:"#52C41A"},children:s.pass||"-"}),(0,e.jsx)(Re.Z,{span:8,style:{color:"#FF4D4F"},children:s.fail||"-"})]})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.project_id"}),width:120,dataIndex:"project_name",ellipsis:{showTitle:!1},render:function(r){return(0,e.jsx)(Ot.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.product_version"}),width:120,dataIndex:"product_version",ellipsis:{showTitle:!1},render:function(r){return(0,e.jsx)(Ot.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.creators"}),width:80,ellipsis:{showTitle:!1},dataIndex:"creator_name",render:function(r){return(0,e.jsx)(Ot.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.start_time"}),width:180,dataIndex:"start_time",ellipsis:{showTitle:!1},sorter:!0,sortOrder:k==null?void 0:k.start_time,render:function(r){return(0,e.jsx)(Ot.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,e.jsx)(n._H,{id:"ws.result.list.completion_time"}),width:180,ellipsis:{showTitle:!1},dataIndex:"end_time",render:function(r){return(0,e.jsx)(Ot.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),width:170,ellipsis:{showTitle:!1},key:"operation",fixed:"right",render:function(r){var d={color:"#ccc",cursor:"no-drop"},s={color:"#1890FF",cursor:"pointer"};return(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(n.Nv,{accessible:I.IsWsSetting(),children:(0,e.jsx)("span",{onClick:r.created_from==="offline"?void 0:function(){var x;return(x=S.current)===null||x===void 0?void 0:x.show(r)},children:(0,e.jsx)(fe.Z.Text,{style:r.created_from==="offline"?d:s,children:(0,e.jsx)(n._H,{id:"operation.rerun"})})})}),(0,e.jsx)(n.Nv,{accessible:I.WsTourist(),children:(0,e.jsx)(n.Nv,{accessible:I.WsMemberOperateSelf(r.creator),fallback:(0,e.jsx)("span",{onClick:function(){return(0,qe.WR)()},children:(0,e.jsx)(fe.Z.Text,{style:s,children:(0,e.jsx)(n._H,{id:"operation.delete"})})}),children:(0,e.jsx)(Ne.Z,{title:(0,e.jsx)(n._H,{id:"delete.prompt"}),onConfirm:function(){return ge(r)},okText:(0,e.jsx)(n._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),children:(0,e.jsx)(fe.Z.Text,{style:s,children:(0,e.jsx)(n._H,{id:"operation.delete"})})})})}),(0,e.jsx)(yn.Z,{dreType:"left",ws_id:F,jobInfo:r,origin:"jobList"})]})}}],De=i.useCallback(function(){le([]),Z([]),b(1)},[]),Je=function(r,d){if(!r){De();return}var s=X().cloneDeep(N),x=X().cloneDeep(g);d?(s=[].concat((0,Ke.Z)(s),[r.id]),x=[].concat((0,Ke.Z)(x),[r])):(s=s.filter(function(Se){return Number(Se)!==Number(r.id)}),x=x.filter(function(Se){return Se&&Number(Se.id)!==Number(r.id)})),le(s),Z(x)},ue=function(r){var d=X().isArray(r)?r:[],s=[];d.forEach(function(x){return s.push(x.id)}),le([].concat((0,Ke.Z)(N),s)),Z([].concat((0,Ke.Z)(g),(0,Ke.Z)(d)))},O=function(r){var d=X().isArray(r)?r:[],s=[];d.forEach(function(x){return s.push(x.id)}),le(X().difference(N,s)),Z(X().differenceBy(g,d,"id"))},z={selectedRowKeys:N,onSelect:Je,preserveSelectedRowKeys:!1,hideSelectAll:$===1,onSelectAll:function(r,d,s){r?ue(s):O(s)}},se=function(){var o=(0,Xe.Z)((0,Ee.Z)().mark(function r(){var d,s,x;return(0,Ee.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(N.length){U.next=2;break}return U.abrupt("return");case 2:return U.next=4,(0,E.yi)({job_id_li:N});case 4:if(d=U.sent,s=d.code,x=d.msg,s===200){U.next=10;break}return(0,qe.EV)(s,x),U.abrupt("return");case 10:De(),ke.default.success(u({id:"operation.success"})),C(function(ze){return(0,a.Z)((0,a.Z)({},ze),{},{page_num:Math.ceil(((_==null?void 0:_.total)-N.length)/ze.page_size)||1})}),j();case 14:case"end":return U.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),A={padding:"0 16px"};N.length&&(A={padding:"0 16px 106px"});var R=function(r){switch(r.order){case"descend":L(function(d){return(0,a.Z)((0,a.Z)({},d),{},{data:d==null?void 0:d.data.sort(function(s,x){return s.start_time<x.start_time?1:-1})})});break;case"ascend":L(function(d){return(0,a.Z)((0,a.Z)({},d),{},{data:d==null?void 0:d.data.sort(function(s,x){return s.start_time>x.start_time?1:-1})})});break;default:break}},y=me.filter(function(o){var r=o.dataIndex,d=o.key;if(d)return o;if(c[r]){var s;if(!((s=c[r])!==null&&s!==void 0&&s.disabled))return o}});return(0,e.jsxs)(he.Z,{style:A,children:[(0,e.jsx)(En.sL,{rowKey:"id",columns:y,refreshDeps:[I,F,w,k,c,_],name:"test-job-list",loading:W,dataSource:_==null?void 0:_.data,pagination:!1,rowClassName:Rn().result_table_row,rowSelection:z,onChange:function(r,d,s){var x=s.field,Se=s.order;ve(function(U){return(0,a.Z)((0,a.Z)({},U),{},(0,$e.Z)({},x,Se))}),R(s)}}),!W&&(0,e.jsx)(Dt.Z,{total:_==null?void 0:_.total,largePage:!0,currentPage:h==null?void 0:h.page_num,pageSize:h==null?void 0:h.page_size,onPageChange:function(r,d){return C(function(s){return(0,a.Z)((0,a.Z)({},s),{},{page_num:r,page_size:d})})}}),$===2&&!!N.length&&(0,e.jsx)(ae,{selectedRowKeys:N,setSelectedRowKeys:le,onOk:se}),$===1&&!!N.length&&(0,e.jsx)(wn,{children:(0,e.jsx)(Zn,{radioType:$,selectedChange:Je,allSelectedRowKeys:N,allSelectRowData:g,callback:function(){De(),Ze()}})}),(0,e.jsx)(Sn.Z,{ref:S})]})},Pn=Dn,ha=t(48736),en=t(27049),xt=t(93224),pa=t(14965),Mn=t(36577),Ln=t(1977),Fn=t(59465),In=t(57392),zn=["render"],An=function(l,v){var c=l.onChange,p=l.columns,u=p===void 0?[]:p,w=l.defaultValue,h=w===void 0?[]:w,C=l.title,M=i.useState(h),$=(0,f.Z)(M,2),b=$[0],j=$[1];i.useEffect(function(){j(h)},[h]),i.useImperativeHandle(v,function(){return{reset:function(m){j(m)}}});var _=i.useRef(null),L=i.useMemo(function(){return b.map(function(D){return D.name})},[b]),G=i.useMemo(function(){return u.map(function(D){var m=D.label,g=D.name;return{label:m,value:g,disabled:L.includes(g)}})},[u,L]),W=function(m){j(m),c==null||c(m.reduce(function(g,Z){var S=Object.values(Z),K=(0,f.Z)(S,2),ie=K[0],k=K[1];return g[ie]=k,g},{}))},Ze=function(m,g){var Z=Object.prototype.toString.call(m)==="[object Object]"&&m.target?m.target.value:m;W(b.map(function(S,K){return g===K?(0,a.Z)((0,a.Z)({},S),{},{value:Z}):S}))},Q=function(m,g){W(b.map(function(Z,S){return g===S?{name:m,value:void 0}:Z}))},F=function(m){W(b.filter(function(g,Z){return m!==Z}))},I=function(){var m=G.filter(function(S){var K=S.disabled;return!K}),g=m[0],Z=g.value;j(function(S){return S.concat({name:Z,value:void 0})})},Te=function(m,g){var Z=u.findIndex(function(ve){return ve.name===m.name}),S=u[Z],K=S.render,ie=(0,xt.Z)(S,zn),k=(0,a.Z)((0,a.Z)({},ie),{},{value:m.value,allowClear:!0,style:{width:"100%"},onChange:function(re){return Ze(re,g)}});return K?i.cloneElement(K,k):(0,e.jsx)(H.Z,(0,a.Z)((0,a.Z)({},k),{},{autoComplete:"off",spellCheck:!1}))},ee=(0,In.Z)(_),N=ee!=null&&ee.width?ee.width:0,le=N-120-70-80;return(0,e.jsxs)("div",{ref:_,style:{whiteSpace:"nowrap"},children:[(0,e.jsx)(fe.Z.Text,{style:{marginRight:8,width:70},children:C}),(0,e.jsx)(te.Z,{direction:"vertical",children:b.map(function(D,m){var g=D.name;return(0,e.jsxs)(te.Z,{align:"start",children:[(0,e.jsx)(st.Z,{style:{width:120},value:g,options:G,onChange:function(S){return Q(S,m)},dropdownMatchSelectWidth:!1}),(0,e.jsx)("div",{style:{width:le},children:Te(D,m)}),(0,e.jsxs)(te.Z,{align:"center",style:{paddingTop:5},children:[m===b.length-1&&b.length!==u.length&&(0,e.jsx)("span",{onClick:I,children:(0,e.jsx)(fe.Z.Link,{children:(0,e.jsx)(Ln.Z,{})})}),b.length>1&&(0,e.jsx)(Fn.Z,{style:{color:"#E02020",cursor:"pointer"},onClick:function(){return F(m)}})]})]},g)})})]})},tn=i.forwardRef(An),Hn=t(90105),$n=["api","dataSet","searchKey"],Bn=["placeholder","value"],Wn=["placeholder","value"],Kn=["onChange","value"],nn,Nn=(0,oe.ZP)(st.Z)(nn||(nn=(0,de.Z)([`
    /* .ant-select-selector { padding-left: 4px!important; }; */
`]))),kn=function(l){var v,c,p=l.label,u=l.value;return(0,e.jsx)(xe.Z,{color:(v=p.props)===null||v===void 0?void 0:v.color,closable:!1,style:{marginRight:3},children:((c=p.props)===null||c===void 0?void 0:c.children)||u})},Un=function(l){var v,c,p=l.label,u=l.closable,w=l.onClose,h=l.value;return(0,e.jsx)(xe.Z,{color:(v=p.props)===null||v===void 0?void 0:v.color,closable:u,onClose:w,style:{marginRight:3},children:((c=p.props)===null||c===void 0?void 0:c.children)||h})},Ft=function(l){var v=(0,V.UO)(),c=v.ws_id,p=l.api,u=l.dataSet,w=l.searchKey,h=(0,xt.Z)(l,$n);if(!p)return(0,e.jsx)(st.Z,(0,a.Z)({},h));var C=(0,n.QT)(function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ws_id:c,page_num:1,page_size:500};return p(Q)},{debounceInterval:300}),M=C.data,$=C.loading,b=C.run,j=h.placeholder,_=h.value,L=(0,xt.Z)(h,Bn);if(!M)return(0,e.jsx)(st.Z,(0,a.Z)({loading:$,placeholder:j},L));var G=function(F){var I;!w||b((I={},(0,$e.Z)(I,w,F),(0,$e.Z)(I,"ws_id",c),I))},W=(0,a.Z)((0,a.Z)({},h),{},{notFoundContent:$?(0,e.jsx)(Jt.Z,{size:"small"}):(0,e.jsx)(Et.Z,{image:Et.Z.PRESENTED_IMAGE_SIMPLE}),options:u?M.map(u):M});w&&(W=(0,a.Z)((0,a.Z)({},W),{},{onSearch:G,filterOption:!1}));var Ze=function(F){F||b({ws_id:c})};return(0,e.jsx)(st.Z,(0,a.Z)((0,a.Z)({},W),{},{onDropdownVisibleChange:Ze}))},Vn=[{value:"success",label:"Complete",bgColor:"#81BF84"},{value:"pass",label:"Pass",bgColor:"#81BF84"},{value:"running",label:"Running",bgColor:"#649FF6"},{value:"fail",label:"Fail",bgColor:"#C84C5A"},{value:"pending",label:"Pending",bgColor:"#D9D9D9",color:"#1d1d1d"},{value:"stop",label:"Stop",bgColor:"#D9D9D9",color:"#1d1d1d"},{value:"skip",label:"Skip",bgColor:"#D9D9D9",color:"#1d1d1d"}],Jn=function(l){return(0,e.jsx)(st.Z,(0,a.Z)((0,a.Z)({},l),{},{tagRender:kn,options:Vn.map(function(v){return{value:v.value,label:(0,e.jsx)(xe.Z,{color:v.bgColor,style:{color:v.color?v.color:""},children:v.label}),name:v.label}})}))},Gn=function(l){var v,c=(0,V.UO)(),p=c.ws_id,u={ws_id:p,page_num:1,page_size:20},w=i.useState(u),h=(0,f.Z)(w,2),C=h[0],M=h[1],$=i.useState(void 0),b=(0,f.Z)($,2),j=b[0],_=b[1],L=(0,n.QT)(function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;return(0,E.nL)(ee)},{debounceInterval:300,formatResult:function(N){return N}}),G=L.data,W=L.loading,Ze=L.run;i.useEffect(function(){_(G)},[G]);var Q=function(N){var le=N.target,D=le.clientHeight,m=le.scrollHeight,g=le.scrollTop;if(D+g===m){var Z=C.page_num+1;if(Z<=(j==null?void 0:j.total_page)){var S=(0,a.Z)((0,a.Z)({},C),{},{page_num:C.page_num+1});M(S),(0,E.nL)(S).then(function(K){var ie;_((0,a.Z)((0,a.Z)({},K),{},{data:j==null||(ie=j.data)===null||ie===void 0?void 0:ie.concat(K.data)}))})}}},F=l.placeholder,I=l.value,Te=(0,xt.Z)(l,Wn);return j!=null&&j.data?(0,e.jsx)(Nn,(0,a.Z)((0,a.Z)({},l),{},{tagRender:Un,labelInValue:!0,onSearch:X().debounce(function(ee){var N=(0,a.Z)((0,a.Z)({},u),{},{name:ee});M(N),Ze(N)},300),onPopupScroll:Q,mode:"multiple",notFoundContent:W?(0,e.jsx)(Jt.Z,{}):(0,e.jsx)(Et.Z,{image:Et.Z.PRESENTED_IMAGE_SIMPLE}),filterOption:!1,defaultActiveFirstOption:!1,options:j==null||(v=j.data)===null||v===void 0?void 0:v.map(function(ee){return{value:ee.id,label:(0,e.jsx)(xe.Z,{color:ee.tag_color,style:{color:ee.color?ee.color:""},children:ee.name}),name:ee.name}})})):(0,e.jsx)(st.Z,(0,a.Z)({loading:W,placeholder:F},Te))},Qn=function(l){var v=l.onChange,c=l.value,p=(0,xt.Z)(l,Kn),u=(0,V.UO)(),w=u.ws_id,h=(0,n.QT)(function(){return(0,n.WY)("/api/server/server_snapshot/",{params:{ws_id:w}})}),C=h.data,M=h.loading;if(!C)return(0,e.jsx)(st.Z,(0,a.Z)({mode:"multiple",loading:M},p));var $=C.map(function(b){return{label:b,value:b}}).filter(Boolean);return(0,e.jsx)(st.Z,(0,a.Z)((0,a.Z)({},l),{},{mode:"multiple",onSelect:v,options:$,filterOption:function(j,_){var L;return((L=_.value)===null||L===void 0?void 0:L.indexOf(j.trim()))>=0}}))},an=[{name:"job_id",label:(0,e.jsx)(n._H,{id:"ws.result.list.job_id"})},{name:"name",label:(0,e.jsx)(n._H,{id:"ws.result.list.name"})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.fail_case"}),name:"fail_case"},{label:(0,e.jsx)(n._H,{id:"ws.result.list.creators"}),name:"creators",searchKey:"keyword",render:(0,e.jsx)(Ft,{api:Hn.tR,mode:"multiple",labelInValue:!0}),dataSet:function(l){return{value:l.id,label:l.last_name}}},{label:(0,e.jsx)(n._H,{id:"ws.result.list.tags"}),name:"tags",render:(0,e.jsx)(Gn,{})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.state"}),name:"state",render:(0,e.jsx)(Jn,{})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.server"}),name:"server",render:(0,e.jsx)(Qn,{})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.test_suite"}),name:"test_suite",render:(0,e.jsx)(Ft,{api:E.U8,searchKey:"name",mode:"multiple",labelInValue:!0}),dataSet:function(l){return(0,a.Z)((0,a.Z)({},l),{},{value:l.name,label:l.name})}},{label:(0,e.jsx)(n._H,{id:"ws.result.list.test_conf"}),name:"test_conf"},{label:(0,e.jsx)(n._H,{id:"ws.result.list.job_type_id"}),name:"job_type_id",render:(0,e.jsx)(Ft,{api:E.Zj,labelInValue:!0}),dataSet:function(l){return{label:l.name,value:l.id}}},{label:(0,e.jsx)(n._H,{id:"ws.result.list.test_type"}),name:"test_type",render:(0,e.jsx)(Ft,{options:[{value:"functional",label:(0,e.jsx)(n._H,{id:"functional.test"})},{value:"performance",label:(0,e.jsx)(n._H,{id:"performance.test"})},{value:"business",label:(0,e.jsx)(n._H,{id:"business.test"})}]})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.project_id"}),name:"project_id",render:(0,e.jsx)(Ft,{api:E.LZ}),dataSet:function(l){return{value:l.id,label:"".concat(l.name,"(").concat(l.product_name,")")}}},{label:(0,e.jsx)(n._H,{id:"ws.result.list.product_version"}),name:"product_version"}],Yn=t(30381),bt=t.n(Yn),Xn=t(41623),rn=t(87735),Wt=function(l){var v=Object.entries(l).reduce(function(c,p){var u=(0,f.Z)(p,2),w=u[0],h=u[1];if(["creation_time","completion_time"].includes(w))return h&&(c[w]=JSON.stringify(h)),c;var C=Object.prototype.toString.call(h);return["[object Undefined]","[object Null]"].includes(C)?c:C==="[object Array]"?(c[w]=JSON.stringify(h.map(function(M){return["test_suite"].includes(w)?M.label||M:M.value||M})),c):C==="[object Object]"?(c[w]=h.value,c):(c[w]=h,c)},{});return v},qn=t(60035),ea=["ws_id","page_size","page_num","tab","search"],ta=["completion_time","creation_time"],ln=function(l){return(0,e.jsx)(Mn.Z.RangePicker,(0,a.Z)((0,a.Z)({},l),{},{size:"middle",showTime:{format:"HH:mm:ss"},disabledDate:function(c){return bt()().isBefore(c,"days")},format:"YYYY-MM-DD HH:mm:ss"}))},sn="YYYY-MM-DD HH:mm:ss",na=["",bt()(bt()().hours(23).minutes(59).seconds(59),"YYYY-MM-DD HH:mm:ss")],on=[{name:"creation_time",value:na}],un=[{name:"job_id",value:""}],dn=function(l){if(!!l)try{var v=JSON.parse(l);if(!v)return;var c=v.start_time,p=v.end_time;return[bt()(c),bt()(p)]}catch(u){console.log(u);return}},aa=function(l){var v=(0,n.YB)(),c=v.formatMessage,p=l.onChange,u=l.pageQuery,w=i.useState(void 0),h=(0,f.Z)(w,2),C=h[0],M=h[1],$=i.useState({}),b=(0,f.Z)($,2),j=b[0],_=b[1],L=i.useState({}),G=(0,f.Z)(L,2),W=G[0],Ze=G[1],Q=function(S){var K=Object.entries(S).reduce(function(k,ve){var re=(0,f.Z)(ve,2),ge=re[0],me=re[1];return["creators","tags","test_suite","server"].includes(ge)&&me&&me.length===0?(k[ge]=void 0,k):["job_id","name","fail_case"].includes(ge)&&me&&me.length>0?(k[ge]=me.trim(),k):(k[ge]=me,k)},{}),ie=Wt(K);_(ie)},F=function(S){var K=Object.entries(S).reduce(function(k,ve){var re=(0,f.Z)(ve,2),ge=re[0],me=re[1];if(!me)return k;var De=(0,f.Z)(me,2),Je=De[0],ue=De[1];return k[ge]={start_time:bt()(Je).format(sn),end_time:bt()(ue).format(sn)},k},{}),ie=Wt(K);Ze(ie)},I=i.useRef(null),Te=i.useRef(null),ee=function(){var S,K;(S=I.current)===null||S===void 0||S.reset(on),(K=Te.current)===null||K===void 0||K.reset(un),_({}),Ze({});var ie=u.search,k=u.tab,ve=u.ws_id,re=u.page_num,ge=u.page_size,me={search:ie,tab:k,ws_id:ve,page_num:re,page_size:ge};M(me),p==null||p(me)},N=(0,qn.oM)(c({id:"ws.result.details.copied"})),le=function(){var S=Wt(u),K=location.origin+location.pathname+"?"+(0,rn.stringify)(S);N(K)};(0,i.useEffect)(function(){var Z=u.search,S=u.page_size;M((0,a.Z)((0,a.Z)((0,a.Z)({},j),W),{},{search:Z,page_num:1,page_size:S}))},[j,u,W]);var D=i.useMemo(function(){var Z=u.ws_id,S=u.page_size,K=u.page_num,ie=u.tab,k=u.search,ve=(0,xt.Z)(u,ea),re=ve.completion_time,ge=ve.creation_time,me=(0,xt.Z)(ve,ta),De=function(z){var se=Object.keys(z).filter(function(A){return!!z[A]}).map(function(A){return z[A]?["project_id","job_type_id"].includes(A)?{name:A,value:+z[A]}:["test_suite"].includes(A)?{name:A,value:JSON.parse(z[A])}:["creators","tags"].includes(A)?{name:A,value:JSON.parse(z[A]).map(function(R){return+R})}:{name:A,value:z[A]}:{name:A,value:void 0}});return se},Je=De({completion_time:dn(re),creation_time:dn(ge)}),ue=De(me);return _(me),Ze({completion_time:re,creation_time:ge}),{r:Je,l:ue}},[u]),m=D.r,g=D.l;return(0,e.jsxs)("div",{style:{padding:"0 16px"},children:[(0,e.jsx)(en.Z,{style:{margin:"0 0 16px"}}),(0,e.jsxs)(he.Z,{gutter:12,children:[(0,e.jsx)(Re.Z,{span:12,children:(0,e.jsx)(tn,{ref:Te,title:c({id:"ws.result.list.select.condition"}),columns:an.map(function(Z){return(0,a.Z)((0,a.Z)({},Z),{},{placeholder:c({id:"ws.result.list.please.placeholder.".concat(Z.name)})})}),defaultValue:g.length?g:un,onChange:Q})}),(0,e.jsx)(Re.Z,{span:12,children:(0,e.jsx)(tn,{ref:I,title:c({id:"ws.result.list.select.time"}),columns:[{label:(0,e.jsx)(n._H,{id:"ws.result.list.start_time"}),name:"creation_time",render:(0,e.jsx)(ln,{})},{label:(0,e.jsx)(n._H,{id:"ws.result.list.completion_time"}),name:"completion_time",render:(0,e.jsx)(ln,{})}],defaultValue:m.length?m:on,onChange:F})})]}),(0,e.jsx)(en.Z,{style:{margin:"16px 0 0"},dashed:!0}),(0,e.jsx)(he.Z,{style:{marginTop:12,marginBottom:12},children:(0,e.jsx)(Re.Z,{span:12,children:(0,e.jsxs)(te.Z,{style:{paddingLeft:65},children:[(0,e.jsx)(be.Z,{type:"primary",onClick:function(){return p&&p(C)},children:(0,e.jsx)(n._H,{id:"operation.filter"})}),(0,e.jsx)(be.Z,{onClick:ee,children:(0,e.jsx)(n._H,{id:"operation.reset"})}),(0,e.jsx)(fe.Z.Link,{onClick:le,children:(0,e.jsxs)(te.Z,{size:4,children:[(0,e.jsx)(Xn.r,{}),(0,e.jsx)(fe.Z.Text,{children:(0,e.jsx)(n._H,{id:"operation.share"})})]})})]})})})]})},ra=aa,cn=t(10279),fn,vn,mn,la=`
    color: #1890FF;
    background-color: #E6F7FF;
`,hn=oe.ZP.span(fn||(fn=(0,de.Z)([`
    height: 20px;
    display: inline-block;
    border-radius: 12px;
    font-size: 12px;
    text-align: center;
    line-height: 20px;
    padding: 0 7px;
    margin-top: 2px;
    font-weight: 500;

    `,`
`])),function(T){var l=T.currentActive;return l?la:"background-color: rgba(0,0,0,.04);"}),sa=(0,oe.ZP)(te.Z)(vn||(vn=(0,de.Z)([`
    font-size: 16px;
    font-weight: 500;
    background-color: #fafbfc;
    &:hover{
        color: #1890FF;
        `,` {
            background: #E6F7FF;
        }
    }
`])),hn),ia=(0,oe.ZP)(_e.Z)(mn||(mn=(0,de.Z)([`
    width: 100%;
    overflow: hidden;

    .ant-tabs-nav, 
    div > .ant-tabs-nav {
        margin: 0!important;
    }

    .ant-tabs-nav-wrap {
        background-color: #fafbfc;
        height: 64px;
        border-bottom: 1px solid #f0f0f0;
    }
`]))),Kt={page_num:1,page_size:20},It={name:{order:1,disabled:!1},state:{order:2,disabled:!1},test_type:{order:3,disabled:!1},test_result:{order:4,disabled:!1},project_name:{order:5,disabled:!1},product_version:{order:6,disabled:!0},creator_name:{order:7,disabled:!1},start_time:{order:8,disabled:!1},end_time:{order:9,disabled:!1},tag_list:{order:6.9,disabled:!0}},Yt="test-job-list-columns-state",oa=function(){var l,v=(0,n.YB)(),c=v.formatMessage,p=(0,V.UO)(),u=p.ws_id,w=(0,V.TH)(),h=w.query,C=(0,n.md)(),M=i.useState((l=h.tab)!==null&&l!==void 0?l:"all"),$=(0,f.Z)(M,2),b=$[0],j=$[1],_=i.useState((0,a.Z)((0,a.Z)({},Kt),{},{tab:b,ws_id:u},h)),L=(0,f.Z)(_,2),G=L[0],W=L[1],Ze=i.useState(1),Q=(0,f.Z)(Ze,2),F=Q[0],I=Q[1],Te=i.useState({}),ee=(0,f.Z)(Te,2),N=ee[0],le=ee[1],D=i.useState(JSON.stringify(h)!=="{}"),m=(0,f.Z)(D,2),g=m[0],Z=m[1],S=(0,cn.ZP)(function(){return(0,E.ZD)({query_count:1,tab:b,ws_id:u})},{debounceInterval:300,ready:!!u,refreshDeps:[b,u]}),K=S.data,ie=S.refresh,k=(0,cn.ZP)(function(){return(0,E.ZD)(G)},{debounceInterval:300,ready:!!u,refreshDeps:[G]}),ve=k.data,re=k.loading,ge=k.refresh,me=k.mutate;i.useEffect(function(){var ue=localStorage.getItem(Yt);if(!ue)localStorage.setItem(Yt,JSON.stringify(It)),le(It);else{var O=JSON.parse(ue),z=It.tag_list,se=It.product_version,A=(0,a.Z)({},O);O.product_version||(A.product_version=se),O.tag_list||(A.tag_list=z),le(A)}},[]),i.useEffect(function(){n.m8.replace("/ws/".concat(u,"/test_result?").concat((0,rn.stringify)(Wt(G))))},[G]),i.useEffect(function(){JSON.stringify(N)!=="{}"&&localStorage.setItem(Yt,JSON.stringify(N))},[N]),i.useEffect(function(){var ue;u!==G.ws_id&&W((0,a.Z)((0,a.Z)({},Kt),{},{tab:"all",ws_id:u})),j((ue=h.tab)!==null&&ue!==void 0?ue:"all")},[G.ws_id,u]);var De=[{tab:c({id:"ws.result.list.all.job"}),key:"all"},C.IsWsSetting()&&{tab:c({id:"ws.result.list.my.job"}),key:"my"},C.IsWsSetting()&&{tab:c({id:"ws.result.list.collection"}),key:"collection"}].filter(Boolean),Je=function(O){j(O),W((0,a.Z)((0,a.Z)({tab:O},Kt),{},{ws_id:u})),Z(!1)};return(0,e.jsx)(je.Provider,{value:{initialColumns:N,setInitialColumns:le,DEFAULT_COLUMNS_SET_DATA:It},children:(0,e.jsxs)(i.Fragment,{children:[(0,e.jsx)(ia,{onTabClick:Je,activeKey:b,children:De.map(function(ue){return(0,e.jsxs)(_e.Z.TabPane,{tab:(0,e.jsxs)(sa,{size:4,children:[(0,e.jsx)("span",{children:ue.tab}),(0,e.jsx)(hn,{currentActive:b===ue.key,children:K?K["".concat(ue.key==="all"?"ws":ue.key,"_job")]:0})]}),children:[(0,e.jsx)(Me,{stateCount:K,pageQuery:G,setPageQuery:W,selectionType:F,onSelectionChange:I,filter:g,onFilterChange:Z}),g&&(0,e.jsx)(ra,{columns:an.map(function(O){return(0,a.Z)((0,a.Z)({},O),{},{placeholder:c({id:"ws.result.list.please.placeholder.".concat(O.name)})})}),pageQuery:G,onChange:function(z){return W((0,a.Z)((0,a.Z)({tab:b,ws_id:u},z),Kt))}})]},ue.key)})}),(0,e.jsx)(Pn,{pageQuery:G,setPageQuery:W,radioValue:F,setRadioValue:I,loading:re,dataSource:ve,countRefresh:ie,listRefresh:ge,setDataSource:me,callback:ge})]})})},ua=oa},85450:function(ut,Ae,t){"use strict";t.d(Ae,{sL:function(){return Ct},ny:function(){return Y},Fu:function(){return ct}});var a=t(11849),f=t(2824),Pe=t(93224),_e=t(32059),rt=t(66456),te=t(79764),de=t(86582),i=t(19273),oe=t(20310),n=t(67294),V=t(1706),E=t(12788),B=t(57392),H=t(85893),ce=["width","onResizeStart","onResize","onResizeStop","resize"],Oe=["columns","name","onColumnsChange"],wt,Zt,St,he=E.ZP.div(wt||(wt=(0,oe.Z)([`
    position: relative;
    width: 100%;
`]))),At=E.ZP.div.attrs(function(Fe){return{style:{left:Fe.left,height:Fe==null?void 0:Fe.height}}})(Zt||(Zt=(0,oe.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),dt=(0,E.ZP)(V.Resizable)(St||(St=(0,oe.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(Fe){var J=Fe.resize;return J?"col-resize":"default"}),Ht=function(J){var we=J.width,je=J.onResizeStart,pe=J.onResize,e=J.onResizeStop,Ie=J.resize,lt=(0,Pe.Z)(J,ce);return(0,H.jsx)(dt,(0,a.Z)((0,a.Z)({width:we||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:je,onResize:pe,onResizeStop:e,resize:Ie?1:0},lt),{},{children:(0,H.jsx)("th",(0,a.Z)({},lt))}))},fe=function(J){var we=J.columns,je=we===void 0?[]:we,pe=J.name,e=J.onColumnsChange,Ie=(0,Pe.Z)(J,Oe),lt=n.useState(0),ft=(0,f.Z)(lt,2),vt=ft[0],it=ft[1],Me=n.useState(0),$e=(0,f.Z)(Me,2),Ke=$e[0],Ye=$e[1],Ne=n.useState(!1),gt=(0,f.Z)(Ne,2),Re=gt[0],mt=gt[1],xe=n.useRef(null),Ge=(0,B.Z)(xe),ke=function(Ce){return function(Qe,et){var Be;if((0,i.Z)(et),!!je[Ce].ellipsis){var tt=Qe.clientX,X=tt-((Be=xe.current)===null||Be===void 0?void 0:Be.getBoundingClientRect().x);Ye(X),it(X),mt(!0)}}},Ee=function(){return function(Ce){var Qe,et=Ce.clientX,Be=et-((Qe=xe.current)===null||Qe===void 0?void 0:Qe.getBoundingClientRect().x);it(Be)}},Xe=function(Ce){return function(Qe,et){var Be,tt=et.size,X=Qe.clientX,Dt=X-((Be=xe.current)===null||Be===void 0?void 0:Be.getBoundingClientRect().x),ht=(0,de.Z)(je);if(ht[Ce].ellipsis){var be=tt.width+=Dt-Ke,_t=ht[Ce],Rt=_t.dataIndex,jt=_t.key;be>20&&(ht[Ce]=(0,a.Z)((0,a.Z)({},ht[Ce]),{},{width:be}),pe&&ct(pe,Rt||jt,be),e==null||e())}it(0),Ye(0),mt(!1)}},qe=n.useMemo(function(){return je.reduce(function(Ue,Ce){return Ce.width?Ue+=Ce==null?void 0:Ce.width:Ue},0)},[je]);return(0,H.jsxs)(he,{ref:xe,className:"resize-table-wrapper",children:[(0,H.jsx)(te.Z,(0,a.Z)((0,a.Z)({},Ie),{},{components:{header:{cell:Ht}},scroll:(J==null?void 0:J.scroll)||{x:qe||(Ge==null?void 0:Ge.width)},columns:je.filter(Boolean).map(function(Ue,Ce){return(0,a.Z)((0,a.Z)({},Ue),{},{onHeaderCell:function(et){return{resize:!!Ue.ellipsis,width:et.width,onResizeStart:ke(Ce),onResize:Ee(),onResizeStop:Xe(Ce)}}})})})),Re&&(0,H.jsx)(At,{height:Ge==null?void 0:Ge.height,left:vt||Ke})]})},He=fe,Tt=["name","columns","refreshDeps","onColumnsChange"],yt="umi_locale",Y=function(J,we){var je=localStorage.getItem(J),pe=localStorage.getItem(yt)||"zh-CN";if(!!je)return JSON.parse(je)["".concat(pe,"-").concat(we)]},ct=function(J,we,je){var pe=localStorage.getItem(J),e=localStorage.getItem(yt)||"zh-CN",Ie=(0,_e.Z)({},"".concat(e,"-").concat(we),je);pe?localStorage.setItem(J,JSON.stringify(Object.assign(JSON.parse(pe),Ie))):localStorage.setItem(J,JSON.stringify(Ie))},Ct=function(J){var we=J.name,je=J.columns,pe=J.refreshDeps,e=pe===void 0?[]:pe,Ie=J.onColumnsChange,lt=(0,Pe.Z)(J,Tt),ft=n.useState([]),vt=(0,f.Z)(ft,2),it=vt[0],Me=vt[1],$e=function(){return(je==null?void 0:je.filter(Boolean).map(function(Ye){var Ne=Ye.dataIndex,gt=Ye.key,Re=Ye.width,mt=Ne||gt,xe=Y(we,mt);!xe&&Re&&ct(we,mt,Re);var Ge=xe||Re;return Ge&&(Ye.width=Ge),Ye}))||[]};return n.useEffect(function(){Me($e())},e),(0,H.jsx)(He,(0,a.Z)({name:we,columns:it,setColumns:Me,size:"small",onColumnsChange:function(){Ie==null||Ie(),Me($e())}},lt))}},41623:function(ut,Ae,t){"use strict";t.d(Ae,{r:function(){return i}});var a=t(67294),f,Pe=["svgRef","title"];function _e(){return _e=Object.assign?Object.assign.bind():function(n){for(var V=1;V<arguments.length;V++){var E=arguments[V];for(var B in E)Object.prototype.hasOwnProperty.call(E,B)&&(n[B]=E[B])}return n},_e.apply(this,arguments)}function rt(n,V){if(n==null)return{};var E=te(n,V),B,H;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(n);for(H=0;H<ce.length;H++)B=ce[H],!(V.indexOf(B)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,B)||(E[B]=n[B]))}return E}function te(n,V){if(n==null)return{};var E={},B=Object.keys(n),H,ce;for(ce=0;ce<B.length;ce++)H=B[ce],!(V.indexOf(H)>=0)&&(E[H]=n[H]);return E}var de=function(V){var E=V.svgRef,B=V.title,H=rt(V,Pe);return a.createElement("svg",_e({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:E},H),B?a.createElement("title",null,B):null,f||(f=a.createElement("g",{id:"\\u5206\\u6790",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"0.\\u6027\\u80FD-\\u5185\\u7F51-\\u9009\\u62E9\\u6807\\u7B7E",transform:"translate(-1194.000000, -133.000000)",fill:"#000000"},a.createElement("g",{id:"Group-21",transform:"translate(20.000000, 110.000000)"},a.createElement("g",{id:"\\u94FE\\u63A5",transform:"translate(1172.000000, 21.000000)"},a.createElement("rect",{id:"Rectangle",fillRule:"nonzero",opacity:0,x:0,y:0,width:16,height:16}),a.createElement("path",{d:"M11.91,7.92 C11.7153722,8.09503346 11.4186893,8.09033311 11.2297039,7.90922206 C11.0407184,7.72811102 11.0234032,7.43189657 11.19,7.23 L12.06,6.32 C12.709515,5.51696592 12.6264975,4.34816777 11.87,3.645 C11.115,2.86 10,2.79 9.37,3.45 L6.94,6 C6.29048502,6.80303408 6.37350246,7.97183223 7.13,8.675 C7.3238618,8.87001873 7.3238618,9.18498127 7.13,9.38 C7.0361167,9.47465633 6.90831877,9.52789916 6.775,9.52789916 C6.64168123,9.52789916 6.5138833,9.47465633 6.42,9.38 C5.29380253,8.29148422 5.21051969,6.51405308 6.23,5.325 L8.66,2.79 C9.705,1.7 11.48,1.79 12.61,2.99 C13.7040886,4.07696429 13.7802373,5.82185565 12.785,7 L11.91,7.92 Z M3.59,8.08 C3.78462784,7.90496654 4.0813107,7.90966689 4.27029614,8.09077794 C4.45928159,8.27188898 4.47659677,8.56810343 4.31,8.77 L3.44,9.68 C2.79048502,10.4830341 2.87350246,11.6518322 3.63,12.355 C4.385,13.14 5.5,13.21 6.13,12.55 L8.56,10 C9.20951498,9.19696592 9.12649754,8.02816777 8.37,7.325 C8.1761382,7.12998127 8.1761382,6.81501873 8.37,6.62 C8.4638833,6.52534367 8.59168123,6.47210084 8.725,6.47210084 C8.85831877,6.47210084 8.9861167,6.52534367 9.08,6.62 C10.2061975,7.70851578 10.2894803,9.48594692 9.27,10.675 L6.84,13.21 C5.795,14.3 4.02,14.21 2.89,13.01 C1.79591137,11.9230357 1.71976275,10.1781444 2.715,9 L3.59,8.08 Z",id:"Shape",fillOpacity:.65})))))))},i=a.forwardRef(function(n,V){return a.createElement(de,_e({svgRef:V},n))}),oe=t.p+"static/icon_link.e1b9133e.svg"}}]);
