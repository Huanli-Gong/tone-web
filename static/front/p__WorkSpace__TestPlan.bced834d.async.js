(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1601],{86252:function(be){be.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},31076:function(be,ve,a){"use strict";a.r(ve),a.d(ve,{default:function(){return i}});var C=a(67448),W=a(47548),xe=a(54905),de=a(90087),Z=a(46721),ce=a(94867),Te=a(20632),_e=a(71853),je=a(57359),x=a(34423),u=a(20418),B=a(81138),Oe=a(96146),y=a(35832),ze=a(488),G=a(32326),te=a(39190),me=a(41428),E=a(22374),ye=a(526),s=a(22812),Ce=a(24812),K=a(76742),Ze=a(97939),Be=a(88018),Ee=a(58414),Re=a(90846),t=a(56511),Pe=a(14320),k=a(53479),M=a(68176),c=a(39935),e=a(52454),P,D,w="160px",L=Ze.ZP.div(P||(P=(0,me.Z)([`
    width:100%;
    display: flex;
    align-items: center;

    .setting_label {
        width : `,`; 
        font-weight: 600;
        display: inline-block;
        font-size: 14px;
        color: rgba(0,0,0,0.85);
        text-align : right;
        margin-right: 12px;
    }

    .setting_link,
    .setting_text {
        width : calc( 100% - `,` - 12px );
        overflow: hidden;
        display: inline-block;
        height: 24px;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
`])),w,w),F=Ze.ZP.div(D||(D=(0,me.Z)([`
    position: relative;
    height: 1px;
    border-top: 1px dashed rgba(0,0,0,0.15);
    margin-bottom: 22px;
    width: 100%;
    span {
        position: absolute;
        left: 0;
        top: 0;
        padding-right: 10px;
        background: #FFFFFF;
        transform:translate(0, -50%);
        font-size: 16px;
        font-family: PingFangSC-Medium;
        color: rgba(0 , 0 , 0 , .85);
        float: left;
        display: table-cell;
        margin: 0 auto;
        &::before {
            float: left;
            content :'';
            height: 16px;
            width: 2px;
            background: #1890FF;
            margin-top: 6px;
            margin-right: 10px;
        }
    }
`]))),g=function(l){var v=l.name,j=v===void 0?"":v,f=l.val,d=f===void 0?"":f,p=l.isLink,r=p===void 0?!1:p;return(0,e.jsxs)(L,{children:[(0,e.jsx)("b",{className:"setting_label",children:j}),d?r?(0,e.jsx)("a",{className:"setting_link",children:d}):(0,e.jsx)("span",{className:"setting_text",children:d}):(0,e.jsx)(e.Fragment,{children:"\u65E0"})]})},_=function(l){var v=l.name,j=v===void 0?"":v,f=l.val,d=f===void 0?"":f,p=l.isLink,r=p===void 0?!1:p;return d&&(0,e.jsxs)(L,{children:[(0,e.jsx)("b",{className:"setting_label",children:j}),d?r?(0,e.jsx)("a",{className:"setting_link",children:d}):d:(0,e.jsx)(e.Fragment,{children:"\u65E0"})]})},ae=function(l){var v=l.name,j=v===void 0?"":v,f=l.children;return(0,e.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,e.jsx)("div",{style:{width:160,marginRight:12,textAlign:"right"},children:(0,e.jsx)("b",{children:j})}),(0,e.jsx)("div",{style:{width:"calc(100% - 160px - 12px)"},children:f})]})},ue=function(l,v){var j,f,d,p=(0,s.YB)(),r=p.formatMessage,b=l.ws_id,V=(0,s.md)(),re=(0,E.useState)(!1),ee=(0,te.Z)(re,2),N=ee[0],J=ee[1],ne=(0,E.useState)(void 0),U=(0,te.Z)(ne,2),n=U[0],se=U[1];(0,E.useImperativeHandle)(v,function(){return{show:function(){var S=(0,G.Z)((0,y.Z)().mark(function A(Se){var he,Le,De,Ie;return(0,y.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,M.jW)({ws_id:b,id:Se.id});case 2:if(he=oe.sent,Le=he.data,De=he.code,Ie=he.msg,De!==200){oe.next=10;break}return se((0,u.Z)((0,u.Z)({},Le),Se)),J(!0),oe.abrupt("return");case 10:return oe.abrupt("return",(0,c.EV)(De,Ie));case 11:case"end":return oe.stop()}},A)}));function le(A){return S.apply(this,arguments)}return le}()}});var fe=function(){J(!1),se(null)},Me=function(){s.m8.push("/ws/".concat(b,"/test_plan/").concat(n.id,"/edit"))},X=function(){s.m8.push("/ws/".concat(b,"/test_plan/").concat(n.id,"/run"))};return(0,e.jsxs)(Ee.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(s._H,{id:"plan.configuration"}),visible:N,width:900,onClose:fe,destroyOnClose:!0,footer:(0,e.jsx)(k.Z,{justify:"end",children:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(s.Nv,{accessible:V.WsTourist(),children:(0,e.jsx)(s.Nv,{accessible:V.WsMemberOperateSelf(n==null?void 0:n.creator),fallback:(0,e.jsx)(ce.Z,{onClick:function(){return(0,c.WR)()},children:(0,e.jsx)(s._H,{id:"plan.edit.configuration"})}),children:(0,e.jsx)(ce.Z,{onClick:Me,children:(0,e.jsx)(s._H,{id:"plan.edit.configuration"})})})}),(0,e.jsx)(ce.Z,{onClick:X,type:"primary",children:(0,e.jsx)(s._H,{id:"plan.run.plan"})})]})}),children:[(0,e.jsxs)(k.Z,{style:{marginBottom:20},children:[(0,e.jsx)(F,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.basic.info"})})}),(0,e.jsx)(g,{name:r({id:"plan.name"}),val:n==null?void 0:n.name}),(0,e.jsx)(g,{name:r({id:"plan.creator_name"}),val:n==null?void 0:n.creator_name}),(0,e.jsx)(g,{name:r({id:"plan.project_name"}),val:n==null?void 0:n.project_name}),(0,e.jsx)(g,{name:"".concat(r({id:"plan.func_baseline"})),val:n==null?void 0:n.func_baseline_name}),(0,e.jsx)(g,{name:"".concat(r({id:"plan.perf_baseline"})),val:n==null?void 0:n.perf_baseline_name}),(0,e.jsx)(g,{name:r({id:"plan.description"}),val:n==null?void 0:n.description}),(0,e.jsx)(g,{name:r({id:"plan.notice_name"}),val:(n==null?void 0:n.notice_name)||((n==null?void 0:n.email_info)||(n==null?void 0:n.ding_talk_info))&&"[T-one]\u4F60\u7684\u6D4B\u8BD5\u5DF2\u5B8C\u6210{date}"}),(0,e.jsx)(g,{name:r({id:"plan.email_info"}),val:n==null?void 0:n.email_info}),(0,e.jsx)(g,{name:r({id:"plan.ding_talk_info"}),val:n==null?void 0:n.ding_talk_info}),(0,e.jsx)(g,{name:r({id:"plan.enable"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:n!=null&&n.enable?(0,e.jsx)(t.Z,{status:"processing",text:(0,e.jsx)(s._H,{id:"operation.yes"})}):(0,e.jsx)(t.Z,{status:"default",text:(0,e.jsx)(s._H,{id:"operation.no"})})})})]}),(0,e.jsxs)(k.Z,{style:{marginBottom:20},children:[(0,e.jsx)(F,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.public.config"})})}),(0,e.jsx)(_,{name:"\u529F\u80FD\u57FA\u7EBF",val:n==null?void 0:n.func_baseline_name}),(0,e.jsx)(_,{name:"\u6027\u80FD\u57FA\u7EBF",val:n==null?void 0:n.perf_baseline_name}),(n==null?void 0:n.test_obj)==="kernel"&&JSON.stringify(n==null?void 0:n.build_pkg_info)!=="{}"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_,{isLink:!0,name:r({id:"plan.code_repo"}),val:n==null?void 0:n.build_pkg_info.code_repo}),(0,e.jsx)(_,{isLink:!0,name:r({id:"plan.compile_branch"}),val:n==null?void 0:n.build_pkg_info.compile_branch}),(0,e.jsx)(_,{name:"CpuArch",val:n==null?void 0:n.build_pkg_info.cpu_arch}),(0,e.jsx)(_,{name:"Commit ID",val:n==null?void 0:n.build_pkg_info.commit_id}),(0,e.jsx)(_,{name:"Build config",val:n==null?void 0:n.build_pkg_info.build_config}),(0,e.jsx)(_,{name:"Build machine",val:n==null?void 0:n.build_pkg_info.build_machine})]}),(n==null?void 0:n.test_obj)==="kernel"&&JSON.stringify(n==null?void 0:n.kernel_info)!=="{}"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_,{isLink:!0,name:r({id:"plan.kernel.pkg"}),val:n==null?void 0:n.kernel_info.kernel}),(0,e.jsx)(_,{isLink:!0,name:r({id:"plan.devel"}),val:n==null?void 0:n.kernel_info.devel}),(0,e.jsx)(_,{isLink:!0,name:r({id:"plan.headers"}),val:n==null?void 0:n.kernel_info.headers}),(0,e.jsx)(_,{name:"hotfix",val:n!=null&&n.kernel_info.hotfix?r({id:"operation.yes"}):r({id:"operation.no"})}),(0,e.jsx)(_,{name:r({id:"plan.kernel_version"}),val:n==null?void 0:n.kernel_info.kernel_version})]}),(0,e.jsx)(_,{name:r({id:"plan.rpm_info"}),val:n==null?void 0:n.rpm_info}),(0,e.jsx)(_,{name:r({id:"plan.env_info"}),val:n==null?void 0:n.env_info})]}),(0,e.jsxs)(k.Z,{style:{marginBottom:20},children:[(0,e.jsx)(F,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.test.configuration"})})}),(n==null?void 0:n.env_prep)&&JSON.stringify(n==null?void 0:n.env_prep)!=="{}"&&(0,e.jsx)(ae,{name:n==null?void 0:n.env_prep.name,children:n==null?void 0:n.env_prep.machine_info.map(function(S,le){return(0,e.jsx)("div",{children:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)("span",{children:S.machine}),(0,e.jsx)("span",{children:S.script})]})},le)})}),(n==null?void 0:n.test_config)&&(n==null?void 0:n.test_config.length)>0&&n.test_config.map(function(S,le){return(0,e.jsx)(ae,{name:S.name,children:S.template.map(function(A){return(0,e.jsx)("div",{children:A.name})})},le)})]}),(0,e.jsxs)(k.Z,{style:{marginBottom:20},children:[(0,e.jsx)(F,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.report.configuration"})})}),n!=null&&n.auto_report?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g,{name:r({id:"plan.generate.reports"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:(0,e.jsx)(t.Z,{status:"processing",text:r({id:"operation.yes"})})})}),(0,e.jsx)(g,{name:r({id:"plan.report_name"}),val:(n==null?void 0:n.report_name)||"{date} {plan_name} {plan_id} {product_version}"}),(0,e.jsx)(g,{name:r({id:"plan.report_template_name"}),val:n==null?void 0:n.report_template_name}),(0,e.jsx)(g,{name:r({id:"plan.group_method"}),val:(n==null?void 0:n.group_method)==="job"?r({id:"plan.group_method.job"}):r({id:"plan.group_method.stage"})}),(0,e.jsx)(g,{name:r({id:"plan.base_group_info"}),val:(n==null?void 0:n.group_method)==="job"?"".concat((n==null||(j=n.base_group_info)===null||j===void 0?void 0:j.stage_name)||"-"," / ").concat(n==null||(f=n.base_group_info)===null||f===void 0?void 0:f.template_name):n==null||(d=n.base_group_info)===null||d===void 0?void 0:d.stage_name}),(0,e.jsx)(g,{name:r({id:"plan.report_description"}),val:n==null?void 0:n.report_description})]}):(0,e.jsx)(g,{name:r({id:"plan.generate.reports"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:(0,e.jsx)(t.Z,{status:"default",text:r({id:"operation.no"})})})})]}),(0,e.jsxs)(k.Z,{children:[(0,e.jsx)(F,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.trigger.configuration"})})}),(0,e.jsx)(g,{name:r({id:"plan.trigger.rule"}),val:(n==null?void 0:n.cron_info)||r({id:"plan.width.out"})})]})]})},Y=(0,E.forwardRef)(ue),H=a(93299),Q=a(79390),q=a(78358),pe=["code","msg"],ie,I=Ze.ZP.span(ie||(ie=(0,me.Z)([`
    color : #1890FF;
    margin-right : 10 ;
    cursor : pointer ;
    `,` 
`])),function(o){return o.disabled&&"opacity: 0.25;"}),m=function(l){var v=(0,s.YB)(),j=v.formatMessage,f=l.route,d=(0,Ce.UO)(),p=d.ws_id,r=(0,Ce.TH)(),b=r.query,V=(0,s.md)();(0,ye.jk)("Workspace.TestPlan.".concat(f.name));var re=(0,ye.CR)(),ee=re.height,N=(0,E.useRef)(),J=(0,E.useState)([]),ne=(0,te.Z)(J,2),U=ne[0],n=ne[1],se=(0,E.useState)(!0),fe=(0,te.Z)(se,2),Me=fe[0],X=fe[1],S=(0,E.useState)(b&&JSON.stringify(b)!=="{}"?b:{ws_id:p,page_num:1,page_size:10}),le=(0,te.Z)(S,2),A=le[0],Se=le[1],he=function(){var $=(0,G.Z)((0,y.Z)().mark(function h(){var O,T,z,ge;return(0,y.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,M.d3)(A);case 2:O=R.sent,T=O.code,z=O.msg,ge=(0,ze.Z)(O,pe),T===200?n(ge):(0,c.EV)(T,z),X(!1);case 8:case"end":return R.stop()}},h)}));return function(){return $.apply(this,arguments)}}();(0,E.useEffect)(function(){he()},[A]);var Le=function(){var $=(0,G.Z)((0,y.Z)().mark(function h(O){return(0,y.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(O.enable){z.next=2;break}return z.abrupt("return");case 2:s.m8.push("/ws/".concat(p,"/test_plan/").concat(O.id,"/run"),A);case 3:case"end":return z.stop()}},h)}));return function(O){return $.apply(this,arguments)}}(),De=function(h){N.current.show(h)},Ie=function(){var $=(0,G.Z)((0,y.Z)().mark(function h(O){var T,z,ge;return(0,y.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,M.Nm)({plan_id:O.id,ws_id:p});case 2:if(T=R.sent,z=T.code,ge=T.msg,z===200){R.next=8;break}return(0,c.EV)(z,ge),R.abrupt("return");case 8:Oe.default.success(j({id:"request.copy.success"})),he();case 10:case"end":return R.stop()}},h)}));return function(O){return $.apply(this,arguments)}}(),We=function(h){s.m8.push("/ws/".concat(p,"/test_plan/").concat(h.id,"/edit"),A)},oe=function(){var $=(0,G.Z)((0,y.Z)().mark(function h(O){var T,z,ge;return(0,y.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,M.NH)({plan_id:O.id,ws_id:p});case 2:T=R.sent,z=T.code,ge=T.msg,z===200?he():(0,c.EV)(z,ge);case 6:case"end":return R.stop()}},h)}));return function(O){return $.apply(this,arguments)}}(),Fe=[(0,u.Z)((0,u.Z)({dataIndex:"name",title:(0,e.jsx)(s._H,{id:"plan.table.name"}),fixed:"left"},(0,H.QT)(A,Se,"name")),(0,q.yQ)("-")),(0,u.Z)({dataIndex:"cron_info",title:(0,e.jsx)(s._H,{id:"plan.table.cron_info"}),width:120},(0,q.yQ)("-")),(0,u.Z)({dataIndex:"enable",title:(0,e.jsx)(s._H,{id:"plan.table.enable"}),width:120,ellipsis:{showTitle:!1},render:function(h){return h?(0,e.jsx)(s._H,{id:"operation.yes"}):(0,e.jsx)(s._H,{id:"operation.no"})}},(0,H.KW)(A,Se,[{name:(0,e.jsx)(s._H,{id:"operation.yes"}),value:"True"},{name:(0,e.jsx)(s._H,{id:"operation.no"}),value:"False"}],"enable")),(0,u.Z)((0,u.Z)({dataIndex:"creator_name",title:(0,e.jsx)(s._H,{id:"plan.table.creator_name"}),width:120},(0,q.yQ)("-")),(0,H.ln)(A,Se,"creator_name")),(0,u.Z)({dataIndex:"gmt_created",title:(0,e.jsx)(s._H,{id:"plan.table.gmt_created"}),width:170},(0,q.yQ)("-")),(0,u.Z)((0,u.Z)({dataIndex:"gmt_modified",title:(0,e.jsx)(s._H,{id:"plan.table.gmt_modified"})},(0,q.yQ)("-")),{},{width:170}),{title:(0,e.jsx)(s._H,{id:"Table.columns.operation"}),fixed:"right",key:"operation",width:220,render:function(h,O){return(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(I,{disabled:!h.enable,onClick:function(){return Le(h)},children:(0,e.jsx)(s._H,{id:"operation.run"})}),(0,e.jsx)(I,{onClick:function(){return De(h)},children:(0,e.jsx)(s._H,{id:"operation.view"})}),(0,e.jsx)(I,{onClick:function(){return Ie(h)},children:(0,e.jsx)(s._H,{id:"operation.copy"})}),(0,e.jsx)(s.Nv,{accessible:V.WsTourist(),children:(0,e.jsx)(s.Nv,{accessible:V.WsMemberOperateSelf(O.creator),fallback:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(I,{onClick:function(){return(0,c.WR)()},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)(I,{onClick:function(){return(0,c.WR)()},children:(0,e.jsx)(s._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(I,{onClick:function(){return We(h)},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)(_e.Z,{title:(0,e.jsx)(s._H,{id:"delete.prompt"}),onConfirm:function(){return oe(h)},okText:(0,e.jsx)(s._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(s._H,{id:"operation.cancel"}),children:(0,e.jsx)(I,{children:(0,e.jsx)(s._H,{id:"operation.delete"})})})]})})})]})}}];return(0,e.jsx)(W.Z,{spinning:Me,children:(0,e.jsxs)("div",{style:{width:"100%",minHeight:ee-50},children:[(0,e.jsx)("div",{style:{width:"100%",background:"#fff",minHeight:"100%"},children:(0,e.jsx)(de.Z,{tabBarStyle:{height:64,background:"#FAFBFC"},tabBarExtraContent:(0,e.jsx)(ce.Z,{type:"primary",style:{marginRight:20},onClick:function(){return s.m8.push("/ws/".concat(p,"/test_plan/create"))},children:(0,e.jsx)(s._H,{id:"Workspace.TestPlan.Create"})}),children:(0,e.jsx)(de.Z.TabPane,{tab:(0,e.jsx)(s._H,{id:"Workspace.TestPlan.".concat(f.name)}),children:(0,e.jsxs)("div",{style:{paddingLeft:20,paddingRight:20},children:[(0,e.jsx)(Q.sL,{columns:Fe,name:"ws-test-plan-manage",refreshDeps:[p,A,V],dataSource:U.data,rowKey:function(h){return h.id},size:"small",pagination:!1}),(0,e.jsx)(K.Z,{pageSize:U.page_size,onPageChange:function(h,O){var T=(0,u.Z)((0,u.Z)({},A),{},{page_num:h,page_size:O});Se(T)},currentPage:U.page_num,total:U.total})]})},"list")})}),(0,e.jsx)(Y,{ws_id:p,ref:N})]})})},i=m},68176:function(be,ve,a){"use strict";a.d(ve,{d3:function(){return W},lY:function(){return xe},g3:function(){return de},NH:function(){return Z},jW:function(){return ce},qW:function(){return Te},uy:function(){return _e},Nm:function(){return je}});var C=a(22812),W=function(u){return(0,C.WY)("/api/plan/list/",{params:u})},xe=function(u){return(0,C.WY)("/api/plan/list/",{data:u,method:"post"})},de=function(u){return(0,C.WY)("/api/plan/run/",{data:u,method:"post"})},Z=function(u){return(0,C.WY)("/api/plan/detail/",{data:u,method:"delete"})},ce=function(u){return(0,C.WY)("/api/plan/detail/",{params:u})},Te=function(u){return(0,C.WY)("/api/plan/detail/",{data:u,method:"put"})},_e=function(u){return(0,C.WY)("/api/plan/check/cron_expression/",{data:u,method:"post"})},je=function(u){return(0,C.WY)("/api/plan/copy/",{data:u,method:"post"})}},78358:function(be,ve,a){"use strict";a.d(ve,{gN:function(){return M},tZ:function(){return c},yQ:function(){return e},Pc:function(){return P},cQ:function(){return L},YV:function(){return F},Nq:function(){return g},JQ:function(){return q},iK:function(){return pe},fD:function(){return ie},QN:function(){return I}});var C=a(57359),W=a(34423),xe=a(13059),de=a(53676),Z=a(20418),ce=a(51937),Te=a(34516),_e=a(41428),je=a(70772),x=a(6701),u=a(14320),B=a(53479),Oe=a(79625),y=a(96584),ze=a(89963),G=a(70077),te=a(22374),me=a(86252),E=a.n(me),ye=a(93329),s=a(74066),Ce=a(24812),K=a(22812),Ze=a(97939),Be=a(39935),Ee=a(526),Re=a(6130),t=a(52454),Pe,k=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),M=function(i){var o=(0,Ce.UO)(),l=o.ws_id;return(0,t.jsxs)(G.Z,{style:{marginBottom:i.bottomHeight},children:[(0,t.jsx)(G.Z.Item,{children:(0,t.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return K.m8.push("/ws/".concat(l,"/test_result"))},children:(0,t.jsx)(K._H,{id:"ws.result.details.test.result"})})}),(0,t.jsx)(G.Z.Item,{children:(0,t.jsx)(K._H,{id:"ws.result.details.result.details"})})]})},c=function(i){return i==="success"||i===!0?(0,t.jsx)("span",{style:{fontWeight:500,color:"#81BF84"},children:"Success"}):i==="fail"||i===!1?(0,t.jsx)("span",{style:{fontWeight:500,color:"#C84C5A"},children:"Fail"}):i==="running"?(0,t.jsx)("span",{style:{fontWeight:500,color:"#649FF6"},children:"Running"}):i==="stop"?(0,t.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Stop"}):i==="pending"?(0,t.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Pending"}):i==="skip"?(0,t.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Skip"}):(0,t.jsx)(t.Fragment,{})},e=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(l){return l?(0,t.jsx)(Re.K,{ellipsis:{tooltip:!0},children:l}):i}}},P=function(i){var o=i.title,l=i.width,v=l===void 0?"100%":l,j=i.onEdit,f=i.access,d=(0,te.useRef)(),p=f?(0,t.jsx)(ye.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:j}):(0,t.jsx)(ye.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return(0,Be.WR)()}});return(0,t.jsx)("div",{ref:d,style:{width:v},children:(0,t.jsxs)(B.Z,{style:{width:v},justify:"start",align:"middle",children:[(0,t.jsx)(y.Z,{placement:"topLeft",title:o,children:(0,t.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o||"-"})}),p]})})},D=function(i){return k.get(i)||"#D9D9D9"},w=function(i){var o=i.text,l=(0,K.YB)(),v=(0,Ee.oM)(l.formatMessage({id:"request.copy.success"}));return(0,t.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return v(o)},children:l.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},L=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(l){return l?(0,t.jsx)(y.Z,{overlayClassName:E().tootip_overflow,placement:"topLeft",title:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(x.Z,{span:24,children:l}),(0,t.jsx)(x.Z,{span:24,children:(0,t.jsx)(B.Z,{justify:"center",children:(0,t.jsx)(w,{text:l})})})]}),children:l}):i}}},F=function(i){return i==="decline"?"#C84C5A":i==="normal"?"#000000":i==="increase"?"#81BF84":""},g=function(i,o,l){return i==="decline"?(0,t.jsx)("span",{style:{color:"#C84C5A"},children:l({id:"ws.result.details.".concat(i)})}):i==="normal"?(0,t.jsx)("span",{style:{color:"#000000"},children:l({id:"ws.result.details.".concat(i)})}):i==="increase"?(0,t.jsx)("span",{style:{color:"#81BF84"},children:l({id:"ws.result.details.".concat(i)})}):o||"-"},_=(0,Ze.ZP)(Te.Z)(Pe||(Pe=(0,_e.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(m){var i=m.no_margin;return i?"margin-right: 0;":""}),ae=function(i){return(0,t.jsx)(_,(0,Z.Z)({},i))},ue=function(i){var o=(0,K.YB)(),l=o.formatMessage;return(0,t.jsx)(y.Z,{title:l({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,t.jsx)(_,(0,Z.Z)({},i))})},Y=function(i){var o=i.title;return(0,t.jsx)(de.Z,{title:o,placement:"right",trigger:"hover",overlayClassName:E().tag_popover_style,children:(0,t.jsx)(s.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},H=function(i){var o=i.state;return(0,t.jsx)(ae,(0,Z.Z)((0,Z.Z)({},i),{},{color:D(o),style:!k.get(o)&&{color:"#1d1d1d"},children:o==="success"?"complete":o}))},Q=function(i){var o=i.state;return(0,t.jsx)(ue,(0,Z.Z)((0,Z.Z)({},i),{},{color:D(o),style:!k.get(o)&&{color:"#1d1d1d"},children:o==="success"?"complete":o}))},q=function(i){var o=(0,K.YB)(),l=o.formatMessage,v=i.state,j=i.run_state,f=j===void 0?"":j,d=i.state_desc,p=(0,Ce.UO)(),r=p.ws_id;return v==="running"?d?(0,t.jsxs)(W.Z,{size:0,children:[(0,t.jsx)(H,(0,Z.Z)((0,Z.Z)({},i),{},{children:v})),(0,t.jsx)(Y,{title:(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:d.replace(/(\d+)/g,'<a href="/ws/'.concat(r,'/test_result/$1" target="_blank">$1</a>'))}})})]}):f?(0,t.jsxs)(W.Z,{size:0,children:[(0,t.jsx)(H,(0,Z.Z)((0,Z.Z)({},i),{},{children:v})),(0,t.jsx)(Y,{title:l({id:"ws.result.details.not.assigned.server"})})]}):(0,t.jsxs)(W.Z,{size:0,children:[(0,t.jsx)(H,(0,Z.Z)((0,Z.Z)({},i),{},{children:v})),(0,t.jsx)(Y,{title:l({id:"ws.result.details.running,please.wait"})})]}):v==="pending"&&d?(0,t.jsxs)(W.Z,{size:0,children:[(0,t.jsx)(H,(0,Z.Z)((0,Z.Z)({},i),{},{children:v})),(0,t.jsx)(Y,{title:(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:d.replace(/(\d+)/g,'<a href="/ws/'.concat(r,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,t.jsx)(H,(0,Z.Z)({},i))},pe=function(i){return(0,t.jsx)(Q,(0,Z.Z)((0,Z.Z)({},i),{},{no_margin:1}))},ie=function(i){var o=i.title,l=i.desc,v=i.placement,j=v===void 0?"bottom":v;return(0,t.jsxs)(W.Z,{children:[(0,t.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:o}),(0,t.jsx)(y.Z,{overlayClassName:E().table_question_tooltip,placement:j,arrowPointAtCenter:!0,title:l,color:"#fff",children:(0,t.jsx)(s.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},I=function(i){var o=i.title,l=i.test_value,v=i.value_list,j=i.cv_value,f=i.max_value,d=i.min_value,p=i.metric,r=i.result,b=(0,K.YB)(),V=b.formatMessage,re=(0,Ee.oM)(V({id:"request.copy.success"})),ee=function(S){return S?new Number(S).toFixed(2):null},N=ee(f),J=ee(d),ne=j,U=ee(l),n=v.map(function(X){return ee(X)}),se="".concat(p," ").concat(o,`:
Avg: `).concat(U,`
CV:  `).concat(ne);se+=N?`
Max: `.concat(N):"",se+=J?`
Min: `.concat(J):"",se+=n.length?`
Test Record
`:"",se+=n.reduce(function(X,S,le){return X.concat("(".concat(le+1,") ").concat(S,`
`))},"");var fe="".concat(U,"\xB1").concat(ne),Me=function(){return r==="decline"?(0,t.jsx)("span",{className:E().result_popover_span,style:{color:"#C84C5A"},children:fe}):r==="increase"?(0,t.jsx)("span",{className:E().result_popover_span,style:{color:"#81BF84"},children:fe}):(0,t.jsx)("span",{className:E().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:fe})};return(0,t.jsx)(de.Z,{overlayClassName:E().metric_list_copy,title:(0,t.jsxs)(B.Z,{justify:"space-between",children:[(0,t.jsx)("b",{children:o}),(0,t.jsx)("span",{onClick:function(){return re(se)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,t.jsx)(K._H,{id:"operation.copy"})})]}),content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B.Z,{children:[(0,t.jsx)("b",{children:"Avg\uFF1A"}),(0,t.jsx)("span",{children:U})]}),(0,t.jsxs)(B.Z,{children:[(0,t.jsx)("b",{children:"CV\uFF1A"}),(0,t.jsx)("span",{children:ne})]}),(0,t.jsxs)(B.Z,{children:[(0,t.jsx)("b",{children:"Max\uFF1A"}),(0,t.jsx)("span",{children:N})]}),(0,t.jsxs)(B.Z,{children:[(0,t.jsx)("b",{children:"Min\uFF1A"}),(0,t.jsx)("span",{children:J})]}),n.length>0&&(0,t.jsx)(B.Z,{style:{marginTop:16},children:(0,t.jsx)("b",{children:"Test Record"})}),n.map(function(X,S){return(0,t.jsx)(B.Z,{children:"(".concat(S+1,")").concat(X)},S)})]}),children:Me()})}},79390:function(be,ve,a){"use strict";a.d(ve,{sL:function(){return k},ny:function(){return t},Fu:function(){return Pe}});var C=a(20418),W=a(39190),xe=a(488),de=a(26388),Z=a(11407),ce=a(68077),Te=a(2605),_e=a(74127),je=a(41428),x=a(22374),u=a(48434),B=a(97939),Oe=a(99648),y=a(52454),ze=["width","onResizeStart","onResize","onResizeStop","resize"],G=["columns","name","onColumnsChange"],te,me,E,ye=B.ZP.div(te||(te=(0,je.Z)([`
    position: relative;
    width: 100%;
`]))),s=B.ZP.div.attrs(function(M){return{style:{left:M.left,height:M==null?void 0:M.height}}})(me||(me=(0,je.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),Ce=(0,B.ZP)(u.Resizable)(E||(E=(0,je.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(M){var c=M.resize;return c?"col-resize":"default"}),K=function(c){var e=c.width,P=c.onResizeStart,D=c.onResize,w=c.onResizeStop,L=c.resize,F=(0,xe.Z)(c,ze);return(0,y.jsx)(Ce,(0,C.Z)((0,C.Z)({width:e||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:P,onResize:D,onResizeStop:w,resize:L?1:0},F),{},{children:(0,y.jsx)("th",(0,C.Z)({},F))}))},Ze=function(c){var e=c.columns,P=e===void 0?[]:e,D=c.name,w=c.onColumnsChange,L=(0,xe.Z)(c,G),F=x.useState(0),g=(0,W.Z)(F,2),_=g[0],ae=g[1],ue=x.useState(0),Y=(0,W.Z)(ue,2),H=Y[0],Q=Y[1],q=x.useState(!1),pe=(0,W.Z)(q,2),ie=pe[0],I=pe[1],m=x.useRef(null),i=(0,Oe.Z)(m),o=function(d){return function(p,r){var b;if((0,_e.Z)(r),!!P[d].ellipsis){var V=p.clientX,re=V-((b=m.current)===null||b===void 0?void 0:b.getBoundingClientRect().x);Q(re),ae(re),I(!0)}}},l=function(){return function(d){var p,r=d.clientX,b=r-((p=m.current)===null||p===void 0?void 0:p.getBoundingClientRect().x);ae(b)}},v=function(d){return function(p,r){var b,V=r.size,re=p.clientX,ee=re-((b=m.current)===null||b===void 0?void 0:b.getBoundingClientRect().x),N=(0,Te.Z)(P);if(N[d].ellipsis){var J=V.width+=ee-H,ne=N[d],U=ne.dataIndex,n=ne.key;J>20&&(N[d]=(0,C.Z)((0,C.Z)({},N[d]),{},{width:J}),D&&Pe(D,U||n,J),w==null||w())}ae(0),Q(0),I(!1)}},j=x.useMemo(function(){return P.reduce(function(f,d){return d.width?f+=d==null?void 0:d.width:f},0)},[P]);return(0,y.jsxs)(ye,{ref:m,className:"resize-table-wrapper",children:[(0,y.jsx)(ce.Z,(0,C.Z)((0,C.Z)({},L),{},{components:{header:{cell:K}},scroll:(c==null?void 0:c.scroll)||{x:j||(i==null?void 0:i.width)},columns:P.filter(Boolean).map(function(f,d){return(0,C.Z)((0,C.Z)({},f),{},{onHeaderCell:function(r){return{resize:!!f.ellipsis,width:r.width,onResizeStart:o(d),onResize:l(),onResizeStop:v(d)}}})})})),ie&&(0,y.jsx)(s,{height:i==null?void 0:i.height,left:_||H})]})},Be=Ze,Ee=["name","columns","refreshDeps","onColumnsChange"],Re="umi_locale",t=function(c,e){var P=localStorage.getItem(c),D=localStorage.getItem(Re)||"zh-CN";if(!!P)return JSON.parse(P)["".concat(D,"-").concat(e)]},Pe=function(c,e,P){var D=localStorage.getItem(c),w=localStorage.getItem(Re)||"zh-CN",L=(0,de.Z)({},"".concat(w,"-").concat(e),P);D?localStorage.setItem(c,JSON.stringify(Object.assign(JSON.parse(D),L))):localStorage.setItem(c,JSON.stringify(L))},k=function(c){var e=c.name,P=c.columns,D=c.refreshDeps,w=D===void 0?[]:D,L=c.onColumnsChange,F=(0,xe.Z)(c,Ee),g=x.useState([]),_=(0,W.Z)(g,2),ae=_[0],ue=_[1],Y=function(){return(P==null?void 0:P.filter(Boolean).map(function(Q){var q=Q.dataIndex,pe=Q.key,ie=Q.width,I=q||pe,m=t(e,I);!m&&ie&&Pe(e,I,ie);var i=m||ie;return i&&(Q.width=i),Q}))||[]};return x.useEffect(function(){ue(Y())},w),(0,y.jsx)(Be,(0,C.Z)({name:e,columns:ae,setColumns:ue,size:"small",onColumnsChange:function(){L==null||L(),ue(Y())}},F))}}}]);
