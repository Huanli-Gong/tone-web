(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1967],{86252:function(q){q.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},70487:function(q,S,n){"use strict";n.r(S);var Z=n(11407),y=n(41604),pe=n(31650),U=n(25100),o=n(20418),R=n(35832),T=n(32326),f=n(89963),ee=n(70077),h=n(39190),be=n(90772),m=n(39870),Ie=n(41428),d=n(22374),ve=n(2488),z=n(526),te=n(76742),ne=n(24812),_=n(22812),se=n(97939),re=n(78358),J=n(2656),x=n(39935),fe=n(4061),s=n(52454),$,ge=se.ZP.div($||($=(0,Ie.Z)([`
    .breadcrumb{
        height:50px;
        line-height:50px;
        padding-left:24px;
    }
    .content{
        //background:#fff;
        width: 97%;
        margin: 0 auto;
        height: auto;
        .site-collapse-custom-collapse{
            margin-bottom:16px;
            background:#fff;
            .total{
                height:20px;
                width:30px;
                border-radius: 12px;
                background: rgba(140,140,140,0.10);
                display: inline-block;
                text-align: center;
                margin-left:7px;
                color:rgba(0,0,0,0.75);
                font-size:12px;
                vertical-align: middle;
            }
            .ant-collapse-item > .ant-collapse-content > .ant-collapse-content-box{
                padding-top:2px;
                padding-bottom:1px;
            }
        }
    }
`]))),e=m.Z.Panel,ae=function(Ze){var he=(0,ne.UO)(),ie=he.type,xe=(0,ne.TH)(),K=xe.query.pk,Ee=(0,d.useState)(0),_e=(0,h.Z)(Ee,2),A=_e[0],je=_e[1],le=(0,d.useState)([]),ce=(0,h.Z)(le,2),De=ce[0],F=ce[1],L=(0,d.useState)(0),ue=(0,h.Z)(L,2),Y=ue[0],Pe=ue[1],ye=(0,d.useState)([]),de=(0,h.Z)(ye,2),l=de[0],t=de[1],r=(0,d.useState)(!0),a=(0,h.Z)(r,2),u=a[0],p=a[1],b=(0,d.useState)({page_num:1,page_size:10}),E=(0,h.Z)(b,2),j=E[0],I=E[1],Me=(0,d.useState)({page_num:1,page_size:10}),me=(0,h.Z)(Me,2),B=me[0],H=me[1],Q=(0,z.CR)(),V=Q.height,G=d.useState(),w=(0,h.Z)(G,2),D=w[0],W=w[1],X=function(){return(0,s.jsxs)(ee.Z,{className:"breadcrumb",children:[(0,s.jsx)(ee.Z.Item,{children:(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return _.m8.push("/system/suite")},children:(0,s.jsx)(_._H,{id:"SystemConf.menuLayout.suiteManagement"})})}),(0,s.jsx)(ee.Z.Item,{children:(0,s.jsxs)("span",{style:{cursor:"pointer",color:"rgba(0,0,0,0.85)"},children:[+ie==1?"Suite":"Conf",(0,s.jsxs)("span",{style:{color:"rgba(0,0,0,0.65)"},children:["(",D==null?void 0:D.name,")"]}),(0,s.jsx)(_._H,{id:"reference.details"})]})})]})},Te=(0,d.useMemo)(function(){return A>0},[A]),M=function(){var g=(0,T.Z)((0,R.Z)().mark(function c(){var i,O;return(0,R.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,fe.Ic)({pk:K});case 2:if(i=v.sent,O=i.data,O){v.next=6;break}return v.abrupt("return");case 6:W(O);case 7:case"end":return v.stop()}},c)}));return function(){return g.apply(this,arguments)}}(),C=function(){var g=(0,T.Z)((0,R.Z)().mark(function c(){var i,O,k,v,Re,Ae,Oe,Le,N;return(0,R.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return i=D.id,p(!0),O=(0,o.Z)({flag:"job"},j),k=(0,o.Z)({flag:"template"},B),ie==="suite"?(O.suite_id=i,k.suite_id=i):(O.case_id_list=i,k.case_id_list=i),P.next=7,(0,J.Ob)(O);case 7:if(v=P.sent,Re=v.total,Ae=v.data,Oe=v.code,Le=v.msg,Oe===200){P.next=16;break}return(0,x.EV)(Oe,Le),p(!1),P.abrupt("return");case 16:return je(Re),F(Ae),P.next=20,(0,J.Ob)(k);case 20:if(N=P.sent,N.code===200){P.next=25;break}return(0,x.EV)(N.code,N.msg),p(!1),P.abrupt("return");case 25:Pe(N.total),t(N.data),p(!1);case 28:case"end":return P.stop()}},c)}));return function(){return g.apply(this,arguments)}}();d.useEffect(function(){!D||C()},[D,j,B]),(0,d.useEffect)(function(){!K||M()},[K]);var Ce=[{title:(0,s.jsx)(_._H,{id:"workspace.ws.name"}),dataIndex:"ws_show_name",key:"ws_show_name"},{title:"Job ID",dataIndex:"id",key:"id"},{title:(0,s.jsx)(_._H,{id:"analysis.job.name"}),dataIndex:"name",key:"name",render:function(c,i){return(0,s.jsx)("span",{onClick:function(){return window.open("/ws/".concat(i.ws_id,"/test_result/").concat(i.id))},style:{color:"#1890FF",cursor:"pointer"},children:c})}},{title:(0,s.jsx)(_._H,{id:"ws.dashboard.job.state"}),dataIndex:"state",key:"state",render:function(c,i){return(0,s.jsx)(re.JQ,(0,o.Z)({},i))}},{title:(0,s.jsx)(_._H,{id:"device.create_user"}),dataIndex:"creator_name",key:"creator_name"},{title:(0,s.jsx)(_._H,{id:"common.createTime"}),dataIndex:"gmt_created",key:"gmt_created"}],Be=[{title:(0,s.jsx)(_._H,{id:"workspace.ws.name"}),dataIndex:"ws_show_name",key:"ws_show_name"},{title:(0,s.jsx)(_._H,{id:"ws.test.job.template.name"}),dataIndex:"name",key:"name",render:function(c,i){return(0,s.jsx)(U.Z.Link,{ellipsis:!0,target:"_blank",href:"/ws/".concat(i.ws_id,"/test_template/").concat(i.id,"/preview"),children:c})}},{title:(0,s.jsx)(_._H,{id:"device.create_user"}),dataIndex:"creator_name",key:"creator_name"},{title:(0,s.jsx)(_._H,{id:"common.createTime"}),dataIndex:"gmt_created",key:"gmt_created"}],We=function(c){return c.children};return(0,s.jsxs)(ge,{children:[(0,s.jsx)(X,{}),(0,s.jsx)("div",{className:"content",style:{height:V-88,overflowY:"auto"},children:(0,s.jsxs)(We,{children:[A>0&&(0,s.jsx)(m.Z,{bordered:!1,ghost:!0,defaultActiveKey:"1",expandIcon:function(c){var i=c.isActive;return(0,s.jsx)(ve.Z,{rotate:i?90:0})},className:"site-collapse-custom-collapse",children:(0,s.jsxs)(e,{header:(0,s.jsxs)("div",{children:[(0,s.jsx)(_._H,{id:"analysis.job.table"}),(0,s.jsx)("span",{className:"total",children:A})]}),className:"site-collapse-custom-panel",children:[(0,s.jsx)(y.Z,{dataSource:De,columns:Ce,size:"small",loading:u,rowKey:"id",pagination:!1}),(0,s.jsx)(te.Z,{pageSize:j.page_size,currentPage:j.page_num,total:A,onPageChange:function(c,i){return I((0,o.Z)((0,o.Z)({},j),{},{page_size:i,page_num:c}))}})]},"1")}),Y>0&&(0,s.jsx)(m.Z,{bordered:!1,ghost:!0,defaultActiveKey:Te?"0":"1",expandIcon:function(c){var i=c.isActive;return(0,s.jsx)(ve.Z,{rotate:i?90:0})},className:"site-collapse-custom-collapse",children:(0,s.jsxs)(e,{header:(0,s.jsxs)("div",{children:[(0,s.jsx)(_._H,{id:"template.list"}),(0,s.jsx)("span",{className:"total",children:Y})]}),className:"site-collapse-custom-panel",children:[(0,s.jsx)(y.Z,{dataSource:l,columns:Be,size:"small",loading:u,rowKey:"id",pagination:!1}),(0,s.jsx)(te.Z,{pageSize:B.page_size,currentPage:B.page_num,total:Y,onPageChange:function(c,i){return H((0,o.Z)((0,o.Z)({},B),{},{page_size:i,page_num:c}))}})]},"1")})]})})]})};S.default=ae},4061:function(q,S,n){"use strict";n.d(S,{J1:function(){return y},Wt:function(){return pe},Ce:function(){return U},Pm:function(){return o},Ic:function(){return R}});var Z=n(22812),y=function(f){return(0,Z.WY)("/api/case/ws_case/confirm/",{data:f,method:"post"})},pe=function(f){return(0,Z.WY)("/api/job/type/del/",{method:"post",data:f})},U=function(f){return(0,Z.WY)("/api/job/template/del/",{method:"post",data:f})},o=function(f){return(0,Z.WY)("/api/server/del_confirm/",{method:"post",data:f})},R=function(f){return(0,Z.WY)("/api/case/ws_case/params/",{params:f})}},78358:function(q,S,n){"use strict";n.d(S,{gN:function(){return Ze},tZ:function(){return he},yQ:function(){return ie},Pc:function(){return xe},cQ:function(){return _e},YV:function(){return A},Nq:function(){return je},JQ:function(){return Y},iK:function(){return Pe},fD:function(){return ye},QN:function(){return de}});var Z=n(57359),y=n(34423),pe=n(13059),U=n(53676),o=n(20418),R=n(51937),T=n(34516),f=n(41428),ee=n(70772),h=n(6701),be=n(14320),m=n(53479),Ie=n(79625),d=n(96584),ve=n(89963),z=n(70077),te=n(22374),ne=n(86252),_=n.n(ne),se=n(93329),re=n(74066),J=n(24812),x=n(22812),fe=n(97939),s=n(39935),$=n(526),ge=n(6130),e=n(52454),ae,oe=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),Ze=function(t){var r=(0,J.UO)(),a=r.ws_id;return(0,e.jsxs)(z.Z,{style:{marginBottom:t.bottomHeight},children:[(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return x.m8.push("/ws/".concat(a,"/test_result"))},children:(0,e.jsx)(x._H,{id:"ws.result.details.test.result"})})}),(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)(x._H,{id:"ws.result.details.result.details"})})]})},he=function(t){return t==="success"||t===!0?(0,e.jsx)("span",{style:{fontWeight:500,color:"#81BF84"},children:"Success"}):t==="fail"||t===!1?(0,e.jsx)("span",{style:{fontWeight:500,color:"#C84C5A"},children:"Fail"}):t==="running"?(0,e.jsx)("span",{style:{fontWeight:500,color:"#649FF6"},children:"Running"}):t==="stop"?(0,e.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Stop"}):t==="pending"?(0,e.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Pending"}):t==="skip"?(0,e.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Skip"}):(0,e.jsx)(e.Fragment,{})},ie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(a){return a?(0,e.jsx)(ge.K,{ellipsis:{tooltip:!0},children:a}):t}}},xe=function(t){var r=t.title,a=t.width,u=a===void 0?"100%":a,p=t.onEdit,b=t.access,E=(0,te.useRef)(),j=b?(0,e.jsx)(se.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:p}):(0,e.jsx)(se.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return(0,s.WR)()}});return(0,e.jsx)("div",{ref:E,style:{width:u},children:(0,e.jsxs)(m.Z,{style:{width:u},justify:"start",align:"middle",children:[(0,e.jsx)(d.Z,{placement:"topLeft",title:r,children:(0,e.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r||"-"})}),j]})})},K=function(t){return oe.get(t)||"#D9D9D9"},Ee=function(t){var r=t.text,a=(0,x.YB)(),u=(0,$.oM)(a.formatMessage({id:"request.copy.success"}));return(0,e.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return u(r)},children:a.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},_e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(a){return a?(0,e.jsx)(d.Z,{overlayClassName:_().tootip_overflow,placement:"topLeft",title:(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(h.Z,{span:24,children:a}),(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(m.Z,{justify:"center",children:(0,e.jsx)(Ee,{text:a})})})]}),children:a}):t}}},A=function(t){return t==="decline"?"#C84C5A":t==="normal"?"#000000":t==="increase"?"#81BF84":""},je=function(t,r,a){return t==="decline"?(0,e.jsx)("span",{style:{color:"#C84C5A"},children:a({id:"ws.result.details.".concat(t)})}):t==="normal"?(0,e.jsx)("span",{style:{color:"#000000"},children:a({id:"ws.result.details.".concat(t)})}):t==="increase"?(0,e.jsx)("span",{style:{color:"#81BF84"},children:a({id:"ws.result.details.".concat(t)})}):r||"-"},le=(0,fe.ZP)(T.Z)(ae||(ae=(0,f.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(l){var t=l.no_margin;return t?"margin-right: 0;":""}),ce=function(t){return(0,e.jsx)(le,(0,o.Z)({},t))},De=function(t){var r=(0,x.YB)(),a=r.formatMessage;return(0,e.jsx)(d.Z,{title:a({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,e.jsx)(le,(0,o.Z)({},t))})},F=function(t){var r=t.title;return(0,e.jsx)(U.Z,{title:r,placement:"right",trigger:"hover",overlayClassName:_().tag_popover_style,children:(0,e.jsx)(re.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},L=function(t){var r=t.state;return(0,e.jsx)(ce,(0,o.Z)((0,o.Z)({},t),{},{color:K(r),style:!oe.get(r)&&{color:"#1d1d1d"},children:r==="success"?"complete":r}))},ue=function(t){var r=t.state;return(0,e.jsx)(De,(0,o.Z)((0,o.Z)({},t),{},{color:K(r),style:!oe.get(r)&&{color:"#1d1d1d"},children:r==="success"?"complete":r}))},Y=function(t){var r=(0,x.YB)(),a=r.formatMessage,u=t.state,p=t.run_state,b=p===void 0?"":p,E=t.state_desc,j=(0,J.UO)(),I=j.ws_id;return u==="running"?E?(0,e.jsxs)(y.Z,{size:0,children:[(0,e.jsx)(L,(0,o.Z)((0,o.Z)({},t),{},{children:u})),(0,e.jsx)(F,{title:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:E.replace(/(\d+)/g,'<a href="/ws/'.concat(I,'/test_result/$1" target="_blank">$1</a>'))}})})]}):b?(0,e.jsxs)(y.Z,{size:0,children:[(0,e.jsx)(L,(0,o.Z)((0,o.Z)({},t),{},{children:u})),(0,e.jsx)(F,{title:a({id:"ws.result.details.not.assigned.server"})})]}):(0,e.jsxs)(y.Z,{size:0,children:[(0,e.jsx)(L,(0,o.Z)((0,o.Z)({},t),{},{children:u})),(0,e.jsx)(F,{title:a({id:"ws.result.details.running,please.wait"})})]}):u==="pending"&&E?(0,e.jsxs)(y.Z,{size:0,children:[(0,e.jsx)(L,(0,o.Z)((0,o.Z)({},t),{},{children:u})),(0,e.jsx)(F,{title:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:E.replace(/(\d+)/g,'<a href="/ws/'.concat(I,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,e.jsx)(L,(0,o.Z)({},t))},Pe=function(t){return(0,e.jsx)(ue,(0,o.Z)((0,o.Z)({},t),{},{no_margin:1}))},ye=function(t){var r=t.title,a=t.desc,u=t.placement,p=u===void 0?"bottom":u;return(0,e.jsxs)(y.Z,{children:[(0,e.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:r}),(0,e.jsx)(d.Z,{overlayClassName:_().table_question_tooltip,placement:p,arrowPointAtCenter:!0,title:a,color:"#fff",children:(0,e.jsx)(re.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},de=function(t){var r=t.title,a=t.test_value,u=t.value_list,p=t.cv_value,b=t.max_value,E=t.min_value,j=t.metric,I=t.result,Me=(0,x.YB)(),me=Me.formatMessage,B=(0,$.oM)(me({id:"request.copy.success"})),H=function(C){return C?new Number(C).toFixed(2):null},Q=H(b),V=H(E),G=p,w=H(a),D=u.map(function(M){return H(M)}),W="".concat(j," ").concat(r,`:
Avg: `).concat(w,`
CV:  `).concat(G);W+=Q?`
Max: `.concat(Q):"",W+=V?`
Min: `.concat(V):"",W+=D.length?`
Test Record
`:"",W+=D.reduce(function(M,C,Ce){return M.concat("(".concat(Ce+1,") ").concat(C,`
`))},"");var X="".concat(w,"\xB1").concat(G),Te=function(){return I==="decline"?(0,e.jsx)("span",{className:_().result_popover_span,style:{color:"#C84C5A"},children:X}):I==="increase"?(0,e.jsx)("span",{className:_().result_popover_span,style:{color:"#81BF84"},children:X}):(0,e.jsx)("span",{className:_().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:X})};return(0,e.jsx)(U.Z,{overlayClassName:_().metric_list_copy,title:(0,e.jsxs)(m.Z,{justify:"space-between",children:[(0,e.jsx)("b",{children:r}),(0,e.jsx)("span",{onClick:function(){return B(W)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,e.jsx)(x._H,{id:"operation.copy"})})]}),content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(m.Z,{children:[(0,e.jsx)("b",{children:"Avg\uFF1A"}),(0,e.jsx)("span",{children:w})]}),(0,e.jsxs)(m.Z,{children:[(0,e.jsx)("b",{children:"CV\uFF1A"}),(0,e.jsx)("span",{children:G})]}),(0,e.jsxs)(m.Z,{children:[(0,e.jsx)("b",{children:"Max\uFF1A"}),(0,e.jsx)("span",{children:Q})]}),(0,e.jsxs)(m.Z,{children:[(0,e.jsx)("b",{children:"Min\uFF1A"}),(0,e.jsx)("span",{children:V})]}),D.length>0&&(0,e.jsx)(m.Z,{style:{marginTop:16},children:(0,e.jsx)("b",{children:"Test Record"})}),D.map(function(M,C){return(0,e.jsx)(m.Z,{children:"(".concat(C+1,")").concat(M)},C)})]}),children:Te()})}}}]);
