(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8226],{59e3:function(Je){Je.exports={code_wrapper:"code_wrapper___3eANK"}},17286:function(Je,fe,t){"use strict";var ct=t(61679),Pe=t.n(ct),me=t(4974),pe=t.n(me),De=t(51935),se=t.n(De),q=t(48304),ie=t(59e3),Re=t.n(ie),ve=t(52454);fe.Z=function(te){var he=te.code,Ue=te.onChange,ne=te.readOnly,Ot=ne===void 0?!1:ne,S=te.mode,Ee=S===void 0?"shell":S;return(0,ve.jsx)(q.fk,{value:he,className:Re().code_wrapper,options:{theme:"monokai",keyMap:"sublime",lineNumbers:Ee==="yaml",mode:Ee,readOnly:Ot},onBeforeChange:function(St,V,Ve){return Ue(Ve)}})}},79638:function(Je,fe,t){"use strict";var ct=t(79625),Pe=t(96584),me=t(20418),pe=t(39190),De=t(488),se=t(41428),q=t(22374),ie=t(97939),Re=t(526),ve=t(52454),te=["title","children","width","color","placement","style"],he,Ue=ie.ZP.div(he||(he=(0,se.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),ne=function(S){var Ee=S.title,Me=S.children,St=S.width,V=S.color,Ve=S.placement,A=Ve===void 0?"topLeft":Ve,Vt=S.style,Ke=(0,De.Z)(S,te),ge=(0,q.useRef)(null),M=(0,q.useState)(!1),Ye=(0,pe.Z)(M,2),L=Ye[0],_=Ye[1],K=(0,Re.CR)(),F=K.width,l=function(){var Y,Ze,Pt=ge==null||(Y=ge.current)===null||Y===void 0?void 0:Y.clientWidth,w=ge==null||(Ze=ge.current)===null||Ze===void 0?void 0:Ze.scrollWidth;_(Pt<w)};(0,q.useEffect)(function(){l()},[Ee,F]);var f=(0,ve.jsx)(Ue,(0,me.Z)((0,me.Z)({ref:ge,style:(0,me.Z)({width:St,color:V},Vt)},Ke),{},{children:Me||Ee||"-"}));return L?(0,ve.jsx)(Pe.Z,{title:Ee,placement:A,overlayStyle:{wordBreak:"break-all"},children:f}):f};fe.Z=ne},85879:function(Je,fe,t){"use strict";var ct=t(53374),Pe=t(61674),me=t(41428),pe=t(22812),De=t(97939),se=t(39935),q=t(52454),ie,Re=De.ZP.span(ie||(ie=(0,me.Z)([`
  font-family: PingFangSC;
  font-weight: 400;
  font-size: 14px;
  color: #1890FF;
  letter-spacing: 0;
  line-height: 24px;
  cursor: pointer;
`])));fe.Z=function(){var ve=(0,pe.YB)(),te=ve.formatMessage,he=function(){return pe.m8.push("/login?redirect_url=".concat(window.location.pathname))};return(0,q.jsx)(Pe.Z,{message:(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{children:te({id:"you.haven.not.signed.in"})}),(0,q.jsx)(Re,{onClick:he,children:te({id:"go.to.login"})})]}),type:"info",showIcon:!0,closable:!0})}},59164:function(Je,fe,t){"use strict";t.r(fe),t.d(fe,{default:function(){return wr}});var ct=t(20632),Pe=t(71853),me=t(67448),pe=t(47548),De=t(70772),se=t(6701),q=t(51937),ie=t(34516),Re=t(13059),ve=t(53676),te=t(52730),he=t(25205),Ue=t(20693),ne=t(3278),Ot=t(14320),S=t(53479),Ee=t(31650),Me=t(25100),St=t(57359),V=t(34423),Ve=t(46721),A=t(94867),Vt=t(163),Ke=t(60318),ge=t(81138),M=t(96146),Ye=t(488),L=t(35832),_=t(20418),K=t(32326),F=t(39190),l=t(22374),f=t(22812),Lt=t(24812),Y=t(39935),Ze=t(526),Pt=t(50690),w=t.n(Pt),Rn=t(79638),Mn=t(85879),kn=t(67164),In=t(2656),An=t(18406),Bn=t(2514),Wn=t(53770),Nn=t(60798),$n=t(22686),Hn=t(48451),Jn=t(19208),Ka=t(88018),Un=t(58414),Ya=t(88966),ke=t(11048),za=t(65790),re=t(17187),Vn=t(67945),Kn=t.n(Vn),e=t(52454),Yn=(0,l.forwardRef)(function(u,c){var h=u.onOk,s=(0,f.YB)(),a=s.formatMessage,Z=re.Z.useForm(),_e=(0,F.Z)(Z,1),be=_e[0],Te=(0,l.useState)(!1),ee=(0,F.Z)(Te,2),B=ee[0],z=ee[1],le=(0,l.useState)(!1),ze=(0,F.Z)(le,2),k=ze[0],oe=ze[1];(0,l.useImperativeHandle)(c,function(){return{show:function(){oe(!0)},hide:function(){return oe(!1)}}});var Ie=function(){be.resetFields(),oe(!1)},Ae=function(){z(!0),be.validateFields().then(function(Ge){h(Ge),z(!1)}).catch(function(Ge){console.log(Ge),z(!1)})};return(0,e.jsx)(Un.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(f._H,{id:"ws.test.job.template.drawer.title"}),width:"380",onClose:Ie,visible:k,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(A.Z,{onClick:Ie,children:(0,e.jsx)(f._H,{id:"operation.cancel"})}),(0,e.jsx)(A.Z,{type:"primary",disabled:B,onClick:Ae,children:(0,e.jsx)(f._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(re.Z,{form:be,layout:"vertical",className:Kn().job_test_form,children:[(0,e.jsx)(re.Z.Item,{name:"template_name",label:(0,e.jsx)(f._H,{id:"ws.test.job.template_name"}),rules:[{required:!0,message:a({id:"ws.test.job.template_name.rules1"}),whitespace:!0,type:"string",pattern:/^[A-Za-z0-9\._-]{1,64}$/g},{type:"string",min:1,message:a({id:"ws.test.job.template_name.rules2"}),whitespace:!0}],children:(0,e.jsx)(ne.Z,{autoComplete:"off",placeholder:a({id:"ws.test.job.template_name.rules1"})})}),(0,e.jsx)(re.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(ne.Z.TextArea,{placeholder:a({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(re.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)(ke.ZP.Group,{children:[(0,e.jsx)(ke.ZP,{value:!0,children:(0,e.jsx)(f._H,{id:"operation.yes"})}),(0,e.jsx)(ke.ZP,{value:!1,children:(0,e.jsx)(f._H,{id:"operation.no"})})]})})]})})}),zn=t(24895),Gn=t.n(zn),Qn=(0,l.forwardRef)(function(u,c){var h=u.disabled,s=u.template,a=u.onEnabelChange,Z=(0,f.YB)(),_e=Z.formatMessage,be=re.Z.useForm(),Te=(0,F.Z)(be,1),ee=Te[0];return(0,l.useImperativeHandle)(c,function(){return{form:ee,reset:ee.resetFields,setVal:function(z){ee.setFieldsValue(z)}}}),(0,l.useEffect)(function(){if(JSON.stringify(s)!=="{}"){var B=s.template_name,z=s.description,le=s.enable;ee.setFieldsValue({template_name:B,description:z,enable:le})}},[s]),(0,e.jsxs)(re.Z,{colon:!1,layout:"horizontal",size:"small",labelCol:{span:5},wrapperCol:{span:14},style:{width:"100%"},name:"basic",form:ee,className:Gn().job_test_form,initialValues:{enable:!0},children:[(0,e.jsx)(re.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.template.name"}),name:"template_name",rules:[{required:!0,pattern:/^[A-Za-z0-9\._-]{1,64}$/g,message:_e({id:"ws.test.job.template.message"})}],children:(0,e.jsx)(ne.Z,{autoComplete:"off",disabled:h,placeholder:_e({id:"ws.test.job.template.message"})})}),(0,e.jsx)(re.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(ne.Z.TextArea,{rows:2,disabled:h,autoComplete:"off",placeholder:_e({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(re.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.enable"}),name:"enable",children:(0,e.jsxs)(ke.ZP.Group,{disabled:h,onChange:function(z){var le=z.target;return a(le.value)},children:[(0,e.jsx)(ke.ZP,{value:!0,children:(0,e.jsx)(f._H,{id:"operation.yes"})}),(0,e.jsx)(ke.ZP,{value:!1,children:(0,e.jsx)(f._H,{id:"operation.no"})})]})})]})}),we=t(75841),ft=t(32237),Xn=t(97207),b=t.n(Xn),Kt,qn=["svgRef","title"];function mt(){return mt=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&(u[s]=h[s])}return u},mt.apply(this,arguments)}function er(u,c){if(u==null)return{};var h=tr(u,c),s,a;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(u);for(a=0;a<Z.length;a++)s=Z[a],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(h[s]=u[s]))}return h}function tr(u,c){if(u==null)return{};var h={},s=Object.keys(u),a,Z;for(Z=0;Z<s.length;Z++)a=s[Z],!(c.indexOf(a)>=0)&&(h[a]=u[a]);return h}var nr=function(c){var h=c.svgRef,s=c.title,a=er(c,qn);return l.createElement("svg",mt({width:"10px",height:"10px",viewBox:"0 0 10 10",ref:h},a),s?l.createElement("title",null,s):null,Kt||(Kt=l.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",fillOpacity:.65},l.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-1211.000000, -200.000000)",fill:"#000000",fillRule:"nonzero"},l.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},l.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-2",transform:"translate(1091.000833, 10.000000)"},l.createElement("g",{id:"\\u5207\\u6362",transform:"translate(0.000000, 7.000000)"},l.createElement("path",{d:"M7.91600701,2.00566619 C8.46849532,2.00566619 8.99835515,2.22514132 9.38902338,2.61580956 C9.77969162,3.00647779 9.99916674,3.53633762 9.99916674,4.08882594 L9.99916674,5.33872178 L9.16590285,5.33872178 L9.16590285,4.08882594 C9.16590285,3.39852752 8.60630542,2.83893009 7.91600701,2.83893009 L0.416631951,2.83893009 C0.235547567,2.83877357 0.075300007,2.72166479 0.020151264,2.54918235 C-0.0349974789,2.3766999 0.027582607,2.18834524 0.174985418,2.08315973 L3.09057579,0 L3.57386885,0.678276807 L1.71569037,2.00566619 L7.91517374,2.00566619 L7.91600701,2.00566619 Z M2.08315974,7.83851346 C1.53067143,7.83851347 1.00081159,7.61903834 0.61014336,7.2283701 C0.219475125,6.83770187 0,6.30784203 0,5.75535372 L0,4.50545788 L0.833263901,4.50545788 L0.833263901,5.75535372 C0.833263901,6.44565213 1.39286133,7.00524956 2.08315974,7.00524956 L9.5825348,7.00524956 C9.76361918,7.00540608 9.92386674,7.12251487 9.97901548,7.29499731 C10.0341642,7.46747976 9.97158413,7.65583442 9.82418132,7.76101992 L6.9077577,9.84417965 L6.42446463,9.16590285 L8.28264312,7.83851346 L2.08232647,7.83851346 L2.08315974,7.83851346 Z",id:"\\u5F62\\u72B6"}))))))))},rr=l.forwardRef(function(u,c){return l.createElement(nr,mt({svgRef:c},u))}),Ga=t.p+"static/yaml_format.2c7f34f4.svg",Yt,ar=["svgRef","title"];function pt(){return pt=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&(u[s]=h[s])}return u},pt.apply(this,arguments)}function sr(u,c){if(u==null)return{};var h=ir(u,c),s,a;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(u);for(a=0;a<Z.length;a++)s=Z[a],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(h[s]=u[s]))}return h}function ir(u,c){if(u==null)return{};var h={},s=Object.keys(u),a,Z;for(Z=0;Z<s.length;Z++)a=s[Z],!(c.indexOf(a)>=0)&&(h[a]=u[a]);return h}var lr=function(c){var h=c.svgRef,s=c.title,a=sr(c,ar);return l.createElement("svg",pt({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},a),s?l.createElement("title",null,s):null,Yt||(Yt=l.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},l.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-187.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},l.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},l.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD",transform:"translate(67.000000, 10.000000)"},l.createElement("g",{id:"\\u590D\\u5236",transform:"translate(0.000000, 5.000000)"},l.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),l.createElement("path",{d:"M9.75,9.125 L9.125,9.125 L9.125,8.5 L9.75,8.5 C10.095178,8.5 10.375,8.22017797 10.375,7.875 L10.375,2.25 C10.375,1.90482203 10.095178,1.625 9.75,1.625 L4.125,1.625 C3.77982203,1.625 3.5,1.90482203 3.5,2.25 L3.5,2.875 L2.875,2.875 L2.875,2.25 C2.875,1.55964406 3.43464406,1 4.125,1 L9.75,1 C10.4403559,1 11,1.55964406 11,2.25 L11,7.875 C11,8.56535594 10.4403559,9.125 9.75,9.125 Z M7.875,11 L2.25,11 C1.55964406,11 1,10.4403559 1,9.75 L1,4.125 C1,3.43464406 1.55964406,2.875 2.25,2.875 L7.875,2.875 C8.56535594,2.875 9.125,3.43464406 9.125,4.125 L9.125,9.75 C9.125,10.4403559 8.56535594,11 7.875,11 Z M2.25,3.5 C1.90482203,3.5 1.625,3.77982203 1.625,4.125 L1.625,9.75 C1.625,10.095178 1.90482203,10.375 2.25,10.375 L7.875,10.375 C8.22017797,10.375 8.5,10.095178 8.5,9.75 L8.5,4.125 C8.5,3.77982203 8.22017797,3.5 7.875,3.5 L2.25,3.5 Z",id:"\\u5F62\\u72B6"}))))))))},or=l.forwardRef(function(u,c){return l.createElement(lr,pt({svgRef:c},u))}),Qa=t.p+"static/yaml_copy.deb8ded0.svg",zt,ur=["svgRef","title"];function vt(){return vt=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&(u[s]=h[s])}return u},vt.apply(this,arguments)}function dr(u,c){if(u==null)return{};var h=cr(u,c),s,a;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(u);for(a=0;a<Z.length;a++)s=Z[a],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(h[s]=u[s]))}return h}function cr(u,c){if(u==null)return{};var h={},s=Object.keys(u),a,Z;for(Z=0;Z<s.length;Z++)a=s[Z],!(c.indexOf(a)>=0)&&(h[a]=u[a]);return h}var fr=function(c){var h=c.svgRef,s=c.title,a=dr(c,ur);return l.createElement("svg",vt({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},a),s?l.createElement("title",null,s):null,zt||(zt=l.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},l.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-241.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},l.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},l.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-3",transform:"translate(121.000000, 10.000000)"},l.createElement("g",{id:"\\u4E0B\\u8F7D",transform:"translate(0.000000, 5.000000)"},l.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),l.createElement("path",{d:"M9.76628906,6.76792969 L9.76628906,9.39292969 L2.26628906,9.39292969 L2.26628906,6.76792969 C2.26628906,6.71615299 2.22431576,6.67417969 2.17253906,6.67417969 L1.70378906,6.67417969 C1.65201237,6.67417969 1.61003906,6.71615299 1.61003906,6.76792969 L1.61003906,9.67417969 C1.61003906,9.88128647 1.77793228,10.0491797 1.98503906,10.0491797 L10.0475391,10.0491797 C10.2546458,10.0491797 10.4225391,9.88128647 10.4225391,9.67417969 L10.4225391,6.76792969 C10.4225391,6.71615299 10.3805658,6.67417969 10.3287891,6.67417969 L9.86003906,6.67417969 C9.80826237,6.67417969 9.76628906,6.71615299 9.76628906,6.76792969 Z M5.54015625,7.23808594 L5.54015625,1.9921875 C5.54015625,1.93359375 5.58210938,1.88507812 5.63390625,1.88507812 L6.19640625,1.88507812 C6.24820312,1.88507812 6.29015625,1.93300781 6.29015625,1.9921875 L6.29015625,7.23867188 L5.54015625,7.23808594 Z M5.63929688,7.94273438 L3.2109375,5.14324219 C3.18695638,5.11557797 3.18127346,5.07648476 3.19638545,5.04313764 C3.21149744,5.00979052 3.24463907,4.98829152 3.28125,4.98808594 L3.984375,4.98808594 C4.03874685,4.98808594 4.09044112,5.01168849 4.12605469,5.05277344 L5.92253906,7.12617187 L7.71867187,5.05289063 C7.75428544,5.01180568 7.80597971,4.98820334 7.86035156,4.98820313 L8.56347656,4.98820313 C8.60008749,4.98840871 8.63322912,5.00990771 8.64834111,5.04325483 C8.6634531,5.07660195 8.65777018,5.11569516 8.63378906,5.14335938 L6.20578125,7.94273438 C6.13455555,8.02482249 6.03122006,8.07197257 5.92253906,8.07197257 C5.81385806,8.07197257 5.71052258,8.02482249 5.63929687,7.94273438 L5.63929688,7.94273438 Z",id:"\\u5F62\\u72B6"}))))))))},mr=l.forwardRef(function(u,c){return l.createElement(fr,vt({svgRef:c},u))}),Xa=t.p+"static/yaml_download.50c0c969.svg",Gt,pr=["svgRef","title"];function ht(){return ht=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&(u[s]=h[s])}return u},ht.apply(this,arguments)}function vr(u,c){if(u==null)return{};var h=hr(u,c),s,a;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(u);for(a=0;a<Z.length;a++)s=Z[a],!(c.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,s)||(h[s]=u[s]))}return h}function hr(u,c){if(u==null)return{};var h={},s=Object.keys(u),a,Z;for(Z=0;Z<s.length;Z++)a=s[Z],!(c.indexOf(a)>=0)&&(h[a]=u[a]);return h}var gr=function(c){var h=c.svgRef,s=c.title,a=vr(c,pr);return l.createElement("svg",ht({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},a),s?l.createElement("title",null,s):null,Gt||(Gt=l.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},l.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-132.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},l.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},l.createElement("g",{id:"\\u7F16\\u7EC4-4",transform:"translate(12.000000, 10.000000)"},l.createElement("g",{id:"icon_\\u5BF9\\u53F7-\\u7EBF",transform:"translate(0.000000, 5.000000)"},l.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),l.createElement("path",{d:"M5.07007084,8.82774395 C4.96931758,8.8279648 4.87265067,8.78792641 4.80156211,8.71652833 L2.20138155,6.11634779 C2.05338453,5.96793191 2.05338453,5.72774618 2.20138155,5.57933031 C2.27322578,5.50766751 2.36847381,5.46811689 2.46989029,5.4681169 C2.57130677,5.46811691 2.66673622,5.50766752 2.73839903,5.57933031 L5.07025227,7.91118355 L9.35205949,3.62901348 C9.42310215,3.55754689 9.51979898,3.51749611 9.62056822,3.51779834 C9.7219847,3.51779834 9.81741415,3.55716925 9.88907696,3.62901348 C10.0369743,3.77747052 10.0369743,4.0175739 9.88907696,4.16603095 L5.33857957,8.71652833 C5.26755994,8.78802927 5.17084809,8.82808628 5.07007084,8.82774395 Z",id:"\\u8DEF\\u5F84"}))))))))},_r=l.forwardRef(function(u,c){return l.createElement(gr,ht({svgRef:c},u))}),qa=t.p+"static/yaml_test.151c552f.svg",br=t(17286),jr=t(99648),yr=["env_info","rpm_info","script_info","moniter_contrl","monitor_info","reclone_contrl","app_name","os","vm","need_reboot","kernel_version","kernel_install","code_repo","code_branch","compile_branch","cpu_arch","commit_id","kernel_packages","build_config","build_machine","scripts","kernel","devel","headers","hotfix_install"],Er=["branch"],Zr=function(c){var h=(0,f.YB)(),s=h.formatMessage,a=c.route.name,Z=(0,Ze.CR)(),_e=Z.height,be=Z.width,Te=["TemplatePreview","TemplateEdit","JobTypePreview"].includes(a),ee=(0,f.tT)("@@initialState"),B=ee.initialState,z=ee.setInitialState,le=B.authList,ze=(0,Lt.UO)(),k=ze.ws_id,oe=ze.jt_id,Ie=(0,Lt.TH)(),Ae=Ie.query,Ce=Ie.state,Ge=Ie.pathname,Qe=(0,f.md)();(0,Ze.jk)("Workspace.".concat(a));var Tr=(0,l.useState)([]),Qt=(0,F.Z)(Tr,2),Cr=Qt[0],Dt=Qt[1],xr=(0,l.useState)({name:"",server_type:"",test_type:""}),Xt=(0,F.Z)(xr,2),C=Xt[0],Fr=Xt[1],Or=(0,l.useState)({basic:{},env:{},suite:{},more:{}}),qt=(0,F.Z)(Or,2),ae=qt[0],Sr=qt[1],Lr=(0,l.useState)(!0),en=(0,F.Z)(Lr,2),Rt=en[0],Mt=en[1],Pr=(0,l.useState)(!1),tn=(0,F.Z)(Pr,2),Dr=tn[0],nn=tn[1],Rr=(0,l.useState)(!1),rn=(0,F.Z)(Rr,2),Mr=rn[0],an=rn[1],kr=(0,l.useState)(a==="TemplatePreview"),sn=(0,F.Z)(kr,2),Ir=sn[0],kt=sn[1],Ar=(0,l.useState)(!1),ln=(0,F.Z)(Ar,2),on=ln[0],It=ln[1],Br=(0,l.useState)({}),un=(0,F.Z)(Br,2),ue=un[0],gt=un[1],Wr=(0,l.useState)(!1),dn=(0,F.Z)(Wr,2),Nr=dn[0],cn=dn[1],_t=(0,l.useRef)(null),xe=(0,l.useRef)(null),bt=(0,l.useRef)(null),jt=(0,l.useRef)(null),fn=(0,l.useRef)(null),$r=(0,l.useRef)(null),Hr=(0,l.useRef)(null),Jr=(0,l.useRef)(null),Ur=(0,l.useRef)(null),Vr=(0,l.useRef)(null),At=(0,l.useRef)(),yt=(0,l.useRef)(),Kr=(0,l.useState)(),mn=(0,F.Z)(Kr,2),Yr=mn[0],zr=mn[1],Gr=(0,l.useState)(!1),pn=(0,F.Z)(Gr,2),Qr=pn[0],Bt=pn[1],Xr=(0,l.useState)(!1),vn=(0,F.Z)(Xr,2),Et=vn[0],W=vn[1],qr=(0,l.useState)(!1),hn=(0,F.Z)(qr,2),gn=hn[0],Xe=hn[1],ea=(0,l.useState)(!1),_n=(0,F.Z)(ea,2),ta=_n[0],na=_n[1],ra=(0,l.useState)(""),bn=(0,F.Z)(ra,2),qe=bn[0],Zt=bn[1],aa=(0,l.useState)(!1),jn=(0,F.Z)(aa,2),N=jn[0],yn=jn[1],Wt=(0,f.QT)(function(g){return(0,ft.qi)(g)},{initialData:[],throttleInterval:300,manual:!0}),et=Wt.data,En=Wt.run,sa=Wt.refresh,ia=function(){kt(!1),It(!0)},tt=function(n){return new Promise(function(r,o){return n.validateFields().then(r).catch(function(){o(),W(!1),Xe(!1)})})},la=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v,i,m,E,O,P,j,G,$,Q;return(0,L.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(Mt(!0),r=oe,a!=="TestExport"){y.next=10;break}return y.next=5,(0,we.Eh)((0,_.Z)({job_id:oe},Ae));case 5:o=y.sent,d=o.data,gt(d),Dt(d.test_config),r=d.job_type_id;case 10:if(!["TestTemplate","TemplatePreview","TemplateEdit","TestJob"].includes(a)){y.next=31;break}if(p=null,a==="TestJob"&&Ae.template_id&&(p=Ae.template_id),["TestTemplate","TemplatePreview","TemplateEdit"].includes(a)&&(p=oe),!p){y.next=30;break}return y.next=17,(0,we.Ls)({template_id:p});case 17:if(v=y.sent,i=v.code,m=v.data,i!==500){y.next=23;break}return(0,Y.CT)(500),y.abrupt("return");case 23:E=(0,F.Z)(m,1),O=E[0],r=O.job_type_id,gt(O),Dt(O.test_config),Bt(O.enable),y.next=31;break;case 30:gt({});case 31:return y.next=33,(0,In.Wt)({jt_id:r});case 33:if(P=y.sent,j=(0,F.Z)(P.data,1),G=j[0],G){y.next=38;break}return y.abrupt("return",(0,Y.CT)(404));case 38:return Fr(G),y.next=41,(0,kn.Dn)({jt_id:r});case 41:$=y.sent,Q=$.data,oa(Q),Mt(!1),a==="TestJob"&&En({ws_id:k,job_type_id:r,enable:"True"});case 46:case"end":return y.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),oa=function(n){var r={},o={},d={},p={};n==null||n.forEach(function(v){v.config_index===1&&(r[v.name]=v),v.config_index===2&&(o[v.name]=v),v.config_index===3&&(d[v.name]=v),v.config_index===4&&(p[v.name]=v)}),Sr({basic:r,env:o,suite:d,more:p})},Zn=(0,Ze.oM)(s({id:"request.copy.success"})),wn=function(){var n,r,o,d,p,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;na(v),Zt(""),(n=yt.current)===null||n===void 0||n.reset(),(r=bt.current)===null||r===void 0||r.reset(),(o=_t.current)===null||o===void 0||o.reset(),(d=xe.current)===null||d===void 0||d.reset(),(p=jt.current)===null||p===void 0||p.reset()};(0,l.useEffect)(function(){wn(),la()},[Ge,Ae]);var Be=function g(n){var r={};return Object.keys(n).forEach(function(o){var d=n[o];if(!(d==null||d==="")){var p=Object.prototype.toString.call(d);if(p==="[object Array]"){var v=d.filter(function(i){var m=!1;if(Object.keys(i).forEach(function(E){var O=i[E];(O==null||O==="")&&(m=!0)}),!m)return i});v.length!==0&&(r[o]=v)}else p==="[object Object]"?JSON.stringify(d)!=="{}"&&(r[o]=g(d)):r[o]=d}}),Object.assign({},r)},je=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v,i,m,E,O,P,j,G,$,Q,Fe,y,R,I,D,x,H,U,Oe,ce,Se,Tt,at,Ht,Jt,Ut,Ct,st,We,xt,it,Le,ye,lt,Ne,ot,$e,ut,Ft,He=arguments;return(0,L.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(r=He.length>0&&He[0]!==void 0?He[0]:null,o={},d="",!(a==="TestTemplate"||a==="TemplatePreview"||a==="TemplateEdit")){T.next=13;break}if(!r){T.next=8;break}T.t0=r.templateEditFormInfo,T.next=11;break;case 8:return T.next=10,tt(yt.current.form);case 10:T.t0=T.sent;case 11:p=T.t0,o=Object.assign(o,Be(p));case 13:if(JSON.stringify(ae.basic)==="{}"){T.next=23;break}if(!r){T.next=18;break}T.t1=r.basicFormInfo,T.next=21;break;case 18:return T.next=20,tt(bt.current.form);case 20:T.t1=T.sent;case 21:v=T.t1,o=Object.assign(o,Be(v));case 23:if(JSON.stringify(ae.env)==="{}"){T.next=43;break}if(!r){T.next=28;break}T.t2=r.envFormInfo,T.next=31;break;case 28:return T.next=30,tt(xe.current.form);case 30:T.t2=T.sent;case 31:i=T.t2,m=i.env_info,E=i.rpm_info,O=i.script_info,P=i.moniter_contrl,j=i.monitor_info,G=i.reclone_contrl,$=i.app_name,Q=i.os,Fe=i.vm,y=i.need_reboot,R=i.kernel_version,I=i.kernel_install,D=i.code_repo,x=i.code_branch,H=i.compile_branch,U=i.cpu_arch,Oe=i.commit_id,ce=i.kernel_packages,Se=i.build_config,Tt=i.build_machine,at=i.scripts,Ht=i.kernel,Jt=i.devel,Ut=i.headers,Ct=i.hotfix_install,st=(0,Ye.Z)(i,yr),d=I,We=m,xt=(0,_.Z)({code_repo:D,code_branch:x,compile_branch:H,cpu_arch:U,commit_id:Oe,build_config:Se,build_machine:Tt,scripts:at},st),it={hotfix_install:Ct,scripts:at,kernel_packages:ce},Le=O,ye=E,y||(ye=ye?ye.map(function(X){return(0,_.Z)((0,_.Z)({},X),{},{pos:"before"})}):void 0,Le=Le?Le.map(function(X){return(0,_.Z)((0,_.Z)({},X),{},{pos:"before"})}):void 0),lt={env_info:We||"",rpm_info:ye,script_info:Le,moniter_contrl:P,reclone_contrl:G,iclone_info:Q||$||Fe?{os:Q,app_name:$,vm:Fe}:void 0,need_reboot:y,kernel_version:R},D?lt.build_pkg_info=xt:lt.kernel_info=it,o=Object.assign(o,Be(lt),{monitor_info:j});case 43:if(JSON.stringify(ae.more)==="{}"){T.next=54;break}if(!r){T.next=48;break}T.t3=r.moreFormInfo,T.next=51;break;case 48:return T.next=50,tt(_t.current.form);case 50:T.t3=T.sent;case 51:Ne=T.t3,ot=Ne.email?Ne.email.replace(/\s/g,","):null,o=Object.assign(o,Be((0,_.Z)((0,_.Z)({},Ne),{},{email:ot})));case 54:return $e=r?r.new_test_config:Cr,$e.length>0&&(ut=$e.map(function(X){var wa=X.id,Ta=X.setup_info,Ca=X.console,xa=X.need_reboot,Fa=X.priority,Oa=X.cleanup_info,Sa=X.run_mode,La=X.test_case_list;return(0,_.Z)((0,_.Z)({},Be({test_suite:wa,setup_info:Ta,cleanup_info:Oa,console:Ca,need_reboot:xa,priority:Fa,run_mode:Sa})),{},{cases:La.map(function(J){var Pa=J.id,On=J.setup_info,Da=J.cleanup_info,Ra=J.repeat,Ma=J.timeout,ka=J.server_object_id,Ia=J.server_tag_id,Aa=J.need_reboot,Ba=J.console,Wa=J.monitor_info,Na=J.priority,$a=J.env_info,Ha=J.is_instance,Sn=J.custom_ip,Ln=J.custom_channel,Ja=$a.filter(function(dt){if(dt.name&&dt.val)return dt}),Ua=Ja.reduce(function(dt,Dn,Va){return dt.concat("".concat(Va?`
`:"").concat(Dn.name,"=").concat(Dn.val))},""),Pn=void 0;return Ln&&Sn&&(Pn={custom_channel:Ln,custom_ip:Sn}),Be({test_case:Pa,setup_info:On==="[]"?"":On,cleanup_info:Da,repeat:Ra,timeout:Ma,server_object_id:ka,server_tag_id:Ia,need_reboot:Aa,console:Ba,monitor_info:Wa,priority:Na,is_instance:Ha,env_info:Ua,customer_server:Pn})})})}),o.test_config=ut),d!=="install_push"&&(o.kernel_version=null),Ft=o.report_template,delete o.report_template,"report_name"in o&&b().get(o,"report_name")&&(o.report_template=Ft),T.abrupt("return",o);case 61:case"end":return T.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),Nt=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v,i,m,E,O,P,j,G,$,Q=arguments;return(0,L.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(r=Q.length>0&&Q[0]!==void 0?Q[0]:"",o={},!(xe&&xe.current)){y.next=8;break}return y.next=5,tt(xe.current.form);case 5:y.t0=y.sent,y.next=9;break;case 8:y.t0={};case 9:if(d=y.t0,p=C==null?void 0:C.server_type,an(!0),N){y.next=24;break}return y.next=15,je();case 15:v=y.sent,i=b().cloneDeep(v),m=b().get(i,"test_config"),b().isArray(m)&&m.forEach(function(R){var I=b().get(R,"cases"),D=b().get(R,"run_mode");b().isArray(I)&&(I=I.map(function(x){var H={},U=b().cloneDeep(x);if(b().has(U,"server_object_id")&&U.server_object_id!==void 0){var Oe=b().get(U,"is_instance"),ce="id";Oe===0&&p==="aliyun"&&(ce="config"),Oe===1&&p==="aliyun"&&(ce="instance"),D==="cluster"&&(ce="cluster"),H[ce]=b().get(U,"server_object_id")}if(b().has(U,"server_tag_id")&&U.server_tag_id.length&&(H={tag:b().get(U,"server_tag_id")}),b().get(U,"customer_server")){var Se=b().get(U,"customer_server");H={channel_type:Se.custom_channel,ip:Se.custom_ip}}return H&&(x.server=H),delete x.server_object_id,delete x.server_tag_id,delete R.run_mode,delete x.is_instance,delete x.customer_server,x}),R.cases=I)}),i.test_config=m,delete i.moniter_contrl,delete i.reclone_contrl,i.kernel_version||delete i.kernel_version,o={type:"json2yaml",json_data:i,workspace:k};case 24:return N&&(o={type:"yaml2json",yaml_data:qe,workspace:k}),y.next=27,(0,we.VV)(o);case 27:return E=y.sent,O=E.code,P=E.msg,j=E.data,an(!1),G={},O===200?(N||Zt(j),N&&(i=b().cloneDeep(j),$=j.test_config,b().isArray($)&&$.forEach(function(R){var I=b().get(R,"cases");R.run_mode="standalone",b().isArray(I)&&(I=I.map(function(D){var x=b().get(D,"server");if(b().has(x,"id")&&(D.server_object_id=b().get(x,"id")),b().get(x,"config")&&(D.server_object_id=b().get(x,"config"),D.is_instance=0),b().get(x,"instance")&&(D.server_object_id=b().get(x,"instance"),D.is_instance=1),b().get(x,"cluster")&&(D.server_object_id=b().get(x,"cluster"),R.run_mode="cluster"),b().get(x,"tag")&&b().get(x,"tag").length&&(D.server_tag_id=b().get(x,"tag")),b().get(x,"channel_type")&&b().get(x,"ip")&&(D.customer_server={custom_channel:b().get(x,"channel_type"),custom_ip:b().get(x,"ip")},D.ip=b().get(x,"ip")),b().get(x,"name")){var H=x.name;b().isArray(H)&&(H=H.join(",")),D.ip=H}return delete D.server,D}),R.cases=I)}),i.test_config=$==null?void 0:$.map(function(R){return(0,_.Z)((0,_.Z)({},R),{},{test_suite_id:R.test_suite,cases:R.cases.map(function(I){return(0,_.Z)((0,_.Z)({},I),{},{test_case_id:I.test_case})})})}),i.moniter_contrl=!1,i.reclone_contrl=b().get(d,"reclone_contrl")||!1,b().get(i,"monitor_info")&&(i.moniter_contrl=!0),G=da(i)),r!=="template"&&r!=="submit"&&yn(!N)):(0,Y.EV)(O,P),y.abrupt("return",{code:O,result:G});case 35:case"end":return y.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),wt=function(n){var r=location.search.indexOf("inheriting_machine")!==-1;return n.map(function(o){var d=b().get(o,"cases")||[];return o.cases=d.map(function(p){var v=p||{},i=v.customer_server,m=v.server_object_id,E=b().get(i,"custom_channel"),O=b().get(i,"custom_ip");return E&&O&&(p.server={ip:O,channel_type:E},delete p.customer_server),r&&m&&delete p.server_tag_id,p}),o})},ua=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v,i,m,E,O;return(0,L.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!Et){j.next=2;break}return j.abrupt("return",!1);case 2:if(nn(!1),W(!0),r={},!N){j.next=14;break}return j.next=8,Nt("submit");case 8:if(o=j.sent,d=o.code,p=o.result,r=p,d===200){j.next=14;break}return j.abrupt("return");case 14:if(!N){j.next=20;break}return j.next=17,je(r);case 17:j.t0=j.sent,j.next=23;break;case 20:return j.next=22,je();case 22:j.t0=j.sent;case 23:if(v=j.t0,v=(0,_.Z)((0,_.Z)({},v),{},{workspace:k,job_type:C.id}),a==="TestTemplate"&&(v=(0,_.Z)((0,_.Z)({},v),{},{data_from:"template",template_id:ue.id,job_type:C.id})),a==="TestExport"&&(v=(0,_.Z)((0,_.Z)({},v),{},{data_from:"rerun",job_id:oe})),!nt(v)){j.next=30;break}return W(!1),j.abrupt("return",M.default.warning(s({id:"ws.test.job.machine.cannot.be.empty"})));case 30:if(v.test_config){j.next=33;break}return W(!1),j.abrupt("return",M.default.warning(s({id:"ws.test.job.suite.cannot.be.empty"})));case 33:return i=wt(v.test_config),j.prev=34,j.next=37,(0,we._r)((0,_.Z)((0,_.Z)({},v),{},{test_config:i}));case 37:m=j.sent,E=m.code,O=m.msg,E===200&&(z((0,_.Z)((0,_.Z)({},B),{},{refreshMenu:!(B!=null&&B.refreshMenu)})),f.m8.push("/ws/".concat(k,"/test_result")),M.default.success(s({id:"ws.test.job.operation.success"}))),E!==200&&(E===1380?nn(!0):(0,Y.EV)(E,O)),j.next=46;break;case 44:j.prev=44,j.t1=j.catch(34);case 46:W(!1);case 47:case"end":return j.stop()}},n,null,[[34,44]])}));return function(){return g.apply(this,arguments)}}(),nt=function(n){var r=!1;if(n&&n.moniter_contrl){var o=Array.isArray(n.monitor_info)?n.monitor_info:[];r=o.some(function(d){return d&&d.monitor_type==="custom_machine"&&!d.server})}return r},da=function(n){var r,o,d,p,v,i=n.template_name,m=n.description,E=n.enable,O=n.name,P=n.project,j=n.baseline,G=n.monitor_info,$=n.need_reboot,Q=n.rpm_info,Fe=n.script_info,y=n.env_info,R=n.kernel_info,I=n.kernel_version,D=n.iclone_info,x=n.build_pkg_info,H=n.reclone_contrl,U=n.moniter_contrl,Oe=n.test_config,ce=n.cleanup_info,Se=n.tags,Tt=n.notice_subject,at=n.report_name,Ht=n.callback_api,Jt=n.email,Ut=n.ding_token,Ct=n.report_template,st=D||{},We=st.os,xt=We===void 0?"":We,it=st.app_name,Le=it===void 0?"":it,ye=R||{},lt=ye.branch,Ne=(0,Ye.Z)(ye,Er),ot={template_name:i,description:m,enable:E},$e={name:O,project:P,baseline:j},ut=(0,_.Z)((0,_.Z)({monitor_info:G,rpm_info:Q,script_info:Fe,need_reboot:$,env_info:y,reclone_contrl:H,os:xt,app_name:Le,moniter_contrl:U,kernel_version:I},Ne),x),Ft=Oe,He={cleanup_info:ce,tags:Se,notice_subject:Tt,email:Jt,ding_token:Ut,report_template:Ct,report_name:at,callback_api:Ht};(r=yt.current)===null||r===void 0||r.setVal(ot),(o=bt.current)===null||o===void 0||o.setVal($e),(d=xe.current)===null||d===void 0||d.setVal((0,_.Z)((0,_.Z)({},ut),{},{kernel_info:R,build_pkg_info:x})),(p=_t.current)===null||p===void 0||p.setVal(He);var Fn=((v=jt.current)===null||v===void 0?void 0:v.setVal(Ft))||[];return{templateEditFormInfo:ot,basicFormInfo:$e,envFormInfo:ut,moreFormInfo:He,new_test_config:Fn}},Tn=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(r){var o,d,p,v,i;return(0,L.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!Et){E.next=2;break}return E.abrupt("return",!1);case 2:return W(!0),E.next=5,je();case 5:if(o=E.sent,!nt(o)){E.next=9;break}return W(!1),E.abrupt("return",M.default.warning(s({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(o.test_config){E.next=12;break}return W(!1),E.abrupt("return",M.default.warning(s({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return o=(0,_.Z)((0,_.Z)({workspace:k},o),{},{job_type:C.id}),d=wt(o.test_config),E.next=16,(0,ft.Y9)((0,_.Z)((0,_.Z)({},o),{},{test_config:d},r));case 16:p=E.sent,v=p.code,i=p.msg,v===200?(M.default.success(s({id:"ws.test.job.operation.success"})),At.current.hide(),sa(),z((0,_.Z)((0,_.Z)({},B),{},{refreshMenu:!(B!=null&&B.refreshMenu)}))):(0,Y.EV)(v,i),W(!1);case 21:case"end":return E.stop()}},n)}));return function(r){return g.apply(this,arguments)}}(),ca=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v;return(0,L.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r={},!N){m.next=10;break}return m.next=4,Nt("template");case 4:if(o=m.sent,d=o.code,p=o.result,r=p,d===200){m.next=10;break}return m.abrupt("return");case 10:if(!N){m.next=16;break}return m.next=13,je(r);case 13:m.t0=m.sent,m.next=19;break;case 16:return m.next=18,je();case 18:m.t0=m.sent;case 19:if(v=m.t0,!nt(v)){m.next=22;break}return m.abrupt("return",M.default.warning(s({id:"ws.test.job.machine.cannot.be.empty"})));case 22:if(v.test_config){m.next=24;break}return m.abrupt("return",M.default.warning(s({id:"ws.test.job.suite.cannot.be.empty"})));case 24:a==="TestJob"||a==="TestExport"?At.current.show():Tn({});case 25:case"end":return m.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),fa=function(n){var r=n.target;En({job_type_id:C.id,name:r.value})},Cn=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(r){var o,d,p,v,i,m,E;return(0,L.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return o=wt(r.test_config),P.next=3,(0,ft.iM)((0,_.Z)((0,_.Z)({template_id:ue.id,workspace:k,job_type:C.id},r),{},{test_config:o}));case 3:if(d=P.sent,p=d.code,v=d.msg,Ke.default.destroy(),p!==200){P.next=21;break}return P.next=10,(0,we.Ls)({template_id:ue.id});case 10:i=P.sent,m=(0,F.Z)(i.data,1),E=m[0],gt(E),It(!1),kt(!0),Bt(r.enable),M.default.success(s({id:"operation.success"})),a!=="TemplatePreview"&&f.m8.push({pathname:"/ws/".concat(k,"/job/templates"),state:Ce||{}}),P.next=22;break;case 21:(0,Y.EV)(p,v);case 22:W(!1);case 23:case"end":return P.stop()}},n)}));return function(r){return g.apply(this,arguments)}}(),ma=function(n){Ke.default.close(n),W(!1),f.m8.push({pathname:"/ws/".concat(k,"/job/templates"),state:Ce||{}})},pa=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p;return(0,L.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!Et){i.next=2;break}return i.abrupt("return");case 2:return W(!0),i.next=5,je();case 5:if(r=i.sent,!nt(r)){i.next=9;break}return W(!1),i.abrupt("return",M.default.warning(s({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(r.test_config){i.next=13;break}return W(!1),M.default.warning(s({id:"ws.test.job.suite.cannot.be.empty"})),i.abrupt("return");case 13:if(r.baseline||(r.baseline=null),r.baseline_job_id||(r.baseline_job_id=null),r.cleanup_info||(r.cleanup_info=""),Object.prototype.toString.call(r)!=="[object Object]"){i.next=23;break}return o="open".concat(Date.now()),d=(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(A.Z,{type:"primary",size:"small",onClick:function(){return Cn(r)},children:"\u786E\u8BA4"}),(0,e.jsx)(A.Z,{type:"primary",size:"small",onClick:function(){return ma(o)},children:"\u53D6\u6D88"})]}),i.next=21,(0,we.uz)({template_id:oe});case 21:p=i.sent,p.code===200&&p.data.length>0?Ke.default.warning({duration:null,message:"\u63D0\u793A",description:"\u5F53\u524D\u6709\u6D4B\u8BD5\u8BA1\u5212\uFF08".concat(p.data[0].plan_name,"\uFF09\u5F15\u7528\u4E86\u8BE5\u6A21\u7248\uFF0C\u7F16\u8F91\u8BE5\u6A21\u7248\u5C06\u540C\u65F6\u5F71\u54CD\u5230\u6D4B\u8BD5\u8BA1\u5212\u4E2D\u7684\u6B64\u6A21\u7248\u914D\u7F6E\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"),btn:d,key:o}):Cn(r);case 23:W(!1);case 24:case"end":return i.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),va=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p,v;return(0,L.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!gn){m.next=2;break}return m.abrupt("return");case 2:return Xe(!0),m.next=5,je();case 5:if(r=m.sent,!nt(r)){m.next=9;break}return Xe(!1),m.abrupt("return",M.default.warning(s({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(r.test_config){m.next=12;break}return Xe(!1),m.abrupt("return",M.default.warning(s({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return r.baseline||(r.baseline=null),o=wt(r.test_config),m.next=16,(0,ft.iM)((0,_.Z)((0,_.Z)({template_id:ue.id,workspace:k,job_type:C.id},r),{},{test_config:o}));case 16:d=m.sent,p=d.code,v=d.msg,p===200?(M.default.success(s({id:"request.save.success"})),f.m8.push("/ws/".concat(k,"/test_job/").concat(C.id,"?template_id=").concat(ue.id))):(0,Y.EV)(p,v),Xe(!1);case 21:case"end":return m.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),ha=function(n){cn(n)},rt={disabled:Ir,ws_id:k,template:ue,test_type:C==null?void 0:C.test_type,business_type:(C==null?void 0:C.business_type)||"",server_provider:C==null?void 0:C.server_type,server_type:C==null?void 0:C.server_type},$t=(0,l.useMemo)(function(){return be>=1240?(1240-1e3)/2:20},[be]),de=(0,jr.Z)(fn),ga=(0,l.useMemo)(function(){var g={minHeight:_e,overflow:"auto",background:"#f5f5f5"};return Te?(0,_.Z)((0,_.Z)({},g),{},{paddingTop:50}):g},[_e,Te]),_a=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r,o,d,p;return(0,L.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r={yaml_data:qe,workspace:k},i.next=3,(0,we.VF)(r);case 3:o=i.sent,d=o.code,p=o.msg,d!==200?(0,Y.EV)(d,p):M.default.success(s({id:"operation.success"}));case 7:case"end":return i.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),ba=function(){yn(!1),Zt("")},ja=function(n){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},ya=function(n,r){var o=window.URL||window.webkitURL||window,d=new Blob([r]),p=document.createElementNS("http://www.w3.org/1999/xhtml","a");p.href=o.createObjectURL(d),p.download=n,ja(p)},Ea=function(){var g=(0,K.Z)((0,L.Z)().mark(function n(){var r;return(0,L.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r="job_"+ +new Date,ya("".concat(r,".yaml"),qe);case 2:case"end":return d.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),Za=function(n){zr(n)},xn=(0,e.jsxs)(e.Fragment,{children:[Qr&&(0,e.jsx)(A.Z,{onClick:va,loading:gn,children:(0,e.jsx)(f._H,{id:"ws.test.job.SaveCreateSubmit"})}),(0,e.jsx)(A.Z,{type:"primary",onClick:pa,loading:Et,children:(0,e.jsx)(f._H,{id:"ws.test.job.SaveTemplateModify"})})]});return(0,e.jsxs)("div",{style:ga,children:[!Rt&&!(le!=null&&le.user_id)?(0,e.jsx)("div",{className:w().not_logged_in,children:(0,e.jsx)("div",{style:{width:"1240px"},children:(0,e.jsx)(Mn.Z,{})})}):null,Te&&(0,e.jsxs)(S.Z,{align:"middle",className:w().page_preview_nav,justify:"space-between",children:[(0,e.jsxs)(V.Z,{children:[(0,e.jsx)("div",{style:{height:50,width:50,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){a==="JobTypePreview"?f.m8.push("/ws/".concat(k,"/job/types")):f.m8.push(Qe.IsWsSetting()?{pathname:"/ws/".concat(k,"/job/templates"),state:Ce||{}}:"./")},children:(0,e.jsx)(An.Z,{style:{fontSize:20}})}),a==="JobTypePreview"&&(0,e.jsx)(Me.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.JobTypePreview"})}),a==="TemplatePreview"&&(0,e.jsx)(Me.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.TemplatePreview"})}),a==="TemplateEdit"&&(0,e.jsx)(Me.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.TemplateEdit"})})]}),a==="TemplatePreview"&&(0,e.jsxs)(V.Z,{children:[on&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{onClick:function(){kt(!0),It(!1),jt.current.setChecked(!1)},children:(0,e.jsx)(f._H,{id:"operation.cancel"})}),xn]}),!on&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{onClick:function(){return Zn(location.href)},children:(0,e.jsx)(f._H,{id:"ws.test.job.copy.link"})}),(0,e.jsx)(f.Nv,{accessible:Qe.WsMemberOperateSelf(ue==null?void 0:ue.creator),fallback:(0,e.jsx)(A.Z,{onClick:function(){return(0,Y.WR)()},children:(0,e.jsx)(f._H,{id:"ws.test.job.ModifySetting"})}),children:(0,e.jsx)(A.Z,{onClick:ia,children:(0,e.jsx)(f._H,{id:"ws.test.job.ModifySetting"})})})]})]}),a==="TemplateEdit"&&(0,e.jsx)(V.Z,{children:xn})]}),(0,e.jsxs)(pe.Z,{spinning:Rt,children:[(0,e.jsxs)("div",{className:w().page_header,style:["TestJob","TestExport"].includes(a)?{paddingBottom:80}:{},children:[(0,e.jsx)("div",{style:{height:250,minWidth:1080,background:"#fff",position:"absolute",left:0,top:0,width:"100%"}}),(0,e.jsx)(S.Z,{className:w().page_title,justify:"center",children:(0,e.jsx)(S.Z,{style:{width:de!=null&&de.width?(de==null?void 0:de.width)+$t*2:de==null?void 0:de.width},children:(0,e.jsxs)(se.Z,{span:24,children:[(0,e.jsxs)(S.Z,{justify:"space-between",children:[(0,e.jsx)("span",{children:C.name}),(0,e.jsx)(f.Nv,{accessible:Qe.IsWsSetting(),children:a==="TestJob"&&!Rt&&(0,e.jsx)(ve.Z,{overlayClassName:w().template_popover,placement:"bottomRight",open:Nr,onOpenChange:ha,title:(0,e.jsx)(ne.Z,{autoComplete:"off",prefix:(0,e.jsx)(Bn.Z,{}),className:w().job_search_inp,placeholder:s({id:"ws.test.job.search.placeholder.template"}),onChange:fa}),content:(0,e.jsxs)(he.Z,{style:{maxHeight:480,overflow:"auto",paddingBottom:12},children:[Array.isArray(et)&&et.length>0&&(0,e.jsx)(e.Fragment,{children:et.map(function(g){return(0,e.jsx)("div",{className:w().template_item,onClick:function(){if(!g.job_type)return M.default.error(s({id:"ws.test.job.please.delete"}));f.m8.push("/ws/".concat(k,"/test_job/").concat(g.job_type_id,"?template_id=").concat(g.id)),cn(!1)},children:(0,e.jsx)(Rn.Z,{title:g.name})},g.id)})}),Array.isArray(et)&&et.length===0&&(0,e.jsx)("div",{style:{lineHeight:"80px",textAlign:"center",color:"rgba(0,0,0,.35)"},children:(0,e.jsx)(f._H,{id:"ws.test.job.no.template"})})]}),children:(0,e.jsx)(A.Z,{type:"default",children:(0,e.jsx)(f._H,{id:"ws.test.job.use.template.create"})})})})]}),(0,e.jsxs)("div",{className:w().page_tags,children:[(0,e.jsx)(ie.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:C.server_type&&(0,e.jsx)(f._H,{id:"header.".concat(C.server_type),defaultMessage:""})}),(0,e.jsx)(ie.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:C.test_type==="business"?(0,e.jsx)(f._H,{id:"header.business.".concat(C.business_type),defaultMessage:"business.others"}):C.test_type&&(0,e.jsx)(f._H,{id:"header.test_type.".concat(C.test_type),defaultMessage:""})})]}),(0,e.jsx)("div",{className:w().page_dec,children:C.description})]})})}),(0,e.jsx)("div",{className:w().page_body_content,style:N?{paddingLeft:0,paddingRight:0,paddingTop:0}:{paddingLeft:$t,paddingRight:$t,paddingTop:24},children:(0,e.jsx)(pe.Z,{spinning:Mr,style:{width:"100%"},children:(0,e.jsxs)(S.Z,{className:w().page_body,justify:"center",children:[(0,e.jsx)("div",{ref:fn,style:{width:1e3}}),(a==="TestJob"||a==="TestExport")&&(0,e.jsx)("div",{className:w().yaml_transform_icon,style:N?{top:10,right:10}:{top:-14,right:-110},onClick:Nt,children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(rr,{}),N?(0,e.jsx)(f._H,{id:"ws.test.job.switch.form.mode"}):(0,e.jsx)(f._H,{id:"ws.test.job.switch.yaml.mode"})]})}),(0,e.jsxs)("div",{style:N?{width:1240,display:"none"}:{width:1e3},children:[(0,e.jsxs)(se.Z,{span:24,style:{width:1e3},children:[a==="TestJob"&&(0,e.jsx)(S.Z,{className:w().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.create.job"})}),a==="TestExport"&&(0,e.jsx)(S.Z,{className:w().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.import.config"})}),(a==="TemplatePreview"||a==="TemplateEdit"||a==="TestTemplate")&&(0,e.jsx)(S.Z,{className:w().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.test.template"})})]}),(0,e.jsxs)(se.Z,{span:24,style:{width:1e3},children:[(a==="TemplatePreview"||a==="TemplateEdit"||a==="TestTemplate")&&(0,e.jsxs)(S.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.templateForm"})})}),(0,e.jsx)(Qn,(0,_.Z)({onEnabelChange:Bt,ref:yt},rt))]}),JSON.stringify(ae.basic)!=="{}"&&(0,e.jsxs)(S.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.basicForm"})})}),(0,e.jsx)(Nn.Z,(0,_.Z)({onRef:bt,contrl:ae.basic,callBackProjectId:Za,projectListDataRef:$r,baselineListDataRef:Hr,isYamlFormat:N},rt))]}),JSON.stringify(ae.env)!=="{}"&&(0,e.jsxs)(S.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.envForm"})})}),(0,e.jsx)($n.Z,(0,_.Z)({onRef:xe,contrl:ae.env,envErrorFlag:Dr,project_id:Yr},rt))]}),C.test_type&&(0,e.jsxs)(S.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsxs)("span",{children:[(0,e.jsx)("b",{style:{fontWeight:"normal",color:"#ff4d4f"},children:"*\xA0"}),(0,e.jsx)(f._H,{id:"ws.test.job.suiteTable"})]})}),(0,e.jsx)(se.Z,{offset:3,span:21,children:(0,l.createElement)(Jn.Z,(0,_.Z)((0,_.Z)({},rt),{},{key:C.test_type,handleData:function(n){return Dt(n)},contrl:ae.suite,onRef:jt,setPageLoading:Mt,caseDataRef:Vr}))})]}),JSON.stringify(ae.more)!=="{}"&&(0,e.jsxs)(S.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.moreForm"})})}),(0,e.jsx)(Hn.Z,(0,_.Z)((0,_.Z)({},rt),{},{onRef:_t,contrl:ae.more,isReset:ta,tagsDataRef:Jr,reportTemplateDataRef:Ur}))]})]})]}),N&&(0,e.jsxs)("div",{className:w().yaml_container,children:[(0,e.jsxs)(se.Z,{span:24,className:w().yaml_operate,children:[(0,e.jsxs)(V.Z,{align:"center",className:w().yaml_copy_link,onClick:_a,children:[(0,e.jsx)(_r,{className:w().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.yaml.test"})]}),(0,e.jsxs)(V.Z,{align:"center",className:w().yaml_copy_link,id:"copy_dom_id",onClick:function(){return Zn(qe.replace("---",""))},style:{marginLeft:10},children:[(0,e.jsx)(or,{className:w().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.copy"})]}),(0,e.jsxs)(V.Z,{align:"center",className:w().yaml_copy_link,onClick:Ea,style:{marginLeft:10},children:[(0,e.jsx)(mr,{className:w().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.download"})]}),(0,e.jsx)(Wn.Z,{onClick:ba,style:{float:"right",color:"#fff"}})]}),(0,e.jsx)(br.Z,{mode:"yaml",code:qe,onChange:function(n){return Zt(n)}})]})]})})})]}),(a==="TestJob"||a==="TestTemplate"||a==="TestExport")&&(0,e.jsx)(S.Z,{justify:"end",className:w().options_bar,children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(Pe.Z,{title:(0,e.jsx)(f._H,{id:"ws.test.job.reset.confirm.info"}),onConfirm:b().partial(wn,!0),okText:(0,e.jsx)(f._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(f._H,{id:"operation.cancel"}),children:(0,e.jsx)(A.Z,{children:(0,e.jsx)(f._H,{id:"ws.test.job.reset"})})}),(0,e.jsx)(A.Z,{onClick:ca,disabled:!Qe.IsWsSetting(),children:(0,e.jsx)(f._H,{id:"ws.test.job.save.as.template"})}),(0,e.jsx)(A.Z,{type:"primary",onClick:ua,disabled:!Qe.IsWsSetting(),children:(0,e.jsx)(f._H,{id:"ws.test.job.submit.test"})})]})}),(0,e.jsx)(Yn,{ref:At,onOk:Tn})]})]})},wr=Zr}}]);
