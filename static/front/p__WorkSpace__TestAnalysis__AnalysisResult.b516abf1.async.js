(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[2974],{2488:function(nt,ne,t){"use strict";t.d(ne,{Z:function(){return Y}});var se=t(45972),P=t(22374),ge={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},J=ge,ve=t(25078),d=function(Z,C){return P.createElement(ve.Z,(0,se.Z)((0,se.Z)({},Z),{},{ref:C,icon:J}))};d.displayName="CaretRightOutlined";var Y=P.forwardRef(d)},99193:function(nt,ne,t){"use strict";t.d(ne,{Z:function(){return Y}});var se=t(45972),P=t(22374),ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},J=ge,ve=t(25078),d=function(Z,C){return P.createElement(ve.Z,(0,se.Z)((0,se.Z)({},Z),{},{ref:C,icon:J}))};d.displayName="UpOutlined";var Y=P.forwardRef(d)},5733:function(nt,ne,t){"use strict";t.r(ne),t.d(ne,{default:function(){return qe}});var se=t(70772),P=t(6701),ge=t(46721),J=t(94867),ve=t(26388),d=t(20418),Y=t(81138),W=t(96146),Z=t(35832),C=t(32326),h=t(39190),a=t(22374),w=t(68210),$=t(24812),i=t(22812),le=t(65081),mt=t(99193),bt=t(45227);function ht(O){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function O(f){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/sys/workspace/",{params:f}));case 1:case"end":return n.stop()}},O)})),N.apply(this,arguments)}function Ft(O){return Ye.apply(this,arguments)}function Ye(){return Ye=_asyncToGenerator(_regeneratorRuntime().mark(function O(f){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/job/result/compare/chart/",{data:f,method:"post"}));case 1:case"end":return n.stop()}},O)})),Ye.apply(this,arguments)}function _t(O){return Q.apply(this,arguments)}function Q(){return Q=(0,C.Z)((0,Z.Z)().mark(function O(f){return(0,Z.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)("/api/job/result/compare/form/",{data:f,method:"post"}));case 1:case"end":return n.stop()}},O)})),Q.apply(this,arguments)}function te(O){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,C.Z)((0,Z.Z)().mark(function O(f){return(0,Z.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)("/api/job/result/compare/form/",{params:f}));case 1:case"end":return n.stop()}},O)})),Qe.apply(this,arguments)}var st=t(15401),j=(0,a.createContext)(null),Ce=t(99788),s=t(395),xt=t(72069),e=t(52454),jt=function(){var f=(0,a.useContext)(j),r=f.envData,n=f.environmentResult,l=f.group,c=(0,i.Kd)()==="en-US";return(0,e.jsxs)(s.KP,{id:"need_test_env",children:[(0,e.jsxs)(s.DK,{children:[(0,e.jsx)("span",{className:"line"}),(0,e.jsx)(i._H,{id:"analysis.test.env"})]}),(0,e.jsxs)(s.HA,{children:[(0,e.jsx)(s.i1,{enLocale:c,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{enLocale:c,envData:r,group:l})]}),(0,e.jsx)(xt.c,{envData:r,environmentResult:n,group:l})]})},gt=(0,a.memo)(jt),ye=t(64510),ie=t(87445),Ht=t(79625),yt=t(96584),Ut=t(14320),X=t(53479),Wt=t(57359),V=t(34423),Gt=t(31650),G=t(25100),Zt=t(41428),lt=t(69230),Le=t(33821),Xe=t(22598),it=t(15363),ot=t(74066),re=t(36338),ut=t(24492),ke=t(89638),St=t(97207),me=t.n(St),dt=t(81849),Ze=t(79638),Et=t(97939),Te=t(526),he=t(39935),_e,xe=Le.Z.Option,Dt=Et.ZP.div(_e||(_e=(0,Zt.Z)([`
    background: #fff;
    position: absolute;
    top: 57px;
    height: 50px;
    // willChange: transform;
    border: 1px solid rgba(0,0,0,0.10);
    z-index: 5;
    width:`,`px;
    transform:translateY(`,`px);
`])),function(O){var f=O.width;return f||0},function(O){var f=O.y;return f||0}),ct=function(f){var r=f.groupRowRef,n=f.parentDom,l=f.groupLen,c=f.envData,S=(0,le.Z)(document.querySelector(".ant-layout-has-sider .ant-layout")),M=S.top,g=r.current,oe=n.current;if(!g&&!oe)return(0,e.jsx)(e.Fragment,{});var b=oe.offsetTop||0,je=g==null?void 0:g.offsetWidth,F=M>b+g.offsetTop;return F?(0,e.jsx)(Dt,{width:je,y:M-b-g.offsetTop,children:(0,e.jsx)(s.ER,{style:{border:"none",paddingLeft:18,paddingRight:15},children:(0,e.jsxs)(s.ZA,{children:[(0,e.jsx)(s.Ll,{gLen:l,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{envData:c,group:l,isData:!0})]})})}):(0,e.jsx)(e.Fragment,{})},Se=["decline","increase","normal","invalid","na"],Rt=function(f){return function(r,n){return r[f]-n[f]}},Ot=function(f){var r=(0,i.YB)(),n=r.formatMessage,l=(0,a.useContext)(j),c=l.compareResult,S=l.allGroupData,M=l.environmentResult,g=l.baselineGroupIndex,oe=l.envData,b=l.group,je=l.wsId,F=l.containerScroll,Ae=f.parentDom,be=f.scrollLeft,Fe=(0,a.useState)([]),ce=(0,h.Z)(Fe,2),De=ce[0],Re=ce[1],He=(0,a.useState)([]),Ue=(0,h.Z)(He,2),fe=Ue[0],ae=Ue[1],pe=(0,a.useState)(!0),We=(0,h.Z)(pe,2),k=We[0],Ge=We[1],Be=(0,a.useState)(""),q=(0,h.Z)(Be,2),Ke=q[0],Ne=q[1],ue=(0,a.useState)("all"),ee=(0,h.Z)(ue,2),we=ee[0],$e=ee[1],de=(0,a.useRef)(null),B=c.perf_data_result,Ve=(0,a.useMemo)(function(){return g===-1?0:g},[g]);(0,a.useEffect)(function(){var I=me().cloneDeep(B);ae(k?I:I.map(function(_){return(0,d.Z)((0,d.Z)({},_),{},{chartType:"1"})}))},[B,k]);var et=function(){Ge(!k)};(0,a.useEffect)(function(){Ne(k?"chart":"list")},[k]);var ze=function(){return(0,e.jsx)(s.JI,{children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(J.Z,{onClick:et,children:(0,e.jsx)(i._H,{id:Ke==="chart"?"analysis.chart.mode":"analysis.list.mode"})}),k&&(0,e.jsxs)(V.Z,{children:[(0,e.jsxs)(G.Z.Text,{children:[(0,e.jsx)(i._H,{id:"analysis.filter"}),": "]}),(0,e.jsxs)(Le.Z,{defaultValue:"all",style:{width:200},value:we,onSelect:tt,children:[(0,e.jsx)(xe,{value:"all",children:(0,e.jsx)(i._H,{id:"analysis.all"})}),(0,e.jsx)(xe,{value:"invalid",children:(0,e.jsx)(i._H,{id:"analysis.invalid"})}),(0,e.jsx)(xe,{value:"volatility",title:n({id:"analysis.volatility"}),children:(0,e.jsx)(i._H,{id:"analysis.volatility"})}),(0,e.jsx)(xe,{value:"increase",children:(0,e.jsx)(i._H,{id:"analysis.increase"})}),(0,e.jsx)(xe,{value:"decline",children:(0,e.jsx)(i._H,{id:"analysis.decline"})}),(0,e.jsx)(xe,{value:"normal",children:(0,e.jsx)(i._H,{id:"analysis.normal"})})]})]})]})})},Je=function(_,x,m){if(De.includes(m.conf_id)){var u=c.perf_data_result;Re(function(p){return p.filter(function(R){return R!==m.conf_id})}),ae(function(p){return p.map(function(R){if(R.suite_id===_.suite_id){var v;return(0,d.Z)((0,d.Z)({},R),{},{conf_list:(v=u.filter(function(E){return E.suite_id===_.suite_id})[0])===null||v===void 0?void 0:v.conf_list})}return R})});return}Re(function(p){return p.concat(m.conf_id)});var y=_.conf_list.reduce(function(p,R){return R.conf_id===m.conf_id?p.concat((0,d.Z)((0,d.Z)({},R),{},{metric_list:R.metric_list.reduce(function(v,E){var L=E.compare_data[x].compare_result,Oe=4;if(L){var Tt=Se.indexOf(L);Oe=Tt}return v.concat((0,d.Z)((0,d.Z)({},E),{},{sortNum:Oe}))},[]).sort(Rt("sortNum"))})):p.concat(R)},[]);ae(fe.map(function(p){return p.suite_id===_.suite_id?(0,d.Z)((0,d.Z)({},p),{},{conf_list:y}):p}))},tt=function(_){$e(_);var x=me().cloneDeep(B);ae(_==="all"?x:x.map(function(m){var u=m.conf_list.map(function(y){return(0,d.Z)((0,d.Z)({},y),{},{metric_list:y.metric_list.filter(function(p){return(0,ke.w)(p.compare_data,_)})})});return(0,d.Z)((0,d.Z)({},m),{},{conf_list:u})}))},rt=function(_){var x=_.conf_compare_data||_.compare_conf_list||[];return x.map(function(m,u){return(0,e.jsx)(s.r0,{gLen:b,children:(0,he.cO)(m)?(0,e.jsx)("div",{style:{height:38}}):(0,e.jsx)(Te.zA,{ws_id:je,job_id:m.obj_id||m})},u)})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.ER,{ref:de,children:(0,e.jsxs)(s.ZA,{style:{border:"1px solid rgba(0,0,0,0.10)"},children:[(0,e.jsx)(s.Ll,{gLen:b,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{envData:oe,group:b,isData:!0})]})}),(0,e.jsx)(ct,{groupRowRef:de,parentDom:Ae,envData:oe,groupLen:b}),(0,e.jsxs)(X.Z,{style:{maxWidth:document.body.clientWidth-40+be},children:[(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(s.Xb,{id:"perf_item",children:(0,e.jsx)(i._H,{id:"performance.test"})})}),(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(ze,{})})]}),(0,e.jsx)(s.Rr,{children:fe&&!!fe.length?fe.map(function(I,_){return(0,e.jsxs)(s.gb,{children:[(0,e.jsxs)(s.yO,{style:{textIndent:F==null?void 0:F.left},children:[I.suite_name,(0,e.jsx)(dt.Z,{containerScroll:F,btn:k,isReport:!1,obj:fe,suiteId:I.suite_id,setPerData:ae})]}),(0,e.jsx)(s.uP,{children:k?I.conf_list&&I.conf_list.length?I.conf_list.map(function(x,m){return!!x.metric_list.length&&(0,e.jsxs)("div",{children:[(0,e.jsxs)(s.h$,{children:[(0,e.jsx)(s.h,{gLen:b,children:(0,e.jsx)(i._H,{id:"analysis.TestConf/metric"})}),S==null?void 0:S.map(function(u,y){return(0,e.jsx)(s.iM,{gLen:b,children:y!==Ve?(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(G.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:(0,e.jsx)(i._H,{id:"analysis.result"})})}),(0,e.jsx)(P.Z,{span:12,children:(0,e.jsxs)(s.Qz,{children:[(0,e.jsx)(i._H,{id:"analysis.comparison/tracking.results"}),(0,e.jsx)("span",{onClick:function(){return Je(I,y,x)},style:{margin:"0 5px 0 3px",verticalAlign:"middle",cursor:"pointer"},children:De.includes(x.conf_id)?(0,e.jsx)(it.r,{}):(0,e.jsx)(Xe.r,{})}),(0,e.jsx)(yt.Z,{color:"#fff",overlayStyle:{minWidth:350},title:(0,e.jsxs)("span",{style:{color:"rgba(0,0,0,0.65)"},children:[(0,e.jsx)(i._H,{id:"analysis.the.greater.difference"}),(0,e.jsx)("br",{}),(0,e.jsx)(i._H,{id:"analysis.rules"}),"\uFF1A",(0,e.jsx)("br",{}),(0,e.jsx)(i._H,{id:"analysis.decline"}),">",(0,e.jsx)(i._H,{id:"analysis.increase"}),">",(0,e.jsx)(i._H,{id:"analysis.fluctuation"}),">",(0,e.jsx)(i._H,{id:"analysis.invalid"})]}),children:(0,e.jsx)(ot.Z,{})})]})})]}):(0,e.jsx)(G.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:S.length>1?(0,e.jsx)(i._H,{id:"analysis.benchmark"}):(0,e.jsx)(i._H,{id:"analysis.result"})})},y)})]}),(0,e.jsxs)("div",{style:{border:"1px solid rgba(0,0,0,0.10)"},children:[(0,e.jsxs)(s.TG,{children:[(0,e.jsx)(s.j3,{gLen:b,children:(0,e.jsx)(Ze.Z,{title:x.conf_name})}),rt(x)]}),x.metric_list.map(function(u,y){var p,R;return(0,e.jsxs)(s.WF,{children:[(0,e.jsx)(s.KW,{gLen:b,children:(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(P.Z,{span:16,children:(0,e.jsx)(X.Z,{justify:"start",children:(0,e.jsx)(Ze.Z,{title:"".concat(u.metric).concat(u.unit?"("+u.unit+")":""),children:(0,e.jsxs)(G.Z.Text,{style:{color:"rgba(0,0,0,0.65)"},children:[u.metric,u.unit&&(0,e.jsxs)("span",{children:["(",u.unit,")"]})]})})})}),(0,e.jsx)(P.Z,{span:8,children:(0,e.jsx)(X.Z,{justify:"end",children:(0,e.jsxs)(s.Qz,{children:["(","".concat((0,re.gt)(u.cv_threshold),"/").concat((0,re.gt)(u.cmp_threshold)),")"]})})})]})}),Array.isArray(u.compare_data)&&!!u.compare_data.length&&((p=u.compare_data)===null||p===void 0||(R=p.slice(0,b))===null||R===void 0?void 0:R.map(function(v,E){return(0,e.jsx)(s.LQ,{gLen:b,children:(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(P.Z,{span:v&&v.compare_result?12:20,children:(0,e.jsx)(X.Z,{justify:"start",children:(0,e.jsx)(Ze.Z,{title:(0,ke.U)(v),children:(0,e.jsx)(G.Z.Text,{style:{color:"rgba(0,0,0,0.65)"},children:(0,ke.U)(v)})})})}),v&&v.compare_result&&(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(X.Z,{justify:"end",children:(0,e.jsxs)(s.Qz,{children:[(0,e.jsx)("span",{className:(0,re.B1)(v.compare_result),children:v.compare_value||"-"}),(0,e.jsx)("span",{className:(0,re.B1)(v.compare_result),style:{padding:" 0px 9px "},children:(0,re.PV)(v.compare_result)})]})})})]})},E)}))]},y)})]})]},m)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE}):(0,e.jsx)(ut.Z,(0,d.Z)((0,d.Z)({},I),{},{envData:M,base_index:Ve}))})]},_)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},ft=(0,a.memo)(Ot),Ee=t(27165),Me=Le.Z.Option,Pt=function(f){var r=(0,i.YB)(),n=r.formatMessage,l=(0,a.useContext)(j),c=l.allGroupData,S=l.compareResult,M=l.baselineGroupIndex,g=l.group,oe=l.wsId,b=l.containerScroll,je=f.scrollLeft,F=S.func_data_result,Ae=(0,a.useState)(""),be=(0,h.Z)(Ae,2),Fe=be[0],ce=be[1],De=(0,a.useState)(0),Re=(0,h.Z)(De,2),He=Re[0],Ue=Re[1],fe=(0,a.useState)(!1),ae=(0,h.Z)(fe,2),pe=ae[0],We=ae[1],k=(0,a.useState)("All"),Ge=(0,h.Z)(k,2),Be=Ge[0],q=Ge[1],Ke=(0,a.useState)([]),Ne=(0,h.Z)(Ke,2),ue=Ne[0],ee=Ne[1],we=(0,a.useState)([]),$e=(0,h.Z)(we,2),de=$e[0],B=$e[1];(0,a.useEffect)(function(){Array.isArray(F)&&!!F.length&&B(F)},[F]);var Ve=function(x){var m=x.sub_case_list,u=x.conf_id,y=ue.includes(u);return(0,e.jsx)(e.Fragment,{children:y&&(m==null?void 0:m.map(function(p,R){var v,E;return(0,e.jsxs)(s.GH,{children:[(0,e.jsx)(s.ly,{gLen:g,children:(0,e.jsx)(G.Z.Text,{children:(0,e.jsx)(Ze.Z,{title:p.sub_case_name})})}),p.compare_data.length?(v=p.compare_data)===null||v===void 0||(E=v.slice(0,g))===null||E===void 0?void 0:E.map(function(L,Oe){return(0,e.jsx)(s.bH,{gLen:g,children:(0,e.jsx)(G.Z.Text,{style:{color:(0,re.Sh)(L)},children:L||"-"})},Oe)}):(0,e.jsx)(s.bH,{gLen:g,children:(0,e.jsx)(G.Z.Text,{children:"-"})})]},R)}))})},et=function(x){var m=ue.includes(x);ee(m?ue.filter(function(u){return u!==x}):ue.concat(x))},ze=function(x,m){console.log("func test handleArrow"),Ue(m),ce(x.suite_id);for(var u=[],y=0;y<5;y++)u.push([]);var p=m>Je?m-1:m,R=x.conf_list.map(function(v){var E;return v.sub_case_list.forEach(function(L){L.result==="Pass"&&L.compare_data[p]==="Fail"?u[0].push(L):L.result==="Fail"&&L.compare_data[p]==="Pass"?u[1].push(L):L.result==="Fail"&&L.compare_data[p]==="Fail"?u[2].push(L):L.result==="Pass"&&L.compare_data[p]==="Pass"?u[3].push(L):u[4].push(L)}),(0,d.Z)((0,d.Z)({},v),{},{sub_case_list:(E=[]).concat.apply(E,u)})});B(de.map(function(v){return v.suite_id==x.suite_id?(0,d.Z)((0,d.Z)({},v),{},{conf_list:R}):v}))},Je=(0,a.useMemo)(function(){return M===-1?0:M},[M]),tt=function(){We(!pe)};(0,a.useEffect)(function(){ee([]),ee(pe?de.reduce(function(_,x){return _.concat(x.conf_list.map(function(m){return m.conf_id}))},[]):[])},[pe]);var rt=function(x){q(x);var m=me().cloneDeep(F),u=[];x=="All"?B(m):(m.map(function(y){var p=[];y.conf_list.map(function(R){var v=R.sub_case_list.filter(function(E){return E.compare_data.includes(x)});p.push((0,d.Z)((0,d.Z)({},R),{},{sub_case_list:v}))}),u.push((0,d.Z)((0,d.Z)({},y),{},{conf_list:p}))}),B(u))},I=function(){return(0,e.jsx)(s.JI,{children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(J.Z,{onClick:tt,children:(0,e.jsx)(i._H,{id:pe?"analysis.folded.all":"analysis.expand.all"})}),(0,e.jsxs)(V.Z,{children:[(0,e.jsxs)(G.Z.Text,{children:[(0,e.jsx)(i._H,{id:"analysis.filter"}),": "]}),(0,e.jsxs)(Le.Z,{defaultValue:"All",style:{width:200},value:Be,onSelect:rt,children:[(0,e.jsx)(Me,{value:"All",children:(0,e.jsx)(i._H,{id:"analysis.all"})}),(0,e.jsx)(Me,{value:"Pass",children:(0,e.jsx)(i._H,{id:"analysis.pass"})}),(0,e.jsx)(Me,{value:"Fail",children:(0,e.jsx)(i._H,{id:"analysis.fail"})}),(0,e.jsx)(Me,{value:"Skip",children:(0,e.jsx)(i._H,{id:"analysis.skip"})})]})]})]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(X.Z,{style:{maxWidth:document.body.clientWidth-40+je},children:[(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(s.Xb,{id:"func_item",children:(0,e.jsx)(i._H,{id:"functional.test"})})}),(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(I,{})})]}),(0,e.jsx)(s.Rr,{children:de.length?de.map(function(_,x){var m;return(0,e.jsx)(a.Fragment,{children:(0,e.jsxs)(s.gb,{children:[(0,e.jsx)(s.yO,{style:{textIndent:b==null?void 0:b.left},children:_.suite_name}),(0,e.jsx)(s.h$,{children:_.conf_list&&_.conf_list.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.h,{gLen:g,children:"Conf"}),c==null?void 0:c.map(function(u,y){return(0,e.jsx)(s.iM,{gLen:g,children:(0,e.jsxs)(X.Z,{children:[(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(i._H,{id:"analysis.total/pass/fail"})}),y!==Je&&(0,e.jsxs)(P.Z,{span:12,style:{textAlign:"right",paddingRight:10},children:[(0,e.jsx)(i._H,{id:"analysis.comparison.results"}),(0,e.jsx)("span",{onClick:function(){return ze(_,y)},style:{margin:"0 5px 0 3px",verticalAlign:"middle",cursor:"pointer"},children:Fe==_.suite_id&&He==y?(0,e.jsx)(it.r,{}):(0,e.jsx)(Xe.r,{title:n({id:"analysis.differentiated.sorting"})})}),(0,e.jsx)(Ee.F,{})]})]})},y)})]}):null}),(0,e.jsx)(s.uP,{children:_.conf_list&&_.conf_list.length?(m=_.conf_list)===null||m===void 0?void 0:m.map(function(u,y){var p,R=ue.includes(u.conf_id),v=u.conf_compare_data||u.compare_conf_list;return(0,e.jsxs)(a.Fragment,{children:[(0,e.jsxs)(s.lu,{expand:R,children:[(0,e.jsx)(s.Km,{gLen:g,children:(0,e.jsxs)(Ze.Z,{title:u.conf_name,children:[(0,e.jsx)(s.Qq,{rotate:R?90:0,onClick:function(){return et(u.conf_id)}}),(0,e.jsx)(G.Z.Text,{style:{marginLeft:"12px"},children:u.conf_name})]})}),v==null||(p=v.slice(0,g))===null||p===void 0?void 0:p.map(function(E,L){return(0,e.jsx)(s.Lc,{gLen:g,children:(0,e.jsxs)(V.Z,{size:16,children:[(0,e.jsx)(G.Z.Text,{style:{color:"#649FF6"},children:(0,re.YL)(E.all_case)}),(0,e.jsx)(G.Z.Text,{style:{color:"#81BF84"},children:(0,re.YL)(E.success_case)}),(0,e.jsx)(G.Z.Text,{style:{color:"#C84C5A"},children:(0,re.YL)(E.fail_case)}),E&&!E.is_baseline?(0,e.jsx)(Te.zA,{ws_id:oe,job_id:E.obj_id,style:{paddingLeft:10}}):(0,e.jsx)(e.Fragment,{})]})},L)})]}),(0,e.jsx)(Ve,(0,d.Z)({},u))]},y)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},x)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},Ct=(0,a.memo)(Pt),Ie=t(28739),Lt=function(){var f=(0,$.TH)(),r=f.state,n=(0,i.YB)(),l=n.formatMessage,c=(0,$.UO)(),S=c.ws_id,M=c.form_id,g=(0,i.md)(),oe=(0,a.useRef)(null),b=(0,a.useState)({}),je=(0,h.Z)(b,2),F=je[0],Ae=je[1],be=(0,a.useState)({}),Fe=(0,h.Z)(be,2),ce=Fe[0],De=Fe[1],Re=(0,a.useState)({}),He=(0,h.Z)(Re,2),Ue=He[0],fe=He[1],ae=(0,a.useState)({}),pe=(0,h.Z)(ae,2),We=pe[0],k=pe[1],Ge=(0,a.useState)([]),Be=(0,h.Z)(Ge,2),q=Be[0],Ke=Be[1],Ne=(0,a.useState)(0),ue=(0,h.Z)(Ne,2),ee=ue[0],we=ue[1],$e=(0,a.useState)({}),de=(0,h.Z)($e,2),B=de[0],Ve=de[1],et=(0,a.useState)([]),ze=(0,h.Z)(et,2),Je=ze[0],tt=ze[1],rt=(0,a.useState)(void 0),I=(0,h.Z)(rt,2),_=I[0],x=I[1],m=(0,a.useState)(1),u=(0,h.Z)(m,2),y=u[0],p=u[1],R=(0,a.useState)(0),v=(0,h.Z)(R,2),E=v[0],L=v[1],Oe=(0,a.useRef)(null),Tt=a.useState(void 0),Bt=(0,h.Z)(Tt,2),Xt=Bt[0],kt=Bt[1],qt=a.useState(!1),Kt=(0,h.Z)(qt,2),er=Kt[0],Nt=Kt[1],tr=document.querySelector(".ant-layout-has-sider .ant-layout"),rr=(0,le.Z)(tr),ar=rr.top,nr=(0,Te.CR)(),sr=nr.height,lr=function(){var A=(0,C.Z)((0,Z.Z)().mark(function D(){var o,H,T;return(0,Z.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,te({form_id:M});case 2:if(o=U.sent,o.code!=200){U.next=13;break}if(o!=null&&o.data){U.next=6;break}return U.abrupt("return");case 6:Ae(o==null?void 0:o.data.testDataParam),De(o==null?void 0:o.data.envDataParam),Ke(o==null?void 0:o.data.allGroupData),we(o==null?void 0:o.data.baselineGroupIndex),x(o==null||(H=o.data.allGroupData[0])===null||H===void 0||(T=H.members[0])===null||T===void 0?void 0:T.ws_id),U.next=14;break;case 13:o.code===500?(0,he.CT)(500):(0,he.EV)(o.code,o.msg);case 14:case"end":return U.stop()}},D)}));return function(){return A.apply(this,arguments)}}();(0,a.useEffect)(function(){M?lr():r&&JSON.stringify(r)!=="{}"&&(Ae(r==null?void 0:r.testDataParam),De(r==null?void 0:r.envDataParam),k(r==null?void 0:r.compareGroupData),Ke(r==null?void 0:r.allGroupData),we(r==null?void 0:r.baselineGroupIndex),fe(r==null?void 0:r.domainGroupResult))},[M,r]);var Mt=q==null?void 0:q.length,ir=function(){return document.querySelector(".ant-layout-has-sider .ant-layout").scrollTop=0},or=(0,a.useState)({func_data_result:[],perf_data_result:[]}),wt=(0,h.Z)(or,2),at=wt[0],ur=wt[1],dr=function(){var A=(0,C.Z)((0,Z.Z)().mark(function D(o){var H;return(0,Z.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,st.on)(o);case 2:return H=z.sent,z.abrupt("return",H);case 4:case"end":return z.stop()}},D)}));return function(o){return A.apply(this,arguments)}}(),cr=function(){var A=(0,C.Z)((0,Z.Z)().mark(function D(){var o,H,T,z,U,Pe;return(0,Z.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,st.gQ)(ce);case 2:if(o=K.sent,o.code==200&&Ve(o.data),o.code!==1358){K.next=7;break}return W.default.error(l({id:"analysis.please.add.comparison.group"})),K.abrupt("return");case 7:o.code!==200&&W.default.error(o.msg),H=F.perf_suite_dic,T=F.func_suite_dic,z=[],U=[],H&&JSON.stringify(H)!=="{}"&&(z=(0,Ie.$7)(H)),T&&JSON.stringify(T)!=="{}"&&(U=(0,Ie.$7)(T)),Pe=[],Pe=z.concat(U),p(Pe.length),Pe.map(function(pt){return dr(pt).then(function(vt){var It=vt.code,At=vt.data;if(o.code===500){(0,he.CT)(500);return}if(o.code!==200){W.default.error(o.msg);return}var Jt=At.test_type;if(It===200&&JSON.stringify(At)!=="{}"&&["functional","performance"].includes(Jt)){var Yt=Jt==="functional"?"func_data_result":"perf_data_result";ur(function(Qt){return(0,d.Z)((0,d.Z)({},Qt),{},(0,ve.Z)({},Yt,Qt[Yt].concat(At)))})}})});case 17:case"end":return K.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),$t=(0,a.useMemo)(function(){var A=at.func_data_result,D=at.perf_data_result,o=D.length,H=A.length;return o+H},[at]);(0,a.useEffect)(function(){JSON.stringify(F)!=="{}"&&JSON.stringify(ce)!=="{}"&&cr()},[F,ce]);var fr=function(){var A=(0,C.Z)((0,Z.Z)().mark(function D(){var o,H,T,z,U,Pe;return(0,Z.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return o=q.map(function(pt){var vt=pt.members.map(function(It){return It.id});return(0,d.Z)((0,d.Z)({},pt),{},{members:vt})}),H={allGroupData:o,baselineGroupIndex:ee,testDataParam:F,envDataParam:ce},K.next=4,_t({form_data:H});case 4:if(T=K.sent,z=T.data,U=T.code,Pe=T.msg,U===200){K.next=11;break}return(0,he.EV)(U,Pe),K.abrupt("return");case 11:return K.abrupt("return",z);case 12:case"end":return K.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),pr=(0,Te.oM)(l({id:"analysis.copy.sharing.link.succeeded"})),vr=function(){var A=(0,C.Z)((0,Z.Z)().mark(function D(){var o;return(0,Z.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!er){T.next=2;break}return T.abrupt("return");case 2:if(o=Xt,o){T.next=9;break}return Nt(!0),T.next=7,fr();case 7:o=T.sent,Nt(!1);case 9:kt(o),pr(location.origin+"/share/analysis_result/".concat(o));case 11:case"end":return T.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),mr=function(){var D;(D=Oe.current)===null||D===void 0||D.show({})},hr=function(D){i.m8.push({pathname:"/ws/".concat(S,"/test_create_report"),state:{environmentResult:B,baselineGroupIndex:ee,allGroupData:q,testDataParam:me().cloneDeep(F),compareResult:me().cloneDeep(at),compareGroupData:We,domainGroupResult:Ue,saveReportData:D}})},Vt=function(D){var o=D.srcElement.scrollLeft||0;L(o)};(0,a.useEffect)(function(){return window.addEventListener("scroll",Vt,!0),function(){window.removeEventListener("scroll",Vt,!0)}},[]),(0,a.useEffect)(function(){if(JSON.stringify(B)!=="{}"){var A=me().cloneDeep(B);A.base_group&&(A.base_group.is_group=!0);var D=A.compare_groups,o=A.base_group;D.splice(ee,0,o),tt(D)}},[B.compare_groups]);var zt=a.useRef(null),_r=(0,le.Z)(zt);return(0,e.jsx)(j.Provider,{value:{allGroupData:q,baselineGroupIndex:ee,environmentResult:B,compareResult:at,envData:Je,group:Mt,wsId:S||_,containerScroll:_r},children:(0,e.jsxs)("div",{style:{width:"100%",minHeight:sr-50,position:"relative",overflow:"auto",background:"#f5f5f5"},ref:zt,children:[$t!==y&&(0,e.jsx)(s.he,{children:(0,e.jsxs)("span",{className:"my-loading-span",children:[(0,e.jsx)("i",{}),(0,e.jsx)("i",{}),(0,e.jsx)("i",{}),(0,e.jsx)("i",{})]})}),(0,e.jsx)(s.dv,{style:{width:Mt>3?Mt*390:1200},children:(0,e.jsxs)(P.Z,{span:24,children:[(0,e.jsxs)(s.BK,{style:{maxWidth:document.body.clientWidth-40+E},children:[(0,e.jsx)(s.ZI,{children:(0,e.jsx)(i._H,{id:"analysis.comparison.result"})}),(0,e.jsxs)("span",{className:"btn",children:[(0,e.jsx)("span",{className:"test_result_copy_link"}),!M&&(0,e.jsxs)("span",{onClick:vr,style:{cursor:"pointer"},children:[(0,e.jsx)(w.r,{style:{marginRight:5}}),(0,e.jsx)(i._H,{id:"operation.share"})]}),(0,e.jsx)(i.Nv,{accessible:g.IsWsSetting(),children:!M&&(0,e.jsx)(J.Z,{type:"primary",loading:$t!==y,onClick:mr,style:{marginLeft:8},children:(0,e.jsx)(i._H,{id:"analysis.create.report"})})})]})]}),(0,e.jsxs)(s.Xv,{children:[B&&JSON.stringify(B)!=="{}"&&(0,e.jsx)(gt,{}),(0,e.jsxs)(s.KP,{style:{position:"relative"},id:"test_data",ref:oe,children:[(0,e.jsxs)(s.DK,{children:[(0,e.jsx)("span",{className:"line"}),(0,e.jsx)(i._H,{id:"analysis.job.data"})]}),(0,e.jsx)(ft,{parentDom:oe,scrollLeft:E}),(0,e.jsx)(Ct,{scrollLeft:E})]})]})]})}),ar>600&&(0,e.jsx)("div",{style:{width:44,height:44,borderRadius:2,backgroundColor:"rgb(0, 0, 0, 0.1)",position:"fixed",bottom:10,right:20},onClick:ir,children:(0,e.jsx)(mt.Z,{style:{fontSize:30,padding:7,color:"rgb(0, 0, 0, 0.7)"}})}),S&&(0,e.jsx)(bt.Z,{ref:Oe,onOk:hr,allGroup:q})]})})},qe=(0,a.memo)(Lt)},45227:function(nt,ne,t){"use strict";var se=t(67448),P=t(47548),ge=t(20693),J=t(3278),ve=t(57359),d=t(34423),Y=t(46721),W=t(94867),Z=t(20418),C=t(35832),h=t(32326),a=t(65790),w=t(17187),$=t(39190),i=t(88018),le=t(58414),mt=t(41428),bt=t(69230),ht=t(33821),N=t(22374),Ft=t(992),Ye=t(97939),_t=t(97207),Q=t.n(_t),te=t(22812),Qe=t(24812),st=t(39935),j=t(52454),Ce,s=ht.Z.Option,xt=(0,Ye.ZP)(le.Z)(Ce||(Ce=(0,mt.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`])));ne.Z=(0,N.forwardRef)(function(e,jt){var gt=(0,te.YB)(),ye=gt.formatMessage,ie=(0,Qe.UO)(),Ht=ie.ws_id,yt=e.onOk,Ut=e.allGroup,X=w.Z.useForm(),Wt=(0,$.Z)(X,1),V=Wt[0],Gt=(0,N.useState)(!1),G=(0,$.Z)(Gt,2),Zt=G[0],lt=G[1],Le=(0,N.useState)(!1),Xe=(0,$.Z)(Le,2),it=Xe[0],ot=Xe[1],re=(0,N.useState)({}),ut=(0,$.Z)(re,2),ke=ut[0],St=ut[1],me=(0,N.useState)(!0),dt=(0,$.Z)(me,2),Ze=dt[0],Et=dt[1],Te=(0,N.useState)([]),he=(0,$.Z)(Te,2),_e=he[0],xe=he[1],Dt=(0,N.useState)([]),ct=(0,$.Z)(Dt,2),Se=ct[0],Rt=ct[1],Ot=(0,N.useState)([]),ft=(0,$.Z)(Ot,2),Ee=ft[0],Me=ft[1];(0,N.useImperativeHandle)(jt,function(){return{show:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(!0),St(r),V.setFieldsValue(r),Ct()}}});var Pt=function(){var f=(0,h.Z)((0,C.Z)().mark(function r(){var n,l,c,S;return(0,C.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,Ft.MD)({page_size:9999,page_num:1,ws_id:Ht});case 2:n=g.sent,l=n.data,c=n.code,S=n.msg,c===200&&Me(l),Et(!1),c!==200&&(0,st.EV)(c,S);case 9:case"end":return g.stop()}},r)}));return function(){return f.apply(this,arguments)}}();(0,N.useEffect)(function(){Pt()},[]),(0,N.useEffect)(function(){var f=Q().find(Ee,"is_default"),r=null;f&&(r=f.id);var n=null;Se.length===1&&(n=Se[0]);var l=null;_e.length===1&&(l=_e[0].id);var c=V.getFieldsValue();c.template=r,c.productVersion=n,c.project=l,V.setFieldsValue(c)},[Ee,Se,_e]);var Ct=function(){var r=[],n=[];try{Ut.forEach(function(l,c){l&&Q().isArray(l.members)&&l.members.length&&(r.push(l.members[0].product_version),l.members.forEach(function(S){return n.push({id:S.project_id,name:S.project_name})}))}),r=Q().uniq(r),n=Q().uniqWith(n,Q().isEqual),n=n.filter(function(l){return l.id!==void 0}),Rt(r),xe(n)}catch(l){console.log(l)}},Ie=function(){V.resetFields(),lt(!1),ot(!1)},Lt=function(){lt(!0),V.validateFields().then(function(){var r=(0,h.Z)((0,C.Z)().mark(function n(l){var c,S;return(0,C.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:c=l.template,S=Q().find(Ee,{id:c}),yt((0,Z.Z)((0,Z.Z)({},l),{},{is_default:Q().get(S,"is_default")}),ke),Ie();case 4:case"end":return g.stop()}},n)}));return function(n){return r.apply(this,arguments)}}()).catch(function(r){console.log(r),lt(!1)})},qe=function(r){var n="",l=Ee;if(r==="template"){var c=Q().find(l,"is_default");c&&(n=c.id)}return r==="productVersion"&&(l=Se.filter(function(S){return S}),l.length===1&&(n=l[0])),r==="project"&&(l=_e,l.length===1&&(n=l[0].id)),n},O=function(r){var n="",l=Ee;return r==="template"&&(n=ye({id:"report.please.select.template"})),r==="productVersion"&&(l=Se.filter(function(c){return c}),n=ye({id:"report.select.productVersion"})),r==="project"&&(l=_e,n=ye({id:"report.select.project"})),(0,j.jsx)(ht.Z,{showSearch:!0,allowClear:!0,placeholder:n,optionFilterProp:"children",style:{width:"100%"},onChange:function(S){var M=V.getFieldsValue();M[r]=S,V.setFieldsValue(M)},showArrow:!0,filterOption:function(S,M){return M.children.toLowerCase().indexOf(S.toLowerCase())>=0},children:l.map(function(c){return r==="productVersion"?(0,j.jsx)(s,{value:c,children:c},c):(0,j.jsx)(s,{value:c.id,children:c.name},c.id)})})};return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(P.Z,{spinning:Ze,children:(0,j.jsx)(xt,{title:(0,j.jsx)(te._H,{id:"report.generate.report"}),width:"375",onClose:Ie,visible:it,footer:(0,j.jsx)("div",{style:{textAlign:"right"},children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(W.Z,{onClick:Ie,children:(0,j.jsx)(te._H,{id:"operation.cancel"})}),(0,j.jsx)(W.Z,{type:"primary",disabled:Zt,onClick:Lt,children:(0,j.jsx)(te._H,{id:"operation.ok"})})]})}),children:(0,j.jsxs)(w.Z,{form:V,layout:"vertical",initialValues:{template:qe("template"),productVersion:qe("productVersion"),project:qe("project")},children:[(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(te._H,{id:"report.columns.name"}),name:"name",rules:[{required:!0,message:ye({id:"report.please.enter.name"})}],children:(0,j.jsx)(J.Z,{autoComplete:"auto",placeholder:ye({id:"report.please.enter.name"})})}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(te._H,{id:"report.select.template"}),name:"template",rules:[{required:!0}],children:O("template")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(te._H,{id:"report.columns.product_version"}),name:"productVersion",children:O("productVersion")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(te._H,{id:"report.columns.project"}),name:"project",children:O("project")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(te._H,{id:"report.description.input"}),name:"description",children:(0,j.jsx)(J.Z.TextArea,{placeholder:ye({id:"report.description.placeholder"})})})]})})})})})},65081:function(nt,ne,t){"use strict";var se=t(22374),P=t(44293),ge=t(23101),J=function(d,Y){var W=typeof Symbol=="function"&&d[Symbol.iterator];if(!W)return d;var Z=W.call(d),C,h=[],a;try{for(;(Y===void 0||Y-- >0)&&!(C=Z.next()).done;)h.push(C.value)}catch(w){a={error:w}}finally{try{C&&!C.done&&(W=Z.return)&&W.call(Z)}finally{if(a)throw a.error}}return h};function ve(d,Y){Y===void 0&&(Y=function(){return!0});var W=J((0,se.useState)({left:NaN,top:NaN}),2),Z=W[0],C=W[1],h=(0,P.Z)(Y);return(0,se.useEffect)(function(){var a=(0,ge.n)(d,document);if(!a)return;function w(i){var le;if(i===document){if(!document.scrollingElement)return;le={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}}else le={left:i.scrollLeft,top:i.scrollTop};h(le)&&C(le)}w(a);function $(i){!i.target||w(i.target)}return a.addEventListener("scroll",$),function(){a.removeEventListener("scroll",$)}},[d,h]),Z}ne.Z=ve}}]);
