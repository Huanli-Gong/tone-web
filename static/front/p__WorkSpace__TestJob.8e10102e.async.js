(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8226],{59e3:function(He){He.exports={code_wrapper:"code_wrapper___3eANK"}},17286:function(He,fe,t){"use strict";var dt=t(61679),Fe=t.n(dt),me=t(4974),pe=t.n(me),Se=t(51935),ie=t.n(Se),Q=t(48304),le=t(59e3),Le=t.n(le),ve=t(52454);fe.Z=function(te){var he=te.code,Je=te.onChange,re=te.readOnly,Ot=re===void 0?!1:re,S=te.mode,Ee=S===void 0?"shell":S;return(0,ve.jsx)(Q.fk,{value:he,className:Le().code_wrapper,options:{theme:"monokai",keyMap:"sublime",lineNumbers:Ee==="yaml",mode:Ee,readOnly:Ot},onBeforeChange:function(Ft,Pe,Ue){return Je(Ue)}})}},79638:function(He,fe,t){"use strict";var dt=t(79625),Fe=t(96584),me=t(20418),pe=t(39190),Se=t(488),ie=t(41428),Q=t(22374),le=t(97939),Le=t(526),ve=t(52454),te=["title","children","width","color","placement","style"],he,Je=le.ZP.div(he||(he=(0,ie.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),re=function(S){var Ee=S.title,V=S.children,Ft=S.width,Pe=S.color,Ue=S.placement,H=Ue===void 0?"topLeft":Ue,Ut=S.style,D=(0,Se.Z)(S,te),ne=(0,Q.useRef)(null),P=(0,Q.useState)(!1),g=(0,pe.Z)(P,2),K=g[0],L=g[1],i=(0,Le.CR)(),f=i.width,ut=function(){var Ve,Z,St=ne==null||(Ve=ne.current)===null||Ve===void 0?void 0:Ve.clientWidth,Lt=ne==null||(Z=ne.current)===null||Z===void 0?void 0:Z.scrollWidth;L(St<Lt)};(0,Q.useEffect)(function(){ut()},[Ee,f]);var X=(0,ve.jsx)(Je,(0,me.Z)((0,me.Z)({ref:ne,style:(0,me.Z)({width:Ft,color:Pe},Ut)},D),{},{children:V||Ee||"-"}));return K?(0,ve.jsx)(Fe.Z,{title:Ee,placement:H,overlayStyle:{wordBreak:"break-all"},children:X}):X};fe.Z=re},85879:function(He,fe,t){"use strict";var dt=t(53374),Fe=t(61674),me=t(41428),pe=t(22812),Se=t(97939),ie=t(39935),Q=t(52454),le,Le=Se.ZP.span(le||(le=(0,me.Z)([`
  font-family: PingFangSC;
  font-weight: 400;
  font-size: 14px;
  color: #1890FF;
  letter-spacing: 0;
  line-height: 24px;
  cursor: pointer;
`])));fe.Z=function(){var ve=(0,pe.YB)(),te=ve.formatMessage,he=function(){return pe.m8.push("/login?redirect_url=".concat(window.location.pathname))};return(0,Q.jsx)(Fe.Z,{message:(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{children:te({id:"you.haven.not.signed.in"})}),(0,Q.jsx)(Le,{onClick:he,children:te({id:"go.to.login"})})]}),type:"info",showIcon:!0,closable:!0})}},85944:function(He,fe,t){"use strict";t.r(fe),t.d(fe,{default:function(){return gn}});var dt=t(20632),Fe=t(71853),me=t(67448),pe=t(47548),Se=t(70772),ie=t(6701),Q=t(51937),le=t(34516),Le=t(13059),ve=t(53676),te=t(52730),he=t(25205),Je=t(20693),re=t(3278),Ot=t(14320),S=t(53479),Ee=t(57359),V=t(34423),Ft=t(31650),Pe=t(25100),Ue=t(46721),H=t(94867),Ut=t(81138),D=t(96146),ne=t(488),P=t(35832),g=t(20418),K=t(32326),L=t(39190),i=t(22374),f=t(22812),ut=t(24812),X=t(39935),ct=t(526),Ve=t(50690),Z=t.n(Ve),St=t(79638),Lt=t(85879),Fr=t(67164),Sr=t(2656),Lr=t(18406),Pr=t(2514),Rr=t(53770),Mr=t(60798),Dr=t(22686),kr=t(48451),Ir=t(19208),Aa=t(88018),Ar=t(58414),Ba=t(88966),Re=t(11048),Wa=t(65790),ae=t(17187),Br=t(67945),Wr=t.n(Br),e=t(52454),Nr=(0,i.forwardRef)(function(d,u){var h=d.onOk,a=(0,f.YB)(),r=a.formatMessage,w=ae.Z.useForm(),_e=(0,L.Z)(w,1),ge=_e[0],Ze=(0,i.useState)(!1),q=(0,L.Z)(Ze,2),B=q[0],Y=q[1],oe=(0,i.useState)(!1),Ke=(0,L.Z)(oe,2),k=Ke[0],be=Ke[1];(0,i.useImperativeHandle)(u,function(){return{show:function(){be(!0)},hide:function(){return be(!1)}}});var De=function(){ge.resetFields(),be(!1)},ke=function(){Y(!0),ge.validateFields().then(function(Ye){h(Ye),Y(!1)}).catch(function(Ye){console.log(Ye),Y(!1)})};return(0,e.jsx)(Ar.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(f._H,{id:"ws.test.job.template.drawer.title"}),width:"380",onClose:De,visible:k,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(H.Z,{onClick:De,children:(0,e.jsx)(f._H,{id:"operation.cancel"})}),(0,e.jsx)(H.Z,{type:"primary",disabled:B,onClick:ke,children:(0,e.jsx)(f._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(ae.Z,{form:ge,layout:"vertical",className:Wr().job_test_form,children:[(0,e.jsx)(ae.Z.Item,{name:"template_name",label:(0,e.jsx)(f._H,{id:"ws.test.job.template_name"}),rules:[{required:!0,message:r({id:"ws.test.job.template_name.rules1"}),whitespace:!0,type:"string",pattern:/^[A-Za-z0-9\._-]{1,64}$/g},{type:"string",min:1,message:r({id:"ws.test.job.template_name.rules2"}),whitespace:!0}],children:(0,e.jsx)(re.Z,{autoComplete:"off",placeholder:r({id:"ws.test.job.template_name.rules1"})})}),(0,e.jsx)(ae.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(re.Z.TextArea,{placeholder:r({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(ae.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)(Re.ZP.Group,{children:[(0,e.jsx)(Re.ZP,{value:!0,children:(0,e.jsx)(f._H,{id:"operation.yes"})}),(0,e.jsx)(Re.ZP,{value:!1,children:(0,e.jsx)(f._H,{id:"operation.no"})})]})})]})})}),$r=t(24895),Hr=t.n($r),Jr=(0,i.forwardRef)(function(d,u){var h=d.disabled,a=d.template,r=d.onEnabelChange,w=(0,f.YB)(),_e=w.formatMessage,ge=ae.Z.useForm(),Ze=(0,L.Z)(ge,1),q=Ze[0];return(0,i.useImperativeHandle)(u,function(){return{form:q,reset:q.resetFields,setVal:function(Y){q.setFieldsValue(Y)}}}),(0,i.useEffect)(function(){if(JSON.stringify(a)!=="{}"){var B=a.template_name,Y=a.description,oe=a.enable;q.setFieldsValue({template_name:B,description:Y,enable:oe})}},[a]),(0,e.jsxs)(ae.Z,{colon:!1,layout:"horizontal",size:"small",labelCol:{span:5},wrapperCol:{span:14},style:{width:"100%"},name:"basic",form:q,className:Hr().job_test_form,initialValues:{enable:!0},children:[(0,e.jsx)(ae.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.template.name"}),name:"template_name",rules:[{required:!0,pattern:/^[A-Za-z0-9\._-]{1,64}$/g,message:_e({id:"ws.test.job.template.message"})}],children:(0,e.jsx)(re.Z,{autoComplete:"off",disabled:h,placeholder:_e({id:"ws.test.job.template.message"})})}),(0,e.jsx)(ae.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(re.Z.TextArea,{rows:2,disabled:h,autoComplete:"off",placeholder:_e({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(ae.Z.Item,{label:(0,e.jsx)(f._H,{id:"ws.test.job.enable"}),name:"enable",children:(0,e.jsxs)(Re.ZP.Group,{disabled:h,onChange:function(Y){var oe=Y.target;return r(oe.value)},children:[(0,e.jsx)(Re.ZP,{value:!0,children:(0,e.jsx)(f._H,{id:"operation.yes"})}),(0,e.jsx)(Re.ZP,{value:!1,children:(0,e.jsx)(f._H,{id:"operation.no"})})]})})]})}),Me=t(75841),ft=t(32237),Ur=t(97207),b=t.n(Ur),Vt,Vr=["svgRef","title"];function mt(){return mt=Object.assign?Object.assign.bind():function(d){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(d[a]=h[a])}return d},mt.apply(this,arguments)}function Kr(d,u){if(d==null)return{};var h=Yr(d,u),a,r;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(d);for(r=0;r<w.length;r++)a=w[r],!(u.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(h[a]=d[a]))}return h}function Yr(d,u){if(d==null)return{};var h={},a=Object.keys(d),r,w;for(w=0;w<a.length;w++)r=a[w],!(u.indexOf(r)>=0)&&(h[r]=d[r]);return h}var zr=function(u){var h=u.svgRef,a=u.title,r=Kr(u,Vr);return i.createElement("svg",mt({width:"10px",height:"10px",viewBox:"0 0 10 10",ref:h},r),a?i.createElement("title",null,a):null,Vt||(Vt=i.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",fillOpacity:.65},i.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-1211.000000, -200.000000)",fill:"#000000",fillRule:"nonzero"},i.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},i.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-2",transform:"translate(1091.000833, 10.000000)"},i.createElement("g",{id:"\\u5207\\u6362",transform:"translate(0.000000, 7.000000)"},i.createElement("path",{d:"M7.91600701,2.00566619 C8.46849532,2.00566619 8.99835515,2.22514132 9.38902338,2.61580956 C9.77969162,3.00647779 9.99916674,3.53633762 9.99916674,4.08882594 L9.99916674,5.33872178 L9.16590285,5.33872178 L9.16590285,4.08882594 C9.16590285,3.39852752 8.60630542,2.83893009 7.91600701,2.83893009 L0.416631951,2.83893009 C0.235547567,2.83877357 0.075300007,2.72166479 0.020151264,2.54918235 C-0.0349974789,2.3766999 0.027582607,2.18834524 0.174985418,2.08315973 L3.09057579,0 L3.57386885,0.678276807 L1.71569037,2.00566619 L7.91517374,2.00566619 L7.91600701,2.00566619 Z M2.08315974,7.83851346 C1.53067143,7.83851347 1.00081159,7.61903834 0.61014336,7.2283701 C0.219475125,6.83770187 0,6.30784203 0,5.75535372 L0,4.50545788 L0.833263901,4.50545788 L0.833263901,5.75535372 C0.833263901,6.44565213 1.39286133,7.00524956 2.08315974,7.00524956 L9.5825348,7.00524956 C9.76361918,7.00540608 9.92386674,7.12251487 9.97901548,7.29499731 C10.0341642,7.46747976 9.97158413,7.65583442 9.82418132,7.76101992 L6.9077577,9.84417965 L6.42446463,9.16590285 L8.28264312,7.83851346 L2.08232647,7.83851346 L2.08315974,7.83851346 Z",id:"\\u5F62\\u72B6"}))))))))},Gr=i.forwardRef(function(d,u){return i.createElement(zr,mt({svgRef:u},d))}),Na=t.p+"static/yaml_format.2c7f34f4.svg",Kt,Qr=["svgRef","title"];function pt(){return pt=Object.assign?Object.assign.bind():function(d){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(d[a]=h[a])}return d},pt.apply(this,arguments)}function Xr(d,u){if(d==null)return{};var h=qr(d,u),a,r;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(d);for(r=0;r<w.length;r++)a=w[r],!(u.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(h[a]=d[a]))}return h}function qr(d,u){if(d==null)return{};var h={},a=Object.keys(d),r,w;for(w=0;w<a.length;w++)r=a[w],!(u.indexOf(r)>=0)&&(h[r]=d[r]);return h}var en=function(u){var h=u.svgRef,a=u.title,r=Xr(u,Qr);return i.createElement("svg",pt({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},r),a?i.createElement("title",null,a):null,Kt||(Kt=i.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},i.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-187.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},i.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},i.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD",transform:"translate(67.000000, 10.000000)"},i.createElement("g",{id:"\\u590D\\u5236",transform:"translate(0.000000, 5.000000)"},i.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),i.createElement("path",{d:"M9.75,9.125 L9.125,9.125 L9.125,8.5 L9.75,8.5 C10.095178,8.5 10.375,8.22017797 10.375,7.875 L10.375,2.25 C10.375,1.90482203 10.095178,1.625 9.75,1.625 L4.125,1.625 C3.77982203,1.625 3.5,1.90482203 3.5,2.25 L3.5,2.875 L2.875,2.875 L2.875,2.25 C2.875,1.55964406 3.43464406,1 4.125,1 L9.75,1 C10.4403559,1 11,1.55964406 11,2.25 L11,7.875 C11,8.56535594 10.4403559,9.125 9.75,9.125 Z M7.875,11 L2.25,11 C1.55964406,11 1,10.4403559 1,9.75 L1,4.125 C1,3.43464406 1.55964406,2.875 2.25,2.875 L7.875,2.875 C8.56535594,2.875 9.125,3.43464406 9.125,4.125 L9.125,9.75 C9.125,10.4403559 8.56535594,11 7.875,11 Z M2.25,3.5 C1.90482203,3.5 1.625,3.77982203 1.625,4.125 L1.625,9.75 C1.625,10.095178 1.90482203,10.375 2.25,10.375 L7.875,10.375 C8.22017797,10.375 8.5,10.095178 8.5,9.75 L8.5,4.125 C8.5,3.77982203 8.22017797,3.5 7.875,3.5 L2.25,3.5 Z",id:"\\u5F62\\u72B6"}))))))))},tn=i.forwardRef(function(d,u){return i.createElement(en,pt({svgRef:u},d))}),$a=t.p+"static/yaml_copy.deb8ded0.svg",Yt,rn=["svgRef","title"];function vt(){return vt=Object.assign?Object.assign.bind():function(d){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(d[a]=h[a])}return d},vt.apply(this,arguments)}function nn(d,u){if(d==null)return{};var h=an(d,u),a,r;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(d);for(r=0;r<w.length;r++)a=w[r],!(u.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(h[a]=d[a]))}return h}function an(d,u){if(d==null)return{};var h={},a=Object.keys(d),r,w;for(w=0;w<a.length;w++)r=a[w],!(u.indexOf(r)>=0)&&(h[r]=d[r]);return h}var sn=function(u){var h=u.svgRef,a=u.title,r=nn(u,rn);return i.createElement("svg",vt({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},r),a?i.createElement("title",null,a):null,Yt||(Yt=i.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},i.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-241.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},i.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},i.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-3",transform:"translate(121.000000, 10.000000)"},i.createElement("g",{id:"\\u4E0B\\u8F7D",transform:"translate(0.000000, 5.000000)"},i.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),i.createElement("path",{d:"M9.76628906,6.76792969 L9.76628906,9.39292969 L2.26628906,9.39292969 L2.26628906,6.76792969 C2.26628906,6.71615299 2.22431576,6.67417969 2.17253906,6.67417969 L1.70378906,6.67417969 C1.65201237,6.67417969 1.61003906,6.71615299 1.61003906,6.76792969 L1.61003906,9.67417969 C1.61003906,9.88128647 1.77793228,10.0491797 1.98503906,10.0491797 L10.0475391,10.0491797 C10.2546458,10.0491797 10.4225391,9.88128647 10.4225391,9.67417969 L10.4225391,6.76792969 C10.4225391,6.71615299 10.3805658,6.67417969 10.3287891,6.67417969 L9.86003906,6.67417969 C9.80826237,6.67417969 9.76628906,6.71615299 9.76628906,6.76792969 Z M5.54015625,7.23808594 L5.54015625,1.9921875 C5.54015625,1.93359375 5.58210938,1.88507812 5.63390625,1.88507812 L6.19640625,1.88507812 C6.24820312,1.88507812 6.29015625,1.93300781 6.29015625,1.9921875 L6.29015625,7.23867188 L5.54015625,7.23808594 Z M5.63929688,7.94273438 L3.2109375,5.14324219 C3.18695638,5.11557797 3.18127346,5.07648476 3.19638545,5.04313764 C3.21149744,5.00979052 3.24463907,4.98829152 3.28125,4.98808594 L3.984375,4.98808594 C4.03874685,4.98808594 4.09044112,5.01168849 4.12605469,5.05277344 L5.92253906,7.12617187 L7.71867187,5.05289063 C7.75428544,5.01180568 7.80597971,4.98820334 7.86035156,4.98820313 L8.56347656,4.98820313 C8.60008749,4.98840871 8.63322912,5.00990771 8.64834111,5.04325483 C8.6634531,5.07660195 8.65777018,5.11569516 8.63378906,5.14335938 L6.20578125,7.94273438 C6.13455555,8.02482249 6.03122006,8.07197257 5.92253906,8.07197257 C5.81385806,8.07197257 5.71052258,8.02482249 5.63929687,7.94273438 L5.63929688,7.94273438 Z",id:"\\u5F62\\u72B6"}))))))))},ln=i.forwardRef(function(d,u){return i.createElement(sn,vt({svgRef:u},d))}),Ha=t.p+"static/yaml_download.50c0c969.svg",zt,on=["svgRef","title"];function ht(){return ht=Object.assign?Object.assign.bind():function(d){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(d[a]=h[a])}return d},ht.apply(this,arguments)}function dn(d,u){if(d==null)return{};var h=un(d,u),a,r;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(d);for(r=0;r<w.length;r++)a=w[r],!(u.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,a)||(h[a]=d[a]))}return h}function un(d,u){if(d==null)return{};var h={},a=Object.keys(d),r,w;for(w=0;w<a.length;w++)r=a[w],!(u.indexOf(r)>=0)&&(h[r]=d[r]);return h}var cn=function(u){var h=u.svgRef,a=u.title,r=dn(u,on);return i.createElement("svg",ht({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:h},r),a?i.createElement("title",null,a):null,zt||(zt=i.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},i.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-132.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},i.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},i.createElement("g",{id:"\\u7F16\\u7EC4-4",transform:"translate(12.000000, 10.000000)"},i.createElement("g",{id:"icon_\\u5BF9\\u53F7-\\u7EBF",transform:"translate(0.000000, 5.000000)"},i.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),i.createElement("path",{d:"M5.07007084,8.82774395 C4.96931758,8.8279648 4.87265067,8.78792641 4.80156211,8.71652833 L2.20138155,6.11634779 C2.05338453,5.96793191 2.05338453,5.72774618 2.20138155,5.57933031 C2.27322578,5.50766751 2.36847381,5.46811689 2.46989029,5.4681169 C2.57130677,5.46811691 2.66673622,5.50766752 2.73839903,5.57933031 L5.07025227,7.91118355 L9.35205949,3.62901348 C9.42310215,3.55754689 9.51979898,3.51749611 9.62056822,3.51779834 C9.7219847,3.51779834 9.81741415,3.55716925 9.88907696,3.62901348 C10.0369743,3.77747052 10.0369743,4.0175739 9.88907696,4.16603095 L5.33857957,8.71652833 C5.26755994,8.78802927 5.17084809,8.82808628 5.07007084,8.82774395 Z",id:"\\u8DEF\\u5F84"}))))))))},fn=i.forwardRef(function(d,u){return i.createElement(cn,ht({svgRef:u},d))}),Ja=t.p+"static/yaml_test.151c552f.svg",mn=t(17286),pn=t(99648),vn=["env_info","rpm_info","script_info","moniter_contrl","monitor_info","reclone_contrl","app_name","os","vm","need_reboot","kernel_version","kernel_install","code_repo","code_branch","compile_branch","cpu_arch","commit_id","kernel_packages","build_config","build_machine","scripts","kernel","devel","headers","hotfix_install"],hn=["branch"],_n=function(u){var h=(0,f.YB)(),a=h.formatMessage,r=u.route.name,w=(0,ct.CR)(),_e=w.height,ge=w.width,Ze=["TemplatePreview","TemplateEdit","JobTypePreview"].includes(r),q=(0,f.tT)("@@initialState"),B=q.initialState,Y=q.setInitialState,oe=B.authList,Ke=(0,ut.UO)(),k=Ke.ws_id,be=Ke.jt_id,De=(0,ut.TH)(),ke=De.query,de=De.state,Ye=De.pathname,ze=(0,f.md)();(0,ct.jk)("Workspace.".concat(r));var bn=(0,i.useState)([]),Gt=(0,L.Z)(bn,2),jn=Gt[0],Pt=Gt[1],yn=(0,i.useState)({name:"",server_type:"",test_type:""}),Qt=(0,L.Z)(yn,2),x=Qt[0],En=Qt[1],Zn=(0,i.useState)({basic:{},env:{},suite:{},more:{}}),Xt=(0,L.Z)(Zn,2),se=Xt[0],wn=Xt[1],Tn=(0,i.useState)(!0),qt=(0,L.Z)(Tn,2),Rt=qt[0],Mt=qt[1],xn=(0,i.useState)(!1),er=(0,L.Z)(xn,2),Cn=er[0],tr=er[1],On=(0,i.useState)(!1),rr=(0,L.Z)(On,2),Fn=rr[0],nr=rr[1],Sn=(0,i.useState)(r==="TemplatePreview"),ar=(0,L.Z)(Sn,2),Ln=ar[0],Dt=ar[1],Pn=(0,i.useState)(!1),sr=(0,L.Z)(Pn,2),ir=sr[0],kt=sr[1],Rn=(0,i.useState)({}),lr=(0,L.Z)(Rn,2),Ie=lr[0],_t=lr[1],Mn=(0,i.useState)(!1),or=(0,L.Z)(Mn,2),Dn=or[0],dr=or[1],gt=(0,i.useRef)(null),we=(0,i.useRef)(null),bt=(0,i.useRef)(null),jt=(0,i.useRef)(null),ur=(0,i.useRef)(null),kn=(0,i.useRef)(null),In=(0,i.useRef)(null),An=(0,i.useRef)(null),Bn=(0,i.useRef)(null),Wn=(0,i.useRef)(null),It=(0,i.useRef)(),yt=(0,i.useRef)(),Nn=(0,i.useState)(),cr=(0,L.Z)(Nn,2),$n=cr[0],Hn=cr[1],Jn=(0,i.useState)(!1),fr=(0,L.Z)(Jn,2),Un=fr[0],At=fr[1],Vn=(0,i.useState)(!1),mr=(0,L.Z)(Vn,2),Ge=mr[0],I=mr[1],Kn=(0,i.useState)(!1),pr=(0,L.Z)(Kn,2),Yn=pr[0],zn=pr[1],Gn=(0,i.useState)(""),vr=(0,L.Z)(Gn,2),Qe=vr[0],Et=vr[1],Qn=(0,i.useState)(!1),hr=(0,L.Z)(Qn,2),W=hr[0],_r=hr[1],Bt=(0,f.QT)(function(_){return(0,ft.qi)(_)},{initialData:[],throttleInterval:300,manual:!0}),Xe=Bt.data,gr=Bt.run,Xn=Bt.refresh,qn=function(){Dt(!1),kt(!0)},qe=function(n){return new Promise(function(s,l){return n.validateFields().then(s).catch(function(){l(),I(!1)})})},ea=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m,o,p,y,F,O,j,ee,N,z;return(0,P.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(Mt(!0),s=be,r!=="TestExport"){E.next=10;break}return E.next=5,(0,Me.Eh)((0,g.Z)({job_id:be},ke));case 5:l=E.sent,c=l.data,_t(c),Pt(c.test_config),s=c.job_type_id;case 10:if(!["TestTemplate","TemplatePreview","TemplateEdit","TestJob"].includes(r)){E.next=31;break}if(v=null,r==="TestJob"&&ke.template_id&&(v=ke.template_id),["TestTemplate","TemplatePreview","TemplateEdit"].includes(r)&&(v=be),!v){E.next=30;break}return E.next=17,(0,Me.Ls)({template_id:v});case 17:if(m=E.sent,o=m.code,p=m.data,o!==500){E.next=23;break}return(0,X.CT)(500),E.abrupt("return");case 23:y=(0,L.Z)(p,1),F=y[0],s=F.job_type_id,_t(F),Pt(F.test_config),At(F.enable),E.next=31;break;case 30:_t({});case 31:return E.next=33,(0,Sr.Wt)({jt_id:s});case 33:return O=E.sent,j=(0,L.Z)(O.data,1),ee=j[0],En(ee),E.next=39,(0,Fr.Dn)({jt_id:s});case 39:N=E.sent,z=N.data,ta(z),Mt(!1),r==="TestJob"&&gr({ws_id:k,job_type_id:s,enable:"True"});case 44:case"end":return E.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),ta=function(n){var s={},l={},c={},v={};n==null||n.forEach(function(m){m.config_index===1&&(s[m.name]=m),m.config_index===2&&(l[m.name]=m),m.config_index===3&&(c[m.name]=m),m.config_index===4&&(v[m.name]=m)}),wn({basic:s,env:l,suite:c,more:v})},br=(0,ct.oM)(a({id:"request.copy.success"})),jr=function(){var n,s,l,c,v,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;zn(m),Et(""),(n=yt.current)===null||n===void 0||n.reset(),(s=bt.current)===null||s===void 0||s.reset(),(l=gt.current)===null||l===void 0||l.reset(),(c=we.current)===null||c===void 0||c.reset(),(v=jt.current)===null||v===void 0||v.reset()};(0,i.useEffect)(function(){jr(),ea()},[Ye,ke]);var Ae=function _(n){var s={};return Object.keys(n).forEach(function(l){var c=n[l];if(!(c==null||c==="")){var v=Object.prototype.toString.call(c);if(v==="[object Array]"){var m=c.filter(function(o){var p=!1;if(Object.keys(o).forEach(function(y){var F=o[y];(F==null||F==="")&&(p=!0)}),!p)return o});m.length!==0&&(s[l]=m)}else v==="[object Object]"?JSON.stringify(c)!=="{}"&&(s[l]=_(c)):s[l]=c}}),Object.assign({},s)},je=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m,o,p,y,F,O,j,ee,N,z,Te,E,M,A,R,C,$,J,xe,ce,Ce,wt,rt,$t,Ht,Jt,Tt,nt,Be,xt,at,Oe,ye,st,We,it,Ne,lt,Ct,$e=arguments;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(s=$e.length>0&&$e[0]!==void 0?$e[0]:null,l={},c="",!(r==="TestTemplate"||r==="TemplatePreview"||r==="TemplateEdit")){T.next=13;break}if(!s){T.next=8;break}T.t0=s.templateEditFormInfo,T.next=11;break;case 8:return T.next=10,qe(yt.current.form);case 10:T.t0=T.sent;case 11:v=T.t0,l=Object.assign(l,Ae(v));case 13:if(JSON.stringify(se.basic)==="{}"){T.next=23;break}if(!s){T.next=18;break}T.t1=s.basicFormInfo,T.next=21;break;case 18:return T.next=20,qe(bt.current.form);case 20:T.t1=T.sent;case 21:m=T.t1,l=Object.assign(l,Ae(m));case 23:if(JSON.stringify(se.env)==="{}"){T.next=43;break}if(!s){T.next=28;break}T.t2=s.envFormInfo,T.next=31;break;case 28:return T.next=30,qe(we.current.form);case 30:T.t2=T.sent;case 31:o=T.t2,p=o.env_info,y=o.rpm_info,F=o.script_info,O=o.moniter_contrl,j=o.monitor_info,ee=o.reclone_contrl,N=o.app_name,z=o.os,Te=o.vm,E=o.need_reboot,M=o.kernel_version,A=o.kernel_install,R=o.code_repo,C=o.code_branch,$=o.compile_branch,J=o.cpu_arch,xe=o.commit_id,ce=o.kernel_packages,Ce=o.build_config,wt=o.build_machine,rt=o.scripts,$t=o.kernel,Ht=o.devel,Jt=o.headers,Tt=o.hotfix_install,nt=(0,ne.Z)(o,vn),c=A,Be=p,xt=(0,g.Z)({code_repo:R,code_branch:C,compile_branch:$,cpu_arch:J,commit_id:xe,build_config:Ce,build_machine:wt,scripts:rt},nt),at={hotfix_install:Tt,scripts:rt,kernel_packages:ce},Oe=F,ye=y,E||(ye=ye?ye.map(function(G){return(0,g.Z)((0,g.Z)({},G),{},{pos:"before"})}):void 0,Oe=Oe?Oe.map(function(G){return(0,g.Z)((0,g.Z)({},G),{},{pos:"before"})}):void 0),st={env_info:Be||"",rpm_info:ye,script_info:Oe,moniter_contrl:O,reclone_contrl:ee,iclone_info:z||N||Te?{os:z,app_name:N,vm:Te}:void 0,need_reboot:E,kernel_version:M},R?st.build_pkg_info=xt:st.kernel_info=at,l=Object.assign(l,Ae(st),{monitor_info:j});case 43:if(JSON.stringify(se.more)==="{}"){T.next=54;break}if(!s){T.next=48;break}T.t3=s.moreFormInfo,T.next=51;break;case 48:return T.next=50,qe(gt.current.form);case 50:T.t3=T.sent;case 51:We=T.t3,it=We.email?We.email.replace(/\s/g,","):null,l=Object.assign(l,Ae((0,g.Z)((0,g.Z)({},We),{},{email:it})));case 54:return Ne=s?s.new_test_config:jn,Ne.length>0&&(lt=Ne.map(function(G){var ha=G.id,_a=G.setup_info,ga=G.console,ba=G.need_reboot,ja=G.priority,ya=G.cleanup_info,Ea=G.run_mode,Za=G.test_case_list;return(0,g.Z)((0,g.Z)({},Ae({test_suite:ha,setup_info:_a,cleanup_info:ya,console:ga,need_reboot:ba,priority:ja,run_mode:Ea})),{},{cases:Za.map(function(U){var wa=U.id,wr=U.setup_info,Ta=U.cleanup_info,xa=U.repeat,Ca=U.server_object_id,Oa=U.server_tag_id,Fa=U.need_reboot,Sa=U.console,La=U.monitor_info,Pa=U.priority,Ra=U.env_info,Ma=U.is_instance,Tr=U.custom_ip,xr=U.custom_channel,Da=Ra.filter(function(ot){if(ot.name&&ot.val)return ot}),ka=Da.reduce(function(ot,Or,Ia){return ot.concat("".concat(Ia?`
`:"").concat(Or.name,"=").concat(Or.val))},""),Cr=void 0;return xr&&Tr&&(Cr={custom_channel:xr,custom_ip:Tr}),Ae({test_case:wa,setup_info:wr==="[]"?"":wr,cleanup_info:Ta,repeat:xa,server_object_id:Ca,server_tag_id:Oa,need_reboot:Fa,console:Sa,monitor_info:La,priority:Pa,is_instance:Ma,env_info:ka,customer_server:Cr})})})}),l.test_config=lt),c!=="install_push"&&(l.kernel_version=null),Ct=l.report_template,delete l.report_template,"report_name"in l&&b().get(l,"report_name")&&(l.report_template=Ct),T.abrupt("return",l);case 61:case"end":return T.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),Wt=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m,o,p,y,F,O,j,ee,N,z=arguments;return(0,P.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(s=z.length>0&&z[0]!==void 0?z[0]:"",l={},!(we&&we.current)){E.next=8;break}return E.next=5,qe(we.current.form);case 5:E.t0=E.sent,E.next=9;break;case 8:E.t0={};case 9:if(c=E.t0,v=x==null?void 0:x.server_type,nr(!0),W){E.next=24;break}return E.next=15,je();case 15:m=E.sent,o=b().cloneDeep(m),p=b().get(o,"test_config"),b().isArray(p)&&p.forEach(function(M){var A=b().get(M,"cases"),R=b().get(M,"run_mode");b().isArray(A)&&(A=A.map(function(C){var $={},J=b().cloneDeep(C);if(b().has(J,"server_object_id")&&J.server_object_id!==void 0){var xe=b().get(J,"is_instance"),ce="id";xe===0&&v==="aliyun"&&(ce="config"),xe===1&&v==="aliyun"&&(ce="instance"),R==="cluster"&&(ce="cluster"),$[ce]=b().get(J,"server_object_id")}if(b().has(J,"server_tag_id")&&J.server_tag_id.length&&($={tag:b().get(J,"server_tag_id")}),b().get(J,"customer_server")){var Ce=b().get(J,"customer_server");$={channel_type:Ce.custom_channel,ip:Ce.custom_ip}}return $&&(C.server=$),delete C.server_object_id,delete C.server_tag_id,delete M.run_mode,delete C.is_instance,delete C.customer_server,C}),M.cases=A)}),o.test_config=p,delete o.moniter_contrl,delete o.reclone_contrl,o.kernel_version||delete o.kernel_version,l={type:"json2yaml",json_data:o,workspace:k};case 24:return W&&(l={type:"yaml2json",yaml_data:Qe,workspace:k}),E.next=27,(0,Me.VV)(l);case 27:return y=E.sent,F=y.code,O=y.msg,j=y.data,nr(!1),ee={},F===200?(W||Et(j),W&&(o=b().cloneDeep(j),N=j.test_config,b().isArray(N)&&N.forEach(function(M){var A=b().get(M,"cases");M.run_mode="standalone",b().isArray(A)&&(A=A.map(function(R){var C=b().get(R,"server");if(b().has(C,"id")&&(R.server_object_id=b().get(C,"id")),b().get(C,"config")&&(R.server_object_id=b().get(C,"config"),R.is_instance=0),b().get(C,"instance")&&(R.server_object_id=b().get(C,"instance"),R.is_instance=1),b().get(C,"cluster")&&(R.server_object_id=b().get(C,"cluster"),M.run_mode="cluster"),b().get(C,"tag")&&b().get(C,"tag").length&&(R.server_tag_id=b().get(C,"tag")),b().get(C,"channel_type")&&b().get(C,"ip")&&(R.customer_server={custom_channel:b().get(C,"channel_type"),custom_ip:b().get(C,"ip")},R.ip=b().get(C,"ip")),b().get(C,"name")){var $=C.name;b().isArray($)&&($=$.join(",")),R.ip=$}return delete R.server,R}),M.cases=A)}),o.test_config=N==null?void 0:N.map(function(M){return(0,g.Z)((0,g.Z)({},M),{},{test_suite_id:M.test_suite,cases:M.cases.map(function(A){return(0,g.Z)((0,g.Z)({},A),{},{test_case_id:A.test_case})})})}),o.moniter_contrl=!1,o.reclone_contrl=b().get(c,"reclone_contrl")||!1,b().get(o,"monitor_info")&&(o.moniter_contrl=!0),ee=na(o)),s!=="template"&&s!=="submit"&&_r(!W)):(0,X.EV)(F,O),E.abrupt("return",{code:F,result:ee});case 35:case"end":return E.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),Zt=function(n){var s=location.search.indexOf("inheriting_machine")!==-1;return n.map(function(l){var c=b().get(l,"cases")||[];return l.cases=c.map(function(v){var m=v||{},o=m.customer_server,p=m.server_object_id,y=b().get(o,"custom_channel"),F=b().get(o,"custom_ip");return y&&F&&(v.server={ip:F,channel_type:y},delete v.customer_server),s&&p&&delete v.server_tag_id,v}),l})},ra=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m,o,p,y,F;return(0,P.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!Ge){j.next=2;break}return j.abrupt("return",!1);case 2:if(tr(!1),I(!0),s={},!W){j.next=14;break}return j.next=8,Wt("submit");case 8:if(l=j.sent,c=l.code,v=l.result,s=v,c===200){j.next=14;break}return j.abrupt("return");case 14:if(!W){j.next=20;break}return j.next=17,je(s);case 17:j.t0=j.sent,j.next=23;break;case 20:return j.next=22,je();case 22:j.t0=j.sent;case 23:if(m=j.t0,m=(0,g.Z)((0,g.Z)({},m),{},{workspace:k,job_type:x.id}),r==="TestTemplate"&&(m=(0,g.Z)((0,g.Z)({},m),{},{data_from:"template",template_id:Ie.id,job_type:x.id})),r==="TestExport"&&(m=(0,g.Z)((0,g.Z)({},m),{},{data_from:"rerun",job_id:be})),!et(m)){j.next=30;break}return I(!1),j.abrupt("return",D.default.warning(a({id:"ws.test.job.machine.cannot.be.empty"})));case 30:if(m.test_config){j.next=33;break}return I(!1),j.abrupt("return",D.default.warning(a({id:"ws.test.job.suite.cannot.be.empty"})));case 33:return o=Zt(m.test_config),j.prev=34,j.next=37,(0,Me._r)((0,g.Z)((0,g.Z)({},m),{},{test_config:o}));case 37:p=j.sent,y=p.code,F=p.msg,y===200&&(Y((0,g.Z)((0,g.Z)({},B),{},{refreshMenu:!(B!=null&&B.refreshMenu)})),f.m8.push("/ws/".concat(k,"/test_result")),D.default.success(a({id:"ws.test.job.operation.success"}))),y!==200&&(y===1380?tr(!0):(0,X.EV)(y,F)),j.next=46;break;case 44:j.prev=44,j.t1=j.catch(34);case 46:I(!1);case 47:case"end":return j.stop()}},n,null,[[34,44]])}));return function(){return _.apply(this,arguments)}}(),et=function(n){var s=!1;if(n&&n.moniter_contrl){var l=Array.isArray(n.monitor_info)?n.monitor_info:[];s=l.some(function(c){return c&&c.monitor_type==="custom_machine"&&!c.server})}return s},na=function(n){var s,l,c,v,m,o=n.template_name,p=n.description,y=n.enable,F=n.name,O=n.project,j=n.baseline,ee=n.monitor_info,N=n.need_reboot,z=n.rpm_info,Te=n.script_info,E=n.env_info,M=n.kernel_info,A=n.kernel_version,R=n.iclone_info,C=n.build_pkg_info,$=n.reclone_contrl,J=n.moniter_contrl,xe=n.test_config,ce=n.cleanup_info,Ce=n.tags,wt=n.notice_subject,rt=n.report_name,$t=n.callback_api,Ht=n.email,Jt=n.ding_token,Tt=n.report_template,nt=R||{},Be=nt.os,xt=Be===void 0?"":Be,at=nt.app_name,Oe=at===void 0?"":at,ye=M||{},st=ye.branch,We=(0,ne.Z)(ye,hn),it={template_name:o,description:p,enable:y},Ne={name:F,project:O,baseline:j},lt=(0,g.Z)((0,g.Z)({monitor_info:ee,rpm_info:z,script_info:Te,need_reboot:N,env_info:E,reclone_contrl:$,os:xt,app_name:Oe,moniter_contrl:J,kernel_version:A},We),C),Ct=xe,$e={cleanup_info:ce,tags:Ce,notice_subject:wt,email:Ht,ding_token:Jt,report_template:Tt,report_name:rt,callback_api:$t};(s=yt.current)===null||s===void 0||s.setVal(it),(l=bt.current)===null||l===void 0||l.setVal(Ne),(c=we.current)===null||c===void 0||c.setVal((0,g.Z)((0,g.Z)({},lt),{},{kernel_info:M,build_pkg_info:C})),(v=gt.current)===null||v===void 0||v.setVal($e);var Zr=((m=jt.current)===null||m===void 0?void 0:m.setVal(Ct))||[];return{templateEditFormInfo:it,basicFormInfo:Ne,envFormInfo:lt,moreFormInfo:$e,new_test_config:Zr}},yr=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(s){var l,c,v,m,o;return(0,P.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!Ge){y.next=2;break}return y.abrupt("return",!1);case 2:return I(!0),y.next=5,je();case 5:if(l=y.sent,!et(l)){y.next=9;break}return I(!1),y.abrupt("return",D.default.warning(a({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(l.test_config){y.next=12;break}return I(!1),y.abrupt("return",D.default.warning(a({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return l=(0,g.Z)((0,g.Z)({workspace:k},l),{},{job_type:x.id}),c=Zt(l.test_config),y.next=16,(0,ft.Y9)((0,g.Z)((0,g.Z)({},l),{},{test_config:c},s));case 16:v=y.sent,m=v.code,o=v.msg,m===200?(D.default.success(a({id:"ws.test.job.operation.success"})),It.current.hide(),Xn(),Y((0,g.Z)((0,g.Z)({},B),{},{refreshMenu:!(B!=null&&B.refreshMenu)}))):(0,X.EV)(m,o),I(!1);case 21:case"end":return y.stop()}},n)}));return function(s){return _.apply(this,arguments)}}(),aa=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m;return(0,P.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(s={},!W){p.next=10;break}return p.next=4,Wt("template");case 4:if(l=p.sent,c=l.code,v=l.result,s=v,c===200){p.next=10;break}return p.abrupt("return");case 10:if(!W){p.next=16;break}return p.next=13,je(s);case 13:p.t0=p.sent,p.next=19;break;case 16:return p.next=18,je();case 18:p.t0=p.sent;case 19:if(m=p.t0,!et(m)){p.next=22;break}return p.abrupt("return",D.default.warning(a({id:"ws.test.job.machine.cannot.be.empty"})));case 22:if(m.test_config){p.next=24;break}return p.abrupt("return",D.default.warning(a({id:"ws.test.job.suite.cannot.be.empty"})));case 24:r==="TestJob"||r==="TestExport"?It.current.show():yr({});case 25:case"end":return p.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),sa=function(n){var s=n.target;gr({job_type_id:x.id,name:s.value})},ia=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m,o,p,y;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!Ge){O.next=2;break}return O.abrupt("return");case 2:return I(!0),O.next=5,je();case 5:if(s=O.sent,!et(s)){O.next=9;break}return I(!1),O.abrupt("return",D.default.warning(a({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(s.test_config){O.next=13;break}return I(!1),D.default.warning(a({id:"ws.test.job.suite.cannot.be.empty"})),O.abrupt("return");case 13:return s.baseline||(s.baseline=null),s.baseline_job_id||(s.baseline_job_id=null),s.cleanup_info||(s.cleanup_info=""),l=Zt(s.test_config),O.next=19,(0,ft.iM)((0,g.Z)((0,g.Z)({template_id:Ie.id,workspace:k,job_type:x.id},s),{},{test_config:l}));case 19:if(c=O.sent,v=c.code,m=c.msg,v!==200){O.next=36;break}return O.next=25,(0,Me.Ls)({template_id:Ie.id});case 25:o=O.sent,p=(0,L.Z)(o.data,1),y=p[0],_t(y),kt(!1),Dt(!0),At(s.enable),D.default.success(a({id:"operation.success"})),r!=="TemplatePreview"&&f.m8.push({pathname:"/ws/".concat(k,"/job/templates"),state:de||{}}),O.next=37;break;case 36:(0,X.EV)(v,m);case 37:I(!1);case 38:case"end":return O.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),la=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v,m;return(0,P.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!Ge){p.next=2;break}return p.abrupt("return");case 2:return I(!0),p.next=5,je();case 5:if(s=p.sent,!et(s)){p.next=9;break}return I(!1),p.abrupt("return",D.default.warning(a({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(s.test_config){p.next=12;break}return I(!1),p.abrupt("return",D.default.warning(a({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return s.baseline||(s.baseline=null),l=Zt(s.test_config),p.next=16,(0,ft.iM)((0,g.Z)((0,g.Z)({template_id:Ie.id,workspace:k,job_type:x.id},s),{},{test_config:l}));case 16:c=p.sent,v=c.code,m=c.msg,v===200?(D.default.success(a({id:"request.save.success"})),f.m8.push("/ws/".concat(k,"/test_job/").concat(x.id,"?template_id=").concat(Ie.id))):(0,X.EV)(v,m),I(!1);case 21:case"end":return p.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),oa=function(n){dr(n)},tt={disabled:Ln,ws_id:k,template:Ie,test_type:x==null?void 0:x.test_type,business_type:(x==null?void 0:x.business_type)||"",server_provider:x==null?void 0:x.server_type,server_type:x==null?void 0:x.server_type},Nt=(0,i.useMemo)(function(){return ge>=1240?(1240-1e3)/2:20},[ge]),ue=(0,pn.Z)(ur),da=(0,i.useMemo)(function(){var _={minHeight:_e,overflow:"auto",background:"#f5f5f5"};return Ze?(0,g.Z)((0,g.Z)({},_),{},{paddingTop:50}):_},[_e,Ze]),ua=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s,l,c,v;return(0,P.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return s={yaml_data:Qe,workspace:k},o.next=3,(0,Me.VF)(s);case 3:l=o.sent,c=l.code,v=l.msg,c!==200?(0,X.EV)(c,v):D.default.success(a({id:"operation.success"}));case 7:case"end":return o.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),ca=function(){_r(!1),Et("")},fa=function(n){var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(s)},ma=function(n,s){var l=window.URL||window.webkitURL||window,c=new Blob([s]),v=document.createElementNS("http://www.w3.org/1999/xhtml","a");v.href=l.createObjectURL(c),v.download=n,fa(v)},pa=function(){var _=(0,K.Z)((0,P.Z)().mark(function n(){var s;return(0,P.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s="job_"+ +new Date,ma("".concat(s,".yaml"),Qe);case 2:case"end":return c.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),va=function(n){Hn(n)},Er=(0,e.jsxs)(e.Fragment,{children:[Un&&(0,e.jsx)(H.Z,{onClick:la,children:(0,e.jsx)(f._H,{id:"ws.test.job.SaveCreateSubmit"})}),(0,e.jsx)(H.Z,{type:"primary",onClick:ia,loading:Ge,children:(0,e.jsx)(f._H,{id:"ws.test.job.SaveTemplateModify"})})]});return(0,e.jsxs)("div",{style:da,children:[!Rt&&!(oe!=null&&oe.user_id)?(0,e.jsx)("div",{className:Z().not_logged_in,children:(0,e.jsx)("div",{style:{width:"1240px"},children:(0,e.jsx)(Lt.Z,{})})}):null,Ze&&(0,e.jsxs)(S.Z,{align:"middle",className:Z().page_preview_nav,justify:"space-between",children:[(0,e.jsxs)(V.Z,{children:[(0,e.jsx)("div",{style:{height:50,width:50,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){r==="JobTypePreview"?f.m8.push("/ws/".concat(k,"/job/types")):f.m8.push(ze.IsWsSetting()?{pathname:"/ws/".concat(k,"/job/templates"),state:de||{}}:"./")},children:(0,e.jsx)(Lr.Z,{style:{fontSize:20}})}),r==="JobTypePreview"&&(0,e.jsx)(Pe.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.JobTypePreview"})}),r==="TemplatePreview"&&(0,e.jsx)(Pe.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.TemplatePreview"})}),r==="TemplateEdit"&&(0,e.jsx)(Pe.Z.Title,{level:4,children:(0,e.jsx)(f._H,{id:"ws.test.job.TemplateEdit"})})]}),r==="TemplatePreview"&&(0,e.jsxs)(V.Z,{children:[ir&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H.Z,{onClick:function(){Dt(!0),kt(!1),jt.current.setChecked(!1)},children:(0,e.jsx)(f._H,{id:"operation.cancel"})}),Er]}),!ir&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H.Z,{onClick:function(){return br(location.href)},children:(0,e.jsx)(f._H,{id:"ws.test.job.copy.link"})}),(0,e.jsx)(f.Nv,{accessible:ze.WsMemberOperateSelf(de==null?void 0:de.creator),fallback:(0,e.jsx)(H.Z,{onClick:function(){return(0,X.WR)()},children:(0,e.jsx)(f._H,{id:"ws.test.job.ModifySetting"})}),children:(0,e.jsx)(H.Z,{onClick:qn,children:(0,e.jsx)(f._H,{id:"ws.test.job.ModifySetting"})})})]})]}),r==="TemplateEdit"&&(0,e.jsx)(V.Z,{children:Er})]}),(0,e.jsxs)(pe.Z,{spinning:Rt,children:[(0,e.jsxs)("div",{className:Z().page_header,style:["TestJob","TestExport"].includes(r)?{paddingBottom:80}:{},children:[(0,e.jsx)("div",{style:{height:250,minWidth:1080,background:"#fff",position:"absolute",left:0,top:0,width:"100%"}}),(0,e.jsx)(S.Z,{className:Z().page_title,justify:"center",children:(0,e.jsx)(S.Z,{style:{width:ue!=null&&ue.width?(ue==null?void 0:ue.width)+Nt*2:ue==null?void 0:ue.width},children:(0,e.jsxs)(ie.Z,{span:24,children:[(0,e.jsxs)(S.Z,{justify:"space-between",children:[(0,e.jsx)("span",{children:x.name}),(0,e.jsx)(f.Nv,{accessible:ze.IsWsSetting(),children:r==="TestJob"&&!Rt&&(0,e.jsx)(ve.Z,{overlayClassName:Z().template_popover,placement:"bottomRight",open:Dn,onOpenChange:oa,title:(0,e.jsx)(re.Z,{autoComplete:"off",prefix:(0,e.jsx)(Pr.Z,{}),className:Z().job_search_inp,placeholder:a({id:"ws.test.job.search.placeholder.template"}),onChange:sa}),content:(0,e.jsxs)(he.Z,{style:{maxHeight:480,overflow:"auto",paddingBottom:12},children:[Array.isArray(Xe)&&Xe.length>0&&(0,e.jsx)(e.Fragment,{children:Xe.map(function(_){return(0,e.jsx)("div",{className:Z().template_item,onClick:function(){if(!_.job_type)return D.default.error(a({id:"ws.test.job.please.delete"}));f.m8.push("/ws/".concat(k,"/test_job/").concat(_.job_type_id,"?template_id=").concat(_.id)),dr(!1)},children:(0,e.jsx)(St.Z,{title:_.name})},_.id)})}),Array.isArray(Xe)&&Xe.length===0&&(0,e.jsx)("div",{style:{lineHeight:"80px",textAlign:"center",color:"rgba(0,0,0,.35)"},children:(0,e.jsx)(f._H,{id:"ws.test.job.no.template"})})]}),children:(0,e.jsx)(H.Z,{type:"default",children:(0,e.jsx)(f._H,{id:"ws.test.job.use.template.create"})})})})]}),(0,e.jsxs)("div",{className:Z().page_tags,children:[(0,e.jsx)(le.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:x.server_type&&(0,e.jsx)(f._H,{id:"header.".concat(x.server_type),defaultMessage:""})}),(0,e.jsx)(le.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:x.test_type==="business"?(0,e.jsx)(f._H,{id:"header.business.".concat(x.business_type),defaultMessage:"business.others"}):x.test_type&&(0,e.jsx)(f._H,{id:"header.test_type.".concat(x.test_type),defaultMessage:""})})]}),(0,e.jsx)("div",{className:Z().page_dec,children:x.description})]})})}),(0,e.jsx)("div",{className:Z().page_body_content,style:W?{paddingLeft:0,paddingRight:0,paddingTop:0}:{paddingLeft:Nt,paddingRight:Nt,paddingTop:24},children:(0,e.jsx)(pe.Z,{spinning:Fn,style:{width:"100%"},children:(0,e.jsxs)(S.Z,{className:Z().page_body,justify:"center",children:[(0,e.jsx)("div",{ref:ur,style:{width:1e3}}),(r==="TestJob"||r==="TestExport")&&(0,e.jsx)("div",{className:Z().yaml_transform_icon,style:W?{top:10,right:10}:{top:-14,right:-110},onClick:Wt,children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(Gr,{}),W?(0,e.jsx)(f._H,{id:"ws.test.job.switch.form.mode"}):(0,e.jsx)(f._H,{id:"ws.test.job.switch.yaml.mode"})]})}),(0,e.jsxs)("div",{style:W?{width:1240,display:"none"}:{width:1e3},children:[(0,e.jsxs)(ie.Z,{span:24,style:{width:1e3},children:[r==="TestJob"&&(0,e.jsx)(S.Z,{className:Z().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.create.job"})}),r==="TestExport"&&(0,e.jsx)(S.Z,{className:Z().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.import.config"})}),(r==="TemplatePreview"||r==="TemplateEdit"||r==="TestTemplate")&&(0,e.jsx)(S.Z,{className:Z().page_body_title,children:(0,e.jsx)(f._H,{id:"ws.test.job.test.template"})})]}),(0,e.jsxs)(ie.Z,{span:24,style:{width:1e3},children:[(r==="TemplatePreview"||r==="TemplateEdit"||r==="TestTemplate")&&(0,e.jsxs)(S.Z,{className:Z().form_row,children:[(0,e.jsx)("div",{className:Z().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.templateForm"})})}),(0,e.jsx)(Jr,(0,g.Z)({onEnabelChange:At,ref:yt},tt))]}),JSON.stringify(se.basic)!=="{}"&&(0,e.jsxs)(S.Z,{className:Z().form_row,children:[(0,e.jsx)("div",{className:Z().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.basicForm"})})}),(0,e.jsx)(Mr.Z,(0,g.Z)({onRef:bt,contrl:se.basic,callBackProjectId:va,projectListDataRef:kn,baselineListDataRef:In,isYamlFormat:W},tt))]}),JSON.stringify(se.env)!=="{}"&&(0,e.jsxs)(S.Z,{className:Z().form_row,children:[(0,e.jsx)("div",{className:Z().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.envForm"})})}),(0,e.jsx)(Dr.Z,(0,g.Z)({onRef:we,contrl:se.env,envErrorFlag:Cn,project_id:$n},tt))]}),x.test_type&&(0,e.jsxs)(S.Z,{className:Z().form_row,children:[(0,e.jsx)("div",{className:Z().page_body_nav,children:(0,e.jsxs)("span",{children:[(0,e.jsx)("b",{style:{fontWeight:"normal",color:"#ff4d4f"},children:"*\xA0"}),(0,e.jsx)(f._H,{id:"ws.test.job.suiteTable"})]})}),(0,e.jsx)(ie.Z,{offset:3,span:21,children:(0,i.createElement)(Ir.Z,(0,g.Z)((0,g.Z)({},tt),{},{key:x.test_type,handleData:function(n){return Pt(n)},contrl:se.suite,onRef:jt,setPageLoading:Mt,caseDataRef:Wn}))})]}),JSON.stringify(se.more)!=="{}"&&(0,e.jsxs)(S.Z,{className:Z().form_row,children:[(0,e.jsx)("div",{className:Z().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(f._H,{id:"ws.test.job.moreForm"})})}),(0,e.jsx)(kr.Z,(0,g.Z)((0,g.Z)({},tt),{},{onRef:gt,contrl:se.more,isReset:Yn,tagsDataRef:An,reportTemplateDataRef:Bn}))]})]})]}),W&&(0,e.jsxs)("div",{className:Z().yaml_container,children:[(0,e.jsxs)(ie.Z,{span:24,className:Z().yaml_operate,children:[(0,e.jsxs)(V.Z,{align:"center",className:Z().yaml_copy_link,onClick:ua,children:[(0,e.jsx)(fn,{className:Z().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.yaml.test"})]}),(0,e.jsxs)(V.Z,{align:"center",className:Z().yaml_copy_link,id:"copy_dom_id",onClick:function(){return br(Qe.replace("---",""))},style:{marginLeft:10},children:[(0,e.jsx)(tn,{className:Z().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.copy"})]}),(0,e.jsxs)(V.Z,{align:"center",className:Z().yaml_copy_link,onClick:pa,style:{marginLeft:10},children:[(0,e.jsx)(ln,{className:Z().operate_icon}),(0,e.jsx)(f._H,{id:"ws.test.job.download"})]}),(0,e.jsx)(Rr.Z,{onClick:ca,style:{float:"right",color:"#fff"}})]}),(0,e.jsx)(mn.Z,{mode:"yaml",code:Qe,onChange:function(n){return Et(n)}})]})]})})})]}),(r==="TestJob"||r==="TestTemplate"||r==="TestExport")&&(0,e.jsx)(S.Z,{justify:"end",className:Z().options_bar,children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(Fe.Z,{title:(0,e.jsx)(f._H,{id:"ws.test.job.reset.confirm.info"}),onConfirm:b().partial(jr,!0),okText:(0,e.jsx)(f._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(f._H,{id:"operation.cancel"}),children:(0,e.jsx)(H.Z,{children:(0,e.jsx)(f._H,{id:"ws.test.job.reset"})})}),(0,e.jsx)(H.Z,{onClick:aa,disabled:!ze.IsWsSetting(),children:(0,e.jsx)(f._H,{id:"ws.test.job.save.as.template"})}),(0,e.jsx)(H.Z,{type:"primary",onClick:ra,disabled:!ze.IsWsSetting(),children:(0,e.jsx)(f._H,{id:"ws.test.job.submit.test"})})]})}),(0,e.jsx)(Nr,{ref:It,onOk:yr})]})]})},gn=_n}}]);
