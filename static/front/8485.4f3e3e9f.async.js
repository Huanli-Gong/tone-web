(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8485],{30420:function(_){_.exports={log_td:"log_td___3ViXg",log_table:"log_table___3W2Yo",cell:"cell___1iA9a",no_margin_line:"no_margin_line___1Z9Kp"}},52322:function(_){_.exports={picker:"picker___1AJZx",waves:"waves___x8EzR"}},45455:function(_){_.exports={warp:"warp___1iSnC",batch:"batch___3c3eO",pagination:"pagination___nMn8w",hidden:"hidden___3Wpsc",pro_table_card:"pro_table_card___37ouO"}},79638:function(_,se,e){"use strict";var F=e(79625),J=e(96584),$=e(20418),V=e(39190),oe=e(488),je=e(41428),ne=e(22374),le=e(97939),X=e(526),A=e(52454),Te=["title","children","width","color","placement","style"],b,de=le.ZP.div(b||(b=(0,je.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),d=function(g){var H=g.title,He=g.children,ce=g.width,Be=g.color,c=g.placement,Fe=c===void 0?"topLeft":c,We=g.style,ue=(0,oe.Z)(g,Te),a=(0,ne.useRef)(null),l=(0,ne.useState)(!1),n=(0,V.Z)(l,2),Ne=n[0],ae=n[1],Ie=(0,X.CR)(),R=Ie.width,r=function(){var j,y,W=a==null||(j=a.current)===null||j===void 0?void 0:j.clientWidth,B=a==null||(y=a.current)===null||y===void 0?void 0:y.scrollWidth;ae(W<B)};(0,ne.useEffect)(function(){r()},[H,R]);var v=(0,A.jsx)(de,(0,$.Z)((0,$.Z)({ref:a,style:(0,$.Z)({width:ce,color:Be},We)},ue),{},{children:He||H||"-"}));return Ne?(0,A.jsx)(J.Z,{title:H,placement:Fe,overlayStyle:{wordBreak:"break-all"},children:v}):v};se.Z=d},76123:function(_,se,e){"use strict";e.d(se,{Z:function(){return We}});var F=e(88018),J=e(58414),$=e(11407),V=e(41604),oe=e(20418),je=e(8281),ne=e(58591),le=e(14320),X=e(53479),A=e(35832),Te=e(32326),b=e(39190),de=e(22374),d=e(22812);function C(ue){return(0,d.WY)("/api/sys/operation/log/",{params:ue})}var g=e(24812),H=e(79638),He=e(30420),ce=e.n(He),Be=e(97207),c=e(52454),Fe=function(a){return a==="0"?(0,c.jsx)(d._H,{id:"operation.not.release"}):a==="1"?(0,c.jsx)(d._H,{id:"operation.release"}):a==="2"?(0,c.jsx)(d._H,{id:"device.failed.save"}):a==="cloud"?(0,c.jsx)(d._H,{id:"device.cloud"}):a==="cloud_efficiency"?(0,c.jsx)(d._H,{id:"device.cloud_efficiency"}):a==="cloud_ssd"?(0,c.jsx)(d._H,{id:"device.cloud_ssd"}):a==="cloud_essd"?(0,c.jsx)(d._H,{id:"device.cloud_essd"}):a},We=(0,de.forwardRef)(function(ue,a){var l=ue.operation_object,n=(0,g.UO)(),Ne=n.ws_id,ae=(0,d.YB)(),Ie=ae.formatMessage,R=(0,de.useState)({}),r=(0,b.Z)(R,2),v=r[0],S=r[1],j=(0,de.useState)(!1),y=(0,b.Z)(j,2),W=y[0],B=y[1],ye=(0,de.useState)(!0),Ze=(0,b.Z)(ye,2),ve=Ze[0],fe=Ze[1],be=function(){var T=(0,Te.Z)((0,A.Z)().mark(function o(Z){var G;return(0,A.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return fe(!0),Re.next=3,C({operation_object:l,pid:Z,ws_id:Ne});case 3:G=Re.sent,S(G||{}),fe(!1);case 6:case"end":return Re.stop()}},o)}));return function(Z){return T.apply(this,arguments)}}();(0,de.useImperativeHandle)(a,function(){return{show:function(o){B(!0),be(o)}}});var me=function(o){var Z=[{fieldName:"template_name",text:"\u914D\u7F6E\u540D\u79F0"},{fieldName:"release_rule",text:"\u7528\u5B8C\u91CA\u653E"},{fieldName:"manufacturer",text:"\u4E91\u5382\u5546/Ak"},{fieldName:"zone",text:"Region/Zone"},{fieldName:"instance_type",text:"\u89C4\u683C"},{fieldName:"storage_type",text:"\u6570\u636E\u76D8"},{fieldName:"image",text:"\u955C\u50CF"},{fieldName:"system_disk_category",text:"\u7CFB\u7EDF\u76D8"},{fieldName:"bandwidth",text:"\u5E26\u5BBD"},{fieldName:"extra_param",text:"\u6269\u5C55\u5B57\u6BB5"},{fieldName:"image_name",text:"\u955C\u50CF"},{fieldName:"channel_type",text:"\u63A7\u5236\u901A\u9053"},{fieldName:"ips",text:"\u673A\u5668"},{fieldName:"ip",text:"\u673A\u5668"},{fieldName:"name",text:"\u673A\u5668\u540D\u79F0"},{fieldName:"state",text:"\u4F7F\u7528\u72B6\u6001"},{fieldName:"description",text:"\u5907\u6CE8"},{fieldName:"owner",text:"Owner"},{fieldName:"tag",text:"\u6807\u7B7E"},{fieldName:"private_ip",text:"\u79C1\u7F51IP"}],G=Z.filter(function(Y){return o===Y.fieldName});return G.length?Ie({id:"log.listName.".concat(G[0].fieldName)}):Fe(o)},K=function(o){return o.map(function(Z,G){var Y="";return(0,Be.isArray)(Z)&&!!Z.length?Y=JSON.stringify(Z):Y=String(Z),(0,c.jsxs)(X.Z,{justify:"center",children:[(0,c.jsx)(X.Z,{justify:"center",className:ce().cell,children:Y&&!!Y.length?(0,c.jsx)(H.Z,{title:me(Y),width:160,children:me(Y)}):"-"}),G!==o.length-1&&(0,c.jsx)(ne.Z,{className:ce().no_margin_line})]},G)})},Ce={align:"center",className:"log_td"},Le=[{title:(0,c.jsx)(d._H,{id:"log.columns.operation_type"}),align:"center",dataIndex:"operation_type"},{title:(0,c.jsx)(d._H,{id:"log.columns.edit.content"}),align:"center",children:[(0,oe.Z)({title:(0,c.jsx)(d._H,{id:"log.columns.fieldName"}),render:function(o){return K(Object.keys(JSON.parse(o.new_values)))}},Ce),(0,oe.Z)({title:(0,c.jsx)(d._H,{id:"log.columns.old_values"}),render:function(o){return K(Object.values(JSON.parse(o.old_values)))}},Ce),(0,oe.Z)({title:(0,c.jsx)(d._H,{id:"log.columns.new_values"}),render:function(o){return K(Object.values(JSON.parse(o.new_values)))}},Ce)]},{title:(0,c.jsx)(d._H,{id:"log.columns.creator"}),align:"center",dataIndex:"creator"},{title:(0,c.jsx)(d._H,{id:"log.columns.gmt_created"}),align:"center",dataIndex:"gmt_created"}],ge=function(){B(!1),S({})};return(0,c.jsx)(J.Z,{maskClosable:!1,keyboard:!1,visible:W,forceRender:!0,title:(0,c.jsx)(d._H,{id:"log.operation.title"}),onClose:ge,width:"910",children:(0,c.jsx)(V.Z,{loading:ve,rowKey:"id",size:"small",className:ce().log_table,bordered:!0,pagination:{pageSize:v.page_size||10},columns:Le,dataSource:v.data&&v.data.filter(function(T){return T.new_values!=="{}"})})})})},75073:function(_,se,e){"use strict";e.d(se,{mQ:function(){return X},gM:function(){return A},nU:function(){return b}});var F=e(40204),J=e(10724),$=e(41428),V=e(97939),oe,je,ne,le,X=(0,V.ZP)(J.Z)(oe||(oe=(0,$.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),A=(0,V.ZP)(X)(je||(je=(0,$.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),Te=(0,V.ZP)(J.Z)(ne||(ne=(0,$.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),b=(0,V.ZP)(Te)(le||(le=(0,$.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},18485:function(_,se,e){"use strict";e.r(se),e.d(se,{ResizeTag:function(){return Ge},default:function(){return st}});var F=e(67448),J=e(47548),$=e(14320),V=e(53479),oe=e(36142),je=e(76837),ne=e(57359),le=e(34423),X=e(20632),A=e(71853),Te=e(46721),b=e(94867),de=e(81138),d=e(96146),C=e(35832),g=e(20418),H=e(32326),He=e(79625),ce=e(96584),Be=e(51937),c=e(34516),Fe=e(31650),We=e(25100),ue=e(64974),a=e(39190),l=e(22374),n=e(22812);function Ne(N){return ae.apply(this,arguments)}function ae(){return ae=(0,H.Z)((0,C.Z)().mark(function N(O){return(0,C.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{params:O}));case 1:case"end":return h.stop()}},N)})),ae.apply(this,arguments)}function Ie(N){return R.apply(this,arguments)}function R(){return R=(0,H.Z)((0,C.Z)().mark(function N(O){return(0,C.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{method:"POST",data:(0,g.Z)({},O)}));case 1:case"end":return h.stop()}},N)})),R.apply(this,arguments)}function r(N,O){return v.apply(this,arguments)}function v(){return v=(0,H.Z)((0,C.Z)().mark(function N(O,E){return(0,C.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(O,"/"),{method:"PUT",data:(0,g.Z)({},E)}));case 1:case"end":return z.stop()}},N)})),v.apply(this,arguments)}function S(N){return request("/api/auth/user/",{params:N})}function j(N,O){return y.apply(this,arguments)}function y(){return y=(0,H.Z)((0,C.Z)().mark(function N(O,E){return(0,C.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(O,"/"),{method:"DELETE",data:{ws_id:E}}));case 1:case"end":return z.stop()}},N)})),y.apply(this,arguments)}var W=e(45455),B=e.n(W),ye=e(12590),Ze=e(76123),ve=e(31784),fe=e(46601),be=e(75073),me=e(24812),K=e(88018),Ce=e(58414),Le=e(20693),ge=e(3278),T=e(65790),o=e(17187),Z=e(8281),G=e(58591),Y=e(79236),Re=e(98540),et=e(60061),he=e(52322),x=e.n(he),pe=e(95844),Oe=e.n(pe),t=e(52454),_e=function(O){var E=O.value,h=O.onChange,z=(0,l.useState)(!1),D=(0,a.Z)(z,2),Me=D[0],ze=D[1],we=(0,l.useState)(!1),p=(0,a.Z)(we,2),Q=p[0],Ee=p[1],Pe=(0,l.useState)({r:255,g:157,b:78,a:1}),P=(0,a.Z)(Pe,2),w=P[0],xe=P[1],Ae=[{r:255,g:157,b:78,a:1},{r:91,g:216,b:166,a:1},{r:91,g:143,b:249,a:1},{r:247,g:102,b:78,a:1},{r:255,g:134,b:183,a:1},{r:43,g:158,b:157,a:1},{r:146,g:112,b:202,a:1},{r:109,g:200,b:236,a:1},{r:102,g:119,b:150,a:1},{r:245,g:188,b:22,a:1},{r:231,g:107,b:242,a:1}],Se=function(){ze(!Me)},re=function(){ze(!1)},Ue=function(u){var L=u.rgb;xe(L);var ie="rgb(".concat(L.r,",").concat(L.g,",").concat(L.b,",").concat(L.a,")");h&&h(ie)};(0,l.useEffect)(function(){var f={r:255,g:157,b:78,a:1};if(E){var u=E.slice(4,E.length-1).split(",");f={r:Number(u[0]),g:Number(u[1]),b:Number(u[2]),a:Number(u[3])}}xe(f)},[E]);var I=function(u){xe(u),Ee(!1);var L="rgb(".concat(u.r,",").concat(u.g,",").concat(u.b,",").concat(u.a,")");h&&h(L)},M=(0,Y.ZP)({default:{color:{position:"relative",width:"22px",height:"22px",borderRadius:"2px",background:"rgba(".concat(w.r,", ").concat(w.g,", ").concat(w.b,", ").concat(w.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},warp:{position:"absolute",paddingTop:"16px",paddingBottom:"6px",background:"#fff",boxShadow:"-12px 0 48px 16px rgba(0,0,0,0.03), -9px 0 28px 0 rgba(0,0,0,0.05), -6px 0 16px -8px rgba(0,0,0,0.08)",borderRadius:"2px",zIndex:9999}}});return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:M.swatch,className:x().click,onClick:Se,children:(0,t.jsx)("div",{style:M.color,className:x().waves})}),Me?(0,t.jsxs)("div",{style:M.popover,children:[(0,t.jsx)("div",{style:M.cover,onClick:re}),(0,t.jsxs)("div",{style:M.warp,children:[(0,t.jsxs)("div",{style:{background:"#fff",width:244,paddingLeft:"16px"},children:[Ae.map(function(f,u){return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:x().waves,style:{position:"relative",float:"left",marginRight:"16px",marginBottom:"16px",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden",background:"rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(f.a,")")},onClick:function(){return I(f)},children:JSON.stringify(w)==JSON.stringify(f)&&(0,t.jsx)(et.Z,{style:{position:"absolute",top:"5px",left:"5px",color:"#fff"}})})},u)}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:x().waves,style:{float:"left",marginRight:"16px",marginBottom:"16px",position:"relative",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden"},onClick:function(){return Ee(!Q)},children:[(0,t.jsx)("img",{src:Oe(),style:{position:"absolute",width:"22px"}}),(0,t.jsx)("div",{style:{position:"absolute",left:"4px",top:"4px",width:"14px",height:"14px",borderRadius:"2px",background:"rgba(".concat(w.r,", ").concat(w.g,", ").concat(w.b,", ").concat(w.a,")")}})]})})]}),Q&&(0,t.jsx)(G.Z,{style:{margin:0}}),Q&&(0,t.jsx)("div",{style:{padding:"6px"},children:(0,t.jsx)(Re.xS,{className:x().picker,width:212,color:w,onChange:Ue,presetColors:[]})})]})]}):null]})},$e=_e,tt=/^[A-Za-z0-9\._-]{0,32}$/,Je=function(O,E){var h=O.callback,z=(0,n.YB)(),D=z.formatMessage,Me=(0,me.UO)(),ze=Me.ws_id,we=o.Z.useForm(),p=(0,a.Z)(we,1),Q=p[0],Ee=l.useState(!1),Pe=(0,a.Z)(Ee,2),P=Pe[0],w=Pe[1],xe=l.useState(!1),Ae=(0,a.Z)(xe,2),Se=Ae[0],re=Ae[1],Ue=l.useState({}),I=(0,a.Z)(Ue,2),M=I[0],f=I[1];l.useImperativeHandle(E,function(){return{show:function(k){k&&(f(k||{}),Q.setFieldsValue(k)),w(!0)}}});var u=function(){f({}),w(!1),re(!1),Q.resetFields()},L=function(){Se||(re(!0),Q.validateFields().then(function(){var k=(0,H.Z)((0,C.Z)().mark(function q(at){var Ke,Ye,Qe,ke;return(0,C.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Ke=(0,g.Z)({ws_id:ze},at),!M.id){U.next=7;break}return U.next=4,r(M.id,Ke);case 4:U.t0=U.sent,U.next=10;break;case 7:return U.next=9,Ie(Ke);case 9:U.t0=U.sent;case 10:if(Ye=U.t0,Qe=Ye.code,ke=Ye.msg,Qe===200){U.next=17;break}return re(!1),d.default.error(ke),U.abrupt("return");case 17:d.default.success(D({id:"operation.success"})),h(),u();case 20:case"end":return U.stop()}},q)}));return function(q){return k.apply(this,arguments)}}()).catch(function(){re(!1)}))};return(0,t.jsx)(Ce.Z,{maskClosable:!1,keyboard:!1,title:M.id?(0,t.jsx)(n._H,{id:"device.edit.tag"}):(0,t.jsx)(n._H,{id:"device.create.tag"}),width:376,onClose:u,destroyOnClose:!0,open:P,bodyStyle:{paddingBottom:80},footer:(0,t.jsxs)("div",{style:{textAlign:"right"},children:[(0,t.jsx)(b.Z,{onClick:u,style:{marginRight:8},children:(0,t.jsx)(n._H,{id:"operation.cancel"})}),(0,t.jsx)(b.Z,{onClick:L,type:"primary",htmlType:"submit",children:M.id?(0,t.jsx)(n._H,{id:"operation.update"}):(0,t.jsx)(n._H,{id:"operation.ok"})})]}),children:(0,t.jsxs)(o.Z,{layout:"vertical",form:Q,initialValues:{tag_color:"rgb(255,157,78,1)"},children:[(0,t.jsx)(o.Z.Item,{name:"tag_color",label:(0,t.jsx)(n._H,{id:"device.tag_color"}),rules:[{required:!0,message:D({id:"please.select"})}],children:(0,t.jsx)($e,{})}),(0,t.jsx)(o.Z.Item,{name:"name",label:(0,t.jsx)(n._H,{id:"device.tag.name"}),required:!0,rules:[{validator:function(k,q){return q?q.replace(/\s+/g,"")?tt.test(q)?Promise.resolve():Promise.reject(D({id:"device.name.message"})):Promise.reject(D({id:"device.tag.name.message"})):Promise.reject(D({id:"device.tag.name.message"}))}}],children:(0,t.jsx)(ge.Z,{placeholder:D({id:"please.enter"}),autoComplete:"off"})}),(0,t.jsx)(o.Z.Item,{name:"description",label:(0,t.jsx)(n._H,{id:"device.description"}),children:(0,t.jsx)(ge.Z.TextArea,{rows:3,placeholder:D({id:"device.description.placeholder"})})})]})})},Ve=l.forwardRef(Je),De=e(6130),nt=e(79390),Ge=function(O){var E=O.name,h=O.tag_color,z=l.useRef(),D=l.useRef(),Me=l.useState(),ze=(0,a.Z)(Me,2),we=ze[0],p=ze[1],Q=l.useState(!1),Ee=(0,a.Z)(Q,2),Pe=Ee[0],P=Ee[1],w=l.useState(!1),xe=(0,a.Z)(w,2),Ae=xe[0],Se=xe[1];l.useEffect(function(){var I=z.current.offsetParent;if(!!I){var M=new ResizeObserver(function(f){var u=(0,ue.Z)(f),L;try{for(u.s();!(L=u.n()).done;){var ie=L.value;if(ie.contentRect){var k=ie.contentRect.width;p(k)}}}catch(q){u.e(q)}finally{u.f()}});return M.observe(I),function(){M.unobserve(I)}}},[]),l.useEffect(function(){if(!!D.current){var I=D.current,M=I.scrollWidth,f=I.clientWidth;Se(f<M)}},[we]);var re=function(){Ae&&P(!0)},Ue=function(){P(!1)};return(0,t.jsx)("div",{ref:z,onMouseOver:re,onMouseLeave:Ue,children:(0,t.jsx)(ce.Z,{title:E,open:Pe,children:(0,t.jsx)(c.Z,{color:h,style:{marginRight:0},children:(0,t.jsx)(We.Z.Text,{ref:D,ellipsis:!0,style:{maxWidth:we-20,color:h&&"#fff"},children:E})})})})},it=function(){var O=(0,n.YB)(),E=O.formatMessage,h=(0,me.UO)(),z=h.ws_id,D=(0,n.md)(),Me={ws_id:z,page_num:1,page_size:10},ze=(0,l.useState)({}),we=(0,a.Z)(ze,2),p=we[0],Q=we[1],Ee=l.useState(Me),Pe=(0,a.Z)(Ee,2),P=Pe[0],w=Pe[1],xe=l.useState(!1),Ae=(0,a.Z)(xe,2),Se=Ae[0],re=Ae[1],Ue=(0,l.useState)(),I=(0,a.Z)(Ue,2),M=I[0],f=I[1],u=(0,l.useState)(!0),L=(0,a.Z)(u,2),ie=L[0],k=L[1],q=(0,l.useRef)(),at=function(){var m=(0,H.Z)((0,C.Z)().mark(function i(){var s,ee,te=arguments;return(0,C.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return s=te.length>0&&te[0]!==void 0?te[0]:P,k(!0),Xe.next=4,Ne((0,g.Z)({},s));case 4:ee=Xe.sent,ee&&Q(ee.code!==200?{}:ee),k(!1);case 7:case"end":return Xe.stop()}},i)}));return function(){return m.apply(this,arguments)}}();(0,l.useEffect)(function(){at()},[P,M]);var Ke=function(i,s){w(function(ee){return(0,g.Z)((0,g.Z)({},ee),{},{page_num:i,page_size:s})})},Ye=(0,l.useRef)(),Qe=(0,l.useCallback)(function(m){Ye.current.show(m)},[]),ke=function(){var i;(i=q.current)===null||i===void 0||i.show()},rt=function(){f(new Date().getTime())},U=function(i){var s;(s=q.current)===null||s===void 0||s.show(i)},ot=function(){var m=(0,H.Z)((0,C.Z)().mark(function i(s){return(0,C.Z)().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,j(s.id,z);case 2:d.default.success(E({id:"operation.success"})),f(new Date().getTime());case 4:case"end":return te.stop()}},i)}));return function(s){return m.apply(this,arguments)}}(),lt=[{title:(0,t.jsx)(n._H,{id:"device.tag.name"}),dataIndex:"name",width:170,filterDropdown:function(i){var s=i.confirm;return(0,t.jsx)(ye.Z,{confirm:s,autoFocus:Se,onConfirm:function(te){return w(function(qe){return(0,g.Z)((0,g.Z)({},qe),{},{page_num:1,name:te})})}})},ellipsis:{showTitle:!1},onFilterDropdownVisibleChange:function(i){i&&re(!Se)},filterIcon:function(){return(0,t.jsx)(ve.Z,{style:{color:P!=null&&P.name?"#1890ff":void 0}})},render:function(i,s){return(0,t.jsx)(Ge,(0,g.Z)({},s))}},{title:(0,t.jsx)(n._H,{id:"device.description"}),dataIndex:"description",ellipsis:{showTitle:!1},width:100,filterIcon:function(){return(0,t.jsx)(ve.Z,{style:{color:P!=null&&P.description?"#1890ff":void 0}})},filterDropdown:function(i){var s=i.confirm;return(0,t.jsx)(ye.Z,{confirm:s,autoFocus:Se,onConfirm:function(te){return w(function(qe){return(0,g.Z)((0,g.Z)({},qe),{},{page_num:1,description:te})})}})},onFilterDropdownVisibleChange:function(i){i&&re(!Se)},render:function(i,s){return(0,t.jsx)(De.K,{ellipsis:{tooltip:!0},children:s.description})}},{title:(0,t.jsx)(n._H,{id:"device.create_user"}),dataIndex:"create_user",width:90,ellipsis:{showTitle:!1},render:function(i){return(0,t.jsx)(De.K,{ellipsis:{tooltip:!0},children:i||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.update_user"}),dataIndex:"update_user",ellipsis:{showTitle:!1},width:90,render:function(i){return(0,t.jsx)(De.K,{ellipsis:{tooltip:!0},children:i||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.gmt_created"}),dataIndex:"gmt_created",width:200,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(De.K,{ellipsis:{tooltip:!0},children:s.gmt_created}):"-"}},{title:(0,t.jsx)(n._H,{id:"device.gmt_modified"}),dataIndex:"gmt_modified",width:200,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(De.K,{ellipsis:{tooltip:!0},children:s.gmt_modified}):"-"}},{title:(0,t.jsx)(n._H,{id:"Table.columns.operation"}),valueType:"option",dataIndex:"id",width:150,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"&&(0,t.jsxs)(le.Z,{children:[(0,t.jsx)(n.Nv,{accessible:D.WsMemberOperateSelf(),children:(0,t.jsxs)(le.Z,{children:[(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return U(s)},children:(0,t.jsx)(n._H,{id:"operation.edit"})}),(0,t.jsx)(A.Z,{title:(0,t.jsx)("div",{style:{color:"red"},children:(0,t.jsx)(n._H,{id:"device.tag.delete.tips"})}),placement:"topRight",okText:(0,t.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,t.jsx)(n._H,{id:"operation.confirm.delete"}),onCancel:function(){return ot(s)},icon:(0,t.jsx)(fe.Z,{style:{color:"red"}}),overlayStyle:{width:"300px"},children:(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,t.jsx)(n._H,{id:"operation.delete"})})})]})}),(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return Qe(s.id)},children:(0,t.jsx)(n._H,{id:"operation.log"})})]})}}];return(0,t.jsxs)(be.gM,{title:(0,t.jsx)(n._H,{id:"device.dispatch.tag"}),extra:(0,t.jsx)(n.Nv,{accessible:D.WsMemberOperateSelf(),children:(0,t.jsxs)(b.Z,{type:"primary",onClick:ke,children:[" ",(0,t.jsx)(n._H,{id:"device.create.tag"})," "]},"3")}),children:[(0,t.jsxs)(J.Z,{spinning:ie,children:[(0,t.jsx)(nt.sL,{name:"ws-device-dispatch-list",refreshDeps:[p,P],loading:ie,scroll:{x:"100%"},size:"small",className:B().pro_table_card,columns:lt,dataSource:(p==null?void 0:p.data)||[],pagination:!1,rowKey:"id"}),(0,t.jsxs)(V.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,t.jsx)("div",{className:p!=null&&p.total?"":B().hidden,children:E({id:"pagination.total.strip"},{data:(p==null?void 0:p.total)||0})}),(0,t.jsx)(je.Z,{size:"small",className:p!=null&&p.total?"":B().hidden,showQuickJumper:!0,showSizeChanger:!0,current:P.page_num,defaultCurrent:1,onChange:function(i,s){return Ke(i,s)},onShowSizeChange:function(i,s){return Ke(i,s)},total:(p==null?void 0:p.total)||0})]})]}),(0,t.jsx)(Ze.Z,{ref:Ye,operation_object:"machine_server_tag"}),(0,t.jsx)(Ve,{ref:q,callback:rt})]})},st=it},79390:function(_,se,e){"use strict";e.d(se,{sL:function(){return Ie},ny:function(){return Ne},Fu:function(){return ae}});var F=e(20418),J=e(39190),$=e(488),V=e(26388),oe=e(11407),je=e(41604),ne=e(2605),le=e(74127),X=e(41428),A=e(22374),Te=e(48434),b=e(97939),de=e(99648),d=e(52454),C=["width","onResizeStart","onResize","onResizeStop","resize"],g=["columns","name","onColumnsChange"],H,He,ce,Be=b.ZP.div(H||(H=(0,X.Z)([`
    position: relative;
    width: 100%;
`]))),c=b.ZP.div.attrs(function(R){return{style:{left:R.left,height:R==null?void 0:R.height}}})(He||(He=(0,X.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),Fe=(0,b.ZP)(Te.Resizable)(ce||(ce=(0,X.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(R){var r=R.resize;return r?"col-resize":"default"}),We=function(r){var v=r.width,S=r.onResizeStart,j=r.onResize,y=r.onResizeStop,W=r.resize,B=(0,$.Z)(r,C);return(0,d.jsx)(Fe,(0,F.Z)((0,F.Z)({width:v||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:S,onResize:j,onResizeStop:y,resize:W?1:0},B),{},{children:(0,d.jsx)("th",(0,F.Z)({},B))}))},ue=function(r){var v=r.columns,S=v===void 0?[]:v,j=r.name,y=r.onColumnsChange,W=(0,$.Z)(r,g),B=A.useState(0),ye=(0,J.Z)(B,2),Ze=ye[0],ve=ye[1],fe=A.useState(0),be=(0,J.Z)(fe,2),me=be[0],K=be[1],Ce=A.useState(!1),Le=(0,J.Z)(Ce,2),ge=Le[0],T=Le[1],o=A.useRef(null),Z=(0,de.Z)(o),G=function(x){return function(pe,Oe){var t;if((0,le.Z)(Oe),!!S[x].ellipsis){var _e=pe.clientX,$e=_e-((t=o.current)===null||t===void 0?void 0:t.getBoundingClientRect().x);K($e),ve($e),T(!0)}}},Y=function(){return function(x){var pe,Oe=x.clientX,t=Oe-((pe=o.current)===null||pe===void 0?void 0:pe.getBoundingClientRect().x);ve(t)}},Re=function(x){return function(pe,Oe){var t,_e=Oe.size,$e=pe.clientX,tt=$e-((t=o.current)===null||t===void 0?void 0:t.getBoundingClientRect().x),Je=(0,ne.Z)(S);if(Je[x].ellipsis){var Ve=_e.width+=tt-me,De=Je[x],nt=De.dataIndex,Ge=De.key;Ve>20&&(Je[x]=(0,F.Z)((0,F.Z)({},Je[x]),{},{width:Ve}),j&&ae(j,nt||Ge,Ve),y==null||y())}ve(0),K(0),T(!1)}},et=A.useMemo(function(){return S.reduce(function(he,x){return x.width?he+=x==null?void 0:x.width:he},0)},[S]);return(0,d.jsxs)(Be,{ref:o,className:"resize-table-wrapper",children:[(0,d.jsx)(je.Z,(0,F.Z)((0,F.Z)({},W),{},{components:{header:{cell:We}},scroll:(r==null?void 0:r.scroll)||{x:et||(Z==null?void 0:Z.width)},columns:S.filter(Boolean).map(function(he,x){return(0,F.Z)((0,F.Z)({},he),{},{onHeaderCell:function(Oe){return{resize:!!he.ellipsis,width:Oe.width,onResizeStart:G(x),onResize:Y(),onResizeStop:Re(x)}}})})})),ge&&(0,d.jsx)(c,{height:Z==null?void 0:Z.height,left:Ze||me})]})},a=ue,l=["name","columns","refreshDeps","onColumnsChange"],n="umi_locale",Ne=function(r,v){var S=localStorage.getItem(r),j=localStorage.getItem(n)||"zh-CN";if(!!S)return JSON.parse(S)["".concat(j,"-").concat(v)]},ae=function(r,v,S){var j=localStorage.getItem(r),y=localStorage.getItem(n)||"zh-CN",W=(0,V.Z)({},"".concat(y,"-").concat(v),S);j?localStorage.setItem(r,JSON.stringify(Object.assign(JSON.parse(j),W))):localStorage.setItem(r,JSON.stringify(W))},Ie=function(r){var v=r.name,S=r.columns,j=r.refreshDeps,y=j===void 0?[]:j,W=r.onColumnsChange,B=(0,$.Z)(r,l),ye=A.useState([]),Ze=(0,J.Z)(ye,2),ve=Ze[0],fe=Ze[1],be=function(){return(S==null?void 0:S.filter(Boolean).map(function(K){var Ce=K.dataIndex,Le=K.key,ge=K.width,T=Ce||Le,o=Ne(v,T);!o&&ge&&ae(v,T,ge);var Z=o||ge;return Z&&(K.width=Z),K}))||[]};return A.useEffect(function(){fe(be())},y),(0,d.jsx)(a,(0,F.Z)({name:v,columns:ve,setColumns:fe,size:"small",onColumnsChange:function(){W==null||W(),fe(be())}},B))}},95844:function(_){_.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAABUlJREFUWAnVmT1yHDcQhRvAzO7yR1U2HbGKsUPzCsxUOoIPYGVWyBs4YSiXE/kAOoJSXcE+A8uM7Mgkd2d3Bv5eA6Ak+wCEUYttoAcYPDw0enowwUjXf15fzPu/b1JYrkZbzqNlW4W9Sa7DglxsEw+WkNKnkO3YilxHJPqTKjeS9DnluvoP02RxzhbuZwuHxdLDbEY9Pe4tSL9Fr/rDwfVxWrxu24OFhf77cGfz8jHldB3ePN4OPwL2cZp+G4KdWQ4MHkw/umkuyJK4NcMLglnmbwm6TkEKihL/SWrYEoOXzii4qe6mbODXBFrySait2pDzPJ9T/j7vdy/z26PLYX+INxbGs8zNI8wFgxHaRxud2cSdEqVdhh2Vw+B3OjCYJrcwIt34j9SEqUApANBoxoDSNb8yoxCgPQpIjdQDOe5KO2MVNAEW0gHHic6owrSc2fbxZpgtXelGS4iMtlTmyj0NncZTEnz1FCEixpxhALMqkbJUrW1rUhqqRvJlKUVvrcZ00rJ7R64Hb6M6ZdfXa2pb2l8Nkw3nDOkDRtYg5PDhaLV6/dM3N7fl9s/zz/JfzNP+HTb9ysFqRRY7jzAMq9o2JRtgb54ZrCjSBkur8bWDbQwj4z4e2aQc1ljvyn7uAGxbU4F2Wxe71eYHOS1tCN9SbpeteSfyM3bF9jCFYwCz2aJ8ga52luQ9BAuPoo0mL+EcF6fVGVjB+TfDu7hxhof8f2E4Djwo8K/4QAyjP4rl+DGFxvSwJSrwZz6PmuL+O8P8uQ3Dp9vw4gHOyEOjY4bbptvFU2f2sEx9MrytJiE/LC9R/HAmUINhhUe9JdmwYCkL8EN84cymTHzq1t0Z4vsC9AmwwnIBbeFfZ3CfmPUwUQxvK8NT0/SG+LEyrE1HGhb8sOLQZstF3dF/3WxurWL43k4cXerRfoWsMVz9AV5Crzy6AvweQTe3ViGGsNO7SK0h8jo5/KJ7/v88fsnikJeGr8nnB/kFgoPeJT+lYXwoFb35Kk1FdPOf118XS/V3fs4pQnUXDriC7gatgMSRP4DpjRqQQ6q7sFfAefNVAbzwjAbzEPyggYnUaEiT6io1hgmChXgY27O6MN4VVoHJazGME555gmAWg8puDi2y7w1ywoYVp0OogD/ZcGqPwM4A59ULB2qHyrB7CZlDY7ozwNYY1gklTA+81DnYjEn0GL/nEYYFjnNnB9yiyn69BLFOxkMsmABBz5BqcOE2LF1nKa9OAcsZtJvGjB8WSNlvpyZhxOs6p7alPJI/2TB1d2+dMWyJeB0bzhwJFxuuDHNQ7Ez3hteS2BUqAWbvBU5WlIeav3ubL3oBnV/9epGHY8vjMUg3nmOU/das8m6ydz2AFthpPrzTw9jZTTCceP/89pf8ByZyLjcn4JGAWHKgrgmskAl5VOtHXPe6VgT9CdGeS7wN5152ynWXO3Y0a3lsD3x5OthxvGdRZ773FXnCWV5ip6+NOgOu4pbwhuv+fXDmeyBfs/QoZvl1fm17Bsz5Tm0+CpjbCVJl5cZ6kt3UrLI/05FPelSKo7Rhn0JUtSNVQakc0ZS6Wpej8/JyptdfjiP5GiV92UqCGCgXnfTadCHGjwOWcb3f20smdCaQ8scaeIXXECgxLUbHyvBGerVrkhE0Qf+GpyHpo9ySjmiUdWCu4bXEqh8chN5wdC6t/mtA62sfx2a0ltS09nzGkExj+GuV0nX8/U24HRe7BOR78h3tCrsakbIzSdFBCUjN0gu4J8oC6W+Fuv6UXFNrKhemSzftekGRDkk/6QVVuiJhP4Q7pvF+k9Jl+PDD7T9Qqao1PwZEZwAAAABJRU5ErkJggg=="}}]);
