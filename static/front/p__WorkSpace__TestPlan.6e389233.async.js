(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1601],{77429:function(ze){ze.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},36548:function(ze,he,a){"use strict";a.r(he),a.d(he,{default:function(){return R}});var _=a(20228),ee=a(11382),Ze=a(18106),V=a(73272),we=a(57663),ne=a(71577),h=a(62350),Se=a(24565),ge=a(49111),g=a(19650),c=a(11849),Le=a(34792),w=a(48086),P=a(39428),xe=a(93224),re=a(3182),me=a(2824),se=a(20310),$=a(67294),Ee=a(60035),s=a(16917),be=a(20009),Re=a(86213),pe=a(12788),te=a(57338),Me=a(440),Ie=a(54029),le=a(79166),De=a(13062),i=a(71230),C=a(48598),d=a(24480),e=a(85893),j,b,K="160px",W=pe.ZP.div(j||(j=(0,se.Z)([`
    width:100%;
    display: flex;
    align-items: center;

    .setting_label {
        width : `,`; 
        font-weight: 600;
        display: inline-block;
        font-size: 14px;
        color: rgba(0,0,0,0.85);
        text-align : right;
        margin-right: 12px;
    }

    .setting_link,
    .setting_text {
        width : calc( 100% - `,` - 12px );
        overflow: hidden;
        display: inline-block;
        height: 24px;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
`])),K,K),N=pe.ZP.div(b||(b=(0,se.Z)([`
    position: relative;
    height: 1px;
    border-top: 1px dashed rgba(0,0,0,0.15);
    margin-bottom: 22px;
    width: 100%;
    span {
        position: absolute;
        left: 0;
        top: 0;
        padding-right: 10px;
        background: #FFFFFF;
        transform:translate(0, -50%);
        font-size: 16px;
        font-family: PingFangSC-Medium;
        color: rgba(0 , 0 , 0 , .85);
        float: left;
        display: table-cell;
        margin: 0 auto;
        &::before {
            float: left;
            content :'';
            height: 16px;
            width: 2px;
            background: #1890FF;
            margin-top: 6px;
            margin-right: 10px;
        }
    }
`]))),p=function(T){var z=T.name,A=z===void 0?"":z,f=T.val,u=f===void 0?"":f,l=T.isLink,t=l===void 0?!1:l;return(0,e.jsxs)(W,{children:[(0,e.jsx)("b",{className:"setting_label",children:A}),u?t?(0,e.jsx)("a",{className:"setting_link",children:u}):(0,e.jsx)("span",{className:"setting_text",children:u}):(0,e.jsx)(e.Fragment,{children:"\u65E0"})]})},x=function(T){var z=T.name,A=z===void 0?"":z,f=T.val,u=f===void 0?"":f,l=T.isLink,t=l===void 0?!1:l;return u&&(0,e.jsxs)(W,{children:[(0,e.jsx)("b",{className:"setting_label",children:A}),u?t?(0,e.jsx)("a",{className:"setting_link",children:u}):u:(0,e.jsx)(e.Fragment,{children:"\u65E0"})]})},ae=function(T){var z=T.name,A=z===void 0?"":z,f=T.children;return(0,e.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,e.jsx)("div",{style:{width:160,marginRight:12,textAlign:"right"},children:(0,e.jsx)("b",{children:A})}),(0,e.jsx)("div",{style:{width:"calc(100% - 160px - 12px)"},children:f})]})},oe=function(T,z){var A,f,u,l=(0,s.YB)(),t=l.formatMessage,r=T.ws_id,o=(0,s.md)(),v=(0,$.useState)(!1),L=(0,me.Z)(v,2),H=L[0],M=L[1],Y=(0,$.useState)(void 0),D=(0,me.Z)(Y,2),n=D[0],Oe=D[1];(0,$.useImperativeHandle)(z,function(){return{show:function(){var O=(0,re.Z)((0,P.Z)().mark(function S(G){var U,ye,Te,Q;return(0,P.Z)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,C.jW)({ws_id:r,id:G.id});case 2:if(U=q.sent,ye=U.data,Te=U.code,Q=U.msg,Te!==200){q.next=10;break}return Oe((0,c.Z)((0,c.Z)({},ye),G)),M(!0),q.abrupt("return");case 10:return q.abrupt("return",(0,d.EV)(Te,Q));case 11:case"end":return q.stop()}},S)}));function X(S){return O.apply(this,arguments)}return X}()}});var Be=function(){M(!1),Oe(null)},je=function(){s.m8.push("/ws/".concat(r,"/test_plan/").concat(n.id,"/edit"))},Pe=function(){s.m8.push("/ws/".concat(r,"/test_plan/").concat(n.id,"/run"))};return(0,e.jsxs)(Me.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(s._H,{id:"plan.configuration"}),visible:H,width:900,onClose:Be,destroyOnClose:!0,footer:(0,e.jsx)(i.Z,{justify:"end",children:(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(s.Nv,{accessible:o.WsTourist(),children:(0,e.jsx)(s.Nv,{accessible:o.WsMemberOperateSelf(n==null?void 0:n.creator),fallback:(0,e.jsx)(ne.Z,{onClick:function(){return(0,d.WR)()},children:(0,e.jsx)(s._H,{id:"plan.edit.configuration"})}),children:(0,e.jsx)(ne.Z,{onClick:je,children:(0,e.jsx)(s._H,{id:"plan.edit.configuration"})})})}),(0,e.jsx)(ne.Z,{onClick:Pe,type:"primary",children:(0,e.jsx)(s._H,{id:"plan.run.plan"})})]})}),children:[(0,e.jsxs)(i.Z,{style:{marginBottom:20},children:[(0,e.jsx)(N,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.basic.info"})})}),(0,e.jsx)(p,{name:t({id:"plan.name"}),val:n==null?void 0:n.name}),(0,e.jsx)(p,{name:t({id:"plan.creator_name"}),val:n==null?void 0:n.creator_name}),(0,e.jsx)(p,{name:t({id:"plan.project_name"}),val:n==null?void 0:n.project_name}),(0,e.jsx)(p,{name:"".concat(t({id:"plan.func_baseline"})),val:n==null?void 0:n.func_baseline_name}),(0,e.jsx)(p,{name:"".concat(t({id:"plan.perf_baseline"})),val:n==null?void 0:n.perf_baseline_name}),(0,e.jsx)(p,{name:t({id:"plan.description"}),val:n==null?void 0:n.description}),(0,e.jsx)(p,{name:t({id:"plan.notice_name"}),val:(n==null?void 0:n.notice_name)||((n==null?void 0:n.email_info)||(n==null?void 0:n.ding_talk_info))&&"[T-one]\u4F60\u7684\u6D4B\u8BD5\u5DF2\u5B8C\u6210{date}"}),(0,e.jsx)(p,{name:t({id:"plan.email_info"}),val:n==null?void 0:n.email_info}),(0,e.jsx)(p,{name:t({id:"plan.ding_talk_info"}),val:n==null?void 0:n.ding_talk_info}),(0,e.jsx)(p,{name:t({id:"plan.enable"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:n!=null&&n.enable?(0,e.jsx)(le.Z,{status:"processing",text:(0,e.jsx)(s._H,{id:"operation.yes"})}):(0,e.jsx)(le.Z,{status:"default",text:(0,e.jsx)(s._H,{id:"operation.no"})})})})]}),(0,e.jsxs)(i.Z,{style:{marginBottom:20},children:[(0,e.jsx)(N,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.public.config"})})}),(0,e.jsx)(x,{name:"\u529F\u80FD\u57FA\u7EBF",val:n==null?void 0:n.func_baseline_name}),(0,e.jsx)(x,{name:"\u6027\u80FD\u57FA\u7EBF",val:n==null?void 0:n.perf_baseline_name}),(n==null?void 0:n.test_obj)==="kernel"&&JSON.stringify(n==null?void 0:n.build_pkg_info)!=="{}"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x,{isLink:!0,name:t({id:"plan.code_repo"}),val:n==null?void 0:n.build_pkg_info.code_repo}),(0,e.jsx)(x,{isLink:!0,name:t({id:"plan.compile_branch"}),val:n==null?void 0:n.build_pkg_info.compile_branch}),(0,e.jsx)(x,{name:"CpuArch",val:n==null?void 0:n.build_pkg_info.cpu_arch}),(0,e.jsx)(x,{name:"Commit ID",val:n==null?void 0:n.build_pkg_info.commit_id}),(0,e.jsx)(x,{name:"Build config",val:n==null?void 0:n.build_pkg_info.build_config}),(0,e.jsx)(x,{name:"Build machine",val:n==null?void 0:n.build_pkg_info.build_machine})]}),(n==null?void 0:n.test_obj)==="kernel"&&JSON.stringify(n==null?void 0:n.kernel_info)!=="{}"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x,{isLink:!0,name:t({id:"plan.kernel.pkg"}),val:n==null?void 0:n.kernel_info.kernel}),(0,e.jsx)(x,{isLink:!0,name:t({id:"plan.devel"}),val:n==null?void 0:n.kernel_info.devel}),(0,e.jsx)(x,{isLink:!0,name:t({id:"plan.headers"}),val:n==null?void 0:n.kernel_info.headers}),(0,e.jsx)(x,{name:"hotfix",val:n!=null&&n.kernel_info.hotfix?t({id:"operation.yes"}):t({id:"operation.no"})}),(0,e.jsx)(x,{name:t({id:"plan.kernel_version"}),val:n==null?void 0:n.kernel_info.kernel_version})]}),(0,e.jsx)(x,{name:t({id:"plan.rpm_info"}),val:n==null?void 0:n.rpm_info}),(0,e.jsx)(x,{name:t({id:"plan.env_info"}),val:n==null?void 0:n.env_info})]}),(0,e.jsxs)(i.Z,{style:{marginBottom:20},children:[(0,e.jsx)(N,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.test.configuration"})})}),(n==null?void 0:n.env_prep)&&JSON.stringify(n==null?void 0:n.env_prep)!=="{}"&&(0,e.jsx)(ae,{name:n==null?void 0:n.env_prep.name,children:n==null?void 0:n.env_prep.machine_info.map(function(O,X){return(0,e.jsx)("div",{children:(0,e.jsxs)(g.Z,{children:[(0,e.jsx)("span",{children:O.machine}),(0,e.jsx)("span",{children:O.script})]})},X)})}),(n==null?void 0:n.test_config)&&(n==null?void 0:n.test_config.length)>0&&n.test_config.map(function(O,X){return(0,e.jsx)(ae,{name:O.name,children:O.template.map(function(S){return(0,e.jsx)("div",{children:S.name})})},X)})]}),(0,e.jsxs)(i.Z,{style:{marginBottom:20},children:[(0,e.jsx)(N,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.report.configuration"})})}),n!=null&&n.auto_report?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p,{name:t({id:"plan.generate.reports"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:(0,e.jsx)(le.Z,{status:"processing",text:t({id:"operation.yes"})})})}),(0,e.jsx)(p,{name:t({id:"plan.report_name"}),val:(n==null?void 0:n.report_name)||"{date} {plan_name} {plan_id} {product_version}"}),(0,e.jsx)(p,{name:t({id:"plan.report_template_name"}),val:n==null?void 0:n.report_template_name}),(0,e.jsx)(p,{name:t({id:"plan.group_method"}),val:(n==null?void 0:n.group_method)==="job"?t({id:"plan.group_method.job"}):t({id:"plan.group_method.stage"})}),(0,e.jsx)(p,{name:t({id:"plan.base_group_info"}),val:(n==null?void 0:n.group_method)==="job"?"".concat((n==null||(A=n.base_group_info)===null||A===void 0?void 0:A.stage_name)||"-"," / ").concat(n==null||(f=n.base_group_info)===null||f===void 0?void 0:f.template_name):n==null||(u=n.base_group_info)===null||u===void 0?void 0:u.stage_name}),(0,e.jsx)(p,{name:t({id:"plan.report_description"}),val:n==null?void 0:n.report_description})]}):(0,e.jsx)(p,{name:t({id:"plan.generate.reports"}),val:(0,e.jsx)("span",{style:{paddingLeft:4},children:(0,e.jsx)(le.Z,{status:"default",text:t({id:"operation.no"})})})})]}),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(N,{children:(0,e.jsx)("span",{children:(0,e.jsx)(s._H,{id:"plan.trigger.configuration"})})}),(0,e.jsx)(p,{name:t({id:"plan.trigger.rule"}),val:(n==null?void 0:n.cron_info)||t({id:"plan.width.out"})})]})]})},_e=(0,$.forwardRef)(oe),de=a(78037),J=a(85450),ie=a(72529),fe=["code","msg"],ce,F=pe.ZP.span(ce||(ce=(0,se.Z)([`
    color: #1890FF;
    margin-right: 10 ;
    cursor: pointer ;
    `,` 
`])),function(ue){return ue.disabled&&"opacity: 0.25;"}),B=function(T){var z=(0,s.YB)(),A=z.formatMessage,f=T.route,u=(0,be.UO)(),l=u.ws_id,t=(0,be.TH)(),r=t.query,o=(0,s.md)();(0,Ee.jk)("Workspace.TestPlan.".concat(f.name));var v=(0,Ee.CR)(),L=v.height,H=(0,$.useRef)(),M=(0,$.useState)([]),Y=(0,me.Z)(M,2),D=Y[0],n=Y[1],Oe=(0,$.useState)(!0),Be=(0,me.Z)(Oe,2),je=Be[0],Pe=Be[1],O=(0,$.useState)(r&&JSON.stringify(r)!=="{}"?r:{ws_id:l,page_num:1,page_size:10}),X=(0,me.Z)(O,2),S=X[0],G=X[1],U=function(){var k=(0,re.Z)((0,P.Z)().mark(function m(){var E,y,I,Ce;return(0,P.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,C.d3)(S);case 2:E=Z.sent,y=E.code,I=E.msg,Ce=(0,xe.Z)(E,fe),y===200?n(Ce):(0,d.EV)(y,I),Pe(!1);case 8:case"end":return Z.stop()}},m)}));return function(){return k.apply(this,arguments)}}();(0,$.useEffect)(function(){U()},[S]);var ye=function(){var k=(0,re.Z)((0,P.Z)().mark(function m(E){return(0,P.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(E.enable){I.next=2;break}return I.abrupt("return");case 2:s.m8.push("/ws/".concat(l,"/test_plan/").concat(E.id,"/run"),S);case 3:case"end":return I.stop()}},m)}));return function(E){return k.apply(this,arguments)}}(),Te=function(m){H.current.show(m)},Q=function(){var k=(0,re.Z)((0,P.Z)().mark(function m(E){var y,I,Ce;return(0,P.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,C.Nm)({plan_id:E.id,ws_id:l});case 2:if(y=Z.sent,I=y.code,Ce=y.msg,I===200){Z.next=8;break}return(0,d.EV)(I,Ce),Z.abrupt("return");case 8:w.default.success(A({id:"request.copy.success"})),U();case 10:case"end":return Z.stop()}},m)}));return function(E){return k.apply(this,arguments)}}(),ve=function(m){s.m8.push("/ws/".concat(l,"/test_plan/").concat(m.id,"/edit"),S)},q=function(){var k=(0,re.Z)((0,P.Z)().mark(function m(E){var y,I,Ce;return(0,P.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,C.NH)({plan_id:E.id,ws_id:l});case 2:y=Z.sent,I=y.code,Ce=y.msg,I===200?U():(0,d.EV)(I,Ce);case 6:case"end":return Z.stop()}},m)}));return function(E){return k.apply(this,arguments)}}(),Fe=[(0,c.Z)((0,c.Z)({dataIndex:"name",title:(0,e.jsx)(s._H,{id:"plan.table.name"}),fixed:"left",width:400},(0,de.QT)(S,G,"name")),(0,ie.yQ)("-")),(0,c.Z)({dataIndex:"cron_info",title:(0,e.jsx)(s._H,{id:"plan.table.cron_info"}),width:120},(0,ie.yQ)("-")),(0,c.Z)({dataIndex:"enable",title:(0,e.jsx)(s._H,{id:"plan.table.enable"}),width:120,ellipsis:{showTitle:!1},render:function(m){return m?(0,e.jsx)(s._H,{id:"operation.yes"}):(0,e.jsx)(s._H,{id:"operation.no"})}},(0,de.KW)(S,G,[{name:(0,e.jsx)(s._H,{id:"operation.yes"}),value:"True"},{name:(0,e.jsx)(s._H,{id:"operation.no"}),value:"False"}],"enable")),(0,c.Z)((0,c.Z)({dataIndex:"creator_name",title:(0,e.jsx)(s._H,{id:"plan.table.creator_name"}),width:120},(0,ie.yQ)("-")),(0,de.ln)(S,G,"creator_name")),(0,c.Z)({dataIndex:"gmt_created",title:(0,e.jsx)(s._H,{id:"plan.table.gmt_created"}),width:170},(0,ie.yQ)("-")),(0,c.Z)((0,c.Z)({dataIndex:"gmt_modified",title:(0,e.jsx)(s._H,{id:"plan.table.gmt_modified"})},(0,ie.yQ)("-")),{},{width:170}),{title:(0,e.jsx)(s._H,{id:"Table.columns.operation"}),fixed:"right",key:"operation",width:220,render:function(m,E){return(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(F,{disabled:!m.enable,onClick:function(){return ye(m)},children:(0,e.jsx)(s._H,{id:"operation.run"})}),(0,e.jsx)(F,{onClick:function(){return Te(m)},children:(0,e.jsx)(s._H,{id:"operation.view"})}),(0,e.jsx)(F,{onClick:function(){return Q(m)},children:(0,e.jsx)(s._H,{id:"operation.copy"})}),(0,e.jsx)(s.Nv,{accessible:o.WsTourist(),children:(0,e.jsx)(s.Nv,{accessible:o.WsMemberOperateSelf(E.creator),fallback:(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(F,{onClick:function(){return(0,d.WR)()},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)(F,{onClick:function(){return(0,d.WR)()},children:(0,e.jsx)(s._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(F,{onClick:function(){return ve(m)},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)(Se.Z,{title:(0,e.jsx)(s._H,{id:"delete.prompt"}),onConfirm:function(){return q(m)},okText:(0,e.jsx)(s._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(s._H,{id:"operation.cancel"}),children:(0,e.jsx)(F,{children:(0,e.jsx)(s._H,{id:"operation.delete"})})})]})})})]})}}];return(0,e.jsx)(ee.Z,{spinning:je,children:(0,e.jsxs)("div",{style:{width:"100%",minHeight:L-50},children:[(0,e.jsx)("div",{style:{width:"100%",background:"#fff",minHeight:"100%"},children:(0,e.jsx)(V.Z,{tabBarStyle:{height:64,background:"#FAFBFC"},tabBarExtraContent:(0,e.jsx)(ne.Z,{type:"primary",style:{marginRight:20},onClick:function(){return s.m8.push("/ws/".concat(l,"/test_plan/create"))},children:(0,e.jsx)(s._H,{id:"Workspace.TestPlan.Create"})}),children:(0,e.jsx)(V.Z.TabPane,{tab:(0,e.jsx)(s._H,{id:"Workspace.TestPlan.".concat(f.name)}),children:(0,e.jsxs)("div",{style:{paddingLeft:20,paddingRight:20},children:[(0,e.jsx)(J.sL,{columns:Fe,name:"ws-test-plan-manage",refreshDeps:[l,S,o],dataSource:D.data,rowKey:function(m){return m.id},size:"small",pagination:!1}),(0,e.jsx)(Re.Z,{pageSize:D.page_size,onPageChange:function(m,E){var y=(0,c.Z)((0,c.Z)({},S),{},{page_num:m,page_size:E});G(y)},currentPage:D.page_num,total:D.total})]})},"list")})}),(0,e.jsx)(_e,{ws_id:l,ref:H})]})})},R=B},48598:function(ze,he,a){"use strict";a.d(he,{d3:function(){return ee},lY:function(){return Ze},g3:function(){return V},NH:function(){return we},jW:function(){return ne},qW:function(){return h},uy:function(){return Se},Nm:function(){return ge}});var _=a(16917),ee=function(c){return(0,_.WY)("/api/plan/list/",{params:c})},Ze=function(c){return(0,_.WY)("/api/plan/list/",{data:c,method:"post"})},V=function(c){return(0,_.WY)("/api/plan/run/",{data:c,method:"post"})},we=function(c){return(0,_.WY)("/api/plan/detail/",{data:c,method:"delete"})},ne=function(c){return(0,_.WY)("/api/plan/detail/",{params:c})},h=function(c){return(0,_.WY)("/api/plan/detail/",{data:c,method:"put"})},Se=function(c){return(0,_.WY)("/api/plan/check/cron_expression/",{data:c,method:"post"})},ge=function(c){return(0,_.WY)("/api/plan/copy/",{data:c,method:"post"})}},72529:function(ze,he,a){"use strict";a.d(he,{gN:function(){return j},tZ:function(){return N},yQ:function(){return p},Pc:function(){return x},KS:function(){return de},YV:function(){return J},Nq:function(){return ie},JQ:function(){return T},iK:function(){return z},fD:function(){return A},QN:function(){return f},ud:function(){return u}});var _=a(402),ee=a(97272),Ze=a(49111),V=a(19650),we=a(20136),ne=a(55241),h=a(11849),Se=a(71153),ge=a(60331),g=a(89032),c=a(15746),Le=a(13062),w=a(71230),P=a(22385),xe=a(89456),re=a(20310),me=a(36017),se=a(35247),$=a(67294),Ee=a(77429),s=a.n(Ee),be=a(8212),Re=a(1870),pe=a(20009),te=a(16917),Me=a(12788),Ie=a(24480),le=a(60035),De=a(10753),i=a(85893),C,d,e=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),j=function(t){var r=(0,pe.UO)(),o=r.ws_id;return(0,i.jsxs)(se.Z,{style:{marginBottom:t.bottomHeight},children:[(0,i.jsx)(se.Z.Item,{children:(0,i.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return te.m8.push("/ws/".concat(o,"/test_result"))},children:(0,i.jsx)(te._H,{id:"ws.result.details.test.result"})})}),(0,i.jsx)(se.Z.Item,{children:(0,i.jsx)(te._H,{id:"ws.result.details.result.details"})})]})},b=new Map([["success","#81BF84"],["fail","#C84C5A"],["running","#649FF6"],["stop","#1D1D1D"],["pending","#1D1D1D"],["skip","#1D1D1D"],["warning","#faad14"]]),K=function(t){return b.get(t)||""},W=Me.ZP.span(C||(C=(0,re.Z)([`
    color: `,`;
    fontWeight: 500;
    text-transform: capitalize;
`])),function(l){var t=l.color;return t}),N=function(t){var r=t;return Object.prototype.toString.call(t)==="[object Boolean]"&&(r=t?"success":"fail"),(0,i.jsx)(W,{color:K(r),children:r})},p=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(o){return o?(0,i.jsx)(De.K,{ellipsis:{tooltip:!0},children:o}):t}}},x=function(t){var r=t.title,o=t.width,v=o===void 0?"100%":o,L=t.onEdit,H=t.access,M=(0,$.useRef)(),Y=(0,pe.UO)(),D=Y.share_id;return(0,i.jsx)("div",{ref:M,style:{width:v},children:(0,i.jsxs)(w.Z,{style:{width:v},justify:"start",align:"middle",children:[(0,i.jsx)(xe.Z,{placement:"topLeft",title:r,children:(0,i.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r||"-"})}),!D&&(0,i.jsx)(be.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return H?L():(0,Ie.WR)()}})]})})},ae=function(t){return e.get(t)||"#D9D9D9"},oe=function(t){var r=t.text,o=(0,te.YB)(),v=(0,le.oM)(o.formatMessage({id:"request.copy.success"}));return(0,i.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return v(r)},children:o.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},_e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(o){return o?_jsx(_Tooltip,{overlayClassName:styles.tootip_overflow,placement:"topLeft",title:_jsxs(_Row,{children:[_jsx(_Col,{span:24,style:{whiteSpace:"break-spaces"},children:o}),_jsx(_Col,{span:24,children:_jsx(_Row,{justify:"center",children:_jsx(oe,{text:o})})})]}),children:o}):t}}},de=function(t){var r=t.text,o=t.defaultText,v=o===void 0?"-":o;return r?(0,i.jsx)(xe.Z,{overlayClassName:s().tootip_overflow,placement:"topLeft",title:(0,i.jsxs)(w.Z,{children:[(0,i.jsx)(c.Z,{span:24,style:{whiteSpace:"break-spaces"},children:r}),(0,i.jsx)(c.Z,{span:24,children:(0,i.jsx)(w.Z,{justify:"center",children:(0,i.jsx)(oe,{text:r})})})]}),children:r}):v},J=function(t){return t==="decline"?"#C84C5A":t==="normal"?"#000000":t==="increase"?"#81BF84":""},ie=function(t,r,o){return t==="decline"?(0,i.jsx)("span",{style:{color:"#C84C5A"},children:o({id:"ws.result.details.".concat(t)})}):t==="normal"?(0,i.jsx)("span",{style:{color:"#000000"},children:o({id:"ws.result.details.".concat(t)})}):t==="increase"?(0,i.jsx)("span",{style:{color:"#81BF84"},children:o({id:"ws.result.details.".concat(t)})}):r||"-"},fe=(0,Me.ZP)(ge.Z)(d||(d=(0,re.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(l){var t=l.no_margin;return t?"margin-right: 0;":""}),ce=function(t){return(0,i.jsx)(fe,(0,h.Z)({},(0,h.Z)((0,h.Z)({},t),{},{collection:void 0})))},F=function(t){var r=(0,te.YB)(),o=r.formatMessage;return(0,i.jsx)(xe.Z,{title:o({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,i.jsx)(fe,(0,h.Z)({},t))})},B=function(t){var r=t.title;return(0,i.jsx)(ne.Z,{title:r,placement:"right",trigger:"hover",overlayClassName:s().tag_popover_style,children:(0,i.jsx)(Re.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},R=function(t){var r=t.state;return(0,i.jsx)(ce,(0,h.Z)((0,h.Z)({},t),{},{color:ae(r),style:e.get(r)?void 0:{color:"#1d1d1d"},children:r==="success"?"complete":r}))},ue=function(t){var r=t.state;return(0,i.jsx)(F,(0,h.Z)((0,h.Z)({},t),{},{color:ae(r),style:e.get(r)?void 0:{color:"#1d1d1d"},children:r==="success"?"complete":r}))},T=function(t){var r=(0,te.YB)(),o=r.formatMessage,v=t.state,L=t.run_state,H=L===void 0?"":L,M=t.state_desc,Y=(0,pe.UO)(),D=Y.ws_id;return v==="running"?M?(0,i.jsxs)(V.Z,{size:0,children:[(0,i.jsx)(R,(0,h.Z)((0,h.Z)({},t),{},{children:v})),(0,i.jsx)(B,{title:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:M.replace(/(\d+)/g,'<a href="/ws/'.concat(D,'/test_result/$1" target="_blank">$1</a>'))}})})]}):H?(0,i.jsxs)(V.Z,{size:0,children:[(0,i.jsx)(R,(0,h.Z)((0,h.Z)({},t),{},{children:v})),(0,i.jsx)(B,{title:o({id:"ws.result.details.not.assigned.server"})})]}):(0,i.jsxs)(V.Z,{size:0,children:[(0,i.jsx)(R,(0,h.Z)((0,h.Z)({},t),{},{children:v})),(0,i.jsx)(B,{title:o({id:"ws.result.details.running,please.wait"})})]}):v==="pending"&&M?(0,i.jsxs)(V.Z,{size:0,children:[(0,i.jsx)(R,(0,h.Z)((0,h.Z)({},t),{},{children:v})),(0,i.jsx)(B,{title:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:M.replace(/(\d+)/g,'<a href="/ws/'.concat(D,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,i.jsx)(R,(0,h.Z)({},t))},z=function(t){return(0,i.jsx)(ue,(0,h.Z)((0,h.Z)({},t),{},{no_margin:1}))},A=function(t){var r=t.title,o=t.desc,v=t.placement,L=v===void 0?"bottom":v;return(0,i.jsxs)(V.Z,{children:[(0,i.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:r}),(0,i.jsx)(xe.Z,{overlayClassName:s().table_question_tooltip,placement:L,arrowPointAtCenter:!0,title:o,color:"#fff",children:(0,i.jsx)(Re.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},f=function(t){var r=t.title,o=t.test_value,v=t.value_list,L=t.cv_value,H=t.max_value,M=t.min_value,Y=t.metric,D=t.result,n=(0,te.YB)(),Oe=n.formatMessage,Be=(0,le.oM)(Oe({id:"request.copy.success"})),je=function(ve){return ve?new Number(ve).toFixed(2):null},Pe=je(H),O=je(M),X=L,S=je(o),G=v.map(function(Q){return je(Q)}),U="".concat(Y," ").concat(r,`:
Avg: `).concat(S,`
CV:  `).concat(X);U+=Pe?`
Max: `.concat(Pe):"",U+=O?`
Min: `.concat(O):"",U+=G.length?`
Test Record
`:"",U+=G.reduce(function(Q,ve,q){return Q.concat("(".concat(q+1,") ").concat(ve,`
`))},"");var ye="".concat(S,"\xB1").concat(X),Te=function(){return D==="decline"?(0,i.jsx)("span",{className:s().result_popover_span,style:{color:"#C84C5A"},children:ye}):D==="increase"?(0,i.jsx)("span",{className:s().result_popover_span,style:{color:"#81BF84"},children:ye}):(0,i.jsx)("span",{className:s().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:ye})};return(0,i.jsx)(ne.Z,{overlayClassName:s().metric_list_copy,title:(0,i.jsxs)(w.Z,{justify:"space-between",children:[(0,i.jsx)("b",{children:r}),(0,i.jsx)("span",{onClick:function(){return Be(U)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,i.jsx)(te._H,{id:"operation.copy"})})]}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(w.Z,{children:[(0,i.jsx)("b",{children:"Avg\uFF1A"}),(0,i.jsx)("span",{children:S})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)("b",{children:"CV\uFF1A"}),(0,i.jsx)("span",{children:X})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)("b",{children:"Max\uFF1A"}),(0,i.jsx)("span",{children:Pe})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)("b",{children:"Min\uFF1A"}),(0,i.jsx)("span",{children:O})]}),G.length>0&&(0,i.jsx)(w.Z,{style:{marginTop:16},children:(0,i.jsx)("b",{children:"Test Record"})}),G.map(function(Q,ve){return(0,i.jsx)(w.Z,{children:"(".concat(ve+1,")").concat(Q)},ve)})]}),children:Te()})},u=function(t,r){return r&&(0,i.jsx)(c.Z,{span:24,children:(0,i.jsxs)(w.Z,{children:[(0,i.jsx)(ee.Z.Text,{style:{width:70,fontWeight:600,marginRight:8},children:t}),(0,i.jsx)(ee.Z.Paragraph,{style:{width:"calc( 100% - 70px - 8px)"},ellipsis:!0,children:r})]})})}},85450:function(ze,he,a){"use strict";a.d(he,{sL:function(){return i},ny:function(){return le},Fu:function(){return De}});var _=a(11849),ee=a(2824),Ze=a(93224),V=a(32059),we=a(66456),ne=a(79764),h=a(86582),Se=a(19273),ge=a(20310),g=a(67294),c=a(1706),Le=a(12788),w=a(57392),P=a(85893),xe=["width","onResizeStart","onResize","onResizeStop","resize"],re=["columns","name","onColumnsChange"],me,se,$,Ee=Le.ZP.div(me||(me=(0,ge.Z)([`
    position: relative;
    width: 100%;
`]))),s=Le.ZP.div.attrs(function(C){return{style:{left:C.left,height:C==null?void 0:C.height}}})(se||(se=(0,ge.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),be=(0,Le.ZP)(c.Resizable)($||($=(0,ge.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(C){var d=C.resize;return d?"col-resize":"default"}),Re=function(d){var e=d.width,j=d.onResizeStart,b=d.onResize,K=d.onResizeStop,W=d.resize,N=(0,Ze.Z)(d,xe);return(0,P.jsx)(be,(0,_.Z)((0,_.Z)({width:e||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:j,onResize:b,onResizeStop:K,resize:W?1:0},N),{},{children:(0,P.jsx)("th",(0,_.Z)({},N))}))},pe=function(d){var e=d.columns,j=e===void 0?[]:e,b=d.name,K=d.onColumnsChange,W=(0,Ze.Z)(d,re),N=g.useState(0),p=(0,ee.Z)(N,2),x=p[0],ae=p[1],oe=g.useState(0),_e=(0,ee.Z)(oe,2),de=_e[0],J=_e[1],ie=g.useState(!1),fe=(0,ee.Z)(ie,2),ce=fe[0],F=fe[1],B=g.useRef(null),R=(0,w.Z)(B),ue=function(u){return function(l,t){var r;if((0,Se.Z)(t),!!j[u].ellipsis){var o=l.clientX,v=o-((r=B.current)===null||r===void 0?void 0:r.getBoundingClientRect().x);J(v),ae(v),F(!0)}}},T=function(){return function(u){var l,t=u.clientX,r=t-((l=B.current)===null||l===void 0?void 0:l.getBoundingClientRect().x);ae(r)}},z=function(u){return function(l,t){var r,o=t.size,v=l.clientX,L=v-((r=B.current)===null||r===void 0?void 0:r.getBoundingClientRect().x),H=(0,h.Z)(j);if(H[u].ellipsis){var M=o.width+=L-de,Y=H[u],D=Y.dataIndex,n=Y.key;M>20&&(H[u]=(0,_.Z)((0,_.Z)({},H[u]),{},{width:M}),b&&De(b,D||n,M),K==null||K())}ae(0),J(0),F(!1)}},A=g.useMemo(function(){return j.reduce(function(f,u){return u.width?f+=u==null?void 0:u.width:f},0)},[j]);return(0,P.jsxs)(Ee,{ref:B,className:"resize-table-wrapper",children:[(0,P.jsx)(ne.Z,(0,_.Z)((0,_.Z)({},W),{},{components:{header:{cell:Re}},scroll:(d==null?void 0:d.scroll)||{x:A||(R==null?void 0:R.width)},columns:j.filter(Boolean).map(function(f,u){return(0,_.Z)((0,_.Z)({},f),{},{onHeaderCell:function(t){return{resize:!!f.ellipsis,width:t.width,onResizeStart:ue(u),onResize:T(),onResizeStop:z(u)}}})})})),ce&&(0,P.jsx)(s,{height:R==null?void 0:R.height,left:x||de})]})},te=pe,Me=["name","columns","refreshDeps","onColumnsChange"],Ie="umi_locale",le=function(d,e){var j=localStorage.getItem(d),b=localStorage.getItem(Ie)||"zh-CN";if(!!j)return JSON.parse(j)["".concat(b,"-").concat(e)]},De=function(d,e,j){var b=localStorage.getItem(d),K=localStorage.getItem(Ie)||"zh-CN",W=(0,V.Z)({},"".concat(K,"-").concat(e),j);b?localStorage.setItem(d,JSON.stringify(Object.assign(JSON.parse(b),W))):localStorage.setItem(d,JSON.stringify(W))},i=function(d){var e=d.name,j=d.columns,b=d.refreshDeps,K=b===void 0?[]:b,W=d.onColumnsChange,N=(0,Ze.Z)(d,Me),p=g.useState([]),x=(0,ee.Z)(p,2),ae=x[0],oe=x[1],_e=function(){return(j==null?void 0:j.filter(Boolean).map(function(J){var ie=J.dataIndex,fe=J.key,ce=J.width,F=ie||fe,B=le(e,F);!B&&ce&&De(e,F,ce);var R=B||ce;return R&&(J.width=R),J}))||[]};return g.useEffect(function(){oe(_e())},K),(0,P.jsx)(te,(0,_.Z)({name:e,columns:ae,setColumns:oe,size:"small",onColumnsChange:function(){W==null||W(),oe(_e())}},N))}}}]);
