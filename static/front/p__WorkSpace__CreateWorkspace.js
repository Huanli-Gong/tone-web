(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{J2D9:function(G,y,a){G.exports={create_layout:"create_layout___3WAVM",systerm_init:"systerm_init___1UTPY",create_main:"create_main___1hAqa",title:"title___3apRx",red:"red___3VnqD",mb_8:"mb_8___2bk5m",mb_16:"mb_16___2LzdW",ml_97:"ml_97___1oAnL",mb_55:"mb_55___2OoKp",form_layout:"form_layout___2QDDM",full_width:"full_width___330c9",line:"line___3GlT2",create_banner:"create_banner___3yyFE",rigth_content:"rigth_content___1QKa8",issue_title:"issue_title___1i0g3",performance_ul:"performance_ul___3n1iZ",performace_more:"performace_more___1K_IM",close_btn:"close_btn___4_Wkf",upload_style:"upload_style___2LEu-",question_icon:"question_icon___11JAi",question_tip_wrapper:"question_tip_wrapper___3_aWX",question_tip_layout:"question_tip_layout___3RkKh",w_384:"w_384___cP7u3",init_box:"init_box___1IwnL",init_container:"init_container___3RZrR",init_text:"init_text___3MYIA",icon_gif:"icon_gif___dttQN",init_sucess_text:"init_sucess_text___1ttsu",init_sucess_opreate:"init_sucess_opreate___3hChT",icon:"icon___qfcqn",desc:"desc___3or4A",last_line:"last_line___19fIw",create_doc:"create_doc___2WcXq",button:"button___3C83h",init_success_box:"init_success_box___3Q6Vb",init_sucess_box:"init_sucess_box___3MYty"}},NM3O:function(G,y,a){"use strict";a.r(y);var Ce=a("B9cy"),H=a("Ol7k"),Me=a("+L6B"),W=a("2/Rp"),le=a("DZo9"),L=a("8z0m"),z=a("7Kak"),I=a("9yH6"),Z=a("5NDa"),C=a("5rEg"),M=a("DYRE"),X=a("zeV3"),Pe=a("/xke"),q=a("TeRw"),ee=a("jrin"),oe=a("miYZ"),K=a("tsqr"),P=a("9og8"),O=a("k1fw"),ie=a("y8nQ"),c=a("Vl3Y"),ce=a("14J3"),D=a("BMrR"),ae=a("jCWc"),d=a("kPKH"),te=a("tU7J"),g=a("wFql"),B=a("tJVT"),w=a("WmNS"),m=a.n(w),E=a("q1tI"),e=a.n(E),v=a("9kvl"),_e=a("TSYQ"),S=a.n(_e),N=a("J2D9"),u=a.n(N),ne=a("Lyp1"),x=a("xvlK"),T=a("4i/N"),k=a("jO45"),R=a("eRi9"),U=a("sGWT"),$=a("LvDl"),f=a.n($),F=a("c+yx"),Ee=function(V){var J=Object(E.useState)(!1),A=Object(B.a)(J,2),j=A[0],Q=A[1];return e.a.createElement(D.a,null,e.a.createElement(d.a,{span:24},e.a.createElement(g.a.Text,null,V.name),e.a.createElement("span",{className:u.a.question_tip_layout,onMouseEnter:function(){return Q(!0)},onMouseLeave:function(){return Q(!1)}},e.a.createElement(ne.a,{className:u.a.question_icon}),e.a.createElement("div",{style:{display:j?"block":"none"},className:S()(u.a.question_tip_wrapper,u.a.w_384)},e.a.createElement("p",null,V.tip)))))};y.default=function(Be){var V=Object(E.useState)({path:"",link:""}),J=Object(B.a)(V,2),A=J[0],j=J[1],Q=Object(v.i)(),ue=Object(E.useState)(!1),me=Object(B.a)(ue,2),re=me[0],de=me[1],Ae=c.a.useForm(),ge=Object(B.a)(Ae,1),se=ge[0],Fe=Object(E.useState)(!1),fe=Object(B.a)(Fe,2),be=fe[0],b=fe[1],he=Object(E.useState)(innerHeight),pe=Object(B.a)(he,2),ye=pe[0],We=pe[1],Y=Object(E.useRef)(null),Oe=e.a.useRef();Object(E.useEffect)(function(){var t=window.sessionStorage.getItem("create_ws_info");t&&(window.sessionStorage.removeItem("create_ws_info"),t=JSON.parse(t),se.setFieldsValue({show_name:f.a.get(t,"ws_info.show_name")&&f.a.get(t,"ws_info.show_name").split("[")[0],name:f.a.get(t,"ws_info.name")&&f.a.get(t,"ws_info.name").split("[")[0],description:f.a.get(t,"ws_info.description"),reason:f.a.get(t,"reason"),is_public:f.a.get(t,"ws_info.is_public"),logo:f.a.get(t,"ws_info.logo")}),j(Object(O.a)(Object(O.a)({},A),{},{link:f.a.get(t,"ws_info.logo")})))},[]);var Ie=function(_){var r=new FileReader;return r.onload=function(l){var s;(s=Oe.current)===null||s===void 0||s.show(l.target.result)},r.readAsDataURL(_),!1},Te=function(){var t=Object(P.a)(m.a.mark(function _(r){var l,s,p,n;return m.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(R.g)(r);case 2:l=o.sent,s=l.data,p=l.code,n=l.msg,p===200?(clearInterval(Y.current),v.e.push("/ws/".concat(s.id,"/workspace/initSuccess"))):K.default.error(n||"\u7CFB\u7EDF\u521D\u59CB\u5316\u5931\u8D25",2,function(){clearInterval(Y.current),de(!1)});case 7:case"end":return o.stop()}},_)}));return function(r){return t.apply(this,arguments)}}();Object(E.useEffect)(function(){var t=document.querySelector("#createWs #rigthContent");t&&We(t.offsetHeight+26)},[]);var De=function(){var _=document.querySelectorAll("#createWs .dot");if(_)return Array.from(_).forEach(function(r){r.style.opacity=0}),_};Object(E.useEffect)(function(){if(re){var t=De();if(t&&t.length){t[0].style.opacity=1;var _=0;Y.current=setInterval(function(){_=_+1<3?_+1:0,_===0&&De(),t[_].style.opacity=1},500)}}return function(){clearInterval(Y.current)}},[re]);var ve=function(){var t=Object(P.a)(m.a.mark(function _(r,l){var s,p,n;return m.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(R.f)(Object(ee.a)({},r,l));case 2:if(s=o.sent,p=s.code,n=s.msg,p===200){o.next=8;break}return se.setFields([{name:r,errors:[n]}]),o.abrupt("return");case 8:return o.abrupt("return",!0);case 9:case"end":return o.stop()}},_)}));return function(r,l){return t.apply(this,arguments)}}();return e.a.createElement(H.a.Content,{className:u.a.create_layout,id:"createWs"},e.a.createElement(D.a,{className:u.a.create_main,gutter:8,justify:"space-between"},e.a.createElement(d.a,{span:10,className:u.a.mb_55,style:{marginTop:20}},e.a.createElement(d.a,{span:18,offset:6},e.a.createElement(c.a,{form:se,layout:"vertical",className:u.a.full_width,initialValues:{is_public:!1},onFinish:function(){var t=Object(P.a)(m.a.mark(function _(r){var l,s,p,n,h;return m.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return b(!0),l=r.show_name,s=r.name,i.next=4,ve("show_name",l);case 4:if(p=i.sent,p){i.next=7;break}return i.abrupt("return",b(!1));case 7:return i.next=9,ve("name",s);case 9:if(n=i.sent,n){i.next=12;break}return i.abrupt("return",b(!1));case 12:if(!Q.IsAdmin()){i.next=18;break}de(!0),Te(Object(O.a)(Object(O.a)({},r),{},{logo:A.path})),b(!1),i.next=22;break;case 18:return i.next=20,Object(R.g)(Object(O.a)(Object(O.a)({},r),{},{logo:A.path}));case 20:h=i.sent,h.code===200?(q.default.open({message:"\u63D0\u4EA4\u6210\u529F",description:e.a.createElement("span",null,"Workspace\u521B\u5EFA\u7533\u8BF7\u63D0\u4EA4\u6210\u529F\uFF0C\u53EF\u5728\u3010\u4E2A\u4EBA\u4E2D\u5FC3\u3011-\u3010\u6211\u7684\u7533\u8BF7\u3011\u4E2D",e.a.createElement("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return v.e.push("/personCenter?person=approve")}},"\u67E5\u770B\u5BA1\u6279\u8FDB\u5EA6")),icon:e.a.createElement(k.a,{style:{color:"#52c41a"}}),duration:3}),b(!1),v.e.go(-1)):(Object(F.r)(h.code,h.msg),b(!1));case 22:case"end":return i.stop()}},_)}));return function(_){return t.apply(this,arguments)}}()},e.a.createElement(c.a.Item,{label:" "},e.a.createElement(X.b,null,e.a.createElement(g.a.Title,{level:3},"\u521B\u5EFAWorkspace"))),e.a.createElement(c.a.Item,{rules:[{required:!0,validator:function(){var t=Object(P.a)(m.a.mark(function r(l,s){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",Promise.reject("Workspace\u663E\u793A\u540D\u4E0D\u80FD\u4E3A\u7A7A"));case 2:if(/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,30}$/.test(s)){n.next=4;break}return n.abrupt("return",Promise.reject("\u4EC5\u5141\u8BB8\u5305\u542B\u6C49\u5B57\u3001\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\u3001\u4E2D\u5212\u7EBF\u3001\u70B9\uFF0C\u6700\u591A30\u4E2A\u5B57\u7B26"));case 4:return n.abrupt("return",Promise.resolve());case 5:case"end":return n.stop()}},r)}));function _(r,l){return t.apply(this,arguments)}return _}()}],label:"Workspace\u663E\u793A\u540D",name:"show_name"},e.a.createElement(C.a,{autoComplete:"off",placeholder:"workspace\u5BF9\u5916\u7684\u5C55\u793A\u540D\u79F0\uFF0C\u5141\u8BB8\u4E2D\u6587",allowClear:!0})),e.a.createElement(c.a.Item,{rules:[{required:!0,validator:function(){var t=Object(P.a)(m.a.mark(function r(l,s){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",Promise.reject("Workspace\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"));case 2:if(/^[a-z0-9_-]{0,30}$/.test(s)){n.next=4;break}return n.abrupt("return",Promise.reject("\u53EA\u5141\u8BB8\u82F1\u6587\u5C0F\u5199\u3001\u4E0B\u5212\u7EBF\u548C\u6570\u5B57\uFF0C\u6700\u591A30\u4E2A\u5B57\u7B26"));case 4:return n.abrupt("return",Promise.resolve());case 5:case"end":return n.stop()}},r)}));function _(r,l){return t.apply(this,arguments)}return _}()}],label:e.a.createElement(Ee,{name:"Workspace\u540D\u79F0",tip:"\u3010Workspace\u540D\u79F0\u3011\u4F1A\u7528\u5728\u6D4B\u8BD5\u7ED3\u679C\u6587\u4EF6\u7684\u76EE\u5F55\u6811\u4E2D",path:""}),name:"name"},e.a.createElement(C.a,{autoComplete:"off",placeholder:"\u53EA\u5141\u8BB8\u82F1\u6587\u5C0F\u5199\u3001\u4E0B\u5212\u7EBF\u548C\u6570\u5B57\uFF0C\u6700\u591A30\u4E2A\u5B57\u7B26",allowClear:!0})),e.a.createElement(c.a.Item,{rules:[{required:!0,max:200}],label:"Workspace\u7B80\u4ECB",name:"description"},e.a.createElement(C.a.TextArea,{rows:3,allowClear:!0,placeholder:"\u8BF7\u63CF\u8FF0workspace\u7684\u7528\u9014\uFF0C\u4F8B\u5982\u4EA7\u54C1/\u9879\u76EE\u76F8\u5173\u7684\u6D4B\u8BD5\u4ECB\u7ECD"})),e.a.createElement(c.a.Item,{rules:[{required:!0,max:200}],label:"\u7533\u8BF7\u7406\u7531",name:"reason"},e.a.createElement(C.a.TextArea,{allowClear:!0,rows:4,placeholder:"\u4F8B\uFF1A\u65B9\u4FBF\u9AD8\u6548\u534F\u4F5C\u548C\u56E2\u961F\u7BA1\u7406"})),e.a.createElement(c.a.Item,{rules:[{required:!0}],name:"is_public",label:e.a.createElement(Ee,{name:"\u662F\u5426\u516C\u5F00",tip:"Workspace\u6743\u9650\u7684\u5F00\u653E\u548C\u79C1\u5BC6\uFF0C\u51B3\u5B9A\u4E86\u6D4B\u8BD5\u6570\u636E\u662F\u5426\u5171\u4EAB\u7ED9\u5E73\u53F0\u7528\u6237\u67E5\u770B\uFF0C\u662F\u5426\u5141\u8BB8\u5E73\u53F0\u7528\u6237\u7533\u8BF7\u52A0\u5165\u3002",path:""})},e.a.createElement(I.a.Group,null,e.a.createElement(I.a,{value:!1,className:u.a.mb_16},"\u79C1\u5BC6",e.a.createElement("span",null,"\u9700\u7533\u8BF7\u624D\u53EF\u52A0\u5165")),e.a.createElement("br",null),e.a.createElement(I.a,{value:!0},"\u516C\u5F00",e.a.createElement("span",null,"T-one\u7528\u6237\u5747\u53EF\u52A0\u5165")))),e.a.createElement(c.a.Item,{label:"\u9879\u76EE\u5C01\u9762"},e.a.createElement(c.a.Item,{name:"logo",noStyle:!0},e.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},e.a.createElement("div",{style:{marginRight:16}},e.a.createElement(L.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/sys/upload/",beforeUpload:Ie,onChange:function(_){_.file.status==="done"&&j(_)}},A.link?e.a.createElement("img",{src:A.link,alt:"avatar",style:{width:"100%"}}):e.a.createElement(x.a,null))),e.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.a.createElement(D.a,null,e.a.createElement(d.a,{span:24},"\u53EF\u62D6\u62FD\u7167\u7247\u5230\u5DE6\u4FA7\u533A\u57DF\u4E0A\u4F20"),e.a.createElement(d.a,{span:24},"\u5C01\u9762\u5927\u5C0F\uFF1A96*96   \u652F\u6301\u56FE\u7247\u7C7B\u578B\uFF1Ajpg, png")))))),e.a.createElement(c.a.Item,{style:{marginTop:30}},e.a.createElement(W.a,{type:"primary",disabled:be,htmlType:"submit"},"\u63D0\u4EA4\u5BA1\u6838"))))),e.a.createElement(d.a,{span:14,className:u.a.rigth_content,id:"rigthContent"},e.a.createElement(D.a,null,e.a.createElement(d.a,{offset:3,span:3,style:{borderLeft:"1px solid rgba(0,0,0,.06)"}}),e.a.createElement(d.a,{span:12},e.a.createElement(D.a,{className:u.a.create_banner}),e.a.createElement(D.a,{className:u.a.issue_title},"\u5173\u4E8EWorkspace"),e.a.createElement(D.a,null,e.a.createElement("ul",{className:u.a.performance_ul},e.a.createElement("li",null,e.a.createElement(g.a.Text,{type:"secondary"},"Workspace\u521B\u5EFA\u6210\u529F\u540E\u5C06\u62E5\u6709\u72EC\u7ACB\u7684\u7A7A\u95F4\uFF0C\u72EC\u7ACB\u8D44\u6E90\uFF0C\u72EC\u7ACB\u914D\u7F6E\uFF0C\u72EC\u7ACB\u7684\u56E2\u961F\u7BA1\u7406\uFF0C\u9AD8\u6548\u534F\u4F5C")),e.a.createElement("li",null,e.a.createElement(g.a.Text,{type:"secondary"},"\u6BCF\u4E00\u4E2AWorkspace\u5728\u6570\u636E\u4E0A\u662F\u9694\u79BB\u7684")),e.a.createElement("li",null,e.a.createElement(g.a.Text,{type:"secondary"},"\u6EE1\u8DB3\u4E0D\u540C\u9886\u57DF\u4E2A\u6027\u5316\u6D4B\u8BD5\u7684\u9700\u6C42")))),e.a.createElement(D.a,null,e.a.createElement(W.a,{type:"link",onClick:function(){return v.e.push("/help_doc")}},"\u67E5\u770B\u66F4\u591A"))))),e.a.createElement(W.a,{className:u.a.close_btn,onClick:function(){return v.e.go(-1)}},e.a.createElement(T.a,null),"\u5173\u95ED"),e.a.createElement(U.a,{ref:Oe,onOk:function(_){_&&j(_)}})),re&&e.a.createElement("div",{style:{height:ye},className:u.a.systerm_init},e.a.createElement("div",{className:u.a.init_box},e.a.createElement("div",{className:u.a.init_container},e.a.createElement("div",{className:u.a.icon_gif}),e.a.createElement("div",{className:u.a.init_text},"\u7CFB\u7EDF\u521D\u59CB\u5316\u4E2D",e.a.createElement("span",{className:"dot"}),e.a.createElement("span",{className:"dot"}),e.a.createElement("span",{className:"dot"}))))))}},sGWT:function(G,y,a){"use strict";var Ce=a("2qtc"),H=a("kLXV"),Me=a("14J3"),W=a("BMrR"),le=a("9og8"),L=a("tJVT"),z=a("qqnG"),I=a("WmNS"),Z=a.n(I),C=a("q1tI"),M=a.n(C),X=a("YQfW"),Pe=a.n(X),q=a("wyMu"),ee=a.n(q),oe=a("9kvl"),K=a("vOnD"),P,O,ie=K.a.div(P||(P=Object(z.a)([`
    width: calc(100% - 200px - 20px);
    height: 100px;
    overflow: hidden;
    margin-left: 20px;
`]))),c=Object(K.a)(ee.a)(O||(O=Object(z.a)([`
    & {
        height: 200px;
        width: 200px;  
    }
`]))),ce=function(ae,d){var te=ae.onCancel,g=ae.onOk,B=M.a.useState(""),w=Object(L.a)(B,2),m=w[0],E=w[1];M.a.useImperativeHandle(d,function(){return{show:function(T){S(!0),E(T)}}});var e=M.a.useState(!1),v=Object(L.a)(e,2),_e=v[0],S=v[1],N=Object(C.useRef)(null),u=function(){S(!1),E(""),te&&te()},ne=function(){N.current.getCroppedCanvas().toBlob(function(){var T=Object(le.a)(Z.a.mark(function k(R){var U,$;return Z.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return U=new FormData,U.append("file",R),F.next=4,Object(oe.g)("/api/sys/upload/",{method:"post",data:U});case 4:$=F.sent,g($),u();case 7:case"end":return F.stop()}},k)}));return function(k){return T.apply(this,arguments)}}())};return M.a.createElement(H.a,{visible:_e,onCancel:u,onOk:ne,title:"\u56FE\u7247\u88C1\u5207",maskClosable:!1},M.a.createElement(W.a,null,M.a.createElement(c,{ref:N,src:m,aspectRatio:1,guides:!0,preview:".preview"}),M.a.createElement(ie,{className:"preview"})))};y.a=Object(C.forwardRef)(ce)}}]);
