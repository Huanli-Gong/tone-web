(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{J2D9:function(e,t,a){e.exports={create_layout:"create_layout___3WAVM",systerm_init:"systerm_init___1UTPY",create_main:"create_main___1hAqa",title:"title___3apRx",red:"red___3VnqD",mb_8:"mb_8___2bk5m",mb_16:"mb_16___2LzdW",ml_97:"ml_97___1oAnL",mb_55:"mb_55___2OoKp",form_layout:"form_layout___2QDDM",full_width:"full_width___330c9",line:"line___3GlT2",create_banner:"create_banner___3yyFE",rigth_content:"rigth_content___1QKa8",issue_title:"issue_title___1i0g3",performance_ul:"performance_ul___3n1iZ",performace_more:"performace_more___1K_IM",close_btn:"close_btn___4_Wkf",upload_style:"upload_style___2LEu-",question_icon:"question_icon___11JAi",question_tip_wrapper:"question_tip_wrapper___3_aWX",question_tip_layout:"question_tip_layout___3RkKh",w_384:"w_384___cP7u3",init_box:"init_box___1IwnL",init_container:"init_container___3RZrR",init_text:"init_text___3MYIA",icon_gif:"icon_gif___dttQN",init_sucess_text:"init_sucess_text___1ttsu",init_sucess_opreate:"init_sucess_opreate___3hChT",icon:"icon___qfcqn",desc:"desc___3or4A",last_line:"last_line___19fIw",create_doc:"create_doc___2WcXq",button:"button___3C83h",init_success_box:"init_success_box___3Q6Vb",init_sucess_box:"init_sucess_box___3MYty"}},Lyp1:function(e,t,a){"use strict";var n=a("VTBJ"),r=a("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},l=c,s=a("6VBw"),i=function(e,t){return r["createElement"](s["a"],Object(n["a"])(Object(n["a"])({},e),{},{ref:t,icon:l}))};i.displayName="QuestionCircleOutlined";t["a"]=r["forwardRef"](i)},NM3O:function(e,t,a){"use strict";a.r(t);a("B9cy");var n=a("Ol7k"),r=(a("+L6B"),a("2/Rp")),c=(a("DZo9"),a("8z0m")),l=(a("7Kak"),a("9yH6")),s=(a("5NDa"),a("5rEg")),i=(a("DYRE"),a("zeV3")),o=(a("/xke"),a("TeRw")),u=a("jrin"),_=(a("miYZ"),a("tsqr")),m=a("9og8"),p=a("k1fw"),f=(a("y8nQ"),a("Vl3Y")),d=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),E=(a("tU7J"),a("wFql")),h=a("tJVT"),w=a("WmNS"),g=a.n(w),v=a("q1tI"),y=a.n(v),O=a("9kvl"),j=a("TSYQ"),x=a.n(j),k=a("J2D9"),C=a.n(k),N=a("Lyp1"),q=a("xvlK"),S=a("4i/N"),R=a("jO45"),W=a("eRi9"),I=a("sGWT"),T=a("LvDl"),L=a.n(T),M=a("c+yx"),V=function(e){var t=Object(v["useState"])(!1),a=Object(h["a"])(t,2),n=a[0],r=a[1];return y.a.createElement(d["a"],null,y.a.createElement(b["a"],{span:24},y.a.createElement(E["a"].Text,null,e.name),y.a.createElement("span",{className:C.a.question_tip_layout,onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)}},y.a.createElement(N["a"],{className:C.a.question_icon}),y.a.createElement("div",{style:{display:n?"block":"none"},className:x()(C.a.question_tip_wrapper,C.a.w_384)},y.a.createElement("p",null,e.tip)))))};function z(e,t,a){e(t,a)}t["default"]=function(e){var t=Object(v["useState"])({path:"",link:""}),a=Object(h["a"])(t,2),w=a[0],j=a[1],x=Object(v["useState"])(!1),k=Object(h["a"])(x,2),N=k[0],T=k[1],A=f["a"].useForm(),J=Object(h["a"])(A,1),B=J[0],D=Object(v["useState"])(""),F=Object(h["a"])(D,2),Q=F[0],Y=F[1],K=Object(v["useState"])(!1),Z=Object(h["a"])(K,2),H=Z[0],U=Z[1],G=Object(v["useState"])(!1),$=Object(h["a"])(G,2),P=$[0],X=$[1],ee=Object(v["useState"])(innerHeight),te=Object(h["a"])(ee,2),ae=te[0],ne=te[1],re=Object(v["useState"])({isRepeat:!1,text:""}),ce=Object(h["a"])(re,2),le=ce[0],se=ce[1],ie=Object(v["useState"])(!1),oe=Object(h["a"])(ie,2),ue=oe[0],_e=oe[1],me=Object(v["useState"])({isRepeat:!1,text:""}),pe=Object(h["a"])(me,2),fe=pe[0],de=pe[1],be=Object(v["useState"])(!1),Ee=Object(h["a"])(be,2),he=Ee[0],we=Ee[1],ge=Object(v["useRef"])(null),ve=Object(O["m"])("@@initialState"),ye=ve.initialState,Oe=null===ye||void 0===ye?void 0:ye.authList,je=Oe.sys_role_title;Object(v["useEffect"])((function(){var e=window.sessionStorage.getItem("create_ws_info");e&&(window.sessionStorage.removeItem("create_ws_info"),e=JSON.parse(e),B.setFieldsValue({show_name:L.a.get(e,"ws_info.show_name")&&L.a.get(e,"ws_info.show_name").split("[")[0],name:L.a.get(e,"ws_info.name")&&L.a.get(e,"ws_info.name").split("[")[0],description:L.a.get(e,"ws_info.description"),reason:L.a.get(e,"reason"),is_public:L.a.get(e,"ws_info.is_public"),logo:L.a.get(e,"ws_info.logo")}),j(Object(p["a"])(Object(p["a"])({},w),{},{link:L.a.get(e,"ws_info.logo")})))}),[]);var xe=function(e){var t=new FileReader;return t.onload=function(e){Y(e.target.result),U(!0)},t.readAsDataURL(e),!1},ke=function(){var e=Object(m["a"])(g.a.mark((function e(t){var a,n,r,c;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(W["f"])(t);case 2:a=e.sent,n=a.data,r=a.code,c=a.msg,200===r?(clearInterval(ge.current),O["f"].push("/ws/".concat(n.id,"/workspace/initSuccess"))):_["default"].error(c||"\u7cfb\u7edf\u521d\u59cb\u5316\u5931\u8d25",2,(function(){clearInterval(ge.current),T(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(v["useEffect"])((function(){var e=document.querySelector("#createWs #rigthContent");e&&ne(e.offsetHeight+26)}),[]);var Ce=function(){var e=document.querySelectorAll("#createWs .dot");if(e)return Array.from(e).forEach((function(e){e.style.opacity=0})),e};Object(v["useEffect"])((function(){if(N){var e=Ce();if(e&&e.length){e[0].style.opacity=1;var t=0;ge.current=setInterval((function(){t=t+1<3?t+1:0,0===t&&Ce(),e[t].style.opacity=1}),500)}}}),[N]);var Ne=function(){var e=Object(m["a"])(g.a.mark((function e(t,a){var n,r,c,l;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(W["e"])(Object(u["a"])({},t,a));case 2:n=e.sent,r=n.code,c=n.msg,l="name"===t?de:se,200!==r&&l({isRepeat:!0,text:c}),200===r&&l({isRepeat:!1,text:""});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),qe=function(e,t){var a=e.target.value,n="name"===t,r=n?/^[a-z0-9_-]{1,20}$/:/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,20}$/g,c=n?we:_e,l=r.test(a);c(!l),l&&z(Ne,t,a)};return y.a.createElement(n["a"].Content,{className:C.a.create_layout,id:"createWs"},y.a.createElement(d["a"],{className:C.a.create_main,gutter:8,justify:"space-between"},y.a.createElement(b["a"],{span:10,className:C.a.mb_55,style:{marginTop:20}},y.a.createElement(b["a"],{span:18,offset:6},y.a.createElement(f["a"],{form:B,layout:"vertical",className:C.a.full_width,onFinish:function(){var e=Object(m["a"])(g.a.mark((function e(t){var a;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("super_admin"!==je&&"sys_admin"!==je){e.next=5;break}T(!0),ke(Object(p["a"])(Object(p["a"])({},t),{},{logo:w.path})),e.next=10;break;case 5:return X(!0),e.next=8,Object(W["f"])(Object(p["a"])(Object(p["a"])({},t),{},{logo:w.path}));case 8:a=e.sent,200===a.code?(o["default"].open({message:"\u63d0\u4ea4\u6210\u529f",description:y.a.createElement("span",null,"Workspace\u521b\u5efa\u7533\u8bf7\u63d0\u4ea4\u6210\u529f\uff0c\u53ef\u5728\u3010\u4e2a\u4eba\u4e2d\u5fc3\u3011-\u3010\u6211\u7684\u7533\u8bf7\u3011\u4e2d",y.a.createElement("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return O["f"].push("/personCenter?person=approve")}},"\u67e5\u770b\u5ba1\u6279\u8fdb\u5ea6")),icon:y.a.createElement(R["a"],{style:{color:"#52c41a"}}),duration:3}),X(!1),O["f"].go(-1)):(Object(M["m"])(a.code,a.msg),X(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y.a.createElement(f["a"].Item,{label:" "},y.a.createElement(i["b"],null,y.a.createElement(E["a"].Title,{level:3},"\u521b\u5efaWorkspace"))),y.a.createElement(f["a"].Item,{validateStatus:(ue||le.isRepeat)&&"error",help:ue?"\u957f\u5ea6\u6700\u591a20\u4f4d,\u4ec5\u5141\u8bb8\u5305\u542b\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3001\u4e2d\u5212\u7ebf\u3001\u70b9":le.isRepeat&&le.text,rules:[{required:!0,max:20,message:"\u957f\u5ea6\u6700\u591a20\u4f4d"},{required:!0,pattern:/^[A-Za-z0-9\u4e00-\u9fa5\._-]+$/g,message:"\u4ec5\u5141\u8bb8\u5305\u542b\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3001\u4e2d\u5212\u7ebf\u3001\u70b9"}],label:y.a.createElement(V,{name:"Workspace\u663e\u793a\u540d",tip:"\u3010Workspace\u540d\u79f0\u3011\u4f1a\u7528\u5728\u6d4b\u8bd5\u7ed3\u679c\u6587\u4ef6\u7684\u76ee\u5f55\u6811\u4e2d",path:""}),name:"show_name"},y.a.createElement(s["a"],{autoComplete:"off",placeholder:"workspace\u5bf9\u5916\u7684\u5c55\u793a\u540d\u79f0\uff0c\u5141\u8bb8\u4e2d\u6587",allowClear:!0,onChange:L.a.partial(qe,L.a,"show_name")})),y.a.createElement(f["a"].Item,{validateStatus:(he||fe.isRepeat)&&"error",help:he?"\u53ea\u5141\u8bb8\u82f1\u6587\u5c0f\u5199\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\uff0c\u6700\u591a20\u4e2a\u5b57\u7b26":fe.isRepeat&&fe.text,rules:[{required:!0,max:20,pattern:/^[a-z0-9_-]{0,20}$/,message:"\u53ea\u5141\u8bb8\u82f1\u6587\u5c0f\u5199\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\uff0c\u6700\u591a20\u4e2a\u5b57\u7b26"}],label:y.a.createElement(V,{name:"Workspace\u540d\u79f0",tip:"\u3010Workspace\u540d\u79f0\u3011\u4f1a\u7528\u5728\u6d4b\u8bd5\u7ed3\u679c\u6587\u4ef6\u7684\u76ee\u5f55\u6811\u4e2d",path:""}),name:"name"},y.a.createElement(s["a"],{autoComplete:"off",placeholder:"\u53ea\u5141\u8bb8\u82f1\u6587\u5c0f\u5199\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\uff0c\u6700\u591a20\u4e2a\u5b57\u7b26",allowClear:!0,onChange:L.a.partial(qe,L.a,"name")})),y.a.createElement(f["a"].Item,{rules:[{required:!0,max:200}],label:"Workspace\u7b80\u4ecb",name:"description"},y.a.createElement(s["a"].TextArea,{rows:3,allowClear:!0,placeholder:"\u8bf7\u63cf\u8ff0workspace\u7684\u7528\u9014\uff0c\u4f8b\u5982\u4ea7\u54c1/\u9879\u76ee\u76f8\u5173\u7684\u6d4b\u8bd5\u4ecb\u7ecd"})),y.a.createElement(f["a"].Item,{rules:[{required:!0,max:200}],label:"\u7533\u8bf7\u7406\u7531",name:"reason"},y.a.createElement(s["a"].TextArea,{allowClear:!0,rows:4,placeholder:"\u4f8b\uff1a\u65b9\u4fbf\u9ad8\u6548\u534f\u4f5c\u548c\u56e2\u961f\u7ba1\u7406"})),y.a.createElement(f["a"].Item,{rules:[{required:!0}],name:"is_public",label:y.a.createElement(V,{name:"\u662f\u5426\u516c\u5f00",tip:"Workspace\u6743\u9650\u7684\u5f00\u653e\u548c\u79c1\u5bc6\uff0c\u51b3\u5b9a\u4e86\u6d4b\u8bd5\u6570\u636e\u662f\u5426\u5171\u4eab\u7ed9\u5e73\u53f0\u7528\u6237\u67e5\u770b\uff0c\u662f\u5426\u5141\u8bb8\u5e73\u53f0\u7528\u6237\u7533\u8bf7\u52a0\u5165\u3002",path:""}),initialValue:!1},y.a.createElement(l["a"].Group,null,y.a.createElement(l["a"],{value:!1,className:C.a.mb_16},"\u79c1\u5bc6",y.a.createElement("span",null,"\u9700\u7533\u8bf7\u624d\u53ef\u52a0\u5165")),y.a.createElement("br",null),y.a.createElement(l["a"],{value:!0},"\u516c\u5f00",y.a.createElement("span",null,"T-one\u7528\u6237\u5747\u53ef\u52a0\u5165")))),y.a.createElement(f["a"].Item,{label:"\u9879\u76ee\u5c01\u9762"},y.a.createElement(f["a"].Item,{name:"logo",noStyle:!0},y.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},y.a.createElement("div",{style:{marginRight:16}},y.a.createElement(c["a"],{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/sys/upload/",beforeUpload:xe,onChange:function(e){"done"===e.file.status&&j(e)}},w.link?y.a.createElement("img",{src:w.link,alt:"avatar",style:{width:"100%"}}):y.a.createElement(q["a"],null))),y.a.createElement("div",{style:{display:"flex",alignItems:"center"}},y.a.createElement(d["a"],null,y.a.createElement(b["a"],{span:24},"\u53ef\u62d6\u62fd\u7167\u7247\u5230\u5de6\u4fa7\u533a\u57df\u4e0a\u4f20"),y.a.createElement(b["a"],{span:24},"\u5c01\u9762\u5927\u5c0f\uff1a96*96   \u652f\u6301\u56fe\u7247\u7c7b\u578b\uff1ajpg, png")))))),y.a.createElement(f["a"].Item,{style:{marginTop:30}},y.a.createElement(r["a"],{type:"primary",disabled:P,htmlType:"submit"},"\u63d0\u4ea4\u5ba1\u6838"))))),y.a.createElement(b["a"],{span:14,className:C.a.rigth_content,id:"rigthContent"},y.a.createElement(d["a"],null,y.a.createElement(b["a"],{offset:3,span:3,style:{borderLeft:"1px solid rgba(0,0,0,.06)"}}),y.a.createElement(b["a"],{span:12},y.a.createElement(d["a"],{className:C.a.create_banner}),y.a.createElement(d["a"],{className:C.a.issue_title},"\u5173\u4e8eWorkspace"),y.a.createElement(d["a"],null,y.a.createElement("ul",{className:C.a.performance_ul},y.a.createElement("li",null,y.a.createElement(E["a"].Text,{type:"secondary"},"Workspace\u521b\u5efa\u6210\u529f\u540e\u5c06\u62e5\u6709\u72ec\u7acb\u7684\u7a7a\u95f4\uff0c\u72ec\u7acb\u8d44\u6e90\uff0c\u72ec\u7acb\u914d\u7f6e\uff0c\u72ec\u7acb\u7684\u56e2\u961f\u7ba1\u7406\uff0c\u9ad8\u6548\u534f\u4f5c")),y.a.createElement("li",null,y.a.createElement(E["a"].Text,{type:"secondary"},"\u6bcf\u4e00\u4e2aWorkspace\u5728\u6570\u636e\u4e0a\u662f\u9694\u79bb\u7684")),y.a.createElement("li",null,y.a.createElement(E["a"].Text,{type:"secondary"},"\u6ee1\u8db3\u4e0d\u540c\u9886\u57df\u4e2a\u6027\u5316\u6d4b\u8bd5\u7684\u9700\u6c42")))),y.a.createElement(d["a"],null,y.a.createElement(r["a"],{type:"link",onClick:function(){return O["f"].push("/help_doc")}},"\u67e5\u770b\u66f4\u591a"))))),y.a.createElement(r["a"],{className:C.a.close_btn,onClick:function(){return O["f"].go(-1)}},y.a.createElement(S["a"],null),"\u5173\u95ed"),H&&y.a.createElement(I["a"],{visible:H,url:Q,onCancel:function(){return U(!1)},onOk:function(e){e&&j(e),U(!1)}})),N&&y.a.createElement("div",{style:{height:ae},className:C.a.systerm_init},y.a.createElement("div",{className:C.a.init_box},y.a.createElement("div",{className:C.a.init_container},y.a.createElement("div",{className:C.a.icon_gif}),y.a.createElement("div",{className:C.a.init_text},"\u7cfb\u7edf\u521d\u59cb\u5316\u4e2d",y.a.createElement("span",{className:"dot"}),y.a.createElement("span",{className:"dot"}),y.a.createElement("span",{className:"dot"}))))))}},jO45:function(e,t,a){"use strict";var n=a("VTBJ"),r=a("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},l=c,s=a("6VBw"),i=function(e,t){return r["createElement"](s["a"],Object(n["a"])(Object(n["a"])({},e),{},{ref:t,icon:l}))};i.displayName="CheckCircleFilled";t["a"]=r["forwardRef"](i)},sGWT:function(e,t,a){"use strict";a("2qtc");var n=a("kLXV"),r=(a("14J3"),a("BMrR")),c=a("9og8"),l=a("WmNS"),s=a.n(l),i=a("q1tI"),o=a.n(i),u=(a("YQfW"),a("wyMu")),_=a.n(u),m=a("9kvl");t["a"]=function(e){var t=e.visible,a=e.url,l=Object(i["useRef"])(null),u=function(){e.onCancel()},p=function(){l.current.getCroppedCanvas().toBlob(function(){var t=Object(c["a"])(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("file",a),t.next=4,Object(m["h"])("/api/sys/upload/",{method:"post",data:n});case 4:r=t.sent,console.log(r),e.onOk(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return o.a.createElement(n["a"],{visible:t,onCancel:u,onOk:p,title:"\u56fe\u7247\u88c1\u5207",maskClosable:!1},o.a.createElement(r["a"],null,o.a.createElement(_.a,{ref:l,src:a,style:{height:200,width:200},aspectRatio:1,guides:!0,preview:".preview"}),o.a.createElement("div",{className:"preview",style:{width:"calc(100% - 200px - 20px)",height:100,overflow:"hidden",marginLeft:20}})))}}}]);