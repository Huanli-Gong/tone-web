(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3503,2485],{95949:function(Ve){Ve.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},71217:function(Ve){Ve.exports={filter:"filter___1AVbu",confirm:"confirm___2X7ZG",domain:"domain___3UWFB"}},32261:function(Ve){Ve.exports={filter:"filter___1IKYx",confirm:"confirm___3RbBO",domain:"domain___1-UgM"}},62986:function(Ve){Ve.exports={suiteTable:"suiteTable___2-p1T",caseTableCls:"caseTableCls___3tt7c",warp:"warp___Lt1_m",batch:"batch___1YjOQ",pagination:"pagination___3PulQ",hidden:"hidden___z5Xys",filter:"filter___2euN7",confirm:"confirm___2mS0-",domain:"domain___2TGdA",edit:"edit___3n0dF",caseTabCls:"caseTabCls___mxoaj",fail_detail_operation:"fail_detail_operation___RxOy2",synchronous:"synchronous___2jXy5",synchronousTime:"synchronousTime___1THPY",modalChange:"modalChange___2t9Zt",cer_tips:"cer_tips___2rRBh",tab_hide_icon:"tab_hide_icon___Jl3CR"}},89695:function(Ve){Ve.exports={addBusiness_drawer:"addBusiness_drawer___1IfNE",server_provider:"server_provider___2V1nE"}},86452:function(Ve){Ve.exports={addConf_drawer:"addConf_drawer___36ETp",server_provider:"server_provider___OCsxL",variableLabel:"variableLabel___1eKJk",Bulk_btn:"Bulk_btn___3dMcP",flexStart:"flexStart___9WXHv",CI_Config_Extra:"CI_Config_Extra___29-5R",ciTypeElement:"ciTypeElement___3BFv5"}},53212:function(Ve){Ve.exports={confList_root:"confList_root___61KFr",deleteAll:"deleteAll___1Dwt5"}},88195:function(Ve){Ve.exports={addConf_drawer:"addConf_drawer___3dU-q",server_provider:"server_provider___3JVSB"}},22018:function(Ve){Ve.exports={suitList_root:"suitList_root___374pA",deleteAll:"deleteAll___B_DuG"}},55618:function(Ve){Ve.exports={business_root:"business_root___IbDzi",businessList:"businessList___2_Sba",deleteAll:"deleteAll___1482L"}},50435:function(Ve){Ve.exports={modalChange:"modalChange___1oHid"}},75150:function(Ve){Ve.exports={warp:"warp___2ZF85",FuncOrPerfConfList_root:"FuncOrPerfConfList_root___YULdo",batch:"batch___19QVf",pagination:"pagination___RoEs7",hidden:"hidden___33mES",filter:"filter____TjRh",confirm:"confirm___2zL5r",domain:"domain___2GpXP",edit:"edit___24iLc",center:"center___2L-P0",fail_detail_operation:"fail_detail_operation___11_i1",synchronous:"synchronous___3Cznp",synchronousTime:"synchronousTime___3EO_W",modalChange:"modalChange___W4bBS",cer_tips:"cer_tips___2GLUt",tab_hide_icon:"tab_hide_icon___3ZICZ"}},84020:function(Ve){Ve.exports={add_baseline_drawer:"add_baseline_drawer___-6P4f",server_provider:"server_provider___3VG8G"}},34134:function(Ve){Ve.exports={warp:"warp___2bW2h",batch:"batch___adrgq",pagination:"pagination___1RATm",hidden:"hidden___21j8X",filter:"filter___2N0s5",confirm:"confirm___22Qfr",domain:"domain___2FJjs",edit:"edit___1YVXH",center:"center___3neC4",fail_detail_operation:"fail_detail_operation___2JXjR",synchronous:"synchronous___3BWZC",synchronousTime:"synchronousTime___3CAwj",modalChange:"modalChange___2aniH",cer_tips:"cer_tips___1aH_F",tab_hide_icon:"tab_hide_icon___3pZw5"}},70883:function(){},21318:function(Ve,vt,r){"use strict";var rt=r(13254),J=r(14277),ft=r(20228),st=r(11382),m=r(9715),n=r(20526),Tt=r(43358),t=r(34041),at=r(39428),bt=r(3182),Qe=r(67294),gt=r(16917),pt=r(20009),St=r(90105),Be=r(85893),kt=function(){var Ue=(0,gt.YB)(),qe=Ue.formatMessage,et=(0,pt.UO)(),Te=et.ws_id,Ot=(0,gt.QT)(function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,St.tR)({keyword:u,scope:"aligroup",ws_id:Te,page_num:1,page_size:500})},{debounceInterval:300}),Ke=Ot.data,Kt=Ot.loading,Rt=Ot.run,Mt=function(){var u=(0,bt.Z)((0,at.Z)().mark(function jt(){var Ie,Q=arguments;return(0,at.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:Ie=Q.length>0&&Q[0]!==void 0?Q[0]:"",Rt(Ie);case 2:case"end":return it.stop()}},jt)}));return function(){return u.apply(this,arguments)}}();return Ke?(0,Be.jsx)(n.Z.Item,{name:"emp_id",label:"Owner",rules:[{required:!0,message:qe({id:"please.select"})}],children:(0,Be.jsx)(t.Z,{allowClear:!0,notFoundContent:Kt?(0,Be.jsx)(st.Z,{size:"small"}):(0,Be.jsx)(J.Z,{image:J.Z.PRESENTED_IMAGE_SIMPLE}),placeholder:qe({id:"select.owner"}),filterOption:!1,onSearch:Mt,style:{width:"100%"},showArrow:!0,showSearch:!0,listHeight:160,getPopupContainer:function(jt){return jt.parentNode},children:Ke==null?void 0:Ke.map(function(u,jt){return(0,Be.jsxs)(t.Z.Option,{value:u.emp_id,children:[u.last_name,"(",u.first_name===""?u.last_name:u.first_name,")",!1]},jt)})})}):(0,Be.jsx)(n.Z.Item,{label:"Owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,Be.jsx)(t.Z,{placeholder:"\u8BF7\u9009\u62E9Owner"})})};vt.Z=kt},99833:function(Ve,vt,r){"use strict";r.d(vt,{f:function(){return pt}});var rt=r(49111),J=r(19650),ft=r(11849),st=r(22385),m=r(89456),n=r(93224),Tt=r(67294),t=r(95949),at=r.n(t),bt=r(1870),Qe=r(85893),gt=["desc","title"],pt=function(Be){var kt=Be.desc,xt=Be.title,Ue=(0,n.Z)(Be,gt);return(0,Qe.jsxs)(J.Z,{children:[(0,Qe.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:xt}),(0,Qe.jsx)(m.Z,(0,ft.Z)((0,ft.Z)({overlayClassName:at().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},Ue),{},{title:kt,color:"#fff",children:(0,Qe.jsx)(bt.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},60751:function(Ve,vt,r){"use strict";var rt=r(57663),J=r(71577),ft=r(48736),st=r(27049),m=r(49111),n=r(19650),Tt=r(88983),t=r(47933),at=r(2824),bt=r(67294),Qe=r(32261),gt=r.n(Qe),pt=r(24480),St=r(16917),Be=r(85893),kt=function(Ue){var qe=Ue.list,et=Ue.confirm,Te=Ue.onConfirm,Ot=Ue.roleType,Ke=(0,St.YB)(),Kt=Ke.formatMessage,Rt=(0,bt.useState)(),Mt=(0,at.Z)(Rt,2),u=Mt[0],jt=Mt[1],Ie=function(c){jt(c.target.value)};return(0,Be.jsxs)("div",{className:gt().filter,children:[(0,Be.jsx)(t.ZP.Group,{onChange:Ie,value:u,children:(0,Be.jsx)(n.Z,{direction:"vertical",children:qe.map(function(Q){return(0,Be.jsx)(t.ZP,{className:gt().domain,value:Q.id,children:Ot==="role"?(0,pt.u)(Q.name,Kt):Q.name},Q.id)})})}),(0,Be.jsx)(st.Z,{style:{margin:"10px 0"}}),(0,Be.jsxs)("div",{className:gt().confirm,children:[(0,Be.jsx)(J.Z,{size:"small",type:"link",style:{border:"none"},onClick:function(){et==null||et(),Te(u)},children:(0,Be.jsx)(St._H,{id:"operation.ok"})}),(0,Be.jsx)(J.Z,{size:"small",type:"text",onClick:function(){et==null||et(),jt(void 0),Te(void 0)},children:(0,Be.jsx)(St._H,{id:"operation.reset"})})]})]})};vt.Z=kt},62548:function(Ve,vt,r){"use strict";r.r(vt),r.d(vt,{default:function(){return lr}});var rt=r(57663),J=r(71577),ft=r(18106),st=r(73272),m=r(11849),n=r(67294),Tt=r(87415),t=r(16917),at=r(20009),bt=r(57338),Qe=r(440),gt=r(20228),pt=r(11382),St=r(13062),Be=r(71230),kt=r(14781),xt=r(10664),Ue=r(66456),qe=r(79764),et=r(402),Te=r(97272),Ot=r(49111),Ke=r(19650),Kt=r(22385),Rt=r(89456),Mt=r(71153),u=r(39428),jt=r(34792),Ie=r(48086),Q=r(3182),c=r(2824),it=r(99069),$t=r(1870),Qt=r(8212),Ft=r(44378),Lt=r(68002),Se=r(2880),zt=r(38509),Bn=r(37763),sn=r.n(Bn),Kn=r(72647),$n=r(62986),ot=r.n($n),or=r(62350),At=r(24565),ur=r(71194),ut=r(50146),Dt=r(26606),lt=r(57119),cr=r(88983),Je=r(47933),e=r(85893),zn=function(g){var i=g.onOk,o=g.isBatch,s=(0,n.useState)(!1),p=(0,c.Z)(s,2),f=p[0],y=p[1],le=(0,n.useState)(0),w=(0,c.Z)(le,2),$=w[0],M=w[1],X=function(U){M(0),y(U)},O=function(){i($),y(!1)},W=function(){y(!0)},de=function(U){var q=U.target;return M(q.value)};return(0,e.jsxs)(e.Fragment,{children:[o?(0,e.jsx)(J.Z,{onClick:W,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}):(0,e.jsx)(J.Z,{style:{padding:0},size:"small",type:"link",onClick:W,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:ot().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),open:f,onOk:O,onCancel:function(){return X(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)(Be.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(Je.ZP.Group,{value:$,onChange:de,children:[(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},ln=zn,fr=r(77883),Ht=r(61241),pr=r(43358),We=r(34041),mr=r(63185),yt=r(9676),hr=r(48736),dn=r(27049),vr=r(47673),ze=r(4107),gr=r(9715),V=r(20526),Nn=(0,n.forwardRef)(function(T,g){var i=T.onOk,o=T.parentId,s=T.componentType,p=(0,t.YB)(),f=p.formatMessage,y=(0,n.useState)(""),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)(!1),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=V.Z.useForm(),te=(0,c.Z)(de,1),U=te[0],q=(0,n.useState)(""),pe=(0,c.Z)(q,2),ce=pe[0],C=pe[1],G=(0,n.useState)(!1),ye=(0,c.Z)(G,2),je=ye[0],we=ye[1],N=n.useState(!1),Ce=(0,c.Z)(N,2),Ee=Ce[0],B=Ce[1],H=n.useState(!1),Z=(0,c.Z)(H,2),se=Z[0],oe=Z[1],ne=n.useState([]),ve=(0,c.Z)(ne,2),be=ve[0],Le=ve[1],$e=function(){var K=(0,Q.Z)((0,u.Z)().mark(function b(L){var R,x,v;return(0,u.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,Se.Q9)(L);case 2:if(R=j.sent,x=R.data,v=R.code,v===200){j.next=7;break}return j.abrupt("return",Le([]));case 7:Le(x);case 8:case"end":return j.stop()}},b)}));return function(L){return K.apply(this,arguments)}}(),Ae=function(){W(!1),C(""),U.resetFields(),B(!1),oe(!1)};(0,n.useImperativeHandle)(g,function(){return{show:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=s==="suite"?{suite_id:o}:{case_id:o};$e(R),$(b),W(!0),JSON.stringify(L)!=="{}"&&U.setFieldsValue((0,m.Z)((0,m.Z)({},L),{},{direction:L.direction==="\u4E0A\u5347"?"increase":"decline"}))},hide:Ae}});var Ne=function(){U.validateFields().then(function(b){i(b)}).catch(function(b){return console.log(b)})},ge=function(b){b&&C(b)},Ze=function(){we(!0);var b=U.getFieldValue("name")||[];B((b==null?void 0:b.length)===be.length),oe(!!(b!=null&&b.length)&&(b==null?void 0:b.length)<be.length)},xe=function(){if(ce){var b=U.getFieldValue("name")||[];if(je)U.setFieldsValue({n:b});else{var L=Array.from(new Set(b.concat(ce.split(","))));U.setFieldsValue({name:L})}ce&&!be.map(function(R){var x=R.name;return x}).includes(ce)&&Le(function(R){return R.concat({name:ce})}),C(""),we(!1)}},Re=function(){C(""),U.setFieldsValue({name:""})},ae=function(b){var L=b.target,R=L.checked?be.map(function(x){return x.name}):[];U.setFieldsValue({name:R}),oe(!1),B(L.checked)},ue=function(b){B(b.length===be.length),oe(!!b.length&&b.length<be.length)};return(0,e.jsx)(Qe.Z,{maskClosable:!1,keyboard:!1,className:ot().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(w)}),width:480,onClose:Ae,open:O,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.Z,{onClick:Ae,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{onClick:Ne,type:"primary",htmlType:"submit",children:w.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(V.Z,{layout:"vertical",form:U,initialValues:{direction:"increase"},children:[~w.indexOf("edit")?(0,e.jsx)(V.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"please.enter"})})}):(0,e.jsx)(V.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsx)(We.Z,{mode:"multiple",allowClear:!0,onSearch:ge,onSelect:Ze,onBlur:xe,onClear:Re,onChange:ue,listHeight:150,dropdownRender:function(b){return(0,e.jsxs)(e.Fragment,{children:[b,(0,e.jsx)(dn.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"0 8px"},children:(0,e.jsx)(yt.Z,{checked:Ee,indeterminate:se,onChange:ae,children:"\u5168\u9009"})})]})},children:be.map(function(K){return(0,e.jsxs)(We.Z.Option,{value:K.name,children:[K.name,K.unit?"\uFF08".concat(K.unit,"\uFF09"):null]},K.name)})})}),(0,e.jsx)(V.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ht.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ht.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(We.Z,{placeholder:f({id:"please.select"}),children:[(0,e.jsx)(We.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(We.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),Xe=r(24480),Bt=(0,n.createContext)(null),on=(0,n.createContext)(null),Vn=function(g){var i=g.id,o=g.innerKey,s=g.componentType,p=(0,t.YB)(),f=p.formatMessage,y=n.useContext(Bt),le=y.setMetricDelInfo,w=y.metricDelInfo,$=y.selectedRowKeys,M=(0,n.useState)(1),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)(10),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)([]),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)(!0),je=(0,c.Z)(ye,2),we=je[0],N=je[1],Ce=(0,n.useState)(),Ee=(0,c.Z)(Ce,2),B=Ee[0],H=Ee[1],Z=(0,n.useState)(),se=(0,c.Z)(Z,2),oe=se[0],ne=se[1],ve=(0,n.useRef)(null),be=(0,t.QT)(Se.ge,{initialData:[]}),Le=be.data,$e=function(){var R=(0,Q.Z)((0,u.Z)().mark(function x(v){var I,j;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return G({data:[]}),N(!0),I={page_num:O,page_size:U},I[v]=i,a.next=6,(0,Se.b2)(I);case 6:j=a.sent,G(j),N(!1);case 9:case"end":return a.stop()}},x)}));return function(v){return R.apply(this,arguments)}}();(0,n.useEffect)(function(){$e(o==="1"?"case_id":"suite_id")},[O,U,oe]);var Ae=function(x){Le.forEach(function(v){v.name==x.domain&&(x.domain=v.id)}),H(x.id),ve.current.show("edit",x)},Ne=function(){var R=(0,Q.Z)((0,u.Z)().mark(function x(v){var I,j,h;return(0,u.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!B){l.next=6;break}return l.next=3,(0,Se.Of)(B,v);case 3:l.t0=l.sent,l.next=9;break;case 6:return l.next=8,(0,Se.WM)(v);case 8:l.t0=l.sent;case 9:I=l.t0,j=I.code,h=I.msg,j===200?(ve.current.hide(),ne(new Date().getTime())):(0,Xe.EV)(j,h);case 13:case"end":return l.stop()}},x)}));return function(v){return R.apply(this,arguments)}}(),ge=function(){var R=(0,Q.Z)((0,u.Z)().mark(function x(v,I){var j,h,a,l,d;return(0,u.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(j=v.object_type,h=v.name,o!=="1"){_.next=7;break}return _.next=4,(0,Se.G6)(v.id);case 4:_.t0=_.sent,_.next=10;break;case 7:return _.next=9,(0,Se.G6)(v.id,{is_sync:I,object_id:i,object_type:j,name:h});case 9:_.t0=_.sent;case 10:a=_.t0,l=a.code,d=a.msg,l===200?(console.log("ok"),Ie.default.success(f({id:"operation.success"})),ne(new Date().getTime())):(0,Xe.EV)(l,d);case 14:case"end":return _.stop()}},x)}));return function(v,I){return R.apply(this,arguments)}}(),Ze=function(){H(void 0),ve.current.show("new")},xe=function(x){var v=f({id:"TestSuite.is_synchronize.all.conf"}),I=f({id:"operation.yes"}),j=f({id:"operation.no"});ut.Z.confirm({title:v,icon:(0,e.jsx)(lt.Z,{}),okText:I,cancelText:j,maskClosable:!1,onOk:function(){Ne((0,m.Z)((0,m.Z)({},x),{},{is_sync:1}))},onCancel:function(){Ne((0,m.Z)((0,m.Z)({},x),{},{is_sync:0}))}})},Re=function(){var R=(0,Q.Z)((0,u.Z)().mark(function x(v){var I;return(0,u.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:I=(0,m.Z)((0,m.Z)({},v),{object_id:i,object_type:o==="1"?"case":"suite"}),o==="1"?Ne(I):xe(I);case 2:case"end":return h.stop()}},x)}));return function(v){return R.apply(this,arguments)}}(),ae=function(x){var v=x.row;return o==="1"?(0,e.jsx)(At.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return ge(v)},overlayStyle:{width:"224px"},children:(0,e.jsx)(J.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(ln,{onOk:function(j){return ge(v,j)}})},ue=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(x){return x&&Number(x).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(x){return x&&Number(x).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)(Be.Z,{style:{width:"100%"},justify:"space-between",children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",size:"small",onClick:function(){return Ze()},children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:107,fixed:"right",render:function(x,v){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Te.Z.Link,{onClick:function(){return Ae(v)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(ae,{row:v})]})}}],K=function(x,v){W(x),q(v)},b=function(x){le({innerKey:o,object_id:i,selectedRowKeys:x,refresh:function(){return $e(o==="1"?"case_id":"suite_id")}})},L={selectedRowKeys:w==null?void 0:w.selectedRowKeys,getCheckboxProps:function(){return{disabled:!!($!=null&&$.length)}},onChange:b};return(0,e.jsxs)("div",{className:ot().warp,children:[(0,e.jsx)(Dt.Z,{columns:ue,scroll:{x:670},rowKey:"id",name:"sys-suite-manage-basic-metric",loading:we,dataSource:C.data,rowSelection:L,page:C.page_num,totalPage:C.total_page,total:C.total,pageSize:C.page_size,handlePage:K}),(0,e.jsx)(Nn,{onOk:Re,ref:ve,parentId:i,componentType:s})]},i)},un=Vn,Xt=(0,n.forwardRef)(function(T,g){var i=T.onOk,o=(0,n.useState)(""),s=(0,c.Z)(o,2),p=s[0],f=s[1],y=(0,n.useState)(!1),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)({}),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useCallback)(function(){f(""),$(!1),W({})},[]);(0,n.useImperativeHandle)(g,function(){return{show:function(pe){$(!0),f(pe.doc),W(pe)},hide:de}});var te=function(){i((0,m.Z)((0,m.Z)({},O),{},{doc:p}))},U=(0,n.useCallback)(function(q){var pe=q.target;return f(pe.value)},[]);return(0,e.jsx)(Qe.Z,{maskClosable:!1,keyboard:!1,width:376,title:(0,e.jsx)(t._H,{id:"TestSuite.description.details"}),onClose:de,visible:w,footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.Z,{onClick:de,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{onClick:te,type:"primary",htmlType:"submit",children:(0,e.jsx)(t._H,{id:"operation.ok"})})]}),children:(0,e.jsx)(ze.Z.TextArea,{style:{height:"100%"},rows:6,value:p,onChange:U})})}),Ct=r(46167),Wn=function(){var g=(0,at.TH)(),i=g.query,o=i.test_type,s=(0,n.useState)([]),p=(0,c.Z)(s,2),f=p[0],y=p[1],le=function(){var w=(0,Q.Z)((0,u.Z)().mark(function $(){var M,X;return(0,u.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,Se.ge)({test_type:o});case 2:M=W.sent,X=M.data,y(X||[]);case 5:case"end":return W.stop()}},$)}));return function(){return w.apply(this,arguments)}}();return(0,n.useEffect)(function(){le()},[]),f},Nt=function(){return(0,n.useContext)(on)},Un=function(g,i){var o=g.onOk,s=n.useState(!1),p=(0,c.Z)(s,2),f=p[0],y=p[1],le=n.useState(),w=(0,c.Z)(le,2),$=w[0],M=w[1];n.useImperativeHandle(i,function(){return{show:function(de){de&&M(de),y(!0)}}});var X=function(){o==null||o($),y(!1)},O=function(){y(!1)};return(0,e.jsx)(ut.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:f,onCancel:O,footer:[(0,e.jsx)(J.Z,{onClick:X,type:"danger",children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:O,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsx)(Te.Z.Text,{type:"danger",children:(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)(lt.Z,{}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})})},cn=n.forwardRef(Un),Yn=function(g,i){var o=g.onOk,s=g.basePath,p=g.okText,f=g.onCancel,y=(0,t.YB)(),le=y.formatMessage,w=n.useState(!1),$=(0,c.Z)(w,2),M=$[0],X=$[1],O=n.useState(),W=(0,c.Z)(O,2),de=W[0],te=W[1];n.useImperativeHandle(i,function(){return{show:function(C){C&&te(C),X(!0)}}});var U=function(){o==null||o(de),X(!1)},q=function(){X(!1),f==null||f()},pe=function(){var ce=(0,Q.Z)((0,u.Z)().mark(function C(){var G,ye,je;return(0,u.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(de){N.next=2;break}return N.abrupt("return");case 2:return G=de.name,ye=de.id,N.next=5,(0,Xe.MR)({name:G,id:ye});case 5:je=N.sent,je&&window.open("".concat(s||"/refenerce/suite/","?pk=").concat(je));case 7:case"end":return N.stop()}},C)}));return function(){return ce.apply(this,arguments)}}();return(0,e.jsx)(ut.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:M,onCancel:q,footer:[(0,e.jsx)(J.Z,{onClick:U,type:"danger",children:p||(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:q,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:600,children:(0,e.jsxs)(Ke.Z,{style:{width:"100%"},direction:"vertical",children:[(0,e.jsx)(Te.Z.Text,{type:"danger",children:(0,e.jsxs)(Ke.Z,{align:"start",children:[(0,e.jsx)(lt.Z,{}),le({id:"TestSuite.suite.delete.warning"},{data:de==null?void 0:de.name})]})}),(0,e.jsx)(Te.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)(Te.Z.Link,{onClick:pe,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})},qt=n.forwardRef(Yn),Ye=r(10753),fn=function(g){var i=g.style;return g.var&&g.var!="[]"?JSON.parse(g.var).map(function(o){var s=o.name,p=o.val,f=o.des;return(0,e.jsx)(Te.Z.Text,{style:i,children:"".concat(s,"=").concat(p||"-",",").concat(f||"-",";")})}):"-"},Gn=(0,n.forwardRef)(function(T,g){var i=T.id,o=(0,t.YB)(),s=o.formatMessage,p=(0,at.TH)(),f=p.query,y=Nt(),le=y.domainList,w=st.Z.TabPane,$=(0,n.useContext)(Bt),M=$.setSelectedRowKeys,X=$.setSelectedRow,O=$.selectedRowKeys,W=$.confDrawerShow,de=$.confRefresh,te=$.setConfRefresh,U=$.metricDelInfo,q=(0,n.useState)("1"),pe=(0,c.Z)(q,2),ce=pe[0],C=pe[1],G=(0,n.useState)(1),ye=(0,c.Z)(G,2),je=ye[0],we=ye[1],N=(0,n.useState)(10),Ce=(0,c.Z)(N,2),Ee=Ce[0],B=Ce[1],H=(0,n.useState)([]),Z=(0,c.Z)(H,2),se=Z[0],oe=Z[1],ne=(0,n.useState)(!0),ve=(0,c.Z)(ne,2),be=ve[0],Le=ve[1],$e=(0,n.useState)([]),Ae=(0,c.Z)($e,2),Ne=Ae[0],ge=Ae[1],Ze=(0,n.useRef)(null),xe=(0,n.useRef)(null),Re=(0,n.useRef)(null),ae=function(){var a=(0,Q.Z)((0,u.Z)().mark(function l(){var d,E;return(0,u.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return oe({data:[]}),ge([]),Le(!0),d={suite_id:i,page_num:je,page_size:Ee},me.next=6,(0,Se.Sb)(d);case 6:E=me.sent,oe(E),Le(!1);case 9:case"end":return me.stop()}},l)}));return function(){return a.apply(this,arguments)}}();(0,n.useImperativeHandle)(g,function(){return{refresh:function(l){var d=l.refreshId;i===d&&ae()}}}),(0,n.useEffect)(function(){ae()},[je,Ee,de]);var ue=function(l){l.var=l.var?JSON.parse(l.var):[{name:"",val:"",des:""}],l.is_default=l.is_default?1:0;for(var d=l.domain_id_list===""?[]:l.domain_id_list.split(","),E=[],_=0;_<d.length;_++)E.push(Number.parseInt(d[_]));l.domain_list_str=E,le.forEach(function(me){me.name==l.domain&&(l.domain=me.id)}),W("edit",l)},K=function(){var a=(0,Q.Z)((0,u.Z)().mark(function l(d){var E,_,me,De;return(0,u.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,(0,Ct.Ob)({flag:"pass",case_id_list:d.id});case 2:me=Oe.sent,De=me.code,De===200?(E=xe.current)===null||E===void 0||E.show(d):(_=Re.current)===null||_===void 0||_.show(d);case 5:case"end":return Oe.stop()}},l)}));return function(d){return a.apply(this,arguments)}}(),b=function(l){C(l),ce!="1"&&te(!de)},L=function(){var a=(0,Q.Z)((0,u.Z)().mark(function l(d){return(0,u.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,Se.tz)(d.id);case 2:Ie.default.success(s({id:"operation.success"})),te(!de);case 4:case"end":return _.stop()}},l)}));return function(d){return a.apply(this,arguments)}}(),R=function(){W("new",{batch:!1,test_suite_id:i})},x=+status==0?{selectedRowKeys:O,getCheckboxProps:function(){var l;return{disabled:!!(U!=null&&(l=U.selectedRowKeys)!==null&&l!==void 0&&l.length)}},onChange:function(l,d){X(d),M(l)}}:void 0,v=function(){var a=(0,Q.Z)((0,u.Z)().mark(function l(d){return(0,u.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:ge([d.id]);case 1:case"end":return _.stop()}},l)}));return function(d){return a.apply(this,arguments)}}(),I=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:{showTitle:!1},render:function(l,d){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:d.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(l){return(0,e.jsx)(e.Fragment,{children:l||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",ellipsis:!0,render:function(l){return(0,e.jsx)(e.Fragment,{children:l||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(l,d){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:(0,e.jsx)(Ke.Z,{direction:"vertical",children:fn((0,m.Z)((0,m.Z)({},d),{},{style:{color:"#fff"}}))})},children:fn(d)})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),ellipsis:!0,width:100,key:"desc",render:function(l,d){return(0,e.jsx)(zt.Z,{title:d.doc,width:70,isCode:!0,children:(0,e.jsx)(Qt.Z,{className:ot().edit,onClick:function(){return Ze.current.show(d)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(l,d){return d.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(l,d){return d.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(l,d){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:d.gmt_created})}},{title:(0,e.jsxs)(Be.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",size:"small",onClick:R,children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"option",width:140,fixed:"right",render:function(l,d){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Te.Z.Link,{onClick:function(){return ue((0,m.Z)({},d))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Te.Z.Link,{onClick:function(){return K((0,m.Z)({},d))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],j=function(l,d){we(l),B(d)},h=function(){var a=(0,Q.Z)((0,u.Z)().mark(function l(d){var E,_,me;return(0,u.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,(0,Se.Ft)(d.id,{doc:d.doc});case 2:E=_e.sent,_=E.code,me=E.msg,_===200?(Ie.default.success(s({id:"operation.success"})),Ze.current.hide(),te(!de)):(0,Xe.EV)(_,me);case 6:case"end":return _e.stop()}},l)}));return function(d){return a.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(ot().warp," case_table_wrapper"),children:[f.test_type==="performance"&&(0,e.jsxs)(st.Z,{defaultActiveKey:"1",activeKey:ce,onChange:function(l){return b(l)},className:ot().caseTabCls,children:[(0,e.jsx)(w,{tab:"Test Conf"},"1"),(0,e.jsx)(w,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),ce=="1"?(0,e.jsx)(Dt.Z,{columns:I,name:"sys-suite-manage-case",scroll:{x:1400},rowKey:function(l){return l.id},loading:be,dataSource:(se==null?void 0:se.data)||[],page:se.page_num,rowSelection:x,totalPage:se.total_page,total:se.total,pageSize:se.page_size,handlePage:j,className:ot().caseTableCls,expandable:f.test_type=="performance"?{expandedRowRender:function(l){return(0,e.jsx)(un,{componentType:"case",id:l.id,innerKey:ce})},onExpand:function(l,d){l?v(d):ge([])},indentSize:0,expandedRowKeys:Ne,expandIcon:function(l){var d=l.expanded,E=l.onExpand,_=l.record;return d?(0,e.jsx)(Ft.Z,{onClick:function(De){return E(_,De)}}):(0,e.jsx)(Lt.Z,{onClick:function(De){return E(_,De)}})}}:{}}):(0,e.jsx)(un,{componentType:"suite",id:i,innerKey:ce}),(0,e.jsx)(Xt,{ref:Ze,onOk:h}),(0,e.jsx)(qt,{basePath:"/refenerce/conf/",ref:xe,onOk:L}),(0,e.jsx)(cn,{ref:Re,onOk:L})]})}),Jn=r(71217),Vt=r.n(Jn),Qn=function(g){var i=g.list,o=g.confirm,s=g.onConfirm,p=(0,n.useState)([]),f=(0,c.Z)(p,2),y=f[0],le=f[1],w=(0,n.useState)(!1),$=(0,c.Z)(w,2),M=$[0],X=$[1],O=(0,n.useState)(!1),W=(0,c.Z)(O,2),de=W[0],te=W[1],U=function(C){te(!!C.length&&C.length<i.length),le(C),X(C.length===i.length)},q=i.map(function(ce){return ce.id}),pe=function(C){le(C.target.checked?q:[]),X(C.target.checked),te(!1)};return(0,e.jsxs)("div",{className:Vt().filter,children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxHeight:280,overflow:"auto",gap:4},children:[(0,e.jsx)(yt.Z,{indeterminate:de,className:Vt().domain,onChange:pe,checked:M,children:(0,e.jsx)(t._H,{id:"operation.select.all"})}),(0,e.jsx)(yt.Z.Group,{onChange:U,value:y,children:(0,e.jsx)(Ke.Z,{direction:"vertical",size:4,children:i.map(function(ce){return(0,e.jsx)(yt.Z,{className:Vt().domain,value:ce.id,children:ce.name},ce.id)})})})]}),(0,e.jsx)(dn.Z,{style:{margin:"10px 0"}}),(0,e.jsxs)("div",{className:Vt().confirm,children:[(0,e.jsx)(J.Z,{size:"small",type:"link",onClick:function(){o==null||o();var C=y&&y.join(",");s(C)},children:(0,e.jsx)(t._H,{id:"operation.ok"})}),(0,e.jsx)(J.Z,{size:"small",type:"text",style:{border:"none"},onClick:function(){o==null||o(),le([]),s(void 0),X(!1),te(!1)},children:(0,e.jsx)(t._H,{id:"operation.reset"})})]})]})},pn=Qn,en=r(39067),Wt=r(3820),mn=r(60751),xr=r(89032),ct=r(15746),hn=r(21318),tn=r(99833),Xn=(0,n.forwardRef)(function(T,g){var i=T.onOk,o=T.wsList,s=(0,t.YB)(),p=s.formatMessage,f=(0,at.TH)(),y=f.query,le=y.test_type||"functional",w=V.Z.useForm(),$=(0,c.Z)(w,1),M=$[0],X=Nt(),O=X.domainList,W=X.runList,de=X.viewType,te=(0,n.useState)(!1),U=(0,c.Z)(te,2),q=U[0],pe=U[1],ce=(0,n.useState)(""),C=(0,c.Z)(ce,2),G=C[0],ye=C[1],je=(0,n.useState)(),we=(0,c.Z)(je,2),N=we[0],Ce=we[1],Ee=(0,n.useState)(!1),B=(0,c.Z)(Ee,2),H=B[0],Z=B[1],se=(0,n.useState)({}),oe=(0,c.Z)(se,2),ne=oe[0],ve=oe[1],be=V.Z.useWatch("visible_range",M),Le=n.useRef(),$e=function(){pe(!1),Z(!1),M.resetFields(),Ce(void 0),ye(""),ve({})};(0,n.useImperativeHandle)(g,function(){return{show:function(ue){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pe(!0),Z(!1),K&&ve(K),!1)var b;else M.setFieldsValue((0,m.Z)((0,m.Z)({},K),{},{test_type:le,owner:K.owner_name,certificated:K.certificated?1:0}))},hide:$e}});var Ae=function(){var ae=(0,Q.Z)((0,u.Z)().mark(function ue(K){var b,L,R,x;return(0,u.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!K.name||K.name.replace(/\s+/g,"")=="")){I.next=4;break}return ye("error"),Ce(p({id:"please.enter"})),I.abrupt("return");case 4:if(K.name=K.name.replace(/\s+/g,""),K.owner===ne.owner_name&&(K.owner=ne.owner),K.domain_list_str=K.domain_list_str.join(),Z(!0),!(ne!=null&&ne.id)){I.next=15;break}return I.next=12,(0,Se.Fu)(ne==null?void 0:ne.id,K);case 12:I.t0=I.sent,I.next=18;break;case 15:return I.next=17,(0,Se.xk)(K);case 17:I.t0=I.sent;case 18:if(L=I.t0,R=L.code,x=L.msg,Z(!1),R===200){I.next=24;break}return I.abrupt("return",(0,Xe.EV)(R,x));case 24:$e(),i==null||i();case 26:case"end":return I.stop()}},ue)}));return function(K){return ae.apply(this,arguments)}}(),Ne=function(){var ae=(0,Q.Z)((0,u.Z)().mark(function ue(){return(0,u.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!H){b.next=2;break}return b.abrupt("return");case 2:M.validateFields().then(function(){var L=(0,Q.Z)((0,u.Z)().mark(function R(x){var v,I,j,h,a,l,d;return(0,u.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:JSON.stringify(ne),_.next=13;break;case 9:if(l=_.sent,d=l.code,d!==200){_.next=13;break}return _.abrupt("return",(a=Le.current)===null||a===void 0?void 0:a.show((0,m.Z)((0,m.Z)({},ne),{},{path:"visible_range",visible_range:j})));case 13:Ae(x);case 14:case"end":return _.stop()}},R)}));return function(R){return L.apply(this,arguments)}}()).catch(function(L){(!L.values.name||L.values.name.replace(/\s+/g,"")=="")&&(ye("error"),Ce(p({id:"please.enter"}))),Z(!1)});case 3:case"end":return b.stop()}},ue)}));return function(){return ae.apply(this,arguments)}}(),ge=function(){Z(!1)},Ze=function(){Ce(void 0),ye("")},xe=(0,n.useMemo)(function(){var ae=JSON.stringify(ne)!=="{}"?y.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.edit"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.edit"}):y.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.new"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.new"});return ae},[y,ne]),Re=(0,n.useMemo)(function(){return JSON.stringify(ne)!=="{}"?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})},[]);return(0,e.jsxs)(Qe.Z,{maskClosable:!1,keyboard:!1,className:ot().warp,forceRender:!0,destroyOnClose:!0,title:xe,width:376,onClose:$e,open:q,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.Z,{onClick:$e,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{onClick:Ne,loading:H,type:"primary",htmlType:"submit",children:Re})]}),children:[(0,e.jsx)(V.Z,{layout:"vertical",form:M,initialValues:{is_default:1,view_type:"Type1",visible_range:"*"},children:(0,e.jsxs)(Be.Z,{gutter:16,children:[(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"name",label:"Test Suite",validateStatus:G,help:N,rules:[{required:!0,message:p({id:"please.enter"})}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:p({id:"please.enter"}),onFocus:ge,onChange:Ze})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"test_type",label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),rules:[{required:!0,message:p({id:"please.select"})}],children:(0,e.jsxs)(We.Z,{placeholder:p({id:"please.select"}),disabled:!0,getPopupContainer:function(ue){return ue.parentNode},children:[(0,e.jsx)(We.Z.Option,{value:"functional",children:(0,e.jsx)(t._H,{id:"functional.test"})}),(0,e.jsx)(We.Z.Option,{value:"performance",children:(0,e.jsx)(t._H,{id:"performance.test"})})]})})}),!1,(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"run_mode",label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),rules:[{required:!0,message:p({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:p({id:"please.select"}),getPopupContainer:function(ue){return ue.parentNode},children:W.map(function(ae){return(0,e.jsx)(We.Z.Option,{value:ae.id,children:ae.name},ae.id)})})})}),y.test_type==="performance"&&(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"view_type",label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),children:(0,e.jsx)(We.Z,{placeholder:p({id:"please.select"}),children:de.map(function(ae){return(0,e.jsx)(We.Z.Option,{value:ae.id,children:ae.name},ae.id)})})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:[{required:!0,message:p({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:p({id:"please.select"}),mode:"multiple",getPopupContainer:function(ue){return ue.parentNode},filterOption:function(ue,K){return K.label.toLowerCase().indexOf(ue.toLowerCase())>=0},allowClear:!0,options:O.map(function(ae){return{value:ae.id,label:ae.name}})})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(hn.Z,{})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"is_default",label:(0,e.jsx)(tn.f,{title:p({id:"TestSuite.default.case"}),desc:p({id:"TestSuite.auto.join.workspace"})}),rules:[{required:!0,message:p({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"certificated",label:(0,e.jsx)(tn.f,{title:p({id:"TestSuite.is_certified"}),desc:p({id:"TestSuite.is_certified.ps"})}),rules:[{required:!0,message:p({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"doc",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:p({id:"TestSuite.please.enter.desc"})})})}),(0,e.jsx)(ct.Z,{span:24,children:(0,e.jsx)(V.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:p({id:"please.enter"})})})})]})}),(0,e.jsx)(qt,{ref:Le,onOk:Ae,onCancel:function(){Z(!1)},okText:(0,e.jsx)(t._H,{id:"TestSuite.tips.okText"})})]})}),jr=r(38663),_r=r(70883),Ut=r(22122),qn=r(96156),ea=r(6610),ta=r(5991),na=r(46070),aa=r(51814),vn=r(77608),ra=r(10379),sa=r(90484),ia=r(94184),la=r.n(ia),gn=r(35193),da=r(10366),xn=r(53124),oa=r(85061),jn=r(96523);function ua(T){var g,i=function(p){return function(){g=null,T.apply(void 0,(0,oa.Z)(p))}},o=function(){if(g==null){for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];g=(0,jn.Z)(i(f))}};return o.cancel=function(){jn.Z.cancel(g),g=null},o}function _n(){return function(g,i,o){var s=o.value,p=!1;return{configurable:!0,get:function(){if(p||this===g.prototype||this.hasOwnProperty(i))return s;var y=ua(s.bind(this));return p=!0,Object.defineProperty(this,i,{value:y,configurable:!0,writable:!0}),p=!1,y}}}}var ca=r(45883);function Yt(T){return T!==window?T.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function Zn(T,g,i){if(i!==void 0&&g.top>T.top-i)return i+g.top}function Sn(T,g,i){if(i!==void 0&&g.bottom<T.bottom+i){var o=window.innerHeight-g.bottom;return i+o}}var yn=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],Et=[];function Zr(){return Et}function Cn(T,g){if(!!T){var i=Et.find(function(o){return o.target===T});i?i.affixList.push(g):(i={target:T,affixList:[g],eventHandlers:{}},Et.push(i),yn.forEach(function(o){i.eventHandlers[o]=(0,ca.Z)(T,o,function(){i.affixList.forEach(function(s){s.lazyUpdatePosition()})})}))}}function wn(T){var g=Et.find(function(i){var o=i.affixList.some(function(s){return s===T});return o&&(i.affixList=i.affixList.filter(function(s){return s!==T})),o});g&&g.affixList.length===0&&(Et=Et.filter(function(i){return i!==g}),yn.forEach(function(i){var o=g.eventHandlers[i];o&&o.remove&&o.remove()}))}function fa(T,g,i){return g=(0,vn.Z)(g),(0,na.Z)(T,(0,aa.Z)()?Reflect.construct(g,i||[],(0,vn.Z)(T).constructor):g.apply(T,i))}var Tn=function(T,g,i,o){var s=arguments.length,p=s<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,i):o,f;if((typeof Reflect=="undefined"?"undefined":(0,sa.Z)(Reflect))==="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(T,g,i,o);else for(var y=T.length-1;y>=0;y--)(f=T[y])&&(p=(s<3?f(p):s>3?f(g,i,p):f(g,i))||p);return s>3&&p&&Object.defineProperty(g,i,p),p};function pa(){return typeof window!="undefined"?window:null}var Pt;(function(T){T[T.None=0]="None",T[T.Prepare=1]="Prepare"})(Pt||(Pt={}));var Gt=function(T){(0,ra.Z)(g,T);function g(){var i;return(0,ea.Z)(this,g),i=fa(this,g,arguments),i.state={status:Pt.None,lastAffix:!1,prevTarget:null},i.getOffsetTop=function(){var o=i.props,s=o.offsetBottom,p=o.offsetTop;return s===void 0&&p===void 0?0:p},i.getOffsetBottom=function(){return i.props.offsetBottom},i.savePlaceholderNode=function(o){i.placeholderNode=o},i.saveFixedNode=function(o){i.fixedNode=o},i.measure=function(){var o=i.state,s=o.status,p=o.lastAffix,f=i.props.onChange,y=i.getTargetFunc();if(!(s!==Pt.Prepare||!i.fixedNode||!i.placeholderNode||!y)){var le=i.getOffsetTop(),w=i.getOffsetBottom(),$=y();if(!!$){var M={status:Pt.None},X=Yt($),O=Yt(i.placeholderNode),W=Zn(O,X,le),de=Sn(O,X,w);O.top===0&&O.left===0&&O.width===0&&O.height===0||(W!==void 0?(M.affixStyle={position:"fixed",top:W,width:O.width,height:O.height},M.placeholderStyle={width:O.width,height:O.height}):de!==void 0&&(M.affixStyle={position:"fixed",bottom:de,width:O.width,height:O.height},M.placeholderStyle={width:O.width,height:O.height}),M.lastAffix=!!M.affixStyle,f&&p!==M.lastAffix&&f(M.lastAffix),i.setState(M))}}},i.prepareMeasure=function(){if(i.setState({status:Pt.Prepare,affixStyle:void 0,placeholderStyle:void 0}),!1)var o},i}return(0,ta.Z)(g,[{key:"getTargetFunc",value:function(){var o=this.context.getTargetContainer,s=this.props.target;return s!==void 0?s:o!=null?o:pa}},{key:"componentDidMount",value:function(){var o=this,s=this.getTargetFunc();s&&(this.timeout=setTimeout(function(){Cn(s(),o),o.updatePosition()}))}},{key:"componentDidUpdate",value:function(o){var s=this.state.prevTarget,p=this.getTargetFunc(),f=(p==null?void 0:p())||null;s!==f&&(wn(this),f&&(Cn(f,this),this.updatePosition()),this.setState({prevTarget:f})),(o.offsetTop!==this.props.offsetTop||o.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),wn(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var o=this.getTargetFunc(),s=this.state.affixStyle;if(o&&s){var p=this.getOffsetTop(),f=this.getOffsetBottom(),y=o();if(y&&this.placeholderNode){var le=Yt(y),w=Yt(this.placeholderNode),$=Zn(w,le,p),M=Sn(w,le,f);if($!==void 0&&s.top===$||M!==void 0&&s.bottom===M)return}}this.prepareMeasure()}},{key:"render",value:function(){var o=this,s=this.state,p=s.affixStyle,f=s.placeholderStyle,y=this.props,le=y.affixPrefixCls,w=y.children,$=la()((0,qn.Z)({},le,!!p)),M=(0,da.Z)(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls"]);return n.createElement(gn.Z,{onResize:function(){o.updatePosition()}},n.createElement("div",(0,Ut.Z)({},M,{ref:this.savePlaceholderNode}),p&&n.createElement("div",{style:f,"aria-hidden":"true"}),n.createElement("div",{className:$,ref:this.saveFixedNode,style:p},n.createElement(gn.Z,{onResize:function(){o.updatePosition()}},w))))}}]),g}(n.Component);Gt.contextType=xn.E_,Tn([_n()],Gt.prototype,"updatePosition",null),Tn([_n()],Gt.prototype,"lazyUpdatePosition",null);var ma=n.forwardRef(function(T,g){var i=T.prefixCls,o=n.useContext(xn.E_),s=o.getPrefixCls,p=s("affix",i),f=(0,Ut.Z)((0,Ut.Z)({},T),{affixPrefixCls:p});return n.createElement(Gt,(0,Ut.Z)({},f,{ref:g}))}),bn=ma,kn=r(20310),Hn=r(12788),In,ha=(0,Hn.ZP)(Be.Z)(In||(In=(0,kn.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),va=function(){var g=(0,t.YB)(),i=g.formatMessage,o=(0,n.useContext)(Bt),s=o.selectedRowKeys,p=o.setSelectedRowKeys,f=o.selectedRow,y=o.confDrawerShow,le=o.confRefresh,w=o.setConfRefresh,$=(0,n.useState)(!1),M=(0,c.Z)($,2),X=M[0],O=M[1],W=(0,n.useState)(!1),de=(0,c.Z)(W,2),te=de[0],U=de[1],q=function(){var G=(0,Q.Z)((0,u.Z)().mark(function ye(){var je;return(0,u.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,Ct.Ob)({flag:"pass",case_id_list:s.join(",")});case 2:je=N.sent,je.code===200?O(!0):U(!0);case 4:case"end":return N.stop()}},ye)}));return function(){return G.apply(this,arguments)}}(),pe=function(){var G=(0,Q.Z)((0,u.Z)().mark(function ye(){var je;return(0,u.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return je={id_list:s.join(",")},p([]),N.next=4,(0,Se.TZ)(je);case 4:w(!le);case 5:case"end":return N.stop()}},ye)}));return function(){return G.apply(this,arguments)}}(),ce=function(){y("batch.edit",{batch:!0})},C=function(){var G=(0,Q.Z)((0,u.Z)().mark(function ye(){var je,we;return(0,u.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:je=[],f.map(function(Ee){return je.push(Ee.name)}),we=(0,Xe.MR)({name:je.join(","),id:s.join(",")}),we&&window.open("/refenerce/conf/pk=".concat(we));case 4:case"end":return Ce.stop()}},ye)}));return function(){return G.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(bn,{offsetBottom:16,children:(0,e.jsxs)(ha,{justify:"space-between",children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(yt.Z,{indeterminate:!0}),(0,e.jsx)(Te.Z.Text,{children:i({id:"selected.item"},{data:s.length})}),(0,e.jsx)(J.Z,{type:"link",onClick:function(){return p([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:q,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(J.Z,{type:"primary",onClick:ce,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})}),(0,e.jsxs)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(J.Z,{onClick:pe,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return O(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,visible:X,onCancel:function(){return O(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4}}),(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:C,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,visible:te,onCancel:function(){return U(!1)},footer:[(0,e.jsx)(J.Z,{onClick:pe,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return U(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})]})},ga=va,Sr=r(20136),Dn=r(55241),xa=r(93224),On=r(73171),ja=["var"],_a=function(g){var i;if(!!g){var o=g;Object.prototype.toString.call(g)==="[object String]"&&(o=JSON.parse(g));var s=(i=o)===null||i===void 0?void 0:i.filter(function(p){var f=p.name,y=p.val;return f&&y});if(s.length>0)return JSON.stringify(s)}},Za=function(g,i){var o=g.onOk,s=g.selectedRowKeys,p=(0,t.YB)(),f=p.formatMessage,y=(0,at.TH)(),le=y.query,w={repeat:le.test_type==="performance"?3:1,timeout:3600,is_default:1,var:[{name:"",val:"",des:""}]},$=Nt(),M=$.domainList,X=V.Z.useForm(),O=(0,c.Z)(X,1),W=O[0],de=(0,n.useState)(!1),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)(""),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)(!0),je=(0,c.Z)(ye,2),we=je[0],N=je[1],Ce=(0,n.useState)({batch:!1}),Ee=(0,c.Z)(Ce,2),B=Ee[0],H=Ee[1],Z=(0,n.useState)(!1),se=(0,c.Z)(Z,2),oe=se[0],ne=se[1],ve=function(){H({batch:!1}),N(!0),q(!1),G(""),W.resetFields(),ne(!1)};(0,n.useImperativeHandle)(i,function(){return{show:function(Ze,xe){if(Ze&&G(Ze),H(xe),q(!0),!xe.batch){var Re=(0,m.Z)((0,m.Z)((0,m.Z)({},w),xe),{},{certificated:xe.certificated?1:0});M.length&&~Ze.indexOf("new")&&M.forEach(function(ae){var ue=ae.id,K=ae.name;K==="\u5176\u4ED6"&&(Re.domain_list_str=[ue])}),W.setFieldsValue(Re)}},hide:ve}});var be=function(){oe||(ne(!0),W.validateFields().then(function(){var Ze=(0,Q.Z)((0,u.Z)().mark(function xe(Re){var ae,ue,K,b,L,R,x,v,I,j;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ae=Re.var,ue=(0,xa.Z)(Re,ja),K=B.test_suite_id,b=B.id,L=_a(ae),R=(0,m.Z)((0,m.Z)({},ue),{},{id:b,test_suite_id:K,domain_list_str:ue.domain_list_str?ue.domain_list_str.join():void 0}),!B.batch){a.next=10;break}return x=(0,m.Z)((0,m.Z)({},R),{},{case_id_list:s.join(","),var:L}),a.next=8,(0,Se.fF)(x);case 8:a.next=28;break;case 10:if(R.var=L||JSON.stringify([]),R.repeat=R.repeat||0,!b){a.next=18;break}return a.next=15,(0,Se.Ft)(b,R);case 15:a.t0=a.sent,a.next=21;break;case 18:return a.next=20,(0,Se.C7)(R);case 20:a.t0=a.sent;case 21:if(v=a.t0,I=v.code,j=v.msg,I!==201){a.next=26;break}throw f({id:"TestSuite.repeated.suite.name"});case 26:if(I===200){a.next=28;break}throw j;case 28:ve(),o();case 30:case"end":return a.stop()}},xe)}));return function(xe){return Ze.apply(this,arguments)}}()).catch(function(Ze){console.log(Ze),Object.prototype.toString.call(Ze)==="[object String]"&&W.setFields([{name:"name",errors:[Ze]}]),ne(!1)}))},Le=function(Ze,xe){try{var Re=JSON.parse(Ze);if(Object.prototype.toString.call(Re)==="[object Array]"){for(var ae=Re.length,ue=0;ue<ae;ue++)if(Object.prototype.toString.call(Re[ue])!=="[object Object]"){xe(f({id:"TestSuite.data.format.error"}));return}}else{xe(f({id:"TestSuite.data.format.error"}));return}}catch(K){xe(f({id:"TestSuite.data.format.error"}));return}},$e=function(Ze,xe,Re){Le(xe,Re),Re()},Ae=function(){var Ze=W.getFieldValue("var");we||Le(Ze,Ie.default.error),N(!we),W.setFieldsValue({var:we?JSON.stringify(Ze.map(function(xe){return Object.fromEntries(Object.entries(xe).filter(function(Re){var ae=(0,c.Z)(Re,2),ue=ae[0],K=ae[1];return ue!=="error"}))}),null,4):JSON.parse(Ze)})},Ne=function(){var ge=(0,Q.Z)((0,u.Z)().mark(function Ze(xe){var Re,ae;return(0,u.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Re=W.getFieldValue(["var",xe.name,"name"]),ae=W.getFieldValue(["var",xe.name,"val"]),!(!Re&&ae||Re&&!ae)){K.next=5;break}return W.setFields([{name:["var",xe.name,"error"],errors:[f({id:"TestSuite.data.format.error"})]}]),K.abrupt("return",Promise.reject());case 5:return W.setFields([{name:["var",xe.name,"error"],errors:[]},{name:["var",xe.name,"name"],errors:[]},{name:["var",xe.name,"val"],errors:[]}]),K.abrupt("return",Promise.resolve());case 7:case"end":return K.stop()}},Ze)}));return function(xe){return ge.apply(this,arguments)}}();return(0,e.jsx)(Qe.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(C)}),className:ot().warp,forceRender:!0,destroyOnClose:!0,width:376,onClose:ve,open:U,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.Z,{onClick:ve,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),B.batch?(0,e.jsx)(At.Z,{onConfirm:be,title:(0,e.jsx)(t._H,{id:"confDrawer.popconfirm.title"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),placement:"rightTop",children:(0,e.jsx)(J.Z,{type:"primary",loading:oe,children:(0,e.jsx)(t._H,{id:"operation.ok"})})}):(0,e.jsx)(J.Z,{onClick:be,type:"primary",htmlType:"submit",loading:oe,children:C.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(V.Z,{layout:"vertical",form:W,initialValues:{var:[{name:"",val:"",des:""}]},scrollToFirstError:!0,preserve:!0,children:[!B.batch&&(0,e.jsx)(V.Z.Item,{name:"name",label:"Test Conf",rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"please.enter"})})}),!B.batch&&(0,e.jsx)(V.Z.Item,{name:"alias",label:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),children:(0,e.jsx)(ze.Z,{placeholder:f({id:"TestSuite.alias.placeholder"})})}),(0,e.jsx)(V.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:B.batch?[]:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:f({id:"please.select"}),mode:"multiple",getPopupContainer:function(Ze){return Ze.parentNode},options:M==null?void 0:M.map(function(ge){return{value:ge.id,label:ge.name}})})}),(0,e.jsx)(V.Z.Item,{name:"timeout",label:(0,e.jsx)(tn.f,{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),desc:(0,e.jsx)(t._H,{id:"TestSuite.timeout.tooltip"})}),rules:B.batch?[]:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ht.Z,{style:{width:"100%"},min:0,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{name:"repeat",label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),children:(0,e.jsx)(Ht.Z,{style:{width:"100%"},min:1,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{children:(0,e.jsxs)(Be.Z,{justify:"space-between",align:"middle",children:[(0,e.jsx)(t._H,{id:"TestSuite.var"}),(0,e.jsx)(J.Z,{style:{position:"absolute",right:0,zIndex:99},type:"link",size:"small",onClick:Ae,children:we?"Bulk Edit":"Key-Value Edit"})]})}),we?(0,e.jsx)(V.Z.List,{name:"var",children:function(Ze,xe){var Re=xe.add,ae=xe.remove;return(0,e.jsxs)(Ke.Z,{direction:"vertical",children:[Ze.map(function(ue,K){return(0,e.jsx)(V.Z.Item,{name:[ue.name,"error"],children:(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)(V.Z.Item,{name:[ue.name,"name"],rules:[{validator:function(){var b=(0,Q.Z)((0,u.Z)().mark(function R(){return(0,u.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Ne(ue));case 1:case"end":return v.stop()}},R)}));function L(){return b.apply(this,arguments)}return L}()}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"TestSuite.variable.name"})})}),(0,e.jsx)(Te.Z.Text,{children:"="}),(0,e.jsx)(V.Z.Item,{name:[ue.name,"val"],rules:[{validator:function(){var b=(0,Q.Z)((0,u.Z)().mark(function R(){return(0,u.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Ne(ue));case 1:case"end":return v.stop()}},R)}));function L(){return b.apply(this,arguments)}return L}()}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"TestSuite.default"})})}),(0,e.jsx)(Te.Z.Text,{children:","}),(0,e.jsx)(V.Z.Item,{name:[ue.name,"des"],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"TestSuite.var.desc"})})}),(0,e.jsx)(On.Z,{className:"dynamic-delete-button",style:{margin:"8px 0"},onClick:function(){ae(ue.name),Ze.length===1&&W.setFieldValue("var",w.var)}})]})},ue.key)}),(0,e.jsx)(J.Z,{style:{width:100,padding:0,textAlign:"left",marginBottom:8},type:"link",size:"small",onClick:function(){return Re({name:"",val:"",des:""})},block:!0,children:(0,e.jsxs)(Ke.Z,{children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})})]})}}):(0,e.jsx)(V.Z.Item,{name:"var",rules:[{validator:$e}],children:(0,e.jsx)(ze.Z.TextArea,{autoSize:{minRows:4},style:{width:"100%"},placeholder:"\u683C\u5F0F\uFF1Akey=value, description\uFF0C\u591A\u4E2A\u6362\u884C"})}),!B.batch&&(0,e.jsx)(V.Z.Item,{name:"is_default",label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})}),!B.batch&&(0,e.jsx)(V.Z.Item,{name:"certificated",label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(Dn.Z,{overlayClassName:ot().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)($t.Z,{})})]}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})}),!B.batch&&(0,e.jsx)(V.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(ze.Z.TextArea,{rows:4,placeholder:f({id:"TestSuite.desc.placeholder"})})})]})})},Rn=(0,n.forwardRef)(Za),Sa=r(96486),ya=r.n(Sa),En,Ca=(0,Hn.ZP)(Be.Z)(En||(En=(0,kn.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),wa=function(g){var i=g.selectedRowKeys,o=g.setMetricDelInfo,s=g.onOk,p=g.innerKey,f=(0,t.YB)(),y=function($){s==null||s(i,$),o({})},le=function(){o({})};return i!=null&&i.length?(0,e.jsx)(bn,{offsetBottom:16,children:(0,e.jsxs)(Ca,{justify:"space-between",children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(yt.Z,{indeterminate:!0}),(0,e.jsx)(Te.Z.Text,{children:f.formatMessage({id:"selected.item"},{data:i.length})}),(0,e.jsx)(J.Z,{type:"link",onClick:le,children:(0,e.jsx)(t._H,{id:"operation.cancel",defaultMessage:"\u53D6\u6D88"})})]}),(0,e.jsx)(Ke.Z,{children:p==="1"?(0,e.jsx)(At.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return y()},overlayStyle:{width:"224px"},children:(0,e.jsx)(J.Z,{children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})}):(0,e.jsx)(ln,{isBatch:!0,onOk:y})})]})}):(0,e.jsx)(e.Fragment,{})},Ta=wa,ba=r(31192),yr=r(77764),ka=null,Jt=null,Ha=function(g,i){var o,s=(0,t.YB)(),p=s.formatMessage,f=(0,t.Kd)()==="en-US",y=Nt(),le=y.domainList,w=y.runList,$=(0,at.TH)(),M=$.query,X=M.test_type||"functional",O={page_size:10,page_num:1,test_type:X},W=(0,t.QT)(function(){return(0,ba.Tf)({page_size:999})}),de=W.data,te=(0,n.useState)(O),U=(0,c.Z)(te,2),q=U[0],pe=U[1],ce=(0,n.useState)(!0),C=(0,c.Z)(ce,2),G=C[0],ye=C[1],je=(0,n.useState)(!1),we=(0,c.Z)(je,2),N=we[0],Ce=we[1],Ee=(0,n.useState)([]),B=(0,c.Z)(Ee,2),H=B[0],Z=B[1],se=(0,n.useState)([]),oe=(0,c.Z)(se,2),ne=oe[0],ve=oe[1],be=(0,n.useState)([]),Le=(0,c.Z)(be,2),$e=Le[0],Ae=Le[1],Ne=(0,n.useState)(!0),ge=(0,c.Z)(Ne,2),Ze=ge[0],xe=ge[1],Re=(0,n.useState)([]),ae=(0,c.Z)(Re,2),ue=ae[0],K=ae[1],b=(0,n.useState)(new Date().getTime()),L=(0,c.Z)(b,2),R=L[0],x=L[1],v=(0,n.useState)(),I=(0,c.Z)(v,2),j=I[0],h=I[1],a=n.useState({}),l=(0,c.Z)(a,2),d=l[0],E=l[1],_=[{id:1,name:p({id:"operation.yes"})},{id:0,name:p({id:"operation.no"})}],me=(0,n.useRef)(null),De=(0,n.useRef)(null),_e=n.useRef(null),Oe=(0,n.useRef)(null),ht=n.useRef(null);(0,n.useImperativeHandle)(i,function(){return{openCreateDrawer:De.current.show}});var mt=function(k,z){Jt!==null&&clearTimeout(Jt),Jt=setTimeout(ya().partial(k,q),z)},dt=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z,re){return(0,u.Z)().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:ve([]),Ie.default.success(p({id:"operation.success"})),xe(!Ze);case 3:case"end":return Ge.stop()}},k)}));return function(z,re){return F.apply(this,arguments)}}();(0,n.useEffect)(function(){Z([]),pe(O)},[M]);var _t=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(){var z;return(0,u.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,(0,Se.AO)();case 2:z=ke.sent,z.code===200?h(z.data):Ie.default.error(z.msg);case 4:case"end":return ke.stop()}},k)}));return function(){return F.apply(this,arguments)}}(),He=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(){var z;return(0,u.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ye(!0),ke.next=3,(0,Se.Zu)(q);case 3:z=ke.sent,K(z),_t(),ye(!1);case 7:case"end":return ke.stop()}},k)}));return function(){return F.apply(this,arguments)}}();(0,n.useEffect)(function(){return mt(He,300),function(){clearTimeout(ka),clearTimeout(Jt)}},[q]);var Y=function(k,z){pe((0,m.Z)((0,m.Z)({},q),{},{page_num:k,page_size:z}))},ee=function(k){k.direction=="\u4E0A\u5347"&&(k.domain="increase"),k.is_default=k.is_default?1:0,k.test_type=X;for(var z=k.domain_id_list===""?[]:k.domain_id_list.split(","),re=[],ke=0;ke<z.length;ke++)re.push(Number.parseInt(z[ke]));k.domain_list_str=re,le.forEach(function(Ge){Ge.name==k.domain&&(k.domain=Ge.id)}),De.current.show("edit",k)},Pe=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z){var re,ke;return(0,u.Z)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return re=z.doc,ke=z.id,tt.next=3,(0,Se.Fu)(ke,{doc:re});case 3:Ie.default.success(p({id:"operation.success"})),Oe.current.hide(),q.page_num===1?He():pe((0,m.Z)((0,m.Z)({},q),{},{page_num:1}));case 6:case"end":return tt.stop()}},k)}));return function(z){return F.apply(this,arguments)}}(),he=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(){return(0,u.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:Ie.default.success(p({id:"operation.success"})),He();case 2:case"end":return re.stop()}},k)}));return function(){return F.apply(this,arguments)}}(),ie=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z){var re,ke,Ge,tt;return(0,u.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,(0,Ct.Ob)({flag:"pass",suite_id:z.id});case 2:if(Ge=nt.sent,tt=Ge.code,tt!==200){nt.next=6;break}return nt.abrupt("return",(re=_e.current)===null||re===void 0?void 0:re.show(z));case 6:(ke=ht.current)===null||ke===void 0||ke.show(z);case 7:case"end":return nt.stop()}},k)}));return function(z){return F.apply(this,arguments)}}(),D=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z){var re,ke,Ge,tt;return(0,u.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,(0,Se.D8)(z.id);case 2:Ie.default.success(p({id:"operation.success"})),re=q.page_size,ke=q.page_num,Ge=ue.total%re==1,tt=Math.floor(ue.total/re),Ge&&tt&&tt+1<=ke?pe(function(dr){return(0,m.Z)((0,m.Z)({},dr),{},{page_num:tt})}):He();case 7:case"end":return nt.stop()}},k)}));return function(z){return F.apply(this,arguments)}}(),P=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z){var re,ke,Ge,tt;return(0,u.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return Ce(!0),re=Ie.default.loading({content:p({id:"operation.synchronizing"}),duration:0}),nt.next=4,(0,Se.PO)(z.id);case 4:if(ke=nt.sent,Ge=ke.code,tt=ke.msg,Ce(!1),re(),Ge===200){nt.next=12;break}return Ie.default.warning("".concat(p({id:"request.synchronize.failed"}),"\uFF0C").concat(tt)),nt.abrupt("return");case 12:Ie.default.success(p({id:"request.synchronize.success"})),He(),x(new Date().getTime());case 15:case"end":return nt.stop()}},k)}));return function(z){return F.apply(this,arguments)}}(),A=n.useMemo(function(){return(de||[]).reduce(function(F,k){return F[k.id]=k,F},{})},[de]),S=[{title:"Test Suite",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,filterDropdown:function(k){return(0,e.jsx)(en.Z,(0,m.Z)((0,m.Z)({},k),{},{onConfirm:function(re){return pe((0,m.Z)((0,m.Z)({},q),{},{name:re,page_num:1}))}}))},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.name?"#1890ff":void 0}})},render:function(k,z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:z.name},children:(0,e.jsx)(sn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[q.name||""],autoEscape:!0,textToHighlight:z.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",render:function(k){return k==="standalone"?(0,e.jsx)(t._H,{id:"standalone"}):(0,e.jsx)(t._H,{id:"cluster"})},width:f?150:100,filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.run_mode?"#1890ff":void 0}})},filterDropdown:function(k){var z=k.confirm;return(0,e.jsx)(pn,{list:w,confirm:z,onConfirm:function(ke){pe((0,m.Z)((0,m.Z)({},q),{},{run_mode:ke}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:90,ellipsis:!0,filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.domain?"#1890ff":void 0}})},filterDropdown:function(k){var z=k.confirm;return(0,e.jsx)(pn,{list:le,confirm:z,onConfirm:function(ke){pe((0,m.Z)((0,m.Z)({},q),{},{domain:ke}))}})}},!1,X!=="functional"&&{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),(0,e.jsx)(Rt.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.1"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.2"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.3"})})]}),placement:"bottomLeft",children:(0,e.jsx)($t.Z,{})})]}),dataIndex:"view_type",render:function(k,z){return(0,Kn.o)(k,z)},width:120,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:130,ellipsis:!0,render:function(k,z){return(0,e.jsx)("div",{children:(0,e.jsx)(zt.Z,{title:z.doc,width:95,isCode:!0,children:(0,e.jsx)(Qt.Z,{className:ot().edit,onClick:function(){Oe.current.show(z)}})})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),width:f?130:110,render:function(k,z){return z.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.is_default===1?"#1890ff":void 0}})},filterDropdown:function(k){var z=k.confirm;return(0,e.jsx)(mn.Z,{list:_,confirm:z,onConfirm:function(ke){pe((0,m.Z)((0,m.Z)({},q),{},{is_default:ke}))}})}},{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),(0,e.jsx)(Rt.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.title"})}),placement:"bottomLeft",children:(0,e.jsx)($t.Z,{})})]}),width:120,render:function(k,z){return z.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.certificated===1?"#1890ff":void 0}})},filterDropdown:function(k){var z=k.confirm;return(0,e.jsx)(mn.Z,{list:_,confirm:z,onConfirm:function(ke){pe((0,m.Z)((0,m.Z)({},q),{},{certificated:ke}))}})}},{title:"Owner",dataIndex:"owner_name",width:100,ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:q.owner?"#1890ff":void 0}})},filterDropdown:function(k){var z=k.confirm;return(0,e.jsx)(Wt.Z,{confirm:z,onConfirm:function(ke){return pe((0,m.Z)((0,m.Z)({},q),{},{owner:ke}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",width:100,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:200,sorter:!0,render:function(k,z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:z.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",sorter:!0,width:200,render:function(k,z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:z.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),dataIndex:"id",width:f?190:140,fixed:"right",render:function(k,z){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Te.Z.Link,{onClick:function(){return P(z)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})}),(0,e.jsx)(Te.Z.Link,{onClick:function(){return ee(z)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Te.Z.Link,{onClick:function(){return ie(z)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],fe=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(){var z;return(0,u.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,(0,Se.yC)();case 2:z=ke.sent,z.code===200?Ie.default.success(p({id:"request.synchronize.command.success"})):z.code===201?Ie.default.warning(z.msg):Ie.default.error(z.msg);case 4:case"end":return ke.stop()}},k)}));return function(){return F.apply(this,arguments)}}(),Fe=function(k){return!k||k<=0?ot().hidden:""},Me=function(){var F=(0,Q.Z)((0,u.Z)().mark(function k(z,re){var ke,Ge;return(0,u.Z)().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return Zt.next=2,(0,Se.wx)({id_list:z,is_sync:re,object_id:d==null?void 0:d.object_id,object_type:(d==null?void 0:d.innerkey)==="1"?"case":"suite"});case 2:if(ke=Zt.sent,Ge=ke.code,Ge===200){Zt.next=6;break}return Zt.abrupt("return");case 6:Ie.default.success(p({id:"operation.success"})),d==null||d.refresh(),E({});case 9:case"end":return Zt.stop()}},k)}));return function(z,re){return F.apply(this,arguments)}}();return(0,e.jsxs)(Bt.Provider,{value:{selectedRowKeys:ne,selectedRow:$e,confDrawerShow:(o=me.current)===null||o===void 0?void 0:o.show,confRefresh:Ze,setConfRefresh:xe,setSelectedRowKeys:ve,setSelectedRow:Ae,metricDelInfo:d,setMetricDelInfo:E},children:[(0,e.jsxs)(pt.Z,{spinning:G,children:[(0,e.jsx)(qe.Z,{className:ot().suiteTable,size:"small",onChange:function(k,z,re){var ke=re.order,Ge=re.field;switch(ke){case"descend":Ge==="gmt_created"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:"-gmt_created"})),Ge==="gmt_modified"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:"-gmt_modified"}));break;case"ascend":Ge==="gmt_created"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:"gmt_created"})),Ge==="gmt_modified"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:"gmt_modified"}));break;default:Ge==="gmt_created"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:void 0})),Ge==="gmt_modified"&&pe((0,m.Z)((0,m.Z)({},q),{},{order:void 0}));break}},columns:S.filter(Boolean),dataSource:ue.data,rowKey:function(k){return k.id},pagination:!1,expandable:{indentSize:0,expandedRowRender:function(k){return(0,e.jsx)(Gn,{id:k.id,type:X},R)},onExpand:function(k,z){return Z(k?[z.id]:[])},expandedRowClassName:function(){return"case_expand_row"},expandedRowKeys:H,expandIcon:function(k){var z=k.expanded,re=k.onExpand,ke=k.record;return z?(0,e.jsx)(Ft.Z,{onClick:function(tt){return re(ke,tt)}}):(0,e.jsx)(Lt.Z,{onClick:function(tt){return re(ke,tt)}})}},scroll:{x:1470}}),ne.length>0&&(0,e.jsx)(ga,{}),ue.total&&(0,e.jsxs)(Be.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:p({id:"pagination.total.strip"},{data:ue.total||0})}),(0,e.jsx)(xt.Z,{className:Fe(ue.total),showQuickJumper:!0,showSizeChanger:!0,size:"small",current:q.page_num,defaultCurrent:1,onChange:function(k,z){return Y(k,z)},onShowSizeChange:function(k,z){return Y(k,z)},total:ue.total})]})]}),(0,e.jsx)(Qe.Z,{open:N,width:0,getContainer:!1}),(0,e.jsx)(Xn,{test_type:X,ref:De,onOk:he,wsList:de||[]}),(0,e.jsx)(Xt,{ref:Oe,onOk:Pe}),(0,e.jsx)(Ta,(0,m.Z)((0,m.Z)({},d),{},{setMetricDelInfo:E,onOk:Me})),(0,e.jsx)(cn,{ref:ht,onOk:D}),(0,e.jsx)(qt,{ref:_e,onOk:D}),(0,e.jsx)(Rn,{ref:me,onOk:dt,selectedRowKeys:ne})]})},Ia=(0,n.forwardRef)(Ha),Da=r(34134),Pn=r.n(Da),Oa=r(84020),Ra=r.n(Oa),Ea=(0,n.forwardRef)(function(T,g){var i=(0,t.YB)(),o=i.formatMessage,s=V.Z.useForm(),p=(0,c.Z)(s,1),f=p[0],y=(0,n.useState)(!1),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)(!1),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)("new"),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)({}),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)(!0),je=(0,c.Z)(ye,2),we=je[0],N=je[1],Ce=(0,n.useState)(!0),Ee=(0,c.Z)(Ce,2),B=Ee[0],H=Ee[1];(0,n.useImperativeHandle)(g,function(){return{show:function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};W(!0),q(ve),G(be),N(!0),f.setFieldsValue(be)}}});var Z=function(){f.resetFields(),$(!1),W(!1),H(!0),N(!0)},se=function(ve,be,Le){ve===200?(T.onOk(),Ie.default.success(o({id:"operation.success"})),N(!0),W(!1),f.resetFields()):ve===201?N(!1):Ie.default.error(be),$(!1)},oe=function(){if(!f.getFieldValue("name")){H(!1);return}$(!0),f.validateFields().then(function(){var ve=(0,Q.Z)((0,u.Z)().mark(function be(Le){var $e,Ae,Ne,ge,Ze,xe;return(0,u.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(U!=="new"){ae.next=9;break}return ae.next=3,(0,Se.xW)((0,m.Z)({},Le));case 3:$e=ae.sent,Ae=$e.code,Ne=$e.msg,se(Ae,Ne,"new"),ae.next=15;break;case 9:return ae.next=11,(0,Se.T6)((0,m.Z)({id:C.id},Le));case 11:ge=ae.sent,Ze=ge.code,xe=ge.msg,se(Ze,xe,"edit");case 15:case"end":return ae.stop()}},be)}));return function(be){return ve.apply(this,arguments)}}()).catch(function(ve){return console.log(ve)})};return(0,e.jsx)(Qe.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"addScript.title.".concat(U)}),width:"375",onClose:Z,visible:O,className:Ra().add_baseline_drawer,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:Z,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{type:"primary",disabled:w,onClick:oe,children:C&&C.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(V.Z,{form:f,layout:"vertical",children:[(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),name:"name",validateStatus:(!B||!we)&&"error",help:!B&&o({id:"TestSuite.domain.name.cannot.be.empty"})||!we&&o({id:"TestSuite.domain.name.already.exists"}),rules:[{required:!0}],children:(0,e.jsx)(ze.Z,{autoComplete:"auto",placeholder:o({id:"TestSuite.domain.name.placeholder"}),onChange:function(ve){if(N(!0),!ve.target.value){H(!1);return}H(!0)}})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc.option"}),name:"description",children:(0,e.jsx)(ze.Z.TextArea,{placeholder:o({id:"TestSuite.please.enter.description"})})})]})})}),Pa=function(g,i){var o=(0,t.YB)(),s=o.formatMessage;(0,n.useImperativeHandle)(i,function(){return{openCreateDrawer:U.current.show}});var p=(0,n.useState)(!0),f=(0,c.Z)(p,2),y=f[0],le=f[1],w=(0,n.useState)(!0),$=(0,c.Z)(w,2),M=$[0],X=$[1],O=(0,n.useState)([]),W=(0,c.Z)(O,2),de=W[0],te=W[1],U=(0,n.useRef)(null),q={page_num:1,page_size:10},pe=(0,n.useState)(q),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=function(){var B=(0,Q.Z)((0,u.Z)().mark(function H(){var Z;return(0,u.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return le(!0),oe.next=3,(0,Se.ge)(C);case 3:Z=oe.sent,te(Z),le(!1);case 6:case"end":return oe.stop()}},H)}));return function(){return B.apply(this,arguments)}}(),je=function(H,Z){G((0,m.Z)((0,m.Z)({},C),{},{page_num:H,page_size:Z}))};(0,n.useEffect)(function(){ye()},[C]);var we=(0,u.Z)().mark(function B(){var H,Z=arguments;return(0,u.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return H=Z.length>0&&Z[0]!==void 0?Z[0]:{},oe.next=3,(0,Se.Ak)({id_list:[H.id]});case 3:case"end":return oe.stop()}},B)}),N=function(H,Z){var se=C.page_num,oe=C.page_size;if(H===200){Ie.default.success(s({id:"operation.success"}));var ne=Math.ceil((de.total-1)/oe)||1,ve=se;se>ne&&(ve=ne),G((0,m.Z)((0,m.Z)({},C),{},{page_num:ve}))}else(0,Xe.EV)(H,Z)},Ce=[{title:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),width:300,fixed:"left",dataIndex:"name",ellipsis:{showTitle:!1},filterDropdown:function(H){var Z=H.confirm;return(0,e.jsx)(en.Z,{confirm:Z,autoFocus:M,onConfirm:function(oe){return G((0,m.Z)((0,m.Z)({},C),{},{name:oe}))}})},onFilterDropdownVisibleChange:function(H){H&&X(!M)},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:C.name?"#1890ff":void 0}})},render:function(H,Z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:Z.name},children:(0,e.jsx)(sn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[C.name||""],autoEscape:!0,textToHighlight:Z.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),width:170,dataIndex:"gmt_created",sorter:!0,render:function(H,Z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Z.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),width:170,dataIndex:"gmt_modified",sorter:!0,render:function(H,Z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Z.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),width:100,dataIndex:"creator",filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:C.creator?"#1890ff":void 0}})},filterDropdown:function(H){var Z=H.confirm;return(0,e.jsx)(Wt.Z,{confirm:Z,onConfirm:function(oe){G((0,m.Z)((0,m.Z)({},C),{},{creator:oe}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.update_user"}),width:100,dataIndex:"update_user",filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:C.update_user?"#1890ff":void 0}})},filterDropdown:function(H){var Z=H.confirm;return(0,e.jsx)(Wt.Z,{confirm:Z,onConfirm:function(oe){return G((0,m.Z)((0,m.Z)({},C),{},{update_user:oe}))}})},render:function(H,Z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Z.update_user||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(H,Z){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Z.description||"-"})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),key:"domain_conf",width:130,fixed:"right",render:function(H,Z){return(0,e.jsxs)(Ke.Z,{size:"small",children:[(0,e.jsx)("span",{className:Pn().fail_detail_operation,onClick:function(){return Ee(Z)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(At.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"TestConf.Suite/Conf.delete.warning"})}),onCancel:function(){var oe=we(Z),ne=oe.next();ne.value.then(function(ve){var be=ve.code,Le=ve.msg;N(be,Le)})},okText:(0,e.jsx)(t._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)(lt.Z,{style:{color:"red"}}),children:(0,e.jsx)("span",{className:Pn().fail_detail_operation,children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],Ee=function(H){var Z;(Z=U.current)===null||Z===void 0||Z.show("edit",H)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(pt.Z,{spinning:y,children:[(0,e.jsx)(qe.Z,{size:"small",onChange:function(H,Z,se){var oe=se.order,ne=se.field;switch(oe){case void 0:if(ne==="gmt_created")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_created:void 0}));if(ne==="gmt_modified")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_modified:void 0}));case"descend":if(ne==="gmt_created")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_created:"-gmt_created"}));if(ne==="gmt_modified")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_modified:"-gmt_modified"}));break;case"ascend":if(ne==="gmt_created")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_created:"+gmt_created"}));if(ne==="gmt_modified")return G((0,m.Z)((0,m.Z)({},C),{},{gmt_modified:"+gmt_modified"}));break;default:break}},columns:Ce,dataSource:de.data,rowKey:function(H){return H.id+""},pagination:!1}),de.total&&(0,e.jsxs)(Be.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:s({id:"pagination.total.strip"},{data:de.total||0})}),(0,e.jsx)(xt.Z,{showQuickJumper:!0,showSizeChanger:!0,size:"small",current:C.page_num,defaultCurrent:1,onChange:function(H,Z){return je(H,Z)},onShowSizeChange:function(H,Z){return je(H,Z)},total:de.total})]})]}),(0,e.jsx)(Ea,{ref:U,onOk:ye})]})},Ma=(0,n.forwardRef)(Pa),Fa=r(89695),La=r.n(Fa),Aa=(0,n.forwardRef)(function(T,g){var i=(0,t.YB)(),o=i.formatMessage,s=V.Z.useForm(),p=(0,c.Z)(s,1),f=p[0],y=(0,n.useState)(!1),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)(!1),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)(""),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)({}),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)({status:!0,message:""}),je=(0,c.Z)(ye,2),we=je[0],N=je[1];(0,n.useImperativeHandle)(g,function(){return{show:function(Z){W(!0),q(o(Z?{id:"TestSuite.edit.business"}:{id:"TestSuite.new.business"})),G(Z),f.setFieldsValue(Z)}}});var Ce=function(){f.resetFields(),$(!1),W(!1),N({status:!0,message:""})},Ee=function(Z,se,oe){Z===200?(Ie.default.success(o({id:"operation.success"})),W(!1),f.resetFields(),T.callback()):Z===201?N({status:!1,message:o({id:"TestSuite.business.name.already.exists"})}):Ie.default.error(se||o({id:"operation.failed"}))},B=function(){f.validateFields().then(function(){var Z=(0,Q.Z)((0,u.Z)().mark(function se(oe){var ne,ve,be,Le,$e,Ae;return(0,u.Z)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if($(!0),!(C&&C.id)){ge.next=10;break}return ge.next=4,(0,Se.qJ)((0,m.Z)({id:C.id},oe));case 4:ne=ge.sent,ve=ne.code,be=ne.msg,Ee(ve,be,"edit"),ge.next=16;break;case 10:return ge.next=12,(0,Se.sB)((0,m.Z)({},oe));case 12:Le=ge.sent,$e=Le.code,Ae=Le.msg,Ee($e,Ae,"add");case 16:$(!1);case 17:case"end":return ge.stop()}},se)}));return function(se){return Z.apply(this,arguments)}}()).catch(function(Z){var se;$(!1),Z==null||(se=Z.errorFields)===null||se===void 0||se.forEach(function(oe){oe.name[0]==="name"&&N({status:!1,message:oe.errors[0]})})})};return(0,e.jsx)(Qe.Z,{className:La().addBusiness_drawer,title:U,maskClosable:!0,keyboard:!1,width:"375",onClose:Ce,visible:O,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:Ce,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{type:"primary",disabled:w||!we.status,onClick:B,children:C&&C.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(V.Z,{form:f,layout:"vertical",children:[(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),name:"name",validateStatus:we.status?void 0:"error",help:!we.status&&we.message,rules:[{required:!0}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:o({id:"please.enter"}),onChange:function(Z){if(!Z.target.value)N({status:!1,message:o({id:"TestSuite.business.name.cannot.be.empty"})});else{N({status:!0,message:""});var se=Z.target.value;se.match(/^[A-Za-z0-9\._-]+$/g)&&se.length<=32||N({status:!1,message:o({id:"please.enter.message"})})}},allowClear:!0})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.description"}),name:"description",rules:[{required:!1},{max:500,message:o({id:"TestSuite.description.message"})}],children:(0,e.jsx)(ze.Z.TextArea,{placeholder:o({id:"TestSuite.please.enter.description"})})})]})})}),Ba=r(30381),nn=r.n(Ba),an=r(32059),Ka=r(86452),It=r.n(Ka),$a=(0,n.forwardRef)(function(T,g){var i,o=(0,t.YB)(),s=o.formatMessage,p=V.Z.useForm(),f=(0,c.Z)(p,1),y=f[0],le=(0,n.useState)(!1),w=(0,c.Z)(le,2),$=w[0],M=w[1],X=(0,n.useState)(!1),O=(0,c.Z)(X,2),W=O[0],de=O[1],te=(0,n.useState)(""),U=(0,c.Z)(te,2),q=U[0],pe=U[1],ce=(0,n.useState)({}),C=(0,c.Z)(ce,2),G=C[0],ye=C[1],je=(0,n.useState)({status:!0,message:""}),we=(0,c.Z)(je,2),N=we[0],Ce=we[1],Ee=(0,n.useState)(!0),B=(0,c.Z)(Ee,2),H=B[0],Z=B[1],se=(0,n.useState)([]),oe=(0,c.Z)(se,2),ne=oe[0],ve=oe[1],be=(0,n.useState)(null),Le=(0,c.Z)(be,2),$e=Le[0],Ae=Le[1];(0,n.useImperativeHandle)(g,function(){return{show:function(h){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(de(!0),pe(h),ye(a),a.id){var l,d=(l=JSON.parse(a.var))===null||l===void 0?void 0:l.map(function(_,me){return(0,m.Z)({id:me+1},_)});Array.isArray(d)&&d.length?ve(d):R(),Ae(a.ci_type);var E=b(a);y.setFieldsValue(E)}else R()}}});var Ne=function(){y.resetFields(),M(!1),de(!1),pe(""),ye({}),Ce({status:!0,message:""}),ve([]),Ae(null)},ge=function(){Ne()},Ze=function(h,a,l){h===200?(Ne(),Ie.default.success(s({id:"operation.success"})),T.callback({type:l})):Ie.default.error(a||s({id:"operation.failed"}))},xe=function(){y.validateFields().then(function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(l){var d,E,_,me,De;return(0,u.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(M(!0),d=T.confIds,!(d!=null&&d.length)){Oe.next=13;break}return E=(0,m.Z)((0,m.Z)({case_id_list:d.join()},l),{},{domain_list_str:l.domain_list_str.join()}),Oe.next=6,(0,Se.F8)((0,m.Z)({},E));case 6:if(Oe.t0=Oe.sent,Oe.t0){Oe.next=9;break}Oe.t0={};case 9:_=Oe.t0,me=_.code,De=_.msg,Ze(me,De,"editAll");case 13:case"end":return Oe.stop()}},a)}));return function(a){return h.apply(this,arguments)}}()).catch(function(h){M(!1)})},Re=function(){y.validateFields().then(function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(l){var d,E,_,me,De,_e,Oe,ht,mt,dt,_t;return(0,u.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(M(!0),d=T.test_suite_id,E={},_=K(),Object.keys(l).forEach(function(ee){!ee.match(/^name[0-9]+$/)&&!ee.match(/^val[0-9]+$/)&&!ee.match(/^des[0-9]+$/)&&(E[ee]=l[ee])}),me=(0,m.Z)((0,m.Z)({test_suite_id:d},E),{},{domain_list_str:l.domain_list_str.join(),var:JSON.stringify(_)}),De=G.id,!De){Y.next=16;break}return Y.next=10,(0,Se.qK)((0,m.Z)({id:De},me));case 10:_e=Y.sent,Oe=_e.code,ht=_e.msg,Ze(Oe,ht,"edit"),Y.next=22;break;case 16:return Y.next=18,(0,Se.co)((0,m.Z)({},me));case 18:mt=Y.sent,dt=mt.code,_t=mt.msg,Ze(dt,_t,"add");case 22:M(!1);case 23:case"end":return Y.stop()}},a)}));return function(a){return h.apply(this,arguments)}}()).catch(function(h){var a;M(!1),h==null||(a=h.errorFields)===null||a===void 0||a.forEach(function(l){l.name[0]==="name"&&Ce({status:!1,message:l.errors[0]})})})},ae=function(){Z(!H);var h=ue();y.setFieldsValue({var:JSON.stringify(h,null,4)})},ue=function(){var h=y.getFieldsValue(!0);return ne.map(function(a){return{name:h["name".concat(a.id)]||"",val:h["val".concat(a.id)]||"",des:h["des".concat(a.id)]||""}})},K=function(){var h=y.getFieldsValue(!0);return ne==null?void 0:ne.filter(function(a){return h["name".concat(a.id)]}).map(function(a){return{name:h["name".concat(a.id)],val:h["val".concat(a.id)]||"",des:h["des".concat(a.id)]||""}})},b=function(){var h,a,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d={};return(h=JSON.parse(l.var))===null||h===void 0||h.forEach(function(E,_){d["name".concat(_+1)]=E.name,d["val".concat(_+1)]=E.val,d["des".concat(_+1)]=E.des}),(0,m.Z)((0,m.Z)({},l),{},{domain_list_str:((a=l.domain_id_list)===null||a===void 0?void 0:a.split(",").map(function(E){return Number(E)}))||[]},d)},L=function(h,a,l){try{var d=JSON.parse(a);if(Object.prototype.toString.call(d)==="[object Array]"){for(var E=d.length,_=0;_<E;_++)if(Object.prototype.toString.call(d[_])!=="[object Object]"){l(s({id:"TestSuite.data.format.error"}));return}}else{l(s({id:"TestSuite.data.format.error"}));return}}catch(me){l(s({id:"TestSuite.data.format.error"}));return}l()},R=function(){var h=ne.length,a=h&&ne[h-1].id||0,l={id:++a,name:"",val:"",des:""},d=ne.concat([l]);ve(d)},x=function(h){if(ne.length>1){var a,l=ne.filter(function(d){return d.id!==h});ve(l),y.setFieldsValue((a={},(0,an.Z)(a,"name".concat(h),void 0),(0,an.Z)(a,"val".concat(h),void 0),(0,an.Z)(a,"des".concat(h),void 0),a))}},v=function(h){Ae(h)},I=(0,e.jsxs)("div",{children:[(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),name:"ci_type",rules:[{required:!0,message:s({id:"TestSuite.ci_type.message"})}],extra:$e==="kernel_install"?(0,e.jsx)("div",{className:It().CI_Config_Extra,children:(0,e.jsx)(t._H,{id:"only.installs.the.kernel"})}):void 0,children:(0,e.jsx)(We.Z,{placeholder:s({id:"TestSuite.ci_type.message"}),onChange:v,children:[{value:"aone"},{value:"jenkins"},{value:"kernel_install"},{value:"script"}].map(function(j){return(0,e.jsx)(We.Z.Option,{value:j.value,children:j.value},j.value)})})}),(0,e.jsxs)("div",{className:It().ciTypeElement,children:[$e==="aone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:s({id:"TestSuite.host.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-Pipeline id",name:"pipeline_id",rules:[{required:!0,message:s({id:"TestSuite.pipeline_id.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.pipeline_id.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-ClientKey",name:"user",rules:[{required:!0,message:s({id:"TestSuite.ClientKey.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.ClientKey.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-AccessSecret",name:"token",rules:[{required:!0,message:s({id:"TestSuite.AccessSecret.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.AccessSecret.message"}),autoComplete:"off"})})]}),$e==="jenkins"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:s({id:"TestSuite.host.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-Project Name",name:"project_name",rules:[{required:!0,message:s({id:"TestSuite.project_name.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.project_name.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-User",name:"user",rules:[{required:!0,message:s({id:"TestSuite.User.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.User.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-ApiToken",name:"token",rules:[{required:!0,message:s({id:"TestSuite.ApiToken.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.ApiToken.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-BuildParams",name:"params",rules:[{required:!0,message:s({id:"TestSuite.BuildParams.message"})}],children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:s({id:"TestSuite.BuildParams.message"})})})]}),$e==="script"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:s({id:"TestSuite.host.message"})}],children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(V.Z.Item,{label:"-BuildParams(script)",name:"params",rules:[{required:!0,message:s({id:"TestSuite.BuildParams(script).message"})}],children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:s({id:"TestSuite.BuildParams(script).message"})})})]})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"0 -24px 20px"}})]});return(0,e.jsx)(Qe.Z,{className:It().addConf_drawer,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(q)}),maskClosable:!0,keyboard:!1,width:"375",onClose:ge,open:W,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:ge,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{type:"primary",disabled:$||!N.status,onClick:G.editAll?xe:Re,children:G!=null&&G.name||G.editAll?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(V.Z,{layout:"vertical",form:y,children:[!G.editAll&&(0,e.jsx)(V.Z.Item,{label:"Test Conf",name:"name",validateStatus:N.status?void 0:"error",help:!N.status&&N.message,rules:[{required:!0}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:s({id:"TestConf.name.placeholder"}),onChange:function(h){if(!h.target.value)Ce({status:!1,message:s({id:"TestConf.name.cannot.be.empty"})});else{Ce({status:!0,message:""});var a=h.target.value;a.match(/^[A-Za-z0-9\._-]+$/g)&&a.length<=32||Ce({status:!1,message:s({id:"please.enter.message"})})}}})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:s({id:"please.select"}),mode:"multiple",getPopupContainer:function(h){return h.parentNode},children:T==null||(i=T.domainList)===null||i===void 0?void 0:i.map(function(j){return(0,e.jsx)(We.Z.Option,{value:j.id,children:j.name},j.id)})})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),name:"timeout",rules:[{required:!0,message:s({id:"TestSuite.timeout.message"})}],children:(0,e.jsx)(Ht.Z,{style:{width:"100%"},min:0,step:1,placeholder:s({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),name:"repeat",rules:[{required:!0,message:s({id:"TestSuite.repeat.message"})}],children:(0,e.jsx)(Ht.Z,{style:{width:"100%"},min:0,step:1,placeholder:s({id:"please.enter"})})}),!G.editAll&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:It().variableLabel,children:[(0,e.jsx)(t._H,{id:"TestSuite.var"}),(0,e.jsx)("span",{className:It().Bulk_btn,onClick:ae,children:H?"Bulk Edit":"Key-Value Edit"})]}),H?(0,e.jsxs)(e.Fragment,{children:[ne.map(function(j,h){return(0,e.jsxs)(Be.Z,{children:[(0,e.jsxs)(ct.Z,{span:8,className:It().flexStart,children:[(0,e.jsx)(V.Z.Item,{name:"name".concat(j.id),children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.variable.name"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:"="})]}),(0,e.jsxs)(ct.Z,{span:8,className:It().flexStart,children:[(0,e.jsx)(V.Z.Item,{name:"val".concat(j.id),children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.default"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:","})]}),(0,e.jsxs)(ct.Z,{span:8,className:It().flexStart,children:[(0,e.jsx)(V.Z.Item,{name:"des".concat(j.id),children:(0,e.jsx)(ze.Z,{placeholder:s({id:"TestSuite.var.desc"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,paddingLeft:"8px"},children:ne.length>1?(0,e.jsx)(On.Z,{onClick:function(){return x(j.id)},style:{color:"#f00"}}):(0,e.jsx)(e.Fragment,{children:"\u2003"})})]})]},h)}),(0,e.jsxs)("a",{onClick:R,children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})]}):(0,e.jsx)(V.Z.Item,{name:"var",rules:[{validator:L}],children:(0,e.jsx)(ze.Z.TextArea,{rows:4,style:{width:"100%"},placeholder:s({id:"TestSuite.format:key=value"})})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"20px -24px"}}),(T==null?void 0:T.test_type)==="business"?I:null,(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"description",children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:s({id:"TestSuite.desc.placeholder.s"})})})]})]})})}),za=r(53212),Mn=r.n(za),Na=(0,n.forwardRef)(function(T,g){var i=T.suite_id,o=T.test_type,s=T.domainList,p=(0,t.YB)(),f=p.formatMessage,y=(0,n.useState)(!1),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)([]),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)([]),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useRef)(null),je=(0,n.useState)({visible:!1,success:"",action:""}),we=(0,c.Z)(je,2),N=we[0],Ce=we[1],Ee=(0,n.useState)({}),B=(0,c.Z)(Ee,2),H=B[0],Z=B[1],se=(0,n.useState)(!1),oe=(0,c.Z)(se,2),ne=oe[0],ve=oe[1],be=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(l){var d,E,_,me;return(0,u.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return $(!0),_e.prev=1,_e.next=4,(0,Se.Rd)((0,m.Z)({suite_id:i},l));case 4:d=_e.sent,E=d||{},_=E.code,me=E.msg,_===200?W(d):Ie.default.error(me||f({id:"request.failed"})),$(!1),_e.next=13;break;case 10:_e.prev=10,_e.t0=_e.catch(1),$(!1);case 13:case"end":return _e.stop()}},a,null,[[1,10]])}));return function(l){return h.apply(this,arguments)}}(),Le=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(){var l,d,E,_,me;return(0,u.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return ve(!0),_e.prev=1,_e.next=4,(0,Se.tz)(H.id);case 4:if(_e.t0=_e.sent,_e.t0){_e.next=7;break}_e.t0={};case 7:l=_e.t0,d=l.code,E=l.msg,d===200?(Ie.default.success(f({id:"request.delete.success"})),C.includes(H.id)&&(_=C.filter(function(Oe){return Oe!==H.id}),me=U.filter(function(Oe){return Oe.id!==H.id}),G(_),q(me)),ge(),be({page_num:O.page_num,page_size:O.page_size})):Ie.default.error(E||f({id:"request.delete.failed"})),ve(!1),_e.next=18;break;case 14:_e.prev=14,_e.t1=_e.catch(1),console.log(_e.t1),ve(!1);case 18:case"end":return _e.stop()}},a,null,[[1,14]])}));return function(){return h.apply(this,arguments)}}(),$e=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(){var l,d,E;return(0,u.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,Se.TZ)({id_list:C.join()});case 2:if(me.t0=me.sent,me.t0){me.next=5;break}me.t0={};case 5:l=me.t0,d=l.code,E=l.msg,d===200?(q([]),G([]),ge(),be({page_num:1,page_size:O.page_size})):Ie.default.error(E||f({id:"operation.batch.delete.failed"}));case 9:case"end":return me.stop()}},a)}));return function(){return h.apply(this,arguments)}}(),Ae=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(){var l,d,E,_,me;return(0,u.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(l=N.action,d=[],U.map(function(Oe){return d.push(Oe.name)}),l!="multiple"){_e.next=9;break}return _e.next=6,(0,Xe.MR)({name:d.join(","),id:C.join(",")});case 6:E=_e.sent,_e.next=13;break;case 9:return _=H.name,me=H.id,_e.next=12,(0,Xe.MR)({name:_,id:me});case 12:E=_e.sent;case 13:E&&window.open("/refenerce/conf/?pk=".concat(E));case 14:case"end":return _e.stop()}},a)}));return function(){return h.apply(this,arguments)}}();(0,n.useEffect)(function(){be({page_num:1,page_size:O.page_size})},[]),(0,n.useImperativeHandle)(g,function(){return{refresh:function(a){var l,d=a.refreshId;i===d&&(O==null||(l=O.data)===null||l===void 0?void 0:l.length)===0&&be({page_num:1,page_size:O.page_size})}}});var Ne=function(a,l,d){a.code===200?Ce({visible:!0,success:200,action:d}):a.code===201&&Ce({visible:!0,success:201,action:d}),Z(l)},ge=function(){Ce({visible:!1,success:"",action:""}),Z({})},Ze=function(){N.action==="single"?Le():N.action==="multiple"&&$e()},xe=function(a){var l=a.type,d=a.record,E=d===void 0?{}:d;if(l==="add"){var _;(_=ye.current)===null||_===void 0||_.show("new",(0,m.Z)({},E))}else if(l==="edit"){var me;(me=ye.current)===null||me===void 0||me.show("edit",(0,m.Z)({},E))}},Re=function(a){a.type==="editAll"&&(q([]),G([])),be({page_num:1,page_size:O.page_size})},ae=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(l){var d,E,_;return(0,u.Z)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return d=l.record,E=d===void 0?{}:d,De.prev=1,De.next=4,(0,Ct.Ob)({flag:"pass",case_id_list:E.id});case 4:if(De.t0=De.sent,De.t0){De.next=7;break}De.t0={};case 7:_=De.t0,_.code&&Ne(_,E,"single"),De.next=14;break;case 11:De.prev=11,De.t1=De.catch(1),console.log(De.t1);case 14:case"end":return De.stop()}},a,null,[[1,11]])}));return function(l){return h.apply(this,arguments)}}(),ue=function(){var h=(0,Q.Z)((0,u.Z)().mark(function a(){var l;return(0,u.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,(0,Ct.Ob)({flag:"pass",case_id_list:C.join()});case 3:if(E.t0=E.sent,E.t0){E.next=6;break}E.t0={};case 6:l=E.t0,l.code&&Ne(l,{},"multiple"),E.next=13;break;case 10:E.prev=10,E.t1=E.catch(0),console.log(E.t1);case 13:case"end":return E.stop()}},a,null,[[0,10]])}));return function(){return h.apply(this,arguments)}}(),K=function(){ye.current.show("batch.edit",{editAll:!0})},b=[{title:"Test Conf",dataIndex:"name",fixed:"left",width:150,render:function(a){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:a})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(a){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:a})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:150,render:function(a){return(0,e.jsx)("span",{children:a||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),dataIndex:"repeat",width:110,render:function(a){return(0,e.jsx)("span",{children:a||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),dataIndex:"ci_type",width:110,render:function(a){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:a})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(a){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:a?nn()(a).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"description",width:200,render:function(a){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:a})}},{title:(0,e.jsxs)(Be.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return xe({type:"add"})},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"operation",width:150,fixed:"right",render:function(a,l){return(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return xe({type:"edit",record:l})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return ae({record:l})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],L=function(a,l){be({page_num:a,page_size:l})},R={selectedRowKeys:C,onChange:function(a,l){q(l),G(a)}},x=O.data,v=O.total,I=O.page_num,j=O.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Dt.Z,{className:Mn().confList_root,columns:b,name:"sys-suite-bussiness-conf",refreshDeps:[C],dataSource:x,loading:w,rowKey:"id",page:I,pageSize:j,total:v,handlePage:L,rowSelection:R,scroll:{x:1100},paginationBottom:!0}),(0,e.jsx)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:N.visible,onCancel:ge,width:["",201].includes(N.success)?300:600,maskClosable:!1,footer:[(0,e.jsx)(J.Z,{onClick:Ze,loading:ne,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:ge,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(N.success)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4}}),N.action==="single"?f({id:"TestSuite.conf.name.delete.warning"},{data:H.name}):f({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:Ae,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),C.length>0&&(0,e.jsxs)("div",{className:Mn().deleteAll,children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(yt.Z,{indeterminate:!0}),(0,e.jsx)(Te.Z.Text,{children:f({id:"selected.item"},{data:C==null?void 0:C.length})}),(0,e.jsx)(J.Z,{type:"link",onClick:function(){q([]),G([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:ue,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(J.Z,{type:"primary",onClick:K,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]}),(0,e.jsx)($a,{ref:ye,callback:Re,test_suite_id:i,test_type:o,domainList:s,confIds:C})]})}),Va=r(88195),Fn=r.n(Va),Wa=(0,n.forwardRef)(function(T,g){var i,o=(0,t.YB)(),s=o.formatMessage,p=V.Z.useForm(),f=(0,c.Z)(p,1),y=f[0],le=(0,n.useState)(!1),w=(0,c.Z)(le,2),$=w[0],M=w[1],X=(0,n.useState)(!1),O=(0,c.Z)(X,2),W=O[0],de=O[1],te=(0,n.useState)(""),U=(0,c.Z)(te,2),q=U[0],pe=U[1],ce=(0,n.useState)({}),C=(0,c.Z)(ce,2),G=C[0],ye=C[1],je=(0,n.useState)({status:!0,message:""}),we=(0,c.Z)(je,2),N=we[0],Ce=we[1],Ee=(0,n.useState)(""),B=(0,c.Z)(Ee,2),H=B[0],Z=B[1],se=(0,n.useState)(!1),oe=(0,c.Z)(se,2),ne=oe[0],ve=oe[1],be=(0,n.useState)([]),Le=(0,c.Z)(be,2),$e=Le[0],Ae=Le[1],Ne=[{id:"Type1",name:s({id:"TestSuite.view_type.type1"})},{id:"Type2",name:s({id:"TestSuite.view_type.type2"})},{id:"Type3",name:s({id:"TestSuite.view_type.type3"})}],ge=function(){var x=(0,Q.Z)((0,u.Z)().mark(function v(){var I,j,h,a,l,d=arguments;return(0,u.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return I=d.length>0&&d[0]!==void 0?d[0]:"",ve(!0),_.prev=2,_.next=5,(0,Se.fP)({keyword:I,scope:"aligroup"});case 5:if(_.t0=_.sent,_.t0){_.next=8;break}_.t0={};case 8:j=_.t0,h=j.code,a=j.data,l=a===void 0?[]:a,h===200&&Ae(l),ve(!1),_.next=19;break;case 16:_.prev=16,_.t1=_.catch(2),ve(!1);case 19:case"end":return _.stop()}},v,null,[[2,16]])}));return function(){return x.apply(this,arguments)}}();(0,n.useImperativeHandle)(g,function(){return{show:function(v){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};de(!0),pe(v),ye(I);var j=Ze(I);Z(I.test_type),y.setFieldsValue(j),ge()}}});var Ze=function(){var v,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,m.Z)((0,m.Z)({},I),{},{domain_list_str:((v=I.domain_id_list)===null||v===void 0?void 0:v.split(",").map(function(j){return Number(j)}))||[]})},xe=function(){y.resetFields(),M(!1),de(!1),pe(""),ye({}),Ce({status:!0,message:""})},Re=function(v,I,j){v===200?(Ie.default.success(s({id:"operation.success"})),xe(),T.callback({type:"suite"})):Ie.default.error(I||s({id:"operation.failed"}))},ae=function(){M(!0),y.validateFields().then(function(){var v=(0,Q.Z)((0,u.Z)().mark(function I(j){var h,a,l,d,E,_,me,De;return(0,u.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(h=G.business_id,a=G.id,!a){Oe.next=10;break}return Oe.next=4,(0,Se.Fu)(a,(0,m.Z)((0,m.Z)({},j),{},{domain_list_str:j.domain_list_str.join()}));case 4:l=Oe.sent,d=l.code,E=l.msg,Re(d,E,"edit"),Oe.next=16;break;case 10:return Oe.next=12,(0,Se.SS)((0,m.Z)((0,m.Z)({business_id:h},j),{},{domain_list_str:j.domain_list_str.join()}));case 12:_=Oe.sent,me=_.code,De=_.msg,Re(me,De,"add");case 16:M(!1);case 17:case"end":return Oe.stop()}},I)}));return function(I){return v.apply(this,arguments)}}()).catch(function(v){var I;M(!1),v==null||(I=v.errorFields)===null||I===void 0||I.forEach(function(j){j.name[0]==="name"&&Ce({status:!1,message:j.errors[0]})})})},ue=function(){xe()},K=function(){var x=(0,Q.Z)((0,u.Z)().mark(function v(I,j){var h,a;return(0,u.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return h=G.id?{suite_id:G.id}:{},d.next=3,(0,Se.$X)((0,m.Z)({suite_name:I,test_type:j},h));case 3:if(d.t0=d.sent,d.t0){d.next=6;break}d.t0={};case 6:a=d.t0,a.code===200?Ce({status:!0,message:""}):Ce({status:!1,message:a.msg});case 8:case"end":return d.stop()}},v)}));return function(I,j){return x.apply(this,arguments)}}(),b=function(v){var I=v.target.value.replace(/\s+/g,"");!I||!H||!N.status||K(I,H)},L=function(){var x=(0,Q.Z)((0,u.Z)().mark(function v(I){return(0,u.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:I&&ge(I);case 1:case"end":return h.stop()}},v)}));return function(I){return x.apply(this,arguments)}}(),R=function(v){Z(v);var I=y.getFieldValue("name");I&&N.status&&K(I,v)};return(0,e.jsx)(Qe.Z,{className:Fn().addConf_drawer,title:q,maskClosable:!0,keyboard:!1,width:"375",onClose:ue,visible:W,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:ue,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{type:"primary",disabled:$||!N.status,onClick:ae,children:G&&G.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(V.Z,{layout:"vertical",form:y,children:[(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),name:"test_type",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:s({id:"please.select"}),onChange:R,getPopupContainer:function(v){return v.parentNode},children:Xe.oQ.map(function(x){return(0,e.jsx)(We.Z.Option,{value:x.value,children:s({id:x.value})},x.value)})})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.name"}),name:"name",validateStatus:N.status?void 0:"error",help:!N.status&&N.message,rules:[{required:!0}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:s({id:"TestSuite.name.placeholder"}),onBlur:b,onChange:function(v){if(!v.target.value)Ce({status:!1,message:s({id:"TestSuite.name.cannot.be.empty"})});else{Ce({status:!0,message:""});var I=v.target.value;I.match(/^[A-Za-z0-9\._-]+$/g)&&I.length<=32||Ce({status:!1,message:s({id:"please.enter.message"})})}}})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:s({id:"please.select"}),mode:"multiple",getPopupContainer:function(v){return v.parentNode},children:T==null||(i=T.domainList)===null||i===void 0?void 0:i.map(function(x){return(0,e.jsx)(We.Z.Option,{value:x.id,children:x.name},x.id)})})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),name:"run_mode",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:s({id:"please.select"}),children:Xe.ur.map(function(x){return(0,e.jsx)(We.Z.Option,{value:x.id,children:s({id:x.id})||"-"},x.id)})})}),H==="performance"&&(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),name:"view_type",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsx)(We.Z,{placeholder:s({id:"please.select"}),children:Ne.map(function(x,v){return(0,e.jsx)(We.Z.Option,{value:x.id,children:x.name},x.id)})})}),(H==="functional"||H==="performance")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(hn.Z,{}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),initialValue:1,name:"is_default",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsxs)(Je.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(Dn.Z,{overlayClassName:Fn().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)($t.Z,{})})]}),initialValue:0,name:"certificated",rules:[{required:!0,message:s({id:"please.select"})}],children:(0,e.jsxs)(Je.ZP.Group,{children:[(0,e.jsxs)(Je.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"doc",rules:[{required:!1}],children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:s({id:"TestSuite.desc.placeholder.s"})})}),(0,e.jsx)(V.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),name:"description",rules:[{required:!1},{max:500,message:s({id:"TestSuite.remarks.message"})}],children:(0,e.jsx)(ze.Z.TextArea,{rows:3,placeholder:s({id:"TestSuite.please.enter.remarks"})})})]})})}),Ua=r(50435),Ya=r.n(Ua),Ga=function(T){var g=T.onOk,i=(0,t.YB)(),o=i.formatMessage,s=(0,n.useState)(!1),p=(0,c.Z)(s,2),f=p[0],y=p[1],le=function(U){W(0),y(U)},w=function(){g(O),y(!1)},$=function(){y(!0)},M=(0,n.useState)(0),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=function(U){var q=U.target;return W(q.value)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(J.Z,{style:{padding:0},size:"small",type:"link",onClick:$,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:Ya().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),visible:f,onOk:w,onCancel:function(){return le(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)(Be.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(Je.ZP.Group,{value:O,onChange:de,children:[(0,e.jsx)(Je.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(Je.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},Ja=r(75150),wt=r.n(Ja),Qa=(0,n.forwardRef)(function(T,g){var i=T.onOk,o=T.parentId,s=T.componentType,p=(0,t.YB)(),f=p.formatMessage,y=(0,n.useState)(""),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)(!1),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=V.Z.useForm(),te=(0,c.Z)(de,1),U=te[0],q=(0,n.useState)(""),pe=(0,c.Z)(q,2),ce=pe[0],C=pe[1],G=(0,t.QT)(Se.Q9,{initialData:[],manual:!0}),ye=G.data,je=G.run;(0,n.useImperativeHandle)(g,function(){return{show:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=s==="suite"?{suite_id:o}:{case_id:o};je(oe),$(Z),W(!0),U.setFieldsValue((0,m.Z)((0,m.Z)({},se),{},{direction:se==="\u4E0A\u5347"?"increase":"decline"}))},hide:N}});var we=function(){U.validateFields().then(function(Z){i(Z)}).catch(function(Z){return console.log(Z)})},N=function(){W(!1),C(""),U.resetFields()},Ce=function(Z){Z&&C(Z)},Ee=function(){if(ce){var Z=U.getFieldValue("name")||[],se=Array.from(new Set(Z.concat(ce.split(","))));U.setFieldsValue({name:se})}},B=function(){C(""),U.setFieldsValue({name:""})};return(0,e.jsx)(Qe.Z,{maskClosable:!1,keyboard:!1,className:wt().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(w)}),width:376,onClose:N,visible:O,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.Z,{onClick:N,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{onClick:we,type:"primary",htmlType:"submit",children:w.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(V.Z,{layout:"vertical",form:U,children:[~w.indexOf("edit")?(0,e.jsx)(V.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(ze.Z,{autoComplete:"off",placeholder:f({id:"please.enter"})})}):(0,e.jsx)(V.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsx)(We.Z,{mode:"multiple",allowClear:!0,onSearch:Ce,onBlur:Ee,onClear:B,children:ye.map(function(H){return(0,e.jsxs)(We.Z.Option,{value:H.name,children:[H.name,H.unit?"\uFF08".concat(H.unit,"\uFF09"):null]},H.name)})})}),(0,e.jsx)(V.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ht.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ht.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:f({id:"please.enter"})})}),(0,e.jsx)(V.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(We.Z,{placeholder:f({id:"please.select"}),children:[(0,e.jsx)(We.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(We.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),Xa=function(g){var i=g.id,o=g.innerKey,s=g.componentType,p=(0,t.YB)(),f=p.formatMessage,y=(0,n.useState)(1),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)(10),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)([]),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)(!0),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)(),je=(0,c.Z)(ye,2),we=je[0],N=je[1],Ce=(0,n.useState)(),Ee=(0,c.Z)(Ce,2),B=Ee[0],H=Ee[1],Z=(0,n.useState)(new Date().getTime()),se=(0,c.Z)(Z,2),oe=se[0],ne=se[1],ve=(0,n.useRef)(null),be=(0,t.QT)(Se.ge,{initialData:[]}),Le=be.data,$e=function(){var K=(0,Q.Z)((0,u.Z)().mark(function b(L,R){var x,v;return(0,u.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return q({data:[]}),G(!0),x={page_num:w,page_size:O},x[R]=L,j.next=6,(0,Se.b2)(x);case 6:v=j.sent,q(v),G(!1);case 9:case"end":return j.stop()}},b)}));return function(L,R){return K.apply(this,arguments)}}();(0,n.useEffect)(function(){$e(i,o=="1"?"case_id":"suite_id")},[w,O,oe]);var Ae=function(b,L){N(b),Le.forEach(function(R){R.name==L.domain&&(L.domain=R.id)}),H(L.id),ve.current.show("edit",L)},Ne=function(){var K=(0,Q.Z)((0,u.Z)().mark(function b(L){var R;return(0,u.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:R=(0,m.Z)((0,m.Z)({},L),{object_id:we,object_type:o==1?"case":"suite"}),o==1?Ze(R):ge(R);case 2:case"end":return v.stop()}},b)}));return function(L){return K.apply(this,arguments)}}(),ge=function(b){var L=f({id:"TestSuite.is_synchronize.all.conf"}),R=f({id:"operation.yes"}),x=f({id:"operation.no"});ut.Z.confirm({title:L,icon:(0,e.jsx)(lt.Z,{}),okText:R,cancelText:x,maskClosable:!1,onOk:function(){Ze((0,m.Z)((0,m.Z)({},b),{},{is_sync:1}))},onCancel:function(){Ze((0,m.Z)((0,m.Z)({},b),{},{is_sync:0}))}})},Ze=function(){var K=(0,Q.Z)((0,u.Z)().mark(function b(L){var R,x,v;return(0,u.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!B){j.next=6;break}return j.next=3,(0,Se.Of)(B,L);case 3:j.t0=j.sent,j.next=9;break;case 6:return j.next=8,(0,Se.WM)(L);case 8:j.t0=j.sent;case 9:R=j.t0,x=R.code,v=R.msg,x===200?(ve.current.hide(),ne(new Date().getTime())):(0,Xe.EV)(x,v);case 13:case"end":return j.stop()}},b)}));return function(L){return K.apply(this,arguments)}}(),xe=function(){var K=(0,Q.Z)((0,u.Z)().mark(function b(L,R){var x,v,I,j,h,a;return(0,u.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(x=L.object_type,v=L.object_id,I=L.name,o!=1){d.next=7;break}return d.next=4,(0,Se.G6)(L.id);case 4:d.t0=d.sent,d.next=10;break;case 7:return d.next=9,(0,Se.G6)(L.id,{is_sync:R,object_id:v,object_type:x,name:I});case 9:d.t0=d.sent;case 10:j=d.t0,h=j.code,a=j.msg,h===200?(Ie.default.success(f({id:"operation.success"})),ne(new Date().getTime())):(0,Xe.EV)(h,a);case 14:case"end":return d.stop()}},b)}));return function(L,R){return K.apply(this,arguments)}}(),Re=function(b){N(b),H(void 0),ve.current.show("new")},ae=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(b){return b&&Number(b).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(b){return b&&Number(b).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)(Be.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return Re(i)},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:180,fixed:"right",render:function(b,L){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return Ae(i,(0,m.Z)({},L))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),o==1?(0,e.jsx)(At.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return xe(L)},overlayStyle:{width:"224px"},children:(0,e.jsx)(J.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(Ga,{onOk:function(x){return xe(L,x)}})]})}}],ue=function(b,L){$(b),W(L)};return(0,e.jsxs)("div",{className:wt().warp,children:[(0,e.jsx)(Dt.Z,{className:wt().FuncOrPerfConfList_root,columns:ae,name:"sys-business-fun-or-per-conf-metric",loading:C,dataSource:U.data,page:U.page_num,totalPage:U.total_page,total:U.total,pageSize:U.page_size,handlePage:ue,paginationBottom:!0,scroll:{x:670}}),(0,e.jsx)(Qa,{onOk:Ne,ref:ve,parentId:i,componentType:s})]},i)},Ln=Xa,An=st.Z.TabPane,qa=(0,n.forwardRef)(function(T,g){var i=T.id,o=T.type,s=T.domainList,p=(0,t.YB)(),f=p.formatMessage,y=(0,n.useState)([]),le=(0,c.Z)(y,2),w=le[0],$=le[1],M=(0,n.useState)([]),X=(0,c.Z)(M,2),O=X[0],W=X[1],de=(0,n.useState)("1"),te=(0,c.Z)(de,2),U=te[0],q=te[1],pe=(0,n.useState)(!1),ce=(0,c.Z)(pe,2),C=ce[0],G=ce[1],ye=(0,n.useState)(!1),je=(0,c.Z)(ye,2),we=je[0],N=je[1],Ce=(0,n.useState)({}),Ee=(0,c.Z)(Ce,2),B=Ee[0],H=Ee[1],Z=(0,n.useState)(1),se=(0,c.Z)(Z,2),oe=se[0],ne=se[1],ve=(0,n.useState)(10),be=(0,c.Z)(ve,2),Le=be[0],$e=be[1],Ae=(0,n.useState)([]),Ne=(0,c.Z)(Ae,2),ge=Ne[0],Ze=Ne[1],xe=(0,n.useState)(!0),Re=(0,c.Z)(xe,2),ae=Re[0],ue=Re[1],K=(0,n.useState)([]),b=(0,c.Z)(K,2),L=b[0],R=b[1],x=(0,n.useRef)(null),v=(0,n.useRef)(null),I=(0,n.useState)(!1),j=(0,c.Z)(I,2),h=j[0],a=j[1];(0,n.useImperativeHandle)(g,function(){return{refresh:function(D){var P=D.refreshId;i===P&&l()}}});var l=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){var P,A,S,fe=arguments;return(0,u.Z)().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return P=fe.length>0&&fe[0]!==void 0?fe[0]:{},Ze({data:[]}),R([]),ue(!0),A=(0,m.Z)({suite_id:i,page_num:oe,page_size:Le},P),Me.next=7,(0,Se.Sb)(A);case 7:S=Me.sent,Ze(S),ue(!1);case 10:case"end":return Me.stop()}},D)}));return function(){return ie.apply(this,arguments)}}(),d=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){var P,A,S,fe,Fe;return(0,u.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,(0,Se.tz)(B.id);case 3:if(F.t0=F.sent,F.t0){F.next=6;break}F.t0={};case 6:P=F.t0,A=P.code,S=P.msg,A===200?(Ie.default.success(f({id:"request.delete.success"})),w.includes(B.id)&&(fe=w.filter(function(k){return k!==B.id}),Fe=O.filter(function(k){return k.id!==B.id}),$(fe),W(Fe)),G(!1),N(!1),H({}),l()):Ie.default.error(S||f({id:"request.delete.failed"})),F.next=15;break;case 12:F.prev=12,F.t1=F.catch(0),console.log(F.t1);case 15:case"end":return F.stop()}},D,null,[[0,12]])}));return function(){return ie.apply(this,arguments)}}(),E=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){var P,A,S;return(0,u.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,(0,Se.TZ)({id_list:w.join()});case 2:if(Fe.t0=Fe.sent,Fe.t0){Fe.next=5;break}Fe.t0={};case 5:P=Fe.t0,A=P.code,S=P.msg,A===200?(W([]),$([]),G(!1),N(!1),l({page_num:1})):Ie.default.error(S||f({id:"operation.batch.delete.failed"}));case 9:case"end":return Fe.stop()}},D)}));return function(){return ie.apply(this,arguments)}}();(0,n.useEffect)(function(){l()},[oe,Le,h]);var _=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:$([]),W([]),Ie.default.success(f({id:"operation.success"})),a(!h);case 4:case"end":return A.stop()}},D)}));return function(){return ie.apply(this,arguments)}}(),me=function(D){D.var=D.var?JSON.parse(D.var):[{name:"",val:"",des:""}],D.is_default=D.is_default?1:0;for(var P=D.domain_id_list===""?[]:D.domain_id_list.split(","),A=[],S=0;S<P.length;S++)A.push(Number.parseInt(P[S]));D.domain_list_str=A,s.forEach(function(fe){fe.name==D.domain&&(D.domain=fe.id)}),v.current.show("edit",D)},De=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(P){var A;return(0,u.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,Ct.Ob)({flag:"pass",case_id_list:P.id});case 2:A=fe.sent,A.code===200?G(!0):N(!0),H(P);case 5:case"end":return fe.stop()}},D)}));return function(P){return ie.apply(this,arguments)}}(),_e=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){var P;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,(0,Ct.Ob)({flag:"pass",case_id_list:w.join()});case 3:if(S.t0=S.sent,S.t0){S.next=6;break}S.t0={};case 6:P=S.t0,P.code===200?G(!0):N(!0),H({}),S.next=14;break;case 11:S.prev=11,S.t1=S.catch(0),console.log(S.t1);case 14:case"end":return S.stop()}},D,null,[[0,11]])}));return function(){return ie.apply(this,arguments)}}(),Oe=function(){v.current.show("batch.edit",{batch:!0,test_suite_id:i})},ht=function(D,P){q(D),U!="1"&&a(!h)},mt=function(){B.id?d():E()},dt=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(){var P,A,S,fe;return(0,u.Z)().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(P=[],O.foreach(function(F){return P.push(F.name)}),B.id){Me.next=8;break}return Me.next=5,(0,Xe.MR)({name:P.join(","),id:w.join(",")});case 5:A=Me.sent,Me.next=12;break;case 8:return S=B.name,fe=B.id,Me.next=11,(0,Xe.MR)({name:S,id:fe});case 11:A=Me.sent;case 12:A&&window.open("/refenerce/conf/?pk=".concat(A));case 13:case"end":return Me.stop()}},D)}));return function(){return ie.apply(this,arguments)}}(),_t=function(){v.current.show("new",{batch:!1,test_suite_id:i})},He={selectedRowKeys:w,onChange:function(D,P){W(P),$(D)}},Y=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(P){return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:R([P.id]);case 1:case"end":return S.stop()}},D)}));return function(P){return ie.apply(this,arguments)}}(),ee=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,render:function(D,P){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:P.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(D){return(0,e.jsx)(e.Fragment,{children:D||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",render:function(D){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:D||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(D,P){return(0,e.jsx)(Te.Z.Text,{ellipsis:{tooltip:!0},children:P.var&&P.var!="[]"?JSON.parse(P.var).map(function(A){return"".concat(A.name,"=").concat(A.val||"-",",").concat(A.des||"-",";")}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),key:"desc",ellipsis:!0,width:100,render:function(D,P){return(0,e.jsx)(zt.Z,{title:P.doc,width:70,isCode:!0,children:(0,e.jsx)(Qt.Z,{className:wt().edit,onClick:function(){return x.current.show(P)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(D,P){return P.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(D,P){return P.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(D,P){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:P.gmt_created})}},{title:(0,e.jsxs)(Be.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",onClick:_t,size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"operation",width:150,fixed:"right",render:function(D,P){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Te.Z.Link,{onClick:function(){return me((0,m.Z)({},P))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Te.Z.Link,{onClick:function(){return De((0,m.Z)({},P))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],Pe=function(D,P){ne(D),$e(P)},he=function(){var ie=(0,Q.Z)((0,u.Z)().mark(function D(P){var A,S,fe;return(0,u.Z)().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,(0,Se.Ft)(P.id,{doc:P.doc});case 2:A=Me.sent,S=A.code,fe=A.msg,S===200?(Ie.default.success(f({id:"operation.success"})),x.current.hide(),a(!h)):(0,Xe.EV)(S,fe);case 6:case"end":return Me.stop()}},D)}));return function(P){return ie.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(wt().warp," case_table_wrapper"),children:[o==="performance"&&(0,e.jsxs)(st.Z,{defaultActiveKey:"1",activeKey:U,onChange:function(D){return ht(D,i)},children:[(0,e.jsx)(An,{tab:"Test Conf"},"1"),(0,e.jsx)(An,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),U=="1"?(0,e.jsx)(Dt.Z,{className:wt().FuncOrPerfConfList_root,columns:ee,name:"sys-suite-business-fun-or-perf-conf",scroll:{x:1400},rowKey:"id",loading:ae,dataSource:ge.data,page:ge.page_num,rowSelection:He,totalPage:ge.total_page,total:ge.total,pageSize:ge.page_size,paginationBottom:!0,handlePage:Pe,expandable:o=="performance"?{expandedRowRender:function(D){return(0,e.jsx)(Ln,{componentType:"case",id:D.id,innerKey:U})},onExpand:function(D,P){D?Y(P):R([])},expandedRowKeys:L,expandIcon:function(D){var P=D.expanded,A=D.onExpand,S=D.record;return P?(0,e.jsx)(Ft.Z,{onClick:function(Fe){return A(S,Fe)}}):(0,e.jsx)(Lt.Z,{onClick:function(Fe){return A(S,Fe)}})}}:{}}):(0,e.jsx)(Ln,{componentType:"suite",id:i,innerKey:U}),(0,e.jsx)(Rn,{ref:v,onOk:_,selectedRowKeys:w}),(0,e.jsx)(Xt,{ref:x,onOk:he}),(0,e.jsxs)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(J.Z,{onClick:mt,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return G(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,className:wt().modalChange,visible:C,onCancel:function(){return G(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4}}),B.name?f({id:"TestSuite.conf.name.delete.warning"},{data:B.name}):f({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:dt,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,className:wt().modalChange,visible:we,onCancel:function(){return N(!1)},footer:[(0,e.jsx)(J.Z,{onClick:mt,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){N(!1),H({})},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),w.length>0&&(0,e.jsxs)("div",{className:wt().batch,children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(yt.Z,{indeterminate:!0}),(0,e.jsx)(Te.Z.Text,{children:f({id:"selected.item"},{data:w==null?void 0:w.length})}),(0,e.jsx)(J.Z,{type:"link",onClick:function(){W([]),$([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(J.Z,{onClick:_e,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(J.Z,{type:"primary",onClick:Oe,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})]})}),er=r(22018),tr=r.n(er),nr=(0,n.forwardRef)(function(T,g){var i=T.business_id,o=T.rowSelectionCallback,s=o===void 0?function(){}:o,p=T.restId,f=T.restFlag,y=T.deleteAllId,le=(0,t.YB)(),w=le.formatMessage,$=(0,n.useState)(!1),M=(0,c.Z)($,2),X=M[0],O=M[1],W=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),de=(0,c.Z)(W,2),te=de[0],U=de[1],q=(0,n.useState)([]),pe=(0,c.Z)(q,2),ce=pe[0],C=pe[1],G=(0,n.useState)([]),ye=(0,c.Z)(G,2),je=ye[0],we=ye[1],N=(0,n.useState)([]),Ce=(0,c.Z)(N,2),Ee=Ce[0],B=Ce[1],H=(0,n.useState)([]),Z=(0,c.Z)(H,2),se=Z[0],oe=Z[1],ne=(0,n.useRef)(null),ve=(0,n.useRef)(null),be=(0,n.useRef)(null),Le=(0,n.useState)({visible:!1,result:"",action:""}),$e=(0,c.Z)(Le,2),Ae=$e[0],Ne=$e[1],ge=(0,n.useState)({}),Ze=(0,c.Z)(ge,2),xe=Ze[0],Re=Ze[1],ae=(0,n.useState)(!1),ue=(0,c.Z)(ae,2),K=ue[0],b=ue[1],L=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(ee){var Pe,he,ie,D;return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return O(!0),A.prev=1,A.next=4,(0,Se.J1)((0,m.Z)({business_id:i},ee));case 4:Pe=A.sent,he=Pe||{},ie=he.code,D=he.msg,ie===200?U(Pe):Ie.default.error(D||w({id:"request.failed"})),O(!1),A.next=13;break;case 10:A.prev=10,A.t0=A.catch(1),O(!1);case 13:case"end":return A.stop()}},Y,null,[[1,10]])}));return function(ee){return He.apply(this,arguments)}}(),R=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(){var ee,Pe,he,ie,D;return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,(0,Se.ge)(null);case 3:if(A.t0=A.sent,A.t0){A.next=6;break}A.t0={};case 6:ee=A.t0,Pe=ee.code,he=ee.data,ie=he===void 0?[]:he,D=ee.msg,Pe===200?oe(ie):Ie.default.error(D||w({id:"request.failed"})),A.next=17;break;case 14:A.prev=14,A.t1=A.catch(0),console.log(A.t1);case 17:case"end":return A.stop()}},Y,null,[[0,14]])}));return function(){return He.apply(this,arguments)}}(),x=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(ee){var Pe,he,ie,D,P;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return O(!0),S.prev=1,S.next=4,(0,Se.PO)(ee);case 4:if(S.t0=S.sent,S.t0){S.next=7;break}S.t0={};case 7:Pe=S.t0,he=Pe.code,ie=Pe.msg,he===200?(Ie.default.success(w({id:"request.synchronize.success"})),L({page_num:te.page_num,page_size:te.page_size}),Ee.includes(ee)?(D=ve.current)===null||D===void 0||D.refresh({refreshId:ee}):(P=Ee.concat([ee]),B(P))):Ie.default.error(ie||w({id:"request.synchronize.failed"})),O(!1),S.next=17;break;case 14:S.prev=14,S.t1=S.catch(1),O(!1);case 17:case"end":return S.stop()}},Y,null,[[1,14]])}));return function(ee){return He.apply(this,arguments)}}(),v=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(){var ee,Pe,he,ie,D;return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return b(!0),A.prev=1,A.next=4,(0,Se.D8)(xe.id);case 4:if(A.t0=A.sent,A.t0){A.next=7;break}A.t0={};case 7:ee=A.t0,Pe=ee.code,he=ee.msg,Pe===200?(Ie.default.success(w({id:"request.delete.success"})),je.includes(xe.id)&&(ie=je.filter(function(S){return S!==xe.id}),D=ce.filter(function(S){return S.id!==xe.id}),we(ie),C(D),ie.length?s({business_id:i,selectedRowKeys:ie}):s({})),a(),L({page_num:te.page_num,page_size:te.page_size})):Ie.default.error(he||w({id:"request.delete.failed"})),b(!1),A.next=18;break;case 14:A.prev=14,A.t1=A.catch(1),console.log(A.t1),b(!1);case 18:case"end":return A.stop()}},Y,null,[[1,14]])}));return function(){return He.apply(this,arguments)}}(),I=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(){var ee;return(0,u.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(!je.length){he.next=16;break}return O(!0),he.prev=2,he.next=5,(0,Se.d9)({id_list:je.join()});case 5:if(he.t0=he.sent,he.t0){he.next=8;break}he.t0={};case 8:ee=he.t0,ee.code===200?(Ie.default.success(w({id:"operation.batch.delete.success"})),C([]),we([]),a(),L({page_num:1,page_size:te.page_size}),s({})):Ie.default.error(ee.msg||w({id:"operation.batch.delete.failed"})),O(!1),he.next=16;break;case 13:he.prev=13,he.t1=he.catch(2),O(!1);case 16:case"end":return he.stop()}},Y,null,[[2,13]])}));return function(){return He.apply(this,arguments)}}(),j=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(){var ee,Pe,he,ie,D,P;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(ee=Ae.action,Pe=[],ce.map(function(fe){return Pe.push(fe.name)}),ee!=="multiple"){S.next=10;break}return S.next=6,(0,Xe.MR)({name:Pe.join(","),id:je.join(",")});case 6:he=S.sent,window.open("/refenerce/conf/?pk=".concat(he)),S.next=16;break;case 10:if(ee!=="single"){S.next=16;break}return ie=xe.name,D=xe.id,S.next=14,(0,Xe.MR)({name:ie,id:D});case 14:P=S.sent,window.open("/refenerce/suite/?pk=".concat(P));case 16:case"end":return S.stop()}},Y)}));return function(){return He.apply(this,arguments)}}(),h=function(Y,ee,Pe){Y.code===200?Ne({visible:!0,result:200,action:Pe}):Y.code===201&&Ne({visible:!0,result:201,action:Pe}),Re(ee)},a=function(){Ne({visible:!1,result:"",action:""}),Re({})},l=function(){Ae.action==="single"?v():Ae.action==="multiple"&&I()};(0,n.useEffect)(function(){L({page_num:1,page_size:te.page_size}),R()},[]),(0,n.useEffect)(function(){p&&i===p&&(C([]),we([]))},[p,f]),(0,n.useEffect)(function(){i===y&&y&&me()},[y]),(0,n.useImperativeHandle)(g,function(){return{refresh:function(Y){var ee,Pe=Y.refreshId;i===Pe&&(te==null||(ee=te.data)===null||ee===void 0?void 0:ee.length)===0&&(L({page_num:1,page_size:te.page_size}),R())}}});var d=function(Y){var ee=Y.type,Pe=Y.record,he=Pe===void 0?{}:Pe;if(ee==="add"){var ie;(ie=ne.current)===null||ie===void 0||ie.show(w({id:"TestSuite.new.suite"}),(0,m.Z)({business_id:i},he))}else if(ee==="edit"){var D,P=(0,m.Z)((0,m.Z)({},he),{},{is_default:he.is_default?1:0,certificated:he.certificated?1:0});(D=ne.current)===null||D===void 0||D.show(w({id:"TestSuite.edit.suite"}),(0,m.Z)({business_id:i},P))}},E=function(){L({page_num:1,page_size:te.page_size})},_=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(ee){var Pe,he,ie;return(0,u.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return Pe=ee.record,he=Pe===void 0?{}:Pe,P.prev=1,P.next=4,(0,Ct.Ob)({flag:"pass",suite_id:he.id});case 4:if(P.t0=P.sent,P.t0){P.next=7;break}P.t0={};case 7:ie=P.t0,ie.code&&h(ie,he,"single"),P.next=14;break;case 11:P.prev=11,P.t1=P.catch(1),console.log(P.t1);case 14:case"end":return P.stop()}},Y,null,[[1,11]])}));return function(ee){return He.apply(this,arguments)}}(),me=function(){var He=(0,Q.Z)((0,u.Z)().mark(function Y(){var ee;return(0,u.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.prev=0,he.next=3,(0,Se.eq)({flag:"pass",suite_id_list:je.join()});case 3:if(he.t0=he.sent,he.t0){he.next=6;break}he.t0={};case 6:ee=he.t0,ee.code&&h(ee,{},"multiple"),he.next=13;break;case 10:he.prev=10,he.t1=he.catch(0),console.log(he.t1);case 13:case"end":return he.stop()}},Y,null,[[0,10]])}));return function(){return He.apply(this,arguments)}}(),De=[{title:"Test Suite",dataIndex:"name",fixed:"left",width:120,render:function(Y){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Y})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(Y){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Y||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),dataIndex:"test_type",onCell:function(){return{style:{maxWidth:100}}},render:function(Y){return Xe.oQ.map(function(ee){return ee.value===Y?(0,e.jsx)("span",{children:w({id:ee.value})||"-"},ee.value):null})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"is_default",render:function(Y){return(0,e.jsx)("span",{children:Y?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",onCell:function(){return{style:{maxWidth:100}}},render:function(Y){return(0,e.jsx)("span",{children:Y?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",onCell:function(){return{style:{maxWidth:100}}},render:function(Y){return Xe.ur.map(function(ee){return ee.id===Y?(0,e.jsx)("span",{children:w({id:ee.id})||"-"},ee.id):!1}).filter(Boolean)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(Y){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Y||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:150,render:function(Y){return(0,e.jsx)("div",{children:Y?(0,e.jsx)(zt.Z,{title:Y,width:150,isCode:!0,children:(0,e.jsx)("span",{children:null})}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",onCell:function(){return{style:{maxWidth:150}}},render:function(Y){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:Y})}},{title:(0,e.jsxs)(Be.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(J.Z,{type:"primary",onClick:function(){return d({type:"add"})},style:{marginLeft:8},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),width:150,fixed:"right",key:"operation",render:function(Y,ee){return(0,e.jsxs)(Ke.Z,{children:[ee.test_type==="business"?(0,e.jsx)("span",{children:"\u2003\u2003"}):(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return x(ee.id)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return d({type:"edit",record:ee})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return _({record:ee})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],_e=function(Y,ee){L({page_num:Y,page_size:ee})},Oe={selectedRowKeys:je,onChange:function(Y,ee){C(ee),we(Y),s({business_id:i,selectedRowKeys:Y})}},ht=te.data,mt=te.total,dt=te.page_num,_t=te.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Dt.Z,{className:tr().suitList_root,columns:De,name:"sys-suite-business-suite",rowKey:"id",dataSource:ht,loading:X,page:dt,pageSize:_t,total:mt,handlePage:_e,rowSelection:Oe,expandable:{expandedRowRender:function(Y){var ee=Y.test_type;return ee==="functional"||ee==="performance"?(0,e.jsx)(qa,{id:Y.id,type:ee,domainList:se,ref:ve}):ee==="business"?(0,e.jsx)(Na,(0,m.Z)((0,m.Z)({suite_id:Y.id},Y),{},{domainList:se,ref:be})):(0,e.jsx)("div",{children:null})},columnWidth:35,onExpand:function(Y,ee){if(Y){var Pe;B([ee.id]),(Pe=be.current)===null||Pe===void 0||Pe.refresh({refreshId:ee.id})}else B([])},expandedRowKeys:Ee,expandIcon:function(Y){var ee=Y.expanded,Pe=Y.onExpand,he=Y.record;return ee?(0,e.jsx)(Ft.Z,{onClick:function(D){return Pe(he,D)}}):(0,e.jsx)(Lt.Z,{onClick:function(D){return Pe(he,D)}})}},scroll:{x:1250},paginationBottom:!0}),(0,e.jsx)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:Ae.visible,onCancel:a,width:["",201].includes(Ae.result)?300:600,maskClosable:!1,footer:[(0,e.jsx)(J.Z,{onClick:l,loading:K,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:a,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(Ae.result)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4}}),Ae.action==="single"?w({id:"TestSuite.suite.delete.warning"},{data:"deleteRow.name"}):w({id:"TestSuite.have.suite.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:j,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),(0,e.jsx)(Wa,{ref:ne,callback:E,domainList:se})]})}),ar=r(55618),rn=r.n(ar),rr=r(60035),sr=(0,n.forwardRef)(function(T,g){var i,o,s=(0,t.YB)(),p=s.formatMessage,f=(0,n.useState)(!0),y=(0,c.Z)(f,2),le=y[0],w=y[1],$=(0,n.useState)({data:[],total:0,page_num:1}),M=(0,c.Z)($,2),X=M[0],O=M[1],W=(0,n.useState)(10),de=(0,c.Z)(W,2),te=de[0],U=de[1],q=(0,n.useState)([]),pe=(0,c.Z)(q,2),ce=pe[0],C=pe[1],G=(0,n.useState)({}),ye=(0,c.Z)(G,2),je=ye[0],we=ye[1],N=(0,n.useState)(!0),Ce=(0,c.Z)(N,2),Ee=Ce[0],B=Ce[1],H=(0,n.useState)(""),Z=(0,c.Z)(H,2),se=Z[0],oe=Z[1],ne=(0,n.useState)(),ve=(0,c.Z)(ne,2),be=ve[0],Le=ve[1],$e=(0,n.useState)(!1),Ae=(0,c.Z)($e,2),Ne=Ae[0],ge=Ae[1],Ze=(0,n.useState)({}),xe=(0,c.Z)(Ze,2),Re=xe[0],ae=xe[1],ue=(0,n.useRef)(null),K=(0,n.useState)({businessId:"",selectedSuiteKeys:[]}),b=(0,c.Z)(K,2),L=b[0],R=b[1],x=(0,n.useState)(""),v=(0,c.Z)(x,2),I=v[0],j=v[1],h=(0,n.useState)(!1),a=(0,c.Z)(h,2),l=a[0],d=a[1],E=(0,n.useState)(""),_=(0,c.Z)(E,2),me=_[0],De=_[1],_e=(0,n.useRef)(),Oe=function(){var S=(0,Q.Z)((0,u.Z)().mark(function fe(Fe){var Me,F,k;return(0,u.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return w(!0),re.prev=1,re.next=4,(0,Se.p4)((0,m.Z)((0,m.Z)({},je),Fe));case 4:if(re.t0=re.sent,re.t0){re.next=7;break}re.t0={};case 7:Me=re.t0,F=Me.code,k=Me.msg,F===200?O(Me):Ie.default.error(k||p({id:"request.failed"})),w(!1),re.next=16;break;case 13:re.prev=13,re.t1=re.catch(1),w(!1);case 16:case"end":return re.stop()}},fe,null,[[1,13]])}));return function(Fe){return S.apply(this,arguments)}}();(0,n.useEffect)(function(){var S={page_num:1,page_size:te,name:se,creator:be};we(S),Oe(S)},[se,be]),(0,n.useImperativeHandle)(g,function(){return{refresh:function(){se||be?(oe(""),Le(void 0)):Oe({page_num:1,page_size:te})},openCreateDrawer:_e.current.show}});var ht=function(){var S=(0,Q.Z)((0,u.Z)().mark(function fe(Fe){var Me,F,k;return(0,u.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return w(!0),dt==null||dt(),re.prev=2,re.next=5,(0,Se.AE)(Fe);case 5:if(re.t0=re.sent,re.t0){re.next=8;break}re.t0={};case 8:Me=re.t0,F=Me.code,k=Me.msg,F===200?(Ie.default.success(p({id:"request.delete.success"})),Oe(je)):Ie.default.error(k||p({id:"request.delete.failed"})),w(!1),re.next=18;break;case 15:re.prev=15,re.t1=re.catch(2),w(!1);case 18:case"end":return re.stop()}},fe,null,[[2,15]])}));return function(Fe){return S.apply(this,arguments)}}(),mt=function(fe){ge(!0),ae(fe)},dt=function(){ge(!1),ae({})},_t=[{title:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),dataIndex:"name",fixed:"left",width:"auto",filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:se?"#1890ff":void 0}})},filterDropdown:function(fe){var Fe=fe.confirm;return(0,e.jsx)(en.Z,{confirm:Fe,autoFocus:Ee,onConfirm:function(F){oe(F)}})},onFilterDropdownVisibleChange:function(fe){fe&&B(!Ee)},render:function(fe){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:fe})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",onCell:function(){return{style:{minWidth:170}}},render:function(fe){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:fe?nn()(fe).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",onCell:function(){return{style:{minWidth:170}}},render:function(fe){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:fe?nn()(fe).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),dataIndex:"creator_name",onCell:function(){return{style:{minWidth:150}}},filterIcon:function(){return(0,e.jsx)(it.Z,{style:{color:be?"#1890ff":void 0}})},filterDropdown:function(fe){var Fe=fe.confirm;return(0,e.jsx)(Wt.Z,{confirm:Fe,onConfirm:function(F){Le(F)}})},onFilterDropdownVisibleChange:function(fe){fe&&B(!Ee)},render:function(fe){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:fe})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",render:function(fe){return(0,e.jsx)(Ye.K,{ellipsis:{tooltip:!0},children:fe})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),width:150,fixed:"right",key:"operation",render:function(fe,Fe){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return _e.current.show(Fe)},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return mt(Fe)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],He=function(fe,Fe){Oe({page_num:fe,page_size:Fe})},Y=function(fe){var Fe=fe.business_id,Me=fe.selectedRowKeys,F=Me===void 0?[]:Me;Fe&&F.length?(Fe!==L.businessId&&(j(L.businessId),d(!l)),R({businessId:Fe,selectedSuiteKeys:F})):R({businessId:"",selectedSuiteKeys:[]})},ee=function(){j(L.businessId),d(!l),R({businessId:"",selectedSuiteKeys:[]})},Pe=function(){De(L.businessId)},he=(0,rr.CR)(),ie=he.width,D=X.data,P=X.total,A=X.page_num;return(0,e.jsx)(Bt.Provider,{value:{selectedRowKeys:[],selectedRow:[]},children:(0,e.jsxs)("div",{className:rn().business_root,children:[(0,e.jsx)(Dt.Z,{className:rn().businessList,columns:_t,name:"sys-suite-business-list",rowKey:"id",refreshDeps:[se,be,Ee,ce,L,I,l,me],dataSource:D,scroll:{x:"100%"},loading:le,page:A,pageSize:te,total:P,handlePage:He,expandable:{expandedRowRender:function(fe){return(0,e.jsx)(nr,{business_id:fe.id,ref:ue,rowSelectionCallback:Y,restId:I,restFlag:l,deleteAllId:me})},onExpand:function(fe,Fe){if(fe){var Me;C([Fe.id]),(Me=ue.current)===null||Me===void 0||Me.refresh({refreshId:Fe.id})}else C([])},expandedRowKeys:ce,expandIcon:function(fe){var Fe=fe.expanded,Me=fe.onExpand,F=fe.record;return Fe?(0,e.jsx)(Ft.Z,{onClick:function(z){return Me(F,z)}}):(0,e.jsx)(Lt.Z,{onClick:function(z){return Me(F,z)}})}}}),(0,e.jsx)(ut.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:Ne,onCancel:dt,width:300,maskClosable:!1,footer:[(0,e.jsx)(J.Z,{onClick:function(){return ht(Re)},children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(J.Z,{type:"primary",onClick:dt,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(lt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),((i=L.selectedSuiteKeys)===null||i===void 0?void 0:i.length)>0&&(0,e.jsxs)("div",{className:rn().deleteAll,style:{width:ie-199-88},children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(yt.Z,{indeterminate:!0}),(0,e.jsx)(Te.Z.Text,{children:p({id:"selected.item"},{data:(o=L.selectedSuiteKeys)===null||o===void 0?void 0:o.length})}),(0,e.jsx)(J.Z,{type:"link",onClick:ee,children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsx)(Ke.Z,{children:(0,e.jsx)(J.Z,{onClick:Pe,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})})]}),(0,e.jsx)(Aa,{ref:_e,callback:Oe})]})})}),ir=function(){var g=(0,t.YB)(),i=g.formatMessage,o=(0,at.TH)(),s=o.query,p=(0,n.useMemo)(function(){return s.test_type?s.test_type:"functional"},[s]),f=Wn(),y=function(O){t.m8.push("".concat(location.pathname,"?test_type=").concat(O))},le=(0,n.useRef)(),w=(0,n.useRef)(),$=(0,n.useRef)(),M=function(){(p==="functional"||p==="performance")&&le.current.openCreateDrawer(),p==="business"&&w.current.openCreateDrawer(),p==="domainconf"&&$.current.openCreateDrawer()};return(0,e.jsx)(on.Provider,{value:{domainList:f,runList:Xe.ur.map(function(X){return(0,m.Z)((0,m.Z)({},X),{},{name:i({id:X.id})})}),viewType:[{id:"Type1",name:i({id:"TestSuite.view_type.type1"})},{id:"Type2",name:i({id:"TestSuite.view_type.type2"})},{id:"Type3",name:i({id:"TestSuite.view_type.type3"})}]},children:(0,e.jsxs)(Tt.mQ,{title:(0,e.jsxs)(st.Z,{defaultActiveKey:s.test_type||"functional",onChange:y,activeKey:p,children:[(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"functional.test"})},"functional"),(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"performance.test"})},"performance"),null,(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"TestSuite.domain.conf"})},"domainconf")]}),extra:(0,e.jsx)(J.Z,{type:"primary",onClick:M,children:(0,e.jsx)(t._H,{id:"TestSuite.create.".concat(p)})}),children:[p!=="business"&&p!=="domainconf"&&(0,e.jsx)(Ia,{ref:le}),p==="business"&&(0,e.jsx)(sr,{ref:w}),p==="domainconf"&&(0,e.jsx)(Ma,{ref:$})]})})},lr=ir},31192:function(Ve,vt,r){"use strict";r.d(vt,{Tf:function(){return st},LM:function(){return n},Xd:function(){return t},um:function(){return bt},IT:function(){return St},eB:function(){return kt}});var rt=r(39428),J=r(3182),ft=r(16917);function st(Ue){return m.apply(this,arguments)}function m(){return m=(0,J.Z)((0,rt.Z)().mark(function Ue(qe){return(0,rt.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",(0,ft.WY)("/api/sys/workspace/",{params:qe}));case 1:case"end":return Te.stop()}},Ue)})),m.apply(this,arguments)}function n(Ue){return Tt.apply(this,arguments)}function Tt(){return Tt=(0,J.Z)((0,rt.Z)().mark(function Ue(qe){return(0,rt.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",(0,ft.WY)("/api/sys/workspace/",{method:"DELETE",data:{id:qe.id}}));case 1:case"end":return Te.stop()}},Ue)})),Tt.apply(this,arguments)}function t(){return at.apply(this,arguments)}function at(){return at=(0,J.Z)((0,rt.Z)().mark(function Ue(){return(0,rt.Z)().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.abrupt("return",(0,ft.WY)("/api/sys/workspace/quantity/"));case 1:case"end":return et.stop()}},Ue)})),at.apply(this,arguments)}function bt(Ue){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,J.Z)((0,rt.Z)().mark(function Ue(qe){return(0,rt.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",(0,ft.WY)("/api/sys/workspace/detail/".concat(qe,"/")));case 1:case"end":return Te.stop()}},Ue)})),Qe.apply(this,arguments)}function gt(Ue){return pt.apply(this,arguments)}function pt(){return pt=_asyncToGenerator(_regeneratorRuntime().mark(function Ue(qe){return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",request("/api/auth/personal_center/",{params:qe}));case 1:case"end":return Te.stop()}},Ue)})),pt.apply(this,arguments)}function St(Ue){return Be.apply(this,arguments)}function Be(){return Be=(0,J.Z)((0,rt.Z)().mark(function Ue(qe){return(0,rt.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",(0,ft.WY)("/api/sys/workspace/list_select/",{data:qe,method:"put"}));case 1:case"end":return Te.stop()}},Ue)})),Be.apply(this,arguments)}function kt(Ue){return xt.apply(this,arguments)}function xt(){return xt=(0,J.Z)((0,rt.Z)().mark(function Ue(qe){return(0,rt.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",(0,ft.WY)("/api/sys/workspace/all/list/",{params:qe}));case 1:case"end":return Te.stop()}},Ue)})),xt.apply(this,arguments)}}}]);
