(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3005,2485],{28645:function(Ye,Fe,n){"use strict";n.d(Fe,{Z:function(){return R}});var se=n(45972),Q=n(22374),De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},Ze=De,ce=n(25078),ne=function(Ie,ae){return Q.createElement(ce.Z,(0,se.Z)((0,se.Z)({},Ie),{},{ref:ae,icon:Ze}))};ne.displayName="PlusCircleOutlined";var R=Q.forwardRef(ne)},3741:function(Ye){Ye.exports={selectMertricTable:"selectMertricTable___2Bj7A",checkboxAllStyle:"checkboxAllStyle___1teqH",selectItem:"selectItem___1oTDh",selectItemName:"selectItemName___1_fIG",activeStyle:"activeStyle___30xWh",select_inner_span:"select_inner_span___1QlbI",select_left_title:"select_left_title___399WJ",selectTable:"selectTable___9NvaM",formInlineStyles:"formInlineStyles___3Z0fP",table_question_tooltip:"table_question_tooltip___3JYrj"}},80139:function(Ye){Ye.exports={timeAnalysisTabs:"timeAnalysisTabs___123JK",timeAnalysisExtraBtnContent:"timeAnalysisExtraBtnContent___2QpVD",btnActive:"btnActive___jxnp0"}},86252:function(Ye){Ye.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},35487:function(){},12568:function(Ye,Fe,n){"use strict";n.d(Fe,{oG:function(){return ce},_U:function(){return R},tk:function(){return Ie},D8:function(){return ee}});var se=n(20418),Q=n(35832),De=n(32326),Ze=n(22812);function ce(_){return ne.apply(this,arguments)}function ne(){return ne=(0,De.Z)((0,Q.Z)().mark(function _(c){return(0,Q.Z)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.abrupt("return",(0,Ze.WY)("/api/job/tag/",{params:c}));case 1:case"end":return pe.stop()}},_)})),ne.apply(this,arguments)}function R(_){return Me.apply(this,arguments)}function Me(){return Me=(0,De.Z)((0,Q.Z)().mark(function _(c){return(0,Q.Z)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.abrupt("return",(0,Ze.WY)("/api/job/tag/",{method:"POST",data:(0,se.Z)({},c)}));case 1:case"end":return pe.stop()}},_)})),Me.apply(this,arguments)}function Ie(_,c){return ae.apply(this,arguments)}function ae(){return ae=(0,De.Z)((0,Q.Z)().mark(function _(c,xe){return(0,Q.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,Ze.WY)("/api/job/tag/",{method:"PUT",data:(0,se.Z)((0,se.Z)({},xe),{tag_id:c})}));case 1:case"end":return oe.stop()}},_)})),ae.apply(this,arguments)}function s(_){return request("/api/auth/user/",{params:_})}var ee=function(){var _=(0,De.Z)((0,Q.Z)().mark(function c(xe){return(0,Q.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,Ze.WY)("/api/job/tag/",{method:"DELETE",data:xe}));case 1:case"end":return oe.stop()}},c)}));return function(xe){return _.apply(this,arguments)}}()},59862:function(Ye,Fe,n){"use strict";n.r(Fe),n.d(Fe,{default:function(){return ba}});var se=n(70772),Q=n(6701),De=n(54905),Ze=n(90087),ce=n(14320),ne=n(53479),R=n(88966),Me=n(11048),Ie=n(26388),ae=n(488),s=n(20418),ee=n(35832),_=n(32326),c=n(39190),xe=n(16832),pe=n(69827),oe=n(41428),o=n(22374),Je=n(526),it=n(80139),ct=n.n(it),H=n(22812),be=n(24812),Tt=n(57359),Te=n(34423),Zt=n(46721),G=n(94867),a=n(40118),te=n(29966),fe=n(79625),Se=n(96584),we=n(69230),de=n(33821),We=n(81138),Be=n(96146),Qe=n(65790),ve=n(17187),Ue=n(39489),Ke=n(33336),ke=n(25399),V=n.n(ke),Oe=n(97939),Xe=n(40204),$e=n(10724),st=n(11407),Ve=n(41604),Ae=n(88018),ot=n(58414),lt=n(20693),ye=n(3278),v=n(31650),J=n(25100),re=n(39935),Ce=function(t){return(0,H.WY)("/api/job/result/perf/analysis/",{data:t,method:"post"})},Ne=function(t){return(0,H.WY)("/api/job/result/func/analysis/",{data:t,method:"post"})},Ge=function(t){return(0,H.WY)("/api/job/result/perf/analysis/",{params:t})},tt=function(t){return request("/api/job/result/func/analysis/",{params:t})},ut=function(t){return(0,H.WY)("/api/sys/project/",{params:t})},dt=function(t){return request("/api/get/analytics/tags/",{params:t})},kt=function(t){return request("/api/case/workspace/case/",{params:t})},Vt=function(t){return request("/api/case/test_metric/",{params:t})},At=function(t){return(0,H.WY)("/api/job/test/editor/note/",{data:t,method:"post"})},_t=function(t){return(0,H.WY)("/api/job/result/perf/suite/list/",{method:"post",data:t})},St=function(t){return(0,H.WY)("/api/job/result/analysis/metric/list/",{method:"post",data:t})},e=n(52454),wt=(0,o.forwardRef)(function(f,t){var m=(0,H.YB)(),r=m.formatMessage,g=f.show_type,i=f.test_type,I=f.onOk,b=ve.Z.useForm(),D=(0,c.Z)(b,1),M=D[0],P=(0,o.useState)(!1),h=(0,c.Z)(P,2),E=h[0],T=h[1],p=(0,o.useState)({suite_name:"",conf_name:""}),K=(0,c.Z)(p,2),O=K[0],Z=K[1],x=(0,o.useState)(!1),j=(0,c.Z)(x,2),u=j[0],l=j[1],y=function(){T(!1),Z(void 0),l(!1),M.resetFields()};(0,o.useImperativeHandle)(t,function(){return{show:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;console.log($),T(!0),$!==!1&&(Z($),M.setFieldsValue({note:$.note}))},hide:y}});var U=function(){u||(l(!0),M.validateFields().then(function(){var $=(0,_.Z)((0,ee.Z)().mark(function F(B){var S,C,w,d,A,L;return(0,ee.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return S=B.note,C="perf_analysis",i!=="performance"&&(C="func_case_analysis",g==="pass_rate"&&(C="func_conf_analysis")),w={editor_obj:C,note:S},i==="performance"?w.test_job_id=O.job_id:w.result_obj_id=O.result_obj_id,Y.next=7,At(w);case 7:if(d=Y.sent,A=d.code,L=d.msg,l(!1),A===200){Y.next=13;break}return Y.abrupt("return",(0,re.EV)(A,L));case 13:I(),y();case 15:case"end":return Y.stop()}},F)}));return function(F){return $.apply(this,arguments)}}()).catch(function($){console.log($),l(!1)}))};return(0,e.jsxs)(ot.Z,{maskClosable:!1,keyboard:!1,width:376,title:(0,e.jsx)(H._H,{id:"analysis.edit.note"}),open:E,onClose:y,bodyStyle:{padding:0},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Te.Z,{children:[(0,e.jsx)(G.Z,{onClick:y,children:(0,e.jsx)(H._H,{id:"operation.cancel"})}),(0,e.jsx)(G.Z,{type:"primary",onClick:U,children:(0,e.jsx)(H._H,{id:"operation.update"})})]})}),children:[O&&(0,e.jsxs)(ne.Z,{style:{marginBottom:10,background:"#fff",padding:20,borderBottom:"10px solid #f0f2f5"},children:[(0,e.jsx)(J.Z.Text,{style:{width:70,fontWeight:600,marginRight:8},children:(0,e.jsx)(H._H,{id:"analysis.job.name"})}),(0,e.jsx)(J.Z.Paragraph,{style:{width:"calc( 100% - 70px - 8px)",marginBottom:0},ellipsis:!0,children:O.job_name})]}),(0,e.jsx)(ve.Z,{form:M,layout:"vertical",style:{background:"#fff",padding:20,height:"calc( 100% - 94px )"},children:(0,e.jsx)(ve.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.annotations"}),name:"note",children:(0,e.jsx)(ye.Z.TextArea,{rows:8,placeholder:r({id:"analysis.annotations.placeholder"})})})})]})}),Mt=n(78358),xt=n(94649),vt=(0,o.memo)(function(f){var t=(0,be.UO)(),m=t.ws_id,r=f.refresh,g=f.dataSource,i=f.test_type,I=f.show_type,b=(0,o.useRef)(null),D=(0,H.md)(),M=function(E){b.current.show(E)},P=[{title:(0,e.jsx)(H._H,{id:"analysis.table.column.id"}),dataIndex:"job_id"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.name"}),dataIndex:"job_name",render:function(E,T){return(0,e.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(location.origin,"/ws/").concat(m,"/test_result/").concat(T.job_id),children:E})}},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.server"}),dataIndex:"server",render:function(E,T){return(0,e.jsx)(xt.Z,{val:E,param:T.server_id,provider:T.server_provider})}},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.creator"}),dataIndex:"creator"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.startTime"}),dataIndex:"start_time"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.emdTime"}),dataIndex:"end_time"},D.WsTourist()&&{title:(0,e.jsx)(H._H,{id:"analysis.table.column.note"}),dataIndex:"note",render:function(E,T){return(0,e.jsx)(Mt.Pc,{title:E,width:135+28-20,access:D.WsMemberOperateSelf(T.creator_id),onEdit:function(){return M(T)}})}}].filter(Boolean);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($e.Z,{style:{width:"100%",marginTop:10},children:(0,e.jsx)(Ve.Z,{rowKey:"job_id",columns:P,pagination:!1,dataSource:g,size:"small"})}),(0,e.jsx)(wt,{ref:b,ws_id:m,show_type:I,test_type:i,onOk:r})]})}),ft=n(20507),nt=n(2605);function W(f,t){return t?"".concat(f,"\uFF1A").concat(t,"<br />"):""}function He(f,t,m){return t?"".concat(f,": <a href=","/ws/".concat(m,"/test_result/").concat(t),' target="_blank">#').concat(t,"</a><br />"):""}function bt(f){return f?"\u6D4B\u8BD5\u673A\u5668: <span>".concat(f,"</span><br />"):""}var Jt=function(t,m){return"".concat(m===""?"\u89C4\u683C : ".concat(t.seriesName,`<br />
                    Image: `).concat(t.seriesName,`<br />
                    Bandwidth: `).concat(t.seriesName,`<br />
                    RunMode: `).concat(t.seriesName,"<br />"):"")};function _n(f,t){for(var m=0,r=0,g=f.length;r<g;r++)if(f[r]===t&&(m++,m>1))return!0;return!1}var xn=["rgb(216, 124, 124)","rgb(145, 158, 139)","rgb(215, 171, 130)","rgb(110, 112, 116)","rgb(97, 160, 168)","rgb(239, 161, 141)","rgb(120, 116, 100)","rgb(204, 126, 99)","rgb(114, 78, 88)","rgb(75, 86, 91)","rgb(221, 107, 102)","rgb(117, 154, 160)","rgb(230, 157, 135)","rgb(141, 193, 169)","rgb(234, 126, 83)","rgb(238, 221, 120)","rgb(115, 163, 115)","rgb(115, 185, 188)","rgb(114, 137, 171)","rgb(145, 202, 140)","rgb(244, 159, 66)","rgb(81, 107, 145)","rgb(89, 196, 230)","rgb(237, 175, 218)","rgb(147, 183, 227)","rgb(165, 231, 240)","rgb(203, 176, 227)","rgb(137, 52, 72)","rgb(217, 88, 80)","rgb(235, 129, 70)","rgb(255, 178, 72)","rgb(242, 214, 67)","rgb(235, 219, 164)","rgb(78, 163, 151)","rgb(34, 195, 170)","rgb(123, 217, 165)","rgb(208, 100, 138)","rgb(245, 141, 178)","rgb(242, 179, 201)","rgb(63, 177, 227)","rgb(107, 230, 193)","rgb(98, 108, 145)","rgb(160, 167, 230)","rgb(196, 235, 173)","rgb(150, 222, 232)","rgb(252, 151, 175)","rgb(135, 247, 207)","rgb(247, 244, 148)","rgb(114, 204, 255)","rgb(247, 197, 160)","rgb(212, 164, 235)","rgb(210, 245, 166)","rgb(118, 242, 242)","rgb(193, 35, 43)","rgb(39, 114, 123)","rgb(252, 206, 16)","rgb(232, 124, 37)","rgb(181, 195, 52)","rgb(254, 132, 99)","rgb(155, 202, 99)","rgb(250, 216, 96)","rgb(243, 164, 59)","rgb(96, 192, 221)","rgb(215, 80, 75)","rgb(198, 229, 121)","rgb(244, 224, 1)","rgb(240, 128, 90)","rgb(38, 192, 192)","rgb(46, 199, 201)","rgb(182, 162, 222)","rgb(90, 177, 239)","rgb(255, 185, 128)","rgb(216, 122, 128)","rgb(141, 152, 179)","rgb(229, 207, 13)","rgb(151, 181, 82)","rgb(149, 112, 109)","rgb(220, 105, 170)","rgb(7, 162, 164)","rgb(154, 127, 209)","rgb(88, 141, 213)","rgb(245, 153, 78)","rgb(192, 80, 80)","rgb(89, 103, 140)","rgb(201, 171, 0)","rgb(126, 176, 10)","rgb(111, 85, 83)","rgb(193, 64, 137)","rgb(224, 31, 84)","rgb(0, 24, 82)","rgb(245, 232, 200)","rgb(184, 210, 199)","rgb(198, 179, 142)","rgb(164, 216, 194)","rgb(243, 217, 153)","rgb(211, 117, 143)","rgb(220, 195, 146)","rgb(46, 71, 131)","rgb(130, 182, 233)","rgb(255, 99, 71)","rgb(160, 146, 241)","rgb(10, 145, 93)","rgb(234, 248, 137)","rgb(102, 153, 255)","rgb(255, 102, 102)","rgb(60, 179, 113)","rgb(213, 177, 88)","rgb(56, 182, 182)","rgb(193, 46, 52)","rgb(230, 182, 0)","rgb(0, 152, 217)","rgb(43, 130, 29)","rgb(0, 94, 170)","rgb(51, 156, 168)","rgb(205, 168, 25)","rgb(50, 164, 135)","rgb(138, 124, 168)","rgb(224, 152, 199)","rgb(143, 211, 232)","rgb(113, 102, 158)","rgb(204, 112, 175)","rgb(124, 180, 204)"],bn=function(t,m,r){var g=[{value:"Fail",color:"#C84C5A"},{value:"Skip",color:"#D9D9D9"},{value:"Pass",color:"#81BF84"}],i=Object.keys(t).map(function(P){var h=t[P];return(0,s.Z)((0,s.Z)({},h),{},{value:h==null?void 0:h.result,date:P})}),I=g.map(function(P){return{type:"custom",name:P.value,itemStyle:{color:P.color},data:i.map(function(h){return h.value===P.value?[h.date,h.value,h]:[h.date,void 0,h]}),renderItem:function(E,T){var p=E.seriesName,K=E.coordSys,O=T.coord([T.value(0),T.value(1)]),Z=O[0],x=O[1],j={width:40,height:K.height/3},u={fill:g.filter(function(F){return F.value===p})[0].color};Z=Z-j.width/2;var l,y,U;p==="Skip"&&(j={width:40,height:10},x=x-j.height/2),p==="Pass"&&(x=x-j.height,y=Z+j.width/2,U=x-3,l="M ".concat(y," ").concat(U," L ").concat(y-5," ").concat(U-6," L ").concat(y+5," ").concat(U-6)),p==="Fail"&&(y=Z+j.width/2,U=x+j.height+3,l="M ".concat(y," ").concat(U," L ").concat(y-5," ").concat(U+6," L ").concat(y+5," ").concat(U+6));var z=[{type:"rect",shape:(0,s.Z)({x:Z,y:x},j),style:u}],$=Math.round(K.width/6);return z=z.concat(new Array($).fill("").reduce(function(F,B,S){return F.concat({type:"line",shape:{x1:K.x+S*6,y1:K.y+K.height/2,x2:K.x+S*6+4,y2:K.y+K.height/2},silent:!0,style:{stroke:"#595959",fill:"#595959",lineWidth:1}})},[])),p!=="Skip"&&z.push({type:"path",shape:{pathData:l,x:Z,y:x},style:u}),{type:"group",children:z}}}}),b=25,D=["Pass","Skip","Fail"],M={grid:{left:"3%",right:30},legend:{icon:"rect",itemHeight:6,itemWidth:15,top:"5%",data:D.map(function(P){return{name:P,textStyle:{color:g.filter(function(h){return h.value===P})[0].color}}})},dataZoom:i.length>b?[{type:"slider",show:!0,zoomLock:!0,start:0,end:parseInt(b/i.length*100),left:"20%",right:"20%"}]:void 0,yAxis:{type:"category",data:D.map(function(P){return{value:P,textStyle:{color:g.filter(function(h){return h.value===P})[0].color}}}),splitNumber:2,axisTick:{show:!1},axisLine:{show:!1}},xAxis:{type:"category",date:i.map(function(P){return P.date})},tooltip:{enterable:!0,trigger:"item",backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(h){var E=h.data[2];return`<div style="margin-right:10px">
                        `.concat(h.marker," ").concat(h.name,` <br />
                        `).concat(He("JobID",E.job_id,m),`
                        `).concat(W("commit",E.commit),`
                        `).concat(W(r({id:"analysis.table.column.note"}),E.note),`
                    </div>`)}},series:(0,nt.Z)(I)};return M},Cn=bn;function jn(f,t){for(var m=0,r=0,g=f.length;r<g;r++)if(f[r]===t&&(m++,m>1))return!0;return!1}function Ct(f,t){var m=f+"",r=m.length,g=m.substring(r-1,r);return g=="5"?(g="6",m=m.substring(0,r-1)+g,(m-0).toFixed(t)):(+f).toFixed(t)}var Zn=function(t){var m=t.dataSource,r=t.ws_id,g=t.provider,i=t.formatMessage,I=m||{},b=I.result_data,D=I.baseline_data,M={};if(b&&JSON.stringify(b)!=="{}"){var P=[],h=[],E=[],T=[],p=[],K={};Object.keys(b).forEach(function(Z){var x=b[Z];Object.keys(x).forEach(function(j){var u=x[j];if(u){var l=Ct(+u.value,2);K[j]=K[j]?[].concat((0,nt.Z)(K[j]),[l]):[l]}})}),Object.keys(b).forEach(function(Z){E.push({name:Z});var x={type:"line",smooth:!0},j={lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none"},u=(0,s.Z)((0,s.Z)({},x),{},{symbolSize:8,connectNulls:!1,name:Z,z:9999,opacity:1}),l=(0,s.Z)((0,s.Z)((0,s.Z)({},x),j),{},{name:"U",areaStyle:{color:"#ccc"}}),y=(0,s.Z)((0,s.Z)((0,s.Z)({},x),j),{},{name:"D",areaStyle:{color:"#fff",opacity:1},z:100}),U=[],z=[],$=[];Object.keys(b[Z]).forEach(function(F){var B=b[Z][F];if(h.push(F),B){var S=Ct(+B.value,2),C=(0,s.Z)((0,s.Z)({},B),{},{date:F,value:S});B.note&&(C.symbol="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z"),JSON.stringify(K)!=="{}"&&jn(K[F],S)&&(C.symbol="circle",C.itemStyle={color:"#000"}),U.push(C);var w=B.cv_value.replace("\xB1","").replace("%","")*100/100/100,d=Ct((1+w)*S,2),A=Ct((1-w)*S,2);z.push({date:F,value:d}),$.push({date:F,value:A})}else U.push({date:F,value:null}),z.push({date:F,value:null}),$.push({date:F,value:null})}),T.push((0,s.Z)((0,s.Z)({},l),{},{data:z})),p.push((0,s.Z)((0,s.Z)({},y),{},{data:$})),P.push((0,s.Z)((0,s.Z)({},u),{},{data:U}))}),h=Array.from(new Set(h));var O={type:"line",name:i({id:"analysis.baseline.avg"}),itemStyle:{color:"#2FC25B"}};D.value&&(E.push({name:i({id:"analysis.baseline.avg"}),icon:"path://M802,720C802.5523071289062,720,803,720.4476928710938,803,721C803,721.5523071289062,802.5523071289062,722,802,722L798,722C797.4476928710938,722,797,721.5523071289062,797,721C797,720.4476928710938,797.4476928710938,720,798,720L802,720ZM810,720C810.5523071289062,720,811,720.4476928710938,811,721C811,721.5523071289062,810.5523071289062,722,810,722L806,722C805.4476928710938,722,805,721.5523071289062,805,721C805,720.4476928710938,805.4476928710938,720,806,720L810,720ZM818,720C818.5523071289062,720,819,720.4476928710938,819,721C819,721.5523071289062,818.5523071289062,722,818,722L814,722C813.4476928710938,722,813,721.5523071289062,813,721C813,720.4476928710938,813.4476928710938,720,814,720L818,720Z"}),O={type:"line",name:i({id:"analysis.baseline.avg"}),symbol:"none",tooltip:{show:!1},lineStyle:{width:1,color:"#2FC25B",type:"dashed"},itemStyle:{color:"#2FC25B"},data:h.map(function(Z){return{date:Z,value:Ct(D.value,2)}}),z:100}),M={legend:{icon:"rect",itemHeight:2,itemWidth:10,data:E,top:"5%"},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(x){var j=x.reduce(function(u,l){var y=l.data||{};if(!y.value)return u;var U=`<div style="margin-right:10px">
                                `.concat(l.marker," ").concat(l.name,` <br />
                                `).concat(He("JobID",y.job_id,r),`
                                `).concat(W("commit",y.commit),`
                                `).concat(W("Avg",y.value),`
                                `).concat(W("CV",y.cv_value),`
                                `).concat(W(i({id:"analysis.baseline.value"}),D.value&&Number(D.value).toFixed(2)),`
                                `).concat(W(i({id:"analysis.baseline.cv"}),D.cv_value),`
                                `).concat(W("commit",y.commit),`
                                `).concat(bt(x.seriesName),`
                                `).concat(Jt(x,g),`
                                `).concat(W(i({id:"analysis.table.column.note"}),y.note),`
                            </div>`).trim();return u.concat('<div style="display:flex;">'.concat(U,"</div>"))},"");return j.length===0?"":'<div style="display:flex;flex-direction:row;gap:8px;max-width:545px;flex-wrap:wrap;">'.concat(j,"<div>")}},grid:{left:"5%",right:60,bottom:"10%"},xAxis:{type:"category",data:h,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}},axisPointer:{z:100},min:"dataMin",max:"dataMax",splitArea:{areaStyle:["#fff","#fff"]},axisLabel:{formatter:function(x){var j=(parseInt(x)+"").length;if(j>6){var u=new Map([[1,i({id:"analysis.wan"})],[2,i({id:"analysis.yi"})],[3,i({id:"analysis.zhao"})]]),l=parseInt(j/4);return Ct(x/Math.pow(1e4,l),2)+u.get(l)}return x}},zlevel:100},series:[].concat(T,p,[O],P)}}return M},Sn=Zn,wn=function(t,m,r){var g=Object.keys(t).map(function(i){return t[i]?(0,s.Z)((0,s.Z)({},t[i]),{},{date:i,pass_rate:Number(t[i].pass_rate*100)}):{date:i,pass_rate:null}});return{dataset:[{source:g}],xAxis:{type:"category",splitLine:{show:!1}},legend:{icon:"line",itemHeight:2,itemWidth:10,top:"5%"},grid:{left:"5%",right:60,bottom:"10%"},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value} %",showMaxLabel:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{type:"line",name:r({id:"analysis.TestConf.pass_rate"}),symbol:"circle",encode:{x:"date",y:"pass_rate"},smooth:!0,symbolSize:8,itemStyle:{color:"#2FC25B"}}],tooltip:{trigger:"item",axisPointer:{snap:!0,type:"cross"},backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},enterable:!0,extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(I){var b=I.data;return`<div>
                    `.concat(I.marker," ").concat(b.start_time,` <br />
                    `).concat(He("JobID",b.job_id,m),`
                    `).concat(W("commit",b.commit),`
                    `).concat(r({id:"analysis.pass_rate"}),": ").concat(Number(b.pass_rate).toFixed(2),`%<br />
                    `).concat(W(r({id:"analysis.table.total"}),b.all_case),`
                    `).concat(W(r({id:"analysis.pass_num"}),b.pass_case),`
                    `).concat(W(r({id:"analysis.table.column.note"}),b.note),`
                </div>`)}}}},Mn=wn,En=function(t){var m=t.dataSource,r=t.ws_id,g=t.formatMessage,i=m||{},I=i.result_data,b=i.baseline_data,D={};if(I&&JSON.stringify(I)!=="{}"){var M=[],P=[],h=["Metric"],E=[],T={type:"line",name:"Metric",smooth:!0},p=(0,s.Z)((0,s.Z)({},T),{},{symbolSize:8,connectNulls:!1});Object.keys(I).forEach(function(O){var Z=I[O];if(P.push(O),Z){var x=Number(Number(Z.value).toFixed(2)),j=(0,s.Z)((0,s.Z)({},Z),{},{date:O,value:x});Z.note&&(j.symbol="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z"),E.push(j)}else E.push({date:O,value:null})}),M.push((0,s.Z)((0,s.Z)({},p),{},{data:E})),P=Array.from(new Set(P));var K={type:"line",name:g({id:"analysis.baseline.avg"}),itemStyle:{color:"#2FC25B"}};b.value&&(h.push({name:g({id:"analysis.baseline.avg"}),icon:"path://M802,720C802.5523071289062,720,803,720.4476928710938,803,721C803,721.5523071289062,802.5523071289062,722,802,722L798,722C797.4476928710938,722,797,721.5523071289062,797,721C797,720.4476928710938,797.4476928710938,720,798,720L802,720ZM810,720C810.5523071289062,720,811,720.4476928710938,811,721C811,721.5523071289062,810.5523071289062,722,810,722L806,722C805.4476928710938,722,805,721.5523071289062,805,721C805,720.4476928710938,805.4476928710938,720,806,720L810,720ZM818,720C818.5523071289062,720,819,720.4476928710938,819,721C819,721.5523071289062,818.5523071289062,722,818,722L814,722C813.4476928710938,722,813,721.5523071289062,813,721C813,720.4476928710938,813.4476928710938,720,814,720L818,720Z"}),K={type:"line",name:g({id:"analysis.baseline.avg"}),symbol:"none",tooltip:{show:!1},lineStyle:{width:1,color:"#2FC25B",type:"dashed"},itemStyle:{color:"#2FC25B"},data:P.map(function(O){return{date:O,value:b.value}})}),D={legend:{icon:"line",itemHeight:2,itemWidth:10,data:h,top:"5%"},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(Z){var x=Z[0].data||{},j=`<div style="margin-right:10px">
                            `.concat(Z[0].marker," ").concat(Z[0].name,` <br />
                            `).concat(He("JobID",x.job_id,r),`
                            `).concat(W("commit",x.commit),`
                            `).concat(W("Avg",x.value),`
                            `).concat(W("CV",x.cv_value),`
                            `).concat(W(g({id:"analysis.baseline.value"}),b.value&&Number(b.value).toFixed(2)),`
                            `).concat(W(g({id:"analysis.baseline.cv"}),b.cv_value),`
                            `).concat(W("commit",x.commit),`
                            `).concat(bt(x.server),`
                            `).concat(W(g({id:"analysis.specs"}),x.instance_type),`
                            `).concat(W("Image",x.image),`
                            `).concat(W("Bandwidth",x.bandwidth),`
                            `).concat(W("RunMode",x.run_mode),`
                            `).concat(W(g({id:"analysis.table.column.note"}),x.note),`
                        </div>`).trim();return'<div style="display:flex;">'.concat(j,"</div>")}},grid:{left:"5%",right:60,bottom:"10%"},xAxis:{type:"category",data:P,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}}},series:[].concat(M,[K])}}return D},Ln=En,Qt,Gt,Ft=Oe.ZP.div(Qt||(Qt=(0,oe.Z)([`
    width: 100%;
    font-size: 16px;
    font-weight: 500;
    color:  rgba(0,0,0,0.85);
    line-height: 43px;
    height: 43px;
    border-bottom: 1px solid #E9E9E9;
    text-indent: 1em;
`]))),On=(0,Oe.ZP)($e.Z)(Gt||(Gt=(0,oe.Z)([`
    height: 360px;
    /* margin-top: 10px; */
    width: 100%;
    .ant-card-body {
        padding: 0 20px;
        border: none;
    }
`]))),Pn=function(t){var m=(0,H.YB)(),r=m.formatMessage,g=t.dataSource,i=t.title,I=t.provider_env,b=t.test_type,D=t.show_type,M=(0,be.UO)(),P=M.ws_id,h=(0,o.useRef)(),E=(0,o.useState)(void 0),T=(0,c.Z)(E,2),p=T[0],K=T[1];return o.useEffect(function(){var O=ft.S1(h.current);return O.clear(),O.showLoading(),p&&JSON.stringify(p)!=="{}"&&(b==="performance"&&(I==="aliyun"?O.setOption(Ln({dataSource:p,ws_id:P,formatMessage:r})):O.setOption(Sn({dataSource:p,ws_id:P,formatMessage:r}))),b==="functional"&&(D==="result_trend"&&O.setOption(Cn(p,P,r)),D==="pass_rate"&&O.setOption(Mn(p,P,r))),O.on("click","series.line",function(Z){var x=Z.data;if(x){var j=x.job_id;j&&(0,re.N1)("/ws/".concat(P,"/test_result/").concat(j))}})),O.hideLoading(),function(){O.dispose()}},[p,r,I,D,b,P]),(0,o.useEffect)(function(){K(void 0)},[I,b,D]),(0,o.useEffect)(function(){K(g||void 0)},[g]),(0,e.jsxs)(On,{children:[b==="performance"&&(0,e.jsx)(Ft,{children:i}),b==="functional"&&D==="result_trend"&&(0,e.jsx)(Ft,{children:(0,e.jsx)(H._H,{id:"analysis.chart.title.passRate"})}),b==="functional"&&D==="pass_rate"&&(0,e.jsx)(Ft,{children:(0,e.jsx)(H._H,{id:"analysis.chart.title.resultTrend"})}),(0,e.jsx)("div",{ref:h,style:{width:"100%",height:360-48}})]})},Tn=(0,o.memo)(Pn),Dn=n(12568),ja=n(67515),Rn=n(41083),Za=n(67448),It=n(47548),An=n(3741),at=n.n(An),Xt=o.createContext({metrics:[]}),Bt=function(){return o.useContext(Xt)},qt=function(t){var m;return Object.prototype.toString.call(t==null?void 0:t.metric)==="[object Array]"?t==null?void 0:t.metric:Object.prototype.toString.call(t==null?void 0:t.metric)==="[object String]"?t==null||(m=t.metric)===null||m===void 0?void 0:m.split(","):[]},Fn=function(t){var m,r=t.suiteList,g=t.provider_env,i=t.onChange,I=t.basicValues,b=t.metrics,D=t.runGetMetrics,M=t.visible,P=(0,be.TH)(),h=P.query,E=(0,H.YB)(),T=E.formatMessage,p=Bt(),K=p.setMetrics,O=function(d){if(I)return I[d];if(!(JSON.stringify(h)!=="{}"&&(h==null?void 0:h.test_type)!=="performance")&&g===(h==null?void 0:h.provider_env)&&h[d])return d==="metric"?qt(h):h[d]},Z=o.useState(+O("test_suite_id")||void 0),x=(0,c.Z)(Z,2),j=x[0],u=x[1],l=o.useState(+O("test_case_id")||void 0),y=(0,c.Z)(l,2),U=y[0],z=y[1],$=o.useState(O("metric")||qt(h)),F=(0,c.Z)($,2),B=F[0],S=F[1];o.useEffect(function(){M||S([])},[M]),o.useEffect(function(){K(b)},[b]),o.useEffect(function(){if((r==null?void 0:r.length)>0){var w=O("test_suite_id"),d=O("test_case_id");u(w?+w:r[0].test_suite_id),z(d?+d:void 0)}return function(){u(void 0),z(void 0)}},[r]);var C=o.useMemo(function(){if(!!r)return r.filter(function(w){return w.test_suite_id===j})[0]},[r,j]);return o.useEffect(function(){U&&j&&D({test_suite_id:j,test_case_id:U})},[U,j]),o.useMemo(function(){if(!!C){var w=C.test_case_list,d=U?w.filter(function(A){return A.test_case_id===U})[0]:w[0];return d&&!U&&z(d.test_case_id),d}},[C,U]),o.useEffect(function(){i==null||i({activeSuite:j,activeConf:U,selectMetric:B})},[j,U,B]),(0,e.jsxs)(ne.Z,{style:{height:400},children:[(0,e.jsx)(Q.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(de.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(d){u(d),z(null),S([])},placeholder:"\u8BF7\u9009\u62E9Test Suite",value:j,filterOption:function(d,A){var L;return((L=A.label)===null||L===void 0?void 0:L.toLowerCase().indexOf(d.toLowerCase()))>=0},showSearch:!0,options:r==null?void 0:r.map(function(w){return{value:w.test_suite_id,label:w.test_suite_name}})})]})}),(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Conf:"}),(0,e.jsx)(de.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(d){z(d),S([])},filterOption:function(d,A){var L;return((L=A.label)===null||L===void 0?void 0:L.toLowerCase().indexOf(d.toLowerCase()))>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Conf",value:U,options:C==null||(m=C.test_case_list)===null||m===void 0?void 0:m.map(function(w){return{value:w.test_case_id,label:w.test_case_name}})})]})})]})}),(0,e.jsx)(Q.Z,{span:24,style:{height:350},children:(0,e.jsx)(Ve.Z,{dataSource:b,columns:[{dataIndex:"",title:T({id:"analysis.metric"})}],rowKey:function(d){return d},size:"small",scroll:{y:320},rowSelection:{selectedRowKeys:B,onChange:function(d){S(d)}},onRow:function(d){return{onClick:function(){B.includes(d)?S(B.filter(function(L){return L!==d})):S(B.concat(d))}}},className:at().selectTable,pagination:!1})})]})},In=Fn,Bn=function(t){var m=t.suiteList,r=m===void 0?[]:m,g=t.test_type,i=t.isFetching,I=t.onChange,b=t.basicValues,D=(0,be.TH)(),M=D.query,P=function(l){if(b)return b[l];if(!(JSON.stringify(M)!=="{}"&&(M==null?void 0:M.test_type)!=="functional")&&M[l])return M[l]},h=o.useState(+P("test_suite_id")||void 0),E=(0,c.Z)(h,2),T=E[0],p=E[1],K=o.useState(+P("test_case_id")||void 0),O=(0,c.Z)(K,2),Z=O[0],x=O[1];o.useEffect(function(){return r.length>0&&p(+P("test_suite_id")||(r==null?void 0:r[0].test_suite_id)),function(){p(void 0),x(void 0)}},[r]),o.useEffect(function(){I==null||I({activeSuite:T,activeConf:Z})},[T,Z]);var j=o.useMemo(function(){if(!r)return[];for(var u=r.length,l=0;l<u;l++)if(r[l].test_suite_id===T){if(r[l].test_case_list.length>0){var y=Z||r[l].test_case_list[0].test_case_id;return Z||x(y),r[l].test_case_list}return[]}return[]},[T,r,g]);return(0,e.jsxs)(ne.Z,{style:{height:400},children:[(0,e.jsx)(Q.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(de.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(l){p(l),x(null)},filterOption:function(l,y){var U;return((U=y.label)===null||U===void 0?void 0:U.toLowerCase().indexOf(l==null?void 0:l.toLowerCase()))>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Suite",value:T,options:r==null?void 0:r.map(function(u){return{value:u.test_suite_id,label:u.test_suite_name}})})]})}),(0,e.jsx)(Q.Z,{span:24,style:{height:350},children:(0,e.jsx)(Ve.Z,{dataSource:j,columns:[{dataIndex:"test_case_name",title:"Test Conf"}],rowKey:"test_case_id",size:"small",loading:i,scroll:{y:320},className:at().selectTable,rowSelection:{type:"radio",selectedRowKeys:[Z],onChange:function(l){return x(l[0])}},onRow:function(l){return{onClick:function(){x(l.test_case_id)}}},pagination:!1})})]})},$n=Bn,Nn=function(t){var m=t.suiteList,r=m===void 0?[]:m,g=t.test_type,i=t.isFetching,I=t.show_type,b=t.onChange,D=t.basicValues,M=t.metrics,P=M===void 0?[]:M,h=t.runGetMetrics,E=(0,be.TH)(),T=E.query,p=function(C){if(D)return D[C];if(!(JSON.stringify(T)!=="{}"&&(T==null?void 0:T.test_type)!=="functional")&&T[C])return T[C]},K=o.useState(+p("test_suite_id")||void 0),O=(0,c.Z)(K,2),Z=O[0],x=O[1],j=o.useState(+p("test_case_id")||void 0),u=(0,c.Z)(j,2),l=u[0],y=u[1],U=o.useState(p("sub_case_name")||void 0),z=(0,c.Z)(U,2),$=z[0],F=z[1];o.useEffect(function(){return r.length>0&&x(+p("test_suite_id")||(r==null?void 0:r[0].test_suite_id)),function(){x(void 0),y(void 0)}},[r]),o.useEffect(function(){b==null||b({activeSuite:Z,activeConf:l,selectSubcase:$})},[Z,l,$]),o.useEffect(function(){l&&Z&&h({test_suite_id:Z,test_case_id:l})},[l,Z]);var B=o.useMemo(function(){if(!r)return[];for(var S=r.length,C=0;C<S;C++)if(r[C].test_suite_id===Z){if(r[C].test_case_list.length>0){var w=l||r[C].test_case_list[0].test_case_id;return l||y(w),r[C].test_case_list}return[]}return[]},[Z,r,g]);return(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(Q.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(de.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(C){x(C),y(null),F([])},placeholder:"\u8BF7\u9009\u62E9Test Suite",value:Z,filterOption:function(C,w){var d;return((d=w.label)===null||d===void 0?void 0:d.toLowerCase().indexOf(C.toLowerCase()))>=0},showSearch:!0,options:r==null?void 0:r.map(function(S){return{value:S.test_suite_id,label:S.test_suite_name}})})]})}),(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Conf:"}),(0,e.jsx)(de.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(C){y(C),g!=="performance"&&I!=="pass_rate"&&F([])},filterOption:function(C,w){return w.label.toLowerCase().indexOf(C.toLowerCase())>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Conf",value:l,options:B==null?void 0:B.map(function(S){return{value:S.test_case_id,label:S.test_case_name}})})]})})]})}),(0,e.jsx)(Q.Z,{span:24,children:(0,e.jsx)(Ve.Z,{dataSource:P,columns:[{dataIndex:"",title:"Test Case"}],rowKey:function(C){return C},size:"small",loading:i,scroll:{y:320},className:at().selectTable,rowSelection:{type:"radio",selectedRowKeys:[$],onChange:function(C){F(C==null?void 0:C[0])}},onRow:function(C){return{onClick:function(){F(C)}}},pagination:{hideOnSinglePage:!0,pageSize:2e3,style:{marginBottom:0}}})})]})},Wn=Nn,Un=function(t,m){var r=t.test_type,g=t.project_id,i=t.provider_env,I=t.onOk,b=t.show_type,D=t.tag,M=t.start_time,P=t.end_time,h=(0,be.UO)(),E=h.ws_id,T=Bt(),p=T.suiteList,K=T.suiteListLoading,O=o.useState(!1),Z=(0,c.Z)(O,2),x=Z[0],j=Z[1],u=o.useState({}),l=(0,c.Z)(u,2),y=l[0],U=l[1],z=o.useState(void 0),$=(0,c.Z)(z,2),F=$[0],B=$[1],S={ws_id:E,test_type:r,provider_env:i},C=(0,H.QT)(function(ie){return St((0,s.Z)((0,s.Z)({},S),{},{project_id:g,start_time:M,end_time:P,tag:D},ie))},{manual:!0}),w=C.data,d=C.run;o.useImperativeHandle(m,function(){return{show:function(){var ie=(0,_.Z)((0,ee.Z)().mark(function je(mt){return(0,ee.Z)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:j(!0),B(mt);case 2:case"end":return Pe.stop()}},je)}));function k(je){return ie.apply(this,arguments)}return k}()}});var A=o.useCallback(function(){j(!1),U({})},[]),L=o.useMemo(function(){var ie=y.selectMetric;return r==="performance"?"Metric".concat(ie!=null&&ie.length?"(".concat(ie==null?void 0:ie.length,")"):""):b==="pass_rate"?"Test Conf":"Test Case"},[r,b,y]),N=o.useMemo(function(){var ie=y.selectMetric,k=y.selectSubcase,je=y.activeConf;return r==="performance"?(ie==null?void 0:ie.length)>0:b!=="pass_rate"?(k==null?void 0:k.length)>0:je||!1},[r,b,y]),Y=o.useMemo(function(){if(!!p){for(var ie=p.length,k=0;k<ie;k++)if(p[k].test_suite_id===(y==null?void 0:y.activeSuite))return p[k].test_suite_name}},[p,y]),ue=o.useMemo(function(){if(!!p){for(var ie=p.length,k=0;k<ie;k++)if(p[k].test_suite_id===(y==null?void 0:y.activeSuite))return p[k].test_case_list.length>0?p[k].test_case_list:[];return[]}},[p,y]),X=o.useMemo(function(){if(!!ue){for(var ie=ue.length,k=0;k<ie;k++)if(ue[k].test_case_id===(y==null?void 0:y.activeConf))return ue[k].test_case_name}},[ue,y]),he=function(){var k=y.activeSuite,je=y.activeConf,mt=y.selectMetric,pt=y.selectSubcase,Pe={test_suite_id:k};r==="performance"&&(Pe.test_case_id=je,Pe.metric=mt,Pe.title="".concat(Y,"/").concat(X)),r==="functional"&&(Pe.test_case_id=je,Pe.title="".concat(Y,"/").concat(X),b!=="pass_rate"&&(Pe.sub_case_name=pt,Pe.test_case_id=je,Pe.title="".concat(Y,"/").concat(X))),I(Pe),A()},Ee={test_type:r,show_type:b,basicValues:F,project_id:g,provider_env:i,suiteList:p,loading:K,visible:x,runGetMetrics:d,metrics:w,onChange:function(k){U(function(je){return(0,s.Z)((0,s.Z)({},je),k)})}};return(0,e.jsx)(Rn.Z,{title:L,width:940,open:x,onCancel:A,destroyOnClose:!0,footer:(0,e.jsxs)(Te.Z,{children:[(0,e.jsx)(G.Z,{onClick:A,children:(0,e.jsx)(H._H,{id:"operation.cancel"})}),(0,e.jsx)(G.Z,{type:"primary",onClick:he,disabled:!N,children:(0,e.jsx)(H._H,{id:"operation.ok"})})]}),children:(0,e.jsxs)(It.Z,{spinning:K,children:[r==="performance"&&(0,e.jsx)(In,(0,s.Z)({},Ee)),r!=="performance"&&(b==="pass_rate"?(0,e.jsx)($n,(0,s.Z)({},Ee)):(0,e.jsx)(Wn,(0,s.Z)({},Ee)))]})})},Hn=o.forwardRef(Un),zn=n(74066),en,tn,nn,an=Oe.ZP.div(en||(en=(0,oe.Z)([`
    width: 100%;
    font-size: 16px;
    font-weight: 500;
    color:  rgba(0,0,0,0.85);
    line-height: 43px;
    height: 43px;
    border-bottom: 1px solid #E9E9E9;
    text-indent: 1em;
`]))),$t=(0,Oe.ZP)($e.Z)(tn||(tn=(0,oe.Z)([`
    /* height: 360px; */
    /* margin-top: 10px; */
    width: 100%;
    .ant-card-body {
        padding: 0 20px;
        border: none;
    }
`]))),rn=Oe.ZP.div(nn||(nn=(0,oe.Z)([`
    width: 100%;
    height: `,`px;
`])),360-48),sn,on,Nt=Oe.ZP.div.attrs(function(f){return{style:{borderStyle:f!=null&&f.isBaseline?"dashed":"solid",borderColor:f.borderColor}}})(sn||(sn=(0,oe.Z)([`
    height: 0;
    width: 10px;
    border-width: 1px;
`]))),ln="rgba(0,0,0, .35)",Yn=(0,Oe.ZP)(Te.Z).attrs(function(f){return{className:f.state?"":"legend_un_select"}})(on||(on=(0,oe.Z)([`
    cursor: pointer;
    &.legend_un_select {
        .ant-typography {
            color: `,`;
        }
        `,` {
            border-color: `,` !important;
        }
    }
`])),ln,Nt,ln),Kn=function f(t){var m,r,g=t.name,i=t.chartRef,I=t.isBaseline,b=t.isStandalone,D=t.source,M=t.provider_env,P=o.useState(!0),h=(0,c.Z)(P,2),E=h[0],T=h[1],p=function(){i==null||i.dispatchAction({type:"legendToggleSelect",name:g})},K=function(Z){var x=Z.selected;T(x[g])};return o.useEffect(function(){if(!!i&&!!g)return i.on("legendselectchanged",{seriesName:g},K),function(){i.off("legendselectchanged",{seriesName:g},K)}},[i]),b?(0,e.jsx)(Te.Z,{size:[24,0],wrap:!0,children:D==null?void 0:D.map(function(O){return(0,e.jsx)(f,(0,s.Z)((0,s.Z)({},O),{},{chartRef:i,provider_env:M}),O.name)})}):(0,e.jsxs)(Yn,{direction:"vertical",size:0,onClick:p,state:E,children:[(0,e.jsxs)(Te.Z,{children:[(0,e.jsx)(Nt,{isBaseline:I?1:0,borderColor:i==null||(m=i.getModel())===null||m===void 0?void 0:m.getColorFromPalette(g)}),(0,e.jsx)(J.Z.Text,{style:{fontSize:10},ellipsis:!0,children:g})]}),M==="aliyun"&&(0,e.jsxs)(Te.Z,{children:[(0,e.jsx)(Nt,{isBaseline:1,borderColor:i==null||(r=i.getModel())===null||r===void 0?void 0:r.getColorFromPalette(g)}),(0,e.jsx)(J.Z.Text,{style:{fontSize:10},children:"\u57FA\u7EBFAVG\u503C"})]})]})},cn=Kn,Sa=n(87967),kn=n(65320),Vn=n(28645),Jn=n(93299),un,dn,Qn=(0,Oe.ZP)(Te.Z)(un||(un=(0,oe.Z)([`
    background: #fff;
    width: 322px;
`]))),Gn=(0,Oe.ZP)(Ve.Z)(dn||(dn=(0,oe.Z)([`
    .record-row-hide {
        display: none;
    }
`]))),Xn=function(t){var m=t.fetchData,r=t.onChange,g=Bt(),i=g.metrics,I=o.useState({}),b=(0,c.Z)(I,2),D=b[0],M=b[1],P=o.useState(!1),h=(0,c.Z)(P,2),E=h[0],T=h[1],p=o.useState((m==null?void 0:m.metric)||[]),K=(0,c.Z)(p,2),O=K[0],Z=K[1];return o.useEffect(function(){return function(){M({})}},[]),o.useEffect(function(){E||r==null||r((0,s.Z)((0,s.Z)({},m),{},{metric:O}))},[O,E]),(0,e.jsx)(kn.Z,{destroyPopupOnHide:!0,open:E,trigger:["click"],onOpenChange:T,dropdownRender:function(){return(0,e.jsx)(Qn,{direction:"vertical",size:0,children:(0,e.jsx)(Gn,{pagination:!1,size:"small",rowKey:"value",rowClassName:function(u){var l;return D!=null&&D.name?~((l=u.label)===null||l===void 0?void 0:l.indexOf(D==null?void 0:D.name))?"":"record-row-hide":""},rowSelection:{selectedRowKeys:O,onChange:function(u){Z(u)}},scroll:{y:38*6},columns:[(0,s.Z)({dataIndex:"label",title:"\u6307\u6807"},(0,Jn.QT)(D,M,"name"))],dataSource:i==null?void 0:i.map(function(j){return{value:j,label:j}})})})},children:(0,e.jsx)(Vn.Z,{style:{cursor:"pointer"}})})},vn=Xn,qn=["value"],ea="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z",ta=function(t){var m,r,g=t.fetchData,i=g===void 0?{}:g,I=t.setFetchData,b=t.provider_env,D=t.valueChange,M=t.setLoading,P=(0,H.YB)(),h=P.formatMessage,E=(0,be.UO)(),T=E.ws_id,p=o.useRef(null),K=o.useState(void 0),O=(0,c.Z)(K,2),Z=O[0],x=O[1],j=(0,H.QT)(function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i;return Ce(z)},{debounceInterval:200,refreshDeps:[i],ready:!!(i!=null&&i.metric),onSuccess:function(){M(!1)},onError:function(){M(!1)}}),u=j.data,l=j.mutate;o.useEffect(function(){if(!!u){var z=u.job_list;!z||D==null||D(z)}},[u]);var y=function($){var F=$.metric;I(function(B){return B.map(function(S){return S.key===(i==null?void 0:i.key)?(0,s.Z)((0,s.Z)({},S),{},{metric:F}):S})}),F.length===0&&l(null)},U=o.useMemo(function(){var z;if(!!u){var $=u.metric_map;return(z=Object.keys($))===null||z===void 0?void 0:z.reduce(function(F,B){var S=$[B],C=S.result_data,w=S.baseline_data,d=Object.entries(C).reduce(function(N,Y){var ue=(0,c.Z)(Y,2),X=ue[0],he=ue[1];if(he){var Ee=he.value,ie=(0,ae.Z)(he,qn),k=Ee?Number(Number(Ee).toFixed(2)):null;N.lineDatas.push((0,s.Z)((0,s.Z)({},ie),{},{date:X,baseline_data:w,value:k,symbol:Ee!=null&&Ee.note?ea:void 0}))}else N.lineDatas.push({date:X,value:null});return N.xAxis.includes(u)||N.xAxis.push(X),N},{xAxis:[],lineDatas:[]}),A=d.xAxis,L=d.lineDatas;return F.title.push({name:B,isBaseline:0}),F.baseline.push({type:"line",name:B,symbol:"none",tooltip:{show:!1},lineStyle:{width:1,type:"dashed"},data:A==null?void 0:A.map(function(N){return{date:N,value:w.value}})}),F.series.push({type:"line",name:B,showAllSymbol:!0,smooth:!0,symbolSize:8,connectNulls:!1,data:L}),F.xAxis=Array.from(new Set(F.xAxis.concat(A))),F},{baseline:[],title:[],series:[],xAxis:[]})}},[u]);return o.useEffect(function(){if(!!p.current&&!!U){var z=U.xAxis,$=U.series,F=U.title,B=U.baseline,S=ft.S1(p.current);return S.clear(),S.showLoading(),S.setOption({legend:{data:F.map(function(C){return C.name}),show:!1},tooltip:{trigger:"item",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(w){var d=w.data||{},A=d.baseline_data,L=`<div style="margin-right:10px">
                            `.concat(w.marker," ").concat(w.name," ").concat(w.seriesName,`<br />
                            `).concat(He("JobID",d.job_id,T),`
                            `).concat(W("commit",d.commit),`
                            `).concat(W("Avg",d.value),`
                            `).concat(W("CV",d.cv_value),`
                            `).concat(W(h({id:"analysis.baseline.value"}),(A==null?void 0:A.value)&&Number(A==null?void 0:A.value).toFixed(2)),`
                            `).concat(W(h({id:"analysis.baseline.cv"}),A==null?void 0:A.cv_value),`
                            `).concat(W("commit",d.commit),`
                            `).concat(bt(d.server),`
                            `).concat(W(h({id:"analysis.specs"}),d.instance_type),`
                            `).concat(W("Image",d.image),`
                            `).concat(W("Bandwidth",d.bandwidth),`
                            `).concat(W("RunMode",d.run_mode),`
                            `).concat(W(h({id:"analysis.table.column.note"}),d.note),`
                        </div>`).trim();return'<div style="display:flex;">'.concat(L,"</div>")}},grid:{left:"5%",right:60,bottom:"10%",top:"5%"},xAxis:{type:"category",data:z,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}}},series:[].concat((0,nt.Z)($),(0,nt.Z)(B))}),S.on("click","series.line",function(C){if(C!=null&&C.data){var w=C==null?void 0:C.data,d=w.job_id;d&&(0,re.N1)("/ws/".concat(T,"/test_result/").concat(d))}}),S.hideLoading(),x(S),function(){S.dispose(),x(void 0)}}},[U]),u?(u==null||(m=u.job_list)===null||m===void 0?void 0:m.length)===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)($t,{children:[(0,e.jsx)(an,{style:{height:"auto",lineHeight:"28px",minHeight:43,display:"flex",alignItems:"center"},children:(0,e.jsxs)(Te.Z,{size:0,children:[i==null?void 0:i.metric.map(function(z){return(0,e.jsx)(J.Z.Text,{children:z},z)}),(0,e.jsx)(vn,{onChange:y,fetchData:i})]})}),(0,e.jsx)(ne.Z,{justify:"center",children:(0,e.jsx)(Te.Z,{size:16,children:(r=U.title)===null||r===void 0?void 0:r.map(function(z){return(0,e.jsx)(cn,(0,s.Z)((0,s.Z)({provider_env:b},z),{},{chartRef:Z}),z.name)})})}),(0,e.jsx)(rn,{ref:p})]}):(0,e.jsx)(e.Fragment,{})},na=o.memo(ta,function(f,t){return f.fetchData.key===t.fetchData.key}),aa="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z";function Et(f,t){var m=f+"",r=m.length,g=m.substring(r-1,r);return g=="5"?(g="6",m=m.substring(0,r-1)+g,(m-0).toFixed(t)):(+f).toFixed(t)}var ra=function(t){var m,r,g,i=t.fetchData,I=i===void 0?{}:i,b=t.provider_env,D=t.valueChange,M=t.setFetchData,P=t.setLoading,h=(0,H.YB)(),E=h.formatMessage,T=(0,be.UO)(),p=T.ws_id,K=o.useRef(null),O=o.useState(void 0),Z=(0,c.Z)(O,2),x=Z[0],j=Z[1],u=(0,H.QT)(function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I;return Ce(B)},{manual:!0,debounceInterval:100,refreshDeps:[I],onSuccess:function(){P(!1)},onError:function(){P(!1)}}),l=u.data,y=u.mutate,U=u.loading,z=u.run;o.useEffect(function(){I.metric&&z()},[I]),o.useEffect(function(){if(!!l){var B=l.job_list;!B||D==null||D(B)}},[l]);var $=function(S){var C=S.metric;M(function(w){return w.map(function(d){return d.key===(I==null?void 0:I.key)?(0,s.Z)((0,s.Z)({},d),{},{metric:C}):d})}),C.length===0&&y(null)},F=o.useMemo(function(){var B;if(!!l){var S=l.metric_map,C=l.job_list,w=C.reduce(function(d,A){var L=A.date,N=A.value,Y=Et(+N,2);return d[L]=d[L]?d[L].concat(Y):[Y],d},{});return(B=Object.keys(S))===null||B===void 0?void 0:B.reduce(function(d,A){var L=S[A],N=L.result_data,Y=L.baseline_data,ue=Object.entries(N).reduce(function(je,mt){var pt=(0,c.Z)(mt,2),Pe=pt[0],ht=pt[1],Lt=Object.keys(ht).reduce(function(qe,gt){var yt=ht[gt];if(yt){var jt=Et(+yt.value,2),le=yt.cv_value.replace("\xB1","").replace("%","")*100/100/100,q=Et((1+le)*jt,2),me=Et((1-le)*jt,2),_e=(0,s.Z)((0,s.Z)({},yt),{},{date:gt,metric_name:A,ip:Pe,baseline_data:Y,up_value:q,down_value:me,value:jt});return yt.note&&(_e.symbol=aa),w[gt]&&_n(w[gt],jt)&&(_e.symbol="circle",_e.itemStyle={color:"#000"}),qe.concat(_e)}return qe.concat({date:gt,ip:Pe,value:null,baseline_data:Y,metric_name:A})},[]),rt="".concat(A,"(").concat(Pe,")");return je.titles.push({name:rt}),je.lineDatas.push({type:"line",smooth:!0,ip:Pe,symbolSize:8,connectNulls:!1,name:rt,z:9999,opacity:1,showAllSymbol:!0,data:Lt}),je.upLine.push({type:"line",smooth:!0,lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none",name:rt,select:{disabled:!0},selectedMode:!1,areaStyle:{color:"#ccc"},data:Lt.map(function(qe){return(0,s.Z)((0,s.Z)({},qe),{},{value:qe.up_value})})}),je.downLine.push({type:"line",smooth:!0,lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none",name:rt,select:{disabled:!0},selectedMode:!1,areaStyle:{color:"#fff",opacity:1},z:99,data:Lt.map(function(qe){return(0,s.Z)((0,s.Z)({},qe),{},{value:qe.down_value})})}),je.xAxis=Object.keys(ht),je},{xAxis:[],lineDatas:[],upLine:[],downLine:[],titles:[]}),X=ue.xAxis,he=ue.lineDatas,Ee=ue.upLine,ie=ue.downLine,k=ue.titles;return d.baseline.push({type:"line",name:A,symbol:"none",tooltip:{show:!1},lineStyle:{width:1,type:"dashed"},z:9999,data:X==null?void 0:X.map(function(je){return{date:je,value:Y.value}})}),d.title.push([{name:A,isBaseline:1}].concat((0,nt.Z)(k))),d.series=d.series.concat(Ee,ie,he),d.xAxis=X,d},{baseline:[],title:[],series:[],xAxis:[]})}},[l]);return o.useEffect(function(){if(!!K.current&&!!F){var B=F.xAxis,S=F.series,C=F.title,w=F.baseline,d=ft.S1(K.current);return d.clear(),d.showLoading(),d.setOption({legend:{icon:"rect",itemHeight:2,itemWidth:10,data:C.flat().map(function(A){return A.name}),show:!1},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;max-height: 320px;overflow: auto;",formatter:function(L){var N=L.reduce(function(Y,ue){var X=ue.data||{};if(!X.value)return Y;var he=`<div style="margin-right:10px">
                                `.concat(ue.marker," ").concat(ue.seriesName,` <br />
                                `).concat(He("JobID",X.job_id,p),`
                                `).concat(W("commit",X.commit),`
                                `).concat(W("Avg",X.value),`
                                `).concat(W("CV",X.cv_value),`
                                `).concat(W(E({id:"analysis.baseline.value"}),(X==null?void 0:X.baseline_data.value)&&Number(X==null?void 0:X.baseline_data.value).toFixed(2)),`
                                `).concat(W(E({id:"analysis.baseline.cv"}),X==null?void 0:X.baseline_data.cv_value),`
                                `).concat(W("commit",X.commit),`
                                `).concat(bt(L.seriesName),`
                                `).concat(Jt(L,b),`
                                `).concat(W(E({id:"analysis.table.column.note"}),X.note),`
                            </div>`).trim();return Y.concat('<div style="display:flex;">'.concat(he,"</div>"))},"");return N.length===0?"":'<div style="display:flex;flex-direction:row;gap:8px;max-width:545px;flex-wrap:wrap;">'.concat(N,"<div>")}},color:xn,grid:{left:"5%",right:60,bottom:"10%",top:20},xAxis:{type:"category",data:B,axisLabel:{showMaxLabel:!0},axisPointer:{z:9999}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{z:100},min:"dataMin",max:"dataMax",splitArea:{areaStyle:{color:["#fff","#fff"]}},axisLabel:{formatter:function(L){var N=(parseInt(L)+"").length;if(N>6){var Y=new Map([[1,E({id:"analysis.wan"})],[2,E({id:"analysis.yi"})],[3,E({id:"analysis.zhao"})]]),ue=parseInt(N/4);return Et(L/Math.pow(1e4,ue),2)+Y.get(ue)}return L}},zlevel:100},series:[].concat((0,nt.Z)(S),(0,nt.Z)(w))}),d.on("click","series.line",function(A){if(A!=null&&A.data){var L=A==null?void 0:A.data,N=L.job_id;N&&(0,re.N1)("/ws/".concat(p,"/test_result/").concat(N))}}),d.hideLoading(),j(d),function(){d.dispose(),j(void 0)}}},[F]),l?(l==null||(m=l.job_list)===null||m===void 0?void 0:m.length)===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)($t,{children:(0,e.jsxs)(It.Z,{spinning:U,children:[(0,e.jsx)(an,{style:{height:"auto",lineHeight:"28px",minHeight:43,display:"flex",alignItems:"center"},children:(0,e.jsxs)(Te.Z,{size:0,wrap:!0,children:[I==null||(r=I.metric)===null||r===void 0?void 0:r.map(function(B){return(0,e.jsx)(J.Z.Text,{children:B},B)}),(0,e.jsx)(vn,{onChange:$,fetchData:I})]})}),(0,e.jsx)(ne.Z,{justify:"center",children:(0,e.jsx)(Te.Z,{size:[24,0],wrap:!0,style:{paddingLeft:"3%",paddingRight:"3%"},children:F==null||(g=F.title)===null||g===void 0?void 0:g.map(function(B,S){return(0,e.jsx)(cn,{isStandalone:!0,source:B,chartRef:x,provider_env:b},S)})})}),(0,e.jsx)(rn,{ref:K})]})}):(0,e.jsx)(e.Fragment,{})},ia=o.memo(ra,function(f,t){return JSON.stringify(f==null?void 0:f.fetchData)===JSON.stringify(t==null?void 0:t.fetchData)}),wa=n(64510),fn=n(87445),sa=function(){return(0,e.jsx)($t,{style:{width:"100%"},bordered:!1,children:(0,e.jsx)(ne.Z,{style:{height:innerHeight-176-50-120},justify:"center",align:"middle",children:(0,e.jsx)(fn.Z,{image:fn.Z.PRESENTED_IMAGE_SIMPLE})})})},oa=sa,mn,la=Oe.ZP.div(mn||(mn=(0,oe.Z)([`
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 999;
    background-color: #fff;
    display: flex;
    justify-content: center;
    padding-top: 220px;
`]))),ca=function(){return(0,e.jsx)(la,{children:(0,e.jsx)(It.Z,{})})},ua=ca,Dt=n(91959),da=["time"],pn,va=(0,Oe.ZP)(ne.Z)(pn||(pn=(0,oe.Z)([`
    position:relative;
    width:300px;
    .tootip_pos {
        position:absolute;
        left:300px;
        top:4px;
    }
`]))),Wt={fontWeight:"bold"},fa=function(t){var m,r,g=(m=t.title)===null||m===void 0?void 0:m.split("/");return(0,e.jsx)("div",{style:{color:"#000"},children:(0,e.jsxs)(Ke.Z,{column:1,children:[(0,e.jsx)(Ke.Z.Item,{label:"Suite",labelStyle:(0,s.Z)((0,s.Z)({},Wt),{},{paddingLeft:10}),children:g==null?void 0:g[0]}),(0,e.jsx)(Ke.Z.Item,{label:"Conf",labelStyle:(0,s.Z)((0,s.Z)({},Wt),{},{paddingLeft:12}),children:g==null?void 0:g[1]}),(0,e.jsx)(Ke.Z.Item,{label:"Metric",contentStyle:{display:"inline-block",paddingBottom:8},labelStyle:(0,s.Z)({},Wt),children:t==null||(r=t.metric)===null||r===void 0?void 0:r.map(function(i){return(0,e.jsx)("div",{children:i},i)})})]})})},ma=function(t,m){var r,g=(0,H.YB)(),i=g.formatMessage,I=(0,be.UO)(),b=I.ws_id,D=(0,be.TH)(),M=D.query,P=t.info,h=t.setInfo,E=P.show_type,T=P.provider_env,p=P.test_type,K=(0,o.useState)({}),O=(0,c.Z)(K,2),Z=O[0],x=O[1],j=(0,o.useState)([]),u=(0,c.Z)(j,2),l=u[0],y=u[1],U=(0,o.useState)(null),z=(0,c.Z)(U,2),$=z[0],F=z[1],B=(0,o.useState)(JSON.stringify(M)!=="{}"),S=(0,c.Z)(B,2),C=S[0],w=S[1],d=o.useState([]),A=(0,c.Z)(d,2),L=A[0],N=A[1],Y=(0,o.useRef)(),ue=ve.Z.useForm(),X=(0,c.Z)(ue,1),he=X[0],Ee=ve.Z.useWatch("project_id",he),ie=ve.Z.useWatch("tag",he),k=ve.Z.useWatch("time",he);o.useImperativeHandle(m,function(){return{reset:function(){he.resetFields(),F(void 0)}}});var je=(0,H.QT)(function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ws_id:b,page_size:999};return(0,Dn.oG)(le)},{initialData:[]}),mt=je.data,pt=(0,H.QT)(function(){return ut({ws_id:b,page_size:500})},{initialData:[]}),Pe=pt.data,ht=function(){var le=(0,_.Z)((0,ee.Z)().mark(function q(me){var _e,ge,Re,ze,et,Ot;return(0,ee.Z)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(h(me),w(!0),y([]),x({}),p!=="performance"){Le.next=10;break}return Le.next=7,Ce(me);case 7:Le.t0=Le.sent,Le.next=13;break;case 10:return Le.next=12,Ne(me);case 12:Le.t0=Le.sent;case 13:if(_e=Le.t0,ge=_e.data,Re=_e.code,w(!1),Re===200){Le.next=19;break}return Le.abrupt("return");case 19:if(ge){Le.next=21;break}return Le.abrupt("return");case 21:if(ze=ge.job_list,et=ge.metric_map,Ot=ge.case_map,!(ze&&ze.length>0)){Le.next=26;break}return x(p==="performance"?et:Ot),y(ze),Le.abrupt("return");case 26:case"end":return Le.stop()}},q)}));return function(me){return le.apply(this,arguments)}}(),Lt=function(){he.getFieldValue("project_id")?Y.current.show($):Be.default.error(i({id:"analysis.selected.error"}))},rt=function(){var q=p==="functional"?{show_type:E}:{provider_env:T},me=he.getFieldsValue(),_e=me.time,ge=(0,ae.Z)(me,da);if(_e&&_e.length>0){var Re=(0,c.Z)(_e,2),ze=Re[0],et=Re[1];q.start_time=V()(ze).format("YYYY-MM-DD"),q.end_time=V()(et).format("YYYY-MM-DD")}return(0,s.Z)((0,s.Z)({},q),ge)},qe=function(q){var me=q.test_suite_id,_e=q.test_case_id,ge=rt(),Re=ge.project_id;Re&&me&&_e&&ht((0,s.Z)((0,s.Z)({},ge),q))};o.useEffect(function(){var le,q=rt(),me=(0,s.Z)((0,s.Z)((0,s.Z)({},q),$),{},{metric:$==null||(le=$.metric)===null||le===void 0?void 0:le.toString()});(L==null?void 0:L.length)!==0&&(L==null||L.forEach(function(_e){var ge=_e.metric,Re=ge.at(0);me[Re]=ge.toString()})),h(me)},[L,$]);var gt=function(q){if(F(q),p!=="performance")qe(q);else{var me=q.metric,_e=rt(),ge=me.map(function(Re){return(0,s.Z)((0,s.Z)((0,s.Z)({},_e),q),{},{metric:[Re],key:(0,Dt.Z)()})});y([]),N(ge)}},yt=function(){var q=rt();if(y([]),x(null),N([]),$){var me=$.test_suite_id,_e=$.test_case_id,ge=$.metric,Re=q.project_id;if(me&&_e&&Re){if(p==="performance"){var ze=ge.map(function(et){return(0,s.Z)((0,s.Z)((0,s.Z)({},q),$),{},{metric:[et],key:(0,Dt.Z)()})});N(ze);return}ht((0,s.Z)((0,s.Z)({},q),$))}}};(0,o.useEffect)(function(){return function(){x(null),y([]),N([])}},[T,E,p]),(0,o.useEffect)(function(){if(M&&JSON.stringify(M)!=="{}"){var le=M.test_type,q=M.project_id,me=M.tag,_e=M.start_time,ge=M.end_time,Re=M.provider_env,ze=M.metric,et=M.title,Ot=M.test_suite_id,Ut=M.test_case_id,Le=M.sub_case_name,Ht=M.days,Pt=Object.prototype.toString.call(ze)==="[object Array]"?ze:ze==null?void 0:ze.split(",");if(p===le){var Rt={metric:Pt,project_id:q,tag:me,test_suite_id:Ot,test_case_id:Ut,sub_case_name:Le,show_type:E,provider_env:Re},zt=_e,gn=ge||V()().format("YYYY-MM-DD"),yn=!isNaN(+Ht)&&Object.prototype.toString.call(+Ht)==="[object Number]";if(yn&&(zt=V()().subtract(Ht-1,"days"),gn=V()()),Rt.start_time=V()(zt).format("YYYY-MM-DD"),Rt.end_time=V()(gn).format("YYYY-MM-DD"),et)if(p!=="performance")w(!1),ht(Rt);else{var Ca=Pt==null?void 0:Pt.map(function(Yt){var Kt;return(0,s.Z)((0,s.Z)({},Rt),{},{metric:M[Yt]?(Kt=M[Yt])===null||Kt===void 0?void 0:Kt.split(","):[Yt],key:(0,Dt.Z)()})});y([]),N(Ca)}et||w(!1),F({title:et,metric:Pt,sub_case_name:Le,test_suite_id:Ot,test_case_id:Ut}),yn?he.setFieldsValue({time:[V()(zt),V()()]}):_e&&he.setFieldsValue({time:[V()(_e),ge?V()(ge):V()()]}),he.setFieldsValue({project_id:+q||void 0,tag:+me||""})}}},[]);var jt=function(q){y(function(me){var _e=q.map(function(ge){return ge.id});return me.filter(function(ge){return!_e.includes(ge.id)}).concat(q).sort(function(ge,Re){return Re.id-ge.id})})};return(0,e.jsxs)("div",{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)",position:"relative"},children:[C&&(0,e.jsx)(ua,{}),(0,e.jsxs)(ne.Z,{style:{padding:"0 20px 10px",background:"#fff",marginBottom:10},children:[(0,e.jsx)(Q.Z,{span:24,children:(0,e.jsxs)(ve.Z,{layout:"inline",form:he,colon:!0,onFieldsChange:yt,className:at().formInlineStyles,children:[(0,e.jsx)(ve.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.project"}),name:"project_id",children:(0,e.jsx)(de.Z,{placeholder:i({id:"analysis.project.placeholder"}),showSearch:!0,filterOption:function(q,me){return me.label.toLowerCase().indexOf(q.toLowerCase())>=0},options:Pe.map(function(le){return{value:le.id,label:le.name}})})}),(0,e.jsx)(ve.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.tag"}),children:(0,e.jsxs)(va,{children:[(0,e.jsx)(ve.Z.Item,{name:"tag",initialValue:"",children:(0,e.jsx)(de.Z,{allowClear:!0,placeholder:i({id:"analysis.tag.placeholder"}),showSearch:!0,style:{width:300},filterOption:function(q,me){return me.label.toLowerCase().indexOf(q.toLowerCase())>=0},options:[{value:"",label:i({id:"analysis.indistinguishable"})}].concat(mt.filter(function(le){var q=le.creator;return Object.prototype.toString.call(q)==="[object Number]"}).map(function(le){return{value:le.id,label:le.name}}))})}),(0,e.jsx)("div",{className:"tootip_pos",children:(0,e.jsx)(Se.Z,{overlayClassName:at().table_question_tooltip,color:"#fff",placement:"top",arrowPointAtCenter:!0,title:i({id:"analysis.only.the.job.data"}),children:(0,e.jsx)(zn.Z,{style:{color:"rgba(0, 0, 0, 0.65)",marginLeft:5}})})})]})}),(0,e.jsx)(ve.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.date"}),name:"time",initialValue:[V()().subtract(29,"days"),V()().startOf("day")],children:(0,e.jsx)(te.Z.RangePicker,{ranges:(r={},(0,Ie.Z)(r,i({id:"analysis.7days"}),[V()().subtract(6,"days"),V()().startOf("day")]),(0,Ie.Z)(r,i({id:"analysis.30days"}),[V()().subtract(29,"days"),V()().startOf("day")]),(0,Ie.Z)(r,i({id:"analysis.60days"}),[V()().subtract(59,"days"),V()().startOf("day")]),(0,Ie.Z)(r,i({id:"analysis.90days"}),[V()().subtract(89,"days"),V()().startOf("day")]),r)})})]})}),(0,e.jsx)(Q.Z,{span:24,children:(0,e.jsxs)(ne.Z,{style:{marginTop:12},align:"middle",children:[p==="functional"&&E==="pass_rate"&&(0,e.jsx)("span",{className:at().select_left_title,children:"Test Conf\uFF1A"}),p==="functional"&&E==="result_trend"&&(0,e.jsx)("span",{className:at().select_left_title,children:"Test Case\uFF1A"}),p!=="functional"&&(0,e.jsxs)("span",{className:at().select_left_title,children:[(0,e.jsx)(H._H,{id:"analysis.metric"}),"\uFF1A"]}),$&&(0,e.jsx)(Se.Z,{title:E==="result_trend"?$.sub_case_name:(0,e.jsx)(fa,(0,s.Z)({},$)),autoAdjustOverflow:!0,placement:"bottomLeft",color:"#fff",overlayInnerStyle:{minWidth:300,maxHeight:300,overflowY:"auto",color:"#333"},children:(0,e.jsx)("span",{className:at().select_inner_span,children:$.title})}),(0,e.jsx)(G.Z,{style:{padding:0,marginLeft:8},type:"link",onClick:Lt,children:(0,e.jsx)(H._H,{id:"analysis.select"})})]})})]}),p==="performance"&&(0,e.jsx)(ne.Z,{children:(0,e.jsx)(Te.Z,{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)"},direction:"vertical",children:L==null?void 0:L.map(function(le){var q={fetchData:le,key:le.key,provider_env:T,valueChange:jt,setFetchData:N,setLoading:w};return T==="aliyun"?(0,e.jsx)(na,(0,s.Z)({},q)):(0,e.jsx)(ia,(0,s.Z)({},q))})})}),(0,e.jsx)(ne.Z,{children:(0,e.jsxs)(Te.Z,{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)"},direction:"vertical",children:[p!=="performance"&&(l==null?void 0:l.length)>0&&(0,e.jsx)(Tn,{test_type:p,provider_env:T,show_type:E,dataSource:Z}),(l==null?void 0:l.length)===0&&(0,e.jsx)(oa,{}),(l==null?void 0:l.length)>0&&(0,e.jsx)(vt,{refresh:function(){if(p==="performance"){N(function(q){return q.map(function(me){return(0,s.Z)((0,s.Z)({},me),{},{key:(0,Dt.Z)()})})});return}qe($)},dataSource:l,test_type:p,show_type:E})]})}),(0,e.jsx)(Hn,{ref:Y,project_id:Ee,start_time:k&&V()(k[0]).format("YYYY-MM-DD"),end_time:k&&V()(k[1]).format("YYYY-MM-DD"),tag:ie,show_type:E,provider_env:T,test_type:p,onOk:gt})]})},pa=o.forwardRef(ma),ha=n(52493),ga=n(20905),ya=["test_type","show_type","provider_env"],hn,_a=(0,Oe.ZP)(pe.Z.Content).attrs(function(f){return{style:{minHeight:f==null?void 0:f.minHeight}}})(hn||(hn=(0,oe.Z)([`
    overflow: auto;
    margin-bottom: 10px;
    background: #fff;
`]))),xa=function(t){var m=(0,H.YB)(),r=m.formatMessage,g=(0,be.TH)(),i=g.query,I=g.key,b=(0,be.UO)(),D=b.ws_id,M=t.route,P=o.useState([]),h=(0,c.Z)(P,2),E=h[0],T=h[1],p=o.useRef(null),K="aligroup",O="Workspace.TestAnalysis.".concat(M.name),Z=function(){var L=(0,_.Z)((0,ee.Z)().mark(function N(Y){var ue,X,he,Ee;return(0,ee.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Ge(Y);case 2:if(ue=k.sent,X=ue.data,he=ue.code,Ee=ue.msg,he===200){k.next=8;break}return k.abrupt("return",console.log(Ee));case 8:T(X||[]);case 9:case"end":return k.stop()}},N)}));return function(Y){return L.apply(this,arguments)}}();o.useEffect(function(){if(JSON.stringify(i)!=="{}"){var L=i.test_suite_id,N=i.test_case_id,Y=i.project_id;L&&N&&Y&&Z((0,s.Z)((0,s.Z)({},i),{},{ws_id:D}))}},[i,D]),(0,Je.jk)(O);var x=o.useState({test_type:(i==null?void 0:i.test_type)||"performance",provider_env:(i==null?void 0:i.provider_env)||K,show_type:(i==null?void 0:i.show_type)||"pass_rate",project_id:(i==null?void 0:i.project_id)||void 0,tag:(i==null?void 0:i.tag)||void 0,start_time:(i==null?void 0:i.start_time)||void 0,end_time:(i==null?void 0:i.end_time)||void 0}),j=(0,c.Z)(x,2),u=j[0],l=j[1],y=(0,H.QT)(_t,{manual:!0}),U=y.data,z=y.loading,$=y.run;o.useEffect(function(){var L=u.test_type,N=u.provider_env;L&&N&&$({ws_id:D,test_type:L,provider_env:N})},[u==null?void 0:u.test_type,u==null?void 0:u.provider_env]);var F=function(N){var Y,ue=u.test_type,X=u.provider_env,he=X===void 0?"aliyun":X,Ee=u.show_type,ie=Ee===void 0?"pass_rate":Ee;l((0,s.Z)({test_type:ue,provider_env:he,show_type:["pass_rate","result_trend"].includes(ie)?ie:"pass_rate"},N)),(Y=p.current)===null||Y===void 0||Y.reset()},B=function(N){var Y=N.target;F({provider_env:Y==null?void 0:Y.value})},S=function(N){F({test_type:N})},C=function(N){var Y=N.target;F({show_type:Y==null?void 0:Y.value})},w=[{key:"performance",tab:r({id:"analysis.performance"})},{key:"functional",tab:r({id:"analysis.functional"})}],d=(0,Je.oM)(r({id:"analysis.copy.to.clipboard"})),A=function(){var N=window.location,Y=N.origin,ue=N.pathname,X=u.test_type,he=u.show_type,Ee=u.provider_env,ie=(0,ae.Z)(u,ya),k=X==="functional",je=Y+ue+"?"+(0,ga.stringify)((0,s.Z)((0,Ie.Z)({test_type:X},k?"show_type":"provider_env",k?he:Ee),ie));d(je)};return(0,e.jsx)(Xt.Provider,{value:{metrics:E,setMetrics:T,suiteList:U,suiteListLoading:z},children:(0,e.jsx)(_a,{minHeight:innerHeight-40,children:(0,e.jsxs)(ne.Z,{style:{background:"#fff"},children:[(0,e.jsx)(Q.Z,{span:24,children:(0,e.jsx)(Ze.Z,{activeKey:u==null?void 0:u.test_type,style:{width:"100%"},className:ct().timeAnalysisTabs,onTabClick:S,tabBarExtraContent:(0,e.jsxs)(ne.Z,{justify:"center",align:"middle",children:[(0,e.jsx)(ha.r,{className:"test_analysis_copy_link",style:{cursor:"pointer",marginRight:20},onClick:A}),(u==null?void 0:u.test_type)==="performance"?(0,e.jsxs)(Me.ZP.Group,{value:u==null?void 0:u.provider_env,style:{marginRight:20},onChange:B,children:[(0,e.jsx)(Me.ZP.Button,{style:{textAlign:"center"},value:"aligroup",children:r({id:"aligroupServer"})}),(0,e.jsx)(Me.ZP.Button,{style:{textAlign:"center"},value:"aliyun",children:r({id:"aliyunServer"})})]}):(0,e.jsxs)(Me.ZP.Group,{value:u==null?void 0:u.show_type,style:{marginRight:20},onChange:C,children:[(0,e.jsx)(Me.ZP.Button,{style:{width:120,textAlign:"center"},value:"pass_rate",children:(0,e.jsx)(H._H,{id:"analysis.pass_rate"})}),(0,e.jsx)(Me.ZP.Button,{style:{width:120,textAlign:"center"},value:"result_trend",children:(0,e.jsx)(H._H,{id:"analysis.result_trend"})})]})]}),children:w.map(function(L){return(0,o.createElement)(Ze.Z.TabPane,(0,s.Z)((0,s.Z)({},L),{},{key:L.key}))})})}),(0,e.jsx)(Q.Z,{span:24,children:(0,e.jsx)(pa,{ref:p,info:u,setInfo:function(N){l(function(Y){return(0,s.Z)((0,s.Z)({},Y),N)})}})})]})})},I)},ba=xa},78358:function(Ye,Fe,n){"use strict";n.d(Fe,{gN:function(){return Se},tZ:function(){return we},yQ:function(){return de},Pc:function(){return We},cQ:function(){return ve},YV:function(){return Ue},Nq:function(){return Ke},JQ:function(){return Ve},iK:function(){return Ae},fD:function(){return ot},QN:function(){return lt}});var se=n(57359),Q=n(34423),De=n(13059),Ze=n(53676),ce=n(20418),ne=n(51937),R=n(34516),Me=n(41428),Ie=n(70772),ae=n(6701),s=n(14320),ee=n(53479),_=n(79625),c=n(96584),xe=n(89963),pe=n(70077),oe=n(22374),o=n(86252),Je=n.n(o),it=n(93329),ct=n(74066),H=n(24812),be=n(22812),Tt=n(97939),Te=n(39935),Zt=n(526),G=n(6130),a=n(52454),te,fe=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),Se=function(v){var J=(0,H.UO)(),re=J.ws_id;return(0,a.jsxs)(pe.Z,{style:{marginBottom:v.bottomHeight},children:[(0,a.jsx)(pe.Z.Item,{children:(0,a.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return be.m8.push("/ws/".concat(re,"/test_result"))},children:(0,a.jsx)(be._H,{id:"ws.result.details.test.result"})})}),(0,a.jsx)(pe.Z.Item,{children:(0,a.jsx)(be._H,{id:"ws.result.details.result.details"})})]})},we=function(v){return v==="success"||v===!0?(0,a.jsx)("span",{style:{fontWeight:500,color:"#81BF84"},children:"Success"}):v==="fail"||v===!1?(0,a.jsx)("span",{style:{fontWeight:500,color:"#C84C5A"},children:"Fail"}):v==="running"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#649FF6"},children:"Running"}):v==="stop"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Stop"}):v==="pending"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Pending"}):v==="skip"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Skip"}):(0,a.jsx)(a.Fragment,{})},de=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(re){return re?(0,a.jsx)(G.K,{ellipsis:{tooltip:!0},children:re}):v}}},We=function(v){var J=v.title,re=v.width,Ce=re===void 0?"100%":re,Ne=v.onEdit,Ge=v.access,tt=(0,oe.useRef)(),ut=Ge?(0,a.jsx)(it.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:Ne}):(0,a.jsx)(it.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return(0,Te.WR)()}});return(0,a.jsx)("div",{ref:tt,style:{width:Ce},children:(0,a.jsxs)(ee.Z,{style:{width:Ce},justify:"start",align:"middle",children:[(0,a.jsx)(c.Z,{placement:"topLeft",title:J,children:(0,a.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:J||"-"})}),ut]})})},Be=function(v){return fe.get(v)||"#D9D9D9"},Qe=function(v){var J=v.text,re=(0,be.YB)(),Ce=(0,Zt.oM)(re.formatMessage({id:"request.copy.success"}));return(0,a.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return Ce(J)},children:re.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},ve=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(re){return re?(0,a.jsx)(c.Z,{overlayClassName:Je().tootip_overflow,placement:"topLeft",title:(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)(ae.Z,{span:24,children:re}),(0,a.jsx)(ae.Z,{span:24,children:(0,a.jsx)(ee.Z,{justify:"center",children:(0,a.jsx)(Qe,{text:re})})})]}),children:re}):v}}},Ue=function(v){return v==="decline"?"#C84C5A":v==="normal"?"#000000":v==="increase"?"#81BF84":""},Ke=function(v,J,re){return v==="decline"?(0,a.jsx)("span",{style:{color:"#C84C5A"},children:re({id:"ws.result.details.".concat(v)})}):v==="normal"?(0,a.jsx)("span",{style:{color:"#000000"},children:re({id:"ws.result.details.".concat(v)})}):v==="increase"?(0,a.jsx)("span",{style:{color:"#81BF84"},children:re({id:"ws.result.details.".concat(v)})}):J||"-"},ke=(0,Tt.ZP)(R.Z)(te||(te=(0,Me.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(ye){var v=ye.no_margin;return v?"margin-right: 0;":""}),V=function(v){return(0,a.jsx)(ke,(0,ce.Z)({},v))},Oe=function(v){var J=(0,be.YB)(),re=J.formatMessage;return(0,a.jsx)(c.Z,{title:re({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,a.jsx)(ke,(0,ce.Z)({},v))})},Xe=function(v){var J=v.title;return(0,a.jsx)(Ze.Z,{title:J,placement:"right",trigger:"hover",overlayClassName:Je().tag_popover_style,children:(0,a.jsx)(ct.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},$e=function(v){var J=v.state;return(0,a.jsx)(V,(0,ce.Z)((0,ce.Z)({},v),{},{color:Be(J),style:!fe.get(J)&&{color:"#1d1d1d"},children:J==="success"?"complete":J}))},st=function(v){var J=v.state;return(0,a.jsx)(Oe,(0,ce.Z)((0,ce.Z)({},v),{},{color:Be(J),style:!fe.get(J)&&{color:"#1d1d1d"},children:J==="success"?"complete":J}))},Ve=function(v){var J=(0,be.YB)(),re=J.formatMessage,Ce=v.state,Ne=v.run_state,Ge=Ne===void 0?"":Ne,tt=v.state_desc,ut=(0,H.UO)(),dt=ut.ws_id;return Ce==="running"?tt?(0,a.jsxs)(Q.Z,{size:0,children:[(0,a.jsx)($e,(0,ce.Z)((0,ce.Z)({},v),{},{children:Ce})),(0,a.jsx)(Xe,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:tt.replace(/(\d+)/g,'<a href="/ws/'.concat(dt,'/test_result/$1" target="_blank">$1</a>'))}})})]}):Ge?(0,a.jsxs)(Q.Z,{size:0,children:[(0,a.jsx)($e,(0,ce.Z)((0,ce.Z)({},v),{},{children:Ce})),(0,a.jsx)(Xe,{title:re({id:"ws.result.details.not.assigned.server"})})]}):(0,a.jsxs)(Q.Z,{size:0,children:[(0,a.jsx)($e,(0,ce.Z)((0,ce.Z)({},v),{},{children:Ce})),(0,a.jsx)(Xe,{title:re({id:"ws.result.details.running,please.wait"})})]}):Ce==="pending"&&tt?(0,a.jsxs)(Q.Z,{size:0,children:[(0,a.jsx)($e,(0,ce.Z)((0,ce.Z)({},v),{},{children:Ce})),(0,a.jsx)(Xe,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:tt.replace(/(\d+)/g,'<a href="/ws/'.concat(dt,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,a.jsx)($e,(0,ce.Z)({},v))},Ae=function(v){return(0,a.jsx)(st,(0,ce.Z)((0,ce.Z)({},v),{},{no_margin:1}))},ot=function(v){var J=v.title,re=v.desc,Ce=v.placement,Ne=Ce===void 0?"bottom":Ce;return(0,a.jsxs)(Q.Z,{children:[(0,a.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:J}),(0,a.jsx)(c.Z,{overlayClassName:Je().table_question_tooltip,placement:Ne,arrowPointAtCenter:!0,title:re,color:"#fff",children:(0,a.jsx)(ct.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},lt=function(v){var J=v.title,re=v.test_value,Ce=v.value_list,Ne=v.cv_value,Ge=v.max_value,tt=v.min_value,ut=v.metric,dt=v.result,kt=(0,be.YB)(),Vt=kt.formatMessage,At=(0,Zt.oM)(Vt({id:"request.copy.success"})),_t=function(He){return He?new Number(He).toFixed(2):null},St=_t(Ge),e=_t(tt),wt=Ne,Mt=_t(re),xt=Ce.map(function(W){return _t(W)}),vt="".concat(ut," ").concat(J,`:
Avg: `).concat(Mt,`
CV:  `).concat(wt);vt+=St?`
Max: `.concat(St):"",vt+=e?`
Min: `.concat(e):"",vt+=xt.length?`
Test Record
`:"",vt+=xt.reduce(function(W,He,bt){return W.concat("(".concat(bt+1,") ").concat(He,`
`))},"");var ft="".concat(Mt,"\xB1").concat(wt),nt=function(){return dt==="decline"?(0,a.jsx)("span",{className:Je().result_popover_span,style:{color:"#C84C5A"},children:ft}):dt==="increase"?(0,a.jsx)("span",{className:Je().result_popover_span,style:{color:"#81BF84"},children:ft}):(0,a.jsx)("span",{className:Je().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:ft})};return(0,a.jsx)(Ze.Z,{overlayClassName:Je().metric_list_copy,title:(0,a.jsxs)(ee.Z,{justify:"space-between",children:[(0,a.jsx)("b",{children:J}),(0,a.jsx)("span",{onClick:function(){return At(vt)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,a.jsx)(be._H,{id:"operation.copy"})})]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)("b",{children:"Avg\uFF1A"}),(0,a.jsx)("span",{children:Mt})]}),(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)("b",{children:"CV\uFF1A"}),(0,a.jsx)("span",{children:wt})]}),(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)("b",{children:"Max\uFF1A"}),(0,a.jsx)("span",{children:St})]}),(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)("b",{children:"Min\uFF1A"}),(0,a.jsx)("span",{children:e})]}),xt.length>0&&(0,a.jsx)(ee.Z,{style:{marginTop:16},children:(0,a.jsx)("b",{children:"Test Record"})}),xt.map(function(W,He){return(0,a.jsx)(ee.Z,{children:"(".concat(He+1,")").concat(W)},He)})]}),children:nt()})}},52493:function(Ye,Fe,n){"use strict";n.d(Fe,{r:function(){return Me}});var se=n(22374),Q,De=["svgRef","title"];function Ze(){return Ze=Object.assign?Object.assign.bind():function(ae){for(var s=1;s<arguments.length;s++){var ee=arguments[s];for(var _ in ee)Object.prototype.hasOwnProperty.call(ee,_)&&(ae[_]=ee[_])}return ae},Ze.apply(this,arguments)}function ce(ae,s){if(ae==null)return{};var ee=ne(ae,s),_,c;if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(ae);for(c=0;c<xe.length;c++)_=xe[c],!(s.indexOf(_)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,_)||(ee[_]=ae[_]))}return ee}function ne(ae,s){if(ae==null)return{};var ee={},_=Object.keys(ae),c,xe;for(xe=0;xe<_.length;xe++)c=_[xe],!(s.indexOf(c)>=0)&&(ee[c]=ae[c]);return ee}var R=function(s){var ee=s.svgRef,_=s.title,c=ce(s,De);return se.createElement("svg",Ze({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:ee},c),_?se.createElement("title",null,_):null,Q||(Q=se.createElement("g",{id:"\\u5206\\u6790",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},se.createElement("g",{id:"0.\\u6027\\u80FD-\\u5185\\u7F51-\\u9009\\u62E9\\u6807\\u7B7E",transform:"translate(-1194.000000, -133.000000)",fill:"#000000"},se.createElement("g",{id:"Group-21",transform:"translate(20.000000, 110.000000)"},se.createElement("g",{id:"\\u94FE\\u63A5",transform:"translate(1172.000000, 21.000000)"},se.createElement("rect",{id:"Rectangle",fillRule:"nonzero",opacity:0,x:0,y:0,width:16,height:16}),se.createElement("path",{d:"M11.91,7.92 C11.7153722,8.09503346 11.4186893,8.09033311 11.2297039,7.90922206 C11.0407184,7.72811102 11.0234032,7.43189657 11.19,7.23 L12.06,6.32 C12.709515,5.51696592 12.6264975,4.34816777 11.87,3.645 C11.115,2.86 10,2.79 9.37,3.45 L6.94,6 C6.29048502,6.80303408 6.37350246,7.97183223 7.13,8.675 C7.3238618,8.87001873 7.3238618,9.18498127 7.13,9.38 C7.0361167,9.47465633 6.90831877,9.52789916 6.775,9.52789916 C6.64168123,9.52789916 6.5138833,9.47465633 6.42,9.38 C5.29380253,8.29148422 5.21051969,6.51405308 6.23,5.325 L8.66,2.79 C9.705,1.7 11.48,1.79 12.61,2.99 C13.7040886,4.07696429 13.7802373,5.82185565 12.785,7 L11.91,7.92 Z M3.59,8.08 C3.78462784,7.90496654 4.0813107,7.90966689 4.27029614,8.09077794 C4.45928159,8.27188898 4.47659677,8.56810343 4.31,8.77 L3.44,9.68 C2.79048502,10.4830341 2.87350246,11.6518322 3.63,12.355 C4.385,13.14 5.5,13.21 6.13,12.55 L8.56,10 C9.20951498,9.19696592 9.12649754,8.02816777 8.37,7.325 C8.1761382,7.12998127 8.1761382,6.81501873 8.37,6.62 C8.4638833,6.52534367 8.59168123,6.47210084 8.725,6.47210084 C8.85831877,6.47210084 8.9861167,6.52534367 9.08,6.62 C10.2061975,7.70851578 10.2894803,9.48594692 9.27,10.675 L6.84,13.21 C5.795,14.3 4.02,14.21 2.89,13.01 C1.79591137,11.9230357 1.71976275,10.1781444 2.715,9 L3.59,8.08 Z",id:"Shape",fillOpacity:.65})))))))},Me=se.forwardRef(function(ae,s){return se.createElement(R,Ze({svgRef:s},ae))}),Ie=n.p+"static/icon_link.2c6ce887.svg"},33336:function(Ye,Fe,n){"use strict";n.d(Fe,{K:function(){return it},Z:function(){return Zt}});var se=n(77335),Q=n(85628),De=n(42098),Ze=n(68591),ce=n.n(Ze),ne=n(1155),R=n(22374),Me=n(53532),Ie=n(83325),ae=n(87243),s=function(a){var te=a.children;return te},ee=s,_=n(29700);function c(G){return G!=null}var xe=function(a){var te=a.itemPrefixCls,fe=a.component,Se=a.span,we=a.className,de=a.style,We=a.labelStyle,Be=a.contentStyle,Qe=a.bordered,ve=a.label,Ue=a.content,Ke=a.colon,ke=fe;if(Qe){var V;return R.createElement(ke,{className:ce()((V={},(0,se.Z)(V,"".concat(te,"-item-label"),c(ve)),(0,se.Z)(V,"".concat(te,"-item-content"),c(Ue)),V),we),style:de,colSpan:Se},c(ve)&&R.createElement("span",{style:We},ve),c(Ue)&&R.createElement("span",{style:Be},Ue))}return R.createElement(ke,{className:ce()("".concat(te,"-item"),we),style:de,colSpan:Se},R.createElement("div",{className:"".concat(te,"-item-container")},(ve||ve===0)&&R.createElement("span",{className:ce()("".concat(te,"-item-label"),(0,se.Z)({},"".concat(te,"-item-no-colon"),!Ke)),style:We},ve),(Ue||Ue===0)&&R.createElement("span",{className:ce()("".concat(te,"-item-content")),style:Be},Ue)))},pe=xe;function oe(G,a,te){var fe=a.colon,Se=a.prefixCls,we=a.bordered,de=te.component,We=te.type,Be=te.showLabel,Qe=te.showContent,ve=te.labelStyle,Ue=te.contentStyle;return G.map(function(Ke,ke){var V=Ke.props,Oe=V.label,Xe=V.children,$e=V.prefixCls,st=$e===void 0?Se:$e,Ve=V.className,Ae=V.style,ot=V.labelStyle,lt=V.contentStyle,ye=V.span,v=ye===void 0?1:ye,J=Ke.key;return typeof de=="string"?R.createElement(pe,{key:"".concat(We,"-").concat(J||ke),className:Ve,style:Ae,labelStyle:(0,_.Z)((0,_.Z)({},ve),ot),contentStyle:(0,_.Z)((0,_.Z)({},Ue),lt),span:v,colon:fe,component:de,itemPrefixCls:st,bordered:we,label:Be?Oe:null,content:Qe?Xe:null}):[R.createElement(pe,{key:"label-".concat(J||ke),className:Ve,style:(0,_.Z)((0,_.Z)((0,_.Z)({},ve),Ae),ot),span:1,colon:fe,component:de[0],itemPrefixCls:st,bordered:we,label:Oe}),R.createElement(pe,{key:"content-".concat(J||ke),className:Ve,style:(0,_.Z)((0,_.Z)((0,_.Z)({},Ue),Ae),lt),span:v*2-1,component:de[1],itemPrefixCls:st,bordered:we,content:Xe})]})}var o=function(a){var te=R.useContext(it),fe=a.prefixCls,Se=a.vertical,we=a.row,de=a.index,We=a.bordered;return Se?R.createElement(R.Fragment,null,R.createElement("tr",{key:"label-".concat(de),className:"".concat(fe,"-row")},oe(we,a,(0,_.Z)({component:"th",type:"label",showLabel:!0},te))),R.createElement("tr",{key:"content-".concat(de),className:"".concat(fe,"-row")},oe(we,a,(0,_.Z)({component:"td",type:"content",showContent:!0},te)))):R.createElement("tr",{key:de,className:"".concat(fe,"-row")},oe(we,a,(0,_.Z)({component:We?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},te)))},Je=o,it=R.createContext({}),ct={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function H(G,a){if(typeof G=="number")return G;if((0,De.Z)(G)==="object")for(var te=0;te<ae.c4.length;te++){var fe=ae.c4[te];if(a[fe]&&G[fe]!==void 0)return G[fe]||ct[fe]}return 3}function be(G,a,te){var fe=G;return(a===void 0||a>te)&&(fe=(0,Ie.Tm)(G,{span:te})),fe}function Tt(G,a){var te=(0,ne.Z)(G).filter(function(de){return de}),fe=[],Se=[],we=a;return te.forEach(function(de,We){var Be,Qe=(Be=de.props)===null||Be===void 0?void 0:Be.span,ve=Qe||1;if(We===te.length-1){Se.push(be(de,Qe,we)),fe.push(Se);return}ve<we?(we-=ve,Se.push(de)):(Se.push(be(de,ve,we)),fe.push(Se),we=a,Se=[])}),fe}function Te(G){var a,te=G.prefixCls,fe=G.title,Se=G.extra,we=G.column,de=we===void 0?ct:we,We=G.colon,Be=We===void 0?!0:We,Qe=G.bordered,ve=G.layout,Ue=G.children,Ke=G.className,ke=G.style,V=G.size,Oe=G.labelStyle,Xe=G.contentStyle,$e=R.useContext(Me.E_),st=$e.getPrefixCls,Ve=$e.direction,Ae=st("descriptions",te),ot=R.useState({}),lt=(0,Q.Z)(ot,2),ye=lt[0],v=lt[1],J=H(de,ye);R.useEffect(function(){var Ne=ae.ZP.subscribe(function(Ge){(0,De.Z)(de)==="object"&&v(Ge)});return function(){ae.ZP.unsubscribe(Ne)}},[]);var re=Tt(Ue,J),Ce=R.useMemo(function(){return{labelStyle:Oe,contentStyle:Xe}},[Oe,Xe]);return R.createElement(it.Provider,{value:Ce},R.createElement("div",{className:ce()(Ae,(a={},(0,se.Z)(a,"".concat(Ae,"-").concat(V),V&&V!=="default"),(0,se.Z)(a,"".concat(Ae,"-bordered"),!!Qe),(0,se.Z)(a,"".concat(Ae,"-rtl"),Ve==="rtl"),a),Ke),style:ke},(fe||Se)&&R.createElement("div",{className:"".concat(Ae,"-header")},fe&&R.createElement("div",{className:"".concat(Ae,"-title")},fe),Se&&R.createElement("div",{className:"".concat(Ae,"-extra")},Se)),R.createElement("div",{className:"".concat(Ae,"-view")},R.createElement("table",null,R.createElement("tbody",null,re.map(function(Ne,Ge){return R.createElement(Je,{key:Ge,index:Ge,colon:Be,prefixCls:Ae,vertical:ve==="vertical",bordered:Qe,row:Ne})}))))))}Te.Item=ee;var Zt=Te},39489:function(Ye,Fe,n){"use strict";var se=n(49132),Q=n.n(se),De=n(35487),Ze=n.n(De)},91959:function(Ye,Fe,n){"use strict";n.d(Fe,{Z:function(){return ee}});var se,Q=new Uint8Array(16);function De(){if(!se&&(se=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(Q)}var Ze=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ce(_){return typeof _=="string"&&Ze.test(_)}for(var ne=ce,R=[],Me=0;Me<256;++Me)R.push((Me+256).toString(16).substr(1));function Ie(_){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,xe=(R[_[c+0]]+R[_[c+1]]+R[_[c+2]]+R[_[c+3]]+"-"+R[_[c+4]]+R[_[c+5]]+"-"+R[_[c+6]]+R[_[c+7]]+"-"+R[_[c+8]]+R[_[c+9]]+"-"+R[_[c+10]]+R[_[c+11]]+R[_[c+12]]+R[_[c+13]]+R[_[c+14]]+R[_[c+15]]).toLowerCase();if(!ne(xe))throw TypeError("Stringified UUID is invalid");return xe}var ae=Ie;function s(_,c,xe){_=_||{};var pe=_.random||(_.rng||De)();if(pe[6]=pe[6]&15|64,pe[8]=pe[8]&63|128,c){xe=xe||0;for(var oe=0;oe<16;++oe)c[xe+oe]=pe[oe];return c}return ae(pe)}var ee=s}}]);
