(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8226],{12475:function(Ye){Ye.exports={code_wrapper:"code_wrapper___3eANK"}},13690:function(Ye,be,t){"use strict";var pt=t(23412),je=t.n(pt),ye=t(53631),Ze=t.n(ye),Be=t(31149),me=t.n(Be),ne=t(29656),pe=t(12475),Ae=t.n(pe),Ee=t(85893);be.Z=function(ie){var we=ie.code,ze=ie.onChange,le=ie.readOnly,St=le===void 0?!1:le,P=ie.mode,Fe=P===void 0?"shell":P;return(0,Ee.jsx)(ne.fk,{value:we,className:Ae().code_wrapper,options:{theme:"monokai",keyMap:"sublime",lineNumbers:Fe==="yaml",mode:Fe,readOnly:St},onBeforeChange:function(Lt,G,Ge){return ze(Ge)}})}},14552:function(Ye,be,t){"use strict";var pt=t(22385),je=t(89456),ye=t(11849),Ze=t(2824),Be=t(93224),me=t(20310),ne=t(67294),pe=t(12788),Ae=t(60035),Ee=t(85893),ie=["title","children","width","color","placement","style"],we,ze=pe.ZP.div(we||(we=(0,me.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),le=function(P){var Fe=P.title,We=P.children,Lt=P.width,G=P.color,Ge=P.placement,A=Ge===void 0?"topLeft":Ge,Xt=P.style,Qe=(0,Be.Z)(P,ie),Te=(0,ne.useRef)(null),I=(0,ne.useState)(!1),Xe=(0,Ze.Z)(I,2),L=Xe[0],b=Xe[1],K=(0,Ae.CR)(),S=K.width,s=function(){var Q,Oe,Dt=Te==null||(Q=Te.current)===null||Q===void 0?void 0:Q.clientWidth,w=Te==null||(Oe=Te.current)===null||Oe===void 0?void 0:Oe.scrollWidth;b(Dt<w)};(0,ne.useEffect)(function(){s()},[Fe,S]);var u=(0,Ee.jsx)(ze,(0,ye.Z)((0,ye.Z)({ref:Te,style:(0,ye.Z)({width:Lt,color:G},Xt)},Qe),{},{children:We||Fe||"-"}));return L?(0,Ee.jsx)(je.Z,{title:Fe,placement:A,overlayStyle:{wordBreak:"break-all"},children:u}):u};be.Z=le},14553:function(Ye,be,t){"use strict";var pt=t(17462),je=t(76772),ye=t(20310),Ze=t(16917),Be=t(12788),me=t(24480),ne=t(85893),pe,Ae=Be.ZP.span(pe||(pe=(0,ye.Z)([`
  font-family: PingFangSC;
  font-weight: 400;
  font-size: 14px;
  color: #1890FF;
  letter-spacing: 0;
  line-height: 24px;
  cursor: pointer;
`])));be.Z=function(){var Ee=(0,Ze.YB)(),ie=Ee.formatMessage,we=function(){return Ze.m8.push("/login?redirect_url=".concat(window.location.pathname))};return(0,ne.jsx)(je.Z,{message:(0,ne.jsxs)("div",{children:[(0,ne.jsx)("span",{children:ie({id:"you.haven.not.signed.in"})}),(0,ne.jsx)(Ae,{onClick:we,children:ie({id:"go.to.login"})})]}),type:"info",showIcon:!0,closable:!0})}},77593:function(Ye,be,t){"use strict";t.r(be),t.d(be,{default:function(){return Dn}});var pt=t(62350),je=t(24565),ye=t(20228),Ze=t(11382),Be=t(89032),me=t(15746),ne=t(71153),pe=t(60331),Ae=t(20136),Ee=t(55241),ie=t(30887),we=t(28682),ze=t(47673),le=t(4107),St=t(13062),P=t(71230),Fe=t(402),We=t(97272),Lt=t(49111),G=t(19650),Ge=t(57663),A=t(71577),Xt=t(74379),Qe=t(38648),Te=t(34792),I=t(48086),Xe=t(93224),L=t(39428),b=t(11849),K=t(3182),S=t(2824),s=t(67294),u=t(16917),Pt=t(20009),Q=t(24480),Oe=t(60035),Dt=t(46596),w=t.n(Dt),Ha=t(14552),Na=t(14553),Ja=t(75044),Va=t(46167),Ua=t(6700),Ka=t(76570),Ya=t(54549),za=t(5751),Ga=t(51847),Qa=t(63509),Xa=t(41719),es=t(57338),qa=t(440),ts=t(88983),$e=t(47933),as=t(9715),oe=t(20526),en=t(96791),tn=t.n(en),e=t(85893),an=(0,s.forwardRef)(function(o,c){var p=o.onOk,l=(0,u.YB)(),v=l.formatMessage,h=oe.Z.useForm(),Z=(0,S.Z)(h,1),re=Z[0],He=(0,s.useState)(!1),Le=(0,S.Z)(He,2),q=Le[0],ee=Le[1],M=(0,s.useState)(!1),te=(0,S.Z)(M,2),ve=te[0],ue=te[1];(0,s.useImperativeHandle)(c,function(){return{show:function(){ue(!0)},hide:function(){return ue(!1)}}});var k=function(){re.resetFields(),ue(!1)},de=function(){ee(!0),re.validateFields().then(function(he){p(he),ee(!1)}).catch(function(he){console.log(he),ee(!1)})};return(0,e.jsx)(qa.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(u._H,{id:"ws.test.job.template.drawer.title"}),width:"380",onClose:k,visible:ve,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(A.Z,{onClick:k,children:(0,e.jsx)(u._H,{id:"operation.cancel"})}),(0,e.jsx)(A.Z,{type:"primary",disabled:q,onClick:de,children:(0,e.jsx)(u._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(oe.Z,{form:re,layout:"vertical",className:tn().job_test_form,children:[(0,e.jsx)(oe.Z.Item,{name:"template_name",label:(0,e.jsx)(u._H,{id:"ws.test.job.template_name"}),rules:[{required:!0,message:v({id:"ws.test.job.template_name.rules1"}),whitespace:!0,type:"string",pattern:/^[A-Za-z0-9\._-]{1,64}$/g},{type:"string",min:1,message:v({id:"ws.test.job.template_name.rules2"}),whitespace:!0}],children:(0,e.jsx)(le.Z,{autoComplete:"off",placeholder:v({id:"ws.test.job.template_name.rules1"})})}),(0,e.jsx)(oe.Z.Item,{label:(0,e.jsx)(u._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(le.Z.TextArea,{placeholder:v({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(oe.Z.Item,{label:(0,e.jsx)(u._H,{id:"ws.test.job.enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)($e.ZP.Group,{children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(u._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(u._H,{id:"operation.no"})})]})})]})})}),nn=t(92211),rn=t.n(nn),qe=t(22406),sn=(0,s.forwardRef)(function(o,c){var p=o.disabled,l=o.template,v=o.onEnabelChange,h=function(){var ee=(0,K.Z)((0,L.Z)().mark(function M(te){var ve,ue,k,de,ce;return(0,L.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,(0,qe.pi)({template_id:l.id});case 3:if(ve=H.sent,ue=ve.data,k=ve.code,k!==200){H.next=16;break}if(!ue.length){H.next=15;break}return de=ue.map(function(kt){return kt.name}),ce=de.join(","),I.default.warn('\u5DF2\u6709\u6D4B\u8BD5\u8BA1\u5212"'.concat(ce,'"\u5173\u8054\u6B64\u6A21\u677F\uFF0C\u65E0\u6CD5\u7981\u7528!')),q.setFieldsValue({enable:!0}),H.abrupt("return");case 15:v(te);case 16:H.next=20;break;case 18:H.prev=18,H.t0=H.catch(0);case 20:case"end":return H.stop()}},M,null,[[0,18]])}));return function(te){return ee.apply(this,arguments)}}(),Z=(0,u.YB)(),re=Z.formatMessage,He=oe.Z.useForm(),Le=(0,S.Z)(He,1),q=Le[0];return(0,s.useImperativeHandle)(c,function(){return{form:q,reset:q.resetFields,setVal:function(M){q.setFieldsValue(M)}}}),(0,s.useEffect)(function(){if(JSON.stringify(l)!=="{}"){var ee=l.template_name,M=l.description,te=l.enable;q.setFieldsValue({template_name:ee,description:M,enable:te})}},[l]),(0,e.jsxs)(oe.Z,{colon:!1,layout:"horizontal",size:"small",labelCol:{span:5},wrapperCol:{span:14},style:{width:"100%"},name:"basic",form:q,className:rn().job_test_form,initialValues:{enable:!0},children:[(0,e.jsx)(oe.Z.Item,{label:(0,e.jsx)(u._H,{id:"ws.test.job.template.name"}),name:"template_name",rules:[{required:!0,message:re({id:"ws.test.job.template.message"})},{pattern:/^[A-Za-z0-9\._-]{1,64}$/g,message:re({id:"please.enter.message64"})}],children:(0,e.jsx)(le.Z,{autoComplete:"off",disabled:p,placeholder:re({id:"ws.test.job.template.message"})})}),(0,e.jsx)(oe.Z.Item,{label:(0,e.jsx)(u._H,{id:"ws.test.job.description"}),name:"description",children:(0,e.jsx)(le.Z.TextArea,{rows:2,disabled:p,autoComplete:"off",placeholder:re({id:"ws.test.job.description.placeholder"})})}),(0,e.jsx)(oe.Z.Item,{label:(0,e.jsx)(u._H,{id:"ws.test.job.enable"}),name:"enable",children:(0,e.jsxs)($e.ZP.Group,{disabled:p,onChange:function(M){var te=M.target;return h(te.value)},children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(u._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(u._H,{id:"operation.no"})})]})})]})}),Se=t(63885),ln=t(96486),j=t.n(ln),qt,on=["svgRef","title"];function vt(){return vt=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(o[l]=p[l])}return o},vt.apply(this,arguments)}function un(o,c){if(o==null)return{};var p=dn(o,c),l,v;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(v=0;v<h.length;v++)l=h[v],!(c.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(p[l]=o[l]))}return p}function dn(o,c){if(o==null)return{};var p={},l=Object.keys(o),v,h;for(h=0;h<l.length;h++)v=l[h],!(c.indexOf(v)>=0)&&(p[v]=o[v]);return p}var cn=function(c){var p=c.svgRef,l=c.title,v=un(c,on);return s.createElement("svg",vt({width:"10px",height:"10px",viewBox:"0 0 10 10",ref:p},v),l?s.createElement("title",null,l):null,qt||(qt=s.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",fillOpacity:.65},s.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-1211.000000, -200.000000)",fill:"#000000",fillRule:"nonzero"},s.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},s.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-2",transform:"translate(1091.000833, 10.000000)"},s.createElement("g",{id:"\\u5207\\u6362",transform:"translate(0.000000, 7.000000)"},s.createElement("path",{d:"M7.91600701,2.00566619 C8.46849532,2.00566619 8.99835515,2.22514132 9.38902338,2.61580956 C9.77969162,3.00647779 9.99916674,3.53633762 9.99916674,4.08882594 L9.99916674,5.33872178 L9.16590285,5.33872178 L9.16590285,4.08882594 C9.16590285,3.39852752 8.60630542,2.83893009 7.91600701,2.83893009 L0.416631951,2.83893009 C0.235547567,2.83877357 0.075300007,2.72166479 0.020151264,2.54918235 C-0.0349974789,2.3766999 0.027582607,2.18834524 0.174985418,2.08315973 L3.09057579,0 L3.57386885,0.678276807 L1.71569037,2.00566619 L7.91517374,2.00566619 L7.91600701,2.00566619 Z M2.08315974,7.83851346 C1.53067143,7.83851347 1.00081159,7.61903834 0.61014336,7.2283701 C0.219475125,6.83770187 0,6.30784203 0,5.75535372 L0,4.50545788 L0.833263901,4.50545788 L0.833263901,5.75535372 C0.833263901,6.44565213 1.39286133,7.00524956 2.08315974,7.00524956 L9.5825348,7.00524956 C9.76361918,7.00540608 9.92386674,7.12251487 9.97901548,7.29499731 C10.0341642,7.46747976 9.97158413,7.65583442 9.82418132,7.76101992 L6.9077577,9.84417965 L6.42446463,9.16590285 L8.28264312,7.83851346 L2.08232647,7.83851346 L2.08315974,7.83851346 Z",id:"\\u5F62\\u72B6"}))))))))},fn=s.forwardRef(function(o,c){return s.createElement(cn,vt({svgRef:c},o))}),ns=t.p+"static/yaml_format.02e46583.svg",ea,mn=["svgRef","title"];function ht(){return ht=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(o[l]=p[l])}return o},ht.apply(this,arguments)}function pn(o,c){if(o==null)return{};var p=vn(o,c),l,v;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(v=0;v<h.length;v++)l=h[v],!(c.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(p[l]=o[l]))}return p}function vn(o,c){if(o==null)return{};var p={},l=Object.keys(o),v,h;for(h=0;h<l.length;h++)v=l[h],!(c.indexOf(v)>=0)&&(p[v]=o[v]);return p}var hn=function(c){var p=c.svgRef,l=c.title,v=pn(c,mn);return s.createElement("svg",ht({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:p},v),l?s.createElement("title",null,l):null,ea||(ea=s.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},s.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-187.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},s.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},s.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD",transform:"translate(67.000000, 10.000000)"},s.createElement("g",{id:"\\u590D\\u5236",transform:"translate(0.000000, 5.000000)"},s.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),s.createElement("path",{d:"M9.75,9.125 L9.125,9.125 L9.125,8.5 L9.75,8.5 C10.095178,8.5 10.375,8.22017797 10.375,7.875 L10.375,2.25 C10.375,1.90482203 10.095178,1.625 9.75,1.625 L4.125,1.625 C3.77982203,1.625 3.5,1.90482203 3.5,2.25 L3.5,2.875 L2.875,2.875 L2.875,2.25 C2.875,1.55964406 3.43464406,1 4.125,1 L9.75,1 C10.4403559,1 11,1.55964406 11,2.25 L11,7.875 C11,8.56535594 10.4403559,9.125 9.75,9.125 Z M7.875,11 L2.25,11 C1.55964406,11 1,10.4403559 1,9.75 L1,4.125 C1,3.43464406 1.55964406,2.875 2.25,2.875 L7.875,2.875 C8.56535594,2.875 9.125,3.43464406 9.125,4.125 L9.125,9.75 C9.125,10.4403559 8.56535594,11 7.875,11 Z M2.25,3.5 C1.90482203,3.5 1.625,3.77982203 1.625,4.125 L1.625,9.75 C1.625,10.095178 1.90482203,10.375 2.25,10.375 L7.875,10.375 C8.22017797,10.375 8.5,10.095178 8.5,9.75 L8.5,4.125 C8.5,3.77982203 8.22017797,3.5 7.875,3.5 L2.25,3.5 Z",id:"\\u5F62\\u72B6"}))))))))},gn=s.forwardRef(function(o,c){return s.createElement(hn,ht({svgRef:c},o))}),rs=t.p+"static/yaml_copy.d66ca5a7.svg",ta,_n=["svgRef","title"];function gt(){return gt=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(o[l]=p[l])}return o},gt.apply(this,arguments)}function bn(o,c){if(o==null)return{};var p=jn(o,c),l,v;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(v=0;v<h.length;v++)l=h[v],!(c.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(p[l]=o[l]))}return p}function jn(o,c){if(o==null)return{};var p={},l=Object.keys(o),v,h;for(h=0;h<l.length;h++)v=l[h],!(c.indexOf(v)>=0)&&(p[v]=o[v]);return p}var yn=function(c){var p=c.svgRef,l=c.title,v=bn(c,_n);return s.createElement("svg",gt({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:p},v),l?s.createElement("title",null,l):null,ta||(ta=s.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},s.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-241.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},s.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},s.createElement("g",{id:"\\u7F16\\u7EC4-4\\u5907\\u4EFD-3",transform:"translate(121.000000, 10.000000)"},s.createElement("g",{id:"\\u4E0B\\u8F7D",transform:"translate(0.000000, 5.000000)"},s.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),s.createElement("path",{d:"M9.76628906,6.76792969 L9.76628906,9.39292969 L2.26628906,9.39292969 L2.26628906,6.76792969 C2.26628906,6.71615299 2.22431576,6.67417969 2.17253906,6.67417969 L1.70378906,6.67417969 C1.65201237,6.67417969 1.61003906,6.71615299 1.61003906,6.76792969 L1.61003906,9.67417969 C1.61003906,9.88128647 1.77793228,10.0491797 1.98503906,10.0491797 L10.0475391,10.0491797 C10.2546458,10.0491797 10.4225391,9.88128647 10.4225391,9.67417969 L10.4225391,6.76792969 C10.4225391,6.71615299 10.3805658,6.67417969 10.3287891,6.67417969 L9.86003906,6.67417969 C9.80826237,6.67417969 9.76628906,6.71615299 9.76628906,6.76792969 Z M5.54015625,7.23808594 L5.54015625,1.9921875 C5.54015625,1.93359375 5.58210938,1.88507812 5.63390625,1.88507812 L6.19640625,1.88507812 C6.24820312,1.88507812 6.29015625,1.93300781 6.29015625,1.9921875 L6.29015625,7.23867188 L5.54015625,7.23808594 Z M5.63929688,7.94273438 L3.2109375,5.14324219 C3.18695638,5.11557797 3.18127346,5.07648476 3.19638545,5.04313764 C3.21149744,5.00979052 3.24463907,4.98829152 3.28125,4.98808594 L3.984375,4.98808594 C4.03874685,4.98808594 4.09044112,5.01168849 4.12605469,5.05277344 L5.92253906,7.12617187 L7.71867187,5.05289063 C7.75428544,5.01180568 7.80597971,4.98820334 7.86035156,4.98820313 L8.56347656,4.98820313 C8.60008749,4.98840871 8.63322912,5.00990771 8.64834111,5.04325483 C8.6634531,5.07660195 8.65777018,5.11569516 8.63378906,5.14335938 L6.20578125,7.94273438 C6.13455555,8.02482249 6.03122006,8.07197257 5.92253906,8.07197257 C5.81385806,8.07197257 5.71052258,8.02482249 5.63929687,7.94273438 L5.63929688,7.94273438 Z",id:"\\u5F62\\u72B6"}))))))))},Zn=s.forwardRef(function(o,c){return s.createElement(yn,gt({svgRef:c},o))}),ss=t.p+"static/yaml_download.401c6657.svg",aa,En=["svgRef","title"];function _t(){return _t=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(o[l]=p[l])}return o},_t.apply(this,arguments)}function wn(o,c){if(o==null)return{};var p=Tn(o,c),l,v;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(v=0;v<h.length;v++)l=h[v],!(c.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(o,l)||(p[l]=o[l]))}return p}function Tn(o,c){if(o==null)return{};var p={},l=Object.keys(o),v,h;for(h=0;h<l.length;h++)v=l[h],!(c.indexOf(v)>=0)&&(p[v]=o[v]);return p}var xn=function(c){var p=c.svgRef,l=c.title,v=wn(c,En);return s.createElement("svg",_t({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:p},v),l?s.createElement("title",null,l):null,aa||(aa=s.createElement("g",{id:"\\u65B0\\u5EFAjob+yaml\\u6A21\\u5F0F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",opacity:.649999976},s.createElement("g",{id:"\\u65B0\\u5EFAjob+\\u5207\\u6362\\u8868\\u5355\\u6A21\\u5F0F",transform:"translate(-132.000000, -198.000000)",fill:"#000000",fillRule:"nonzero"},s.createElement("g",{id:"\\u7F16\\u7EC4-6",transform:"translate(120.000000, 183.000000)"},s.createElement("g",{id:"\\u7F16\\u7EC4-4",transform:"translate(12.000000, 10.000000)"},s.createElement("g",{id:"icon_\\u5BF9\\u53F7-\\u7EBF",transform:"translate(0.000000, 5.000000)"},s.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:12,height:12}),s.createElement("path",{d:"M5.07007084,8.82774395 C4.96931758,8.8279648 4.87265067,8.78792641 4.80156211,8.71652833 L2.20138155,6.11634779 C2.05338453,5.96793191 2.05338453,5.72774618 2.20138155,5.57933031 C2.27322578,5.50766751 2.36847381,5.46811689 2.46989029,5.4681169 C2.57130677,5.46811691 2.66673622,5.50766752 2.73839903,5.57933031 L5.07025227,7.91118355 L9.35205949,3.62901348 C9.42310215,3.55754689 9.51979898,3.51749611 9.62056822,3.51779834 C9.7219847,3.51779834 9.81741415,3.55716925 9.88907696,3.62901348 C10.0369743,3.77747052 10.0369743,4.0175739 9.88907696,4.16603095 L5.33857957,8.71652833 C5.26755994,8.78802927 5.17084809,8.82808628 5.07007084,8.82774395 Z",id:"\\u8DEF\\u5F84"}))))))))},Cn=s.forwardRef(function(o,c){return s.createElement(xn,_t({svgRef:c},o))}),is=t.p+"static/yaml_test.c046ec39.svg",Fn=t(13690),On=t(57392),Sn=["env_info","rpm_info","script_info","moniter_contrl","monitor_info","reclone_contrl","app_name","os","vm","need_reboot","kernel_version","kernel_install","code_repo","code_branch","compile_branch","cpu_arch","commit_id","kernel_packages","build_config","build_machine","scripts","kernel","devel","headers","hotfix_install"],Ln=["branch"],Pn=function(c){var p,l,v=(0,u.YB)(),h=v.formatMessage,Z=c.route.name,re=(0,Oe.CR)(),He=re.height,Le=re.width,q=["TemplatePreview","TemplateEdit","JobTypePreview"].includes(Z),ee=(0,u.tT)("@@initialState"),M=ee.initialState,te=ee.setInitialState,ve=M.authList,ue=(0,Pt.UO)(),k=ue.ws_id,de=ue.jt_id,ce=(0,Pt.TH)(),he=ce.query,H=ce.state,kt=ce.pathname,Pe=(0,u.md)();(0,Oe.jk)("Workspace.".concat(Z));var kn=(0,s.useState)([]),na=(0,S.Z)(kn,2),Rn=na[0],Rt=na[1],Mn=(0,s.useState)({name:"",server_type:"",test_type:""}),ra=(0,S.Z)(Mn,2),C=ra[0],In=ra[1],Bn=(0,s.useState)({basic:{},env:{},suite:{},more:{}}),sa=(0,S.Z)(Bn,2),fe=sa[0],An=sa[1],Wn=(0,s.useState)(!0),ia=(0,S.Z)(Wn,2),Mt=ia[0],It=ia[1],$n=(0,s.useState)(!1),la=(0,S.Z)($n,2),Hn=la[0],oa=la[1],Nn=(0,s.useState)(!1),ua=(0,S.Z)(Nn,2),Jn=ua[0],da=ua[1],Vn=(0,s.useState)(Z==="TemplatePreview"),ca=(0,S.Z)(Vn,2),Un=ca[0],Bt=ca[1],Kn=(0,s.useState)(!1),fa=(0,S.Z)(Kn,2),ma=fa[0],At=fa[1],Yn=(0,s.useState)({}),pa=(0,S.Z)(Yn,2),ge=pa[0],bt=pa[1],zn=(0,s.useState)(!1),va=(0,S.Z)(zn,2),Gn=va[0],ha=va[1],jt=(0,s.useRef)(null),De=(0,s.useRef)(null),yt=(0,s.useRef)(null),Zt=(0,s.useRef)(null),ga=(0,s.useRef)(null),Qn=(0,s.useRef)(null),Xn=(0,s.useRef)(null),qn=(0,s.useRef)(null),er=(0,s.useRef)(null),tr=(0,s.useRef)(null),Wt=(0,s.useRef)(),Et=(0,s.useRef)(),ar=(0,s.useState)(),_a=(0,S.Z)(ar,2),nr=_a[0],rr=_a[1],sr=(0,s.useState)(!1),ba=(0,S.Z)(sr,2),ir=ba[0],$t=ba[1],lr=(0,s.useState)(!1),ja=(0,S.Z)(lr,2),et=ja[0],W=ja[1],or=(0,s.useState)(!1),ya=(0,S.Z)(or,2),Za=ya[0],tt=ya[1],ur=(0,s.useState)(!1),Ea=(0,S.Z)(ur,2),dr=Ea[0],cr=Ea[1],fr=(0,s.useState)([]),wa=(0,S.Z)(fr,2),Ht=wa[0],mr=wa[1],pr=(0,s.useState)(""),Ta=(0,S.Z)(pr,2),at=Ta[0],wt=Ta[1],vr=(0,s.useState)(!1),xa=(0,S.Z)(vr,2),Y=xa[0],Ca=xa[1],Nt=(0,u.QT)(function(g){return(0,qe.qi)(g)},{initialData:[],throttleInterval:300,manual:!0}),nt=Nt.data,Fa=Nt.run,hr=Nt.refresh,gr=function(){Bt(!1),At(!0)},rt=function(a){return new Promise(function(n,i){return a.validateFields().then(n).catch(function(){i(),W(!1),tt(!1)})})},_r=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_,r,m,E,O,D,X,x,J,ae;return(0,L.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(It(!0),n=de,Z!=="TestExport"){y.next=10;break}return y.next=5,(0,Se.Eh)((0,b.Z)({job_id:de},he));case 5:i=y.sent,d=i.data,bt(d),Rt(d.test_config),n=d.job_type_id;case 10:if(!["TestTemplate","TemplatePreview","TemplateEdit","TestJob"].includes(Z)){y.next=31;break}if(f=null,Z==="TestJob"&&he.template_id&&(f=he.template_id),["TestTemplate","TemplatePreview","TemplateEdit"].includes(Z)&&(f=de),!f){y.next=30;break}return y.next=17,(0,Se.Ls)({template_id:f});case 17:if(_=y.sent,r=_.code,m=_.data,r!==500){y.next=23;break}return(0,Q.CT)(500),y.abrupt("return");case 23:E=(0,S.Z)(m,1),O=E[0],n=O.job_type_id,bt(O),Rt(O.test_config),$t(O.enable),y.next=31;break;case 30:bt({});case 31:return y.next=33,(0,Va.Wt)({jt_id:n});case 33:if(D=y.sent,X=(0,S.Z)(D.data,1),x=X[0],x){y.next=38;break}return y.abrupt("return",(0,Q.CT)(404));case 38:return In(x),y.next=41,(0,Ja.Dn)({jt_id:n});case 41:J=y.sent,ae=J.data,br(ae),It(!1),Z==="TestJob"&&Fa({ws_id:k,job_type_id:n,enable:"True"});case 46:case"end":return y.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),br=function(a){var n={},i={},d={},f={};a==null||a.forEach(function(_){_.config_index===1&&(n[_.name]=_),_.config_index===2&&(i[_.name]=_),_.config_index===3&&(d[_.name]=_),_.config_index===4&&(f[_.name]=_)}),An({basic:n,env:i,suite:d,more:f})},Oa=(0,Oe.oM)(h({id:"request.copy.success"})),Sa=function(){var a,n,i,d,f,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;cr(_),wt(""),(a=Et.current)===null||a===void 0||a.reset(),(n=yt.current)===null||n===void 0||n.reset(),(i=jt.current)===null||i===void 0||i.reset(),(d=De.current)===null||d===void 0||d.reset(),(f=Zt.current)===null||f===void 0||f.reset()};(0,s.useEffect)(function(){Sa(),_r()},[kt,he]);var Ne=function g(a){var n={};return Object.keys(a).forEach(function(i){var d=a[i];if(!(d==null||d==="")){var f=Object.prototype.toString.call(d);if(f==="[object Array]"){var _=d.filter(function(r){var m=!1;if(Object.keys(r).forEach(function(E){var O=r[E];(O==null||O==="")&&(m=!0)}),!m)return r});_.length!==0&&(n[i]=_)}else f==="[object Object]"?JSON.stringify(d)!=="{}"&&(n[i]=g(d)):n[i]=d}}),Object.assign({},n)},xe=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_,r,m,E,O,D,X,x,J,ae,ke,y,B,$,R,F,V,z,Re,se,Me,xt,lt,Ut,Kt,Yt,Ct,ot,Je,Ft,ut,Ie,Ce,dt,Ve,ct,Ue,ft,Ot,Ke=arguments;return(0,L.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(n=Ke.length>0&&Ke[0]!==void 0?Ke[0]:null,i={},d="",!(Z==="TestTemplate"||Z==="TemplatePreview"||Z==="TemplateEdit")){T.next=13;break}if(!n){T.next=8;break}T.t0=n.templateEditFormInfo,T.next=11;break;case 8:return T.next=10,rt(Et.current.form);case 10:T.t0=T.sent;case 11:f=T.t0,i=Object.assign(i,Ne(f));case 13:if(JSON.stringify(fe.basic)==="{}"){T.next=23;break}if(!n){T.next=18;break}T.t1=n.basicFormInfo,T.next=21;break;case 18:return T.next=20,rt(yt.current.form);case 20:T.t1=T.sent;case 21:_=T.t1,i=Object.assign(i,Ne(_));case 23:if(JSON.stringify(fe.env)==="{}"){T.next=43;break}if(!n){T.next=28;break}T.t2=n.envFormInfo,T.next=31;break;case 28:return T.next=30,rt(De.current.form);case 30:T.t2=T.sent;case 31:r=T.t2,m=r.env_info,E=r.rpm_info,O=r.script_info,D=r.moniter_contrl,X=r.monitor_info,x=r.reclone_contrl,J=r.app_name,ae=r.os,ke=r.vm,y=r.need_reboot,B=r.kernel_version,$=r.kernel_install,R=r.code_repo,F=r.code_branch,V=r.compile_branch,z=r.cpu_arch,Re=r.commit_id,se=r.kernel_packages,Me=r.build_config,xt=r.build_machine,lt=r.scripts,Ut=r.kernel,Kt=r.devel,Yt=r.headers,Ct=r.hotfix_install,ot=(0,Xe.Z)(r,Sn),d=$,Je=m,Ft=(0,b.Z)({code_repo:R,code_branch:F,compile_branch:V,cpu_arch:z,commit_id:Re,build_config:Me,build_machine:xt,scripts:lt},ot),ut={hotfix_install:Ct,scripts:lt,kernel_packages:se==null?void 0:se.map(function(N){return N==null?void 0:N.trim()})},Ie=O,Ce=E,y||(Ce=Ce?Ce.map(function(N){return(0,b.Z)((0,b.Z)({},N),{},{pos:"before"})}):void 0,Ie=Ie?Ie.map(function(N){return(0,b.Z)((0,b.Z)({},N),{},{pos:"before"})}):void 0),dt={env_info:Je||"",rpm_info:Ce,script_info:Ie,moniter_contrl:D,reclone_contrl:x,iclone_info:ae||J||ke?{os:ae,app_name:J,vm:ke}:void 0,need_reboot:y,kernel_version:B},R?dt.build_pkg_info=Ft:dt.kernel_info=ut,i=Object.assign(i,Ne(dt),{monitor_info:X});case 43:if(JSON.stringify(fe.more)==="{}"){T.next=54;break}if(!n){T.next=48;break}T.t3=n.moreFormInfo,T.next=51;break;case 48:return T.next=50,rt(jt.current.form);case 50:T.t3=T.sent;case 51:Ve=T.t3,ct=Ve.email?Ve.email.replace(/\s/g,","):null,i=Object.assign(i,Ne((0,b.Z)((0,b.Z)({},Ve),{},{email:ct})));case 54:return Ue=n?n.new_test_config:Rn,Ue.length>0&&(ft=Ue.map(function(N){var Dr=N.id,kr=N.setup_info,Rr=N.console,Mr=N.need_reboot,Ir=N.priority,Br=N.cleanup_info,Ar=N.run_mode,Wr=N.test_case_list;return(0,b.Z)((0,b.Z)({},Ne({test_suite:Dr,setup_info:kr,cleanup_info:Br,console:Rr,need_reboot:Mr,priority:Ir,run_mode:Ar})),{},{cases:Wr.map(function(U){var $r=U.id,Ia=U.setup_info,Hr=U.cleanup_info,Nr=U.repeat,Jr=U.timeout,Vr=U.server_object_id,Ur=U.server_tag_id,Kr=U.need_reboot,Yr=U.console,zr=U.monitor_info,Gr=U.priority,zt=U.env_info,Qr=U.is_instance,Ba=U.custom_ip,Aa=U.custom_channel,Gt=zt==null?void 0:zt.filter(function(mt){if(mt.name&&mt.val)return mt}),Xr=Gt==null?void 0:Gt.reduce(function(mt,$a,qr){var Qt;return mt.concat("".concat(qr?`
`:"").concat((Qt=$a.name)===null||Qt===void 0?void 0:Qt.trim(),"=").concat($a.val))},""),Wa=void 0;return Aa&&Ba&&(Wa={custom_channel:Aa,custom_ip:Ba}),Ne({test_case:$r,setup_info:Ia==="[]"?"":Ia,cleanup_info:Hr,repeat:Nr,timeout:Jr,server_object_id:Vr,server_tag_id:Ur,need_reboot:Kr,console:Yr,monitor_info:zr,priority:Gr,is_instance:Qr,env_info:Xr,customer_server:Wa})})})}),i.test_config=ft),d!=="install_push"&&(i.kernel_version=null),Ot=i.report_template,delete i.report_template,"report_name"in i&&j().get(i,"report_name")&&(i.report_template=Ot),T.abrupt("return",i);case 61:case"end":return T.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Jt=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_,r,m,E,O,D,X,x,J,ae=arguments;return(0,L.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n=ae.length>0&&ae[0]!==void 0?ae[0]:"",i={},!(De&&De.current)){y.next=8;break}return y.next=5,rt(De.current.form);case 5:y.t0=y.sent,y.next=9;break;case 8:y.t0={};case 9:if(d=y.t0,f=C==null?void 0:C.server_type,da(!0),Y){y.next=24;break}return y.next=15,xe();case 15:_=y.sent,r=j().cloneDeep(_),m=j().get(r,"test_config"),j().isArray(m)&&m.forEach(function(B){var $=j().get(B,"cases"),R=j().get(B,"run_mode");j().isArray($)&&($=$.map(function(F){var V={},z=j().cloneDeep(F);if(j().has(z,"server_object_id")&&z.server_object_id!==void 0){var Re=j().get(z,"is_instance"),se="id";Re===0&&f==="aliyun"&&(se="config"),Re===1&&f==="aliyun"&&(se="instance"),R==="cluster"&&(se="cluster"),V[se]=j().get(z,"server_object_id")}if(j().has(z,"server_tag_id")&&z.server_tag_id.length&&(V={tag:j().get(z,"server_tag_id")}),j().get(z,"customer_server")){var Me=j().get(z,"customer_server");V={channel_type:Me.custom_channel,ip:Me.custom_ip}}return V&&(F.server=V),delete F.server_object_id,delete F.server_tag_id,delete B.run_mode,delete F.is_instance,delete F.customer_server,F}),B.cases=$)}),r.test_config=m,delete r.moniter_contrl,delete r.reclone_contrl,r.kernel_version||delete r.kernel_version,i={type:"json2yaml",json_data:r,workspace:k};case 24:return Y&&(i={type:"yaml2json",yaml_data:at,workspace:k}),y.next=27,(0,Se.VV)(i);case 27:return E=y.sent,O=E.code,D=E.msg,X=E.data,da(!1),x={},O===200?(Y||wt(X),Y&&(r=j().cloneDeep(X),J=X.test_config,j().isArray(J)&&J.forEach(function(B){var $=j().get(B,"cases");B.run_mode="standalone",j().isArray($)&&($=$.map(function(R){var F=j().get(R,"server");if(j().has(F,"id")&&(R.server_object_id=j().get(F,"id")),j().get(F,"config")&&(R.server_object_id=j().get(F,"config"),R.is_instance=0),j().get(F,"instance")&&(R.server_object_id=j().get(F,"instance"),R.is_instance=1),j().get(F,"cluster")&&(R.server_object_id=j().get(F,"cluster"),B.run_mode="cluster"),j().get(F,"tag")&&j().get(F,"tag").length&&(R.server_tag_id=j().get(F,"tag")),j().get(F,"channel_type")&&j().get(F,"ip")&&(R.customer_server={custom_channel:j().get(F,"channel_type"),custom_ip:j().get(F,"ip")},R.ip=j().get(F,"ip")),j().get(F,"name")){var V=F.name;j().isArray(V)&&(V=V.join(",")),R.ip=V}return delete R.server,R}),B.cases=$)}),r.test_config=J==null?void 0:J.map(function(B){return(0,b.Z)((0,b.Z)({},B),{},{test_suite_id:B.test_suite,cases:B.cases.map(function($){return(0,b.Z)((0,b.Z)({},$),{},{test_case_id:$.test_case})})})}),r.moniter_contrl=!1,r.reclone_contrl=j().get(d,"reclone_contrl")||!1,j().get(r,"monitor_info")&&(r.moniter_contrl=!0),x=jr(r)),n!=="template"&&n!=="submit"&&Ca(!Y)):(0,Q.EV)(O,D),y.abrupt("return",{code:O,result:x});case 35:case"end":return y.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Tt=function(a){var n=location.search.indexOf("inheriting_machine")!==-1;return a.map(function(i){var d=j().get(i,"cases")||[];return i.cases=d.map(function(f){var _=f||{},r=_.customer_server,m=_.server_object_id,E=j().get(r,"custom_channel"),O=j().get(r,"custom_ip");return E&&O&&(f.server={ip:O,channel_type:E},delete f.customer_server),n&&m&&delete f.server_tag_id,f}),i})},La=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_,r,m,E,O,D;return(0,L.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!et){x.next=2;break}return x.abrupt("return");case 2:if(oa(!1),n={},W(!0),!Y){x.next=18;break}return x.next=8,Jt("submit");case 8:if(i=x.sent,d=i.code,f=i.result,_=f===void 0?{}:f,d===200){x.next=15;break}return W(!1),x.abrupt("return");case 15:return x.next=17,xe(_);case 17:n=x.sent;case 18:return x.next=20,xe();case 20:if(n=x.sent,r=(0,b.Z)((0,b.Z)({},n),{},{workspace:k,job_type:C.id}),Z==="TestTemplate"&&(r=(0,b.Z)((0,b.Z)({},r),{},{data_from:"template",template_id:ge.id,job_type:C.id})),Z==="TestExport"&&(r=(0,b.Z)((0,b.Z)({},r),{},{data_from:"rerun",job_id:de})),!st(r)){x.next=27;break}return W(!1),x.abrupt("return",I.default.warning(h({id:"ws.test.job.machine.cannot.be.empty"})));case 27:if(r.test_config){x.next=30;break}return W(!1),x.abrupt("return",I.default.warning(h({id:"ws.test.job.suite.cannot.be.empty"})));case 30:return m=Tt(r.test_config),x.next=33,(0,Se._r)((0,b.Z)((0,b.Z)({},r),{},{test_config:m})).catch(function(){return W(!1)});case 33:E=x.sent,O=E.code,D=E.msg,O===200?(te((0,b.Z)((0,b.Z)({},M),{},{refreshMenu:!(M!=null&&M.refreshMenu)})),u.m8.push("/ws/".concat(k,"/test_result")),I.default.success(h({id:"ws.test.job.operation.success"}))):O===1380?oa(!0):(0,Q.EV)(O,D),W(!1);case 38:case"end":return x.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),st=function(a){var n=!1;if(a&&a.moniter_contrl){var i=Array.isArray(a.monitor_info)?a.monitor_info:[];n=i.some(function(d){return d&&d.monitor_type==="custom_machine"&&!d.server})}return n},jr=function(a){var n,i,d,f,_,r=a.template_name,m=a.description,E=a.enable,O=a.name,D=a.project,X=a.baseline,x=a.monitor_info,J=a.need_reboot,ae=a.rpm_info,ke=a.script_info,y=a.env_info,B=a.kernel_info,$=a.kernel_version,R=a.iclone_info,F=a.build_pkg_info,V=a.reclone_contrl,z=a.moniter_contrl,Re=a.test_config,se=a.cleanup_info,Me=a.tags,xt=a.notice_subject,lt=a.report_name,Ut=a.callback_api,Kt=a.email,Yt=a.ding_token,Ct=a.report_template,ot=R||{},Je=ot.os,Ft=Je===void 0?"":Je,ut=ot.app_name,Ie=ut===void 0?"":ut,Ce=B||{},dt=Ce.branch,Ve=(0,Xe.Z)(Ce,Ln),ct={template_name:r,description:m,enable:E},Ue={name:O,project:D,baseline:X},ft=(0,b.Z)((0,b.Z)({monitor_info:x,rpm_info:ae,script_info:ke,need_reboot:J,env_info:y,reclone_contrl:V,os:Ft,app_name:Ie,moniter_contrl:z,kernel_version:$},Ve),F),Ot=Re,Ke={cleanup_info:se,tags:Me,notice_subject:xt,email:Kt,ding_token:Yt,report_template:Ct,report_name:lt,callback_api:Ut};(n=Et.current)===null||n===void 0||n.setVal(ct),(i=yt.current)===null||i===void 0||i.setVal(Ue),(d=De.current)===null||d===void 0||d.setVal((0,b.Z)((0,b.Z)({},ft),{},{kernel_info:B,build_pkg_info:F})),(f=jt.current)===null||f===void 0||f.setVal(Ke);var Ma=((_=Zt.current)===null||_===void 0?void 0:_.setVal(Ot))||[];return{templateEditFormInfo:ct,basicFormInfo:Ue,envFormInfo:ft,moreFormInfo:Ke,new_test_config:Ma}},Pa=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(n){var i,d,f,_,r;return(0,L.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!et){E.next=2;break}return E.abrupt("return",!1);case 2:return W(!0),E.next=5,xe();case 5:if(i=E.sent,!st(i)){E.next=9;break}return W(!1),E.abrupt("return",I.default.warning(h({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(i.test_config){E.next=12;break}return W(!1),E.abrupt("return",I.default.warning(h({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return i=(0,b.Z)((0,b.Z)({workspace:k},i),{},{job_type:C.id}),d=Tt(i.test_config),E.next=16,(0,qe.Y9)((0,b.Z)((0,b.Z)({},i),{},{test_config:d},n)).catch(function(){return W(!1)});case 16:f=E.sent,_=f.code,r=f.msg,_===200?(I.default.success(h({id:"ws.test.job.operation.success"})),Wt.current.hide(),hr(),te((0,b.Z)((0,b.Z)({},M),{},{refreshMenu:!(M!=null&&M.refreshMenu)}))):(0,Q.EV)(_,r),W(!1);case 21:case"end":return E.stop()}},a)}));return function(n){return g.apply(this,arguments)}}(),Da=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_;return(0,L.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n={},!Y){m.next=10;break}return m.next=4,Jt("template");case 4:if(i=m.sent,d=i.code,f=i.result,n=f,d===200){m.next=10;break}return m.abrupt("return");case 10:if(!Y){m.next=16;break}return m.next=13,xe(n);case 13:m.t0=m.sent,m.next=19;break;case 16:return m.next=18,xe();case 18:m.t0=m.sent;case 19:if(_=m.t0,!st(_)){m.next=22;break}return m.abrupt("return",I.default.warning(h({id:"ws.test.job.machine.cannot.be.empty"})));case 22:if(_.test_config){m.next=24;break}return m.abrupt("return",I.default.warning(h({id:"ws.test.job.suite.cannot.be.empty"})));case 24:Z==="TestJob"||Z==="TestExport"?Wt.current.show():Pa({});case 25:case"end":return m.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),yr=function(a){var n=a.target;Fa({ws_id:k,job_type_id:C.id,name:n.value})},ka=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(n){var i,d,f,_,r,m,E;return(0,L.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return i=Tt(n.test_config),D.next=3,(0,qe.iM)((0,b.Z)((0,b.Z)({template_id:ge.id,workspace:k,job_type:C.id},n),{},{test_config:i}));case 3:if(d=D.sent,f=d.code,_=d.msg,Qe.default.destroy(),f!==200){D.next=21;break}return D.next=10,(0,Se.Ls)({template_id:ge.id});case 10:r=D.sent,m=(0,S.Z)(r.data,1),E=m[0],bt(E),At(!1),Bt(!0),$t(n.enable),I.default.success(h({id:"operation.success"})),Z!=="TemplatePreview"&&u.m8.push({pathname:"/ws/".concat(k,"/job/templates"),state:H||{}}),D.next=22;break;case 21:(0,Q.EV)(f,_);case 22:W(!1);case 23:case"end":return D.stop()}},a)}));return function(n){return g.apply(this,arguments)}}(),Zr=function(a){Qe.default.close(a)},Er=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f;return(0,L.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!et){r.next=2;break}return r.abrupt("return");case 2:return W(!0),r.next=5,xe();case 5:if(n=r.sent,!st(n)){r.next=9;break}return W(!1),r.abrupt("return",I.default.warning(h({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(n.test_config){r.next=13;break}return W(!1),I.default.warning(h({id:"ws.test.job.suite.cannot.be.empty"})),r.abrupt("return");case 13:if(n.baseline||(n.baseline=null),n.baseline_job_id||(n.baseline_job_id=null),n.cleanup_info||(n.cleanup_info=""),Object.prototype.toString.call(n)!=="[object Object]"){r.next=23;break}return i="open".concat(Date.now()),d=(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(A.Z,{type:"primary",size:"small",onClick:function(){return ka(n)},children:"\u786E\u8BA4"}),(0,e.jsx)(A.Z,{type:"primary",size:"small",onClick:function(){return Zr(i)},children:"\u53D6\u6D88"})]}),r.next=21,(0,Se.uz)({template_id:de});case 21:f=r.sent,f.code===200&&f.data.length>0?Qe.default.warning({duration:null,message:"\u63D0\u793A",description:"\u5F53\u524D\u6709\u6D4B\u8BD5\u8BA1\u5212\uFF08".concat(f.data[0].plan_name,"\uFF09\u5F15\u7528\u4E86\u8BE5\u6A21\u7248\uFF0C\u7F16\u8F91\u8BE5\u6A21\u7248\u5C06\u540C\u65F6\u5F71\u54CD\u5230\u6D4B\u8BD5\u8BA1\u5212\u4E2D\u7684\u6B64\u6A21\u7248\u914D\u7F6E\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"),btn:d,key:i}):ka(n);case 23:W(!1);case 24:case"end":return r.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),wr=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f,_;return(0,L.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!Za){m.next=2;break}return m.abrupt("return");case 2:return tt(!0),m.next=5,xe();case 5:if(n=m.sent,!st(n)){m.next=9;break}return tt(!1),m.abrupt("return",I.default.warning(h({id:"ws.test.job.machine.cannot.be.empty"})));case 9:if(n.test_config){m.next=12;break}return tt(!1),m.abrupt("return",I.default.warning(h({id:"ws.test.job.suite.cannot.be.empty"})));case 12:return n.baseline||(n.baseline=null),i=Tt(n.test_config),m.next=16,(0,qe.iM)((0,b.Z)((0,b.Z)({template_id:ge.id,workspace:k,job_type:C.id},n),{},{test_config:i}));case 16:d=m.sent,f=d.code,_=d.msg,f===200?(I.default.success(h({id:"request.save.success"})),u.m8.push("/ws/".concat(k,"/test_job/").concat(C.id,"?template_id=").concat(ge.id))):(0,Q.EV)(f,_),tt(!1);case 21:case"end":return m.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Tr=function(a){ha(a)},it={disabled:Un,ws_id:k,template:ge,test_type:C==null?void 0:C.test_type,business_type:(C==null?void 0:C.business_type)||"",server_provider:C==null?void 0:C.server_type,server_type:C==null?void 0:C.server_type},Vt=(0,s.useMemo)(function(){return Le>=1240?(1240-1e3)/2:20},[Le]),_e=(0,On.Z)(ga),xr=(0,s.useMemo)(function(){var g={minHeight:He,overflow:"auto",background:"#f5f5f5"};return q?(0,b.Z)((0,b.Z)({},g),{},{paddingTop:50}):g},[He,q]),Cr=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n,i,d,f;return(0,L.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={yaml_data:at,workspace:k},r.next=3,(0,Se.VF)(n);case 3:i=r.sent,d=i.code,f=i.msg,d!==200?(0,Q.EV)(d,f):I.default.success(h({id:"operation.success"}));case 7:case"end":return r.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Fr=function(){Ca(!1),wt("")},Or=function(a){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)},Sr=function(a,n){var i=window.URL||window.webkitURL||window,d=new Blob([n]),f=document.createElementNS("http://www.w3.org/1999/xhtml","a");f.href=i.createObjectURL(d),f.download=a,Or(f)},Lr=function(){var g=(0,K.Z)((0,L.Z)().mark(function a(){var n;return(0,L.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:n="job_"+ +new Date,Sr("".concat(n,".yaml"),at);case 2:case"end":return d.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Pr=function(a){rr(a)},Ra=(0,e.jsxs)(e.Fragment,{children:[ir&&(0,e.jsx)(A.Z,{onClick:wr,loading:Za,children:(0,e.jsx)(u._H,{id:"ws.test.job.SaveCreateSubmit"})}),(0,e.jsx)(A.Z,{type:"primary",onClick:Er,loading:et,children:(0,e.jsx)(u._H,{id:"ws.test.job.SaveTemplateModify"})})]});return(0,e.jsxs)("div",{style:xr,children:[!Mt&&!(ve!=null&&ve.user_id)?(0,e.jsx)("div",{className:w().not_logged_in,children:(0,e.jsx)("div",{style:{width:"1240px"},children:(0,e.jsx)(Na.Z,{})})}):null,q&&(0,e.jsxs)(P.Z,{align:"middle",className:w().page_preview_nav,justify:"space-between",children:[(0,e.jsxs)(G.Z,{children:[(0,e.jsx)("div",{style:{height:50,width:50,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){Z==="JobTypePreview"?u.m8.push("/ws/".concat(k,"/job/types")):u.m8.push(Pe.IsWsSetting()?{pathname:"/ws/".concat(k,"/job/templates"),state:H||{}}:"./")},children:(0,e.jsx)(Ua.Z,{style:{fontSize:20}})}),Z==="JobTypePreview"&&(0,e.jsx)(We.Z.Title,{level:4,children:(0,e.jsx)(u._H,{id:"ws.test.job.JobTypePreview"})}),Z==="TemplatePreview"&&(0,e.jsx)(We.Z.Title,{level:4,children:(0,e.jsx)(u._H,{id:"ws.test.job.TemplatePreview"})}),Z==="TemplateEdit"&&(0,e.jsx)(We.Z.Title,{level:4,children:(0,e.jsx)(u._H,{id:"ws.test.job.TemplateEdit"})})]}),Z==="TemplatePreview"&&(0,e.jsxs)(G.Z,{children:[ma&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{onClick:function(){Bt(!0),At(!1),Zt.current.setChecked(!1)},children:(0,e.jsx)(u._H,{id:"operation.cancel"})}),Ra]}),!ma&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{onClick:function(){return Oa(location.href)},children:(0,e.jsx)(u._H,{id:"ws.test.job.copy.link"})}),(0,e.jsx)(u.Nv,{accessible:Pe.WsMemberOperateSelf(ge==null?void 0:ge.creator),fallback:(0,e.jsx)(A.Z,{onClick:function(){return(0,Q.WR)()},children:(0,e.jsx)(u._H,{id:"ws.test.job.ModifySetting"})}),children:(0,e.jsx)(A.Z,{onClick:gr,children:(0,e.jsx)(u._H,{id:"ws.test.job.ModifySetting"})})})]})]}),Z==="TemplateEdit"&&(0,e.jsx)(G.Z,{children:Ra})]}),(0,e.jsxs)(Ze.Z,{spinning:Mt,children:[(0,e.jsxs)("div",{className:w().page_header,style:["TestJob","TestExport"].includes(Z)?{paddingBottom:80}:{},children:[(0,e.jsx)("div",{style:{height:250,minWidth:1080,background:"#fff",position:"absolute",left:0,top:0,width:"100%"}}),(0,e.jsx)(P.Z,{className:w().page_title,justify:"center",children:(0,e.jsx)(P.Z,{style:{width:_e!=null&&_e.width?(_e==null?void 0:_e.width)+Vt*2:_e==null?void 0:_e.width},children:(0,e.jsxs)(me.Z,{span:24,children:[(0,e.jsxs)(P.Z,{justify:"space-between",children:[(0,e.jsx)("span",{children:C.name}),(0,e.jsx)(u.Nv,{accessible:Pe.IsWsSetting(),children:Z==="TestJob"&&!Mt&&(0,e.jsx)(Ee.Z,{overlayClassName:w().template_popover,placement:"bottomRight",open:Gn,onOpenChange:Tr,title:(0,e.jsx)(le.Z,{autoComplete:"off",prefix:(0,e.jsx)(Ka.Z,{}),className:w().job_search_inp,placeholder:h({id:"ws.test.job.search.placeholder.template"}),onChange:yr}),content:(0,e.jsxs)(we.Z,{style:{maxHeight:480,overflow:"auto",paddingBottom:12},children:[Array.isArray(nt)&&nt.length>0&&(0,e.jsx)(e.Fragment,{children:nt.map(function(g){return(0,e.jsx)("div",{className:w().template_item,onClick:function(){if(!g.job_type)return I.default.error(h({id:"ws.test.job.please.delete"}));u.m8.push("/ws/".concat(k,"/test_job/").concat(g.job_type_id,"?template_id=").concat(g.id)),ha(!1)},children:(0,e.jsx)(Ha.Z,{title:g.name})},g.id)})}),Array.isArray(nt)&&nt.length===0&&(0,e.jsx)("div",{style:{lineHeight:"80px",textAlign:"center",color:"rgba(0,0,0,.35)"},children:(0,e.jsx)(u._H,{id:"ws.test.job.no.template"})})]}),children:(0,e.jsx)(A.Z,{type:"default",children:(0,e.jsx)(u._H,{id:"ws.test.job.use.template.create"})})})})]}),(0,e.jsxs)("div",{className:w().page_tags,children:[(0,e.jsx)(pe.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:C.server_type&&(0,e.jsx)(u._H,{id:"header.".concat(C.server_type),defaultMessage:""})}),(0,e.jsx)(pe.Z,{color:"#F2F4F6",style:{color:"#515B6A"},children:C.test_type==="business"?(0,e.jsx)(u._H,{id:"header.business.".concat(C.business_type),defaultMessage:"business.others"}):C.test_type&&(0,e.jsx)(u._H,{id:"header.test_type.".concat(C.test_type),defaultMessage:""})})]}),(0,e.jsx)("div",{className:w().page_dec,children:C.description})]})})}),(0,e.jsx)("div",{className:w().page_body_content,style:Y?{paddingLeft:0,paddingRight:0,paddingTop:0}:{paddingLeft:Vt,paddingRight:Vt,paddingTop:24},children:(0,e.jsx)(Ze.Z,{spinning:Jn,style:{width:"100%"},children:(0,e.jsxs)(P.Z,{className:w().page_body,justify:"center",children:[(0,e.jsx)("div",{ref:ga,style:{width:1e3}}),(Z==="TestJob"||Z==="TestExport")&&(0,e.jsx)("div",{className:w().yaml_transform_icon,style:Y?{top:10,right:10}:{top:-14,right:-110},onClick:Jt,children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(fn,{}),Y?(0,e.jsx)(u._H,{id:"ws.test.job.switch.form.mode"}):(0,e.jsx)(u._H,{id:"ws.test.job.switch.yaml.mode"})]})}),(0,e.jsxs)("div",{style:Y?{width:1240,display:"none"}:{width:1e3},children:[(0,e.jsxs)(me.Z,{span:24,style:{width:1e3},children:[Z==="TestJob"&&(0,e.jsx)(P.Z,{className:w().page_body_title,children:(0,e.jsx)(u._H,{id:"ws.test.job.create.job"})}),Z==="TestExport"&&(0,e.jsx)(P.Z,{className:w().page_body_title,children:(0,e.jsx)(u._H,{id:"ws.test.job.import.config"})}),(Z==="TemplatePreview"||Z==="TemplateEdit"||Z==="TestTemplate")&&(0,e.jsx)(P.Z,{className:w().page_body_title,children:(0,e.jsx)(u._H,{id:"ws.test.job.test.template"})})]}),(0,e.jsxs)(me.Z,{span:24,style:{width:1e3},children:[(Z==="TemplatePreview"||Z==="TemplateEdit"||Z==="TestTemplate")&&(0,e.jsxs)(P.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(u._H,{id:"ws.test.job.templateForm"})})}),(0,e.jsx)(sn,(0,b.Z)({onEnabelChange:$t,ref:Et},it))]}),JSON.stringify(fe.basic)!=="{}"&&(0,e.jsxs)(P.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(u._H,{id:"ws.test.job.basicForm"})})}),(0,e.jsx)(za.Z,(0,b.Z)({onRef:yt,contrl:fe.basic,callBackProjectId:Pr,projectListDataRef:Qn,baselineListDataRef:Xn,isYamlFormat:Y},it))]}),JSON.stringify(fe.env)!=="{}"&&(0,e.jsxs)(P.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(u._H,{id:"ws.test.job.envForm"})})}),(0,e.jsx)(Ga.Z,(0,b.Z)({onRef:De,contrl:fe.env,envErrorFlag:Hn,project_id:nr},it))]}),C.test_type&&(0,e.jsxs)(P.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsxs)("span",{children:[(0,e.jsx)("b",{style:{fontWeight:"normal",color:"#ff4d4f"},children:"*\xA0"}),(0,e.jsx)(u._H,{id:"ws.test.job.suiteTable"})]})}),(0,e.jsx)(me.Z,{offset:3,span:21,children:(0,s.createElement)(Xa.Z,(0,b.Z)((0,b.Z)({},it),{},{key:C.test_type,handleData:function(a){return Rt(a)},contrl:fe.suite,onRef:Zt,setPageLoading:It,caseDataRef:tr}))})]}),JSON.stringify(fe.more)!=="{}"&&(0,e.jsxs)(P.Z,{className:w().form_row,children:[(0,e.jsx)("div",{className:w().page_body_nav,children:(0,e.jsx)("span",{children:(0,e.jsx)(u._H,{id:"ws.test.job.moreForm"})})}),(0,e.jsx)(Qa.Z,(0,b.Z)((0,b.Z)({},it),{},{onRef:jt,contrl:fe.more,isReset:dr,tagsDataRef:qn,reportTemplateDataRef:er,callback:mr}))]})]})]}),Y&&(0,e.jsxs)("div",{className:w().yaml_container,children:[(0,e.jsxs)(me.Z,{span:24,className:w().yaml_operate,children:[(0,e.jsxs)(G.Z,{align:"center",className:w().yaml_copy_link,onClick:Cr,children:[(0,e.jsx)(Cn,{className:w().operate_icon}),(0,e.jsx)(u._H,{id:"ws.test.job.yaml.test"})]}),(0,e.jsxs)(G.Z,{align:"center",className:w().yaml_copy_link,id:"copy_dom_id",onClick:function(){return Oa(at.replace("---",""))},style:{marginLeft:10},children:[(0,e.jsx)(gn,{className:w().operate_icon}),(0,e.jsx)(u._H,{id:"ws.test.job.copy"})]}),(0,e.jsxs)(G.Z,{align:"center",className:w().yaml_copy_link,onClick:Lr,style:{marginLeft:10},children:[(0,e.jsx)(Zn,{className:w().operate_icon}),(0,e.jsx)(u._H,{id:"ws.test.job.download"})]}),(0,e.jsx)(Ya.Z,{onClick:Fr,style:{float:"right",color:"#fff"}})]}),(0,e.jsx)(Fn.Z,{mode:"yaml",code:at,onChange:function(a){return wt(a)}})]})]})})})]}),(Z==="TestJob"||Z==="TestTemplate"||Z==="TestExport")&&(0,e.jsx)(P.Z,{justify:"end",className:w().options_bar,children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(je.Z,{title:(0,e.jsx)(u._H,{id:"ws.test.job.reset.confirm.info"}),onConfirm:j().partial(Sa,!0),okText:(0,e.jsx)(u._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(u._H,{id:"operation.cancel"}),children:(0,e.jsx)(A.Z,{children:(0,e.jsx)(u._H,{id:"ws.test.job.reset"})})}),Ht.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je.Z,{title:h({id:"ws.result.details.keep.time.job.tag"},{data:(p=Ht[0])===null||p===void 0?void 0:p.label}),onConfirm:Da,okText:(0,e.jsx)(u._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(u._H,{id:"operation.cancel"}),placement:"topRight",children:(0,e.jsx)(A.Z,{disabled:!Pe.IsWsSetting(),children:(0,e.jsx)(u._H,{id:"ws.test.job.save.as.template"})})}),(0,e.jsx)(je.Z,{title:h({id:"ws.result.details.keep.time.job.tag"},{data:(l=Ht[0])===null||l===void 0?void 0:l.label}),onConfirm:La,okText:(0,e.jsx)(u._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(u._H,{id:"operation.cancel"}),placement:"topRight",children:(0,e.jsx)(A.Z,{type:"primary",disabled:!Pe.IsWsSetting(),children:(0,e.jsx)(u._H,{id:"ws.test.job.submit.test"})})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{onClick:Da,disabled:!Pe.IsWsSetting(),children:(0,e.jsx)(u._H,{id:"ws.test.job.save.as.template"})}),(0,e.jsx)(A.Z,{type:"primary",loading:et,onClick:La,disabled:!Pe.IsWsSetting(),children:(0,e.jsx)(u._H,{id:"ws.test.job.submit.test"})})]})]})}),(0,e.jsx)(an,{ref:Wt,onOk:Pa})]})]})},Dn=Pn}}]);
