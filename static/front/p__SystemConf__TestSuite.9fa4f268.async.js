(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3503],{66503:function(Ne){Ne.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},91014:function(Ne){Ne.exports={filter:"filter___1AVbu",confirm:"confirm___2X7ZG",domain:"domain___3UWFB"}},19137:function(Ne){Ne.exports={filter:"filter___1IKYx",confirm:"confirm___3RbBO",domain:"domain___1-UgM"}},2111:function(Ne){Ne.exports={suiteTable:"suiteTable___2-p1T",caseTableCls:"caseTableCls___3tt7c",warp:"warp___Lt1_m",batch:"batch___1YjOQ",pagination:"pagination___3PulQ",hidden:"hidden___z5Xys",filter:"filter___2euN7",confirm:"confirm___2mS0-",domain:"domain___2TGdA",edit:"edit___3n0dF",caseTabCls:"caseTabCls___mxoaj",fail_detail_operation:"fail_detail_operation___RxOy2",synchronous:"synchronous___2jXy5",synchronousTime:"synchronousTime___1THPY",modalChange:"modalChange___2t9Zt",cer_tips:"cer_tips___2rRBh",tab_hide_icon:"tab_hide_icon___Jl3CR"}},9173:function(Ne){Ne.exports={addBusiness_drawer:"addBusiness_drawer___1IfNE",server_provider:"server_provider___2V1nE"}},41342:function(Ne){Ne.exports={addConf_drawer:"addConf_drawer___36ETp",server_provider:"server_provider___OCsxL",variableLabel:"variableLabel___1eKJk",Bulk_btn:"Bulk_btn___3dMcP",flexStart:"flexStart___9WXHv",CI_Config_Extra:"CI_Config_Extra___29-5R",ciTypeElement:"ciTypeElement___3BFv5"}},40689:function(Ne){Ne.exports={confList_root:"confList_root___61KFr",deleteAll:"deleteAll___1Dwt5"}},76766:function(Ne){Ne.exports={addConf_drawer:"addConf_drawer___3dU-q",server_provider:"server_provider___3JVSB"}},89279:function(Ne){Ne.exports={suitList_root:"suitList_root___374pA",deleteAll:"deleteAll___B_DuG"}},31122:function(Ne){Ne.exports={business_root:"business_root___IbDzi",businessList:"businessList___2_Sba",deleteAll:"deleteAll___1482L"}},58538:function(Ne){Ne.exports={modalChange:"modalChange___1oHid"}},86811:function(Ne){Ne.exports={warp:"warp___2ZF85",FuncOrPerfConfList_root:"FuncOrPerfConfList_root___YULdo",batch:"batch___19QVf",pagination:"pagination___RoEs7",hidden:"hidden___33mES",filter:"filter____TjRh",confirm:"confirm___2zL5r",domain:"domain___2GpXP",edit:"edit___24iLc",center:"center___2L-P0",fail_detail_operation:"fail_detail_operation___11_i1",synchronous:"synchronous___3Cznp",synchronousTime:"synchronousTime___3EO_W",modalChange:"modalChange___W4bBS",cer_tips:"cer_tips___2GLUt",tab_hide_icon:"tab_hide_icon___3ZICZ"}},42382:function(Ne){Ne.exports={add_baseline_drawer:"add_baseline_drawer___-6P4f",server_provider:"server_provider___3VG8G"}},58496:function(Ne){Ne.exports={warp:"warp___2bW2h",batch:"batch___adrgq",pagination:"pagination___1RATm",hidden:"hidden___21j8X",filter:"filter___2N0s5",confirm:"confirm___22Qfr",domain:"domain___2FJjs",edit:"edit___1YVXH",center:"center___3neC4",fail_detail_operation:"fail_detail_operation___2JXjR",synchronous:"synchronous___3BWZC",synchronousTime:"synchronousTime___3CAwj",modalChange:"modalChange___2aniH",cer_tips:"cer_tips___1aH_F",tab_hide_icon:"tab_hide_icon___3pZw5"}},72415:function(){},57286:function(Ne,gt,i){"use strict";i.d(gt,{Z:function(){return _t}});var en=i(64510),ae=i(87445),Ft=i(67448),st=i(47548),u=i(65790),n=i(17187),$t=i(69230),t=i(33821),it=i(35832),kt=i(32326),tt=i(22374),ct=i(22812),xt=i(24812);function yt(ft){return(0,ct.WY)("/api/auth/user/",{params:ft})}var $e=i(52454),Ht=function(){var It=(0,ct.YB)(),pt=It.formatMessage,Qe=(0,xt.UO)(),zt=Qe.ws_id,Ae=(0,ct.QT)(function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return yt({keyword:se,scope:"aligroup",ws_id:zt,page_num:1,page_size:500})},{debounceInterval:300}),Ct=Ae.data,Dt=Ae.loading,h=Ae.run,Mt=function(){var se=(0,kt.Z)((0,it.Z)().mark(function ie(){var l,at=arguments;return(0,it.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:l=at.length>0&&at[0]!==void 0?at[0]:"",h(l);case 2:case"end":return wt.stop()}},ie)}));return function(){return se.apply(this,arguments)}}();return Ct?(0,$e.jsx)(n.Z.Item,{name:"emp_id",label:"Owner",rules:[{required:!0,message:pt({id:"please.select"})}],children:(0,$e.jsx)(t.Z,{allowClear:!0,notFoundContent:Dt?(0,$e.jsx)(st.Z,{size:"small"}):(0,$e.jsx)(ae.Z,{image:ae.Z.PRESENTED_IMAGE_SIMPLE}),placeholder:pt({id:"select.owner"}),filterOption:!1,onSearch:Mt,style:{width:"100%"},showArrow:!0,showSearch:!0,listHeight:160,getPopupContainer:function(ie){return ie.parentNode},children:Ct==null?void 0:Ct.map(function(se,ie){return(0,$e.jsxs)(t.Z.Option,{value:se.emp_id,children:[se.last_name,"(",se.first_name===""?se.last_name:se.first_name,")",!1]},ie)})})}):(0,$e.jsx)(n.Z.Item,{label:"Owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,$e.jsx)(t.Z,{placeholder:"\u8BF7\u9009\u62E9Owner"})})},_t=Ht},80873:function(Ne,gt,i){"use strict";i.d(gt,{f:function(){return xt}});var en=i(57359),ae=i(34423),Ft=i(20418),st=i(79625),u=i(96584),n=i(488),$t=i(22374),t=i(66503),it=i.n(t),kt=i(74066),tt=i(52454),ct=["desc","title"],xt=function($e){var Ht=$e.desc,_t=$e.title,ft=(0,n.Z)($e,ct);return(0,tt.jsxs)(ae.Z,{children:[(0,tt.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:_t}),(0,tt.jsx)(u.Z,(0,Ft.Z)((0,Ft.Z)({overlayClassName:it().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},ft),{},{title:Ht,color:"#fff",children:(0,tt.jsx)(kt.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},15122:function(Ne,gt,i){"use strict";var en=i(46721),ae=i(94867),Ft=i(8281),st=i(58591),u=i(57359),n=i(34423),$t=i(88966),t=i(11048),it=i(39190),kt=i(22374),tt=i(19137),ct=i.n(tt),xt=i(39935),yt=i(22812),$e=i(52454),Ht=function(ft){var It=ft.list,pt=ft.confirm,Qe=ft.onConfirm,zt=ft.roleType,Ae=(0,yt.YB)(),Ct=Ae.formatMessage,Dt=(0,kt.useState)(),h=(0,it.Z)(Dt,2),Mt=h[0],se=h[1],ie=function(at){se(at.target.value)};return(0,$e.jsxs)("div",{className:ct().filter,children:[(0,$e.jsx)(t.ZP.Group,{onChange:ie,value:Mt,children:(0,$e.jsx)(n.Z,{direction:"vertical",children:It.map(function(l){return(0,$e.jsx)(t.ZP,{className:ct().domain,value:l.id,children:zt==="role"?(0,xt.u)(l.name,Ct):l.name},l.id)})})}),(0,$e.jsx)(st.Z,{style:{margin:"10px 0"}}),(0,$e.jsxs)("div",{className:ct().confirm,children:[(0,$e.jsx)(ae.Z,{size:"small",type:"link",style:{border:"none"},onClick:function(){pt==null||pt(),Qe(Mt)},children:(0,$e.jsx)(yt._H,{id:"operation.ok"})}),(0,$e.jsx)(ae.Z,{size:"small",type:"text",onClick:function(){pt==null||pt(),se(void 0),Qe(void 0)},children:(0,$e.jsx)(yt._H,{id:"operation.reset"})})]})]})};gt.Z=Ht},24874:function(Ne,gt,i){"use strict";i.r(gt),i.d(gt,{default:function(){return rr}});var en=i(46721),ae=i(94867),Ft=i(54905),st=i(90087),u=i(20418),n=i(22374),$t=i(75073),t=i(22812),it=i(24812),kt=i(88018),tt=i(58414),ct=i(67448),xt=i(47548),yt=i(14320),$e=i(53479),Ht=i(36142),_t=i(76837),ft=i(11407),It=i(68077),pt=i(31650),Qe=i(25100),zt=i(57359),Ae=i(34423),Ct=i(79625),Dt=i(96584),h=i(35832),Mt=i(81138),se=i(96146),ie=i(32326),l=i(39190),at=i(31784),At=i(74066),wt=i(93329),Lt=i(48766),Bt=i(81343),je=i(53933),Nt=i(7597),Nn=i(44851),dn=i.n(Nn),Vn=i(9620),Un=i(2111),lt=i.n(Un),sr=i(20632),Vt=i(71853),ir=i(67515),dt=i(12238),bt=i(82078),rt=i(46601),lr=i(88966),Ge=i(11048),e=i(52454),Wn=function(F){var p=F.onOk,d=F.isBatch,a=(0,n.useState)(!1),v=(0,l.Z)(a,2),c=v[0],C=v[1],q=(0,n.useState)(0),_=(0,l.Z)(q,2),A=_[0],ee=_[1],I=function(D){ee(0),C(D)},M=function(){p(A),C(!1)},z=function(){C(!0)},pe=function(D){var Ce=D.target;return ee(Ce.value)};return(0,e.jsxs)(e.Fragment,{children:[d?(0,e.jsx)(ae.Z,{onClick:z,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}):(0,e.jsx)(ae.Z,{style:{padding:0},size:"small",type:"link",onClick:z,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:lt().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),open:c,onOk:M,onCancel:function(){return I(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)($e.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(Ge.ZP.Group,{value:A,onChange:pe,children:[(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},on=Wn,dr=i(39693),jt=i(1518),or=i(69230),Ve=i(33821),ur=i(38519),ht=i(16416),cr=i(8281),un=i(58591),fr=i(20693),Be=i(3278),pr=i(65790),U=i(17187),Yn=(0,n.forwardRef)(function(R,F){var p=R.onOk,d=R.parentId,a=R.componentType,v=(0,t.YB)(),c=v.formatMessage,C=(0,n.useState)(""),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)(!1),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=U.Z.useForm(),Z=(0,l.Z)(pe,1),D=Z[0],Ce=(0,n.useState)(""),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,n.useState)(!1),_e=(0,l.Z)(K,2),fe=_e[0],He=_e[1],W=n.useState(!1),me=(0,l.Z)(W,2),Ie=me[0],J=me[1],w=n.useState(!1),T=(0,l.Z)(w,2),G=T[0],Q=T[1],Se=n.useState([]),he=(0,l.Z)(Se,2),be=he[0],Fe=he[1],Ee=function(){var Te=(0,ie.Z)((0,h.Z)().mark(function N(le){var te,y,k;return(0,h.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,je.Q9)(le);case 2:if(te=S.sent,y=te.data,k=te.code,k===200){S.next=7;break}return S.abrupt("return",Fe([]));case 7:Fe(y);case 8:case"end":return S.stop()}},N)}));return function(le){return Te.apply(this,arguments)}}(),ge=function(){z(!1),H(""),D.resetFields(),J(!1),Q(!1)};(0,n.useImperativeHandle)(F,function(){return{show:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=a==="suite"?{suite_id:d}:{case_id:d};Ee(te),A(N),z(!0),JSON.stringify(le)!=="{}"&&D.setFieldsValue((0,u.Z)((0,u.Z)({},le),{},{direction:le.direction==="\u4E0A\u5347"?"increase":"decline"}))},hide:ge}});var ke=function(){D.validateFields().then(function(N){p(N)}).catch(function(N){return console.log(N)})},B=function(N){N&&H(N)},oe=function(){He(!0);var N=D.getFieldValue("name")||[];J((N==null?void 0:N.length)===be.length),Q(!!(N!=null&&N.length)&&(N==null?void 0:N.length)<be.length)},xe=function(){if(de){var N=D.getFieldValue("name")||[];if(fe)D.setFieldsValue({n:N});else{var le=Array.from(new Set(N.concat(de.split(","))));D.setFieldsValue({name:le})}de&&!be.map(function(te){var y=te.name;return y}).includes(de)&&Fe(function(te){return te.concat({name:de})}),H(""),He(!1)}},we=function(){H(""),D.setFieldsValue({name:""})},Ke=function(N){var le=N.target,te=le.checked?be.map(function(y){return y.name}):[];D.setFieldsValue({name:te}),Q(!1),J(le.checked)},Ye=function(N){J(N.length===be.length),Q(!!N.length&&N.length<be.length)};return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,className:lt().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(_)}),width:480,onClose:ge,open:M,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(ae.Z,{onClick:ge,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{onClick:ke,type:"primary",htmlType:"submit",children:_.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(U.Z,{layout:"vertical",form:D,initialValues:{direction:"increase"},children:[~_.indexOf("edit")?(0,e.jsx)(U.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:c({id:"please.enter"})})}):(0,e.jsx)(U.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:c({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{mode:"multiple",allowClear:!0,onSearch:B,onSelect:oe,onBlur:xe,onClear:we,onChange:Ye,listHeight:150,dropdownRender:function(N){return(0,e.jsxs)(e.Fragment,{children:[N,(0,e.jsx)(un.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"0 8px"},children:(0,e.jsx)(ht.Z,{checked:Ie,indeterminate:G,onChange:Ke,children:"\u5168\u9009"})})]})},children:be.map(function(Te){return(0,e.jsxs)(Ve.Z.Option,{value:Te.name,children:[Te.name,Te.unit?"\uFF08".concat(Te.unit,"\uFF09"):null]},Te.name)})})}),(0,e.jsx)(U.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(jt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:c({id:"please.enter"})})}),(0,e.jsx)(U.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(jt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:c({id:"please.enter"})})}),(0,e.jsx)(U.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:c({id:"please.select"})}],children:(0,e.jsxs)(Ve.Z,{placeholder:c({id:"please.select"}),children:[(0,e.jsx)(Ve.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(Ve.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),qe=i(39935),Kt=(0,n.createContext)(null),cn=(0,n.createContext)(null),Jn=function(F){var p=F.id,d=F.innerKey,a=F.componentType,v=(0,t.YB)(),c=v.formatMessage,C=n.useContext(Kt),q=C.setMetricDelInfo,_=C.metricDelInfo,A=C.selectedRowKeys,ee=(0,n.useState)(1),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)(10),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)([]),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)(!0),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1],me=(0,n.useState)(),Ie=(0,l.Z)(me,2),J=Ie[0],w=Ie[1],T=(0,n.useState)(),G=(0,l.Z)(T,2),Q=G[0],Se=G[1],he=(0,n.useRef)(null),be=(0,t.QT)(je.ge,{initialData:[]}),Fe=be.data,Ee=function(){var te=(0,ie.Z)((0,h.Z)().mark(function y(k){var ne,S;return(0,h.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return K({data:[]}),W(!0),ne={page_num:M,page_size:D},ne[k]=p,r.next=6,(0,je.b2)(ne);case 6:S=r.sent,K(S),W(!1);case 9:case"end":return r.stop()}},y)}));return function(k){return te.apply(this,arguments)}}();(0,n.useEffect)(function(){Ee(d==="1"?"case_id":"suite_id")},[M,D,Q]);var ge=function(y){Fe.forEach(function(k){k.name==y.domain&&(y.domain=k.id)}),w(y.id),he.current.show("edit",y)},ke=function(){var te=(0,ie.Z)((0,h.Z)().mark(function y(k){var ne,S,x;return(0,h.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!J){s.next=6;break}return s.next=3,(0,je.Of)(J,k);case 3:s.t0=s.sent,s.next=9;break;case 6:return s.next=8,(0,je.WM)(k);case 8:s.t0=s.sent;case 9:ne=s.t0,S=ne.code,x=ne.msg,S===200?(he.current.hide(),Se(new Date().getTime())):(0,qe.EV)(S,x);case 13:case"end":return s.stop()}},y)}));return function(k){return te.apply(this,arguments)}}(),B=function(){var te=(0,ie.Z)((0,h.Z)().mark(function y(k,ne){var S,x,r,s,o;return(0,h.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(S=k.object_type,x=k.name,d!=="1"){b.next=7;break}return b.next=4,(0,je.G6)(k.id);case 4:b.t0=b.sent,b.next=10;break;case 7:return b.next=9,(0,je.G6)(k.id,{is_sync:ne,object_id:p,object_type:S,name:x});case 9:b.t0=b.sent;case 10:r=b.t0,s=r.code,o=r.msg,s===200?(console.log("ok"),se.default.success(c({id:"operation.success"})),Se(new Date().getTime())):(0,qe.EV)(s,o);case 14:case"end":return b.stop()}},y)}));return function(k,ne){return te.apply(this,arguments)}}(),oe=function(){w(void 0),he.current.show("new")},xe=function(y){var k=c({id:"TestSuite.is_synchronize.all.conf"}),ne=c({id:"operation.yes"}),S=c({id:"operation.no"});dt.Z.confirm({title:k,icon:(0,e.jsx)(rt.Z,{}),okText:ne,cancelText:S,maskClosable:!1,onOk:function(){ke((0,u.Z)((0,u.Z)({},y),{},{is_sync:1}))},onCancel:function(){ke((0,u.Z)((0,u.Z)({},y),{},{is_sync:0}))}})},we=function(){var te=(0,ie.Z)((0,h.Z)().mark(function y(k){var ne;return(0,h.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:ne=(0,u.Z)((0,u.Z)({},k),{object_id:p,object_type:d==="1"?"case":"suite"}),d==="1"?ke(ne):xe(ne);case 2:case"end":return x.stop()}},y)}));return function(k){return te.apply(this,arguments)}}(),Ke=function(y){var k=y.row;return d==="1"?(0,e.jsx)(Vt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return B(k)},overlayStyle:{width:"224px"},children:(0,e.jsx)(ae.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(on,{onOk:function(S){return B(k,S)}})},Ye=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(y){return y&&Number(y).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(y){return y&&Number(y).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)($e.Z,{style:{width:"100%"},justify:"space-between",children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",size:"small",onClick:function(){return oe()},children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:107,fixed:"right",render:function(y,k){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Qe.Z.Link,{onClick:function(){return ge(k)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Ke,{row:k})]})}}],Te=function(y,k){z(y),Ce(k)},N=function(y){q({innerKey:d,object_id:p,selectedRowKeys:y,refresh:function(){return Ee(d==="1"?"case_id":"suite_id")}})},le={selectedRowKeys:_==null?void 0:_.selectedRowKeys,getCheckboxProps:function(){return{disabled:!!(A!=null&&A.length)}},onChange:N};return(0,e.jsxs)("div",{className:lt().warp,children:[(0,e.jsx)(bt.Z,{columns:Ye,scroll:{x:670},rowKey:"id",name:"sys-suite-manage-basic-metric",loading:He,dataSource:H.data,rowSelection:le,page:H.page_num,totalPage:H.total_page,total:H.total,pageSize:H.page_size,handlePage:Te}),(0,e.jsx)(Yn,{onOk:we,ref:he,parentId:p,componentType:a})]},p)},fn=Jn,tn=(0,n.forwardRef)(function(R,F){var p=R.onOk,d=(0,n.useState)(""),a=(0,l.Z)(d,2),v=a[0],c=a[1],C=(0,n.useState)(!1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)({}),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useCallback)(function(){c(""),A(!1),z({})},[]);(0,n.useImperativeHandle)(F,function(){return{show:function(ye){A(!0),c(ye.doc),z(ye)},hide:pe}});var Z=function(){p((0,u.Z)((0,u.Z)({},M),{},{doc:v}))},D=(0,n.useCallback)(function(Ce){var ye=Ce.target;return c(ye.value)},[]);return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,width:376,title:(0,e.jsx)(t._H,{id:"TestSuite.description.details"}),onClose:pe,visible:_,footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(ae.Z,{onClick:pe,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{onClick:Z,type:"primary",htmlType:"submit",children:(0,e.jsx)(t._H,{id:"operation.ok"})})]}),children:(0,e.jsx)(Be.Z.TextArea,{style:{height:"100%"},rows:6,value:v,onChange:D})})}),Zt=i(2656),Gn=function(){var F=(0,it.TH)(),p=F.query,d=p.test_type,a=(0,n.useState)([]),v=(0,l.Z)(a,2),c=v[0],C=v[1],q=function(){var _=(0,ie.Z)((0,h.Z)().mark(function A(){var ee,I;return(0,h.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,je.ge)({test_type:d});case 2:ee=z.sent,I=ee.data,C(I||[]);case 5:case"end":return z.stop()}},A)}));return function(){return _.apply(this,arguments)}}();return(0,n.useEffect)(function(){q()},[]),c},Ut=function(){return(0,n.useContext)(cn)},Qn=function(F,p){var d=F.onOk,a=n.useState(!1),v=(0,l.Z)(a,2),c=v[0],C=v[1],q=n.useState(),_=(0,l.Z)(q,2),A=_[0],ee=_[1];n.useImperativeHandle(p,function(){return{show:function(pe){pe&&ee(pe),C(!0)}}});var I=function(){d==null||d(A),C(!1)},M=function(){C(!1)};return(0,e.jsx)(dt.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:c,onCancel:M,footer:[(0,e.jsx)(ae.Z,{onClick:I,type:"danger",children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:M,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsx)(Qe.Z.Text,{type:"danger",children:(0,e.jsxs)(Ae.Z,{align:"center",children:[(0,e.jsx)(rt.Z,{}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})})},pn=n.forwardRef(Qn),Xn=function(F,p){var d=F.onOk,a=F.basePath,v=(0,t.YB)(),c=v.formatMessage,C=n.useState(!1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=n.useState(),I=(0,l.Z)(ee,2),M=I[0],z=I[1];n.useImperativeHandle(p,function(){return{show:function(ye){ye&&z(ye),A(!0)}}});var pe=function(){d==null||d(M),A(!1)},Z=function(){A(!1)},D=function(){var Ce=(0,ie.Z)((0,h.Z)().mark(function ye(){var de,H,K;return(0,h.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(M){fe.next=2;break}return fe.abrupt("return");case 2:return de=M.name,H=M.id,fe.next=5,(0,qe.MR)({name:de,id:H});case 5:K=fe.sent,K&&window.open("".concat(a||"/refenerce/suite/","?pk=").concat(K));case 7:case"end":return fe.stop()}},ye)}));return function(){return Ce.apply(this,arguments)}}();return(0,e.jsx)(dt.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:_,onCancel:Z,footer:[(0,e.jsx)(ae.Z,{onClick:pe,type:"danger",children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:Z,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:600,children:(0,e.jsxs)(Ae.Z,{style:{width:"100%"},direction:"vertical",children:[(0,e.jsx)(Qe.Z.Text,{type:"danger",children:(0,e.jsxs)(Ae.Z,{align:"start",children:[(0,e.jsx)(rt.Z,{}),c({id:"TestSuite.suite.delete.warning"},{data:M==null?void 0:M.name})]})}),(0,e.jsx)(Qe.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)(Qe.Z.Link,{onClick:D,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})},mn=n.forwardRef(Xn),We=i(6130),qn=(0,n.forwardRef)(function(R,F){var p=R.id,d=(0,t.YB)(),a=d.formatMessage,v=(0,it.TH)(),c=v.query,C=Ut(),q=C.domainList,_=st.Z.TabPane,A=(0,n.useContext)(Kt),ee=A.setSelectedRowKeys,I=A.setSelectedRow,M=A.selectedRowKeys,z=A.confDrawerShow,pe=A.confRefresh,Z=A.setConfRefresh,D=A.metricDelInfo,Ce=(0,n.useState)("1"),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,n.useState)(1),_e=(0,l.Z)(K,2),fe=_e[0],He=_e[1],W=(0,n.useState)(10),me=(0,l.Z)(W,2),Ie=me[0],J=me[1],w=(0,n.useState)([]),T=(0,l.Z)(w,2),G=T[0],Q=T[1],Se=(0,n.useState)(!0),he=(0,l.Z)(Se,2),be=he[0],Fe=he[1],Ee=(0,n.useState)([]),ge=(0,l.Z)(Ee,2),ke=ge[0],B=ge[1],oe=(0,n.useRef)(null),xe=(0,n.useRef)(null),we=(0,n.useRef)(null),Ke=function(){var r=(0,ie.Z)((0,h.Z)().mark(function s(){var o,P;return(0,h.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return Q({data:[]}),B([]),Fe(!0),o={suite_id:p,page_num:fe,page_size:Ie},ve.next=6,(0,je.Sb)(o);case 6:P=ve.sent,Q(P),Fe(!1);case 9:case"end":return ve.stop()}},s)}));return function(){return r.apply(this,arguments)}}();(0,n.useImperativeHandle)(F,function(){return{refresh:function(s){var o=s.refreshId;p===o&&Ke()}}}),(0,n.useEffect)(function(){Ke()},[fe,Ie,pe]);var Ye=function(s){s.var=s.var?JSON.parse(s.var):[{name:"",val:"",des:""}],s.is_default=s.is_default?1:0;for(var o=s.domain_id_list===""?[]:s.domain_id_list.split(","),P=[],b=0;b<o.length;b++)P.push(Number.parseInt(o[b]));s.domain_list_str=P,q.forEach(function(ve){ve.name==s.domain&&(s.domain=ve.id)}),z("edit",s)},Te=function(){var r=(0,ie.Z)((0,h.Z)().mark(function s(o){var P,b,ve,Re;return(0,h.Z)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,(0,Zt.Ob)({flag:"pass",case_id_list:o.id});case 2:ve=De.sent,Re=ve.code,Re===200?(P=xe.current)===null||P===void 0||P.show(o):(b=we.current)===null||b===void 0||b.show(o);case 5:case"end":return De.stop()}},s)}));return function(o){return r.apply(this,arguments)}}(),N=function(s){H(s),de!="1"&&Z(!pe)},le=function(){var r=(0,ie.Z)((0,h.Z)().mark(function s(o){return(0,h.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,je.tz)(o.id);case 2:se.default.success(a({id:"operation.success"})),Z(!pe);case 4:case"end":return b.stop()}},s)}));return function(o){return r.apply(this,arguments)}}(),te=function(){z("new",{bentch:!1,test_suite_id:p})},y=+status==0?{selectedRowKeys:M,getCheckboxProps:function(){var s;return{disabled:!!(D!=null&&(s=D.selectedRowKeys)!==null&&s!==void 0&&s.length)}},onChange:function(s,o){I(o),ee(s)}}:void 0,k=function(){var r=(0,ie.Z)((0,h.Z)().mark(function s(o){return(0,h.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:B([o.id]);case 1:case"end":return b.stop()}},s)}));return function(o){return r.apply(this,arguments)}}(),ne=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:{showTitle:!1},render:function(s,o){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:o.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(s){return(0,e.jsx)(e.Fragment,{children:s||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",ellipsis:!0,render:function(s){return(0,e.jsx)(e.Fragment,{children:s||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(s,o){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:o.var&&o.var!="[]"?JSON.parse(o.var).map(function(P){return"".concat(P.name,"=").concat(P.val||"-",",").concat(P.des||"-",";")}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),ellipsis:!0,width:100,key:"desc",render:function(s,o){return(0,e.jsx)(Nt.Z,{title:o.doc,width:70,isCode:!0,children:(0,e.jsx)(wt.Z,{className:lt().edit,onClick:function(){return oe.current.show(o)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(s,o){return o.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(s,o){return o.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(s,o){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:o.gmt_created})}},{title:(0,e.jsxs)($e.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",size:"small",onClick:te,children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"option",width:140,fixed:"right",render:function(s,o){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Qe.Z.Link,{onClick:function(){return Ye((0,u.Z)({},o))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Qe.Z.Link,{onClick:function(){return Te((0,u.Z)({},o))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],S=function(s,o){He(s),J(o)},x=function(){var r=(0,ie.Z)((0,h.Z)().mark(function s(o){var P,b,ve;return(0,h.Z)().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,(0,je.Ft)(o.id,{doc:o.doc});case 2:P=Ze.sent,b=P.code,ve=P.msg,b===200?(se.default.success(a({id:"operation.success"})),oe.current.hide(),Z(!pe)):(0,qe.EV)(b,ve);case 6:case"end":return Ze.stop()}},s)}));return function(o){return r.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(lt().warp," case_table_wrapper"),children:[c.test_type==="performance"&&(0,e.jsxs)(st.Z,{defaultActiveKey:"1",activeKey:de,onChange:function(s){return N(s)},className:lt().caseTabCls,children:[(0,e.jsx)(_,{tab:"Test Conf"},"1"),(0,e.jsx)(_,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),de=="1"?(0,e.jsx)(bt.Z,{columns:ne,name:"sys-suite-manage-case",scroll:{x:1400},rowKey:function(s){return s.id},loading:be,dataSource:(G==null?void 0:G.data)||[],page:G.page_num,rowSelection:y,totalPage:G.total_page,total:G.total,pageSize:G.page_size,handlePage:S,className:lt().caseTableCls,expandable:c.test_type=="performance"?{expandedRowRender:function(s){return(0,e.jsx)(fn,{componentType:"case",id:s.id,innerKey:de})},onExpand:function(s,o){s?k(o):B([])},indentSize:0,expandedRowKeys:ke,expandIcon:function(s){var o=s.expanded,P=s.onExpand,b=s.record;return o?(0,e.jsx)(Lt.Z,{onClick:function(Re){return P(b,Re)}}):(0,e.jsx)(Bt.Z,{onClick:function(Re){return P(b,Re)}})}}:{}}):(0,e.jsx)(fn,{componentType:"suite",id:p,innerKey:de}),(0,e.jsx)(tn,{ref:oe,onOk:x}),(0,e.jsx)(mn,{basePath:"/refenerce/conf/",ref:xe,onOk:le}),(0,e.jsx)(pn,{ref:we,onOk:le})]})}),ea=i(91014),Wt=i.n(ea),ta=function(F){var p=F.list,d=F.confirm,a=F.onConfirm,v=(0,n.useState)([]),c=(0,l.Z)(v,2),C=c[0],q=c[1],_=(0,n.useState)(!1),A=(0,l.Z)(_,2),ee=A[0],I=A[1],M=(0,n.useState)(!1),z=(0,l.Z)(M,2),pe=z[0],Z=z[1],D=function(H){Z(!!H.length&&H.length<p.length),q(H),I(H.length===p.length)},Ce=p.map(function(de){return de.id}),ye=function(H){q(H.target.checked?Ce:[]),I(H.target.checked),Z(!1)};return(0,e.jsxs)("div",{className:Wt().filter,children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxHeight:280,overflow:"auto",gap:4},children:[(0,e.jsx)(ht.Z,{indeterminate:pe,className:Wt().domain,onChange:ye,checked:ee,children:(0,e.jsx)(t._H,{id:"operation.select.all"})}),(0,e.jsx)(ht.Z.Group,{onChange:D,value:C,children:(0,e.jsx)(Ae.Z,{direction:"vertical",size:4,children:p.map(function(de){return(0,e.jsx)(ht.Z,{className:Wt().domain,value:de.id,children:de.name},de.id)})})})]}),(0,e.jsx)(un.Z,{style:{margin:"10px 0"}}),(0,e.jsxs)("div",{className:Wt().confirm,children:[(0,e.jsx)(ae.Z,{size:"small",type:"link",onClick:function(){d==null||d();var H=C&&C.join(",");a(H)},children:(0,e.jsx)(t._H,{id:"operation.ok"})}),(0,e.jsx)(ae.Z,{size:"small",type:"text",style:{border:"none"},onClick:function(){d==null||d(),q([]),a(void 0),I(!1),Z(!1)},children:(0,e.jsx)(t._H,{id:"operation.reset"})})]})]})},hn=ta,nn=i(12590),Yt=i(6532),vn=i(15122),mr=i(70772),Xe=i(6701),gn=i(57286),xn=i(80873),na=(0,n.forwardRef)(function(R,F){var p=R.onOk,d=(0,t.YB)(),a=d.formatMessage,v=(0,it.TH)(),c=v.query,C=c.test_type||"functional",q=U.Z.useForm(),_=(0,l.Z)(q,1),A=_[0],ee=Ut(),I=ee.domainList,M=ee.runList,z=ee.viewType,pe=(0,n.useState)(!1),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)(""),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)(),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1],me=(0,n.useState)(!1),Ie=(0,l.Z)(me,2),J=Ie[0],w=Ie[1],T=(0,n.useState)({}),G=(0,l.Z)(T,2),Q=G[0],Se=G[1],he=function(){Ce(!1),w(!1),A.resetFields(),W(void 0),K(""),Se({})};(0,n.useImperativeHandle)(F,function(){return{show:function(oe){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ce(!0),w(!1),xe&&Se(xe),A.setFieldsValue((0,u.Z)((0,u.Z)({},xe),{},{test_type:C,owner:xe.owner_name,certificated:xe.certificated?1:0}))},hide:he}});var be=function(){A.validateFields().then(function(oe){if(!oe.name||oe.name.replace(/\s+/g,"")==""){K("error"),W(a({id:"please.enter"}));return}oe.name=oe.name.replace(/\s+/g,""),w(!0),oe.owner===Q.owner_name&&(oe.owner=Q.owner),oe.domain_list_str=oe.domain_list_str.join(),p(oe,Q.id?Q.id:""),w(!1)}).catch(function(oe){(!oe.values.name||oe.values.name.replace(/\s+/g,"")=="")&&(K("error"),W(a({id:"please.enter"}))),w(!1)})},Fe=function(){w(!1)},Ee=function(){W(void 0),K("")},ge=(0,n.useMemo)(function(){var B=JSON.stringify(Q)!=="{}"?c.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.edit"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.edit"}):c.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.new"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.new"});return B},[c,Q]),ke=(0,n.useMemo)(function(){return JSON.stringify(Q)!=="{}"?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})},[]);return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,className:lt().warp,forceRender:!0,destroyOnClose:!0,title:ge,width:376,onClose:he,visible:D,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(ae.Z,{onClick:he,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{onClick:be,disabled:J,type:"primary",htmlType:"submit",children:ke})]}),children:(0,e.jsx)(U.Z,{layout:"vertical",form:A,initialValues:{is_default:1,view_type:"Type1"},children:(0,e.jsxs)($e.Z,{gutter:16,children:[(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"name",label:"Test Suite",validateStatus:H,help:He,rules:[{required:!0,message:a({id:"please.enter"})}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"please.enter"}),onFocus:Fe,onChange:Ee})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"test_type",label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ve.Z,{placeholder:a({id:"please.select"}),disabled:!0,getPopupContainer:function(oe){return oe.parentNode},children:[(0,e.jsx)(Ve.Z.Option,{value:"functional",children:(0,e.jsx)(t._H,{id:"functional.test"})}),(0,e.jsx)(Ve.Z.Option,{value:"performance",children:(0,e.jsx)(t._H,{id:"performance.test"})})]})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"run_mode",label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),getPopupContainer:function(oe){return oe.parentNode},children:M.map(function(B){return(0,e.jsx)(Ve.Z.Option,{value:B.id,children:B.name},B.id)})})})}),c.test_type==="performance"&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"view_type",label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),children:z.map(function(B){return(0,e.jsx)(Ve.Z.Option,{value:B.id,children:B.name},B.id)})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),mode:"multiple",getPopupContainer:function(oe){return oe.parentNode},filterOption:function(oe,xe){return xe.label.toLowerCase().indexOf(oe.toLowerCase())>=0},allowClear:!0,options:I.map(function(B){return{value:B.id,label:B.name}})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(gn.Z,{})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"is_default",label:(0,e.jsx)(xn.f,{title:a({id:"TestSuite.default.case"}),desc:a({id:"TestSuite.auto.join.workspace"})}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"certificated",label:(0,e.jsx)(xn.f,{title:a({id:"TestSuite.is_certified"}),desc:a({id:"TestSuite.is_certified.ps"})}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"doc",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.please.enter.desc"})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"please.enter"})})})})]})})})}),hr=i(49132),vr=i(72415),Jt=i(29700),aa=i(77335),ra=i(52318),sa=i(31279),ia=i(31762),la=i(51129),da=i(42098),oa=i(68591),ua=i.n(oa),jn=i(19032),ca=i(12784),Zn=i(53532),fa=i(43378),Sn=i(96164);function pa(R){var F,p=function(v){return function(){F=null,R.apply(void 0,(0,fa.Z)(v))}},d=function(){if(F==null){for(var v=arguments.length,c=new Array(v),C=0;C<v;C++)c[C]=arguments[C];F=(0,Sn.Z)(p(c))}};return d.cancel=function(){Sn.Z.cancel(F),F=null},d}function yn(){return function(F,p,d){var a=d.value,v=!1;return{configurable:!0,get:function(){if(v||this===F.prototype||this.hasOwnProperty(p))return a;var C=pa(a.bind(this));return v=!0,Object.defineProperty(this,p,{value:C,configurable:!0,writable:!0}),v=!1,C}}}}var ma=i(97182);function Gt(R){return R!==window?R.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function _n(R,F,p){if(p!==void 0&&F.top>R.top-p)return p+F.top}function Cn(R,F,p){if(p!==void 0&&F.bottom<R.bottom+p){var d=window.innerHeight-F.bottom;return p+d}}var wn=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],Ot=[];function gr(){return Ot}function bn(R,F){if(!!R){var p=Ot.find(function(d){return d.target===R});p?p.affixList.push(F):(p={target:R,affixList:[F],eventHandlers:{}},Ot.push(p),wn.forEach(function(d){p.eventHandlers[d]=(0,ma.Z)(R,d,function(){p.affixList.forEach(function(a){a.lazyUpdatePosition()})})}))}}function Tn(R){var F=Ot.find(function(p){var d=p.affixList.some(function(a){return a===R});return d&&(p.affixList=p.affixList.filter(function(a){return a!==R})),d});F&&F.affixList.length===0&&(Ot=Ot.filter(function(p){return p!==F}),wn.forEach(function(p){var d=F.eventHandlers[p];d&&d.remove&&d.remove()}))}var kn=function(R,F,p,d){var a=arguments.length,v=a<3?F:d===null?d=Object.getOwnPropertyDescriptor(F,p):d,c;if((typeof Reflect=="undefined"?"undefined":(0,da.Z)(Reflect))==="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(R,F,p,d);else for(var C=R.length-1;C>=0;C--)(c=R[C])&&(v=(a<3?c(v):a>3?c(F,p,v):c(F,p))||v);return a>3&&v&&Object.defineProperty(F,p,v),v};function ha(){return typeof window!="undefined"?window:null}var Rt;(function(R){R[R.None=0]="None",R[R.Prepare=1]="Prepare"})(Rt||(Rt={}));var Qt=function(R){(0,ia.Z)(p,R);var F=(0,la.Z)(p);function p(){var d;return(0,ra.Z)(this,p),d=F.apply(this,arguments),d.state={status:Rt.None,lastAffix:!1,prevTarget:null},d.getOffsetTop=function(){var a=d.props,v=a.offsetBottom,c=a.offsetTop;return v===void 0&&c===void 0?0:c},d.getOffsetBottom=function(){return d.props.offsetBottom},d.savePlaceholderNode=function(a){d.placeholderNode=a},d.saveFixedNode=function(a){d.fixedNode=a},d.measure=function(){var a=d.state,v=a.status,c=a.lastAffix,C=d.props.onChange,q=d.getTargetFunc();if(!(v!==Rt.Prepare||!d.fixedNode||!d.placeholderNode||!q)){var _=d.getOffsetTop(),A=d.getOffsetBottom(),ee=q();if(!!ee){var I={status:Rt.None},M=Gt(ee),z=Gt(d.placeholderNode),pe=_n(z,M,_),Z=Cn(z,M,A);z.top===0&&z.left===0&&z.width===0&&z.height===0||(pe!==void 0?(I.affixStyle={position:"fixed",top:pe,width:z.width,height:z.height},I.placeholderStyle={width:z.width,height:z.height}):Z!==void 0&&(I.affixStyle={position:"fixed",bottom:Z,width:z.width,height:z.height},I.placeholderStyle={width:z.width,height:z.height}),I.lastAffix=!!I.affixStyle,C&&c!==I.lastAffix&&C(I.lastAffix),d.setState(I))}}},d.prepareMeasure=function(){if(d.setState({status:Rt.Prepare,affixStyle:void 0,placeholderStyle:void 0}),!1)var a},d}return(0,sa.Z)(p,[{key:"getTargetFunc",value:function(){var a=this.context.getTargetContainer,v=this.props.target;return v!==void 0?v:a!=null?a:ha}},{key:"componentDidMount",value:function(){var a=this,v=this.getTargetFunc();v&&(this.timeout=setTimeout(function(){bn(v(),a),a.updatePosition()}))}},{key:"componentDidUpdate",value:function(a){var v=this.state.prevTarget,c=this.getTargetFunc(),C=(c==null?void 0:c())||null;v!==C&&(Tn(this),C&&(bn(C,this),this.updatePosition()),this.setState({prevTarget:C})),(a.offsetTop!==this.props.offsetTop||a.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),Tn(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var a=this.getTargetFunc(),v=this.state.affixStyle;if(a&&v){var c=this.getOffsetTop(),C=this.getOffsetBottom(),q=a();if(q&&this.placeholderNode){var _=Gt(q),A=Gt(this.placeholderNode),ee=_n(A,_,c),I=Cn(A,_,C);if(ee!==void 0&&v.top===ee||I!==void 0&&v.bottom===I)return}}this.prepareMeasure()}},{key:"render",value:function(){var a=this,v=this.state,c=v.affixStyle,C=v.placeholderStyle,q=this.props,_=q.affixPrefixCls,A=q.children,ee=ua()((0,aa.Z)({},_,!!c)),I=(0,ca.Z)(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls"]);return n.createElement(jn.Z,{onResize:function(){a.updatePosition()}},n.createElement("div",(0,Jt.Z)({},I,{ref:this.savePlaceholderNode}),c&&n.createElement("div",{style:C,"aria-hidden":"true"}),n.createElement("div",{className:ee,ref:this.saveFixedNode,style:c},n.createElement(jn.Z,{onResize:function(){a.updatePosition()}},A))))}}]),p}(n.Component);Qt.contextType=Zn.E_,kn([yn()],Qt.prototype,"updatePosition",null),kn([yn()],Qt.prototype,"lazyUpdatePosition",null);var va=n.forwardRef(function(R,F){var p=R.prefixCls,d=n.useContext(Zn.E_),a=d.getPrefixCls,v=a("affix",p),c=(0,Jt.Z)((0,Jt.Z)({},R),{affixPrefixCls:v});return n.createElement(Qt,(0,Jt.Z)({},c,{ref:F}))}),Hn=va,In=i(41428),Dn=i(97939),On,ga=(0,Dn.ZP)($e.Z)(On||(On=(0,In.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),xa=function(){var F=(0,t.YB)(),p=F.formatMessage,d=(0,n.useContext)(Kt),a=d.selectedRowKeys,v=d.setSelectedRowKeys,c=d.selectedRow,C=d.confDrawerShow,q=d.confRefresh,_=d.setConfRefresh,A=(0,n.useState)(!1),ee=(0,l.Z)(A,2),I=ee[0],M=ee[1],z=(0,n.useState)(!1),pe=(0,l.Z)(z,2),Z=pe[0],D=pe[1],Ce=function(){var K=(0,ie.Z)((0,h.Z)().mark(function _e(){var fe;return(0,h.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,Zt.Ob)({flag:"pass",case_id_list:a.join(",")});case 2:fe=W.sent,fe.code===200?M(!0):D(!0);case 4:case"end":return W.stop()}},_e)}));return function(){return K.apply(this,arguments)}}(),ye=function(){var K=(0,ie.Z)((0,h.Z)().mark(function _e(){var fe;return(0,h.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return fe={id_list:a.join(",")},v([]),W.next=4,(0,je.TZ)(fe);case 4:_(!q);case 5:case"end":return W.stop()}},_e)}));return function(){return K.apply(this,arguments)}}(),de=function(){C("batch.edit",{bentch:!0})},H=function(){var K=(0,ie.Z)((0,h.Z)().mark(function _e(){var fe,He;return(0,h.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:fe=[],c.map(function(Ie){return fe.push(Ie.name)}),He=(0,qe.MR)({name:fe.join(","),id:a.join(",")}),He&&window.open("/refenerce/conf/pk=".concat(He));case 4:case"end":return me.stop()}},_e)}));return function(){return K.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Hn,{offsetBottom:16,children:(0,e.jsxs)(ga,{justify:"space-between",children:[(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ht.Z,{indeterminate:!0}),(0,e.jsx)(Qe.Z.Text,{children:p({id:"selected.item"},{data:a.length})}),(0,e.jsx)(ae.Z,{type:"link",onClick:function(){return v([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:Ce,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(ae.Z,{type:"primary",onClick:de,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})}),(0,e.jsxs)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(ae.Z,{onClick:ye,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return M(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,visible:I,onCancel:function(){return M(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4}}),(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:H,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,visible:Z,onCancel:function(){return D(!1)},footer:[(0,e.jsx)(ae.Z,{onClick:ye,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return D(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})]})},ja=xa,xr=i(13059),Rn=i(53676),Pn=i(53849),En=(0,n.forwardRef)(function(R,F){var p=R.onOk,d=(0,t.YB)(),a=d.formatMessage,v=(0,it.TH)(),c=v.query,C={repeat:c.test_type==="performance"?3:1,timeout:3600,is_default:1,var:[{name:"",val:"",des:""}]},q=Ut(),_=q.domainList,A=U.Z.useForm(),ee=(0,l.Z)(A,1),I=ee[0],M=(0,n.useState)(!1),z=(0,l.Z)(M,2),pe=z[0],Z=z[1],D=(0,n.useState)(""),Ce=(0,l.Z)(D,2),ye=Ce[0],de=Ce[1],H=(0,n.useState)(!0),K=(0,l.Z)(H,2),_e=K[0],fe=K[1],He=(0,n.useState)({bentch:!1}),W=(0,l.Z)(He,2),me=W[0],Ie=W[1],J=(0,n.useState)(!1),w=(0,l.Z)(J,2),T=w[0],G=w[1],Q=function(){Ie({bentch:!1}),fe(!0),Z(!1),de(""),I.resetFields(),G(!1)};(0,n.useImperativeHandle)(F,function(){return{show:function(ge,ke){if(ge&&de(ge),Ie(ke),Z(!0),!ke.bentch){var B=(0,u.Z)((0,u.Z)((0,u.Z)({},C),ke),{},{certificated:ke.certificated?1:0});_.length&&~ge.indexOf("new")&&_.forEach(function(oe){var xe=oe.id,we=oe.name;we==="\u5176\u4ED6"&&(B.domain_list_str=[xe])}),I.setFieldsValue(B)}},hide:Q}});var Se=function(){T||(G(!0),I.validateFields().then(function(ge){var ke=me.id,B=me.test_suite_id;p((0,u.Z)((0,u.Z)({},ge),{},{id:ke,test_suite_id:B,domain_list_str:ge.domain_list_str?ge.domain_list_str.join():void 0}),me.bentch)}).catch(function(ge){console.log(ge),G(!1)}))},he=function(ge,ke,B,oe){var xe=I.getFieldValue("var"),we=xe[oe];if(we.name!==""&&we.val!==""&&we.des!==""||we.name===""&&we.val===""&&we.des===""){B();return}else if(ke==""){B(a({id:"please.enter"}));return}B()},be=function(ge,ke,B){try{var oe=JSON.parse(ke);if(Object.prototype.toString.call(oe)==="[object Array]"){for(var xe=oe.length,we=0;we<xe;we++)if(Object.prototype.toString.call(oe[we])!=="[object Object]"){B(a({id:"TestSuite.data.format.error"}));return}}else{B(a({id:"TestSuite.data.format.error"}));return}}catch(Ke){B(a({id:"TestSuite.data.format.error"}));return}B()},Fe=function(){var ge=I.getFieldValue("var");if(!_e)try{var ke=JSON.parse(ge);if(Object.prototype.toString.call(ke)==="[object Array]"){for(var B=ke.length,oe=0;oe<B;oe++)if(Object.prototype.toString.call(ke[oe])!=="[object Object]"){se.default.error(a({id:"TestSuite.data.format.error"}));return}}else{se.default.error(a({id:"TestSuite.data.format.error"}));return}}catch(xe){se.default.error(a({id:"TestSuite.data.format.error"}));return}I.setFieldsValue({var:_e?JSON.stringify(ge,null,4):JSON.parse(ge)}),fe(!_e)};return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(ye)}),className:lt().warp,forceRender:!0,destroyOnClose:!0,width:376,onClose:Q,open:pe,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(ae.Z,{onClick:Q,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{onClick:Se,type:"primary",htmlType:"submit",children:ye.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsx)(U.Z,{layout:"vertical",form:I,children:(0,e.jsxs)($e.Z,{gutter:16,children:[!me.bentch&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"name",label:"Test Conf",rules:[{required:!0,message:a({id:"please.enter"})}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"please.enter"})})})}),!me.bentch&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"alias",label:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.alias.placeholder"})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:me.bentch?[]:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),mode:"multiple",getPopupContainer:function(ge){return ge.parentNode},options:_==null?void 0:_.map(function(Ee){return{value:Ee.id,label:Ee.name}})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"timeout",label:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),rules:me.bentch?[]:[{required:!0,message:a({id:"please.enter"})}],children:(0,e.jsx)(jt.Z,{style:{width:"100%"},min:0,step:1,placeholder:a({id:"please.enter"})})})}),(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"repeat",label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),children:(0,e.jsx)(jt.Z,{style:{width:"100%"},min:1,step:1,placeholder:a({id:"please.enter"})})})}),!me.bentch&&(0,e.jsxs)(Xe.Z,{span:24,children:[(0,e.jsx)(ae.Z,{style:{position:"absolute",right:0,zIndex:99},type:"link",size:"small",onClick:Fe,children:_e?"Bulk Edit":"Key-Value Edit"}),_e?(0,e.jsx)(U.Z.List,{name:"var",children:function(ge,ke){var B=ke.add,oe=ke.remove;return(0,e.jsxs)("div",{children:[ge.map(function(xe,we){return(0,e.jsxs)(Ae.Z,{style:{display:"flex",marginBottom:8},align:"start",children:[(0,e.jsx)(U.Z.Item,(0,u.Z)((0,u.Z)({label:we==0?(0,e.jsx)(t._H,{id:"TestSuite.var"}):null},xe),{},{name:[xe.name,"name"],fieldKey:[xe.fieldKey,"name"],rules:[{validator:function(Ye,Te,N){he(Ye,Te,N,we)}}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"TestSuite.variable.name"})})})),(0,e.jsx)("div",{style:{paddingTop:we==0?"33px":"0"},children:"="}),(0,e.jsx)(U.Z.Item,(0,u.Z)((0,u.Z)({label:we==0?" ":null},xe),{},{name:[xe.name,"val"],fieldKey:[xe.fieldKey,"val"],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"TestSuite.default"})})})),(0,e.jsx)("div",{style:{paddingTop:we==0?"38px":"0"},children:","}),(0,e.jsx)(U.Z.Item,(0,u.Z)((0,u.Z)({label:we==0?" ":null},xe),{},{name:[xe.name,"des"],fieldKey:[xe.fieldKey,"des"],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"TestSuite.var.desc"})})})),ge.length>1?(0,e.jsx)("div",{style:{paddingTop:we==0?"30px":"0"},children:(0,e.jsx)(Pn.Z,{className:"dynamic-delete-button",style:{margin:"8px 0"},onClick:function(){oe(xe.name)}})}):(0,e.jsx)("div",{style:{width:"14px"},children:" "})]},xe.key)}),(0,e.jsxs)(ae.Z,{style:{width:100,padding:0,textAlign:"left",marginBottom:8},type:"link",size:"small",onClick:function(){var we=I.getFieldValue("var");we.push({name:"",val:"",des:""}),I.setFieldsValue({var:we})},block:!0,children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})]})}}):(0,e.jsx)(U.Z.Item,{name:"var",label:(0,e.jsx)(t._H,{id:"TestSuite.var"}),rules:[{validator:be}],children:(0,e.jsx)(Be.Z.TextArea,{rows:4,style:{width:"100%"},placeholder:"\u683C\u5F0F\uFF1Akey=value, description\uFF0C\u591A\u4E2A\u6362\u884C"})})]}),!me.bentch&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"is_default",label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),!me.bentch&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"certificated",label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(Rn.Z,{overlayClassName:lt().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)(At.Z,{})})]}),rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),!me.bentch&&(0,e.jsx)(Xe.Z,{span:24,children:(0,e.jsx)(U.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(Be.Z.TextArea,{rows:4,placeholder:a({id:"TestSuite.desc.placeholder"})})})})]})})})}),Za=i(97207),Sa=i.n(Za),Fn,ya=(0,Dn.ZP)($e.Z)(Fn||(Fn=(0,In.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),_a=function(F){var p=F.selectedRowKeys,d=F.setMetricDelInfo,a=F.onOk,v=F.innerKey,c=(0,t.YB)(),C=function(A){a==null||a(p,A),d({})},q=function(){d({})};return p!=null&&p.length?(0,e.jsx)(Hn,{offsetBottom:16,children:(0,e.jsxs)(ya,{justify:"space-between",children:[(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ht.Z,{indeterminate:!0}),(0,e.jsx)(Qe.Z.Text,{children:c.formatMessage({id:"selected.item"},{data:p.length})}),(0,e.jsx)(ae.Z,{type:"link",onClick:q,children:(0,e.jsx)(t._H,{id:"operation.cancel",defaultMessage:"\u53D6\u6D88"})})]}),(0,e.jsx)(Ae.Z,{children:v==="1"?(0,e.jsx)(Vt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return C()},overlayStyle:{width:"224px"},children:(0,e.jsx)(ae.Z,{children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})}):(0,e.jsx)(on,{isBatch:!0,onOk:C})})]})}):(0,e.jsx)(e.Fragment,{})},Ca=_a,wa=null,Xt=null,ba=function(F,p){var d,a=(0,t.YB)(),v=a.formatMessage,c=(0,t.Kd)()==="en-US",C=Ut(),q=C.domainList,_=C.runList,A=(0,it.TH)(),ee=A.query,I=ee.test_type||"functional",M={page_size:10,page_num:1,test_type:I},z=(0,n.useState)(M),pe=(0,l.Z)(z,2),Z=pe[0],D=pe[1],Ce=(0,n.useState)(!0),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,n.useState)(!1),_e=(0,l.Z)(K,2),fe=_e[0],He=_e[1],W=(0,n.useState)([]),me=(0,l.Z)(W,2),Ie=me[0],J=me[1],w=(0,n.useState)([]),T=(0,l.Z)(w,2),G=T[0],Q=T[1],Se=(0,n.useState)([]),he=(0,l.Z)(Se,2),be=he[0],Fe=he[1],Ee=(0,n.useState)(!0),ge=(0,l.Z)(Ee,2),ke=ge[0],B=ge[1],oe=(0,n.useState)([]),xe=(0,l.Z)(oe,2),we=xe[0],Ke=xe[1],Ye=(0,n.useState)(new Date().getTime()),Te=(0,l.Z)(Ye,2),N=Te[0],le=Te[1],te=(0,n.useState)(),y=(0,l.Z)(te,2),k=y[0],ne=y[1],S=n.useState({}),x=(0,l.Z)(S,2),r=x[0],s=x[1],o=[{id:1,name:v({id:"operation.yes"})},{id:0,name:v({id:"operation.no"})}],P=(0,n.useRef)(null),b=(0,n.useRef)(null),ve=n.useRef(null),Re=(0,n.useRef)(null),Ze=n.useRef(null);(0,n.useImperativeHandle)(p,function(){return{openCreateDrawer:b.current.show}});var De=function(f,m){Xt!==null&&clearTimeout(Xt),Xt=setTimeout(Sa().partial(f,Z),m)},mt=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m,$){var X,Me,ce,et,Ue,Je,Pt,Tt,qt,Le,Et,ln,$n;return(0,h.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(X=m.test_suite_id,Me=m.id,ce=(0,u.Z)({},m),!$){ze.next=9;break}return et=(0,u.Z)((0,u.Z)({},ce),{case_id_list:G.join(",")}),ze.next=6,(0,je.fF)(et);case 6:Q([]),ze.next=58;break;case 9:if(Ue=ce.var,Object.prototype.toString.call(ce.var)!=="[object String]"){ze.next=35;break}if(ze.prev=11,Je=JSON.parse(Ue),Object.prototype.toString.call(Je)!=="[object Array]"){ze.next=25;break}Pt=Je.length,Tt=0;case 16:if(!(Tt<Pt)){ze.next=23;break}if(Object.prototype.toString.call(Je[Tt])==="[object Object]"){ze.next=20;break}return se.default.error(v({id:"TestSuite.data.format.error"})),ze.abrupt("return");case 20:Tt++,ze.next=16;break;case 23:ze.next=27;break;case 25:return se.default.error(v({id:"TestSuite.data.format.error"})),ze.abrupt("return");case 27:ze.next=33;break;case 29:return ze.prev=29,ze.t0=ze.catch(11),se.default.error(v({id:"TestSuite.data.format.error"})),ze.abrupt("return");case 33:ze.next=38;break;case 35:qt=[],Ue.map(function(zn){zn.name&&qt.push(zn)}),Ue=JSON.stringify(qt);case 38:if(ce.var=Ue,Le=(0,u.Z)((0,u.Z)({},ce),{test_suite_id:X}),!Me){ze.next=46;break}return ze.next=43,(0,je.Ft)(Me,Le);case 43:ze.t1=ze.sent,ze.next=49;break;case 46:return ze.next=48,(0,je.C7)(Le);case 48:ze.t1=ze.sent;case 49:if(Et=ze.t1,ln=Et.code,$n=Et.msg,ln!=201){ze.next=55;break}return se.default.error(v({id:"TestSuite.repeated.suite.name"})),ze.abrupt("return");case 55:if(ln!=202){ze.next=58;break}return se.default.error($n),ze.abrupt("return");case 58:P.current.hide(),se.default.success(v({id:"operation.success"})),B(!ke);case 61:case"end":return ze.stop()}},f,null,[[11,29]])}));return function(m,$){return g.apply(this,arguments)}}();(0,n.useEffect)(function(){J([]),D(M)},[ee]);var ot=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(){var m;return(0,h.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,je.AO)();case 2:m=X.sent,m.code===200?ne(m.data):se.default.error(m.msg);case 4:case"end":return X.stop()}},f)}));return function(){return g.apply(this,arguments)}}(),nt=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(){var m;return(0,h.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return H(!0),X.next=3,(0,je.Zu)(Z);case 3:m=X.sent,Ke(m),ot(),H(!1);case 7:case"end":return X.stop()}},f)}));return function(){return g.apply(this,arguments)}}();(0,n.useEffect)(function(){return De(nt,300),function(){clearTimeout(wa),clearTimeout(Xt)}},[Z]);var ut=function(f,m){D((0,u.Z)((0,u.Z)({},Z),{},{page_num:f,page_size:m}))},Oe=function(f){f.direction=="\u4E0A\u5347"&&(f.domain="increase"),f.is_default=f.is_default?1:0,f.test_type=I;for(var m=f.domain_id_list===""?[]:f.domain_id_list.split(","),$=[],X=0;X<m.length;X++)$.push(Number.parseInt(m[X]));f.domain_list_str=$,q.forEach(function(Me){Me.name==f.domain&&(f.domain=Me.id)}),b.current.show("edit",f)},V=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m){var $,X;return(0,h.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return $=m.doc,X=m.id,ce.next=3,(0,je.Fu)(X,{doc:$});case 3:se.default.success(v({id:"operation.success"})),Re.current.hide(),Z.page_num===1?nt():D((0,u.Z)((0,u.Z)({},Z),{},{page_num:1}));case 6:case"end":return ce.stop()}},f)}));return function(m){return g.apply(this,arguments)}}(),Y=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m,$){var X,Me,ce,et;return(0,h.Z)().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(X=(0,u.Z)({},m),!$){Je.next=7;break}return Je.next=4,(0,je.Fu)($,X);case 4:Je.t0=Je.sent,Je.next=10;break;case 7:return Je.next=9,(0,je.xk)(X);case 9:Je.t0=Je.sent;case 10:if(Me=Je.t0,ce=Me.code,et=Me.msg,ce===200){Je.next=15;break}return Je.abrupt("return",(0,qe.EV)(ce,et));case 15:b.current.hide(),se.default.success(v({id:"operation.success"})),nt();case 18:case"end":return Je.stop()}},f)}));return function(m,$){return g.apply(this,arguments)}}(),Pe=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m){var $,X,Me,ce;return(0,h.Z)().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,(0,Zt.Ob)({flag:"pass",suite_id:m.id});case 2:if(Me=Ue.sent,ce=Me.code,ce!==200){Ue.next=6;break}return Ue.abrupt("return",($=ve.current)===null||$===void 0?void 0:$.show(m));case 6:(X=Ze.current)===null||X===void 0||X.show(m);case 7:case"end":return Ue.stop()}},f)}));return function(m){return g.apply(this,arguments)}}(),ue=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m){var $,X,Me,ce;return(0,h.Z)().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,(0,je.D8)(m.id);case 2:se.default.success(v({id:"operation.success"})),$=Z.page_size,X=Z.page_num,Me=we.total%$==1,ce=Math.floor(we.total/$),Me&&ce&&ce+1<=X?D(function(Je){return(0,u.Z)((0,u.Z)({},Je),{},{page_num:ce})}):nt();case 7:case"end":return Ue.stop()}},f)}));return function(m){return g.apply(this,arguments)}}(),re=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m){var $,X,Me,ce;return(0,h.Z)().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return He(!0),$=se.default.loading({content:v({id:"operation.synchronizing"}),duration:0}),Ue.next=4,(0,je.PO)(m.id);case 4:if(X=Ue.sent,Me=X.code,ce=X.msg,He(!1),$(),Me===200){Ue.next=12;break}return se.default.warning("".concat(v({id:"request.synchronize.failed"}),"\uFF0C").concat(ce)),Ue.abrupt("return");case 12:se.default.success(v({id:"request.synchronize.success"})),nt(),le(new Date().getTime());case 15:case"end":return Ue.stop()}},f)}));return function(m){return g.apply(this,arguments)}}(),O=[{title:"Test Suite",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,filterDropdown:function(f){return(0,e.jsx)(nn.Z,(0,u.Z)((0,u.Z)({},f),{},{onConfirm:function($){return D((0,u.Z)((0,u.Z)({},Z),{},{name:$,page_num:1}))}}))},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.name?"#1890ff":void 0}})},render:function(f,m){return(0,e.jsx)(We.K,{ellipsis:{tooltip:m.name},children:(0,e.jsx)(dn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Z.name||""],autoEscape:!0,textToHighlight:m.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",render:function(f){return f==="standalone"?(0,e.jsx)(t._H,{id:"standalone"}):(0,e.jsx)(t._H,{id:"cluster"})},width:c?150:100,filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.run_mode?"#1890ff":void 0}})},filterDropdown:function(f){var m=f.confirm;return(0,e.jsx)(hn,{list:_,confirm:m,onConfirm:function(X){D((0,u.Z)((0,u.Z)({},Z),{},{run_mode:X}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:90,ellipsis:!0,filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.domain?"#1890ff":void 0}})},filterDropdown:function(f){var m=f.confirm;return(0,e.jsx)(hn,{list:q,confirm:m,onConfirm:function(X){D((0,u.Z)((0,u.Z)({},Z),{},{domain:X}))}})}},I!=="functional"&&{title:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),(0,e.jsx)(Dt.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.1"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.2"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.3"})})]}),placement:"bottomLeft",children:(0,e.jsx)(At.Z,{})})]}),dataIndex:"view_type",render:function(f,m){return(0,Vn.o)(f,m)},width:120,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:130,ellipsis:!0,render:function(f,m){return(0,e.jsx)("div",{children:(0,e.jsx)(Nt.Z,{title:m.doc,width:95,isCode:!0,children:(0,e.jsx)(wt.Z,{className:lt().edit,onClick:function(){Re.current.show(m)}})})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),width:c?130:110,render:function(f,m){return m.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.is_default===1?"#1890ff":void 0}})},filterDropdown:function(f){var m=f.confirm;return(0,e.jsx)(vn.Z,{list:o,confirm:m,onConfirm:function(X){D((0,u.Z)((0,u.Z)({},Z),{},{is_default:X}))}})}},{title:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),(0,e.jsx)(Dt.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.title"})}),placement:"bottomLeft",children:(0,e.jsx)(At.Z,{})})]}),width:120,render:function(f,m){return m.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.certificated===1?"#1890ff":void 0}})},filterDropdown:function(f){var m=f.confirm;return(0,e.jsx)(vn.Z,{list:o,confirm:m,onConfirm:function(X){D((0,u.Z)((0,u.Z)({},Z),{},{certificated:X}))}})}},{title:"Owner",dataIndex:"owner_name",width:100,ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:Z.owner?"#1890ff":void 0}})},filterDropdown:function(f){var m=f.confirm;return(0,e.jsx)(Yt.Z,{confirm:m,onConfirm:function(X){return D((0,u.Z)((0,u.Z)({},Z),{},{owner:X}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",width:100,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:200,sorter:!0,render:function(f,m){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:m.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",sorter:!0,width:200,render:function(f,m){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:m.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),dataIndex:"id",width:c?190:140,fixed:"right",render:function(f,m){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Qe.Z.Link,{onClick:function(){return re(m)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})}),(0,e.jsx)(Qe.Z.Link,{onClick:function(){return Oe(m)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Qe.Z.Link,{onClick:function(){return Pe(m)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],E=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(){var m;return(0,h.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,je.yC)();case 2:m=X.sent,m.code===200?se.default.success(v({id:"request.synchronize.command.success"})):m.code===201?se.default.warning(m.msg):se.default.error(m.msg);case 4:case"end":return X.stop()}},f)}));return function(){return g.apply(this,arguments)}}(),L=function(f){return!f||f<=0?lt().hidden:""},j=function(){var g=(0,ie.Z)((0,h.Z)().mark(function f(m,$){var X,Me;return(0,h.Z)().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.next=2,(0,je.wx)({id_list:m,is_sync:$,object_id:r==null?void 0:r.object_id,object_type:(r==null?void 0:r.innerkey)==="1"?"case":"suite"});case 2:if(X=et.sent,Me=X.code,Me===200){et.next=6;break}return et.abrupt("return");case 6:se.default.success(v({id:"operation.success"})),r==null||r.refresh(),s({});case 9:case"end":return et.stop()}},f)}));return function(m,$){return g.apply(this,arguments)}}();return(0,e.jsxs)(Kt.Provider,{value:{selectedRowKeys:G,selectedRow:be,confDrawerShow:(d=P.current)===null||d===void 0?void 0:d.show,confRefresh:ke,setConfRefresh:B,setSelectedRowKeys:Q,setSelectedRow:Fe,metricDelInfo:r,setMetricDelInfo:s},children:[(0,e.jsxs)(xt.Z,{spinning:de,children:[(0,e.jsx)(It.Z,{className:lt().suiteTable,size:"small",onChange:function(f,m,$){var X=$.order,Me=$.field;switch(X){case"descend":Me==="gmt_created"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:"-gmt_created"})),Me==="gmt_modified"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:"-gmt_modified"}));break;case"ascend":Me==="gmt_created"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:"gmt_created"})),Me==="gmt_modified"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:"gmt_modified"}));break;default:Me==="gmt_created"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:void 0})),Me==="gmt_modified"&&D((0,u.Z)((0,u.Z)({},Z),{},{order:void 0}));break}},columns:O.filter(Boolean),dataSource:we.data,rowKey:function(f){return f.id},pagination:!1,expandable:{indentSize:0,expandedRowRender:function(f){return(0,e.jsx)(qn,{id:f.id,type:I},N)},onExpand:function(f,m){return J(f?[m.id]:[])},expandedRowClassName:function(){return"case_expand_row"},expandedRowKeys:Ie,expandIcon:function(f){var m=f.expanded,$=f.onExpand,X=f.record;return m?(0,e.jsx)(Lt.Z,{onClick:function(ce){return $(X,ce)}}):(0,e.jsx)(Bt.Z,{onClick:function(ce){return $(X,ce)}})}},scroll:{x:1470}}),G.length>0&&(0,e.jsx)(ja,{}),we.total&&(0,e.jsxs)($e.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:v({id:"pagination.total.strip"},{data:we.total||0})}),(0,e.jsx)(_t.Z,{className:L(we.total),showQuickJumper:!0,showSizeChanger:!0,size:"small",current:Z.page_num,defaultCurrent:1,onChange:function(f,m){return ut(f,m)},onShowSizeChange:function(f,m){return ut(f,m)},total:we.total})]})]}),(0,e.jsx)(tt.Z,{open:fe,width:0,getContainer:!1}),(0,e.jsx)(na,{test_type:I,ref:b,onOk:Y}),(0,e.jsx)(tn,{ref:Re,onOk:V}),(0,e.jsx)(Ca,(0,u.Z)((0,u.Z)({},r),{},{setMetricDelInfo:s,onOk:j})),(0,e.jsx)(pn,{ref:Ze,onOk:ue}),(0,e.jsx)(mn,{ref:ve,onOk:ue}),(0,e.jsx)(En,{ref:P,onOk:mt})]})},Ta=(0,n.forwardRef)(ba),ka=i(58496),Mn=i.n(ka),Ha=i(42382),Ia=i.n(Ha),Da=(0,n.forwardRef)(function(R,F){var p=(0,t.YB)(),d=p.formatMessage,a=U.Z.useForm(),v=(0,l.Z)(a,1),c=v[0],C=(0,n.useState)(!1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)(!1),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)("new"),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)({}),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)(!0),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1],me=(0,n.useState)(!0),Ie=(0,l.Z)(me,2),J=Ie[0],w=Ie[1];(0,n.useImperativeHandle)(F,function(){return{show:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z(!0),Ce(he),K(be),W(!0),c.setFieldsValue(be)}}});var T=function(){c.resetFields(),A(!1),z(!1),w(!0),W(!0)},G=function(he,be,Fe){he===200?(R.onOk(),se.default.success(d({id:"operation.success"})),W(!0),z(!1),c.resetFields()):he===201?W(!1):se.default.error(be),A(!1)},Q=function(){if(!c.getFieldValue("name")){w(!1);return}A(!0),c.validateFields().then(function(){var he=(0,ie.Z)((0,h.Z)().mark(function be(Fe){var Ee,ge,ke,B,oe,xe;return(0,h.Z)().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(D!=="new"){Ke.next=9;break}return Ke.next=3,(0,je.xW)((0,u.Z)({},Fe));case 3:Ee=Ke.sent,ge=Ee.code,ke=Ee.msg,G(ge,ke,"new"),Ke.next=15;break;case 9:return Ke.next=11,(0,je.T6)((0,u.Z)({id:H.id},Fe));case 11:B=Ke.sent,oe=B.code,xe=B.msg,G(oe,xe,"edit");case 15:case"end":return Ke.stop()}},be)}));return function(be){return he.apply(this,arguments)}}()).catch(function(he){return console.log(he)})};return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"addScript.title.".concat(D)}),width:"375",onClose:T,visible:M,className:Ia().add_baseline_drawer,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:T,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{type:"primary",disabled:_,onClick:Q,children:H&&H.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(U.Z,{form:c,layout:"vertical",children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),name:"name",validateStatus:(!J||!He)&&"error",help:!J&&d({id:"TestSuite.domain.name.cannot.be.empty"})||!He&&d({id:"TestSuite.domain.name.already.exists"}),rules:[{required:!0}],children:(0,e.jsx)(Be.Z,{autoComplete:"auto",placeholder:d({id:"TestSuite.domain.name.placeholder"}),onChange:function(he){if(W(!0),!he.target.value){w(!1);return}w(!0)}})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc.option"}),name:"description",children:(0,e.jsx)(Be.Z.TextArea,{placeholder:d({id:"TestSuite.please.enter.description"})})})]})})}),Oa=function(F,p){var d=(0,t.YB)(),a=d.formatMessage;(0,n.useImperativeHandle)(p,function(){return{openCreateDrawer:D.current.show}});var v=(0,n.useState)(!0),c=(0,l.Z)(v,2),C=c[0],q=c[1],_=(0,n.useState)(!0),A=(0,l.Z)(_,2),ee=A[0],I=A[1],M=(0,n.useState)([]),z=(0,l.Z)(M,2),pe=z[0],Z=z[1],D=(0,n.useRef)(null),Ce={page_num:1,page_size:10},ye=(0,n.useState)(Ce),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=function(){var J=(0,ie.Z)((0,h.Z)().mark(function w(){var T;return(0,h.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return q(!0),Q.next=3,(0,je.ge)(H);case 3:T=Q.sent,Z(T),q(!1);case 6:case"end":return Q.stop()}},w)}));return function(){return J.apply(this,arguments)}}(),fe=function(w,T){K((0,u.Z)((0,u.Z)({},H),{},{page_num:w,page_size:T}))};(0,n.useEffect)(function(){_e()},[H]);var He=(0,h.Z)().mark(function J(){var w,T=arguments;return(0,h.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return w=T.length>0&&T[0]!==void 0?T[0]:{},Q.next=3,(0,je.Ak)({id_list:[w.id]});case 3:case"end":return Q.stop()}},J)}),W=function(w,T){var G=H.page_num,Q=H.page_size;if(w===200){se.default.success(a({id:"operation.success"}));var Se=Math.ceil((pe.total-1)/Q)||1,he=G;G>Se&&(he=Se),K((0,u.Z)((0,u.Z)({},H),{},{page_num:he}))}else(0,qe.EV)(w,T)},me=[{title:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),width:300,fixed:"left",dataIndex:"name",ellipsis:{showTitle:!1},filterDropdown:function(w){var T=w.confirm;return(0,e.jsx)(nn.Z,{confirm:T,autoFocus:ee,onConfirm:function(Q){return K((0,u.Z)((0,u.Z)({},H),{},{name:Q}))}})},onFilterDropdownVisibleChange:function(w){w&&I(!ee)},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:H.name?"#1890ff":void 0}})},render:function(w,T){return(0,e.jsx)(We.K,{ellipsis:{tooltip:T.name},children:(0,e.jsx)(dn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[H.name||""],autoEscape:!0,textToHighlight:T.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),width:170,dataIndex:"gmt_created",sorter:!0,render:function(w,T){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:T.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),width:170,dataIndex:"gmt_modified",sorter:!0,render:function(w,T){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:T.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),width:100,dataIndex:"creator",filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:H.creator?"#1890ff":void 0}})},filterDropdown:function(w){var T=w.confirm;return(0,e.jsx)(Yt.Z,{confirm:T,onConfirm:function(Q){K((0,u.Z)((0,u.Z)({},H),{},{creator:Q}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.update_user"}),width:100,dataIndex:"update_user",filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:H.update_user?"#1890ff":void 0}})},filterDropdown:function(w){var T=w.confirm;return(0,e.jsx)(Yt.Z,{confirm:T,onConfirm:function(Q){return K((0,u.Z)((0,u.Z)({},H),{},{update_user:Q}))}})},render:function(w,T){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:T.update_user||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(w,T){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:T.description||"-"})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),key:"domain_conf",width:130,fixed:"right",render:function(w,T){return(0,e.jsxs)(Ae.Z,{size:"small",children:[(0,e.jsx)("span",{className:Mn().fail_detail_operation,onClick:function(){return Ie(T)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Vt.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"TestConf.Suite/Conf.delete.warning"})}),onCancel:function(){var Q=He(T),Se=Q.next();Se.value.then(function(he){var be=he.code,Fe=he.msg;W(be,Fe)})},okText:(0,e.jsx)(t._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)(rt.Z,{style:{color:"red"}}),children:(0,e.jsx)("span",{className:Mn().fail_detail_operation,children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],Ie=function(w){var T;(T=D.current)===null||T===void 0||T.show("edit",w)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(xt.Z,{spinning:C,children:[(0,e.jsx)(It.Z,{size:"small",onChange:function(w,T,G){var Q=G.order,Se=G.field;switch(Q){case void 0:if(Se==="gmt_created")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_created:void 0}));if(Se==="gmt_modified")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_modified:void 0}));case"descend":if(Se==="gmt_created")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_created:"-gmt_created"}));if(Se==="gmt_modified")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_modified:"-gmt_modified"}));break;case"ascend":if(Se==="gmt_created")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_created:"+gmt_created"}));if(Se==="gmt_modified")return K((0,u.Z)((0,u.Z)({},H),{},{gmt_modified:"+gmt_modified"}));break;default:break}},columns:me,dataSource:pe.data,rowKey:function(w){return w.id+""},pagination:!1}),pe.total&&(0,e.jsxs)($e.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:a({id:"pagination.total.strip"},{data:pe.total||0})}),(0,e.jsx)(_t.Z,{showQuickJumper:!0,showSizeChanger:!0,size:"small",current:H.page_num,defaultCurrent:1,onChange:function(w,T){return fe(w,T)},onShowSizeChange:function(w,T){return fe(w,T)},total:pe.total})]})]}),(0,e.jsx)(Da,{ref:D,onOk:_e})]})},Ra=(0,n.forwardRef)(Oa),Pa=i(9173),Ea=i.n(Pa),Fa=(0,n.forwardRef)(function(R,F){var p=(0,t.YB)(),d=p.formatMessage,a=U.Z.useForm(),v=(0,l.Z)(a,1),c=v[0],C=(0,n.useState)(!1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)(!1),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)(""),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)({}),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)({status:!0,message:""}),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1];(0,n.useImperativeHandle)(F,function(){return{show:function(T){z(!0),Ce(d(T?{id:"TestSuite.edit.business"}:{id:"TestSuite.new.business"})),K(T),c.setFieldsValue(T)}}});var me=function(){c.resetFields(),A(!1),z(!1),W({status:!0,message:""})},Ie=function(T,G,Q){T===200?(se.default.success(d({id:"operation.success"})),z(!1),c.resetFields(),R.callback()):T===201?W({status:!1,message:d({id:"TestSuite.business.name.already.exists"})}):se.default.error(G||d({id:"operation.failed"}))},J=function(){c.validateFields().then(function(){var T=(0,ie.Z)((0,h.Z)().mark(function G(Q){var Se,he,be,Fe,Ee,ge;return(0,h.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(A(!0),!(H&&H.id)){B.next=10;break}return B.next=4,(0,je.qJ)((0,u.Z)({id:H.id},Q));case 4:Se=B.sent,he=Se.code,be=Se.msg,Ie(he,be,"edit"),B.next=16;break;case 10:return B.next=12,(0,je.sB)((0,u.Z)({},Q));case 12:Fe=B.sent,Ee=Fe.code,ge=Fe.msg,Ie(Ee,ge,"add");case 16:A(!1);case 17:case"end":return B.stop()}},G)}));return function(G){return T.apply(this,arguments)}}()).catch(function(T){var G;A(!1),T==null||(G=T.errorFields)===null||G===void 0||G.forEach(function(Q){Q.name[0]==="name"&&W({status:!1,message:Q.errors[0]})})})};return(0,e.jsx)(tt.Z,{className:Ea().addBusiness_drawer,title:D,maskClosable:!0,keyboard:!1,width:"375",onClose:me,visible:M,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:me,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{type:"primary",disabled:_||!He.status,onClick:J,children:H&&H.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(U.Z,{form:c,layout:"vertical",children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),name:"name",validateStatus:He.status?void 0:"error",help:!He.status&&He.message,rules:[{required:!0}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:d({id:"please.enter"}),onChange:function(T){if(!T.target.value)W({status:!1,message:d({id:"TestSuite.business.name.cannot.be.empty"})});else{W({status:!0,message:""});var G=T.target.value;G.match(/^[A-Za-z0-9\._-]+$/g)&&G.length<=32||W({status:!1,message:d({id:"please.enter.message"})})}},allowClear:!0})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.description"}),name:"description",rules:[{required:!1},{max:500,message:d({id:"TestSuite.description.message"})}],children:(0,e.jsx)(Be.Z.TextArea,{placeholder:d({id:"TestSuite.please.enter.description"})})})]})})}),Ma=i(25399),an=i.n(Ma),rn=i(26388),Aa=i(41342),St=i.n(Aa),La=(0,n.forwardRef)(function(R,F){var p,d=(0,t.YB)(),a=d.formatMessage,v=U.Z.useForm(),c=(0,l.Z)(v,1),C=c[0],q=(0,n.useState)(!1),_=(0,l.Z)(q,2),A=_[0],ee=_[1],I=(0,n.useState)(!1),M=(0,l.Z)(I,2),z=M[0],pe=M[1],Z=(0,n.useState)(""),D=(0,l.Z)(Z,2),Ce=D[0],ye=D[1],de=(0,n.useState)({}),H=(0,l.Z)(de,2),K=H[0],_e=H[1],fe=(0,n.useState)({status:!0,message:""}),He=(0,l.Z)(fe,2),W=He[0],me=He[1],Ie=(0,n.useState)(!0),J=(0,l.Z)(Ie,2),w=J[0],T=J[1],G=(0,n.useState)([]),Q=(0,l.Z)(G,2),Se=Q[0],he=Q[1],be=(0,n.useState)(null),Fe=(0,l.Z)(be,2),Ee=Fe[0],ge=Fe[1];(0,n.useImperativeHandle)(F,function(){return{show:function(x){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pe(!0),ye(x),_e(r),r.id){var s,o=(s=JSON.parse(r.var))===null||s===void 0?void 0:s.map(function(b,ve){return(0,u.Z)({id:ve+1},b)});Array.isArray(o)&&o.length?he(o):te(),ge(r.ci_type);var P=N(r);C.setFieldsValue(P)}else te()}}});var ke=function(){C.resetFields(),ee(!1),pe(!1),ye(""),_e({}),me({status:!0,message:""}),he([]),ge(null)},B=function(){ke()},oe=function(x,r,s){x===200?(ke(),se.default.success(a({id:"operation.success"})),R.callback({type:s})):se.default.error(r||a({id:"operation.failed"}))},xe=function(){C.validateFields().then(function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(s){var o,P,b,ve,Re;return(0,h.Z)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(ee(!0),o=R.confIds,!(o!=null&&o.length)){De.next=13;break}return P=(0,u.Z)((0,u.Z)({case_id_list:o.join()},s),{},{domain_list_str:s.domain_list_str.join()}),De.next=6,(0,je.F8)((0,u.Z)({},P));case 6:if(De.t0=De.sent,De.t0){De.next=9;break}De.t0={};case 9:b=De.t0,ve=b.code,Re=b.msg,oe(ve,Re,"editAll");case 13:case"end":return De.stop()}},r)}));return function(r){return x.apply(this,arguments)}}()).catch(function(x){ee(!1)})},we=function(){C.validateFields().then(function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(s){var o,P,b,ve,Re,Ze,De,mt,ot,nt,ut;return(0,h.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(ee(!0),o=R.test_suite_id,P={},b=Te(),Object.keys(s).forEach(function(Y){!Y.match(/^name[0-9]+$/)&&!Y.match(/^val[0-9]+$/)&&!Y.match(/^des[0-9]+$/)&&(P[Y]=s[Y])}),ve=(0,u.Z)((0,u.Z)({test_suite_id:o},P),{},{domain_list_str:s.domain_list_str.join(),var:JSON.stringify(b)}),Re=K.id,!Re){V.next=16;break}return V.next=10,(0,je.qK)((0,u.Z)({id:Re},ve));case 10:Ze=V.sent,De=Ze.code,mt=Ze.msg,oe(De,mt,"edit"),V.next=22;break;case 16:return V.next=18,(0,je.co)((0,u.Z)({},ve));case 18:ot=V.sent,nt=ot.code,ut=ot.msg,oe(nt,ut,"add");case 22:ee(!1);case 23:case"end":return V.stop()}},r)}));return function(r){return x.apply(this,arguments)}}()).catch(function(x){var r;ee(!1),x==null||(r=x.errorFields)===null||r===void 0||r.forEach(function(s){s.name[0]==="name"&&me({status:!1,message:s.errors[0]})})})},Ke=function(){T(!w);var x=Ye();C.setFieldsValue({var:JSON.stringify(x,null,4)})},Ye=function(){var x=C.getFieldsValue(!0);return Se.map(function(r){return{name:x["name".concat(r.id)]||"",val:x["val".concat(r.id)]||"",des:x["des".concat(r.id)]||""}})},Te=function(){var x=C.getFieldsValue(!0);return Se==null?void 0:Se.filter(function(r){return x["name".concat(r.id)]}).map(function(r){return{name:x["name".concat(r.id)],val:x["val".concat(r.id)]||"",des:x["des".concat(r.id)]||""}})},N=function(){var x,r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={};return(x=JSON.parse(s.var))===null||x===void 0||x.forEach(function(P,b){o["name".concat(b+1)]=P.name,o["val".concat(b+1)]=P.val,o["des".concat(b+1)]=P.des}),(0,u.Z)((0,u.Z)({},s),{},{domain_list_str:((r=s.domain_id_list)===null||r===void 0?void 0:r.split(",").map(function(P){return Number(P)}))||[]},o)},le=function(x,r,s){try{var o=JSON.parse(r);if(Object.prototype.toString.call(o)==="[object Array]"){for(var P=o.length,b=0;b<P;b++)if(Object.prototype.toString.call(o[b])!=="[object Object]"){s(a({id:"TestSuite.data.format.error"}));return}}else{s(a({id:"TestSuite.data.format.error"}));return}}catch(ve){s(a({id:"TestSuite.data.format.error"}));return}s()},te=function(){var x=Se.length,r=x&&Se[x-1].id||0,s={id:++r,name:"",val:"",des:""},o=Se.concat([s]);he(o)},y=function(x){if(Se.length>1){var r,s=Se.filter(function(o){return o.id!==x});he(s),C.setFieldsValue((r={},(0,rn.Z)(r,"name".concat(x),void 0),(0,rn.Z)(r,"val".concat(x),void 0),(0,rn.Z)(r,"des".concat(x),void 0),r))}},k=function(x){ge(x)},ne=(0,e.jsxs)("div",{children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),name:"ci_type",rules:[{required:!0,message:a({id:"TestSuite.ci_type.message"})}],extra:Ee==="kernel_install"?(0,e.jsx)("div",{className:St().CI_Config_Extra,children:(0,e.jsx)(t._H,{id:"only.installs.the.kernel"})}):void 0,children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"TestSuite.ci_type.message"}),onChange:k,children:[{value:"aone"},{value:"jenkins"},{value:"kernel_install"},{value:"script"}].map(function(S){return(0,e.jsx)(Ve.Z.Option,{value:S.value,children:S.value},S.value)})})}),(0,e.jsxs)("div",{className:St().ciTypeElement,children:[Ee==="aone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:a({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-Pipeline id",name:"pipeline_id",rules:[{required:!0,message:a({id:"TestSuite.pipeline_id.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.pipeline_id.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-ClientKey",name:"user",rules:[{required:!0,message:a({id:"TestSuite.ClientKey.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.ClientKey.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-AccessSecret",name:"token",rules:[{required:!0,message:a({id:"TestSuite.AccessSecret.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.AccessSecret.message"}),autoComplete:"off"})})]}),Ee==="jenkins"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:a({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-Project Name",name:"project_name",rules:[{required:!0,message:a({id:"TestSuite.project_name.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.project_name.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-User",name:"user",rules:[{required:!0,message:a({id:"TestSuite.User.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.User.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-ApiToken",name:"token",rules:[{required:!0,message:a({id:"TestSuite.ApiToken.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.ApiToken.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-BuildParams",name:"params",rules:[{required:!0,message:a({id:"TestSuite.BuildParams.message"})}],children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.BuildParams.message"})})})]}),Ee==="script"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:a({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(U.Z.Item,{label:"-BuildParams(script)",name:"params",rules:[{required:!0,message:a({id:"TestSuite.BuildParams(script).message"})}],children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.BuildParams(script).message"})})})]})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"0 -24px 20px"}})]});return(0,e.jsx)(tt.Z,{className:St().addConf_drawer,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(Ce)}),maskClosable:!0,keyboard:!1,width:"375",onClose:B,open:z,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:B,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{type:"primary",disabled:A||!W.status,onClick:K.editAll?xe:we,children:K!=null&&K.name||K.editAll?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(U.Z,{layout:"vertical",form:C,children:[!K.editAll&&(0,e.jsx)(U.Z.Item,{label:"Test Conf",name:"name",validateStatus:W.status?void 0:"error",help:!W.status&&W.message,rules:[{required:!0}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"TestConf.name.placeholder"}),onChange:function(x){if(!x.target.value)me({status:!1,message:a({id:"TestConf.name.cannot.be.empty"})});else{me({status:!0,message:""});var r=x.target.value;r.match(/^[A-Za-z0-9\._-]+$/g)&&r.length<=32||me({status:!1,message:a({id:"please.enter.message"})})}}})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),mode:"multiple",getPopupContainer:function(x){return x.parentNode},children:R==null||(p=R.domainList)===null||p===void 0?void 0:p.map(function(S){return(0,e.jsx)(Ve.Z.Option,{value:S.id,children:S.name},S.id)})})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),name:"timeout",rules:[{required:!0,message:a({id:"TestSuite.timeout.message"})}],children:(0,e.jsx)(jt.Z,{style:{width:"100%"},min:0,step:1,placeholder:a({id:"please.enter"})})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),name:"repeat",rules:[{required:!0,message:a({id:"TestSuite.repeat.message"})}],children:(0,e.jsx)(jt.Z,{style:{width:"100%"},min:0,step:1,placeholder:a({id:"please.enter"})})}),!K.editAll&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:St().variableLabel,children:[(0,e.jsx)(t._H,{id:"TestSuite.var"}),(0,e.jsx)("span",{className:St().Bulk_btn,onClick:Ke,children:w?"Bulk Edit":"Key-Value Edit"})]}),w?(0,e.jsxs)(e.Fragment,{children:[Se.map(function(S,x){return(0,e.jsxs)($e.Z,{children:[(0,e.jsxs)(Xe.Z,{span:8,className:St().flexStart,children:[(0,e.jsx)(U.Z.Item,{name:"name".concat(S.id),children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.variable.name"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:"="})]}),(0,e.jsxs)(Xe.Z,{span:8,className:St().flexStart,children:[(0,e.jsx)(U.Z.Item,{name:"val".concat(S.id),children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.default"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:","})]}),(0,e.jsxs)(Xe.Z,{span:8,className:St().flexStart,children:[(0,e.jsx)(U.Z.Item,{name:"des".concat(S.id),children:(0,e.jsx)(Be.Z,{placeholder:a({id:"TestSuite.var.desc"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,paddingLeft:"8px"},children:Se.length>1?(0,e.jsx)(Pn.Z,{onClick:function(){return y(S.id)},style:{color:"#f00"}}):(0,e.jsx)(e.Fragment,{children:"\u2003"})})]})]},x)}),(0,e.jsxs)("a",{onClick:te,children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})]}):(0,e.jsx)(U.Z.Item,{name:"var",rules:[{validator:le}],children:(0,e.jsx)(Be.Z.TextArea,{rows:4,style:{width:"100%"},placeholder:a({id:"TestSuite.format:key=value"})})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"20px -24px"}}),(R==null?void 0:R.test_type)==="business"?ne:null,(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"description",children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.desc.placeholder.s"})})})]})]})})}),Ba=i(40689),An=i.n(Ba),Ka=(0,n.forwardRef)(function(R,F){var p=R.suite_id,d=R.test_type,a=R.domainList,v=(0,t.YB)(),c=v.formatMessage,C=(0,n.useState)(!1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)([]),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)([]),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useRef)(null),fe=(0,n.useState)({visible:!1,success:"",action:""}),He=(0,l.Z)(fe,2),W=He[0],me=He[1],Ie=(0,n.useState)({}),J=(0,l.Z)(Ie,2),w=J[0],T=J[1],G=(0,n.useState)(!1),Q=(0,l.Z)(G,2),Se=Q[0],he=Q[1],be=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(s){var o,P,b,ve;return(0,h.Z)().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return A(!0),Ze.prev=1,Ze.next=4,(0,je.Rd)((0,u.Z)({suite_id:p},s));case 4:o=Ze.sent,P=o||{},b=P.code,ve=P.msg,b===200?z(o):se.default.error(ve||c({id:"request.failed"})),A(!1),Ze.next=13;break;case 10:Ze.prev=10,Ze.t0=Ze.catch(1),A(!1);case 13:case"end":return Ze.stop()}},r,null,[[1,10]])}));return function(s){return x.apply(this,arguments)}}(),Fe=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(){var s,o,P,b,ve;return(0,h.Z)().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return he(!0),Ze.prev=1,Ze.next=4,(0,je.tz)(w.id);case 4:if(Ze.t0=Ze.sent,Ze.t0){Ze.next=7;break}Ze.t0={};case 7:s=Ze.t0,o=s.code,P=s.msg,o===200?(se.default.success(c({id:"request.delete.success"})),H.includes(w.id)&&(b=H.filter(function(De){return De!==w.id}),ve=D.filter(function(De){return De.id!==w.id}),K(b),Ce(ve)),B(),be({page_num:M.page_num,page_size:M.page_size})):se.default.error(P||c({id:"request.delete.failed"})),he(!1),Ze.next=18;break;case 14:Ze.prev=14,Ze.t1=Ze.catch(1),console.log(Ze.t1),he(!1);case 18:case"end":return Ze.stop()}},r,null,[[1,14]])}));return function(){return x.apply(this,arguments)}}(),Ee=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(){var s,o,P;return(0,h.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,je.TZ)({id_list:H.join()});case 2:if(ve.t0=ve.sent,ve.t0){ve.next=5;break}ve.t0={};case 5:s=ve.t0,o=s.code,P=s.msg,o===200?(Ce([]),K([]),B(),be({page_num:1,page_size:M.page_size})):se.default.error(P||c({id:"operation.batch.delete.failed"}));case 9:case"end":return ve.stop()}},r)}));return function(){return x.apply(this,arguments)}}(),ge=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(){var s,o,P,b,ve;return(0,h.Z)().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(s=W.action,o=[],D.map(function(De){return o.push(De.name)}),s!="multiple"){Ze.next=9;break}return Ze.next=6,(0,qe.MR)({name:o.join(","),id:H.join(",")});case 6:P=Ze.sent,Ze.next=13;break;case 9:return b=w.name,ve=w.id,Ze.next=12,(0,qe.MR)({name:b,id:ve});case 12:P=Ze.sent;case 13:P&&window.open("/refenerce/conf/?pk=".concat(P));case 14:case"end":return Ze.stop()}},r)}));return function(){return x.apply(this,arguments)}}();(0,n.useEffect)(function(){be({page_num:1,page_size:M.page_size})},[]),(0,n.useImperativeHandle)(F,function(){return{refresh:function(r){var s,o=r.refreshId;p===o&&(M==null||(s=M.data)===null||s===void 0?void 0:s.length)===0&&be({page_num:1,page_size:M.page_size})}}});var ke=function(r,s,o){r.code===200?me({visible:!0,success:200,action:o}):r.code===201&&me({visible:!0,success:201,action:o}),T(s)},B=function(){me({visible:!1,success:"",action:""}),T({})},oe=function(){W.action==="single"?Fe():W.action==="multiple"&&Ee()},xe=function(r){var s=r.type,o=r.record,P=o===void 0?{}:o;if(s==="add"){var b;(b=_e.current)===null||b===void 0||b.show("new",(0,u.Z)({},P))}else if(s==="edit"){var ve;(ve=_e.current)===null||ve===void 0||ve.show("edit",(0,u.Z)({},P))}},we=function(r){r.type==="editAll"&&(Ce([]),K([])),be({page_num:1,page_size:M.page_size})},Ke=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(s){var o,P,b;return(0,h.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return o=s.record,P=o===void 0?{}:o,Re.prev=1,Re.next=4,(0,Zt.Ob)({flag:"pass",case_id_list:P.id});case 4:if(Re.t0=Re.sent,Re.t0){Re.next=7;break}Re.t0={};case 7:b=Re.t0,b.code&&ke(b,P,"single"),Re.next=14;break;case 11:Re.prev=11,Re.t1=Re.catch(1),console.log(Re.t1);case 14:case"end":return Re.stop()}},r,null,[[1,11]])}));return function(s){return x.apply(this,arguments)}}(),Ye=function(){var x=(0,ie.Z)((0,h.Z)().mark(function r(){var s;return(0,h.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,(0,Zt.Ob)({flag:"pass",case_id_list:H.join()});case 3:if(P.t0=P.sent,P.t0){P.next=6;break}P.t0={};case 6:s=P.t0,s.code&&ke(s,{},"multiple"),P.next=13;break;case 10:P.prev=10,P.t1=P.catch(0),console.log(P.t1);case 13:case"end":return P.stop()}},r,null,[[0,10]])}));return function(){return x.apply(this,arguments)}}(),Te=function(){_e.current.show("batch.edit",{editAll:!0})},N=[{title:"Test Conf",dataIndex:"name",fixed:"left",width:150,render:function(r){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:r})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(r){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:r})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:150,render:function(r){return(0,e.jsx)("span",{children:r||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),dataIndex:"repeat",width:110,render:function(r){return(0,e.jsx)("span",{children:r||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),dataIndex:"ci_type",width:110,render:function(r){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:r})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(r){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:r?an()(r).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"description",width:200,render:function(r){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:r})}},{title:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return xe({type:"add"})},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"operation",width:150,fixed:"right",render:function(r,s){return(0,e.jsxs)(Ae.Z,{align:"center",children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return xe({type:"edit",record:s})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return Ke({record:s})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],le=function(r,s){be({page_num:r,page_size:s})},te={selectedRowKeys:H,onChange:function(r,s){Ce(s),K(r)}},y=M.data,k=M.total,ne=M.page_num,S=M.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)(bt.Z,{className:An().confList_root,columns:N,name:"sys-suite-bussiness-conf",refreshDeps:[H],dataSource:y,loading:_,rowKey:"id",page:ne,pageSize:S,total:k,handlePage:le,rowSelection:te,scroll:{x:1100},paginationBottom:!0}),(0,e.jsx)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:W.visible,onCancel:B,width:["",201].includes(W.success)?300:600,maskClosable:!1,footer:[(0,e.jsx)(ae.Z,{onClick:oe,loading:Se,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:B,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(W.success)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4}}),W.action==="single"?c({id:"TestSuite.conf.name.delete.warning"},{data:w.name}):c({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:ge,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),H.length>0&&(0,e.jsxs)("div",{className:An().deleteAll,children:[(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ht.Z,{indeterminate:!0}),(0,e.jsx)(Qe.Z.Text,{children:c({id:"selected.item"},{data:H==null?void 0:H.length})}),(0,e.jsx)(ae.Z,{type:"link",onClick:function(){Ce([]),K([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:Ye,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(ae.Z,{type:"primary",onClick:Te,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]}),(0,e.jsx)(La,{ref:_e,callback:we,test_suite_id:p,test_type:d,domainList:a,confIds:H})]})}),$a=i(76766),Ln=i.n($a),za=(0,n.forwardRef)(function(R,F){var p,d=(0,t.YB)(),a=d.formatMessage,v=U.Z.useForm(),c=(0,l.Z)(v,1),C=c[0],q=(0,n.useState)(!1),_=(0,l.Z)(q,2),A=_[0],ee=_[1],I=(0,n.useState)(!1),M=(0,l.Z)(I,2),z=M[0],pe=M[1],Z=(0,n.useState)(""),D=(0,l.Z)(Z,2),Ce=D[0],ye=D[1],de=(0,n.useState)({}),H=(0,l.Z)(de,2),K=H[0],_e=H[1],fe=(0,n.useState)({status:!0,message:""}),He=(0,l.Z)(fe,2),W=He[0],me=He[1],Ie=(0,n.useState)(""),J=(0,l.Z)(Ie,2),w=J[0],T=J[1],G=(0,n.useState)(!1),Q=(0,l.Z)(G,2),Se=Q[0],he=Q[1],be=(0,n.useState)([]),Fe=(0,l.Z)(be,2),Ee=Fe[0],ge=Fe[1],ke=[{id:"Type1",name:a({id:"TestSuite.view_type.type1"})},{id:"Type2",name:a({id:"TestSuite.view_type.type2"})},{id:"Type3",name:a({id:"TestSuite.view_type.type3"})}],B=function(){var y=(0,ie.Z)((0,h.Z)().mark(function k(){var ne,S,x,r,s,o=arguments;return(0,h.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return ne=o.length>0&&o[0]!==void 0?o[0]:"",he(!0),b.prev=2,b.next=5,(0,je.fP)({keyword:ne,scope:"aligroup"});case 5:if(b.t0=b.sent,b.t0){b.next=8;break}b.t0={};case 8:S=b.t0,x=S.code,r=S.data,s=r===void 0?[]:r,x===200&&ge(s),he(!1),b.next=19;break;case 16:b.prev=16,b.t1=b.catch(2),he(!1);case 19:case"end":return b.stop()}},k,null,[[2,16]])}));return function(){return y.apply(this,arguments)}}();(0,n.useImperativeHandle)(F,function(){return{show:function(k){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pe(!0),ye(k),_e(ne);var S=oe(ne);T(ne.test_type),C.setFieldsValue(S),B()}}});var oe=function(){var k,ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,u.Z)((0,u.Z)({},ne),{},{domain_list_str:((k=ne.domain_id_list)===null||k===void 0?void 0:k.split(",").map(function(S){return Number(S)}))||[]})},xe=function(){C.resetFields(),ee(!1),pe(!1),ye(""),_e({}),me({status:!0,message:""})},we=function(k,ne,S){k===200?(se.default.success(a({id:"operation.success"})),xe(),R.callback({type:"suite"})):se.default.error(ne||a({id:"operation.failed"}))},Ke=function(){ee(!0),C.validateFields().then(function(){var k=(0,ie.Z)((0,h.Z)().mark(function ne(S){var x,r,s,o,P,b,ve,Re;return(0,h.Z)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(x=K.business_id,r=K.id,!r){De.next=10;break}return De.next=4,(0,je.Fu)(r,(0,u.Z)((0,u.Z)({},S),{},{domain_list_str:S.domain_list_str.join()}));case 4:s=De.sent,o=s.code,P=s.msg,we(o,P,"edit"),De.next=16;break;case 10:return De.next=12,(0,je.SS)((0,u.Z)((0,u.Z)({business_id:x},S),{},{domain_list_str:S.domain_list_str.join()}));case 12:b=De.sent,ve=b.code,Re=b.msg,we(ve,Re,"add");case 16:ee(!1);case 17:case"end":return De.stop()}},ne)}));return function(ne){return k.apply(this,arguments)}}()).catch(function(k){var ne;ee(!1),k==null||(ne=k.errorFields)===null||ne===void 0||ne.forEach(function(S){S.name[0]==="name"&&me({status:!1,message:S.errors[0]})})})},Ye=function(){xe()},Te=function(){var y=(0,ie.Z)((0,h.Z)().mark(function k(ne,S){var x,r;return(0,h.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return x=K.id?{suite_id:K.id}:{},o.next=3,(0,je.$X)((0,u.Z)({suite_name:ne,test_type:S},x));case 3:if(o.t0=o.sent,o.t0){o.next=6;break}o.t0={};case 6:r=o.t0,r.code===200?me({status:!0,message:""}):me({status:!1,message:r.msg});case 8:case"end":return o.stop()}},k)}));return function(ne,S){return y.apply(this,arguments)}}(),N=function(k){var ne=k.target.value.replace(/\s+/g,"");!ne||!w||!W.status||Te(ne,w)},le=function(){var y=(0,ie.Z)((0,h.Z)().mark(function k(ne){return(0,h.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:ne&&B(ne);case 1:case"end":return x.stop()}},k)}));return function(ne){return y.apply(this,arguments)}}(),te=function(k){T(k);var ne=C.getFieldValue("name");ne&&W.status&&Te(ne,k)};return(0,e.jsx)(tt.Z,{className:Ln().addConf_drawer,title:Ce,maskClosable:!0,keyboard:!1,width:"375",onClose:Ye,visible:z,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:Ye,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{type:"primary",disabled:A||!W.status,onClick:Ke,children:K&&K.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(U.Z,{layout:"vertical",form:C,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),name:"test_type",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),onChange:te,getPopupContainer:function(k){return k.parentNode},children:qe.oQ.map(function(y){return(0,e.jsx)(Ve.Z.Option,{value:y.value,children:a({id:y.value})},y.value)})})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.name"}),name:"name",validateStatus:W.status?void 0:"error",help:!W.status&&W.message,rules:[{required:!0}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:a({id:"TestSuite.name.placeholder"}),onBlur:N,onChange:function(k){if(!k.target.value)me({status:!1,message:a({id:"TestSuite.name.cannot.be.empty"})});else{me({status:!0,message:""});var ne=k.target.value;ne.match(/^[A-Za-z0-9\._-]+$/g)&&ne.length<=32||me({status:!1,message:a({id:"please.enter.message"})})}}})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),mode:"multiple",getPopupContainer:function(k){return k.parentNode},children:R==null||(p=R.domainList)===null||p===void 0?void 0:p.map(function(y){return(0,e.jsx)(Ve.Z.Option,{value:y.id,children:y.name},y.id)})})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),name:"run_mode",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),children:qe.ur.map(function(y){return(0,e.jsx)(Ve.Z.Option,{value:y.id,children:a({id:y.id})||"-"},y.id)})})}),w==="performance"&&(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),name:"view_type",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{placeholder:a({id:"please.select"}),children:ke.map(function(y,k){return(0,e.jsx)(Ve.Z.Option,{value:y.id,children:y.name},y.id)})})}),(w==="functional"||w==="performance")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(gn.Z,{}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),initialValue:1,name:"is_default",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsxs)(Ge.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(Rn.Z,{overlayClassName:Ln().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)(At.Z,{})})]}),initialValue:0,name:"certificated",rules:[{required:!0,message:a({id:"please.select"})}],children:(0,e.jsxs)(Ge.ZP.Group,{children:[(0,e.jsxs)(Ge.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"doc",rules:[{required:!1}],children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.desc.placeholder.s"})})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),name:"description",rules:[{required:!1},{max:500,message:a({id:"TestSuite.remarks.message"})}],children:(0,e.jsx)(Be.Z.TextArea,{rows:3,placeholder:a({id:"TestSuite.please.enter.remarks"})})})]})})}),Na=i(58538),Va=i.n(Na),Ua=function(R){var F=R.onOk,p=(0,t.YB)(),d=p.formatMessage,a=(0,n.useState)(!1),v=(0,l.Z)(a,2),c=v[0],C=v[1],q=function(D){z(0),C(D)},_=function(){F(M),C(!1)},A=function(){C(!0)},ee=(0,n.useState)(0),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=function(D){var Ce=D.target;return z(Ce.value)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(ae.Z,{style:{padding:0},size:"small",type:"link",onClick:A,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:Va().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),visible:c,onOk:_,onCancel:function(){return q(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)($e.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(Ge.ZP.Group,{value:M,onChange:pe,children:[(0,e.jsx)(Ge.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(Ge.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},Wa=i(86811),vt=i.n(Wa),Ya=(0,n.forwardRef)(function(R,F){var p=R.onOk,d=R.parentId,a=R.componentType,v=(0,t.YB)(),c=v.formatMessage,C=(0,n.useState)(""),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)(!1),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=U.Z.useForm(),Z=(0,l.Z)(pe,1),D=Z[0],Ce=(0,n.useState)(""),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,t.QT)(je.Q9,{initialData:[],manual:!0}),_e=K.data,fe=K.run;(0,n.useImperativeHandle)(F,function(){return{show:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=a==="suite"?{suite_id:d}:{case_id:d};fe(Q),A(T),z(!0),D.setFieldsValue((0,u.Z)((0,u.Z)({},G),{},{direction:G==="\u4E0A\u5347"?"increase":"decline"}))},hide:W}});var He=function(){D.validateFields().then(function(T){p(T)}).catch(function(T){return console.log(T)})},W=function(){z(!1),H(""),D.resetFields()},me=function(T){T&&H(T)},Ie=function(){if(de){var T=D.getFieldValue("name")||[],G=Array.from(new Set(T.concat(de.split(","))));D.setFieldsValue({name:G})}},J=function(){H(""),D.setFieldsValue({name:""})};return(0,e.jsx)(tt.Z,{maskClosable:!1,keyboard:!1,className:vt().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(_)}),width:376,onClose:W,visible:M,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(ae.Z,{onClick:W,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(ae.Z,{onClick:He,type:"primary",htmlType:"submit",children:_.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(U.Z,{layout:"vertical",form:D,children:[~_.indexOf("edit")?(0,e.jsx)(U.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(Be.Z,{autoComplete:"off",placeholder:c({id:"please.enter"})})}):(0,e.jsx)(U.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:c({id:"please.select"})}],children:(0,e.jsx)(Ve.Z,{mode:"multiple",allowClear:!0,onSearch:me,onBlur:Ie,onClear:J,children:_e.map(function(w){return(0,e.jsxs)(Ve.Z.Option,{value:w.name,children:[w.name,w.unit?"\uFF08".concat(w.unit,"\uFF09"):null]},w.name)})})}),(0,e.jsx)(U.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(jt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:c({id:"please.enter"})})}),(0,e.jsx)(U.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:c({id:"please.enter"})}],children:(0,e.jsx)(jt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:c({id:"please.enter"})})}),(0,e.jsx)(U.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:c({id:"please.select"})}],children:(0,e.jsxs)(Ve.Z,{placeholder:c({id:"please.select"}),children:[(0,e.jsx)(Ve.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(Ve.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),Ja=function(F){var p=F.id,d=F.innerKey,a=F.componentType,v=(0,t.YB)(),c=v.formatMessage,C=(0,n.useState)(1),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)(10),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)([]),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)(!0),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)(),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1],me=(0,n.useState)(),Ie=(0,l.Z)(me,2),J=Ie[0],w=Ie[1],T=(0,n.useState)(new Date().getTime()),G=(0,l.Z)(T,2),Q=G[0],Se=G[1],he=(0,n.useRef)(null),be=(0,t.QT)(je.ge,{initialData:[]}),Fe=be.data,Ee=function(){var Te=(0,ie.Z)((0,h.Z)().mark(function N(le,te){var y,k;return(0,h.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return Ce({data:[]}),K(!0),y={page_num:_,page_size:M},y[te]=le,S.next=6,(0,je.b2)(y);case 6:k=S.sent,Ce(k),K(!1);case 9:case"end":return S.stop()}},N)}));return function(le,te){return Te.apply(this,arguments)}}();(0,n.useEffect)(function(){Ee(p,d=="1"?"case_id":"suite_id")},[_,M,Q]);var ge=function(N,le){W(N),Fe.forEach(function(te){te.name==le.domain&&(le.domain=te.id)}),w(le.id),he.current.show("edit",le)},ke=function(){var Te=(0,ie.Z)((0,h.Z)().mark(function N(le){var te;return(0,h.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:te=(0,u.Z)((0,u.Z)({},le),{object_id:He,object_type:d==1?"case":"suite"}),d==1?oe(te):B(te);case 2:case"end":return k.stop()}},N)}));return function(le){return Te.apply(this,arguments)}}(),B=function(N){var le=c({id:"TestSuite.is_synchronize.all.conf"}),te=c({id:"operation.yes"}),y=c({id:"operation.no"});dt.Z.confirm({title:le,icon:(0,e.jsx)(rt.Z,{}),okText:te,cancelText:y,maskClosable:!1,onOk:function(){oe((0,u.Z)((0,u.Z)({},N),{},{is_sync:1}))},onCancel:function(){oe((0,u.Z)((0,u.Z)({},N),{},{is_sync:0}))}})},oe=function(){var Te=(0,ie.Z)((0,h.Z)().mark(function N(le){var te,y,k;return(0,h.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!J){S.next=6;break}return S.next=3,(0,je.Of)(J,le);case 3:S.t0=S.sent,S.next=9;break;case 6:return S.next=8,(0,je.WM)(le);case 8:S.t0=S.sent;case 9:te=S.t0,y=te.code,k=te.msg,y===200?(he.current.hide(),Se(new Date().getTime())):(0,qe.EV)(y,k);case 13:case"end":return S.stop()}},N)}));return function(le){return Te.apply(this,arguments)}}(),xe=function(){var Te=(0,ie.Z)((0,h.Z)().mark(function N(le,te){var y,k,ne,S,x,r;return(0,h.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(y=le.object_type,k=le.object_id,ne=le.name,d!=1){o.next=7;break}return o.next=4,(0,je.G6)(le.id);case 4:o.t0=o.sent,o.next=10;break;case 7:return o.next=9,(0,je.G6)(le.id,{is_sync:te,object_id:k,object_type:y,name:ne});case 9:o.t0=o.sent;case 10:S=o.t0,x=S.code,r=S.msg,x===200?(se.default.success(c({id:"operation.success"})),Se(new Date().getTime())):(0,qe.EV)(x,r);case 14:case"end":return o.stop()}},N)}));return function(le,te){return Te.apply(this,arguments)}}(),we=function(N){W(N),w(void 0),he.current.show("new")},Ke=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(N){return N&&Number(N).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(N){return N&&Number(N).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return we(p)},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:180,fixed:"right",render:function(N,le){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return ge(p,(0,u.Z)({},le))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),d==1?(0,e.jsx)(Vt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return xe(le)},overlayStyle:{width:"224px"},children:(0,e.jsx)(ae.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(Ua,{onOk:function(y){return xe(le,y)}})]})}}],Ye=function(N,le){A(N),z(le)};return(0,e.jsxs)("div",{className:vt().warp,children:[(0,e.jsx)(bt.Z,{className:vt().FuncOrPerfConfList_root,columns:Ke,name:"sys-business-fun-or-per-conf-metric",loading:H,dataSource:D.data,page:D.page_num,totalPage:D.total_page,total:D.total,pageSize:D.page_size,handlePage:Ye,paginationBottom:!0,scroll:{x:670}}),(0,e.jsx)(Ya,{onOk:ke,ref:he,parentId:p,componentType:a})]},p)},Bn=Ja,Kn=st.Z.TabPane,Ga=(0,n.forwardRef)(function(R,F){var p=R.id,d=R.type,a=R.domainList,v=(0,t.YB)(),c=v.formatMessage,C=(0,n.useState)([]),q=(0,l.Z)(C,2),_=q[0],A=q[1],ee=(0,n.useState)([]),I=(0,l.Z)(ee,2),M=I[0],z=I[1],pe=(0,n.useState)("1"),Z=(0,l.Z)(pe,2),D=Z[0],Ce=Z[1],ye=(0,n.useState)(!1),de=(0,l.Z)(ye,2),H=de[0],K=de[1],_e=(0,n.useState)(!1),fe=(0,l.Z)(_e,2),He=fe[0],W=fe[1],me=(0,n.useState)({}),Ie=(0,l.Z)(me,2),J=Ie[0],w=Ie[1],T=(0,n.useState)(1),G=(0,l.Z)(T,2),Q=G[0],Se=G[1],he=(0,n.useState)(10),be=(0,l.Z)(he,2),Fe=be[0],Ee=be[1],ge=(0,n.useState)([]),ke=(0,l.Z)(ge,2),B=ke[0],oe=ke[1],xe=(0,n.useState)(!0),we=(0,l.Z)(xe,2),Ke=we[0],Ye=we[1],Te=(0,n.useState)([]),N=(0,l.Z)(Te,2),le=N[0],te=N[1],y=(0,n.useRef)(null),k=(0,n.useRef)(null),ne=(0,n.useState)(!1),S=(0,l.Z)(ne,2),x=S[0],r=S[1];(0,n.useImperativeHandle)(F,function(){return{refresh:function(O){var E=O.refreshId;p===E&&s()}}});var s=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(){var E,L,j,g=arguments;return(0,h.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return E=g.length>0&&g[0]!==void 0?g[0]:{},oe({data:[]}),te([]),Ye(!0),L=(0,u.Z)({suite_id:p,page_num:Q,page_size:Fe},E),m.next=7,(0,je.Sb)(L);case 7:j=m.sent,oe(j),Ye(!1);case 10:case"end":return m.stop()}},O)}));return function(){return re.apply(this,arguments)}}(),o=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(){var E,L,j,g,f;return(0,h.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,(0,je.tz)(J.id);case 3:if($.t0=$.sent,$.t0){$.next=6;break}$.t0={};case 6:E=$.t0,L=E.code,j=E.msg,L===200?(se.default.success(c({id:"request.delete.success"})),_.includes(J.id)&&(g=_.filter(function(X){return X!==J.id}),f=M.filter(function(X){return X.id!==J.id}),A(g),z(f)),K(!1),W(!1),w({}),s()):se.default.error(j||c({id:"request.delete.failed"})),$.next=15;break;case 12:$.prev=12,$.t1=$.catch(0),console.log($.t1);case 15:case"end":return $.stop()}},O,null,[[0,12]])}));return function(){return re.apply(this,arguments)}}(),P=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(){var E,L,j;return(0,h.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,je.TZ)({id_list:_.join()});case 2:if(f.t0=f.sent,f.t0){f.next=5;break}f.t0={};case 5:E=f.t0,L=E.code,j=E.msg,L===200?(z([]),A([]),K(!1),W(!1),s({page_num:1})):se.default.error(j||c({id:"operation.batch.delete.failed"}));case 9:case"end":return f.stop()}},O)}));return function(){return re.apply(this,arguments)}}();(0,n.useEffect)(function(){s()},[Q,Fe,x]);var b=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(E,L){var j,g,f,m,$,X,Me,ce,et,Ue,Je,Pt,Tt;return(0,h.Z)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(j=E.test_suite_id,g=E.id,f=(0,u.Z)({},E),!L){Le.next=10;break}return m=(0,u.Z)((0,u.Z)({},f),{case_id_list:_.join(",")}),Le.next=6,(0,je.fF)(m);case 6:A([]),z([]),Le.next=59;break;case 10:if($=f.var,Object.prototype.toString.call(f.var)!=="[object String]"){Le.next=36;break}if(Le.prev=12,X=JSON.parse($),Object.prototype.toString.call(X)!=="[object Array]"){Le.next=26;break}Me=X.length,ce=0;case 17:if(!(ce<Me)){Le.next=24;break}if(Object.prototype.toString.call(X[ce])==="[object Object]"){Le.next=21;break}return se.default.error(c({id:"TestSuite.data.format.error"})),Le.abrupt("return");case 21:ce++,Le.next=17;break;case 24:Le.next=28;break;case 26:return se.default.error(c({id:"TestSuite.data.format.error"})),Le.abrupt("return");case 28:Le.next=34;break;case 30:return Le.prev=30,Le.t0=Le.catch(12),se.default.error(c({id:"TestSuite.data.format.error"})),Le.abrupt("return");case 34:Le.next=39;break;case 36:et=[],$.map(function(Et){Et.name&&et.push(Et)}),$=JSON.stringify(et);case 39:if(f.var=$,Ue=(0,u.Z)((0,u.Z)({},f),{test_suite_id:j}),!g){Le.next=47;break}return Le.next=44,(0,je.Ft)(g,Ue);case 44:Le.t1=Le.sent,Le.next=50;break;case 47:return Le.next=49,(0,je.C7)(Ue);case 49:Le.t1=Le.sent;case 50:if(Je=Le.t1,Pt=Je.code,Tt=Je.msg,Pt!=201){Le.next=56;break}return se.default.error(c({id:"TestSuite.repeated.suite.name"})),Le.abrupt("return");case 56:if(Pt!=202){Le.next=59;break}return se.default.error(Tt),Le.abrupt("return");case 59:k.current.hide(),se.default.success(c({id:"operation.success"})),r(!x);case 62:case"end":return Le.stop()}},O,null,[[12,30]])}));return function(E,L){return re.apply(this,arguments)}}(),ve=function(O){O.var=O.var?JSON.parse(O.var):[{name:"",val:"",des:""}],O.is_default=O.is_default?1:0;for(var E=O.domain_id_list===""?[]:O.domain_id_list.split(","),L=[],j=0;j<E.length;j++)L.push(Number.parseInt(E[j]));O.domain_list_str=L,a.forEach(function(g){g.name==O.domain&&(O.domain=g.id)}),k.current.show("edit",O)},Re=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(E){var L;return(0,h.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,Zt.Ob)({flag:"pass",case_id_list:E.id});case 2:L=g.sent,L.code===200?K(!0):W(!0),w(E);case 5:case"end":return g.stop()}},O)}));return function(E){return re.apply(this,arguments)}}(),Ze=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(){var E;return(0,h.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,Zt.Ob)({flag:"pass",case_id_list:_.join()});case 3:if(j.t0=j.sent,j.t0){j.next=6;break}j.t0={};case 6:E=j.t0,E.code===200?K(!0):W(!0),w({}),j.next=14;break;case 11:j.prev=11,j.t1=j.catch(0),console.log(j.t1);case 14:case"end":return j.stop()}},O,null,[[0,11]])}));return function(){return re.apply(this,arguments)}}(),De=function(){k.current.show("batch.edit",{bentch:!0,test_suite_id:p})},mt=function(O,E){Ce(O),D!="1"&&r(!x)},ot=function(){J.id?o():P()},nt=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(){var E,L,j,g;return(0,h.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(E=[],M.foreach(function($){return E.push($.name)}),J.id){m.next=8;break}return m.next=5,(0,qe.MR)({name:E.join(","),id:_.join(",")});case 5:L=m.sent,m.next=12;break;case 8:return j=J.name,g=J.id,m.next=11,(0,qe.MR)({name:j,id:g});case 11:L=m.sent;case 12:L&&window.open("/refenerce/conf/?pk=".concat(L));case 13:case"end":return m.stop()}},O)}));return function(){return re.apply(this,arguments)}}(),ut=function(){k.current.show("new",{bentch:!1,test_suite_id:p})},Oe=+status==0?{selectedRowKeys:_,onChange:function(O,E){z(E),A(O)}}:void 0,V=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(E){return(0,h.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:te([E.id]);case 1:case"end":return j.stop()}},O)}));return function(E){return re.apply(this,arguments)}}(),Y=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,render:function(O,E){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:E.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(O){return(0,e.jsx)(e.Fragment,{children:O||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",render:function(O){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:O||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(O,E){return(0,e.jsx)(Qe.Z.Text,{ellipsis:{tooltip:!0},children:E.var&&E.var!="[]"?JSON.parse(E.var).map(function(L){return"".concat(L.name,"=").concat(L.val||"-",",").concat(L.des||"-",";")}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),key:"desc",ellipsis:!0,width:100,render:function(O,E){return(0,e.jsx)(Nt.Z,{title:E.doc,width:70,isCode:!0,children:(0,e.jsx)(wt.Z,{className:vt().edit,onClick:function(){return y.current.show(E)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(O,E){return E.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(O,E){return E.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(O,E){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:E.gmt_created})}},{title:(0,e.jsxs)(Ae.Z,{align:"center",children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",onClick:ut,size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"operation",width:150,fixed:"right",render:function(O,E){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Qe.Z.Link,{onClick:function(){return ve((0,u.Z)({},E))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Qe.Z.Link,{onClick:function(){return Re((0,u.Z)({},E))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],Pe=function(O,E){Se(O),Ee(E)},ue=function(){var re=(0,ie.Z)((0,h.Z)().mark(function O(E){var L,j,g;return(0,h.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,je.Ft)(E.id,{doc:E.doc});case 2:L=m.sent,j=L.code,g=L.msg,j===200?(se.default.success(c({id:"operation.success"})),y.current.hide(),r(!x)):(0,qe.EV)(j,g);case 6:case"end":return m.stop()}},O)}));return function(E){return re.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(vt().warp," case_table_wrapper"),children:[d==="performance"&&(0,e.jsxs)(st.Z,{defaultActiveKey:"1",activeKey:D,onChange:function(O){return mt(O,p)},children:[(0,e.jsx)(Kn,{tab:"Test Conf"},"1"),(0,e.jsx)(Kn,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),D=="1"?(0,e.jsx)(bt.Z,{className:vt().FuncOrPerfConfList_root,columns:Y,name:"sys-suite-business-fun-or-perf-conf",scroll:{x:1400},rowKey:"id",loading:Ke,dataSource:B.data,page:B.page_num,rowSelection:Oe,totalPage:B.total_page,total:B.total,pageSize:B.page_size,paginationBottom:!0,handlePage:Pe,expandable:d=="performance"?{expandedRowRender:function(O){return(0,e.jsx)(Bn,{componentType:"case",id:O.id,innerKey:D})},onExpand:function(O,E){O?V(E):te([])},expandedRowKeys:le,expandIcon:function(O){var E=O.expanded,L=O.onExpand,j=O.record;return E?(0,e.jsx)(Lt.Z,{onClick:function(f){return L(j,f)}}):(0,e.jsx)(Bt.Z,{onClick:function(f){return L(j,f)}})}}:{}}):(0,e.jsx)(Bn,{componentType:"suite",id:p,innerKey:D}),(0,e.jsx)(En,{ref:k,onOk:b}),(0,e.jsx)(tn,{ref:y,onOk:ue}),(0,e.jsxs)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(ae.Z,{onClick:ot,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return K(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,className:vt().modalChange,visible:H,onCancel:function(){return K(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4}}),J.name?c({id:"TestSuite.conf.name.delete.warning"},{data:J.name}):c({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:nt,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,className:vt().modalChange,visible:He,onCancel:function(){return W(!1)},footer:[(0,e.jsx)(ae.Z,{onClick:ot,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){W(!1),w({})},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),_.length>0&&(0,e.jsxs)("div",{className:vt().batch,children:[(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ht.Z,{indeterminate:!0}),(0,e.jsx)(Qe.Z.Text,{children:c({id:"selected.item"},{data:_==null?void 0:_.length})}),(0,e.jsx)(ae.Z,{type:"link",onClick:function(){z([]),A([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ae.Z,{onClick:Ze,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(ae.Z,{type:"primary",onClick:De,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})]})}),Qa=i(89279),Xa=i.n(Qa),qa=(0,n.forwardRef)(function(R,F){var p=R.business_id,d=R.rowSelectionCallback,a=d===void 0?function(){}:d,v=R.restId,c=R.restFlag,C=R.deleteAllId,q=(0,t.YB)(),_=q.formatMessage,A=(0,n.useState)(!1),ee=(0,l.Z)(A,2),I=ee[0],M=ee[1],z=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),pe=(0,l.Z)(z,2),Z=pe[0],D=pe[1],Ce=(0,n.useState)([]),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,n.useState)([]),_e=(0,l.Z)(K,2),fe=_e[0],He=_e[1],W=(0,n.useState)([]),me=(0,l.Z)(W,2),Ie=me[0],J=me[1],w=(0,n.useState)([]),T=(0,l.Z)(w,2),G=T[0],Q=T[1],Se=(0,n.useRef)(null),he=(0,n.useRef)(null),be=(0,n.useRef)(null),Fe=(0,n.useState)({visible:!1,result:"",action:""}),Ee=(0,l.Z)(Fe,2),ge=Ee[0],ke=Ee[1],B=(0,n.useState)({}),oe=(0,l.Z)(B,2),xe=oe[0],we=oe[1],Ke=(0,n.useState)(!1),Ye=(0,l.Z)(Ke,2),Te=Ye[0],N=Ye[1],le=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(Y){var Pe,ue,re,O;return(0,h.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return M(!0),L.prev=1,L.next=4,(0,je.J1)((0,u.Z)({business_id:p},Y));case 4:Pe=L.sent,ue=Pe||{},re=ue.code,O=ue.msg,re===200?D(Pe):se.default.error(O||_({id:"request.failed"})),M(!1),L.next=13;break;case 10:L.prev=10,L.t0=L.catch(1),M(!1);case 13:case"end":return L.stop()}},V,null,[[1,10]])}));return function(Y){return Oe.apply(this,arguments)}}(),te=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(){var Y,Pe,ue,re,O;return(0,h.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,(0,je.ge)(null);case 3:if(L.t0=L.sent,L.t0){L.next=6;break}L.t0={};case 6:Y=L.t0,Pe=Y.code,ue=Y.data,re=ue===void 0?[]:ue,O=Y.msg,Pe===200?Q(re):se.default.error(O||_({id:"request.failed"})),L.next=17;break;case 14:L.prev=14,L.t1=L.catch(0),console.log(L.t1);case 17:case"end":return L.stop()}},V,null,[[0,14]])}));return function(){return Oe.apply(this,arguments)}}(),y=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(Y){var Pe,ue,re,O,E;return(0,h.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return M(!0),j.prev=1,j.next=4,(0,je.PO)(Y);case 4:if(j.t0=j.sent,j.t0){j.next=7;break}j.t0={};case 7:Pe=j.t0,ue=Pe.code,re=Pe.msg,ue===200?(se.default.success(_({id:"request.synchronize.success"})),le({page_num:Z.page_num,page_size:Z.page_size}),Ie.includes(Y)?(O=he.current)===null||O===void 0||O.refresh({refreshId:Y}):(E=Ie.concat([Y]),J(E))):se.default.error(re||_({id:"request.synchronize.failed"})),M(!1),j.next=17;break;case 14:j.prev=14,j.t1=j.catch(1),M(!1);case 17:case"end":return j.stop()}},V,null,[[1,14]])}));return function(Y){return Oe.apply(this,arguments)}}(),k=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(){var Y,Pe,ue,re,O;return(0,h.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return N(!0),L.prev=1,L.next=4,(0,je.D8)(xe.id);case 4:if(L.t0=L.sent,L.t0){L.next=7;break}L.t0={};case 7:Y=L.t0,Pe=Y.code,ue=Y.msg,Pe===200?(se.default.success(_({id:"request.delete.success"})),fe.includes(xe.id)&&(re=fe.filter(function(j){return j!==xe.id}),O=de.filter(function(j){return j.id!==xe.id}),He(re),H(O),re.length?a({business_id:p,selectedRowKeys:re}):a({})),r(),le({page_num:Z.page_num,page_size:Z.page_size})):se.default.error(ue||_({id:"request.delete.failed"})),N(!1),L.next=18;break;case 14:L.prev=14,L.t1=L.catch(1),console.log(L.t1),N(!1);case 18:case"end":return L.stop()}},V,null,[[1,14]])}));return function(){return Oe.apply(this,arguments)}}(),ne=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(){var Y;return(0,h.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!fe.length){ue.next=16;break}return M(!0),ue.prev=2,ue.next=5,(0,je.d9)({id_list:fe.join()});case 5:if(ue.t0=ue.sent,ue.t0){ue.next=8;break}ue.t0={};case 8:Y=ue.t0,Y.code===200?(se.default.success(_({id:"operation.batch.delete.success"})),H([]),He([]),r(),le({page_num:1,page_size:Z.page_size}),a({})):se.default.error(Y.msg||_({id:"operation.batch.delete.failed"})),M(!1),ue.next=16;break;case 13:ue.prev=13,ue.t1=ue.catch(2),M(!1);case 16:case"end":return ue.stop()}},V,null,[[2,13]])}));return function(){return Oe.apply(this,arguments)}}(),S=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(){var Y,Pe,ue,re,O,E;return(0,h.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(Y=ge.action,Pe=[],de.map(function(g){return Pe.push(g.name)}),Y!=="multiple"){j.next=10;break}return j.next=6,(0,qe.MR)({name:Pe.join(","),id:fe.join(",")});case 6:ue=j.sent,window.open("/refenerce/conf/?pk=".concat(ue)),j.next=16;break;case 10:if(Y!=="single"){j.next=16;break}return re=xe.name,O=xe.id,j.next=14,(0,qe.MR)({name:re,id:O});case 14:E=j.sent,window.open("/refenerce/suite/?pk=".concat(E));case 16:case"end":return j.stop()}},V)}));return function(){return Oe.apply(this,arguments)}}(),x=function(V,Y,Pe){V.code===200?ke({visible:!0,result:200,action:Pe}):V.code===201&&ke({visible:!0,result:201,action:Pe}),we(Y)},r=function(){ke({visible:!1,result:"",action:""}),we({})},s=function(){ge.action==="single"?k():ge.action==="multiple"&&ne()};(0,n.useEffect)(function(){le({page_num:1,page_size:Z.page_size}),te()},[]),(0,n.useEffect)(function(){v&&p===v&&(H([]),He([]))},[v,c]),(0,n.useEffect)(function(){p===C&&C&&ve()},[C]),(0,n.useImperativeHandle)(F,function(){return{refresh:function(V){var Y,Pe=V.refreshId;p===Pe&&(Z==null||(Y=Z.data)===null||Y===void 0?void 0:Y.length)===0&&(le({page_num:1,page_size:Z.page_size}),te())}}});var o=function(V){var Y=V.type,Pe=V.record,ue=Pe===void 0?{}:Pe;if(Y==="add"){var re;(re=Se.current)===null||re===void 0||re.show(_({id:"TestSuite.new.suite"}),(0,u.Z)({business_id:p},ue))}else if(Y==="edit"){var O,E=(0,u.Z)((0,u.Z)({},ue),{},{is_default:ue.is_default?1:0,certificated:ue.certificated?1:0});(O=Se.current)===null||O===void 0||O.show(_({id:"TestSuite.edit.suite"}),(0,u.Z)({business_id:p},E))}},P=function(){le({page_num:1,page_size:Z.page_size})},b=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(Y){var Pe,ue,re;return(0,h.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return Pe=Y.record,ue=Pe===void 0?{}:Pe,E.prev=1,E.next=4,(0,Zt.Ob)({flag:"pass",suite_id:ue.id});case 4:if(E.t0=E.sent,E.t0){E.next=7;break}E.t0={};case 7:re=E.t0,re.code&&x(re,ue,"single"),E.next=14;break;case 11:E.prev=11,E.t1=E.catch(1),console.log(E.t1);case 14:case"end":return E.stop()}},V,null,[[1,11]])}));return function(Y){return Oe.apply(this,arguments)}}(),ve=function(){var Oe=(0,ie.Z)((0,h.Z)().mark(function V(){var Y;return(0,h.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.prev=0,ue.next=3,(0,je.eq)({flag:"pass",suite_id_list:fe.join()});case 3:if(ue.t0=ue.sent,ue.t0){ue.next=6;break}ue.t0={};case 6:Y=ue.t0,Y.code&&x(Y,{},"multiple"),ue.next=13;break;case 10:ue.prev=10,ue.t1=ue.catch(0),console.log(ue.t1);case 13:case"end":return ue.stop()}},V,null,[[0,10]])}));return function(){return Oe.apply(this,arguments)}}(),Re=[{title:"Test Suite",dataIndex:"name",fixed:"left",width:120,render:function(V){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:V})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(V){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:V||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),dataIndex:"test_type",onCell:function(){return{style:{maxWidth:100}}},render:function(V){return qe.oQ.map(function(Y){return Y.value===V?(0,e.jsx)("span",{children:_({id:Y.value})||"-"},Y.value):null})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"is_default",render:function(V){return(0,e.jsx)("span",{children:V?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",onCell:function(){return{style:{maxWidth:100}}},render:function(V){return(0,e.jsx)("span",{children:V?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",onCell:function(){return{style:{maxWidth:100}}},render:function(V){return qe.ur.map(function(Y){return Y.id===V?(0,e.jsx)("span",{children:_({id:Y.id})||"-"},Y.id):!1}).filter(Boolean)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(V){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:V||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:150,render:function(V){return(0,e.jsx)("div",{children:V?(0,e.jsx)(Nt.Z,{title:V,width:150,isCode:!0,children:(0,e.jsx)("span",{children:null})}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",onCell:function(){return{style:{maxWidth:150}}},render:function(V){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:V})}},{title:(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(ae.Z,{type:"primary",onClick:function(){return o({type:"add"})},style:{marginLeft:8},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),width:150,fixed:"right",key:"operation",render:function(V,Y){return(0,e.jsxs)(Ae.Z,{children:[Y.test_type==="business"?(0,e.jsx)("span",{children:"\u2003\u2003"}):(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return y(Y.id)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return o({type:"edit",record:Y})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return b({record:Y})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],Ze=function(V,Y){le({page_num:V,page_size:Y})},De={selectedRowKeys:fe,onChange:function(V,Y){H(Y),He(V),a({business_id:p,selectedRowKeys:V})}},mt=Z.data,ot=Z.total,nt=Z.page_num,ut=Z.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)(bt.Z,{className:Xa().suitList_root,columns:Re,name:"sys-suite-business-suite",rowKey:"id",dataSource:mt,loading:I,page:nt,pageSize:ut,total:ot,handlePage:Ze,rowSelection:De,expandable:{expandedRowRender:function(V){var Y=V.test_type;return Y==="functional"||Y==="performance"?(0,e.jsx)(Ga,{id:V.id,type:Y,domainList:G,ref:he}):Y==="business"?(0,e.jsx)(Ka,(0,u.Z)((0,u.Z)({suite_id:V.id},V),{},{domainList:G,ref:be})):(0,e.jsx)("div",{children:null})},columnWidth:35,onExpand:function(V,Y){if(V){var Pe;J([Y.id]),(Pe=be.current)===null||Pe===void 0||Pe.refresh({refreshId:Y.id})}else J([])},expandedRowKeys:Ie,expandIcon:function(V){var Y=V.expanded,Pe=V.onExpand,ue=V.record;return Y?(0,e.jsx)(Lt.Z,{onClick:function(O){return Pe(ue,O)}}):(0,e.jsx)(Bt.Z,{onClick:function(O){return Pe(ue,O)}})}},scroll:{x:1250},paginationBottom:!0}),(0,e.jsx)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:ge.visible,onCancel:r,width:["",201].includes(ge.result)?300:600,maskClosable:!1,footer:[(0,e.jsx)(ae.Z,{onClick:s,loading:Te,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:r,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(ge.result)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4}}),ge.action==="single"?_({id:"TestSuite.suite.delete.warning"},{data:"deleteRow.name"}):_({id:"TestSuite.have.suite.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:S,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),(0,e.jsx)(za,{ref:Se,callback:P,domainList:G})]})}),er=i(31122),sn=i.n(er),tr=i(526),nr=(0,n.forwardRef)(function(R,F){var p,d,a=(0,t.YB)(),v=a.formatMessage,c=(0,n.useState)(!0),C=(0,l.Z)(c,2),q=C[0],_=C[1],A=(0,n.useState)({data:[],total:0,page_num:1}),ee=(0,l.Z)(A,2),I=ee[0],M=ee[1],z=(0,n.useState)(10),pe=(0,l.Z)(z,2),Z=pe[0],D=pe[1],Ce=(0,n.useState)([]),ye=(0,l.Z)(Ce,2),de=ye[0],H=ye[1],K=(0,n.useState)({}),_e=(0,l.Z)(K,2),fe=_e[0],He=_e[1],W=(0,n.useState)(!0),me=(0,l.Z)(W,2),Ie=me[0],J=me[1],w=(0,n.useState)(""),T=(0,l.Z)(w,2),G=T[0],Q=T[1],Se=(0,n.useState)(),he=(0,l.Z)(Se,2),be=he[0],Fe=he[1],Ee=(0,n.useState)(!1),ge=(0,l.Z)(Ee,2),ke=ge[0],B=ge[1],oe=(0,n.useState)({}),xe=(0,l.Z)(oe,2),we=xe[0],Ke=xe[1],Ye=(0,n.useRef)(null),Te=(0,n.useState)({businessId:"",selectedSuiteKeys:[]}),N=(0,l.Z)(Te,2),le=N[0],te=N[1],y=(0,n.useState)(""),k=(0,l.Z)(y,2),ne=k[0],S=k[1],x=(0,n.useState)(!1),r=(0,l.Z)(x,2),s=r[0],o=r[1],P=(0,n.useState)(""),b=(0,l.Z)(P,2),ve=b[0],Re=b[1],Ze=(0,n.useRef)(),De=function(){var j=(0,ie.Z)((0,h.Z)().mark(function g(f){var m,$,X;return(0,h.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return _(!0),ce.prev=1,ce.next=4,(0,je.p4)((0,u.Z)((0,u.Z)({},fe),f));case 4:if(ce.t0=ce.sent,ce.t0){ce.next=7;break}ce.t0={};case 7:m=ce.t0,$=m.code,X=m.msg,$===200?M(m):se.default.error(X||v({id:"request.failed"})),_(!1),ce.next=16;break;case 13:ce.prev=13,ce.t1=ce.catch(1),_(!1);case 16:case"end":return ce.stop()}},g,null,[[1,13]])}));return function(f){return j.apply(this,arguments)}}();(0,n.useEffect)(function(){var j={page_num:1,page_size:Z,name:G,creator:be};He(j),De(j)},[G,be]),(0,n.useImperativeHandle)(F,function(){return{refresh:function(){G||be?(Q(""),Fe(void 0)):De({page_num:1,page_size:Z})},openCreateDrawer:Ze.current.show}});var mt=function(){var j=(0,ie.Z)((0,h.Z)().mark(function g(f){var m,$,X;return(0,h.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return _(!0),nt==null||nt(),ce.prev=2,ce.next=5,(0,je.AE)(f);case 5:if(ce.t0=ce.sent,ce.t0){ce.next=8;break}ce.t0={};case 8:m=ce.t0,$=m.code,X=m.msg,$===200?(se.default.success(v({id:"request.delete.success"})),De(fe)):se.default.error(X||v({id:"request.delete.failed"})),_(!1),ce.next=18;break;case 15:ce.prev=15,ce.t1=ce.catch(2),_(!1);case 18:case"end":return ce.stop()}},g,null,[[2,15]])}));return function(f){return j.apply(this,arguments)}}(),ot=function(g){B(!0),Ke(g)},nt=function(){B(!1),Ke({})},ut=[{title:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),dataIndex:"name",fixed:"left",width:"auto",filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:G?"#1890ff":void 0}})},filterDropdown:function(g){var f=g.confirm;return(0,e.jsx)(nn.Z,{confirm:f,autoFocus:Ie,onConfirm:function($){Q($)}})},onFilterDropdownVisibleChange:function(g){g&&J(!Ie)},render:function(g){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:g})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",onCell:function(){return{style:{minWidth:170}}},render:function(g){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:g?an()(g).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",onCell:function(){return{style:{minWidth:170}}},render:function(g){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:g?an()(g).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),dataIndex:"creator_name",onCell:function(){return{style:{minWidth:150}}},filterIcon:function(){return(0,e.jsx)(at.Z,{style:{color:be?"#1890ff":void 0}})},filterDropdown:function(g){var f=g.confirm;return(0,e.jsx)(Yt.Z,{confirm:f,onConfirm:function($){Fe($)}})},onFilterDropdownVisibleChange:function(g){g&&J(!Ie)},render:function(g){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:g})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",render:function(g){return(0,e.jsx)(We.K,{ellipsis:{tooltip:!0},children:g})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),width:150,fixed:"right",key:"operation",render:function(g,f){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return Ze.current.show(f)},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return ot(f)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],Oe=function(g,f){De({page_num:g,page_size:f})},V=function(g){var f=g.business_id,m=g.selectedRowKeys,$=m===void 0?[]:m;f&&$.length?(f!==le.businessId&&(S(le.businessId),o(!s)),te({businessId:f,selectedSuiteKeys:$})):te({businessId:"",selectedSuiteKeys:[]})},Y=function(){S(le.businessId),o(!s),te({businessId:"",selectedSuiteKeys:[]})},Pe=function(){Re(le.businessId)},ue=(0,tr.CR)(),re=ue.width,O=I.data,E=I.total,L=I.page_num;return console.log(de),(0,e.jsx)(Kt.Provider,{value:{selectedRowKeys:[],selectedRow:[]},children:(0,e.jsxs)("div",{className:sn().business_root,children:[(0,e.jsx)(bt.Z,{className:sn().businessList,columns:ut,name:"sys-suite-business-list",rowKey:"id",refreshDeps:[G,be,Ie,de,le,ne,s,ve],dataSource:O,scroll:{x:"100%"},loading:q,page:L,pageSize:Z,total:E,handlePage:Oe,expandable:{expandedRowRender:function(g){return(0,e.jsx)(qa,{business_id:g.id,ref:Ye,rowSelectionCallback:V,restId:ne,restFlag:s,deleteAllId:ve})},onExpand:function(g,f){if(g){var m;H([f.id]),(m=Ye.current)===null||m===void 0||m.refresh({refreshId:f.id})}else H([])},expandedRowKeys:de,expandIcon:function(g){var f=g.expanded,m=g.onExpand,$=g.record;return f?(0,e.jsx)(Lt.Z,{onClick:function(Me){return m($,Me)}}):(0,e.jsx)(Bt.Z,{onClick:function(Me){return m($,Me)}})}}}),(0,e.jsx)(dt.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:ke,onCancel:nt,width:300,maskClosable:!1,footer:[(0,e.jsx)(ae.Z,{onClick:function(){return mt(we)},children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(ae.Z,{type:"primary",onClick:nt,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(rt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),((p=le.selectedSuiteKeys)===null||p===void 0?void 0:p.length)>0&&(0,e.jsxs)("div",{className:sn().deleteAll,style:{width:re-199-88},children:[(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(ht.Z,{indeterminate:!0}),(0,e.jsx)(Qe.Z.Text,{children:v({id:"selected.item"},{data:(d=le.selectedSuiteKeys)===null||d===void 0?void 0:d.length})}),(0,e.jsx)(ae.Z,{type:"link",onClick:Y,children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsx)(Ae.Z,{children:(0,e.jsx)(ae.Z,{onClick:Pe,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})})]}),(0,e.jsx)(Fa,{ref:Ze,callback:De})]})})}),ar=function(){var F=(0,t.YB)(),p=F.formatMessage,d=(0,it.TH)(),a=d.query,v=(0,n.useMemo)(function(){return a.test_type?a.test_type:"functional"},[a]),c=Gn(),C=function(M){t.m8.push("".concat(location.pathname,"?test_type=").concat(M))},q=(0,n.useRef)(),_=(0,n.useRef)(),A=(0,n.useRef)(),ee=function(){(v==="functional"||v==="performance")&&q.current.openCreateDrawer(),v==="business"&&_.current.openCreateDrawer(),v==="domainconf"&&A.current.openCreateDrawer()};return(0,e.jsx)(cn.Provider,{value:{domainList:c,runList:qe.ur.map(function(I){return(0,u.Z)((0,u.Z)({},I),{},{name:p({id:I.id})})}),viewType:[{id:"Type1",name:p({id:"TestSuite.view_type.type1"})},{id:"Type2",name:p({id:"TestSuite.view_type.type2"})},{id:"Type3",name:p({id:"TestSuite.view_type.type3"})}]},children:(0,e.jsxs)($t.mQ,{title:(0,e.jsxs)(st.Z,{defaultActiveKey:a.test_type||"functional",onChange:C,activeKey:v,children:[(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"functional.test"})},"functional"),(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"performance.test"})},"performance"),null,(0,e.jsx)(st.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"TestSuite.domain.conf"})},"domainconf")]}),extra:(0,e.jsx)(ae.Z,{type:"primary",onClick:ee,children:(0,e.jsx)(t._H,{id:"TestSuite.create.".concat(v)})}),children:[v!=="business"&&v!=="domainconf"&&(0,e.jsx)(Ta,{ref:q}),v==="business"&&(0,e.jsx)(nr,{ref:_}),v==="domainconf"&&(0,e.jsx)(Ra,{ref:A})]})})},rr=ar}}]);
