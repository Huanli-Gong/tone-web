(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3635],{24895:function(R){R.exports={job_test_form:"job_test_form___g0BtB",pers_select:"pers_select___zFAY6",job_test_popover:"job_test_popover___1Q0Fz",join_persbaseline:"join_persbaseline___30WIT",question_icon:"question_icon___2miSJ",previewDrawerPopover:"previewDrawerPopover___1yEcF",create_doc:"create_doc___3Qfpa",monitorDes:"monitorDes___2D0Sp"}},67164:function(R,x,e){"use strict";e.d(x,{MM:function(){return D},xA:function(){return h},Xc:function(){return E},uI:function(){return T},Dn:function(){return O}});var u=e(35832),a=e(32326),l=e(22812),D=function(){var c=(0,a.Z)((0,u.Z)().mark(function n(s){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/job/items/",{data:s}));case 1:case"end":return t.stop()}},n)}));return function(s){return c.apply(this,arguments)}}(),h=function(){var c=(0,a.Z)((0,u.Z)().mark(function n(s){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/job/type/",{method:"post",data:s}));case 1:case"end":return t.stop()}},n)}));return function(s){return c.apply(this,arguments)}}(),E=function(){var c=(0,a.Z)((0,u.Z)().mark(function n(s){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/job/type/",{params:s}));case 1:case"end":return t.stop()}},n)}));return function(s){return c.apply(this,arguments)}}(),T=function(){var c=(0,a.Z)((0,u.Z)().mark(function n(s){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/job/type/",{method:"put",data:s}));case 1:case"end":return t.stop()}},n)}));return function(s){return c.apply(this,arguments)}}(),O=function(){var c=(0,a.Z)((0,u.Z)().mark(function n(s){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/api/job/relation/",{params:s}));case 1:case"end":return t.stop()}},n)}));return function(s){return c.apply(this,arguments)}}()},12568:function(R,x,e){"use strict";e.d(x,{oG:function(){return h},_U:function(){return T},tk:function(){return c},D8:function(){return o}});var u=e(20418),a=e(35832),l=e(32326),D=e(22812);function h(t){return E.apply(this,arguments)}function E(){return E=(0,l.Z)((0,a.Z)().mark(function t(_){return(0,a.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,D.WY)("/api/job/tag/",{params:_}));case 1:case"end":return i.stop()}},t)})),E.apply(this,arguments)}function T(t){return O.apply(this,arguments)}function O(){return O=(0,l.Z)((0,a.Z)().mark(function t(_){return(0,a.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,D.WY)("/api/job/tag/",{method:"POST",data:(0,u.Z)({},_)}));case 1:case"end":return i.stop()}},t)})),O.apply(this,arguments)}function c(t,_){return n.apply(this,arguments)}function n(){return n=(0,l.Z)((0,a.Z)().mark(function t(_,p){return(0,a.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,D.WY)("/api/job/tag/",{method:"PUT",data:(0,u.Z)((0,u.Z)({},p),{tag_id:_})}));case 1:case"end":return f.stop()}},t)})),n.apply(this,arguments)}function s(t){return request("/api/auth/user/",{params:t})}var o=function(){var t=(0,l.Z)((0,a.Z)().mark(function _(p){return(0,a.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,D.WY)("/api/job/tag/",{method:"DELETE",data:p}));case 1:case"end":return f.stop()}},_)}));return function(p){return t.apply(this,arguments)}}()},86323:function(R,x,e){"use strict";var u=e(46721),a=e(94867),l=e(14320),D=e(53479),h=e(88966),E=e(11048),T=e(70772),O=e(6701),c=e(65790),n=e(17187),s=e(20693),o=e(3278),t=e(22374),_=e(24812),p=e(22812),i=e(9793),f=e(33705),m=e(52454),Y=function(Z){var J=Z.form,G=Z.label,P=Z.listName,$=Z.textName,W=Z.disabled,r=Z.radioName,H=Z.buttonShow,Q=Z.buttonText,y=Z.placeholder,L=W?{backgroundColor:"#f5f5f5"}:{},j=(0,_.TH)(),I=j.pathname;return(0,m.jsx)(n.Z.Item,{label:G,children:(0,m.jsx)(n.Z.List,{name:P,children:function(B,K){var F=K.add,V=K.remove;return(0,m.jsxs)(m.Fragment,{children:[B.map(function(M,C){return(0,m.jsxs)(D.Z,{style:!W&&H?{marginBottom:8}:{marginBottom:C!==B.length-1?8:0},children:[(0,m.jsxs)(O.Z,{span:24,style:{position:"relative"},children:[(0,m.jsx)(n.Z.Item,{noStyle:!0,name:[M.name,$],children:(0,m.jsx)(o.Z.TextArea,{style:L,readOnly:W,placeholder:y,autoSize:{minRows:3,maxRows:10}})}),!!~I.indexOf("/test_result/")&&(0,m.jsx)(f.db,{style:{right:-20},onCopy:function(){var d;return J==null||(d=J.getFieldValue(P))===null||d===void 0?void 0:d[C][$]}}),!W&&C>0&&(0,m.jsx)(i.C,{remove:V,field:M,position:{right:-20,top:0}})]}),H&&(0,m.jsx)(n.Z.Item,{label:(0,m.jsx)(p._H,{id:"job.form.execution.time"}),style:{marginBottom:B.length-1===C?0:8},name:[M.name,r],children:(0,m.jsxs)(E.ZP.Group,{disabled:W,children:[(0,m.jsx)(E.ZP,{value:"before",children:(0,m.jsx)(p._H,{id:"job.form.restart.before"})}),(0,m.jsx)(E.ZP,{value:"after",children:(0,m.jsx)(p._H,{id:"job.form.restart.after"})})]})})]},C)}),!W&&H&&(0,m.jsx)(a.Z,{type:"link",onClick:function(){return F({pos:"before"})},style:{padding:0,fontSize:12},size:"small",children:Q})]})}})})};x.Z=Y},40896:function(R,x,e){"use strict";e.d(x,{Z:function(){return Q}});var u=e(65790),a=e(17187),l=e(46721),D=e(94867),h=e(20418),E=e(39190),T=e(22374),O=e(14320),c=e(53479),n=e(13059),s=e(53676),o=e(39489),t=e(33336),_=e(20693),p=e(3278),i=e(70772),f=e(6701),m=e(69230),Y=e(33821),b=e(22812),Z=e(9793),J=e(74066),G=e(97207),P=e.n(G),$=e(24895),W=e.n($),r=e(52454),H=function(y){var L=y.field,j=y.index,I=y.disabled,N=y.remove,B=y.setFormsValueFn,K=y.typeDisabled,F=y.form,V=(0,b.YB)(),M=V.formatMessage,C=function(S){B(j,S)},A=F.getFieldsValue(),d=P().isArray(P().get(A,"monitor_info"))?P().get(A,"monitor_info"):[],g=d[j]&&d[j].monitor_type||"case_machine",v={color:"rgba(0, 0, 0, 0.45)",cursor:"pointer",transform:"translateY(0)",position:"initial"};return(0,r.jsxs)(c.Z,{gutter:10,style:{position:"relative"},children:[(0,r.jsx)(f.Z,{span:6,children:(0,r.jsx)(a.Z.Item,{name:[L.name,"monitor_type"],children:(0,r.jsxs)(Y.Z,{onChange:C,defaultValue:"case_machine",disabled:I,children:[(0,r.jsx)(Y.Z.Option,{value:"case_machine",disabled:K,children:(0,r.jsx)(b._H,{id:"job.form.case.machine"})}),(0,r.jsx)(Y.Z.Option,{value:"custom_machine",children:(0,r.jsx)(b._H,{id:"job.form.custom.machine"})})]})})}),(0,r.jsxs)(f.Z,{span:18,style:{position:"relative"},children:[g==="custom_machine"&&(0,r.jsx)(a.Z.Item,{name:[L.name,"server"],rules:[{required:!0,pattern:/^[A-Za-z0-9\._-]+$/,message:M({id:"job.form.custom.machine.message"})}],children:(0,r.jsx)(p.Z,{placeholder:"".concat(M({id:"job.form.input.machine.ip"})).concat("").concat(M({id:"job.form.address"})),allowClear:!0,disabled:I})}),j===0&&(0,r.jsx)(s.Z,{overlayStyle:{zIndex:1e4},content:(0,r.jsxs)(t.Z,{title:(0,r.jsx)(b._H,{id:"job.form.monitor.instructions"}),bordered:!0,column:1,size:"small",className:W().monitorDes,children:[(0,r.jsx)(t.Z.Item,{label:(0,r.jsx)(b._H,{id:"job.form.case.machine"}),labelStyle:{paddingTop:"5px",paddingBottom:"5px"},children:(0,r.jsx)(b._H,{id:"job.form.only.monitor.all.use.cases.machine"})}),(0,r.jsxs)(t.Z.Item,{label:(0,r.jsx)(b._H,{id:"job.form.custom.machine"}),labelStyle:{paddingTop:"5px",paddingBottom:"5px"},children:[(0,r.jsx)(b._H,{id:"job.form.users.can.enter.IP"}),"".concat(""),(0,r.jsx)(b._H,{id:"job.form.add.machine.monitoring"})]})]}),children:(0,r.jsx)(J.Z,{style:g==="custom_machine"?(0,h.Z)((0,h.Z)({},v),{},{position:"absolute",right:-20,transform:"translateY(-11px)"}):v})}),!I&&j>0&&(0,r.jsx)(Z.C,{position:g==="custom_machine"?{right:-20,top:0}:{},remove:N,field:L,deleteCallback:B})]})]},j)},Q=function(y){var L=y.disabled,j=y.template,I=y.formComponent,N=(0,b.YB)(),B=N.formatMessage,K=(0,T.useState)(!0),F=(0,E.Z)(K,2),V=F[0],M=F[1];(0,T.useEffect)(function(){if(j&&JSON.stringify(j)!=="{}"){var A=j.monitor_info,d=Array.isArray(A)?A:[],g=d.some(function(v){return v&&v.monitor_type==="case_machine"});M(g)}},[j]);var C=function(d,g){var v=P().cloneDeep(I.getFieldsValue()),U=P().isArray(P().get(v,"monitor_info"))?P().get(v,"monitor_info"):[];g&&(U[d]=(0,h.Z)((0,h.Z)({},v.monitor_info[d]),{},{monitor_type:g}),g==="case_machine"&&(U[d]=(0,h.Z)((0,h.Z)({},v.monitor_info[d]),{},{server:""})),v.monitor_info=U,I.setFieldsValue(v));var S=U.some(function(z){return z&&z.monitor_type==="case_machine"});M(S)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z.Item,{label:B({id:"job.form.monitor.config"}),className:"monitor",children:(0,r.jsx)(a.Z.List,{name:"monitor_info",children:function(d,g){var v=g.add,U=g.remove;return(0,r.jsxs)(r.Fragment,{children:[d.map(function(S,z){return(0,r.jsx)(H,{setFormsValueFn:C,field:S,index:z,disabled:L,typeDisabled:V,form:I,remove:U})}),!L&&(0,r.jsx)(D.Z,{type:"link",onClick:function(){return v({monitor_type:"custom_machine",server:""})},style:{padding:0},children:(0,r.jsx)(b._H,{id:"job.form.add.group.monitor.btn"})})]})}})})})}},70991:function(R,x,e){"use strict";e.d(x,{fp:function(){return h},yM:function(){return T},oO:function(){return O},Y_:function(){return c},CR:function(){return n},aN:function(){return s}});var u=e(35832),a=e(32326),l=e(22812),D=null,h=function(){var o=(0,a.Z)((0,u.Z)().mark(function t(_){return(0,u.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,l.WY)("/api/server/specify_test_server/",{params:_}));case 1:case"end":return i.stop()}},t)}));return function(_){return o.apply(this,arguments)}}();function E(){return request("/api/case/test_domain/")}function T(o){return(0,l.WY)("/api/server/server_tag/",{params:o})}function O(o){return(0,l.WY)("/api/server/test_server/channel/check/",{params:o})}function c(o){return(0,l.WY)("/api/server/test_cluster/",{params:o})}function n(o){return(0,l.WY)("/api/server/cloud_server/",{params:o})}function s(o){return(0,l.WY)("/api/server/test_cluster/",{params:o})}}}]);
