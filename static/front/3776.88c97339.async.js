(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3776],{77429:function(G){G.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},50130:function(G,K,n){"use strict";var f=n(63185),p=n(9676),v=n(13062),C=n(71230),ue=n(89032),L=n(15746),c=n(9715),j=n(20526),M=n(2824),Me=n(71194),B=n(50146),ce=n(20310),d=n(67294),k=n(12788),D=n(20009),g=n(16917),X=n(87735),S=n(24480),_=n(85893),F,y=(0,k.ZP)(B.Z)(F||(F=(0,ce.Z)([`
    .ant-modal-body {
        background-color: #f0f2f5;
        padding: 0;
    }

    .ant-form-item {
        margin-bottom: 0;
    }
`]))),$=function(r,o){var h=(0,D.UO)(),s=h.ws_id,q=j.Z.useForm(),de=(0,M.Z)(q,1),e=de[0],ee=(0,d.useState)(!1),N=(0,M.Z)(ee,2),Y=N[0],te=N[1],me=(0,d.useState)(null),ne=(0,M.Z)(me,2),E=ne[0],re=ne[1],fe=(0,d.useState)(!1),ae=(0,M.Z)(fe,2),se=ae[0],H=ae[1],pe=function(){te(!1),H(!1),re(null),e.resetFields()},ve=d.useState(null),oe=(0,M.Z)(ve,2),ie=oe[0],J=oe[1],he=function(){e.validateFields().then(function(x){var P={};Object.keys(x).forEach(function(w){x[w]&&(P[w==="fail_case"?"suite":w]=w==="fail_case"?"fail":1)});var I=JSON.stringify(P)!=="{}"?"?".concat((0,X.stringify)(P)):"";J("/ws/".concat(s,"/test_job/").concat(E.id,"/import").concat(I)),pe()}).catch(function(x){console.log(x)})},xe=function(){ie&&(0,S.N1)(ie)},W=j.Z.useWatch("fail_case",e),O=j.Z.useWatch("suite",e);return(0,d.useImperativeHandle)(o,function(){return{show:function(x){console.log(x),x&&re(x),te(!0),J(null)}}}),d.useEffect(function(){H(O||W)},[W,O]),(0,_.jsxs)(y,{visible:Y,width:487,title:(0,_.jsx)(g._H,{id:"ws.result.list.reRun.Modal.title"}),okText:(0,_.jsx)(g._H,{id:"operation.confirm"}),cancelText:(0,_.jsx)(g._H,{id:"operation.cancel"}),onOk:he,onCancel:pe,maskClosable:!1,afterClose:xe,children:[(0,_.jsxs)(C.Z,{style:{backgroundColor:"#fff",height:66,marginBottom:10,paddingLeft:20},align:"middle",children:[(0,_.jsx)(L.Z,{span:4,style:{color:"rgba(0,0,0,0.85)",fontWeight:600},children:(0,_.jsx)(g._H,{id:"ws.result.list.name"})}),(0,_.jsx)(L.Z,{span:18,children:E==null?void 0:E.name})]}),(0,_.jsx)(C.Z,{style:{backgroundColor:"#fff",paddingLeft:20},align:"middle",children:(0,_.jsxs)(j.Z,{form:e,children:[(0,_.jsx)(j.Z.Item,{valuePropName:"checked",name:"suite",children:(0,_.jsx)(p.Z,{onChange:function(x){var P=x.target,I=P.checked;I?e.setFieldsValue({fail_case:!1}):e.setFieldsValue({inheriting_machine:!1})},children:(0,_.jsx)(g._H,{id:"ws.result.list.reRun.checked.suite"})})}),(E==null?void 0:E.test_type)==="\u529F\u80FD\u6D4B\u8BD5"&&(0,_.jsx)(j.Z.Item,{valuePropName:"checked",name:"fail_case",children:(0,_.jsx)(p.Z,{onChange:function(x){var P=x.target,I=P.checked;I?e.setFieldsValue({suite:!1}):e.setFieldsValue({inheriting_machine:!1})},children:(0,_.jsx)(g._H,{id:"ws.result.list.reRun.checked.fail_case"})})}),(0,_.jsx)(j.Z.Item,{valuePropName:"checked",name:"notice",children:(0,_.jsx)(p.Z,{children:(0,_.jsx)(g._H,{id:"ws.result.list.reRun.checked.notice"})})}),!["pending","pending_q"].includes(E==null?void 0:E.state)&&(0,_.jsx)(j.Z.Item,{valuePropName:"checked",name:"inheriting_machine",children:(0,_.jsx)(p.Z,{disabled:!se,children:(0,_.jsx)(g._H,{id:"ws.result.list.reRun.checked.inheriting_machine"})})})]})})]})};K.Z=(0,d.forwardRef)($)},72529:function(G,K,n){"use strict";n.d(K,{gN:function(){return te},tZ:function(){return re},yQ:function(){return fe},Pc:function(){return ae},KS:function(){return ve},YV:function(){return oe},Nq:function(){return ie},JQ:function(){return x},iK:function(){return P},fD:function(){return I},QN:function(){return w},ud:function(){return Te}});var f=n(402),p=n(97272),v=n(49111),C=n(19650),ue=n(20136),L=n(55241),c=n(11849),j=n(71153),M=n(60331),Me=n(89032),B=n(15746),ce=n(13062),d=n(71230),k=n(22385),D=n(89456),g=n(20310),X=n(36017),S=n(35247),_=n(67294),F=n(77429),y=n.n(F),$=n(8212),l=n(1870),r=n(20009),o=n(16917),h=n(12788),s=n(24480),q=n(60035),de=n(10753),e=n(85893),ee,N,Y=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),te=function(t){var a=(0,r.UO)(),i=a.ws_id;return(0,e.jsxs)(S.Z,{style:{marginBottom:t.bottomHeight},children:[(0,e.jsx)(S.Z.Item,{children:(0,e.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return o.m8.push("/ws/".concat(i,"/test_result"))},children:(0,e.jsx)(o._H,{id:"ws.result.details.test.result"})})}),(0,e.jsx)(S.Z.Item,{children:(0,e.jsx)(o._H,{id:"ws.result.details.result.details"})})]})},me=new Map([["success","#81BF84"],["fail","#C84C5A"],["running","#649FF6"],["stop","#1D1D1D"],["pending","#1D1D1D"],["skip","#1D1D1D"],["warning","#faad14"]]),ne=function(t){return me.get(t)||""},E=h.ZP.span(ee||(ee=(0,g.Z)([`
    color: `,`;
    fontWeight: 500;
    text-transform: capitalize;
`])),function(u){var t=u.color;return t}),re=function(t){var a=t;return Object.prototype.toString.call(t)==="[object Boolean]"&&(a=t?"success":"fail"),(0,e.jsx)(E,{color:ne(a),children:a})},fe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(i){return i?(0,e.jsx)(de.K,{ellipsis:{tooltip:!0},children:i}):t}}},ae=function(t){var a=t.title,i=t.width,m=i===void 0?"100%":i,T=t.onEdit,V=t.access,Z=(0,_.useRef)(),Q=(0,r.UO)(),A=Q.share_id;return(0,e.jsx)("div",{ref:Z,style:{width:m},children:(0,e.jsxs)(d.Z,{style:{width:m},justify:"start",align:"middle",children:[(0,e.jsx)(D.Z,{placement:"topLeft",title:a,children:(0,e.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a||"-"})}),!A&&(0,e.jsx)($.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return V?T():(0,s.WR)()}})]})})},se=function(t){return Y.get(t)||"#D9D9D9"},H=function(t){var a=t.text,i=(0,o.YB)(),m=(0,q.oM)(i.formatMessage({id:"request.copy.success"}));return(0,e.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return m(a)},children:i.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},pe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(i){return i?_jsx(_Tooltip,{overlayClassName:styles.tootip_overflow,placement:"topLeft",title:_jsxs(_Row,{children:[_jsx(_Col,{span:24,style:{whiteSpace:"break-spaces"},children:i}),_jsx(_Col,{span:24,children:_jsx(_Row,{justify:"center",children:_jsx(H,{text:i})})})]}),children:i}):t}}},ve=function(t){var a=t.text,i=t.defaultText,m=i===void 0?"-":i;return a?(0,e.jsx)(D.Z,{overlayClassName:y().tootip_overflow,placement:"topLeft",title:(0,e.jsxs)(d.Z,{children:[(0,e.jsx)(B.Z,{span:24,style:{whiteSpace:"break-spaces"},children:a}),(0,e.jsx)(B.Z,{span:24,children:(0,e.jsx)(d.Z,{justify:"center",children:(0,e.jsx)(H,{text:a})})})]}),children:a}):m},oe=function(t){return t==="decline"?"#C84C5A":t==="normal"?"#000000":t==="increase"?"#81BF84":""},ie=function(t,a,i){return t==="decline"?(0,e.jsx)("span",{style:{color:"#C84C5A"},children:i({id:"ws.result.details.".concat(t)})}):t==="normal"?(0,e.jsx)("span",{style:{color:"#000000"},children:i({id:"ws.result.details.".concat(t)})}):t==="increase"?(0,e.jsx)("span",{style:{color:"#81BF84"},children:i({id:"ws.result.details.".concat(t)})}):a||"-"},J=(0,h.ZP)(M.Z)(N||(N=(0,g.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(u){var t=u.no_margin;return t?"margin-right: 0;":""}),he=function(t){return(0,e.jsx)(J,(0,c.Z)({},(0,c.Z)((0,c.Z)({},t),{},{collection:void 0})))},xe=function(t){var a=(0,o.YB)(),i=a.formatMessage;return(0,e.jsx)(D.Z,{title:i({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,e.jsx)(J,(0,c.Z)({},t))})},W=function(t){var a=t.title;return(0,e.jsx)(L.Z,{title:a,placement:"right",trigger:"hover",overlayClassName:y().tag_popover_style,children:(0,e.jsx)(l.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},O=function(t){var a=t.state;return(0,e.jsx)(he,(0,c.Z)((0,c.Z)({},t),{},{color:se(a),style:Y.get(a)?void 0:{color:"#1d1d1d"},children:a==="success"?"complete":a}))},b=function(t){var a=t.state;return(0,e.jsx)(xe,(0,c.Z)((0,c.Z)({},t),{},{color:se(a),style:Y.get(a)?void 0:{color:"#1d1d1d"},children:a==="success"?"complete":a}))},x=function(t){var a=(0,o.YB)(),i=a.formatMessage,m=t.state,T=t.run_state,V=T===void 0?"":T,Z=t.state_desc,Q=(0,r.UO)(),A=Q.ws_id;return m==="running"?Z?(0,e.jsxs)(C.Z,{size:0,children:[(0,e.jsx)(O,(0,c.Z)((0,c.Z)({},t),{},{children:m})),(0,e.jsx)(W,{title:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:Z.replace(/(\d+)/g,'<a href="/ws/'.concat(A,'/test_result/$1" target="_blank">$1</a>'))}})})]}):V?(0,e.jsxs)(C.Z,{size:0,children:[(0,e.jsx)(O,(0,c.Z)((0,c.Z)({},t),{},{children:m})),(0,e.jsx)(W,{title:i({id:"ws.result.details.not.assigned.server"})})]}):(0,e.jsxs)(C.Z,{size:0,children:[(0,e.jsx)(O,(0,c.Z)((0,c.Z)({},t),{},{children:m})),(0,e.jsx)(W,{title:i({id:"ws.result.details.running,please.wait"})})]}):m==="pending"&&Z?(0,e.jsxs)(C.Z,{size:0,children:[(0,e.jsx)(O,(0,c.Z)((0,c.Z)({},t),{},{children:m})),(0,e.jsx)(W,{title:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:Z.replace(/(\d+)/g,'<a href="/ws/'.concat(A,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,e.jsx)(O,(0,c.Z)({},t))},P=function(t){return(0,e.jsx)(b,(0,c.Z)((0,c.Z)({},t),{},{no_margin:1}))},I=function(t){var a=t.title,i=t.desc,m=t.placement,T=m===void 0?"bottom":m;return(0,e.jsxs)(C.Z,{children:[(0,e.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:a}),(0,e.jsx)(D.Z,{overlayClassName:y().table_question_tooltip,placement:T,arrowPointAtCenter:!0,title:i,color:"#fff",children:(0,e.jsx)(l.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},w=function(t){var a=t.title,i=t.test_value,m=t.value_list,T=t.cv_value,V=t.max_value,Z=t.min_value,Q=t.metric,A=t.result,Pe=(0,o.YB)(),De=Pe.formatMessage,Oe=(0,q.oM)(De({id:"request.copy.success"})),le=function(U){return U?new Number(U).toFixed(2):null},ge=le(V),Ee=le(Z),je=T,ye=le(i),_e=m.map(function(R){return le(R)}),z="".concat(Q," ").concat(a,`:
Avg: `).concat(ye,`
CV:  `).concat(je);z+=ge?`
Max: `.concat(ge):"",z+=Ee?`
Min: `.concat(Ee):"",z+=_e.length?`
Test Record
`:"",z+=_e.reduce(function(R,U,Re){return R.concat("(".concat(Re+1,") ").concat(U,`
`))},"");var Ce="".concat(ye,"\xB1").concat(je),Ze=function(){return A==="decline"?(0,e.jsx)("span",{className:y().result_popover_span,style:{color:"#C84C5A"},children:Ce}):A==="increase"?(0,e.jsx)("span",{className:y().result_popover_span,style:{color:"#81BF84"},children:Ce}):(0,e.jsx)("span",{className:y().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:Ce})};return(0,e.jsx)(L.Z,{overlayClassName:y().metric_list_copy,title:(0,e.jsxs)(d.Z,{justify:"space-between",children:[(0,e.jsx)("b",{children:a}),(0,e.jsx)("span",{onClick:function(){return Oe(z)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,e.jsx)(o._H,{id:"operation.copy"})})]}),content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("b",{children:"Avg\uFF1A"}),(0,e.jsx)("span",{children:ye})]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("b",{children:"CV\uFF1A"}),(0,e.jsx)("span",{children:je})]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("b",{children:"Max\uFF1A"}),(0,e.jsx)("span",{children:ge})]}),(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("b",{children:"Min\uFF1A"}),(0,e.jsx)("span",{children:Ee})]}),_e.length>0&&(0,e.jsx)(d.Z,{style:{marginTop:16},children:(0,e.jsx)("b",{children:"Test Record"})}),_e.map(function(R,U){return(0,e.jsx)(d.Z,{children:"(".concat(U+1,")").concat(R)},U)})]}),children:Ze()})},Te=function(t,a){return a&&(0,e.jsx)(B.Z,{span:24,children:(0,e.jsxs)(d.Z,{children:[(0,e.jsx)(p.Z.Text,{style:{width:70,fontWeight:600,marginRight:8},children:t}),(0,e.jsx)(p.Z.Paragraph,{style:{width:"calc( 100% - 70px - 8px)"},ellipsis:!0,children:a})]})})}},8990:function(G,K,n){"use strict";n.d(K,{Rg:function(){return C},ZD:function(){return ue},yi:function(){return L},dN:function(){return j},pi:function(){return M},nL:function(){return B},U8:function(){return k},Zj:function(){return D},LZ:function(){return g},J1:function(){return X},gQ:function(){return _},k3:function(){return y},fW:function(){return $}});var f=n(39428),p=n(3182),v=n(16917),C=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/job/state/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),ue=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/job/test/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),L=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/job/test/",{method:"delete",data:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),c=function(r){return request("/api/sys/product/",{params:r})},j=function(r){return(0,v.WY)("/api/job/collection/",{data:r,method:"post"})},M=function(r){return(0,v.WY)("/api/job/collection/",{data:r,method:"delete"})},Me=null,B=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/job/tag/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),ce=null,d=null,k=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/case/test_suite/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),D=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/job/type/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),g=function(){var l=(0,p.Z)((0,f.Z)().mark(function r(o){return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.WY)("/api/sys/project/",{params:o}));case 1:case"end":return s.stop()}},r)}));return function(o){return l.apply(this,arguments)}}(),X=function(r){return(0,v.WY)("/api/job/result/compare/suite/",{method:"post",data:r})},S=function(r){return request("/api/job/result/compare/list/",{method:"post",data:r})},_=function(r){return(0,v.WY)("/api/job/result/compare/info/",{method:"post",data:r})},F=null,y=function(r){return(0,v.WY)("/api/report/domain/group/",{method:"post",data:r})},$=function(r){return(0,v.WY)("/api/job/tag/relation/batch/",{method:"post",data:r})}}}]);
