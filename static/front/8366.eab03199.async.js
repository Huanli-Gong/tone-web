(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8366],{80876:function(X){X.exports={log_td:"log_td___3ViXg",log_table:"log_table___3W2Yo",cell:"cell___1iA9a",no_margin_line:"no_margin_line___1Z9Kp"}},46051:function(X){X.exports={picker:"picker___1AJZx",waves:"waves___x8EzR"}},6846:function(X){X.exports={warp:"warp___1iSnC",batch:"batch___3c3eO",pagination:"pagination___nMn8w",hidden:"hidden___3Wpsc",pro_table_card:"pro_table_card___37ouO"}},14552:function(X,le,e){"use strict";var F=e(22385),Y=e(89456),U=e(11849),G=e(2824),de=e(93224),je=e(20310),ae=e(67294),ce=e(12788),Q=e(60035),N=e(85893),Pe=["title","children","width","color","placement","style"],y,ue=ce.ZP.div(y||(y=(0,je.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),l=function(g){var H=g.title,We=g.children,ve=g.width,Fe=g.color,d=g.placement,Ue=d===void 0?"topLeft":d,Ie=g.style,fe=(0,de.Z)(g,Pe),a=(0,ae.useRef)(null),o=(0,ae.useState)(!1),n=(0,G.Z)(o,2),Ae=n[0],re=n[1],Le=(0,Q.CR)(),C=Le.width,r=function(){var S,w,E=a==null||(S=a.current)===null||S===void 0?void 0:S.clientWidth,$=a==null||(w=a.current)===null||w===void 0?void 0:w.scrollWidth;re(E<$)};(0,ae.useEffect)(function(){r()},[H,C]);var v=(0,N.jsx)(ue,(0,U.Z)((0,U.Z)({ref:a,style:(0,U.Z)({width:ve,color:Fe},Ie)},fe),{},{children:We||H||"-"}));return Ae?(0,N.jsx)(Y.Z,{title:H,placement:Ue,overlayStyle:{wordBreak:"break-all"},children:v}):v};le.Z=l},13958:function(X,le,e){"use strict";e.d(le,{Z:function(){return Ie}});var F=e(57338),Y=e(440),U=e(66456),G=e(79764),de=e(11849),je=e(48736),ae=e(27049),ce=e(13062),Q=e(71230),N=e(39428),Pe=e(3182),y=e(2824),ue=e(67294),l=e(16917);function b(fe){return(0,l.WY)("/api/sys/operation/log/",{params:fe})}var g=e(20009),H=e(14552),We=e(80876),ve=e.n(We),Fe=e(96486),d=e(85893),Ue=function(a){return a==="0"?(0,d.jsx)(l._H,{id:"operation.not.release"}):a==="1"?(0,d.jsx)(l._H,{id:"operation.release"}):a==="2"?(0,d.jsx)(l._H,{id:"device.failed.save"}):a==="cloud"?(0,d.jsx)(l._H,{id:"device.cloud"}):a==="cloud_efficiency"?(0,d.jsx)(l._H,{id:"device.cloud_efficiency"}):a==="cloud_ssd"?(0,d.jsx)(l._H,{id:"device.cloud_ssd"}):a==="cloud_essd"?(0,d.jsx)(l._H,{id:"device.cloud_essd"}):a},Ie=(0,ue.forwardRef)(function(fe,a){var o=fe.operation_object,n=(0,g.UO)(),Ae=n.ws_id,re=(0,l.YB)(),Le=re.formatMessage,C=(0,ue.useState)({}),r=(0,y.Z)(C,2),v=r[0],x=r[1],S=(0,ue.useState)(!1),w=(0,y.Z)(S,2),E=w[0],$=w[1],Te=(0,ue.useState)(!0),me=(0,y.Z)(Te,2),Ze=me[0],ge=me[1],he=function(){var j=(0,Pe.Z)((0,N.Z)().mark(function c(Z){var _;return(0,N.Z)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return ge(!0),be.next=3,b({operation_object:o,pid:Z,ws_id:Ae});case 3:_=be.sent,x(_||{}),ge(!1);case 6:case"end":return be.stop()}},c)}));return function(Z){return j.apply(this,arguments)}}();(0,ue.useImperativeHandle)(a,function(){return{show:function(c){$(!0),he(c)}}});var Ne=function(c){var Z=[{fieldName:"template_name",text:"\u914D\u7F6E\u540D\u79F0"},{fieldName:"release_rule",text:"\u7528\u5B8C\u91CA\u653E"},{fieldName:"manufacturer",text:"\u4E91\u5382\u5546/Ak"},{fieldName:"zone",text:"Region/Zone"},{fieldName:"instance_type",text:"\u89C4\u683C"},{fieldName:"storage_type",text:"\u6570\u636E\u76D8"},{fieldName:"image",text:"\u955C\u50CF"},{fieldName:"system_disk_category",text:"\u7CFB\u7EDF\u76D8"},{fieldName:"bandwidth",text:"\u5E26\u5BBD"},{fieldName:"extra_param",text:"\u6269\u5C55\u5B57\u6BB5"},{fieldName:"image_name",text:"\u955C\u50CF"},{fieldName:"channel_type",text:"\u63A7\u5236\u901A\u9053"},{fieldName:"ips",text:"\u673A\u5668"},{fieldName:"ip",text:"\u673A\u5668"},{fieldName:"name",text:"\u673A\u5668\u540D\u79F0"},{fieldName:"state",text:"\u4F7F\u7528\u72B6\u6001"},{fieldName:"description",text:"\u5907\u6CE8"},{fieldName:"owner",text:"Owner"},{fieldName:"tag",text:"\u6807\u7B7E"},{fieldName:"private_ip",text:"\u79C1\u7F51IP"}],_=Z.filter(function(V){return c===V.fieldName});return _.length?Le({id:"log.listName.".concat(_[0].fieldName)}):Ue(c)},J=function(c){return c.map(function(Z,_){var V="";return(0,Fe.isArray)(Z)&&!!Z.length?V=JSON.stringify(Z):V=String(Z),(0,d.jsxs)(Q.Z,{justify:"center",children:[(0,d.jsx)(Q.Z,{justify:"center",className:ve().cell,children:V&&!!V.length?(0,d.jsx)(H.Z,{title:Ne(V),width:160,children:Ne(V)}):"-"}),_!==c.length-1&&(0,d.jsx)(ae.Z,{className:ve().no_margin_line})]},_)})},De={align:"center",className:"log_td"},ye=[{title:(0,d.jsx)(l._H,{id:"log.columns.operation_type"}),align:"center",dataIndex:"operation_type"},{title:(0,d.jsx)(l._H,{id:"log.columns.edit.content"}),align:"center",children:[(0,de.Z)({title:(0,d.jsx)(l._H,{id:"log.columns.fieldName"}),render:function(c){return J(Object.keys(JSON.parse(c.new_values)))}},De),(0,de.Z)({title:(0,d.jsx)(l._H,{id:"log.columns.old_values"}),render:function(c){return J(Object.values(JSON.parse(c.old_values)))}},De),(0,de.Z)({title:(0,d.jsx)(l._H,{id:"log.columns.new_values"}),render:function(c){return J(Object.values(JSON.parse(c.new_values)))}},De)]},{title:(0,d.jsx)(l._H,{id:"log.columns.creator"}),align:"center",dataIndex:"creator"},{title:(0,d.jsx)(l._H,{id:"log.columns.gmt_created"}),align:"center",dataIndex:"gmt_created"}],Me=function(){$(!1),x({})};return(0,d.jsx)(Y.Z,{maskClosable:!1,keyboard:!1,visible:E,forceRender:!0,title:(0,d.jsx)(l._H,{id:"log.operation.title"}),onClose:Me,width:"910",children:(0,d.jsx)(G.Z,{loading:Ze,rowKey:"id",size:"small",className:ve().log_table,bordered:!0,pagination:{pageSize:v.page_size||10},columns:ye,dataSource:v.data&&v.data.filter(function(j){return j.new_values!=="{}"})})})})},87415:function(X,le,e){"use strict";e.d(le,{mQ:function(){return Q},gM:function(){return N},nU:function(){return y}});var F=e(58024),Y=e(91894),U=e(20310),G=e(12788),de,je,ae,ce,Q=(0,G.ZP)(Y.Z)(de||(de=(0,U.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),N=(0,G.ZP)(Q)(je||(je=(0,U.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),Pe=(0,G.ZP)(Y.Z)(ae||(ae=(0,U.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),y=(0,G.ZP)(Pe)(ce||(ce=(0,U.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},8366:function(X,le,e){"use strict";e.r(le),e.d(le,{ResizeTag:function(){return Qe},default:function(){return it}});var F=e(20228),Y=e(11382),U=e(13062),G=e(71230),de=e(14781),je=e(10664),ae=e(49111),ce=e(19650),Q=e(62350),N=e(24565),Pe=e(57663),y=e(71577),ue=e(34792),l=e(48086),b=e(39428),g=e(11849),H=e(3182),We=e(22385),ve=e(89456),Fe=e(71153),d=e(60331),Ue=e(402),Ie=e(97272),fe=e(91220),a=e(2824),o=e(67294),n=e(16917);function Ae(B){return re.apply(this,arguments)}function re(){return re=(0,H.Z)((0,b.Z)().mark(function B(R){return(0,b.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{params:R}));case 1:case"end":return h.stop()}},B)})),re.apply(this,arguments)}function Le(B){return C.apply(this,arguments)}function C(){return C=(0,H.Z)((0,b.Z)().mark(function B(R){return(0,b.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{method:"POST",data:(0,g.Z)({},R)}));case 1:case"end":return h.stop()}},B)})),C.apply(this,arguments)}function r(B,R){return v.apply(this,arguments)}function v(){return v=(0,H.Z)((0,b.Z)().mark(function B(R,A){return(0,b.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(R,"/"),{method:"PUT",data:(0,g.Z)({},A)}));case 1:case"end":return O.stop()}},B)})),v.apply(this,arguments)}function x(B,R){return S.apply(this,arguments)}function S(){return S=(0,H.Z)((0,b.Z)().mark(function B(R,A){return(0,b.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(R,"/"),{method:"DELETE",data:{ws_id:A}}));case 1:case"end":return O.stop()}},B)})),S.apply(this,arguments)}var w=e(6846),E=e.n(w),$=e(39067),Te=e(13958),me=e(99069),Ze=e(57119),ge=e(87415),he=e(20009),Ne=e(57338),J=e(440),De=e(47673),ye=e(4107),Me=e(9715),j=e(20526),c=e(48736),Z=e(27049),_=e(79941),V=e(19730),be=e(79508),et=e(46051),K=e.n(et),P=e(34528),pe=e.n(P),t=e(85893),ie=function(R){var A=R.value,h=R.onChange,O=(0,o.useState)(!1),D=(0,a.Z)(O,2),He=D[0],Re=D[1],Oe=(0,o.useState)(!1),p=(0,a.Z)(Oe,2),k=p[0],ze=p[1],we=(0,o.useState)({r:255,g:157,b:78,a:1}),T=(0,a.Z)(we,2),z=T[0],xe=T[1],Ee=[{r:255,g:157,b:78,a:1},{r:91,g:216,b:166,a:1},{r:91,g:143,b:249,a:1},{r:247,g:102,b:78,a:1},{r:255,g:134,b:183,a:1},{r:43,g:158,b:157,a:1},{r:146,g:112,b:202,a:1},{r:109,g:200,b:236,a:1},{r:102,g:119,b:150,a:1},{r:245,g:188,b:22,a:1},{r:231,g:107,b:242,a:1}],Se=function(){Re(!He)},se=function(){Re(!1)},Be=function(u){var I=u.rgb;xe(I);var oe="rgb(".concat(I.r,",").concat(I.g,",").concat(I.b,",").concat(I.a,")");h&&h(oe)};(0,o.useEffect)(function(){var f={r:255,g:157,b:78,a:1};if(A){var u=A.slice(4,A.length-1).split(",");f={r:Number(u[0]),g:Number(u[1]),b:Number(u[2]),a:Number(u[3])}}xe(f)},[A]);var W=function(u){xe(u),ze(!1);var I="rgb(".concat(u.r,",").concat(u.g,",").concat(u.b,",").concat(u.a,")");h&&h(I)},M=(0,_.ZP)({default:{color:{position:"relative",width:"22px",height:"22px",borderRadius:"2px",background:"rgba(".concat(z.r,", ").concat(z.g,", ").concat(z.b,", ").concat(z.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},warp:{position:"absolute",paddingTop:"16px",paddingBottom:"6px",background:"#fff",boxShadow:"-12px 0 48px 16px rgba(0,0,0,0.03), -9px 0 28px 0 rgba(0,0,0,0.05), -6px 0 16px -8px rgba(0,0,0,0.08)",borderRadius:"2px",zIndex:9999}}});return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:M.swatch,className:K().click,onClick:Se,children:(0,t.jsx)("div",{style:M.color,className:K().waves})}),He?(0,t.jsxs)("div",{style:M.popover,children:[(0,t.jsx)("div",{style:M.cover,onClick:se}),(0,t.jsxs)("div",{style:M.warp,children:[(0,t.jsxs)("div",{style:{background:"#fff",width:244,paddingLeft:"16px"},children:[Ee.map(function(f,u){return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:K().waves,style:{position:"relative",float:"left",marginRight:"16px",marginBottom:"16px",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden",background:"rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(f.a,")")},onClick:function(){return W(f)},children:JSON.stringify(z)==JSON.stringify(f)&&(0,t.jsx)(be.Z,{style:{position:"absolute",top:"5px",left:"5px",color:"#fff"}})})},u)}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:K().waves,style:{float:"left",marginRight:"16px",marginBottom:"16px",position:"relative",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden"},onClick:function(){return ze(!k)},children:[(0,t.jsx)("img",{src:pe(),style:{position:"absolute",width:"22px"}}),(0,t.jsx)("div",{style:{position:"absolute",left:"4px",top:"4px",width:"14px",height:"14px",borderRadius:"2px",background:"rgba(".concat(z.r,", ").concat(z.g,", ").concat(z.b,", ").concat(z.a,")")}})]})})]}),k&&(0,t.jsx)(Z.Z,{style:{margin:0}}),k&&(0,t.jsx)("div",{style:{padding:"6px"},children:(0,t.jsx)(V.xS,{className:K().picker,width:212,color:z,onChange:Be,presetColors:[]})})]})]}):null]})},Ve=ie,$e=/^[A-Za-z0-9\._-]{0,32}$/,tt=function(R,A){var h=R.callback,O=(0,n.YB)(),D=O.formatMessage,He=(0,he.UO)(),Re=He.ws_id,Oe=j.Z.useForm(),p=(0,a.Z)(Oe,1),k=p[0],ze=o.useState(!1),we=(0,a.Z)(ze,2),T=we[0],z=we[1],xe=o.useState(!1),Ee=(0,a.Z)(xe,2),Se=Ee[0],se=Ee[1],Be=o.useState({}),W=(0,a.Z)(Be,2),M=W[0],f=W[1];o.useImperativeHandle(A,function(){return{show:function(q){q&&(f(q||{}),k.setFieldsValue(q)),z(!0)}}});var u=function(){f({}),z(!1),se(!1),k.resetFields()},I=function(){Se||(se(!0),k.validateFields().then(function(){var q=(0,H.Z)((0,b.Z)().mark(function ee(at){var Ke,Ye,_e,ke;return(0,b.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(Ke=(0,g.Z)({ws_id:Re},at),!M.id){L.next=7;break}return L.next=4,r(M.id,Ke);case 4:L.t0=L.sent,L.next=10;break;case 7:return L.next=9,Le(Ke);case 9:L.t0=L.sent;case 10:if(Ye=L.t0,_e=Ye.code,ke=Ye.msg,_e===200){L.next=17;break}return se(!1),l.default.error(ke),L.abrupt("return");case 17:l.default.success(D({id:"operation.success"})),h(),u();case 20:case"end":return L.stop()}},ee)}));return function(ee){return q.apply(this,arguments)}}()).catch(function(){se(!1)}))};return(0,t.jsx)(J.Z,{maskClosable:!1,keyboard:!1,title:M.id?(0,t.jsx)(n._H,{id:"device.edit.tag"}):(0,t.jsx)(n._H,{id:"device.create.tag"}),width:376,onClose:u,destroyOnClose:!0,open:T,bodyStyle:{paddingBottom:80},footer:(0,t.jsxs)("div",{style:{textAlign:"right"},children:[(0,t.jsx)(y.Z,{onClick:u,style:{marginRight:8},children:(0,t.jsx)(n._H,{id:"operation.cancel"})}),(0,t.jsx)(y.Z,{onClick:I,type:"primary",htmlType:"submit",children:M.id?(0,t.jsx)(n._H,{id:"operation.update"}):(0,t.jsx)(n._H,{id:"operation.ok"})})]}),children:(0,t.jsxs)(j.Z,{layout:"vertical",form:k,initialValues:{tag_color:"rgb(255,157,78,1)"},children:[(0,t.jsx)(j.Z.Item,{name:"tag_color",label:(0,t.jsx)(n._H,{id:"device.tag_color"}),rules:[{required:!0,message:D({id:"please.select"})}],children:(0,t.jsx)(Ve,{})}),(0,t.jsx)(j.Z.Item,{name:"name",label:(0,t.jsx)(n._H,{id:"device.tag.name"}),required:!0,rules:[{validator:function(q,ee){return ee?ee.replace(/\s+/g,"")?$e.test(ee)?Promise.resolve():Promise.reject(D({id:"device.name.message"})):Promise.reject(D({id:"device.tag.name.message"})):Promise.reject(D({id:"device.tag.name.message"}))}}],children:(0,t.jsx)(ye.Z,{placeholder:D({id:"please.enter"}),autoComplete:"off"})}),(0,t.jsx)(j.Z.Item,{name:"description",label:(0,t.jsx)(n._H,{id:"device.description"}),children:(0,t.jsx)(ye.Z.TextArea,{rows:3,placeholder:D({id:"device.description.placeholder"})})})]})})},Je=o.forwardRef(tt),Ce=e(10753),Ge=e(85450),Qe=function(R){var A=R.name,h=R.tag_color,O=o.useRef(),D=o.useRef(),He=o.useState(),Re=(0,a.Z)(He,2),Oe=Re[0],p=Re[1],k=o.useState(!1),ze=(0,a.Z)(k,2),we=ze[0],T=ze[1],z=o.useState(!1),xe=(0,a.Z)(z,2),Ee=xe[0],Se=xe[1];o.useEffect(function(){var W=O.current.offsetParent;if(!!W){var M=new ResizeObserver(function(f){var u=(0,fe.Z)(f),I;try{for(u.s();!(I=u.n()).done;){var oe=I.value;if(oe.contentRect){var q=oe.contentRect.width;p(q)}}}catch(ee){u.e(ee)}finally{u.f()}});return M.observe(W),function(){M.unobserve(W)}}},[]),o.useEffect(function(){if(!!D.current){var W=D.current,M=W.scrollWidth,f=W.clientWidth;Se(f<M)}},[Oe]);var se=function(){Ee&&T(!0)},Be=function(){T(!1)};return(0,t.jsx)("div",{ref:O,onMouseOver:se,onMouseLeave:Be,children:(0,t.jsx)(ve.Z,{title:A,open:we,children:(0,t.jsx)(d.Z,{color:h,style:{marginRight:0},children:(0,t.jsx)(Ie.Z.Text,{ref:D,ellipsis:!0,style:{maxWidth:Oe-20,color:h&&"#fff"},children:A})})})})},nt=function(){var R=(0,n.YB)(),A=R.formatMessage,h=(0,he.UO)(),O=h.ws_id,D=(0,n.md)(),He={ws_id:O,page_num:1,page_size:10},Re=(0,o.useState)({}),Oe=(0,a.Z)(Re,2),p=Oe[0],k=Oe[1],ze=o.useState(He),we=(0,a.Z)(ze,2),T=we[0],z=we[1],xe=o.useState(!1),Ee=(0,a.Z)(xe,2),Se=Ee[0],se=Ee[1],Be=(0,o.useState)(),W=(0,a.Z)(Be,2),M=W[0],f=W[1],u=(0,o.useState)(!0),I=(0,a.Z)(u,2),oe=I[0],q=I[1],ee=(0,o.useRef)(),at=function(){var m=(0,H.Z)((0,b.Z)().mark(function i(){var s,te,ne=arguments;return(0,b.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return s=ne.length>0&&ne[0]!==void 0?ne[0]:T,q(!0),Xe.next=4,Ae((0,g.Z)({},s));case 4:te=Xe.sent,te&&k(te.code!==200?{}:te),q(!1);case 7:case"end":return Xe.stop()}},i)}));return function(){return m.apply(this,arguments)}}();(0,o.useEffect)(function(){at()},[T,M]);var Ke=function(i,s){z(function(te){return(0,g.Z)((0,g.Z)({},te),{},{page_num:i,page_size:s})})},Ye=(0,o.useRef)(),_e=(0,o.useCallback)(function(m){Ye.current.show(m)},[]),ke=function(){var i;(i=ee.current)===null||i===void 0||i.show()},rt=function(){f(new Date().getTime())},L=function(i){var s;(s=ee.current)===null||s===void 0||s.show(i)},st=function(){var m=(0,H.Z)((0,b.Z)().mark(function i(s){return(0,b.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,x(s.id,O);case 2:l.default.success(A({id:"operation.success"})),f(new Date().getTime());case 4:case"end":return ne.stop()}},i)}));return function(s){return m.apply(this,arguments)}}(),ot=[{title:(0,t.jsx)(n._H,{id:"device.tag.name"}),dataIndex:"name",width:170,filterDropdown:function(i){var s=i.confirm;return(0,t.jsx)($.Z,{confirm:s,autoFocus:Se,onConfirm:function(ne){return z(function(qe){return(0,g.Z)((0,g.Z)({},qe),{},{page_num:1,name:ne})})}})},ellipsis:{showTitle:!1},onFilterDropdownVisibleChange:function(i){i&&se(!Se)},filterIcon:function(){return(0,t.jsx)(me.Z,{style:{color:T!=null&&T.name?"#1890ff":void 0}})},render:function(i,s){return(0,t.jsx)(Qe,(0,g.Z)({},s))}},{title:(0,t.jsx)(n._H,{id:"device.description"}),dataIndex:"description",ellipsis:{showTitle:!1},width:100,filterIcon:function(){return(0,t.jsx)(me.Z,{style:{color:T!=null&&T.description?"#1890ff":void 0}})},filterDropdown:function(i){var s=i.confirm;return(0,t.jsx)($.Z,{confirm:s,autoFocus:Se,onConfirm:function(ne){return z(function(qe){return(0,g.Z)((0,g.Z)({},qe),{},{page_num:1,description:ne})})}})},onFilterDropdownVisibleChange:function(i){i&&se(!Se)},render:function(i,s){return(0,t.jsx)(Ce.K,{ellipsis:{tooltip:!0},children:s.description})}},{title:(0,t.jsx)(n._H,{id:"device.create_user"}),dataIndex:"create_user",width:90,ellipsis:{showTitle:!1},render:function(i){return(0,t.jsx)(Ce.K,{ellipsis:{tooltip:!0},children:i||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.update_user"}),dataIndex:"update_user",ellipsis:{showTitle:!1},width:90,render:function(i){return(0,t.jsx)(Ce.K,{ellipsis:{tooltip:!0},children:i||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.gmt_created"}),dataIndex:"gmt_created",width:200,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(Ce.K,{ellipsis:{tooltip:!0},children:s.gmt_created}):"-"}},{title:(0,t.jsx)(n._H,{id:"device.gmt_modified"}),dataIndex:"gmt_modified",width:200,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(Ce.K,{ellipsis:{tooltip:!0},children:s.gmt_modified}):"-"}},{title:(0,t.jsx)(n._H,{id:"Table.columns.operation"}),valueType:"option",dataIndex:"id",width:150,render:function(i,s){return s.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"&&(0,t.jsxs)(ce.Z,{children:[(0,t.jsx)(n.Nv,{accessible:D.WsMemberOperateSelf(),children:(0,t.jsxs)(ce.Z,{children:[(0,t.jsx)(y.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return L(s)},children:(0,t.jsx)(n._H,{id:"operation.edit"})}),(0,t.jsx)(N.Z,{title:(0,t.jsx)("div",{style:{color:"red"},children:(0,t.jsx)(n._H,{id:"device.tag.delete.tips"})}),placement:"topRight",okText:(0,t.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,t.jsx)(n._H,{id:"operation.confirm.delete"}),onCancel:function(){return st(s)},icon:(0,t.jsx)(Ze.Z,{style:{color:"red"}}),overlayStyle:{width:"300px"},children:(0,t.jsx)(y.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,t.jsx)(n._H,{id:"operation.delete"})})})]})}),(0,t.jsx)(y.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return _e(s.id)},children:(0,t.jsx)(n._H,{id:"operation.log"})})]})}}];return(0,t.jsxs)(ge.gM,{title:(0,t.jsx)(n._H,{id:"device.dispatch.tag"}),extra:(0,t.jsx)(n.Nv,{accessible:D.WsMemberOperateSelf(),children:(0,t.jsxs)(y.Z,{type:"primary",onClick:ke,children:[" ",(0,t.jsx)(n._H,{id:"device.create.tag"})," "]},"3")}),children:[(0,t.jsxs)(Y.Z,{spinning:oe,children:[(0,t.jsx)(Ge.sL,{name:"ws-device-dispatch-list",refreshDeps:[p,T],loading:oe,scroll:{x:"100%"},size:"small",className:E().pro_table_card,columns:ot,dataSource:(p==null?void 0:p.data)||[],pagination:!1,rowKey:"id"}),(0,t.jsxs)(G.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,t.jsx)("div",{className:p!=null&&p.total?"":E().hidden,children:A({id:"pagination.total.strip"},{data:(p==null?void 0:p.total)||0})}),(0,t.jsx)(je.Z,{size:"small",className:p!=null&&p.total?"":E().hidden,showQuickJumper:!0,showSizeChanger:!0,current:T.page_num,defaultCurrent:1,onChange:function(i,s){return Ke(i,s)},onShowSizeChange:function(i,s){return Ke(i,s)},total:(p==null?void 0:p.total)||0})]})]}),(0,t.jsx)(Te.Z,{ref:Ye,operation_object:"machine_server_tag"}),(0,t.jsx)(Je,{ref:ee,callback:rt})]})},it=nt},85450:function(X,le,e){"use strict";e.d(le,{sL:function(){return Le},ny:function(){return Ae},Fu:function(){return re}});var F=e(11849),Y=e(2824),U=e(93224),G=e(32059),de=e(66456),je=e(79764),ae=e(86582),ce=e(19273),Q=e(20310),N=e(67294),Pe=e(1706),y=e(12788),ue=e(57392),l=e(85893),b=["width","onResizeStart","onResize","onResizeStop","resize"],g=["columns","name","onColumnsChange"],H,We,ve,Fe=y.ZP.div(H||(H=(0,Q.Z)([`
    position: relative;
    width: 100%;
`]))),d=y.ZP.div.attrs(function(C){return{style:{left:C.left,height:C==null?void 0:C.height}}})(We||(We=(0,Q.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),Ue=(0,y.ZP)(Pe.Resizable)(ve||(ve=(0,Q.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(C){var r=C.resize;return r?"col-resize":"default"}),Ie=function(r){var v=r.width,x=r.onResizeStart,S=r.onResize,w=r.onResizeStop,E=r.resize,$=(0,U.Z)(r,b);return(0,l.jsx)(Ue,(0,F.Z)((0,F.Z)({width:v||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:x,onResize:S,onResizeStop:w,resize:E?1:0},$),{},{children:(0,l.jsx)("th",(0,F.Z)({},$))}))},fe=function(r){var v=r.columns,x=v===void 0?[]:v,S=r.name,w=r.onColumnsChange,E=(0,U.Z)(r,g),$=N.useState(0),Te=(0,Y.Z)($,2),me=Te[0],Ze=Te[1],ge=N.useState(0),he=(0,Y.Z)(ge,2),Ne=he[0],J=he[1],De=N.useState(!1),ye=(0,Y.Z)(De,2),Me=ye[0],j=ye[1],c=N.useRef(null),Z=(0,ue.Z)(c),_=function(P){return function(pe,t){var ie;if((0,ce.Z)(t),!!x[P].ellipsis){var Ve=pe.clientX,$e=Ve-((ie=c.current)===null||ie===void 0?void 0:ie.getBoundingClientRect().x);J($e),Ze($e),j(!0)}}},V=function(){return function(P){var pe,t=P.clientX,ie=t-((pe=c.current)===null||pe===void 0?void 0:pe.getBoundingClientRect().x);Ze(ie)}},be=function(P){return function(pe,t){var ie,Ve=t.size,$e=pe.clientX,tt=$e-((ie=c.current)===null||ie===void 0?void 0:ie.getBoundingClientRect().x),Je=(0,ae.Z)(x);if(Je[P].ellipsis){var Ce=Ve.width+=tt-Ne,Ge=Je[P],Qe=Ge.dataIndex,nt=Ge.key;Ce>20&&(Je[P]=(0,F.Z)((0,F.Z)({},Je[P]),{},{width:Ce}),S&&re(S,Qe||nt,Ce),w==null||w())}Ze(0),J(0),j(!1)}},et=N.useMemo(function(){return x.reduce(function(K,P){return P.width?K+=P==null?void 0:P.width:K},0)},[x]);return(0,l.jsxs)(Fe,{ref:c,className:"resize-table-wrapper",children:[(0,l.jsx)(je.Z,(0,F.Z)((0,F.Z)({},E),{},{components:{header:{cell:Ie}},scroll:(r==null?void 0:r.scroll)||{x:et||(Z==null?void 0:Z.width)},columns:x.filter(Boolean).map(function(K,P){return(0,F.Z)((0,F.Z)({},K),{},{onHeaderCell:function(t){return{resize:!!K.ellipsis,width:t.width,onResizeStart:_(P),onResize:V(),onResizeStop:be(P)}}})})})),Me&&(0,l.jsx)(d,{height:Z==null?void 0:Z.height,left:me||Ne})]})},a=fe,o=["name","columns","refreshDeps","onColumnsChange"],n="umi_locale",Ae=function(r,v){var x=localStorage.getItem(r),S=localStorage.getItem(n)||"zh-CN";if(!!x)return JSON.parse(x)["".concat(S,"-").concat(v)]},re=function(r,v,x){var S=localStorage.getItem(r),w=localStorage.getItem(n)||"zh-CN",E=(0,G.Z)({},"".concat(w,"-").concat(v),x);S?localStorage.setItem(r,JSON.stringify(Object.assign(JSON.parse(S),E))):localStorage.setItem(r,JSON.stringify(E))},Le=function(r){var v=r.name,x=r.columns,S=r.refreshDeps,w=S===void 0?[]:S,E=r.onColumnsChange,$=(0,U.Z)(r,o),Te=N.useState([]),me=(0,Y.Z)(Te,2),Ze=me[0],ge=me[1],he=function(){return(x==null?void 0:x.filter(Boolean).map(function(J){var De=J.dataIndex,ye=J.key,Me=J.width,j=De||ye,c=Ae(v,j);!c&&Me&&re(v,j,Me);var Z=c||Me;return Z&&(J.width=Z),J}))||[]};return N.useEffect(function(){ge(he())},w),(0,l.jsx)(a,(0,F.Z)({name:v,columns:Ze,setColumns:ge,size:"small",onColumnsChange:function(){E==null||E(),ge(he())}},$))}},34528:function(X){X.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAABUlJREFUWAnVmT1yHDcQhRvAzO7yR1U2HbGKsUPzCsxUOoIPYGVWyBs4YSiXE/kAOoJSXcE+A8uM7Mgkd2d3Bv5eA6Ak+wCEUYttoAcYPDw0enowwUjXf15fzPu/b1JYrkZbzqNlW4W9Sa7DglxsEw+WkNKnkO3YilxHJPqTKjeS9DnluvoP02RxzhbuZwuHxdLDbEY9Pe4tSL9Fr/rDwfVxWrxu24OFhf77cGfz8jHldB3ePN4OPwL2cZp+G4KdWQ4MHkw/umkuyJK4NcMLglnmbwm6TkEKihL/SWrYEoOXzii4qe6mbODXBFrySait2pDzPJ9T/j7vdy/z26PLYX+INxbGs8zNI8wFgxHaRxud2cSdEqVdhh2Vw+B3OjCYJrcwIt34j9SEqUApANBoxoDSNb8yoxCgPQpIjdQDOe5KO2MVNAEW0gHHic6owrSc2fbxZpgtXelGS4iMtlTmyj0NncZTEnz1FCEixpxhALMqkbJUrW1rUhqqRvJlKUVvrcZ00rJ7R64Hb6M6ZdfXa2pb2l8Nkw3nDOkDRtYg5PDhaLV6/dM3N7fl9s/zz/JfzNP+HTb9ysFqRRY7jzAMq9o2JRtgb54ZrCjSBkur8bWDbQwj4z4e2aQc1ljvyn7uAGxbU4F2Wxe71eYHOS1tCN9SbpeteSfyM3bF9jCFYwCz2aJ8ga52luQ9BAuPoo0mL+EcF6fVGVjB+TfDu7hxhof8f2E4Djwo8K/4QAyjP4rl+DGFxvSwJSrwZz6PmuL+O8P8uQ3Dp9vw4gHOyEOjY4bbptvFU2f2sEx9MrytJiE/LC9R/HAmUINhhUe9JdmwYCkL8EN84cymTHzq1t0Z4vsC9AmwwnIBbeFfZ3CfmPUwUQxvK8NT0/SG+LEyrE1HGhb8sOLQZstF3dF/3WxurWL43k4cXerRfoWsMVz9AV5Crzy6AvweQTe3ViGGsNO7SK0h8jo5/KJ7/v88fsnikJeGr8nnB/kFgoPeJT+lYXwoFb35Kk1FdPOf118XS/V3fs4pQnUXDriC7gatgMSRP4DpjRqQQ6q7sFfAefNVAbzwjAbzEPyggYnUaEiT6io1hgmChXgY27O6MN4VVoHJazGME555gmAWg8puDi2y7w1ywoYVp0OogD/ZcGqPwM4A59ULB2qHyrB7CZlDY7ozwNYY1gklTA+81DnYjEn0GL/nEYYFjnNnB9yiyn69BLFOxkMsmABBz5BqcOE2LF1nKa9OAcsZtJvGjB8WSNlvpyZhxOs6p7alPJI/2TB1d2+dMWyJeB0bzhwJFxuuDHNQ7Ez3hteS2BUqAWbvBU5WlIeav3ubL3oBnV/9epGHY8vjMUg3nmOU/das8m6ydz2AFthpPrzTw9jZTTCceP/89pf8ByZyLjcn4JGAWHKgrgmskAl5VOtHXPe6VgT9CdGeS7wN5152ynWXO3Y0a3lsD3x5OthxvGdRZ773FXnCWV5ip6+NOgOu4pbwhuv+fXDmeyBfs/QoZvl1fm17Bsz5Tm0+CpjbCVJl5cZ6kt3UrLI/05FPelSKo7Rhn0JUtSNVQakc0ZS6Wpej8/JyptdfjiP5GiV92UqCGCgXnfTadCHGjwOWcb3f20smdCaQ8scaeIXXECgxLUbHyvBGerVrkhE0Qf+GpyHpo9ySjmiUdWCu4bXEqh8chN5wdC6t/mtA62sfx2a0ltS09nzGkExj+GuV0nX8/U24HRe7BOR78h3tCrsakbIzSdFBCUjN0gu4J8oC6W+Fuv6UXFNrKhemSzftekGRDkk/6QVVuiJhP4Q7pvF+k9Jl+PDD7T9Qqao1PwZEZwAAAABJRU5ErkJggg=="}}]);
