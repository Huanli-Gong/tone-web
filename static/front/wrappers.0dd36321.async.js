(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5275],{88989:function(R,h,r){"use strict";r.r(h);var l=r(35832),t=r(20418),E=r(32326),T=r(22374),p=r(24812),v=r(22812),Z=r(20049),C=r(29197),m=r(39935);h.default=function(L){var U=L.children,M=(0,p.TH)(),A=(0,p.UO)(),s=A.ws_id,O=(0,v.tT)("@@initialState"),d=O.initialState,P=O.setInitialState,y=d.authList,I=d.fetchHistory,D=function(){return(0,C.xP)({ws_id:s}).then(function(){var f=(0,E.Z)((0,l.Z)().mark(function i(a){var u;return(0,l.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:u=a.code,u===200&&P(function(o){return(0,t.Z)((0,t.Z)({},o),{},{authList:(0,t.Z)((0,t.Z)({},o.authList),{},{first_entry:!1}),fetchHistory:!0})});case 2:case"end":return _.stop()}},i)}));return function(i){return f.apply(this,arguments)}}())},g=function(){var c=(0,E.Z)((0,l.Z)().mark(function f(){var i,a,u,n,_,o,w,b;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y,a=y.ws_id,!(!a||a!==s)){e.next=16;break}return e.next=5,(0,Z.Z9)({ws_id:s});case 5:if(u=e.sent,n=u.data,P((0,t.Z)((0,t.Z)({},d),{},{authList:(0,t.Z)((0,t.Z)({},n),{},{ws_id:s})})),i=n,D(),!(n.first_entry&&n.ws_role_title==="ws_owner")){e.next=13;break}return v.m8.push("/ws/".concat(s,"/workspace/initSuccess")),e.abrupt("return");case 13:if(n){e.next=16;break}return(0,m.CT)(500),e.abrupt("return");case 16:if(I||D(),_=i,o=_.ws_role_title,w=_.ws_is_exist,b=_.sys_role_title,w){e.next=20;break}return e.abrupt("return",(0,m.CT)(404));case 20:if(!(b!=="sys_admin"&&!o)){e.next=22;break}return e.abrupt("return",(0,m.CT)(401));case 22:case"end":return e.stop()}},f)}));return function(){return c.apply(this,arguments)}}();return(0,T.useEffect)(function(){[404,401,500].map(function(c){return"/ws/".concat(s,"/").concat(c)}).includes(M.pathname)||g()},[M.pathname,s]),U}}}]);
