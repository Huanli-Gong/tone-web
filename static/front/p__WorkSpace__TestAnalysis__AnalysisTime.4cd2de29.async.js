(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3005,2485],{28645:function(We,De,t){"use strict";t.d(De,{Z:function(){return A}});var se=t(45972),J=t(22374),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},xe=Pe,ce=t(25078),ne=function(Ae,ae){return J.createElement(ce.Z,(0,se.Z)((0,se.Z)({},Ae),{},{ref:ae,icon:xe}))};ne.displayName="PlusCircleOutlined";var A=J.forwardRef(ne)},3741:function(We){We.exports={selectMertricTable:"selectMertricTable___2Bj7A",checkboxAllStyle:"checkboxAllStyle___1teqH",selectItem:"selectItem___1oTDh",selectItemName:"selectItemName___1_fIG",activeStyle:"activeStyle___30xWh",select_inner_span:"select_inner_span___1QlbI",select_left_title:"select_left_title___399WJ",selectTable:"selectTable___9NvaM",formInlineStyles:"formInlineStyles___3Z0fP",table_question_tooltip:"table_question_tooltip___3JYrj"}},80139:function(We){We.exports={timeAnalysisTabs:"timeAnalysisTabs___123JK",timeAnalysisExtraBtnContent:"timeAnalysisExtraBtnContent___2QpVD",btnActive:"btnActive___jxnp0"}},86252:function(We){We.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},35487:function(){},12568:function(We,De,t){"use strict";t.d(De,{oG:function(){return ce},_U:function(){return A},tk:function(){return Ae},D8:function(){return q}});var se=t(20418),J=t(35832),Pe=t(32326),xe=t(22812);function ce(m){return ne.apply(this,arguments)}function ne(){return ne=(0,Pe.Z)((0,J.Z)().mark(function m(l){return(0,J.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.abrupt("return",(0,xe.WY)("/api/job/tag/",{params:l}));case 1:case"end":return ve.stop()}},m)})),ne.apply(this,arguments)}function A(m){return Se.apply(this,arguments)}function Se(){return Se=(0,Pe.Z)((0,J.Z)().mark(function m(l){return(0,J.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.abrupt("return",(0,xe.WY)("/api/job/tag/",{method:"POST",data:(0,se.Z)({},l)}));case 1:case"end":return ve.stop()}},m)})),Se.apply(this,arguments)}function Ae(m,l){return ae.apply(this,arguments)}function ae(){return ae=(0,Pe.Z)((0,J.Z)().mark(function m(l,ge){return(0,J.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,xe.WY)("/api/job/tag/",{method:"PUT",data:(0,se.Z)((0,se.Z)({},ge),{tag_id:l})}));case 1:case"end":return oe.stop()}},m)})),ae.apply(this,arguments)}function i(m){return request("/api/auth/user/",{params:m})}var q=function(){var m=(0,Pe.Z)((0,J.Z)().mark(function l(ge){return(0,J.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",(0,xe.WY)("/api/job/tag/",{method:"DELETE",data:ge}));case 1:case"end":return oe.stop()}},l)}));return function(ge){return m.apply(this,arguments)}}()},59862:function(We,De,t){"use strict";t.r(De),t.d(De,{default:function(){return ja}});var se=t(70772),J=t(6701),Pe=t(54905),xe=t(90087),ce=t(14320),ne=t(53479),A=t(88966),Se=t(11048),Ae=t(26388),ae=t(488),i=t(20418),q=t(35832),m=t(32326),l=t(39190),ge=t(16832),ve=t(69827),oe=t(41428),c=t(22374),Qe=t(526),rt=t(80139),vt=t.n(rt),H=t(22812),ye=t(24812),Ot=t(57359),Oe=t(34423),bt=t(46721),G=t(94867),a=t(40118),ee=t(29966),de=t(79625),be=t(96584),Ce=t(69230),ue=t(33821),$e=t(81138),Ie=t(96146),Je=t(65790),fe=t(17187),Ne=t(39489),Ue=t(33336),He=t(25399),Q=t.n(He),Me=t(97939),Xe=t(40204),Fe=t(10724),it=t(11407),ze=t(68077),Re=t(88018),st=t(58414),ot=t(20693),he=t(3278),v=t(31650),V=t(25100),re=t(39935),_e=function(n){return(0,H.WY)("/api/job/result/perf/analysis/",{data:n,method:"post"})},Be=function(n){return(0,H.WY)("/api/job/result/func/analysis/",{data:n,method:"post"})},Ke=function(n){return(0,H.WY)("/api/job/result/perf/analysis/",{params:n})},qe=function(n){return(0,H.WY)("/api/job/result/func/analysis/",{params:n})},ft=function(n){return(0,H.WY)("/api/sys/project/",{params:n})},mt=function(n){return request("/api/get/analytics/tags/",{params:n})},At=function(n){return(0,H.WY)("/api/case/workspace/case/",{params:n})},Qt=function(n){return request("/api/case/test_metric/",{params:n})},It=function(n){return(0,H.WY)("/api/job/test/editor/note/",{data:n,method:"post"})},e=t(52454),Ct=(0,c.forwardRef)(function(h,n){var s=(0,H.YB)(),o=s.formatMessage,p=h.show_type,r=h.test_type,B=h.onOk,b=fe.Z.useForm(),I=(0,l.Z)(b,1),j=I[0],O=(0,c.useState)(!1),Z=(0,l.Z)(O,2),C=Z[0],N=Z[1],T=(0,c.useState)({suite_name:"",conf_name:""}),W=(0,l.Z)(T,2),u=W[0],P=W[1],S=(0,c.useState)(!1),d=(0,l.Z)(S,2),g=d[0],y=d[1],U=function(){N(!1),P(void 0),y(!1),j.resetFields()};(0,c.useImperativeHandle)(n,function(){return{show:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;console.log(_),N(!0),_!==!1&&(P(_),j.setFieldsValue({note:_.note}))},hide:U}});var X=function(){g||(y(!0),j.validateFields().then(function(){var _=(0,m.Z)((0,q.Z)().mark(function K(M){var f,x,E,$,L,w;return(0,q.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return f=M.note,x="perf_analysis",r!=="performance"&&(x="func_case_analysis",p==="pass_rate"&&(x="func_conf_analysis")),E={editor_obj:x,note:f},r==="performance"?E.test_job_id=u.job_id:E.result_obj_id=u.result_obj_id,k.next=7,It(E);case 7:if($=k.sent,L=$.code,w=$.msg,y(!1),L===200){k.next=13;break}return k.abrupt("return",(0,re.EV)(L,w));case 13:B(),U();case 15:case"end":return k.stop()}},K)}));return function(K){return _.apply(this,arguments)}}()).catch(function(_){console.log(_),y(!1)}))};return(0,e.jsxs)(st.Z,{maskClosable:!1,keyboard:!1,width:376,title:(0,e.jsx)(H._H,{id:"analysis.edit.note"}),open:C,onClose:U,bodyStyle:{padding:0},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(G.Z,{onClick:U,children:(0,e.jsx)(H._H,{id:"operation.cancel"})}),(0,e.jsx)(G.Z,{type:"primary",onClick:X,children:(0,e.jsx)(H._H,{id:"operation.update"})})]})}),children:[u&&(0,e.jsxs)(ne.Z,{style:{marginBottom:10,background:"#fff",padding:20,borderBottom:"10px solid #f0f2f5"},children:[(0,e.jsx)(V.Z.Text,{style:{width:70,fontWeight:600,marginRight:8},children:(0,e.jsx)(H._H,{id:"analysis.job.name"})}),(0,e.jsx)(V.Z.Paragraph,{style:{width:"calc( 100% - 70px - 8px)",marginBottom:0},ellipsis:!0,children:u.job_name})]}),(0,e.jsx)(fe.Z,{form:j,layout:"vertical",style:{background:"#fff",padding:20,height:"calc( 100% - 94px )"},children:(0,e.jsx)(fe.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.annotations"}),name:"note",children:(0,e.jsx)(he.Z.TextArea,{rows:8,placeholder:o({id:"analysis.annotations.placeholder"})})})})]})}),jt=t(78358),Zt=t(94649),St=(0,c.memo)(function(h){var n=(0,ye.UO)(),s=n.ws_id,o=h.refresh,p=h.dataSource,r=h.test_type,B=h.show_type,b=(0,c.useRef)(null),I=(0,H.md)(),j=function(C){b.current.show(C)},O=[{title:(0,e.jsx)(H._H,{id:"analysis.table.column.id"}),dataIndex:"job_id"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.name"}),dataIndex:"job_name",render:function(C,N){return(0,e.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(location.origin,"/ws/").concat(s,"/test_result/").concat(N.job_id),children:C})}},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.server"}),dataIndex:"server",render:function(C,N){return(0,e.jsx)(Zt.Z,{val:C,param:N.server_id,provider:N.server_provider})}},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.creator"}),dataIndex:"creator"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.startTime"}),dataIndex:"start_time"},{title:(0,e.jsx)(H._H,{id:"analysis.table.column.emdTime"}),dataIndex:"end_time"},I.WsTourist()&&{title:(0,e.jsx)(H._H,{id:"analysis.table.column.note"}),dataIndex:"note",render:function(C,N){return(0,e.jsx)(jt.Pc,{title:C,width:135+28-20,access:I.WsMemberOperateSelf(N.creator_id),onEdit:function(){return j(N)}})}}].filter(Boolean);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Fe.Z,{style:{width:"100%",marginTop:10},children:(0,e.jsx)(ze.Z,{rowKey:"job_id",columns:O,pagination:!1,dataSource:p,size:"small"})}),(0,e.jsx)(Ct,{ref:b,ws_id:s,show_type:B,test_type:r,onOk:o})]})}),lt=t(20507),ke=t(2605);function z(h,n){return n?"".concat(h,"\uFF1A").concat(n,"<br />"):""}function ct(h,n,s){return n?"".concat(h,": <a href=","/ws/".concat(s,"/test_result/").concat(n),' target="_blank">#').concat(n,"</a><br />"):""}function Ye(h){return h?"\u6D4B\u8BD5\u673A\u5668: <span>".concat(h,"</span><br />"):""}var et=function(n,s){return"".concat(s===""?"\u89C4\u683C : ".concat(n.seriesName,`<br />
                    Image: `).concat(n.seriesName,`<br />
                    Bandwidth: `).concat(n.seriesName,`<br />
                    RunMode: `).concat(n.seriesName,"<br />"):"")};function Ft(h,n){for(var s=0,o=0,p=h.length;o<p;o++)if(h[o]===n&&(s++,s>1))return!0;return!1}var _n=["rgb(216, 124, 124)","rgb(145, 158, 139)","rgb(215, 171, 130)","rgb(110, 112, 116)","rgb(97, 160, 168)","rgb(239, 161, 141)","rgb(120, 116, 100)","rgb(204, 126, 99)","rgb(114, 78, 88)","rgb(75, 86, 91)","rgb(221, 107, 102)","rgb(117, 154, 160)","rgb(230, 157, 135)","rgb(141, 193, 169)","rgb(234, 126, 83)","rgb(238, 221, 120)","rgb(115, 163, 115)","rgb(115, 185, 188)","rgb(114, 137, 171)","rgb(145, 202, 140)","rgb(244, 159, 66)","rgb(81, 107, 145)","rgb(89, 196, 230)","rgb(237, 175, 218)","rgb(147, 183, 227)","rgb(165, 231, 240)","rgb(203, 176, 227)","rgb(137, 52, 72)","rgb(217, 88, 80)","rgb(235, 129, 70)","rgb(255, 178, 72)","rgb(242, 214, 67)","rgb(235, 219, 164)","rgb(78, 163, 151)","rgb(34, 195, 170)","rgb(123, 217, 165)","rgb(208, 100, 138)","rgb(245, 141, 178)","rgb(242, 179, 201)","rgb(63, 177, 227)","rgb(107, 230, 193)","rgb(98, 108, 145)","rgb(160, 167, 230)","rgb(196, 235, 173)","rgb(150, 222, 232)","rgb(252, 151, 175)","rgb(135, 247, 207)","rgb(247, 244, 148)","rgb(114, 204, 255)","rgb(247, 197, 160)","rgb(212, 164, 235)","rgb(210, 245, 166)","rgb(118, 242, 242)","rgb(193, 35, 43)","rgb(39, 114, 123)","rgb(252, 206, 16)","rgb(232, 124, 37)","rgb(181, 195, 52)","rgb(254, 132, 99)","rgb(155, 202, 99)","rgb(250, 216, 96)","rgb(243, 164, 59)","rgb(96, 192, 221)","rgb(215, 80, 75)","rgb(198, 229, 121)","rgb(244, 224, 1)","rgb(240, 128, 90)","rgb(38, 192, 192)","rgb(46, 199, 201)","rgb(182, 162, 222)","rgb(90, 177, 239)","rgb(255, 185, 128)","rgb(216, 122, 128)","rgb(141, 152, 179)","rgb(229, 207, 13)","rgb(151, 181, 82)","rgb(149, 112, 109)","rgb(220, 105, 170)","rgb(7, 162, 164)","rgb(154, 127, 209)","rgb(88, 141, 213)","rgb(245, 153, 78)","rgb(192, 80, 80)","rgb(89, 103, 140)","rgb(201, 171, 0)","rgb(126, 176, 10)","rgb(111, 85, 83)","rgb(193, 64, 137)","rgb(224, 31, 84)","rgb(0, 24, 82)","rgb(245, 232, 200)","rgb(184, 210, 199)","rgb(198, 179, 142)","rgb(164, 216, 194)","rgb(243, 217, 153)","rgb(211, 117, 143)","rgb(220, 195, 146)","rgb(46, 71, 131)","rgb(130, 182, 233)","rgb(255, 99, 71)","rgb(160, 146, 241)","rgb(10, 145, 93)","rgb(234, 248, 137)","rgb(102, 153, 255)","rgb(255, 102, 102)","rgb(60, 179, 113)","rgb(213, 177, 88)","rgb(56, 182, 182)","rgb(193, 46, 52)","rgb(230, 182, 0)","rgb(0, 152, 217)","rgb(43, 130, 29)","rgb(0, 94, 170)","rgb(51, 156, 168)","rgb(205, 168, 25)","rgb(50, 164, 135)","rgb(138, 124, 168)","rgb(224, 152, 199)","rgb(143, 211, 232)","rgb(113, 102, 158)","rgb(204, 112, 175)","rgb(124, 180, 204)"],xn=function(n,s,o){var p=[{value:"Fail",color:"#C84C5A"},{value:"Skip",color:"#D9D9D9"},{value:"Pass",color:"#81BF84"}],r=Object.keys(n).map(function(O){var Z=n[O];return(0,i.Z)((0,i.Z)({},Z),{},{value:Z==null?void 0:Z.result,date:O})}),B=p.map(function(O){return{type:"custom",name:O.value,itemStyle:{color:O.color},data:r.map(function(Z){return Z.value===O.value?[Z.date,Z.value,Z]:[Z.date,void 0,Z]}),renderItem:function(C,N){var T=C.seriesName,W=C.coordSys,u=N.coord([N.value(0),N.value(1)]),P=u[0],S=u[1],d={width:40,height:W.height/3},g={fill:p.filter(function(K){return K.value===T})[0].color};P=P-d.width/2;var y,U,X;T==="Skip"&&(d={width:40,height:10},S=S-d.height/2),T==="Pass"&&(S=S-d.height,U=P+d.width/2,X=S-3,y="M ".concat(U," ").concat(X," L ").concat(U-5," ").concat(X-6," L ").concat(U+5," ").concat(X-6)),T==="Fail"&&(U=P+d.width/2,X=S+d.height+3,y="M ".concat(U," ").concat(X," L ").concat(U-5," ").concat(X+6," L ").concat(U+5," ").concat(X+6));var te=[{type:"rect",shape:(0,i.Z)({x:P,y:S},d),style:g}],_=Math.round(W.width/6);return te=te.concat(new Array(_).fill("").reduce(function(K,M,f){return K.concat({type:"line",shape:{x1:W.x+f*6,y1:W.y+W.height/2,x2:W.x+f*6+4,y2:W.y+W.height/2},silent:!0,style:{stroke:"#595959",fill:"#595959",lineWidth:1}})},[])),T!=="Skip"&&te.push({type:"path",shape:{pathData:y,x:P,y:S},style:g}),{type:"group",children:te}}}}),b=25,I=["Pass","Skip","Fail"],j={grid:{left:"3%",right:30},legend:{icon:"rect",itemHeight:6,itemWidth:15,top:"5%",data:I.map(function(O){return{name:O,textStyle:{color:p.filter(function(Z){return Z.value===O})[0].color}}})},dataZoom:r.length>b?[{type:"slider",show:!0,zoomLock:!0,start:0,end:parseInt(b/r.length*100),left:"20%",right:"20%"}]:void 0,yAxis:{type:"category",data:I.map(function(O){return{value:O,textStyle:{color:p.filter(function(Z){return Z.value===O})[0].color}}}),splitNumber:2,axisTick:{show:!1},axisLine:{show:!1}},xAxis:{type:"category",date:r.map(function(O){return O.date})},tooltip:{enterable:!0,trigger:"item",backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(Z){var C=Z.data[2];return`<div style="margin-right:10px">
                        `.concat(Z.marker," ").concat(Z.name,` <br />
                        `).concat(ct("JobID",C.job_id,s),`
                        `).concat(z("commit",C.commit),`
                        `).concat(z(o({id:"analysis.table.column.note"}),C.note),`
                    </div>`)}},series:(0,ke.Z)(B)};return j},bn=xn;function Cn(h,n){for(var s=0,o=0,p=h.length;o<p;o++)if(h[o]===n&&(s++,s>1))return!0;return!1}function gt(h,n){var s=h+"",o=s.length,p=s.substring(o-1,o);return p=="5"?(p="6",s=s.substring(0,o-1)+p,(s-0).toFixed(n)):(+h).toFixed(n)}var jn=function(n){var s=n.dataSource,o=n.ws_id,p=n.provider,r=n.formatMessage,B=s||{},b=B.result_data,I=B.baseline_data,j={};if(b&&JSON.stringify(b)!=="{}"){var O=[],Z=[],C=[],N=[],T=[],W={};Object.keys(b).forEach(function(P){var S=b[P];Object.keys(S).forEach(function(d){var g=S[d];if(g){var y=gt(+g.value,2);W[d]=W[d]?[].concat((0,ke.Z)(W[d]),[y]):[y]}})}),Object.keys(b).forEach(function(P){C.push({name:P});var S={type:"line",smooth:!0},d={lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none"},g=(0,i.Z)((0,i.Z)({},S),{},{symbolSize:8,connectNulls:!1,name:P,z:9999,opacity:1}),y=(0,i.Z)((0,i.Z)((0,i.Z)({},S),d),{},{name:"U",areaStyle:{color:"#ccc"}}),U=(0,i.Z)((0,i.Z)((0,i.Z)({},S),d),{},{name:"D",areaStyle:{color:"#fff",opacity:1},z:100}),X=[],te=[],_=[];Object.keys(b[P]).forEach(function(K){var M=b[P][K];if(Z.push(K),M){var f=gt(+M.value,2),x=(0,i.Z)((0,i.Z)({},M),{},{date:K,value:f});M.note&&(x.symbol="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z"),JSON.stringify(W)!=="{}"&&Cn(W[K],f)&&(x.symbol="circle",x.itemStyle={color:"#000"}),X.push(x);var E=M.cv_value.replace("\xB1","").replace("%","")*100/100/100,$=gt((1+E)*f,2),L=gt((1-E)*f,2);te.push({date:K,value:$}),_.push({date:K,value:L})}else X.push({date:K,value:null}),te.push({date:K,value:null}),_.push({date:K,value:null})}),N.push((0,i.Z)((0,i.Z)({},y),{},{data:te})),T.push((0,i.Z)((0,i.Z)({},U),{},{data:_})),O.push((0,i.Z)((0,i.Z)({},g),{},{data:X}))}),Z=Array.from(new Set(Z));var u={type:"line",name:r({id:"analysis.baseline.avg"}),itemStyle:{color:"#2FC25B"}};I.value&&(C.push({name:r({id:"analysis.baseline.avg"}),icon:"path://M802,720C802.5523071289062,720,803,720.4476928710938,803,721C803,721.5523071289062,802.5523071289062,722,802,722L798,722C797.4476928710938,722,797,721.5523071289062,797,721C797,720.4476928710938,797.4476928710938,720,798,720L802,720ZM810,720C810.5523071289062,720,811,720.4476928710938,811,721C811,721.5523071289062,810.5523071289062,722,810,722L806,722C805.4476928710938,722,805,721.5523071289062,805,721C805,720.4476928710938,805.4476928710938,720,806,720L810,720ZM818,720C818.5523071289062,720,819,720.4476928710938,819,721C819,721.5523071289062,818.5523071289062,722,818,722L814,722C813.4476928710938,722,813,721.5523071289062,813,721C813,720.4476928710938,813.4476928710938,720,814,720L818,720Z"}),u={type:"line",name:r({id:"analysis.baseline.avg"}),symbol:"none",tooltip:{show:!1},lineStyle:{width:1,color:"#2FC25B",type:"dashed"},itemStyle:{color:"#2FC25B"},data:Z.map(function(P){return{date:P,value:gt(I.value,2)}}),z:100}),j={legend:{icon:"rect",itemHeight:2,itemWidth:10,data:C,top:"5%"},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(S){var d=S.reduce(function(g,y){var U=y.data||{};if(!U.value)return g;var X=`<div style="margin-right:10px">
                                `.concat(y.marker," ").concat(y.name,` <br />
                                `).concat(ct("JobID",U.job_id,o),`
                                `).concat(z("commit",U.commit),`
                                `).concat(z("Avg",U.value),`
                                `).concat(z("CV",U.cv_value),`
                                `).concat(z(r({id:"analysis.baseline.value"}),I.value&&Number(I.value).toFixed(2)),`
                                `).concat(z(r({id:"analysis.baseline.cv"}),I.cv_value),`
                                `).concat(z("commit",U.commit),`
                                `).concat(Ye(S.seriesName),`
                                `).concat(et(S,p),`
                                `).concat(z(r({id:"analysis.table.column.note"}),U.note),`
                            </div>`).trim();return g.concat('<div style="display:flex;">'.concat(X,"</div>"))},"");return d.length===0?"":'<div style="display:flex;flex-direction:row;gap:8px;max-width:545px;flex-wrap:wrap;">'.concat(d,"<div>")}},grid:{left:"5%",right:60,bottom:"10%"},xAxis:{type:"category",data:Z,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}},axisPointer:{z:100},min:"dataMin",max:"dataMax",splitArea:{areaStyle:["#fff","#fff"]},axisLabel:{formatter:function(S){var d=(parseInt(S)+"").length;if(d>6){var g=new Map([[1,r({id:"analysis.wan"})],[2,r({id:"analysis.yi"})],[3,r({id:"analysis.zhao"})]]),y=parseInt(d/4);return gt(S/Math.pow(1e4,y),2)+g.get(y)}return S}},zlevel:100},series:[].concat(N,T,[u],O)}}return j},Zn=jn,Sn=function(n,s,o){var p=Object.keys(n).map(function(r){return n[r]?(0,i.Z)((0,i.Z)({},n[r]),{},{date:r,pass_rate:Number(n[r].pass_rate*100)}):{date:r,pass_rate:null}});return{dataset:[{source:p}],xAxis:{type:"category",splitLine:{show:!1}},legend:{icon:"line",itemHeight:2,itemWidth:10,top:"5%"},grid:{left:"5%",right:60,bottom:"10%"},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value} %",showMaxLabel:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{type:"line",name:o({id:"analysis.TestConf.pass_rate"}),symbol:"circle",encode:{x:"date",y:"pass_rate"},smooth:!0,symbolSize:8,itemStyle:{color:"#2FC25B"}}],tooltip:{trigger:"item",axisPointer:{snap:!0,type:"cross"},backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},enterable:!0,extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(B){var b=B.data;return`<div>
                    `.concat(B.marker," ").concat(b.start_time,` <br />
                    `).concat(ct("JobID",b.job_id,s),`
                    `).concat(z("commit",b.commit),`
                    `).concat(o({id:"analysis.pass_rate"}),": ").concat(Number(b.pass_rate).toFixed(2),`%<br />
                    `).concat(z(o({id:"analysis.table.total"}),b.all_case),`
                    `).concat(z(o({id:"analysis.pass_num"}),b.pass_case),`
                    `).concat(z(o({id:"analysis.table.column.note"}),b.note),`
                </div>`)}}}},wn=Sn,Mn=function(n){var s=n.dataSource,o=n.ws_id,p=n.formatMessage,r=s||{},B=r.result_data,b=r.baseline_data,I={};if(B&&JSON.stringify(B)!=="{}"){var j=[],O=[],Z=["Metric"],C=[],N={type:"line",name:"Metric",smooth:!0},T=(0,i.Z)((0,i.Z)({},N),{},{symbolSize:8,connectNulls:!1});Object.keys(B).forEach(function(u){var P=B[u];if(O.push(u),P){var S=Number(Number(P.value).toFixed(2)),d=(0,i.Z)((0,i.Z)({},P),{},{date:u,value:S});P.note&&(d.symbol="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z"),C.push(d)}else C.push({date:u,value:null})}),j.push((0,i.Z)((0,i.Z)({},T),{},{data:C})),O=Array.from(new Set(O));var W={type:"line",name:p({id:"analysis.baseline.avg"}),itemStyle:{color:"#2FC25B"}};b.value&&(Z.push({name:p({id:"analysis.baseline.avg"}),icon:"path://M802,720C802.5523071289062,720,803,720.4476928710938,803,721C803,721.5523071289062,802.5523071289062,722,802,722L798,722C797.4476928710938,722,797,721.5523071289062,797,721C797,720.4476928710938,797.4476928710938,720,798,720L802,720ZM810,720C810.5523071289062,720,811,720.4476928710938,811,721C811,721.5523071289062,810.5523071289062,722,810,722L806,722C805.4476928710938,722,805,721.5523071289062,805,721C805,720.4476928710938,805.4476928710938,720,806,720L810,720ZM818,720C818.5523071289062,720,819,720.4476928710938,819,721C819,721.5523071289062,818.5523071289062,722,818,722L814,722C813.4476928710938,722,813,721.5523071289062,813,721C813,720.4476928710938,813.4476928710938,720,814,720L818,720Z"}),W={type:"line",name:p({id:"analysis.baseline.avg"}),symbol:"none",tooltip:{show:!1},lineStyle:{width:1,color:"#2FC25B",type:"dashed"},itemStyle:{color:"#2FC25B"},data:O.map(function(u){return{date:u,value:b.value}})}),I={legend:{icon:"line",itemHeight:2,itemWidth:10,data:Z,top:"5%"},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function(P){var S=P[0].data||{},d=`<div style="margin-right:10px">
                            `.concat(P[0].marker," ").concat(P[0].name,` <br />
                            `).concat(ct("JobID",S.job_id,o),`
                            `).concat(z("commit",S.commit),`
                            `).concat(z("Avg",S.value),`
                            `).concat(z("CV",S.cv_value),`
                            `).concat(z(p({id:"analysis.baseline.value"}),b.value&&Number(b.value).toFixed(2)),`
                            `).concat(z(p({id:"analysis.baseline.cv"}),b.cv_value),`
                            `).concat(z("commit",S.commit),`
                            `).concat(Ye(S.server),`
                            `).concat(z(p({id:"analysis.specs"}),S.instance_type),`
                            `).concat(z("Image",S.image),`
                            `).concat(z("Bandwidth",S.bandwidth),`
                            `).concat(z("RunMode",S.run_mode),`
                            `).concat(z(p({id:"analysis.table.column.note"}),S.note),`
                        </div>`).trim();return'<div style="display:flex;">'.concat(d,"</div>")}},grid:{left:"5%",right:60,bottom:"10%"},xAxis:{type:"category",data:O,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}}},series:[].concat(j,[W])}}return I},En=Mn,Jt,Gt,Bt=Me.ZP.div(Jt||(Jt=(0,oe.Z)([`
    width: 100%;
    font-size: 16px;
    font-weight: 500;
    color:  rgba(0,0,0,0.85);
    line-height: 43px;
    height: 43px;
    border-bottom: 1px solid #E9E9E9;
    text-indent: 1em;
`]))),Ln=(0,Me.ZP)(Fe.Z)(Gt||(Gt=(0,oe.Z)([`
    height: 360px;
    /* margin-top: 10px; */
    width: 100%;
    .ant-card-body {
        padding: 0 20px;
        border: none;
    }
`]))),On=function(n){var s=(0,H.YB)(),o=s.formatMessage,p=n.dataSource,r=n.title,B=n.provider_env,b=n.test_type,I=n.show_type,j=(0,ye.UO)(),O=j.ws_id,Z=(0,c.useRef)(),C=(0,c.useState)(void 0),N=(0,l.Z)(C,2),T=N[0],W=N[1];return c.useEffect(function(){var u=lt.S1(Z.current);return u.clear(),u.showLoading(),T&&JSON.stringify(T)!=="{}"&&(b==="performance"&&(B==="aliyun"?u.setOption(En({dataSource:T,ws_id:O,formatMessage:o})):u.setOption(Zn({dataSource:T,ws_id:O,formatMessage:o}))),b==="functional"&&(I==="result_trend"&&u.setOption(bn(T,O,o)),I==="pass_rate"&&u.setOption(wn(T,O,o))),u.on("click","series.line",function(P){var S=P.data;if(S){var d=S.job_id;d&&(0,re.N1)("/ws/".concat(O,"/test_result/").concat(d))}})),u.hideLoading(),function(){u.dispose()}},[T,o,B,I,b,O]),(0,c.useEffect)(function(){W(void 0)},[B,b,I]),(0,c.useEffect)(function(){W(p||void 0)},[p]),(0,e.jsxs)(Ln,{children:[b==="performance"&&(0,e.jsx)(Bt,{children:r}),b==="functional"&&I==="result_trend"&&(0,e.jsx)(Bt,{children:(0,e.jsx)(H._H,{id:"analysis.chart.title.passRate"})}),b==="functional"&&I==="pass_rate"&&(0,e.jsx)(Bt,{children:(0,e.jsx)(H._H,{id:"analysis.chart.title.resultTrend"})}),(0,e.jsx)("div",{ref:Z,style:{width:"100%",height:360-48}})]})},Pn=(0,c.memo)(On),Tn=t(12568),Sa=t(67515),Rn=t(12238),wa=t(67448),$t=t(47548),Dn=t(97207),An=t.n(Dn),In=t(3741),tt=t.n(In),Xt=c.createContext({metrics:[]}),qt=function(){return c.useContext(Xt)},Fn=function(n){var s;return Object.prototype.toString.call(n==null?void 0:n.metric)==="[object Array]"?n==null?void 0:n.metric:Object.prototype.toString.call(n==null?void 0:n.metric)==="[object String]"?n==null||(s=n.metric)===null||s===void 0?void 0:s.split(","):[]},Bn=function(n){var s=n.suiteList,o=n.projectId,p=n.test_type,r=n.provider_env,B=n.onChange,b=n.basicValues,I=(0,ye.TH)(),j=I.query,O=(0,H.YB)(),Z=O.formatMessage,C=function(R){if(p==="performance"){if(b)return b[R];if(r===(j==null?void 0:j.provider_env)&&j[R])return j[R]}},N=qt(),T=N.setMetrics,W=c.useState(+C("test_suite_id")||void 0),u=(0,l.Z)(W,2),P=u[0],S=u[1],d=c.useState(+C("test_case_id")||void 0),g=(0,l.Z)(d,2),y=g[0],U=g[1],X=c.useState([]),te=(0,l.Z)(X,2),_=te[0],K=te[1],M=c.useState(C("metric")||Fn(j)),f=(0,l.Z)(M,2),x=f[0],E=f[1],$=c.useState(!1),L=(0,l.Z)($,2),w=L[0],F=L[1];c.useEffect(function(){s.length>0&&S(+C("test_suite_id")||(s==null?void 0:s[0].id))},[s,j]);var k=An().debounce(function(){var D=(0,m.Z)((0,q.Z)().mark(function R(Ee){var je,ut;return(0,q.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return F(!0),Ee.project_id=o||j.project_id,nt.next=4,Ke(Ee);case 4:je=nt.sent,ut=je.data,K(ut||[]),F(!1);case 8:case"end":return nt.stop()}},R)}));return function(R){return D.apply(this,arguments)}}(),500,{trailing:!0});c.useEffect(function(){T(_)},[_]);var ie=c.useMemo(function(){for(var D=s.length,R=0;R<D;R++)if(s[R].id===P){if(s[R].test_case_list.length>0){var Ee=y||s[R].test_case_list[0].id;return k({test_suite_id:s[R].id,test_case_id:Ee}),y||U(Ee),s[R].test_case_list}return[]}return[]},[P,s,p]);return c.useEffect(function(){B==null||B({activeSuite:P,activeConf:y,metricList:_,selectMetric:x})},[P,y,_,x]),(0,e.jsxs)(ne.Z,{style:{height:400},children:[(0,e.jsx)(J.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(J.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(ue.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(R){K([]),S(R),U(null),E([])},placeholder:"\u8BF7\u9009\u62E9Test Suite",value:P,filterOption:function(R,Ee){var je;return((je=Ee.label)===null||je===void 0?void 0:je.toLowerCase().indexOf(R.toLowerCase()))>=0},showSearch:!0,options:s.map(function(D){return{value:D.id,label:D.name}})})]})}),(0,e.jsx)(J.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Conf:"}),(0,e.jsx)(ue.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(R){U(R),E([]),k({test_suite_id:P,test_case_id:R})},filterOption:function(R,Ee){var je;return((je=Ee.label)===null||je===void 0?void 0:je.toLowerCase().indexOf(R.toLowerCase()))>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Conf",value:y,options:ie.map(function(D){return{value:D.id,label:D.name}})})]})})]})}),(0,e.jsx)(J.Z,{span:24,style:{height:350},children:(0,e.jsx)(ze.Z,{dataSource:_,columns:[{dataIndex:"",title:Z({id:"analysis.metric"})}],rowKey:function(R){return R},size:"small",scroll:{y:320},loading:w,rowSelection:{selectedRowKeys:x,onChange:function(R){E(R)}},onRow:function(R){return{onClick:function(){x.includes(R)?E(x.filter(function(je){return je!==R})):E(x.concat(R))}}},className:tt().selectTable,pagination:!1})})]})},$n=Bn,Nn=function(n){var s=n.suiteList,o=n.test_type,p=n.isFetching,r=n.onChange,B=n.basicValues,b=(0,ye.TH)(),I=b.query,j=function(g){if(o==="functional"){if(B)return B[g];if(I[g])return I[g]}},O=c.useState(+j("test_suite_id")||void 0),Z=(0,l.Z)(O,2),C=Z[0],N=Z[1],T=c.useState(+j("test_case_id")||void 0),W=(0,l.Z)(T,2),u=W[0],P=W[1];c.useEffect(function(){s.length>0&&N(+j("test_suite_id")||(s==null?void 0:s[0].id))},[s,I]),c.useEffect(function(){r==null||r({activeSuite:C,activeConf:u})},[C,u]);var S=c.useMemo(function(){for(var d=s.length,g=0;g<d;g++)if(s[g].id===C){if(s[g].test_case_list.length>0){var y=u||s[g].test_case_list[0].id;return u||P(y),s[g].test_case_list}return[]}return[]},[C,s,o]);return(0,e.jsxs)(ne.Z,{style:{height:400},children:[(0,e.jsx)(J.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(ue.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(g){N(g),P(null)},filterOption:function(g,y){var U;return((U=y.label)===null||U===void 0?void 0:U.toLowerCase().indexOf(g==null?void 0:g.toLowerCase()))>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Suite",value:C,options:s.map(function(d){return{value:d.id,label:d.name}})})]})}),(0,e.jsx)(J.Z,{span:24,style:{height:350},children:(0,e.jsx)(ze.Z,{dataSource:S,columns:[{dataIndex:"name",title:"Test Conf"}],rowKey:"id",size:"small",loading:p,scroll:{y:320},className:tt().selectTable,rowSelection:{type:"radio",selectedRowKeys:[u],onChange:function(g){return P(g[0])}},onRow:function(g){return{onClick:function(){P(g.id)}}},pagination:!1})})]})},Wn=Nn,Un=function(n){var s=n.suiteList,o=n.test_type,p=n.isFetching,r=n.show_type,B=n.onChange,b=n.basicValues,I=(0,ye.TH)(),j=I.query,O=function(f){if(o==="functional"){if(b)return b[f];if(j[f])return j[f]}},Z=(0,H.QT)(qe,{manual:!0,initialData:[]}),C=Z.data,N=Z.run,T=c.useState(+O("test_suite_id")||void 0),W=(0,l.Z)(T,2),u=W[0],P=W[1],S=c.useState(+O("test_case_id")||void 0),d=(0,l.Z)(S,2),g=d[0],y=d[1],U=c.useState(O("sub_case_name")||void 0),X=(0,l.Z)(U,2),te=X[0],_=X[1];c.useEffect(function(){s.length>0&&P(+O("test_suite_id")||(s==null?void 0:s[0].id))},[s,j]),c.useEffect(function(){B==null||B({activeSuite:u,activeConf:g,selectSubcase:te})},[u,g,te]);var K=c.useMemo(function(){for(var M=s.length,f=0;f<M;f++)if(s[f].id===u){if(s[f].test_case_list.length>0){var x=g||s[f].test_case_list[0].id;return N({test_case_id:x,test_suite_id:u}),g||y(x),s[f].test_case_list}return[]}return[]},[u,s,o]);return(0,e.jsxs)(ne.Z,{style:{height:400},children:[(0,e.jsx)(J.Z,{span:24,style:{marginBottom:10},children:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(J.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Suite:"}),(0,e.jsx)(ue.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(f){P(f),y(null),_([])},placeholder:"\u8BF7\u9009\u62E9Test Suite",value:u,filterOption:function(f,x){var E;return((E=x.label)===null||E===void 0?void 0:E.toLowerCase().indexOf(f.toLowerCase()))>=0},showSearch:!0,options:s.map(function(M){return{value:M.id,label:M.name}})})]})}),(0,e.jsx)(J.Z,{span:12,children:(0,e.jsxs)(ne.Z,{align:"middle",children:[(0,e.jsx)("span",{style:{width:76,display:"inline-block"},children:"Test Conf:"}),(0,e.jsx)(ue.Z,{style:{width:"calc(100% - 91px - 8px)"},onChange:function(f){y(f),o!=="performance"&&r!=="pass_rate"&&N({test_case_id:f,test_suite_id:u}),_([])},filterOption:function(f,x){return x.label.toLowerCase().indexOf(f.toLowerCase())>=0},showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Test Conf",value:g,options:K.map(function(M){return{value:M.id,label:M.name}})})]})})]})}),(0,e.jsx)(J.Z,{span:24,style:{height:350},children:(0,e.jsx)(ze.Z,{dataSource:C,columns:[{dataIndex:"",title:"Test Case"}],rowKey:function(f){return f},size:"small",loading:p,scroll:{y:320},className:tt().selectTable,rowSelection:{type:"radio",selectedRowKeys:[te],onChange:function(f){_(f.at(0))}},onRow:function(f){return{onClick:function(){_(f)}}},pagination:!1})})]})},Hn=Un,zn=function(n,s){var o=n.test_type,p=n.projectId,r=n.provider_env,B=n.onOk,b=n.show_type,I=(0,ye.UO)(),j=I.ws_id,O=c.useState(!1),Z=(0,l.Z)(O,2),C=Z[0],N=Z[1],T=c.useState({}),W=(0,l.Z)(T,2),u=W[0],P=W[1],S=c.useState(void 0),d=(0,l.Z)(S,2),g=d[0],y=d[1],U=(0,H.QT)(function(){return At({test_type:o,ws_id:j,page_num:1,page_size:200})},{initialData:[],refreshDeps:[o,j]}),X=U.data,te=U.loading;c.useImperativeHandle(s,function(){return{show:function(){var w=(0,m.Z)((0,q.Z)().mark(function k(ie){return(0,q.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:N(!0),y(ie);case 2:case"end":return R.stop()}},k)}));function F(k){return w.apply(this,arguments)}return F}()}});var _=c.useCallback(function(){N(!1),P({})},[]),K=c.useMemo(function(){var w=u.selectMetric;return o==="performance"?"Metric".concat(w!=null&&w.length?"(".concat(w==null?void 0:w.length,")"):""):b==="pass_rate"?"Test Conf":"Test Case"},[o,b,u]),M=c.useMemo(function(){var w=u.selectMetric,F=u.selectSubcase,k=u.activeConf;return o==="performance"?(w==null?void 0:w.length)>0:b!=="pass_rate"?(F==null?void 0:F.length)>0:k||!1},[o,b,u]),f=c.useMemo(function(){for(var w=X.length,F=0;F<w;F++)if(X[F].id===(u==null?void 0:u.activeSuite))return X[F].name},[X,u]),x=c.useMemo(function(){for(var w=X.length,F=0;F<w;F++)if(X[F].id===(u==null?void 0:u.activeSuite))return X[F].test_case_list.length>0?X[F].test_case_list:[];return[]},[X,u]),E=c.useMemo(function(){for(var w=x.length,F=0;F<w;F++)if(x[F].id===(u==null?void 0:u.activeConf))return x[F].name},[x,u]),$=function(){var F=u.activeSuite,k=u.activeConf,ie=u.selectMetric,D=u.selectSubcase,R={test_suite_id:F};o==="performance"&&(R.test_case_id=k,R.metric=ie,R.title="".concat(f,"/").concat(E)),o==="functional"&&(R.test_case_id=k,R.title="".concat(f,"/").concat(E),b!=="pass_rate"&&(R.sub_case_name=D,R.test_case_id=k,R.title="".concat(f,"/").concat(E))),B(R),_()};c.useEffect(function(){return function(){y(void 0)}},[]);var L={test_type:o,show_type:b,basicValues:g,projectId:p,provider_env:r,loading:te,suiteList:X,onChange:function(F){P(function(k){return(0,i.Z)((0,i.Z)({},k),F)})}};return(0,e.jsx)(Rn.Z,{title:K,width:940,open:C,onCancel:_,destroyOnClose:!0,footer:(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(G.Z,{onClick:_,children:(0,e.jsx)(H._H,{id:"operation.cancel"})}),(0,e.jsx)(G.Z,{type:"primary",onClick:$,disabled:!M,children:(0,e.jsx)(H._H,{id:"operation.ok"})})]}),children:(0,e.jsxs)($t.Z,{spinning:te,children:[o==="performance"&&(0,e.jsx)($n,(0,i.Z)({},L)),o!=="performance"&&(b==="pass_rate"?(0,e.jsx)(Wn,(0,i.Z)({},L)):(0,e.jsx)(Hn,(0,i.Z)({},L)))]})})},Kn=c.forwardRef(zn),kn=t(74066),en,tn,nn,an=Me.ZP.div(en||(en=(0,oe.Z)([`
    width: 100%;
    font-size: 16px;
    font-weight: 500;
    color:  rgba(0,0,0,0.85);
    line-height: 43px;
    height: 43px;
    border-bottom: 1px solid #E9E9E9;
    text-indent: 1em;
`]))),Nt=(0,Me.ZP)(Fe.Z)(tn||(tn=(0,oe.Z)([`
    /* height: 360px; */
    /* margin-top: 10px; */
    width: 100%;
    .ant-card-body {
        padding: 0 20px;
        border: none;
    }
`]))),rn=Me.ZP.div(nn||(nn=(0,oe.Z)([`
    width: 100%;
    height: `,`px;
`])),360-48),sn,on,Wt=Me.ZP.div.attrs(function(h){return{style:{borderStyle:h!=null&&h.isBaseline?"dashed":"solid",borderColor:h.borderColor}}})(sn||(sn=(0,oe.Z)([`
    height: 0;
    width: 10px;
    border-width: 1px;
`]))),ln="rgba(0,0,0, .35)",Yn=(0,Me.ZP)(Oe.Z).attrs(function(h){return{className:h.state?"":"legend_un_select"}})(on||(on=(0,oe.Z)([`
    cursor: pointer;
    &.legend_un_select {
        .ant-typography {
            color: `,`;
        }
        `,` {
            border-color: `,` !important;
        }
    }
`])),ln,Wt,ln),Vn=function h(n){var s,o,p=n.name,r=n.chartRef,B=n.isBaseline,b=n.isStandalone,I=n.source,j=n.provider_env,O=c.useState(!0),Z=(0,l.Z)(O,2),C=Z[0],N=Z[1],T=function(){r==null||r.dispatchAction({type:"legendToggleSelect",name:p})},W=function(P){var S=P.selected;N(S[p])};return c.useEffect(function(){if(!!r&&!!p)return r.on("legendselectchanged",{seriesName:p},W),function(){r.off("legendselectchanged",{seriesName:p},W)}},[r]),b?(0,e.jsx)(Oe.Z,{size:[24,0],wrap:!0,children:I==null?void 0:I.map(function(u){return(0,e.jsx)(h,(0,i.Z)((0,i.Z)({},u),{},{chartRef:r,provider_env:j}),u.name)})}):(0,e.jsxs)(Yn,{direction:"vertical",size:0,onClick:T,state:C,children:[(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(Wt,{isBaseline:B?1:0,borderColor:r==null||(s=r.getModel())===null||s===void 0?void 0:s.getColorFromPalette(p)}),(0,e.jsx)(V.Z.Text,{style:{fontSize:10},ellipsis:!0,children:p})]}),j==="aliyun"&&(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(Wt,{isBaseline:1,borderColor:r==null||(o=r.getModel())===null||o===void 0?void 0:o.getColorFromPalette(p)}),(0,e.jsx)(V.Z.Text,{style:{fontSize:10},children:"\u57FA\u7EBFAVG\u503C"})]})]})},cn=Vn,Ma=t(87967),Qn=t(65320),Jn=t(28645),Gn=t(93299),un,dn,Xn=(0,Me.ZP)(Oe.Z)(un||(un=(0,oe.Z)([`
    background: #fff;
    width: 322px;
`]))),qn=(0,Me.ZP)(ze.Z)(dn||(dn=(0,oe.Z)([`
    .record-row-hide {
        display: none;
    }
`]))),ea=function(n){var s=n.fetchData,o=n.onChange,p=qt(),r=p.metrics,B=c.useState({}),b=(0,l.Z)(B,2),I=b[0],j=b[1],O=c.useState(!1),Z=(0,l.Z)(O,2),C=Z[0],N=Z[1],T=c.useState((s==null?void 0:s.metric)||[]),W=(0,l.Z)(T,2),u=W[0],P=W[1];return c.useEffect(function(){return function(){j({})}},[]),c.useEffect(function(){C||o==null||o((0,i.Z)((0,i.Z)({},s),{},{metric:u}))},[u,C]),(0,e.jsx)(Qn.Z,{destroyPopupOnHide:!0,open:C,trigger:["click"],onOpenChange:N,dropdownRender:function(){return(0,e.jsx)(Xn,{direction:"vertical",size:0,children:(0,e.jsx)(qn,{pagination:!1,size:"small",rowKey:"value",rowClassName:function(g){var y;return I!=null&&I.name?~((y=g.label)===null||y===void 0?void 0:y.indexOf(I==null?void 0:I.name))?"":"record-row-hide":""},rowSelection:{selectedRowKeys:u,onChange:function(g){P(g)}},scroll:{y:38*6},columns:[(0,i.Z)({dataIndex:"label",title:"\u6307\u6807"},(0,Gn.QT)(I,j,"name"))],dataSource:r==null?void 0:r.map(function(d){return{value:d,label:d}})})})},children:(0,e.jsx)(Jn.Z,{style:{cursor:"pointer"}})})},vn=ea,ta=["value"],na="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z",aa=function(n){var s,o,p=n.fetchData,r=p===void 0?{}:p,B=n.setFetchData,b=n.provider_env,I=n.valueChange,j=n.setLoading,O=(0,H.YB)(),Z=O.formatMessage,C=(0,ye.UO)(),N=C.ws_id,T=c.useRef(null),W=c.useState(void 0),u=(0,l.Z)(W,2),P=u[0],S=u[1],d=(0,H.QT)(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r;return _e(_)},{manual:!0,debounceInterval:200,refreshDeps:[r],onSuccess:function(){j(!1)},onError:function(){j(!1)}}),g=d.data,y=d.run,U=d.mutate;c.useEffect(function(){r!=null&&r.metric&&y()},[r]),c.useEffect(function(){if(!!g){var _=g.job_list;!_||I==null||I(_)}},[g]);var X=function(K){var M=K.metric;B(function(f){return f.map(function(x){return x.key===(r==null?void 0:r.key)?(0,i.Z)((0,i.Z)({},x),{},{metric:M}):x})}),M.length===0&&U(null)},te=c.useMemo(function(){var _;if(!!g){var K=g.metric_map;return(_=Object.keys(K))===null||_===void 0?void 0:_.reduce(function(M,f){var x=K[f],E=x.result_data,$=x.baseline_data,L=Object.entries(E).reduce(function(k,ie){var D=(0,l.Z)(ie,2),R=D[0],Ee=D[1];if(Ee){var je=Ee.value,ut=(0,ae.Z)(Ee,ta),Le=je?Number(Number(je).toFixed(2)):null;k.lineDatas.push((0,i.Z)((0,i.Z)({},ut),{},{date:R,baseline_data:$,value:Le,symbol:je!=null&&je.note?na:void 0}))}else k.lineDatas.push({date:R,value:null});return k.xAxis.includes(g)||k.xAxis.push(R),k},{xAxis:[],lineDatas:[]}),w=L.xAxis,F=L.lineDatas;return M.title.push({name:f,isBaseline:0}),M.baseline.push({type:"line",name:f,symbol:"none",tooltip:{show:!1},lineStyle:{width:1,type:"dashed"},data:w==null?void 0:w.map(function(k){return{date:k,value:$.value}})}),M.series.push({type:"line",name:f,showAllSymbol:!0,smooth:!0,symbolSize:8,connectNulls:!1,data:F}),M.xAxis=Array.from(new Set(M.xAxis.concat(w))),M},{baseline:[],title:[],series:[],xAxis:[]})}},[g]);return c.useEffect(function(){if(!!T.current&&!!te){var _=te.xAxis,K=te.series,M=te.title,f=te.baseline,x=lt.S1(T.current);return x.clear(),x.showLoading(),x.setOption({legend:{data:M.map(function(E){return E.name}),show:!1},tooltip:{trigger:"item",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;",formatter:function($){var L=$.data||{},w=L.baseline_data,F=`<div style="margin-right:10px">
                            `.concat($.marker," ").concat($.name," ").concat($.seriesName,`<br />
                            `).concat(ct("JobID",L.job_id,N),`
                            `).concat(z("commit",L.commit),`
                            `).concat(z("Avg",L.value),`
                            `).concat(z("CV",L.cv_value),`
                            `).concat(z(Z({id:"analysis.baseline.value"}),(w==null?void 0:w.value)&&Number(w==null?void 0:w.value).toFixed(2)),`
                            `).concat(z(Z({id:"analysis.baseline.cv"}),w==null?void 0:w.cv_value),`
                            `).concat(z("commit",L.commit),`
                            `).concat(Ye(L.server),`
                            `).concat(z(Z({id:"analysis.specs"}),L.instance_type),`
                            `).concat(z("Image",L.image),`
                            `).concat(z("Bandwidth",L.bandwidth),`
                            `).concat(z("RunMode",L.run_mode),`
                            `).concat(z(Z({id:"analysis.table.column.note"}),L.note),`
                        </div>`).trim();return'<div style="display:flex;">'.concat(F,"</div>")}},grid:{left:"5%",right:60,bottom:"10%",top:"5%"},xAxis:{type:"category",data:_,axisLabel:{showMaxLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{type:"dashed"}}},series:[].concat((0,ke.Z)(K),(0,ke.Z)(f))}),x.on("click","series.line",function(E){if(E!=null&&E.data){var $=E==null?void 0:E.data,L=$.job_id;L&&(0,re.N1)("/ws/".concat(N,"/test_result/").concat(L))}}),x.hideLoading(),S(x),function(){x.dispose(),S(void 0)}}},[te]),g?(g==null||(s=g.job_list)===null||s===void 0?void 0:s.length)===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(Nt,{children:[(0,e.jsx)(an,{style:{height:"auto",lineHeight:"28px",minHeight:43,display:"flex",alignItems:"center"},children:(0,e.jsxs)(Oe.Z,{size:0,children:[r==null?void 0:r.metric.map(function(_){return(0,e.jsx)(V.Z.Text,{children:_},_)}),(0,e.jsx)(vn,{onChange:X,fetchData:r})]})}),(0,e.jsx)(ne.Z,{justify:"center",children:(0,e.jsx)(Oe.Z,{size:16,children:(o=te.title)===null||o===void 0?void 0:o.map(function(_){return(0,e.jsx)(cn,(0,i.Z)((0,i.Z)({provider_env:b},_),{},{chartRef:P}),_.name)})})}),(0,e.jsx)(rn,{ref:T})]}):(0,e.jsx)(e.Fragment,{})},ra=aa,ia="path://M873,435C877.4182739257812,435,881,438.58172607421875,881,443C881,447.41827392578125,877.4182739257812,451,873,451C868.5817260742188,451,865,447.41827392578125,865,443C865,438.58172607421875,868.5817260742188,435,873,435ZM873,436C869.134033203125,436,866,439.1340026855469,866,443C866,446.8659973144531,869.134033203125,450,873,450C876.865966796875,450,880,446.8659973144531,880,443C880,439.1340026855469,876.865966796875,436,873,436ZM873,439C875.2091674804688,439,877,440.7908630371094,877,443C877,445.2091369628906,875.2091674804688,447,873,447C870.7908325195312,447,869,445.2091369628906,869,443C869,440.7908630371094,870.7908325195312,439,873,439Z";function wt(h,n){var s=h+"",o=s.length,p=s.substring(o-1,o);return p=="5"?(p="6",s=s.substring(0,o-1)+p,(s-0).toFixed(n)):(+h).toFixed(n)}var sa=function(n){var s,o,p,r=n.fetchData,B=r===void 0?{}:r,b=n.provider_env,I=n.valueChange,j=n.setFetchData,O=n.setLoading,Z=(0,H.YB)(),C=Z.formatMessage,N=(0,ye.UO)(),T=N.ws_id,W=c.useRef(null),u=c.useState(void 0),P=(0,l.Z)(u,2),S=P[0],d=P[1],g=(0,H.QT)(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;return _e(M)},{manual:!0,debounceInterval:100,refreshDeps:[B],onSuccess:function(){O(!1)},onError:function(){O(!1)}}),y=g.data,U=g.mutate,X=g.loading,te=g.run;c.useEffect(function(){B.metric&&te()},[B]),c.useEffect(function(){if(!!y){var M=y.job_list;!M||I==null||I(M)}},[y]);var _=function(f){var x=f.metric;j(function(E){return E.map(function($){return $.key===(B==null?void 0:B.key)?(0,i.Z)((0,i.Z)({},$),{},{metric:x}):$})}),x.length===0&&U(null)},K=c.useMemo(function(){var M;if(!!y){var f=y.metric_map,x=y.job_list,E=x.reduce(function($,L){var w=L.date,F=L.value,k=wt(+F,2);return $[w]=$[w]?$[w].concat(k):[k],$},{});return(M=Object.keys(f))===null||M===void 0?void 0:M.reduce(function($,L){var w=f[L],F=w.result_data,k=w.baseline_data,ie=Object.entries(F).reduce(function(Le,nt){var Tt=(0,l.Z)(nt,2),yt=Tt[0],Mt=Tt[1],ht=Object.keys(Mt).reduce(function(Ve,dt){var pt=Mt[dt];if(pt){var xt=wt(+pt.value,2),Rt=pt.cv_value.replace("\xB1","").replace("%","")*100/100/100,Ht=wt((1+Rt)*xt,2),le=wt((1-Rt)*xt,2),Y=(0,i.Z)((0,i.Z)({},pt),{},{date:dt,metric_name:L,ip:yt,baseline_data:k,up_value:Ht,down_value:le,value:xt});return pt.note&&(Y.symbol=ia),E[dt]&&Ft(E[dt],xt)&&(Y.symbol="circle",Y.itemStyle={color:"#000"}),Ve.concat(Y)}return Ve.concat({date:dt,ip:yt,value:null,baseline_data:k,metric_name:L})},[]),_t="".concat(L,"(").concat(yt,")");return Le.titles.push({name:_t}),Le.lineDatas.push({type:"line",smooth:!0,ip:yt,symbolSize:8,connectNulls:!1,name:_t,z:9999,opacity:1,showAllSymbol:!0,data:ht}),Le.upLine.push({type:"line",smooth:!0,lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none",name:_t,select:{disabled:!0},selectedMode:!1,areaStyle:{color:"#ccc"},data:ht.map(function(Ve){return(0,i.Z)((0,i.Z)({},Ve),{},{value:Ve.up_value})})}),Le.downLine.push({type:"line",smooth:!0,lineStyle:{opacity:0},tooltip:{show:!1},symbol:"none",name:_t,select:{disabled:!0},selectedMode:!1,areaStyle:{color:"#fff",opacity:1},z:99,data:ht.map(function(Ve){return(0,i.Z)((0,i.Z)({},Ve),{},{value:Ve.down_value})})}),Le.xAxis=Object.keys(Mt),Le},{xAxis:[],lineDatas:[],upLine:[],downLine:[],titles:[]}),D=ie.xAxis,R=ie.lineDatas,Ee=ie.upLine,je=ie.downLine,ut=ie.titles;return $.baseline.push({type:"line",name:L,symbol:"none",tooltip:{show:!1},lineStyle:{width:1,type:"dashed"},z:9999,data:D==null?void 0:D.map(function(Le){return{date:Le,value:k.value}})}),$.title.push([{name:L,isBaseline:1}].concat((0,ke.Z)(ut))),$.series=$.series.concat(Ee,je,R),$.xAxis=D,$},{baseline:[],title:[],series:[],xAxis:[]})}},[y]);return c.useEffect(function(){if(!!W.current&&!!K){var M=K.xAxis,f=K.series,x=K.title,E=K.baseline,$=lt.S1(W.current);return $.clear(),$.showLoading(),$.setOption({legend:{icon:"rect",itemHeight:2,itemWidth:10,data:x.flat().map(function(L){return L.name}),show:!1},tooltip:{trigger:"axis",axisPointer:{snap:!0,type:"cross"},enterable:!0,backgroundColor:"#fff",borderColor:"#fff",textStyle:{color:"rgba(0,0,0,0.65)",fontSize:14},extraCssText:"box-shadow: 0 2px 8px 0 rgba(0,0,0,0.15);border-radius: 2px;padding:12px;max-height: 320px;overflow: auto;",formatter:function(w){var F=w.reduce(function(k,ie){var D=ie.data||{};if(!D.value)return k;var R=`<div style="margin-right:10px">
                                `.concat(ie.marker," ").concat(ie.seriesName,` <br />
                                `).concat(ct("JobID",D.job_id,T),`
                                `).concat(z("commit",D.commit),`
                                `).concat(z("Avg",D.value),`
                                `).concat(z("CV",D.cv_value),`
                                `).concat(z(C({id:"analysis.baseline.value"}),(D==null?void 0:D.baseline_data.value)&&Number(D==null?void 0:D.baseline_data.value).toFixed(2)),`
                                `).concat(z(C({id:"analysis.baseline.cv"}),D==null?void 0:D.baseline_data.cv_value),`
                                `).concat(z("commit",D.commit),`
                                `).concat(Ye(w.seriesName),`
                                `).concat(et(w,b),`
                                `).concat(z(C({id:"analysis.table.column.note"}),D.note),`
                            </div>`).trim();return k.concat('<div style="display:flex;">'.concat(R,"</div>"))},"");return F.length===0?"":'<div style="display:flex;flex-direction:row;gap:8px;max-width:545px;flex-wrap:wrap;">'.concat(F,"<div>")}},color:_n,grid:{left:"5%",right:60,bottom:"10%",top:20},xAxis:{type:"category",data:M,axisLabel:{showMaxLabel:!0},axisPointer:{z:9999}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{z:100},min:"dataMin",max:"dataMax",splitArea:{areaStyle:{color:["#fff","#fff"]}},axisLabel:{formatter:function(w){var F=(parseInt(w)+"").length;if(F>6){var k=new Map([[1,C({id:"analysis.wan"})],[2,C({id:"analysis.yi"})],[3,C({id:"analysis.zhao"})]]),ie=parseInt(F/4);return wt(w/Math.pow(1e4,ie),2)+k.get(ie)}return w}},zlevel:100},series:[].concat((0,ke.Z)(f),(0,ke.Z)(E))}),$.on("click","series.line",function(L){if(L!=null&&L.data){var w=L==null?void 0:L.data,F=w.job_id;F&&(0,re.N1)("/ws/".concat(T,"/test_result/").concat(F))}}),$.hideLoading(),d($),function(){$.dispose(),d(void 0)}}},[K]),y?(y==null||(s=y.job_list)===null||s===void 0?void 0:s.length)===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Nt,{children:(0,e.jsxs)($t.Z,{spinning:X,children:[(0,e.jsx)(an,{style:{height:"auto",lineHeight:"28px",minHeight:43,display:"flex",alignItems:"center"},children:(0,e.jsxs)(Oe.Z,{size:0,wrap:!0,children:[B==null||(o=B.metric)===null||o===void 0?void 0:o.map(function(M){return(0,e.jsx)(V.Z.Text,{children:M},M)}),(0,e.jsx)(vn,{onChange:_,fetchData:B})]})}),(0,e.jsx)(ne.Z,{justify:"center",children:(0,e.jsx)(Oe.Z,{size:[24,0],wrap:!0,style:{paddingLeft:"3%",paddingRight:"3%"},children:K==null||(p=K.title)===null||p===void 0?void 0:p.map(function(M,f){return(0,e.jsx)(cn,{isStandalone:!0,source:M,chartRef:S,provider_env:b},f)})})}),(0,e.jsx)(rn,{ref:W})]})}):(0,e.jsx)(e.Fragment,{})},oa=c.memo(sa,function(h,n){return JSON.stringify(h==null?void 0:h.fetchData)===JSON.stringify(n==null?void 0:n.fetchData)}),Ea=t(64510),fn=t(87445),la=function(){return(0,e.jsx)(Nt,{style:{width:"100%"},bordered:!1,children:(0,e.jsx)(ne.Z,{style:{height:innerHeight-176-50-120},justify:"center",align:"middle",children:(0,e.jsx)(fn.Z,{image:fn.Z.PRESENTED_IMAGE_SIMPLE})})})},ca=la,mn,ua=Me.ZP.div(mn||(mn=(0,oe.Z)([`
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 999;
    background-color: #fff;
    display: flex;
    justify-content: center;
    padding-top: 220px;
`]))),da=function(){return(0,e.jsx)(ua,{children:(0,e.jsx)($t.Z,{})})},va=da,Pt=t(91959),fa=["time"],hn,ma=(0,Me.ZP)(ne.Z)(hn||(hn=(0,oe.Z)([`
    position:relative;
    width:300px;
    .tootip_pos {
        position:absolute;
        left:300px;
        top:4px;
    }
`]))),Ut={fontWeight:"bold"},ha=function(n){var s,o,p=(s=n.title)===null||s===void 0?void 0:s.split("/");return(0,e.jsx)("div",{style:{color:"#000"},children:(0,e.jsxs)(Ue.Z,{column:1,children:[(0,e.jsx)(Ue.Z.Item,{label:"Suite",labelStyle:(0,i.Z)((0,i.Z)({},Ut),{},{paddingLeft:10}),children:p==null?void 0:p.at(0)}),(0,e.jsx)(Ue.Z.Item,{label:"Conf",labelStyle:(0,i.Z)((0,i.Z)({},Ut),{},{paddingLeft:12}),children:p==null?void 0:p.at(1)}),(0,e.jsx)(Ue.Z.Item,{label:"Metric",contentStyle:{display:"inline-block",paddingBottom:8},labelStyle:(0,i.Z)({},Ut),children:n==null||(o=n.metric)===null||o===void 0?void 0:o.map(function(r){return(0,e.jsx)("div",{children:r},r)})})]})})},pa=function(n,s){var o,p=(0,H.YB)(),r=p.formatMessage,B=(0,ye.UO)(),b=B.ws_id,I=(0,ye.TH)(),j=I.query,O=n.info,Z=n.setInfo,C=O.show_type,N=O.provider_env,T=O.test_type,W=(0,c.useState)({}),u=(0,l.Z)(W,2),P=u[0],S=u[1],d=(0,c.useState)([]),g=(0,l.Z)(d,2),y=g[0],U=g[1],X=(0,c.useState)(null),te=(0,l.Z)(X,2),_=te[0],K=te[1],M=(0,c.useState)(""),f=(0,l.Z)(M,2),x=f[0],E=f[1],$=(0,c.useState)(JSON.stringify(j)!=="{}"),L=(0,l.Z)($,2),w=L[0],F=L[1],k=c.useState([]),ie=(0,l.Z)(k,2),D=ie[0],R=ie[1],Ee=(0,c.useRef)(),je=fe.Z.useForm(),ut=(0,l.Z)(je,1),Le=ut[0];c.useImperativeHandle(s,function(){return{reset:function(){Le.resetFields(),K(void 0)}}});var nt=(0,H.QT)(function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ws_id:b,page_size:999};return(0,Tn.oG)(le)},{initialData:[]}),Tt=nt.data,yt=(0,H.QT)(function(){return ft({ws_id:b,page_size:500})},{initialData:[]}),Mt=yt.data,ht=function(){var le=(0,m.Z)((0,q.Z)().mark(function Y(me){var Ze,pe,Te,Ge,at,Et;return(0,q.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(Z(me),F(!0),T!=="performance"){we.next=8;break}return we.next=5,_e(me);case 5:we.t0=we.sent,we.next=11;break;case 8:return we.next=10,Be(me);case 10:we.t0=we.sent;case 11:if(Ze=we.t0,pe=Ze.data,Te=Ze.code,F(!1),Te===200){we.next=19;break}return U([]),S({}),we.abrupt("return");case 19:if(pe){we.next=21;break}return we.abrupt("return");case 21:if(Ge=pe.job_list,at=pe.metric_map,Et=pe.case_map,!(Ge&&Ge.length>0)){we.next=26;break}return S(T==="performance"?at:Et),U(Ge),we.abrupt("return");case 26:case"end":return we.stop()}},Y)}));return function(me){return le.apply(this,arguments)}}(),_t=function(){Le.getFieldValue("project_id")?Ee.current.show(_):Ie.default.error(r({id:"analysis.selected.error"}))},Ve=function(){var Y=T==="functional"?{show_type:C}:{provider_env:N},me=Le.getFieldsValue(),Ze=me.time,pe=(0,ae.Z)(me,fa);if(Ze&&Ze.length>0){var Te=(0,l.Z)(Ze,2),Ge=Te[0],at=Te[1];Y.start_time=Q()(Ge).format("YYYY-MM-DD"),Y.end_time=Q()(at).format("YYYY-MM-DD")}return(0,i.Z)((0,i.Z)({},Y),pe)},dt=function(Y){var me=Y.test_suite_id,Ze=Y.test_case_id,pe=Ve(),Te=pe.project_id;Te&&me&&Ze&&ht((0,i.Z)((0,i.Z)({},pe),Y))};c.useEffect(function(){var le,Y=Ve(),me=(0,i.Z)((0,i.Z)((0,i.Z)({},Y),_),{},{metric:_==null||(le=_.metric)===null||le===void 0?void 0:le.toString()});(D==null?void 0:D.length)!==0&&(D==null||D.forEach(function(Ze){var pe=Ze.key,Te=Ze.metric;me[pe]=Te.toString()})),Z(me)},[D,_]);var pt=function(Y){if(K(Y),T!=="performance")dt(Y);else{var me=Y.metric,Ze=Ve(),pe=me.map(function(Te){return(0,i.Z)((0,i.Z)((0,i.Z)({},Ze),Y),{},{metric:[Te],key:(0,Pt.Z)()})});U([]),R(pe)}},xt=function(){var Y=Ve();if(_){var me=_.test_suite_id,Ze=_.test_case_id,pe=_.metric,Te=Y.project_id;if(me&&Ze&&Te){if(T==="performance"){var Ge=pe.map(function(at){return(0,i.Z)((0,i.Z)((0,i.Z)({},Y),_),{},{metric:[at],key:(0,Pt.Z)()})});U([]),R(Ge);return}ht((0,i.Z)((0,i.Z)({},Y),_))}}};(0,c.useEffect)(function(){return function(){S(null),U([]),R([])}},[N,C,T]),(0,c.useEffect)(function(){if(j&&JSON.stringify(j)!=="{}"){var le=j.test_type,Y=j.project_id,me=j.tag,Ze=j.start_time,pe=j.end_time,Te=j.provider_env,Ge=j.metric,at=j.title,Et=j.test_suite_id,zt=j.test_case_id,we=j.sub_case_name,Kt=j.days,Lt=Object.prototype.toString.call(Ge)==="[object Array]"?Ge:Ge.split(",");if(T===le){var Dt={metric:Lt,project_id:Y,tag:me,test_suite_id:Et,test_case_id:zt,sub_case_name:we,show_type:C,provider_env:Te},kt=Ze,gn=pe||Q()().format("YYYY-MM-DD"),yn=!isNaN(+Kt)&&Object.prototype.toString.call(+Kt)==="[object Number]";if(yn&&(kt=Q()().subtract(Kt-1,"days"),gn=Q()()),Dt.start_time=Q()(kt).format("YYYY-MM-DD"),Dt.end_time=Q()(gn).format("YYYY-MM-DD"),at)if(T!=="performance")F(!1),ht(Dt);else{var Za=Lt==null?void 0:Lt.map(function(Yt){var Vt;return(0,i.Z)((0,i.Z)({},Dt),{},{metric:j[Yt]?(Vt=j[Yt])===null||Vt===void 0?void 0:Vt.split(","):[Yt],key:(0,Pt.Z)()})});U([]),R(Za)}K({title:at,metric:Lt,sub_case_name:we,test_suite_id:Et,test_case_id:zt}),yn?Le.setFieldsValue({time:[Q()(kt),Q()()]}):Ze&&Le.setFieldsValue({time:[Q()(Ze),pe?Q()(pe):Q()()]}),Le.setFieldsValue({project_id:+Y||void 0,tag:+me||void 0})}}},[j]);var Rt=function(Y){E(Y)},Ht=function(Y){U(function(me){var Ze=Y.map(function(pe){return pe.id});return me.filter(function(pe){return!Ze.includes(pe.id)}).concat(Y).sort(function(pe,Te){return Te.id-pe.id})})};return(0,e.jsxs)("div",{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)",position:"relative"},children:[w&&(0,e.jsx)(va,{}),(0,e.jsxs)(ne.Z,{style:{padding:"0 20px 10px",background:"#fff",marginBottom:10},children:[(0,e.jsx)(J.Z,{span:24,children:(0,e.jsxs)(fe.Z,{layout:"inline",form:Le,colon:!0,onFieldsChange:xt,className:tt().formInlineStyles,children:[(0,e.jsx)(fe.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.project"}),name:"project_id",children:(0,e.jsx)(ue.Z,{placeholder:r({id:"analysis.project.placeholder"}),onChange:Rt,showSearch:!0,filterOption:function(Y,me){return me.label.toLowerCase().indexOf(Y.toLowerCase())>=0},options:Mt.map(function(le){return{value:le.id,label:le.name}})})}),(0,e.jsx)(fe.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.tag"}),children:(0,e.jsxs)(ma,{children:[(0,e.jsx)(fe.Z.Item,{name:"tag",initialValue:"",children:(0,e.jsx)(ue.Z,{allowClear:!0,placeholder:r({id:"analysis.tag.placeholder"}),showSearch:!0,style:{width:300},filterOption:function(Y,me){return me.label.toLowerCase().indexOf(Y.toLowerCase())>=0},options:[{value:"",label:r({id:"analysis.indistinguishable"})}].concat(Tt.filter(function(le){var Y=le.creator;return Object.prototype.toString.call(Y)==="[object Number]"}).map(function(le){return{value:le.id,label:le.name}}))})}),(0,e.jsx)("div",{className:"tootip_pos",children:(0,e.jsx)(be.Z,{overlayClassName:tt().table_question_tooltip,color:"#fff",placement:"top",arrowPointAtCenter:!0,title:r({id:"analysis.only.the.job.data"}),children:(0,e.jsx)(kn.Z,{style:{color:"rgba(0, 0, 0, 0.65)",marginLeft:5}})})})]})}),(0,e.jsx)(fe.Z.Item,{label:(0,e.jsx)(H._H,{id:"analysis.date"}),name:"time",initialValue:[Q()().subtract(29,"days"),Q()().startOf("day")],children:(0,e.jsx)(ee.Z.RangePicker,{ranges:(o={},(0,Ae.Z)(o,r({id:"analysis.7days"}),[Q()().subtract(6,"days"),Q()().startOf("day")]),(0,Ae.Z)(o,r({id:"analysis.30days"}),[Q()().subtract(29,"days"),Q()().startOf("day")]),(0,Ae.Z)(o,r({id:"analysis.60days"}),[Q()().subtract(59,"days"),Q()().startOf("day")]),(0,Ae.Z)(o,r({id:"analysis.90days"}),[Q()().subtract(89,"days"),Q()().startOf("day")]),o)})})]})}),(0,e.jsx)(J.Z,{span:24,children:(0,e.jsxs)(ne.Z,{style:{marginTop:12},align:"middle",children:[T==="functional"&&C==="pass_rate"&&(0,e.jsx)("span",{className:tt().select_left_title,children:"Test Conf\uFF1A"}),T==="functional"&&C==="result_trend"&&(0,e.jsx)("span",{className:tt().select_left_title,children:"Test Case\uFF1A"}),T!=="functional"&&(0,e.jsxs)("span",{className:tt().select_left_title,children:[(0,e.jsx)(H._H,{id:"analysis.metric"}),"\uFF1A"]}),_&&(0,e.jsx)(be.Z,{title:C==="result_trend"?_.sub_case_name:(0,e.jsx)(ha,(0,i.Z)({},_)),autoAdjustOverflow:!0,placement:"bottomLeft",color:"#fff",overlayInnerStyle:{minWidth:300,maxHeight:300,overflowY:"auto",color:"#333"},children:(0,e.jsx)("span",{className:tt().select_inner_span,children:_.title})}),(0,e.jsx)(G.Z,{style:{padding:0,marginLeft:8},type:"link",onClick:_t,children:(0,e.jsx)(H._H,{id:"analysis.select"})})]})})]}),T==="performance"&&(0,e.jsx)(ne.Z,{children:(0,e.jsx)(Oe.Z,{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)"},direction:"vertical",children:D==null?void 0:D.map(function(le){var Y={fetchData:le,key:le.key,provider_env:N,valueChange:Ht,setFetchData:R,setLoading:F};return N==="aliyun"?(0,e.jsx)(ra,(0,i.Z)({},Y)):(0,e.jsx)(oa,(0,i.Z)({},Y))})})}),(0,e.jsx)(ne.Z,{children:(0,e.jsxs)(Oe.Z,{style:{width:"100%",background:"rgba(0, 0, 0, 0.04)"},direction:"vertical",children:[T!=="performance"&&(y==null?void 0:y.length)>0&&(0,e.jsx)(Pn,{test_type:T,provider_env:N,show_type:C,dataSource:P}),(y==null?void 0:y.length)===0&&(0,e.jsx)(ca,{}),(y==null?void 0:y.length)>0&&(0,e.jsx)(St,{refresh:function(){if(T==="performance"){R(function(Y){return Y.map(function(me){return(0,i.Z)((0,i.Z)({},me),{},{key:(0,Pt.Z)()})})});return}dt(_)},dataSource:y,test_type:T,show_type:C})]})}),(0,e.jsx)(Kn,{ref:Ee,projectId:x,show_type:C,provider_env:N,test_type:T,onOk:pt})]})},ga=c.forwardRef(pa),ya=t(52493),_a=t(20905),xa=["test_type","show_type","provider_env"],pn,ba=(0,Me.ZP)(ve.Z.Content).attrs(function(h){return{style:{minHeight:h==null?void 0:h.minHeight}}})(pn||(pn=(0,oe.Z)([`
    overflow: auto;
    margin-bottom: 10px;
    background: #fff;
`]))),Ca=function(n){var s=(0,H.YB)(),o=s.formatMessage,p=(0,ye.TH)(),r=p.query,B=(0,ye.UO)(),b=B.ws_id,I=n.route,j=c.useState([]),O=(0,l.Z)(j,2),Z=O[0],C=O[1],N=c.useRef(null),T="aligroup",W="Workspace.TestAnalysis.".concat(I.name),u=function(){var f=(0,m.Z)((0,q.Z)().mark(function x(E){var $,L,w,F;return(0,q.Z)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,Ke(E);case 2:if($=ie.sent,L=$.data,w=$.code,F=$.msg,w===200){ie.next=8;break}return ie.abrupt("return",console.log(F));case 8:C(L||[]);case 9:case"end":return ie.stop()}},x)}));return function(E){return f.apply(this,arguments)}}();c.useEffect(function(){if(JSON.stringify(r)!=="{}"){var f=r.test_suite_id,x=r.test_case_id,E=r.project_id;f&&x&&E&&u((0,i.Z)((0,i.Z)({},r),{},{ws_id:b}))}},[r,b]),(0,Qe.jk)(W);var P=c.useState({test_type:(r==null?void 0:r.test_type)||"performance",provider_env:(r==null?void 0:r.provider_env)||T,show_type:(r==null?void 0:r.show_type)||"pass_rate",project_id:(r==null?void 0:r.project_id)||void 0,tag:(r==null?void 0:r.tag)||void 0,start_time:(r==null?void 0:r.start_time)||void 0,end_time:(r==null?void 0:r.end_time)||void 0}),S=(0,l.Z)(P,2),d=S[0],g=S[1],y=function(x){var E,$=d.test_type,L=d.provider_env,w=d.show_type;g((0,i.Z)({test_type:$,provider_env:L,show_type:w},x)),(E=N.current)===null||E===void 0||E.reset()},U=function(x){var E=x.target;y({provider_env:E==null?void 0:E.value})},X=function(x){y({test_type:x})},te=function(x){var E=x.target;y({show_type:E==null?void 0:E.value})},_=[{key:"performance",tab:o({id:"analysis.performance"})},{key:"functional",tab:o({id:"analysis.functional"})}],K=(0,Qe.oM)(o({id:"analysis.copy.to.clipboard"})),M=function(){var x=window.location,E=x.origin,$=x.pathname,L=d.test_type,w=d.show_type,F=d.provider_env,k=(0,ae.Z)(d,xa),ie=L==="functional",D=E+$+"?"+(0,_a.stringify)((0,i.Z)((0,Ae.Z)({test_type:L},ie?"show_type":"provider_env",ie?w:F),k));K(D)};return(0,e.jsx)(Xt.Provider,{value:{metrics:Z,setMetrics:C},children:(0,e.jsx)(ba,{minHeight:innerHeight-40,children:(0,e.jsxs)(ne.Z,{style:{background:"#fff"},children:[(0,e.jsx)(J.Z,{span:24,children:(0,e.jsx)(xe.Z,{activeKey:d==null?void 0:d.test_type,style:{width:"100%"},className:vt().timeAnalysisTabs,onTabClick:X,tabBarExtraContent:(0,e.jsxs)(ne.Z,{justify:"center",align:"middle",children:[(0,e.jsx)(ya.r,{className:"test_analysis_copy_link",style:{cursor:"pointer",marginRight:20},onClick:M}),(d==null?void 0:d.test_type)==="performance"?(0,e.jsxs)(Se.ZP.Group,{value:d==null?void 0:d.provider_env,style:{marginRight:20},onChange:U,children:[(0,e.jsx)(Se.ZP.Button,{style:{textAlign:"center"},value:"aligroup",children:o({id:"aligroupServer"})}),(0,e.jsx)(Se.ZP.Button,{style:{textAlign:"center"},value:"aliyun",children:o({id:"aliyunServer"})})]}):(0,e.jsxs)(Se.ZP.Group,{value:d==null?void 0:d.show_type,style:{marginRight:20},onChange:te,children:[(0,e.jsx)(Se.ZP.Button,{style:{width:120,textAlign:"center"},value:"pass_rate",children:(0,e.jsx)(H._H,{id:"analysis.pass_rate"})}),(0,e.jsx)(Se.ZP.Button,{style:{width:120,textAlign:"center"},value:"result_trend",children:(0,e.jsx)(H._H,{id:"analysis.result_trend"})})]})]}),children:_.map(function(f){return(0,c.createElement)(xe.Z.TabPane,(0,i.Z)((0,i.Z)({},f),{},{key:f.key}))})})}),(0,e.jsx)(J.Z,{span:24,children:(0,e.jsx)(ga,{ref:N,info:d,setInfo:function(x){g(function(E){return(0,i.Z)((0,i.Z)({},E),x)})}})})]})})})},ja=Ca},78358:function(We,De,t){"use strict";t.d(De,{gN:function(){return be},tZ:function(){return Ce},yQ:function(){return ue},Pc:function(){return $e},cQ:function(){return fe},YV:function(){return Ne},Nq:function(){return Ue},JQ:function(){return ze},iK:function(){return Re},fD:function(){return st},QN:function(){return ot}});var se=t(57359),J=t(34423),Pe=t(13059),xe=t(53676),ce=t(20418),ne=t(51937),A=t(34516),Se=t(41428),Ae=t(70772),ae=t(6701),i=t(14320),q=t(53479),m=t(79625),l=t(96584),ge=t(89963),ve=t(70077),oe=t(22374),c=t(86252),Qe=t.n(c),rt=t(93329),vt=t(74066),H=t(24812),ye=t(22812),Ot=t(97939),Oe=t(39935),bt=t(526),G=t(6130),a=t(52454),ee,de=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),be=function(v){var V=(0,H.UO)(),re=V.ws_id;return(0,a.jsxs)(ve.Z,{style:{marginBottom:v.bottomHeight},children:[(0,a.jsx)(ve.Z.Item,{children:(0,a.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return ye.m8.push("/ws/".concat(re,"/test_result"))},children:(0,a.jsx)(ye._H,{id:"ws.result.details.test.result"})})}),(0,a.jsx)(ve.Z.Item,{children:(0,a.jsx)(ye._H,{id:"ws.result.details.result.details"})})]})},Ce=function(v){return v==="success"||v===!0?(0,a.jsx)("span",{style:{fontWeight:500,color:"#81BF84"},children:"Success"}):v==="fail"||v===!1?(0,a.jsx)("span",{style:{fontWeight:500,color:"#C84C5A"},children:"Fail"}):v==="running"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#649FF6"},children:"Running"}):v==="stop"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Stop"}):v==="pending"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Pending"}):v==="skip"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Skip"}):(0,a.jsx)(a.Fragment,{})},ue=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(re){return re?(0,a.jsx)(G.K,{ellipsis:{tooltip:!0},children:re}):v}}},$e=function(v){var V=v.title,re=v.width,_e=re===void 0?"100%":re,Be=v.onEdit,Ke=v.access,qe=(0,oe.useRef)(),ft=Ke?(0,a.jsx)(rt.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:Be}):(0,a.jsx)(rt.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return(0,Oe.WR)()}});return(0,a.jsx)("div",{ref:qe,style:{width:_e},children:(0,a.jsxs)(q.Z,{style:{width:_e},justify:"start",align:"middle",children:[(0,a.jsx)(l.Z,{placement:"topLeft",title:V,children:(0,a.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:V||"-"})}),ft]})})},Ie=function(v){return de.get(v)||"#D9D9D9"},Je=function(v){var V=v.text,re=(0,ye.YB)(),_e=(0,bt.oM)(re.formatMessage({id:"request.copy.success"}));return(0,a.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return _e(V)},children:re.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},fe=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(re){return re?(0,a.jsx)(l.Z,{overlayClassName:Qe().tootip_overflow,placement:"topLeft",title:(0,a.jsxs)(q.Z,{children:[(0,a.jsx)(ae.Z,{span:24,children:re}),(0,a.jsx)(ae.Z,{span:24,children:(0,a.jsx)(q.Z,{justify:"center",children:(0,a.jsx)(Je,{text:re})})})]}),children:re}):v}}},Ne=function(v){return v==="decline"?"#C84C5A":v==="normal"?"#000000":v==="increase"?"#81BF84":""},Ue=function(v,V,re){return v==="decline"?(0,a.jsx)("span",{style:{color:"#C84C5A"},children:re({id:"ws.result.details.".concat(v)})}):v==="normal"?(0,a.jsx)("span",{style:{color:"#000000"},children:re({id:"ws.result.details.".concat(v)})}):v==="increase"?(0,a.jsx)("span",{style:{color:"#81BF84"},children:re({id:"ws.result.details.".concat(v)})}):V||"-"},He=(0,Ot.ZP)(A.Z)(ee||(ee=(0,Se.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(he){var v=he.no_margin;return v?"margin-right: 0;":""}),Q=function(v){return(0,a.jsx)(He,(0,ce.Z)({},v))},Me=function(v){var V=(0,ye.YB)(),re=V.formatMessage;return(0,a.jsx)(l.Z,{title:re({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,a.jsx)(He,(0,ce.Z)({},v))})},Xe=function(v){var V=v.title;return(0,a.jsx)(xe.Z,{title:V,placement:"right",trigger:"hover",overlayClassName:Qe().tag_popover_style,children:(0,a.jsx)(vt.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},Fe=function(v){var V=v.state;return(0,a.jsx)(Q,(0,ce.Z)((0,ce.Z)({},v),{},{color:Ie(V),style:!de.get(V)&&{color:"#1d1d1d"},children:V==="success"?"complete":V}))},it=function(v){var V=v.state;return(0,a.jsx)(Me,(0,ce.Z)((0,ce.Z)({},v),{},{color:Ie(V),style:!de.get(V)&&{color:"#1d1d1d"},children:V==="success"?"complete":V}))},ze=function(v){var V=(0,ye.YB)(),re=V.formatMessage,_e=v.state,Be=v.run_state,Ke=Be===void 0?"":Be,qe=v.state_desc,ft=(0,H.UO)(),mt=ft.ws_id;return _e==="running"?qe?(0,a.jsxs)(J.Z,{size:0,children:[(0,a.jsx)(Fe,(0,ce.Z)((0,ce.Z)({},v),{},{children:_e})),(0,a.jsx)(Xe,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:qe.replace(/(\d+)/g,'<a href="/ws/'.concat(mt,'/test_result/$1" target="_blank">$1</a>'))}})})]}):Ke?(0,a.jsxs)(J.Z,{size:0,children:[(0,a.jsx)(Fe,(0,ce.Z)((0,ce.Z)({},v),{},{children:_e})),(0,a.jsx)(Xe,{title:re({id:"ws.result.details.not.assigned.server"})})]}):(0,a.jsxs)(J.Z,{size:0,children:[(0,a.jsx)(Fe,(0,ce.Z)((0,ce.Z)({},v),{},{children:_e})),(0,a.jsx)(Xe,{title:re({id:"ws.result.details.running,please.wait"})})]}):_e==="pending"&&qe?(0,a.jsxs)(J.Z,{size:0,children:[(0,a.jsx)(Fe,(0,ce.Z)((0,ce.Z)({},v),{},{children:_e})),(0,a.jsx)(Xe,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:qe.replace(/(\d+)/g,'<a href="/ws/'.concat(mt,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,a.jsx)(Fe,(0,ce.Z)({},v))},Re=function(v){return(0,a.jsx)(it,(0,ce.Z)((0,ce.Z)({},v),{},{no_margin:1}))},st=function(v){var V=v.title,re=v.desc,_e=v.placement,Be=_e===void 0?"bottom":_e;return(0,a.jsxs)(J.Z,{children:[(0,a.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:V}),(0,a.jsx)(l.Z,{overlayClassName:Qe().table_question_tooltip,placement:Be,arrowPointAtCenter:!0,title:re,color:"#fff",children:(0,a.jsx)(vt.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},ot=function(v){var V=v.title,re=v.test_value,_e=v.value_list,Be=v.cv_value,Ke=v.max_value,qe=v.min_value,ft=v.metric,mt=v.result,At=(0,ye.YB)(),Qt=At.formatMessage,It=(0,bt.oM)(Qt({id:"request.copy.success"})),e=function(et){return et?new Number(et).toFixed(2):null},Ct=e(Ke),jt=e(qe),Zt=Be,St=e(re),lt=_e.map(function(Ye){return e(Ye)}),ke="".concat(ft," ").concat(V,`:
Avg: `).concat(St,`
CV:  `).concat(Zt);ke+=Ct?`
Max: `.concat(Ct):"",ke+=jt?`
Min: `.concat(jt):"",ke+=lt.length?`
Test Record
`:"",ke+=lt.reduce(function(Ye,et,Ft){return Ye.concat("(".concat(Ft+1,") ").concat(et,`
`))},"");var z="".concat(St,"\xB1").concat(Zt),ct=function(){return mt==="decline"?(0,a.jsx)("span",{className:Qe().result_popover_span,style:{color:"#C84C5A"},children:z}):mt==="increase"?(0,a.jsx)("span",{className:Qe().result_popover_span,style:{color:"#81BF84"},children:z}):(0,a.jsx)("span",{className:Qe().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:z})};return(0,a.jsx)(xe.Z,{overlayClassName:Qe().metric_list_copy,title:(0,a.jsxs)(q.Z,{justify:"space-between",children:[(0,a.jsx)("b",{children:V}),(0,a.jsx)("span",{onClick:function(){return It(ke)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,a.jsx)(ye._H,{id:"operation.copy"})})]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(q.Z,{children:[(0,a.jsx)("b",{children:"Avg\uFF1A"}),(0,a.jsx)("span",{children:St})]}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)("b",{children:"CV\uFF1A"}),(0,a.jsx)("span",{children:Zt})]}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)("b",{children:"Max\uFF1A"}),(0,a.jsx)("span",{children:Ct})]}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)("b",{children:"Min\uFF1A"}),(0,a.jsx)("span",{children:jt})]}),lt.length>0&&(0,a.jsx)(q.Z,{style:{marginTop:16},children:(0,a.jsx)("b",{children:"Test Record"})}),lt.map(function(Ye,et){return(0,a.jsx)(q.Z,{children:"(".concat(et+1,")").concat(Ye)},et)})]}),children:ct()})}},52493:function(We,De,t){"use strict";t.d(De,{r:function(){return Se}});var se=t(22374),J,Pe=["svgRef","title"];function xe(){return xe=Object.assign?Object.assign.bind():function(ae){for(var i=1;i<arguments.length;i++){var q=arguments[i];for(var m in q)Object.prototype.hasOwnProperty.call(q,m)&&(ae[m]=q[m])}return ae},xe.apply(this,arguments)}function ce(ae,i){if(ae==null)return{};var q=ne(ae,i),m,l;if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(ae);for(l=0;l<ge.length;l++)m=ge[l],!(i.indexOf(m)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,m)||(q[m]=ae[m]))}return q}function ne(ae,i){if(ae==null)return{};var q={},m=Object.keys(ae),l,ge;for(ge=0;ge<m.length;ge++)l=m[ge],!(i.indexOf(l)>=0)&&(q[l]=ae[l]);return q}var A=function(i){var q=i.svgRef,m=i.title,l=ce(i,Pe);return se.createElement("svg",xe({width:"12px",height:"12px",viewBox:"0 0 12 12",ref:q},l),m?se.createElement("title",null,m):null,J||(J=se.createElement("g",{id:"\\u5206\\u6790",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},se.createElement("g",{id:"0.\\u6027\\u80FD-\\u5185\\u7F51-\\u9009\\u62E9\\u6807\\u7B7E",transform:"translate(-1194.000000, -133.000000)",fill:"#000000"},se.createElement("g",{id:"Group-21",transform:"translate(20.000000, 110.000000)"},se.createElement("g",{id:"\\u94FE\\u63A5",transform:"translate(1172.000000, 21.000000)"},se.createElement("rect",{id:"Rectangle",fillRule:"nonzero",opacity:0,x:0,y:0,width:16,height:16}),se.createElement("path",{d:"M11.91,7.92 C11.7153722,8.09503346 11.4186893,8.09033311 11.2297039,7.90922206 C11.0407184,7.72811102 11.0234032,7.43189657 11.19,7.23 L12.06,6.32 C12.709515,5.51696592 12.6264975,4.34816777 11.87,3.645 C11.115,2.86 10,2.79 9.37,3.45 L6.94,6 C6.29048502,6.80303408 6.37350246,7.97183223 7.13,8.675 C7.3238618,8.87001873 7.3238618,9.18498127 7.13,9.38 C7.0361167,9.47465633 6.90831877,9.52789916 6.775,9.52789916 C6.64168123,9.52789916 6.5138833,9.47465633 6.42,9.38 C5.29380253,8.29148422 5.21051969,6.51405308 6.23,5.325 L8.66,2.79 C9.705,1.7 11.48,1.79 12.61,2.99 C13.7040886,4.07696429 13.7802373,5.82185565 12.785,7 L11.91,7.92 Z M3.59,8.08 C3.78462784,7.90496654 4.0813107,7.90966689 4.27029614,8.09077794 C4.45928159,8.27188898 4.47659677,8.56810343 4.31,8.77 L3.44,9.68 C2.79048502,10.4830341 2.87350246,11.6518322 3.63,12.355 C4.385,13.14 5.5,13.21 6.13,12.55 L8.56,10 C9.20951498,9.19696592 9.12649754,8.02816777 8.37,7.325 C8.1761382,7.12998127 8.1761382,6.81501873 8.37,6.62 C8.4638833,6.52534367 8.59168123,6.47210084 8.725,6.47210084 C8.85831877,6.47210084 8.9861167,6.52534367 9.08,6.62 C10.2061975,7.70851578 10.2894803,9.48594692 9.27,10.675 L6.84,13.21 C5.795,14.3 4.02,14.21 2.89,13.01 C1.79591137,11.9230357 1.71976275,10.1781444 2.715,9 L3.59,8.08 Z",id:"Shape",fillOpacity:.65})))))))},Se=se.forwardRef(function(ae,i){return se.createElement(A,xe({svgRef:i},ae))}),Ae=t.p+"static/icon_link.2c6ce887.svg"},33336:function(We,De,t){"use strict";t.d(De,{K:function(){return rt},Z:function(){return bt}});var se=t(77335),J=t(85628),Pe=t(42098),xe=t(68591),ce=t.n(xe),ne=t(1155),A=t(22374),Se=t(53532),Ae=t(83325),ae=t(87243),i=function(a){var ee=a.children;return ee},q=i,m=t(29700);function l(G){return G!=null}var ge=function(a){var ee=a.itemPrefixCls,de=a.component,be=a.span,Ce=a.className,ue=a.style,$e=a.labelStyle,Ie=a.contentStyle,Je=a.bordered,fe=a.label,Ne=a.content,Ue=a.colon,He=de;if(Je){var Q;return A.createElement(He,{className:ce()((Q={},(0,se.Z)(Q,"".concat(ee,"-item-label"),l(fe)),(0,se.Z)(Q,"".concat(ee,"-item-content"),l(Ne)),Q),Ce),style:ue,colSpan:be},l(fe)&&A.createElement("span",{style:$e},fe),l(Ne)&&A.createElement("span",{style:Ie},Ne))}return A.createElement(He,{className:ce()("".concat(ee,"-item"),Ce),style:ue,colSpan:be},A.createElement("div",{className:"".concat(ee,"-item-container")},(fe||fe===0)&&A.createElement("span",{className:ce()("".concat(ee,"-item-label"),(0,se.Z)({},"".concat(ee,"-item-no-colon"),!Ue)),style:$e},fe),(Ne||Ne===0)&&A.createElement("span",{className:ce()("".concat(ee,"-item-content")),style:Ie},Ne)))},ve=ge;function oe(G,a,ee){var de=a.colon,be=a.prefixCls,Ce=a.bordered,ue=ee.component,$e=ee.type,Ie=ee.showLabel,Je=ee.showContent,fe=ee.labelStyle,Ne=ee.contentStyle;return G.map(function(Ue,He){var Q=Ue.props,Me=Q.label,Xe=Q.children,Fe=Q.prefixCls,it=Fe===void 0?be:Fe,ze=Q.className,Re=Q.style,st=Q.labelStyle,ot=Q.contentStyle,he=Q.span,v=he===void 0?1:he,V=Ue.key;return typeof ue=="string"?A.createElement(ve,{key:"".concat($e,"-").concat(V||He),className:ze,style:Re,labelStyle:(0,m.Z)((0,m.Z)({},fe),st),contentStyle:(0,m.Z)((0,m.Z)({},Ne),ot),span:v,colon:de,component:ue,itemPrefixCls:it,bordered:Ce,label:Ie?Me:null,content:Je?Xe:null}):[A.createElement(ve,{key:"label-".concat(V||He),className:ze,style:(0,m.Z)((0,m.Z)((0,m.Z)({},fe),Re),st),span:1,colon:de,component:ue[0],itemPrefixCls:it,bordered:Ce,label:Me}),A.createElement(ve,{key:"content-".concat(V||He),className:ze,style:(0,m.Z)((0,m.Z)((0,m.Z)({},Ne),Re),ot),span:v*2-1,component:ue[1],itemPrefixCls:it,bordered:Ce,content:Xe})]})}var c=function(a){var ee=A.useContext(rt),de=a.prefixCls,be=a.vertical,Ce=a.row,ue=a.index,$e=a.bordered;return be?A.createElement(A.Fragment,null,A.createElement("tr",{key:"label-".concat(ue),className:"".concat(de,"-row")},oe(Ce,a,(0,m.Z)({component:"th",type:"label",showLabel:!0},ee))),A.createElement("tr",{key:"content-".concat(ue),className:"".concat(de,"-row")},oe(Ce,a,(0,m.Z)({component:"td",type:"content",showContent:!0},ee)))):A.createElement("tr",{key:ue,className:"".concat(de,"-row")},oe(Ce,a,(0,m.Z)({component:$e?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},ee)))},Qe=c,rt=A.createContext({}),vt={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function H(G,a){if(typeof G=="number")return G;if((0,Pe.Z)(G)==="object")for(var ee=0;ee<ae.c4.length;ee++){var de=ae.c4[ee];if(a[de]&&G[de]!==void 0)return G[de]||vt[de]}return 3}function ye(G,a,ee){var de=G;return(a===void 0||a>ee)&&(de=(0,Ae.Tm)(G,{span:ee})),de}function Ot(G,a){var ee=(0,ne.Z)(G).filter(function(ue){return ue}),de=[],be=[],Ce=a;return ee.forEach(function(ue,$e){var Ie,Je=(Ie=ue.props)===null||Ie===void 0?void 0:Ie.span,fe=Je||1;if($e===ee.length-1){be.push(ye(ue,Je,Ce)),de.push(be);return}fe<Ce?(Ce-=fe,be.push(ue)):(be.push(ye(ue,fe,Ce)),de.push(be),Ce=a,be=[])}),de}function Oe(G){var a,ee=G.prefixCls,de=G.title,be=G.extra,Ce=G.column,ue=Ce===void 0?vt:Ce,$e=G.colon,Ie=$e===void 0?!0:$e,Je=G.bordered,fe=G.layout,Ne=G.children,Ue=G.className,He=G.style,Q=G.size,Me=G.labelStyle,Xe=G.contentStyle,Fe=A.useContext(Se.E_),it=Fe.getPrefixCls,ze=Fe.direction,Re=it("descriptions",ee),st=A.useState({}),ot=(0,J.Z)(st,2),he=ot[0],v=ot[1],V=H(ue,he);A.useEffect(function(){var Be=ae.ZP.subscribe(function(Ke){(0,Pe.Z)(ue)==="object"&&v(Ke)});return function(){ae.ZP.unsubscribe(Be)}},[]);var re=Ot(Ne,V),_e=A.useMemo(function(){return{labelStyle:Me,contentStyle:Xe}},[Me,Xe]);return A.createElement(rt.Provider,{value:_e},A.createElement("div",{className:ce()(Re,(a={},(0,se.Z)(a,"".concat(Re,"-").concat(Q),Q&&Q!=="default"),(0,se.Z)(a,"".concat(Re,"-bordered"),!!Je),(0,se.Z)(a,"".concat(Re,"-rtl"),ze==="rtl"),a),Ue),style:He},(de||be)&&A.createElement("div",{className:"".concat(Re,"-header")},de&&A.createElement("div",{className:"".concat(Re,"-title")},de),be&&A.createElement("div",{className:"".concat(Re,"-extra")},be)),A.createElement("div",{className:"".concat(Re,"-view")},A.createElement("table",null,A.createElement("tbody",null,re.map(function(Be,Ke){return A.createElement(Qe,{key:Ke,index:Ke,colon:Ie,prefixCls:Re,vertical:fe==="vertical",bordered:Je,row:Be})}))))))}Oe.Item=q;var bt=Oe},39489:function(We,De,t){"use strict";var se=t(49132),J=t.n(se),Pe=t(35487),xe=t.n(Pe)},91959:function(We,De,t){"use strict";t.d(De,{Z:function(){return q}});var se,J=new Uint8Array(16);function Pe(){if(!se&&(se=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(J)}var xe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ce(m){return typeof m=="string"&&xe.test(m)}for(var ne=ce,A=[],Se=0;Se<256;++Se)A.push((Se+256).toString(16).substr(1));function Ae(m){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ge=(A[m[l+0]]+A[m[l+1]]+A[m[l+2]]+A[m[l+3]]+"-"+A[m[l+4]]+A[m[l+5]]+"-"+A[m[l+6]]+A[m[l+7]]+"-"+A[m[l+8]]+A[m[l+9]]+"-"+A[m[l+10]]+A[m[l+11]]+A[m[l+12]]+A[m[l+13]]+A[m[l+14]]+A[m[l+15]]).toLowerCase();if(!ne(ge))throw TypeError("Stringified UUID is invalid");return ge}var ae=Ae;function i(m,l,ge){m=m||{};var ve=m.random||(m.rng||Pe)();if(ve[6]=ve[6]&15|64,ve[8]=ve[8]&63|128,l){ge=ge||0;for(var oe=0;oe<16;++oe)l[ge+oe]=ve[oe];return l}return ae(ve)}var q=i}}]);
