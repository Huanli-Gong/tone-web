(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5880],{32643:function(ar){ar.exports={popover_job:"popover_job___LFn9C",result_table_row:"result_table_row___2ahVb"}},44803:function(ar,Te,n){"use strict";n.r(Te),n.d(Te,{default:function(){return at}});var s=n(20228),f=n(11382),g=n(89032),$e=n(15746),ye=n(32059),Ne=n(95300),te=n(7277),Ve=n(49111),T=n(19650),oe=n(402),x=n(97272),w=n(39428),D=n(3182),p=n(2824),N=n(13062),V=n(71230),y=n(24793),Xe=n(97183),k=n(20310),dr=n(14965),sr=n(36577),ir=n(60035),H=n(12788),Z=n(67294),ze=n(79496),or=n(9479),Ge=or.kL,we=function(Q,U,b){return Q.reduce(function(M,Y){return M.concat(Object.keys(Y).reduce(function(B,I){if(I==="date")return B;var Ze={date:Y.date,name:I.split(/(?=[A-Z])/).join(" "),count:Y[I]};return b?~I.indexOf(U)?B.concat(Ze):B:I.indexOf(U)===-1?B.concat(Ze):B},[]))},[])},Fe=function(Q,U){var b=new Ge({container:Q,autoFit:!0});return b.data(U),b.scale({count:{nice:!0}}),b.axis("date",{tickLine:{alignTick:!0}}),b.legend({position:"top-right"}),b.tooltip({showCrosshairs:!0,shared:!0}),b.line().position("date*count").color("name").shape("smooth"),b.point().position("date*count").color("name").shape("circle").style({stroke:"#fff",lineWidth:1}),b.render(),b},i=n(24480),a=n(57663),t=n(71577),v=n(62350),e=n(24565),G=n(22385),ue=n(89456),R=n(11849),Ye=n(34792),Be=n(48086),Qe=n(93224),Le=n(72529),Ae=n(96486),Ee=n.n(Ae),_e=n(86213),le=n(8990),hr=n(20136),qe=n(55241),er=n(66456),He=n(79764),ve=n(47673),ce=n(4107),yr=n(43358),ur=n(34041),rr=n(76570),fr=n(19675),c=n(16917),E=n(20009),me=n(37763),ge=n.n(me),de=n(90105),lr=n(32643),Ie=n.n(lr),r=n(85893),tr=function(Q){var U=(0,c.YB)(),b=U.formatMessage,M=Q.report_li;if(M.length===0)return(0,r.jsx)(r.Fragment,{});var Y=(0,E.UO)(),B=Y.ws_id,I=function(){var l=(0,D.Z)((0,w.Z)().mark(function u(o){return(0,w.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:window.open("/ws/".concat(B,"/test_report/").concat(o?o.id:M[0].id));case 1:case"end":return d.stop()}},u)}));return function(o){return l.apply(this,arguments)}}();if(M.length===1)return(0,r.jsx)(x.Z.Link,{style:{cursor:"pointer"},onClick:function(){return I(null)},children:"\u67E5\u770B\u62A5\u544A"});var Ze=(0,Z.useRef)(null),be=(0,Z.useState)(""),W=(0,p.Z)(be,2),xe=W[0],Se=W[1],We=(0,Z.useState)(""),j=(0,p.Z)(We,2),_=j[0],De=j[1],ne=(0,Z.useState)(""),Ce=(0,p.Z)(ne,2),ae=Ce[0],Je=Ce[1],je=(0,Z.useState)(""),he=(0,p.Z)(je,2),pe=he[0],q=he[1],fe=(0,Z.useState)(!1),se=(0,p.Z)(fe,2),K=se[0],Ue=se[1],ke=(0,Z.useState)([]),ee=(0,p.Z)(ke,2),Re=ee[0],P=ee[1];(0,Z.useEffect)(function(){K&&h()},[K]);var h=function(){var l=(0,D.Z)((0,w.Z)().mark(function u(o){var F,d,L;return(0,w.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return F=o&&o.replace(/\s*/g,""),X.next=3,(0,de.tR)({keyword:F});case 3:d=X.sent,L=d.data,P(L||[]);case 6:case"end":return X.stop()}},u)}));return function(o){return l.apply(this,arguments)}}(),m=function(u,o,F){o==null||o(),Se(u[0]),De(F)},S=function(u){u(),Se("")},C=function(u){u(),q("")},z=function(u,o,F){o==null||o(),q(u[0]),Je(F)},O=function(u,o){return{filterDropdown:function(d){var L=d.setSelectedKeys,re=d.selectedKeys,X=d.confirm,A=d.clearFilters;return(0,r.jsx)("div",{style:{padding:8},children:(0,r.jsxs)(T.Z,{direction:"vertical",children:[(0,r.jsx)(ur.Z,{allowClear:!0,defaultOpen:!0,filterOption:!1,showSearch:!0,onSearch:h,style:{width:"100%"},onChange:function(Pe){return L(Pe?[Pe]:[])},showArrow:!1,autoFocus:!0,value:re[0],placeholder:"".concat(b({id:"operation.search"})).concat(o),children:Re.map(function(J){return(0,r.jsx)(ur.Z.Option,{value:J.last_name,children:J.last_name},J.id)})}),(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(t.Z,{type:"primary",onClick:function(){return z(re,X,u)},icon:(0,r.jsx)(rr.Z,{}),size:"small",style:{width:90},children:(0,r.jsx)(c._H,{id:"operation.search"})}),(0,r.jsx)(t.Z,{onClick:function(){return C(A)},size:"small",style:{width:90},children:(0,r.jsx)(c._H,{id:"operation.reset"})})]})]})})},filterIcon:function(d){return(0,r.jsx)(rr.Z,{style:{color:d?"#1890ff":void 0}})},onFilter:function(d,L){return L[u]?L[u]===d:""},render:function(d){return ae===u?(0,r.jsx)(ge(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[pe],autoEscape:!0,textToHighlight:d?d.toString():""}):d}}},$=function(u,o){return{filterDropdown:function(d){var L=d.setSelectedKeys,re=d.selectedKeys,X=d.confirm,A=d.clearFilters;return(0,r.jsxs)("div",{style:{padding:8},children:[(0,r.jsx)(ce.Z,{ref:Ze,placeholder:"".concat(b({id:"operation.search"})," ").concat(o),value:re[0],onChange:function(Pe){return L(Pe.target.value?[Pe.target.value]:[])},onPressEnter:function(){return m(re,X,u)},style:{width:188,marginBottom:8,display:"block"}}),(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(t.Z,{type:"primary",onClick:function(){return m(re,X,u)},icon:(0,r.jsx)(rr.Z,{}),size:"small",style:{width:90},children:(0,r.jsx)(c._H,{id:"operation.search"})}),(0,r.jsx)(t.Z,{onClick:function(){return S(A)},size:"small",style:{width:90},children:(0,r.jsx)(c._H,{id:"operation.reset"})})]})]})},filterIcon:function(d){return(0,r.jsx)(rr.Z,{style:{color:d?"#1890ff":void 0}})},onFilter:function(d,L){return L[u]?L[u].toString().toLowerCase().includes(d.toLowerCase()):""},render:function(d){return _===u?(0,r.jsx)(ge(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[xe],autoEscape:!0,textToHighlight:d?d.toString():""}):d}}},ie=[(0,R.Z)({dataIndex:"name",title:b({id:"ws.dashboard.report.name"}),width:165,ellipsis:!0},$("name",b({id:"ws.dashboard.report.name"}))),(0,R.Z)({dataIndex:"creator_name",width:100,title:b({id:"ws.dashboard.report.creator_name"})},O("creator_name",b({id:"ws.dashboard.report.creator_name"}))),{dataIndex:"gmt_created",title:b({id:"ws.dashboard.report.gmt_created"}),width:200}];return(0,r.jsx)(qe.Z,{trigger:"click",placement:"left",visible:K,onVisibleChange:function(u){return Ue(u)},overlayClassName:Ie().popover_job,title:(0,r.jsx)(c._H,{id:"ws.dashboard.view.report"}),content:(0,r.jsx)(He.Z,{size:"small",rowKey:"id",columns:ie,dataSource:M,scroll:{y:244},onRow:function(u){return{onClick:function(){return I(u)}}}}),children:(0,r.jsxs)(x.Z.Link,{style:{cursor:"pointer"},children:[(0,r.jsx)(c._H,{id:"ws.dashboard.view.report"}),(0,r.jsx)(fr.Z,{})]})})},cr=tr,pr=n(50130),vr=n(85450),mr=n(10753),st=n(57338),Lr=n(440),it=n(13254),wr=n(14277),ot=n(71194),Ar=n(50146),ut=n(9715),gr=n(20526),Hr=n(10279),br=n(8142),xr,Ir=(0,H.ZP)(gr.Z)(xr||(xr=(0,k.Z)([`
    .ant-form-item {
        margin-bottom: 0px;
    }
`]))),Mr=function(Q,U){var b,M=Q.onOk,Y=(0,E.UO)(),B=Y.ws_id,I=Y.project_id,Ze=Z.useState(!1),be=(0,p.Z)(Ze,2),W=be[0],xe=be[1],Se=gr.Z.useForm(),We=(0,p.Z)(Se,1),j=We[0],_=Z.useState(!1),De=(0,p.Z)(_,2),ne=De[0],Ce=De[1],ae={ws_id:B,page_num:1,page_size:20},Je=Z.useState(ae),je=(0,p.Z)(Je,2),he=je[0],pe=je[1],q=Z.useState([]),fe=(0,p.Z)(q,2),se=fe[0],K=fe[1],Ue=Z.useState(void 0),ke=(0,p.Z)(Ue,2),ee=ke[0],Re=ke[1],P=(0,Hr.ZP)(function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he;return(0,br.YK)(u)},{debounceInterval:300,manual:!0}),h=P.data,m=P.loading,S=P.run,C=P.mutate;Z.useEffect(function(){Re(h)},[h]);var z=function(){var u=(0,D.Z)((0,w.Z)().mark(function o(F){var d,L,re,X,A,J,Pe,jr;return(0,w.Z)().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(d=F.target,L=d.clientHeight,re=d.scrollHeight,X=d.scrollTop,L+X!==re){Ke.next=11;break}if(A=he.page_num+1,!(A<=(h==null?void 0:h.total_page))){Ke.next=11;break}return Pe=(0,R.Z)((0,R.Z)({},he),{},{page_num:he.page_num+1}),pe(Pe),Ke.next=9,(0,br.YK)(Pe);case 9:jr=Ke.sent,Re((0,R.Z)((0,R.Z)({},jr),{},{data:ee==null||(J=ee.data)===null||J===void 0?void 0:J.concat(jr.data)}));case 11:case"end":return Ke.stop()}},o)}));return function(F){return u.apply(this,arguments)}}(),O=function(o){S((0,R.Z)((0,R.Z)({},ae),{},{name:o}))};Z.useImperativeHandle(U,function(){return{show:function(o){K(o),xe(!0),j.resetFields(),S()}}});var $=function(){xe(!1),K([]),Re(void 0),C(void 0),pe(ae),j.resetFields()},ie=function(){var u=(0,D.Z)((0,w.Z)().mark(function o(){var F,d,L,re;return(0,w.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,j.validateFields();case 2:if(F=A.sent,!ne){A.next=5;break}return A.abrupt("return");case 5:return Ce(!0),A.next=8,(0,ze.RF)((0,R.Z)((0,R.Z)({},F),{},{ws_id:B,job_list:se.map(function(J){return J.id})}));case 8:if(d=A.sent,L=d.code,re=d.msg,Ce(!1),L===200){A.next=15;break}return j.setFields([{name:"project_id",errors:[re]}]),A.abrupt("return");case 15:M==null||M(),$();case 17:case"end":return A.stop()}},o)}));return function(){return u.apply(this,arguments)}}(),l=function(){var u=(0,D.Z)((0,w.Z)().mark(function o(){return(0,w.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:j.validateFields().then(function(){Ar.Z.confirm({title:"\u63D0\u793A",content:(0,r.jsxs)(T.Z,{style:{width:"100%"},direction:"vertical",children:[(0,r.jsx)(x.Z.Text,{children:"\u66F4\u6539\u9879\u76EE\u4FE1\u606F\u540E\u53EF\u80FD\u5F71\u54CD\u4EE5\u4E0B\u5386\u53F2\u6570\u636E\u5C55\u793A\uFF1A"}),(0,r.jsx)(x.Z.Paragraph,{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"\u8BA1\u5212\u89C6\u56FE"}),(0,r.jsx)("li",{children:"\u6D4B\u8BD5\u62A5\u544A"}),(0,r.jsx)("li",{children:"\u65F6\u5E8F\u5206\u6790"})]})})]}),onOk:ie})});case 1:case"end":return d.stop()}},o)}));return function(){return u.apply(this,arguments)}}();return(0,r.jsx)(Lr.Z,{open:W,onClose:$,width:480,destroyOnClose:!0,title:"\u66F4\u6539\u9879\u76EE",maskClosable:!1,bodyStyle:{padding:0},footer:(0,r.jsx)(V.Z,{justify:"end",children:(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(t.Z,{type:"primary",onClick:l,loading:ne,children:"\u786E\u5B9A"}),(0,r.jsx)(t.Z,{onClick:$,children:"\u53D6\u6D88"})]})}),children:(0,r.jsxs)(T.Z,{style:{width:"100%"},direction:"vertical",children:[(0,r.jsx)(Ir,{form:j,layout:"vertical",style:{padding:16},children:(0,r.jsx)(gr.Z.Item,{name:"project_id",label:"\u9009\u62E9\u9879\u76EE",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE"}],children:(0,r.jsx)(ur.Z,{onPopupScroll:z,filterOption:!1,defaultActiveFirstOption:!1,onSearch:Ee().debounce(O,300),showSearch:!0,allowClear:!0,notFoundContent:m?(0,r.jsx)(f.Z,{}):(0,r.jsx)(wr.Z,{image:wr.Z.PRESENTED_IMAGE_SIMPLE}),options:ee==null||(b=ee.data)===null||b===void 0?void 0:b.map(function(u){return{label:u.name,value:u.id,disabled:u.id===+I}})})})}),(0,r.jsx)("div",{style:{width:"100%",height:8,background:"#d9d9d9"}}),(0,r.jsxs)(T.Z,{style:{padding:16},direction:"vertical",children:[(0,r.jsx)(x.Z.Text,{strong:!0,children:"\u5DF2\u9009Job"}),(0,r.jsx)(T.Z,{direction:"vertical",size:0,style:{width:"100%"},children:se.map(function(u){return(0,r.jsx)(x.Z.Text,{ellipsis:{tooltip:!0},children:"#".concat(u.id,"  ").concat(u.name)},u.id)})})]})]})})},Jr=Z.forwardRef(Mr),Ur=["code","msg"],Sr,Cr,Kr=(0,H.ZP)(V.Z)(Sr||(Sr=(0,k.Z)([`
    width: 100%;
    // max-height: calc( 100% - 65px - 72px );
`]))),nr=H.ZP.span(Cr||(Cr=(0,k.Z)([`
    display: inline-block;
    min-width: 33px;
    padding-left: 5px;
    padding-right: 5px;
    height: 18px;
    border-radius: 9px;
    text-align: center;
    color: #ffffff;
    line-height: 18px;
    cursor: pointer;
`]))),Nr=function(){var Q=(0,c.YB)(),U=Q.formatMessage,b=(0,c.Kd)()==="en-US",M=(0,E.UO)(),Y=M.ws_id,B=M.project_id,I={page_num:1,page_size:10,ws_id:Y,project_id:B},Ze=(0,Z.useState)(I),be=(0,p.Z)(Ze,2),W=be[0],xe=be[1],Se=(0,Z.useRef)(),We=(0,Z.useState)({data:[],total:0}),j=(0,p.Z)(We,2),_=j[0],De=j[1],ne=(0,c.md)(),Ce=(0,Z.useState)(!0),ae=(0,p.Z)(Ce,2),Je=ae[0],je=ae[1],he=(0,Z.useState)([]),pe=(0,p.Z)(he,2),q=pe[0],fe=pe[1];(0,Z.useEffect)(function(){K()},[]);var se=(0,Z.useRef)(),K=function(){var P=(0,D.Z)((0,w.Z)().mark(function h(){var m,S,C,z,O,$=arguments;return(0,w.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return m=$.length>0&&$[0]!==void 0?$[0]:I,je(!0),l.next=4,(0,le.ZD)(m);case 4:if(S=l.sent,C=S.code,z=S.msg,O=(0,Qe.Z)(S,Ur),C===200){l.next=10;break}return l.abrupt("return",(0,i.EV)(C,z));case 10:De(O),xe(m),je(!1);case 13:case"end":return l.stop()}},h)}));return function(){return P.apply(this,arguments)}}(),Ue=function(){var P=(0,D.Z)((0,w.Z)().mark(function h(m){var S,C,z,O,$;return(0,w.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,le.yi)({job_id:m.id});case 2:if(S=l.sent,C=S.code,z=S.msg,C===200){l.next=8;break}return(0,i.EV)(C,z),l.abrupt("return");case 8:return O=W.page_num,$=W.page_size,l.next=11,K({ws_id:Y,project_id:B,page_num:O,page_size:$});case 11:Be.default.success(U({id:"operation.success"}));case 12:case"end":return l.stop()}},h)}));return function(m){return P.apply(this,arguments)}}(),ke=function(h){return se.current.show(h)},ee=[{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.id"}),dataIndex:"id",fixed:"left",className:"dashboard_job_list_hover_name",width:80,render:function(h){return(0,r.jsx)(x.Z.Link,{target:"_blank",href:"/ws/".concat(Y,"/test_result/").concat(h),children:h})}},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.name"}),dataIndex:"name",width:200,ellipsis:{showTitle:!1},className:"dashboard_job_list_hover_name",render:function(h,m){return(0,r.jsx)(mr.K,{ellipsis:{tooltip:h},children:(0,r.jsx)(x.Z.Link,{href:"/ws/".concat(Y,"/test_result/").concat(m.id),target:"_blank",children:h})})}},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.state"}),width:120,dataIndex:"state",render:function(h,m){return(0,r.jsx)(Le.JQ,(0,R.Z)({},m))}},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.test_type"}),width:100,dataIndex:"test_type"},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.test_result"}),dataIndex:"test_result",width:160,render:function(h){var m=JSON.parse(h);return Ee().isNull(m)?(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(nr,{style:{background:"#649FF6"},children:"-"}),(0,r.jsx)(nr,{style:{background:"#81BF84"},children:"-"}),(0,r.jsx)(nr,{style:{background:"#C84C5A"},children:"-"})]}):(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(nr,{style:{background:"#649FF6"},children:m.total}),(0,r.jsx)(nr,{style:{background:"#81BF84"},children:m.pass}),(0,r.jsx)(nr,{style:{background:"#C84C5A"},children:m.fail})]})}},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.project_name"}),width:120,dataIndex:"project_name",ellipsis:{showTitle:!1},render:function(h){return h&&(0,r.jsx)(ue.Z,{title:h,children:h})}},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.creator_name"}),width:80,ellipsis:!0,dataIndex:"creator_name"},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.start_time"}),width:180,dataIndex:"start_time",ellipsis:!0},{title:(0,r.jsx)(c._H,{id:"ws.dashboard.job.end_time"}),width:180,ellipsis:!0,dataIndex:"end_time"},{title:(0,r.jsx)(c._H,{id:"Table.columns.operation"}),width:b?220:160,fixed:"right",key:"operation",render:function(h){return(0,r.jsxs)(T.Z,{children:[(0,r.jsx)(c.Nv,{accessible:ne.WsTourist(),children:(0,r.jsx)(c.Nv,{accessible:ne.WsMemberOperateSelf(h.creator),fallback:(0,r.jsxs)(T.Z,{children:[h.created_from==="offline"?(0,r.jsx)(x.Z.Text,{style:{color:"#ccc",cursor:"no-drop"},children:(0,r.jsx)(c._H,{id:"ws.dashboard.operation.rerun"})}):(0,r.jsx)("span",{onClick:function(){return(0,i.WR)()},children:(0,r.jsx)(x.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,r.jsx)(c._H,{id:"ws.dashboard.operation.rerun"})})}),(0,r.jsx)("span",{onClick:function(){return(0,i.WR)()},children:(0,r.jsx)(x.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,r.jsx)(c._H,{id:"operation.delete"})})})]}),children:(0,r.jsxs)(T.Z,{children:[h.created_from==="offline"?(0,r.jsx)(x.Z.Text,{style:{color:"#ccc",cursor:"no-drop"},children:(0,r.jsx)(c._H,{id:"ws.dashboard.operation.rerun"})}):(0,r.jsx)("span",{onClick:function(){return ke(h)},children:(0,r.jsx)(x.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,r.jsx)(c._H,{id:"ws.dashboard.operation.rerun"})})}),(0,r.jsx)(e.Z,{title:(0,r.jsx)(c._H,{id:"delete.prompt"}),onConfirm:function(){return Ue(h)},okText:(0,r.jsx)(c._H,{id:"operation.confirm"}),cancelText:(0,r.jsx)(c._H,{id:"operation.cancel"}),children:(0,r.jsx)(x.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,r.jsx)(c._H,{id:"operation.delete"})})})]})})}),(0,r.jsx)(cr,(0,R.Z)({},h))]})}}],Re=function(){Be.default.success("\u64CD\u4F5C\u6210\u529F\uFF01");var h=Math.ceil(((_==null?void 0:_.total)-(q==null?void 0:q.length))/W.page_size)||1,m=(0,R.Z)((0,R.Z)({},W),{},{page_num:h});h<W.page_num?K(m):K(W),fe([])};return(0,r.jsxs)(f.Z,{spinning:Je,children:[(0,r.jsxs)(Kr,{children:[(0,r.jsx)(c.Nv,{accessible:ne.WsMemberNoPermission(),children:(0,r.jsx)(t.Z,{style:{marginBottom:10},type:"primary",disabled:q.length===0,onClick:function(){return Se.current.show(q)},children:"\u66F4\u6539\u9879\u76EE"})}),(0,r.jsx)(vr.sL,{rowKey:"id",name:"ws-dashboard-project-job-list",columns:ee,refreshDeps:[b,Y,ne],rowClassName:Ie().result_table_row,dataSource:_.data,pagination:!1,style:{width:"100%"},size:"small",rowSelection:{selectedRowKeys:q.map(function(P){return P.id}),onChange:function(h,m){fe(m)}}}),(0,r.jsx)(_e.Z,{total:_==null?void 0:_.total,currentPage:W==null?void 0:W.page_num,pageSize:W==null?void 0:W.page_size,onPageChange:function(h,m){return K({ws_id:Y,project_id:B,page_num:h,page_size:m})}})]}),(0,r.jsx)(pr.Z,{ref:se}),(0,r.jsx)(Jr,{ref:Se,onOk:Re})]})},Vr=Nr,Xr=n(30381),Oe=n.n(Xr),Rr,Pr,Tr,$r,zr,Fr,Er,Or,Wr,Dr,Gr=sr.Z.RangePicker,Qr=(0,H.ZP)(Xe.Z)(Rr||(Rr=(0,k.Z)([`
    min-height:unset;
    overflow:auto;    
    display: block;
    padding:20px;
    `,`
`])),function(Me){var Q=Me.height;return Q?"height:".concat(Q,"px;"):"unset"}),Zr=H.ZP.div(Pr||(Pr=(0,k.Z)([`
    background: #FFFFFF;
`]))),_r=(0,H.ZP)(Zr)(Tr||(Tr=(0,k.Z)([`
    height: 103px;
    padding-left:24px;
    box-shadow: 0 0 10px 0 rgba(0,0,0,0.06);
    border-radius: 4px;
    padding-right:24px;
    margin-bottom:10px;
    padding-top:16px;
    padding-bottom:24px;
    h3 {
        margin-bottom:0;
        font-size:30px;
    }
    .ant-space-item span {
        font-size:12px;
        color: rgba(0,0,0,0.50);
    }
`]))),qr=(0,H.ZP)(V.Z)($r||($r=(0,k.Z)([`
    .ant-statistic {
        margin-right:49px;
    }
`]))),et=(0,H.ZP)(Zr)(zr||(zr=(0,k.Z)([`
    // max-height:555px;
    padding-left:20px;
    padding-right:20px;
    margin-bottom:10px;
`]))),rt=H.ZP.div(Fr||(Fr=(0,k.Z)([`
    height:65px;
    line-height:65px;
    font-size:18px;
    color:#000;
`]))),kr=(0,H.ZP)(Zr)(Er||(Er=(0,k.Z)([`
    height:385px;
    margin-bottom:0;
    padding:24px;
`]))),Yr=(0,H.ZP)(V.Z)(Or||(Or=(0,k.Z)([`
    height:calc( 100% - 300px );
    width:100%;
`]))),Br=H.ZP.div(Wr||(Wr=(0,k.Z)([`
    height:300px;
    overflow:hidden;
    width:100%;
`]))),tt=H.ZP.div(Dr||(Dr=(0,k.Z)([`
    float:right;
`]))),nt=function(Q){var U,b=(0,c.YB)(),M=b.formatMessage,Y=(0,E.UO)(),B=Y.ws_id,I=Y.project_id,Ze=(0,ir.CR)(),be=Ze.height,W=(0,Z.useRef)(),xe=(0,Z.useRef)(),Se=(0,Z.useState)(null),We=(0,p.Z)(Se,2),j=We[0],_=We[1],De=(0,Z.useState)(!1),ne=(0,p.Z)(De,2),Ce=ne[0],ae=ne[1],Je=(0,Z.useState)(!1),je=(0,p.Z)(Je,2),he=je[0],pe=je[1],q=function(){var m=(0,D.Z)((0,w.Z)().mark(function S(){var C,z,O,$;return(0,w.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,ze.FQ)({ws_id:B,project_id:I});case 2:if(C=l.sent,z=C.data,O=C.code,$=C.msg,O===200){l.next=8;break}return l.abrupt("return",(0,i.EV)(O,$));case 8:_(z);case 9:case"end":return l.stop()}},S)}));return function(){return m.apply(this,arguments)}}(),fe=(0,Z.useRef)(),se=(0,Z.useRef)(),K=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Ue(S),ke(S)},Ue=function(){var m=(0,D.Z)((0,w.Z)().mark(function S(){var C,z,O,$,ie,l=arguments;return(0,w.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return C=l.length>0&&l[0]!==void 0?l[0]:[],ae(!0),o.prev=2,o.next=5,(0,ze.tn)({ws_id:B,project_id:I,chart_type:"job",start_time:C[0]||"",end_time:C[1]||""});case 5:if(z=o.sent,O=z.data,$=z.code,ie=z.msg,ae(!1),$===200){o.next=12;break}return o.abrupt("return",(0,i.EV)($,ie));case 12:fe.current?fe.current.changeData(we(O,"Job",!0)):fe.current=Fe(W.current,we(O,"Job",!0)),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),ae(!1);case 18:case"end":return o.stop()}},S,null,[[2,15]])}));return function(){return m.apply(this,arguments)}}(),ke=function(){var m=(0,D.Z)((0,w.Z)().mark(function S(){var C,z,O,$,ie,l=arguments;return(0,w.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return C=l.length>0&&l[0]!==void 0?l[0]:[],pe(!0),o.prev=2,o.next=5,(0,ze.tn)({ws_id:B,project_id:I,chart_type:"case",start_time:C[0]||"",end_time:C[1]||""});case 5:if(z=o.sent,O=z.data,$=z.code,ie=z.msg,pe(!1),$===200){o.next=12;break}return o.abrupt("return",(0,i.EV)($,ie));case 12:se.current?se.current.changeData(we(O,"Job",!1)):se.current=Fe(xe.current,we(O,"Job",!1)),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),pe(!1);case 18:case"end":return o.stop()}},S,null,[[2,15]])}));return function(){return m.apply(this,arguments)}}();(0,Z.useEffect)(function(){q(),K()},[]);var ee=Oe()().subtract(30,"days").format("YYYY-MM-DD"),Re=Oe()().format("YYYY-MM-DD"),P=M({id:"ws.dashboard.today"}),h=M({id:"ws.dashboard.one.month"});return(0,r.jsxs)(Qr,{height:be-50,children:[(0,r.jsx)(_r,{children:(0,r.jsxs)(V.Z,{justify:"space-between",align:"middle",children:[(0,r.jsxs)(T.Z,{direction:"vertical",children:[(0,r.jsx)(x.Z.Title,{level:3,children:j==null?void 0:j.project_name}),(0,r.jsx)(x.Z.Text,{children:j==null?void 0:j.project_description})]}),(0,r.jsxs)(qr,{children:[(0,r.jsx)(te.Z,{title:"Pending",value:j==null?void 0:j.pending_num}),(0,r.jsx)(te.Z,{title:"Running",value:j==null?void 0:j.running_num}),(0,r.jsx)(te.Z,{title:"Complete",value:j==null?void 0:j.complete_num}),(0,r.jsx)(te.Z,{title:"Fail",value:j==null?void 0:j.fail_num})]})]})}),(0,r.jsxs)(et,{children:[(0,r.jsx)(rt,{children:(0,r.jsx)(c._H,{id:"ws.dashboard.list.details"})}),(0,r.jsx)(Vr,{})]}),(0,r.jsxs)(kr,{children:[(0,r.jsxs)(Yr,{align:"middle",children:[(0,r.jsxs)($e.Z,{span:24,children:[(0,r.jsx)(x.Z.Text,{children:(0,r.jsx)(c._H,{id:"ws.dashboard.trend.chart"})}),(0,r.jsx)(tt,{children:(0,r.jsx)(Gr,{defaultValue:[Oe()(ee),Oe()(Re)],ranges:(U={},(0,ye.Z)(U,P,[Oe()(),Oe()()]),(0,ye.Z)(U,h,[Oe()().startOf("month"),Oe()().endOf("month")]),U),format:"YYYY-MM-DD",onChange:function(S,C){return K(C)}})})]}),(0,r.jsx)($e.Z,{span:24,children:(0,r.jsx)(x.Z.Text,{type:"secondary",children:(0,r.jsx)(c._H,{id:"ws.dashboard.job.success.failure"})})})]}),(0,r.jsx)(f.Z,{spinning:Ce,children:(0,r.jsx)(Br,{ref:W})})]}),(0,r.jsxs)(kr,{children:[(0,r.jsx)(Yr,{align:"middle",children:(0,r.jsx)(x.Z.Text,{type:"secondary",children:(0,r.jsx)(c._H,{id:"ws.dashboard.case.failed"})})}),(0,r.jsx)(f.Z,{spinning:he,children:(0,r.jsx)(Br,{ref:xe})})]})]})},at=nt},79496:function(ar,Te,n){"use strict";n.d(Te,{sk:function(){return $e},tn:function(){return Ne},FQ:function(){return Ve},RF:function(){return w}});var s=n(39428),f=n(3182),g=n(16917);function $e(p){return ye.apply(this,arguments)}function ye(){return ye=(0,f.Z)((0,s.Z)().mark(function p(N){return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,g.WY)("/api/sys/ws_data_list/",{params:N}));case 1:case"end":return y.stop()}},p)})),ye.apply(this,arguments)}function Ne(p){return te.apply(this,arguments)}function te(){return te=(0,f.Z)((0,s.Z)().mark(function p(N){return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,g.WY)("/api/sys/ws_chart/",{params:N}));case 1:case"end":return y.stop()}},p)})),te.apply(this,arguments)}function Ve(p){return T.apply(this,arguments)}function T(){return T=(0,f.Z)((0,s.Z)().mark(function p(N){return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,g.WY)("/api/sys/ws_project_data/",{params:N}));case 1:case"end":return y.stop()}},p)})),T.apply(this,arguments)}function oe(p){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function p(N){return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",request("/api/sys/ws_project_job/",{params:N}));case 1:case"end":return y.stop()}},p)})),x.apply(this,arguments)}function w(p){return D.apply(this,arguments)}function D(){return D=(0,f.Z)((0,s.Z)().mark(function p(N){return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,g.WY)("/api/sys/workspace/change_job_project/",{data:N,method:"POST"}));case 1:case"end":return y.stop()}},p)})),D.apply(this,arguments)}},8142:function(ar,Te,n){"use strict";n.d(Te,{VX:function(){return $e},Ir:function(){return ye},ry:function(){return Ne},nM:function(){return te},Zf:function(){return Ve},OV:function(){return T},c0:function(){return oe},lk:function(){return x},$L:function(){return w},YK:function(){return D},ty:function(){return p},th:function(){return N},_L:function(){return V},E7:function(){return y},h4:function(){return Xe},GW:function(){return k},cQ:function(){return dr},fW:function(){return sr},xN:function(){return ir},h5:function(){return H},yE:function(){return Z},vS:function(){return ze},Qj:function(){return or},o_:function(){return Ge},NA:function(){return we},ff:function(){return Fe}});var s=n(39428),f=n(3182),g=n(16917),$e=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),ye=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/",{method:"delete",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Ne=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),te=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Ve=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/drag/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),T=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/product/drag/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),oe=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/drag/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),x=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/drag/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),w=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),D=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),p=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),N=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/project/",{method:"delete",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),V=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/repository/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),y=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/repository/project/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Xe=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/repository/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),k=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/repository/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),dr=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/repository/",{method:"delete",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),sr=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/relation/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),ir=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/relation/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),H=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/relation/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Z=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/relation/",{method:"delete",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),ze=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/",{params:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),or=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Ge=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/",{method:"put",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),we=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/branch/",{method:"delete",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}(),Fe=function(){var i=(0,f.Z)((0,s.Z)().mark(function a(t){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/sys/check/gitlab/",{method:"post",data:t}));case 1:case"end":return e.stop()}},a)}));return function(t){return i.apply(this,arguments)}}()},85450:function(ar,Te,n){"use strict";n.d(Te,{sL:function(){return i},ny:function(){return we},Fu:function(){return Fe}});var s=n(11849),f=n(2824),g=n(93224),$e=n(32059),ye=n(66456),Ne=n(79764),te=n(86582),Ve=n(19273),T=n(20310),oe=n(67294),x=n(1706),w=n(12788),D=n(57392),p=n(85893),N=["width","onResizeStart","onResize","onResizeStop","resize"],V=["columns","name","onColumnsChange"],y,Xe,k,dr=w.ZP.div(y||(y=(0,T.Z)([`
    position: relative;
    width: 100%;
`]))),sr=w.ZP.div.attrs(function(a){return{style:{left:a.left,height:a==null?void 0:a.height}}})(Xe||(Xe=(0,T.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),ir=(0,w.ZP)(x.Resizable)(k||(k=(0,T.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(a){var t=a.resize;return t?"col-resize":"default"}),H=function(t){var v=t.width,e=t.onResizeStart,G=t.onResize,ue=t.onResizeStop,R=t.resize,Ye=(0,g.Z)(t,N);return(0,p.jsx)(ir,(0,s.Z)((0,s.Z)({width:v||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:e,onResize:G,onResizeStop:ue,resize:R?1:0},Ye),{},{children:(0,p.jsx)("th",(0,s.Z)({},Ye))}))},Z=function(t){var v=t.columns,e=v===void 0?[]:v,G=t.name,ue=t.onColumnsChange,R=(0,g.Z)(t,V),Ye=oe.useState(0),Be=(0,f.Z)(Ye,2),Qe=Be[0],Le=Be[1],Ae=oe.useState(0),Ee=(0,f.Z)(Ae,2),_e=Ee[0],le=Ee[1],hr=oe.useState(!1),qe=(0,f.Z)(hr,2),er=qe[0],He=qe[1],ve=oe.useRef(null),ce=(0,D.Z)(ve),yr=function(E){return function(me,ge){var de;if((0,Ve.Z)(ge),!!e[E].ellipsis){var lr=me.clientX,Ie=lr-((de=ve.current)===null||de===void 0?void 0:de.getBoundingClientRect().x);le(Ie),Le(Ie),He(!0)}}},ur=function(){return function(E){var me,ge=E.clientX,de=ge-((me=ve.current)===null||me===void 0?void 0:me.getBoundingClientRect().x);Le(de)}},rr=function(E){return function(me,ge){var de,lr=ge.size,Ie=me.clientX,r=Ie-((de=ve.current)===null||de===void 0?void 0:de.getBoundingClientRect().x),tr=(0,te.Z)(e);if(tr[E].ellipsis){var cr=lr.width+=r-_e,pr=tr[E],vr=pr.dataIndex,mr=pr.key;cr>20&&(tr[E]=(0,s.Z)((0,s.Z)({},tr[E]),{},{width:cr}),G&&Fe(G,vr||mr,cr),ue==null||ue())}Le(0),le(0),He(!1)}},fr=oe.useMemo(function(){return e.reduce(function(c,E){return E.width?c+=E==null?void 0:E.width:c},0)},[e]);return(0,p.jsxs)(dr,{ref:ve,className:"resize-table-wrapper",children:[(0,p.jsx)(Ne.Z,(0,s.Z)((0,s.Z)({},R),{},{components:{header:{cell:H}},scroll:(t==null?void 0:t.scroll)||{x:fr||(ce==null?void 0:ce.width)},columns:e.filter(Boolean).map(function(c,E){return(0,s.Z)((0,s.Z)({},c),{},{onHeaderCell:function(ge){return{resize:!!c.ellipsis,width:ge.width,onResizeStart:yr(E),onResize:ur(),onResizeStop:rr(E)}}})})})),er&&(0,p.jsx)(sr,{height:ce==null?void 0:ce.height,left:Qe||_e})]})},ze=Z,or=["name","columns","refreshDeps","onColumnsChange"],Ge="umi_locale",we=function(t,v){var e=localStorage.getItem(t),G=localStorage.getItem(Ge)||"zh-CN";if(!!e)return JSON.parse(e)["".concat(G,"-").concat(v)]},Fe=function(t,v,e){var G=localStorage.getItem(t),ue=localStorage.getItem(Ge)||"zh-CN",R=(0,$e.Z)({},"".concat(ue,"-").concat(v),e);G?localStorage.setItem(t,JSON.stringify(Object.assign(JSON.parse(G),R))):localStorage.setItem(t,JSON.stringify(R))},i=function(t){var v=t.name,e=t.columns,G=t.refreshDeps,ue=G===void 0?[]:G,R=t.onColumnsChange,Ye=(0,g.Z)(t,or),Be=oe.useState([]),Qe=(0,f.Z)(Be,2),Le=Qe[0],Ae=Qe[1],Ee=function(){return(e==null?void 0:e.filter(Boolean).map(function(le){var hr=le.dataIndex,qe=le.key,er=le.width,He=hr||qe,ve=we(v,He);!ve&&er&&Fe(v,He,er);var ce=ve||er;return ce&&(le.width=ce),le}))||[]};return oe.useEffect(function(){Ae(Ee())},ue),(0,p.jsx)(ze,(0,s.Z)({name:v,columns:Le,setColumns:Ae,size:"small",onColumnsChange:function(){R==null||R(),Ae(Ee())}},Ye))}}}]);
