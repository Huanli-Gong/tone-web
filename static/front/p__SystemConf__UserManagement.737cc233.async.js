(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[476,2485],{60915:function(H){H.exports={pagination:"pagination___ooSI8",hidden:"hidden___3mzqN",table_empty:"table_empty___KRJ5E"}},32261:function(H){H.exports={filter:"filter___1IKYx",confirm:"confirm___3RbBO",domain:"domain___1-UgM"}},40893:function(H){H.exports={layout:"layout___3rpA5",side:"side___1Eun6",menu:"menu___3HFIQ",menuItem:"menuItem___3mKuU",selected:"selected___1JoUm",tab_style:"tab_style___qheVA"}},78839:function(H){H.exports={roleStyle:"roleStyle___3h1c4"}},26606:function(H,J,e){"use strict";var n=e(20228),v=e(11382),u=e(14781),F=e(10664),N=e(11849),o=e(93224),Q=e(67294),V=e(16917),B=e(60915),h=e.n(B),G=e(85450),l=e(85893),K=["total","loading","handlePage","showPagination","page","paginationBottom","pageSize","className"],j=function(M){var Y=M.total,S=Y===void 0?0:Y,me=M.loading,k=M.handlePage,ve=M.showPagination,Pe=ve===void 0?!0:ve,fe=M.page,p=fe===void 0?1:fe,pe=M.paginationBottom,_e=pe===void 0?!1:pe,q=M.pageSize,t=q===void 0?10:q,ge=M.className,X=(0,o.Z)(M,K),D=(0,V.YB)(),d=D.formatMessage,T=(0,Q.useRef)(null),x=function U(_){var I=_.offsetTop;return _.offsetParent!=null&&(I+=U(_.offsetParent)),I},O=function(){var _=x(T.current);if(_!=0){var I=_-200;_<=377&&(I=_-377),window.scrollTo({top:I,behavior:"smooth"})}};return(0,l.jsxs)(v.Z,{spinning:me,children:[(0,l.jsx)("div",{ref:T}),(0,l.jsx)(G.sL,(0,N.Z)({size:"small",className:"".concat(h().table_empty," ").concat(ge),pagination:!1},X)),Pe&&(0,l.jsx)("div",{className:"".concat(_e?null:"common_pagination"," ").concat(!me&&S?h().pagination:h().hidden),children:S>=1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:S==0?h().hidden:"",children:d({id:"pagination.total.strip"},{data:S})}),(0,l.jsx)(F.Z,{className:S==0?h().hidden:"",showQuickJumper:!0,showSizeChanger:!0,current:p,pageSize:t,defaultCurrent:1,size:"small",onChange:function(_,I){k(_,I),O()},onShowSizeChange:function(_,I){k(_,I),O()},total:S})]})})]})};J.Z=j},60751:function(H,J,e){"use strict";var n=e(57663),v=e(71577),u=e(48736),F=e(27049),N=e(49111),o=e(19650),Q=e(88983),V=e(47933),B=e(2824),h=e(67294),G=e(32261),l=e.n(G),K=e(24480),j=e(16917),i=e(85893),M=function(S){var me=S.list,k=S.confirm,ve=S.onConfirm,Pe=S.roleType,fe=(0,j.YB)(),p=fe.formatMessage,pe=(0,h.useState)(),_e=(0,B.Z)(pe,2),q=_e[0],t=_e[1],ge=function(D){t(D.target.value)};return(0,i.jsxs)("div",{className:l().filter,children:[(0,i.jsx)(V.ZP.Group,{onChange:ge,value:q,children:(0,i.jsx)(o.Z,{direction:"vertical",children:me.map(function(X){return(0,i.jsx)(V.ZP,{className:l().domain,value:X.id,children:Pe==="role"?(0,K.u)(X.name,p):X.name},X.id)})})}),(0,i.jsx)(F.Z,{style:{margin:"10px 0"}}),(0,i.jsxs)("div",{className:l().confirm,children:[(0,i.jsx)(v.Z,{size:"small",type:"link",style:{border:"none"},onClick:function(){k==null||k(),ve(q)},children:(0,i.jsx)(j._H,{id:"operation.ok"})}),(0,i.jsx)(v.Z,{size:"small",type:"text",onClick:function(){k==null||k(),t(void 0),ve(void 0)},children:(0,i.jsx)(j._H,{id:"operation.reset"})})]})]})};J.Z=M},87415:function(H,J,e){"use strict";e.d(J,{mQ:function(){return B},gM:function(){return h},nU:function(){return l}});var n=e(58024),v=e(91894),u=e(20310),F=e(12788),N,o,Q,V,B=(0,F.ZP)(v.Z)(N||(N=(0,u.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),h=(0,F.ZP)(B)(o||(o=(0,u.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),G=(0,F.ZP)(v.Z)(Q||(Q=(0,u.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),l=(0,F.ZP)(G)(V||(V=(0,u.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},49196:function(H,J,e){"use strict";e.r(J),e.d(J,{default:function(){return de}});var n=e(39428),v=e(3182),u=e(2824),F=e(18106),N=e(73272),o=e(67294),Q=e(62350),V=e(24565),B=e(402),h=e(97272),G=e(49111),l=e(19650),K=e(94233),j=e(51890),i=e(34792),M=e(48086),Y=e(11849),S=e(769),me=e(86213),k=e(20228),ve=e(11382),Pe=e(43358),fe=e(34041),p=e(16917),pe=e(78839),_e=e.n(pe),q=e(24480),t=e(85893),ge=function(m){var y=m.row,f=m.select,b=(0,p.YB)(),s=b.formatMessage,ee=(0,o.useState)(!1),A=(0,u.Z)(ee,2),L=A[0],W=A[1],w=(0,o.useState)(void 0),$=(0,u.Z)(w,2),oe=$[0],te=$[1],R=fe.Z.Option,ne=function(){var z=(0,v.Z)((0,n.Z)().mark(function ce(Z){var he;return(0,n.Z)().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return W(!0),le.next=3,(0,S.C2)({user_id:y.id,role_id:Z});case 3:he=le.sent,W(!1),he.code===200?(M.default.success(s({id:"user.role.edit.successfully"})),te(Z)):(0,q.EV)(he.code,he.msg);case 6:case"end":return le.stop()}},ce)}));return function(Z){return z.apply(this,arguments)}}();return(0,o.useEffect)(function(){te(y.role_list.map(function(z){return z.id})[0])},[y.role_list]),(0,t.jsx)(ve.Z,{spinning:L,children:(0,t.jsx)("div",{className:_e().roleStyle,children:(0,t.jsx)(fe.Z,{size:"small",placeholder:(0,t.jsx)(p._H,{id:"user.please.select.role"}),value:oe,style:{marginLeft:-10},dropdownMatchSelectWidth:!1,bordered:!1,showArrow:!0,onSelect:ne,children:f.map(function(z){return(0,t.jsx)(R,{value:z.id,children:(0,q.u)(z.name,s)},z.id)})})})})},X=ge,D=e(60751),d=e(37763),T=e.n(d),x=e(39067),O=e(99069),U=e(71194),_=e(50146),I=e(13062),je=e(71230),Me=function(m,y){var f=(0,o.useState)({}),b=(0,u.Z)(f,2),s=b[0],ee=b[1],A=(0,o.useState)(!1),L=(0,u.Z)(A,2),W=L[0],w=L[1],$=(0,o.useState)(""),oe=(0,u.Z)($,2),te=oe[0],R=oe[1];(0,o.useImperativeHandle)(y,function(){return{show:function(ce,Z){ee(ce),w(!0),Z&&R(Z)}}});var ne=function(){ee({}),w(!1),R("")};return(0,t.jsx)(_.Z,{title:te||(0,t.jsx)(p._H,{id:"operation.reset.password.succeeded"}),open:W,onCancel:ne,okText:(0,t.jsx)(p._H,{id:"operation.ok"}),footer:!1,onOk:ne,width:"40%",children:(0,t.jsx)(je.Z,{style:{padding:30},children:(0,t.jsxs)(l.Z,{direction:"vertical",children:[(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(h.Z.Text,{children:(0,t.jsx)(p._H,{id:"user.username"})}),(0,t.jsx)(h.Z.Text,{children:s==null?void 0:s.username})]}),(0,t.jsxs)(l.Z,{align:"center",children:[(0,t.jsx)(h.Z.Text,{children:(0,t.jsx)(p._H,{id:"user.new.password"})}),(0,t.jsx)(h.Z.Paragraph,{style:{marginBottom:0},copyable:{text:s.password},children:s==null?void 0:s.password})]})]})})})},Ce=(0,o.forwardRef)(Me),ye=e(72658),Se=e(10753),Te=e(85450),ue=function(m){var y={};return m&&Object.keys(m).forEach(function(f){(m[f]||[0,!1].includes(m[f]))&&(y[f]=m[f])}),y},ze=function(m){var y=m.onRef,f=m.select,b=m.rolelist,s=m.callbackTotal,ee=(0,p.YB)(),A=ee.formatMessage,L=(0,o.useState)(!0),W=(0,u.Z)(L,2),w=W[0],$=W[1],oe=(0,o.useState)({data:[],total:0,total_page:0,page_num:1,page_size:10}),te=(0,u.Z)(oe,2),R=te[0],ne=te[1],z=(0,o.useState)({last_name:"",role_id:""}),ce=(0,u.Z)(z,2),Z=ce[0],he=ce[1],Be=(0,o.useState)(!0),le=(0,u.Z)(Be,2),De=le[0],Ue=le[1],Ae=(0,o.useRef)(null),Ie=function(){var c=(0,v.Z)((0,n.Z)().mark(function r(a){var g,P,ie;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return g=(0,Y.Z)((0,Y.Z)({},Z),a),P=ue(g),$(!0),E.prev=3,E.next=6,(0,S.wD)(P);case 6:ie=E.sent,ie.code===200?(ne(ie),s(ie.total)):(ne({data:[],total:0,total_page:0,page_num:1,page_size:10}),s(0)),$(!1),E.next=14;break;case 11:E.prev=11,E.t0=E.catch(3),$(!1);case 14:case"end":return E.stop()}},r,null,[[3,11]])}));return function(a){return c.apply(this,arguments)}}();(0,o.useEffect)(function(){Ie({page_num:1,page_size:R.page_size})},[Z.last_name,Z.role_id]);var $e=function(r,a){Ie({page_num:r,page_size:a})},He=function(){var c=(0,v.Z)((0,n.Z)().mark(function r(a,g){var P,ie;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return P={user_id:g.id,role_id:a},E.next=3,(0,S.C2)(P);case 3:ie=E.sent,ie.code===200?(M.default.success(A({id:"operation.success"})),Ie({page_num:R.page_num,page_size:R.page_size})):M.default.error(ie.msg);case 5:case"end":return E.stop()}},r)}));return function(a,g){return c.apply(this,arguments)}}(),Ze=function(){var c=(0,v.Z)((0,n.Z)().mark(function r(a){var g,P,ie,be,E;return(0,n.Z)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,(0,S.VK)({user_id:a.id});case 2:if(P=xe.sent,ie=P.code,be=P.data,E=P.msg,ie===200){xe.next=9;break}return M.default.error(E!=null?E:be),xe.abrupt("return");case 9:(g=Ae.current)===null||g===void 0||g.show({password:be,username:a.username});case 10:case"end":return xe.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),ae=[{title:(0,t.jsx)(p._H,{id:"user.last_name"}),dataIndex:"last_name",width:200,ellipsis:{showTitle:!1},render:function(r,a){return(0,t.jsxs)(l.Z,{children:[a.avatar?(0,t.jsx)(j.C,{size:25,src:a.avatar,alt:a.last_name}):(0,t.jsx)(ye.Z,{size:25,show_name:a.last_name||a.username,theme_color:a.avatar_color,shape:"circle"}),(0,t.jsx)(T(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Z.last_name||""],autoEscape:!0,textToHighlight:a.last_name.toString()})]})},filterIcon:function(){return(0,t.jsx)(O.Z,{style:{color:Z.last_name?"#1890ff":void 0}})},filterDropdown:function(r){var a=r.confirm;return(0,t.jsx)(x.Z,{confirm:a,autoFocus:De,onConfirm:function(P){return he((0,Y.Z)((0,Y.Z)({},Z),{},{last_name:P}))}})},onFilterDropdownVisibleChange:function(r){r&&Ue(!De)}},{title:(0,t.jsx)(p._H,{id:"user.email"}),dataIndex:"email",width:200,ellipsis:{showTitle:!1},render:function(r,a){return(0,t.jsx)(Se.K,{ellipsis:{tooltip:!0},children:a.username})}},{title:(0,t.jsx)(p._H,{id:"user.role_list"}),dataIndex:"role_list",render:function(r,a){return f&&f.length>0&&(0,t.jsx)(X,{row:a,select:f,handleChange:He})},width:170,filterIcon:function(){return(0,t.jsx)(O.Z,{style:{color:Z.role_id?"#1890ff":void 0}})},filterDropdown:function(r){var a=r.confirm;return(0,t.jsx)(D.Z,{list:b,confirm:a,onConfirm:function(P){return he((0,Y.Z)((0,Y.Z)({},Z),{},{role_id:P}))},roleType:"role"})},onFilterDropdownVisibleChange:function(r){r&&Ue(!De)}},{title:"Workspace",dataIndex:"ws_list",render:function(r,a){return a.ws_list&&a.ws_list.length>0&&(0,t.jsx)(Se.K,{ellipsis:{tooltip:!0},children:a.ws_list.join("\u3001")})},ellipsis:{showTitle:!1},width:300},{title:(0,t.jsx)(p._H,{id:"user.gmt_created"}),dataIndex:"gmt_created",width:145,ellipsis:{showTitle:!1}},{title:(0,t.jsx)(p._H,{id:"Table.columns.operation"}),key:"operation",fixed:"right",width:200,render:function(r,a){return(0,t.jsx)(V.Z,{title:(0,t.jsx)(p._H,{id:"user.Popconfirm.title"}),onConfirm:function(){return Ze(a)},okButtonProps:{type:"primary",danger:!0},okText:(0,t.jsx)(p._H,{id:"operation.confirm.reset"}),onVisibleChange:function(){return console.log("visible change")},children:(0,t.jsx)(h.Z.Link,{children:(0,t.jsx)(p._H,{id:"operation.reset.password"})})})}}].filter(function(c){return c});return(0,t.jsxs)("div",{children:[(0,t.jsx)(Te.sL,{loading:w,name:"system-user-management-column",rowKey:"id",size:"small",columns:ae,dataSource:R.data,pagination:!1,scroll:{x:"100%"}}),(0,t.jsx)(me.Z,{size:"default",pageSize:R.page_size,currentPage:R.page_num,total:(R==null?void 0:R.total)||0,onPageChange:$e}),(0,t.jsx)(Ce,{ref:Ae})]})},Oe=ze,Re=e(26606),Ee=function(){var m=(0,p.YB)(),y=m.formatMessage,f=(0,o.useState)(),b=(0,u.Z)(f,2),s=b[0],ee=b[1],A=(0,o.useState)(!1),L=(0,u.Z)(A,2),W=L[0],w=L[1],$=function(){var te=(0,v.Z)((0,n.Z)().mark(function R(){var ne,z;return(0,n.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return w(!0),Z.next=3,(0,S.Uy)({role_type:""});case 3:ne=Z.sent,z=ne.data,w(!1),z&&ee(z);case 7:case"end":return Z.stop()}},R)}));return function(){return te.apply(this,arguments)}}();(0,o.useEffect)(function(){$()},[]);var oe=[{title:(0,t.jsx)(p._H,{id:"user.role_name"}),dataIndex:"title",render:function(R){return(0,q.u)(R,y)}},{title:(0,t.jsx)(p._H,{id:"user.role_desc"}),dataIndex:"description"}];return(0,t.jsx)("div",{children:(0,t.jsx)(Re.Z,{size:"small",columns:oe,name:"sys-user-manage",dataSource:(s==null?void 0:s.list)||[],loading:W,page:s==null?void 0:s.page_num,pageSize:s==null?void 0:s.page_size,totalPage:s==null?void 0:s.total_page,total:s==null?void 0:s.total,scroll:{x:"100%"}})})},se=Ee,re=e(40893),We=e.n(re),Ke=e(87415),Le=N.Z.TabPane,we=function(){var m=(0,p.YB)(),y=m.formatMessage,f=(0,o.useState)([]),b=(0,u.Z)(f,2),s=b[0],ee=b[1],A=(0,o.useState)([]),L=(0,u.Z)(A,2),W=L[0],w=L[1],$=(0,o.useState)(0),oe=(0,u.Z)($,2),te=oe[0],R=oe[1],ne=(0,o.useState)(0),z=(0,u.Z)(ne,2),ce=z[0],Z=z[1],he=(0,o.useRef)(null),Be=(0,o.useState)("1"),le=(0,u.Z)(Be,2),De=le[0],Ue=le[1],Ae=function(){var Ze=(0,v.Z)((0,n.Z)().mark(function ae(){var c,r;return(0,n.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,S.Uy)({role_type:"system",is_filter:"1"});case 2:c=g.sent,r=c.data,r&&ee(r.list),r&&R(r.num);case 6:case"end":return g.stop()}},ae)}));return function(){return Ze.apply(this,arguments)}}(),Ie=function(){var Ze=(0,v.Z)((0,n.Z)().mark(function ae(){var c,r;return(0,n.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,S.Uy)({role_type:""});case 2:c=g.sent,r=c.total,r&&Z(r);case 5:case"end":return g.stop()}},ae)}));return function(){return Ze.apply(this,arguments)}}(),$e=function(){var Ze=(0,v.Z)((0,n.Z)().mark(function ae(){var c,r,a;return(0,n.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,S.Uy)({role_type:"system",is_filter:"0"});case 2:c=P.sent,r=c.data,a=[{id:"",name:"all",title:"all"}],r&&w(a.concat(r.list||[]));case 6:case"end":return P.stop()}},ae)}));return function(){return Ze.apply(this,arguments)}}();(0,o.useEffect)(function(){return Ie(),Ae(),$e(),function(){w([])}},[]);var He=function(ae){Ue(ae)};return(0,t.jsx)(Ke.mQ,{title:(0,t.jsxs)(N.Z,{defaultActiveKey:"1",onChange:He,className:We().tab_style,children:[(0,t.jsx)(Le,{tab:"".concat(y({id:"user.tab.user"})," ").concat(te||0)},"1"),(0,t.jsx)(Le,{tab:"".concat(y({id:"user.tab.role"})," ").concat(ce||0)},"2")]}),children:De==="1"?!!s.length&&!!W.length&&(0,t.jsx)(Oe,{onRef:he,select:s,rolelist:W,callbackTotal:R}):(0,t.jsx)(se,{})})},de=we},769:function(H,J,e){"use strict";e.d(J,{Uy:function(){return F},wD:function(){return o},C2:function(){return V},VK:function(){return h}});var n=e(39428),v=e(3182),u=e(16917);function F(l){return N.apply(this,arguments)}function N(){return N=(0,v.Z)((0,n.Z)().mark(function l(K){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/auth/role/",{params:K}));case 1:case"end":return i.stop()}},l)})),N.apply(this,arguments)}function o(l){return Q.apply(this,arguments)}function Q(){return Q=(0,v.Z)((0,n.Z)().mark(function l(K){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/auth/user/",{params:K}));case 1:case"end":return i.stop()}},l)})),Q.apply(this,arguments)}function V(l){return B.apply(this,arguments)}function B(){return B=(0,v.Z)((0,n.Z)().mark(function l(K){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/auth/user/",{method:"POST",data:K}));case 1:case"end":return i.stop()}},l)})),B.apply(this,arguments)}function h(l){return G.apply(this,arguments)}function G(){return G=(0,v.Z)((0,n.Z)().mark(function l(K){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/auth/reset_password/",{method:"POST",data:K}));case 1:case"end":return i.stop()}},l)})),G.apply(this,arguments)}},85450:function(H,J,e){"use strict";e.d(J,{sL:function(){return X},ny:function(){return t},Fu:function(){return ge}});var n=e(11849),v=e(2824),u=e(93224),F=e(32059),N=e(66456),o=e(79764),Q=e(86582),V=e(19273),B=e(20310),h=e(67294),G=e(1706),l=e(12788),K=e(57392),j=e(85893),i=["width","onResizeStart","onResize","onResizeStop","resize"],M=["columns","name","onColumnsChange"],Y,S,me,k=l.ZP.div(Y||(Y=(0,B.Z)([`
    position: relative;
    width: 100%;
`]))),ve=l.ZP.div.attrs(function(D){return{style:{left:D.left,height:D==null?void 0:D.height}}})(S||(S=(0,B.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),Pe=(0,l.ZP)(G.Resizable)(me||(me=(0,B.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(D){var d=D.resize;return d?"col-resize":"default"}),fe=function(d){var T=d.width,x=d.onResizeStart,O=d.onResize,U=d.onResizeStop,_=d.resize,I=(0,u.Z)(d,i);return(0,j.jsx)(Pe,(0,n.Z)((0,n.Z)({width:T||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:x,onResize:O,onResizeStop:U,resize:_?1:0},I),{},{children:(0,j.jsx)("th",(0,n.Z)({},I))}))},p=function(d){var T=d.columns,x=T===void 0?[]:T,O=d.name,U=d.onColumnsChange,_=(0,u.Z)(d,M),I=h.useState(0),je=(0,v.Z)(I,2),Me=je[0],Ce=je[1],ye=h.useState(0),Se=(0,v.Z)(ye,2),Te=Se[0],ue=Se[1],ze=h.useState(!1),Oe=(0,v.Z)(ze,2),Re=Oe[0],Ee=Oe[1],se=h.useRef(null),re=(0,K.Z)(se),We=function(C){return function(m,y){var f;if((0,V.Z)(y),!!x[C].ellipsis){var b=m.clientX,s=b-((f=se.current)===null||f===void 0?void 0:f.getBoundingClientRect().x);ue(s),Ce(s),Ee(!0)}}},Ke=function(){return function(C){var m,y=C.clientX,f=y-((m=se.current)===null||m===void 0?void 0:m.getBoundingClientRect().x);Ce(f)}},Le=function(C){return function(m,y){var f,b=y.size,s=m.clientX,ee=s-((f=se.current)===null||f===void 0?void 0:f.getBoundingClientRect().x),A=(0,Q.Z)(x);if(A[C].ellipsis){var L=b.width+=ee-Te,W=A[C],w=W.dataIndex,$=W.key;L>20&&(A[C]=(0,n.Z)((0,n.Z)({},A[C]),{},{width:L}),O&&ge(O,w||$,L),U==null||U())}Ce(0),ue(0),Ee(!1)}},we=h.useMemo(function(){return x.reduce(function(de,C){return C.width?de+=C==null?void 0:C.width:de},0)},[x]);return(0,j.jsxs)(k,{ref:se,className:"resize-table-wrapper",children:[(0,j.jsx)(o.Z,(0,n.Z)((0,n.Z)({},_),{},{components:{header:{cell:fe}},scroll:(d==null?void 0:d.scroll)||{x:we||(re==null?void 0:re.width)},columns:x.filter(Boolean).map(function(de,C){return(0,n.Z)((0,n.Z)({},de),{},{onHeaderCell:function(y){return{resize:!!de.ellipsis,width:y.width,onResizeStart:We(C),onResize:Ke(),onResizeStop:Le(C)}}})})})),Re&&(0,j.jsx)(ve,{height:re==null?void 0:re.height,left:Me||Te})]})},pe=p,_e=["name","columns","refreshDeps","onColumnsChange"],q="umi_locale",t=function(d,T){var x=localStorage.getItem(d),O=localStorage.getItem(q)||"zh-CN";if(!!x)return JSON.parse(x)["".concat(O,"-").concat(T)]},ge=function(d,T,x){var O=localStorage.getItem(d),U=localStorage.getItem(q)||"zh-CN",_=(0,F.Z)({},"".concat(U,"-").concat(T),x);O?localStorage.setItem(d,JSON.stringify(Object.assign(JSON.parse(O),_))):localStorage.setItem(d,JSON.stringify(_))},X=function(d){var T=d.name,x=d.columns,O=d.refreshDeps,U=O===void 0?[]:O,_=d.onColumnsChange,I=(0,u.Z)(d,_e),je=h.useState([]),Me=(0,v.Z)(je,2),Ce=Me[0],ye=Me[1],Se=function(){return(x==null?void 0:x.filter(Boolean).map(function(ue){var ze=ue.dataIndex,Oe=ue.key,Re=ue.width,Ee=ze||Oe,se=t(T,Ee);!se&&Re&&ge(T,Ee,Re);var re=se||Re;return re&&(ue.width=re),ue}))||[]};return h.useEffect(function(){ye(Se())},U),(0,j.jsx)(pe,(0,n.Z)({name:T,columns:Ce,setColumns:ye,size:"small",onColumnsChange:function(){_==null||_(),ye(Se())}},I))}}}]);
