(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1047,2485],{76613:function(se,ie,t){"use strict";t.d(ie,{Z:function(){return ae}});var ge=t(45972),I=t(22374),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},Q=G,d=t(25078),a=function(le,ee){return I.createElement(d.Z,(0,ge.Z)((0,ge.Z)({},le),{},{ref:ee,icon:Q}))};a.displayName="MinusCircleOutlined";var ae=I.forwardRef(a)},59e3:function(se){se.exports={code_wrapper:"code_wrapper___3eANK"}},88351:function(se){se.exports={script_left:"script_left___PLXOM",create_button_wrapper:"create_button_wrapper___GR642",public_ellip:"public_ellip___1oJin",all_script:"all_script___1Y-ZS",text_ellip:"text_ellip___BKN4j",left_title:"left_title___1iIhJ",script_item:"script_item___F73GW",script_item_active:"script_item_active___YrGT0",remove:"remove___29zje",remove_active:"remove_active___3s6vi",filter_icon:"filter_icon___1SwAz",filter_dropdown:"filter_dropdown___yxSQY",filter_search_box:"filter_search_box___3_KsG",filter_dropdown_opt:"filter_dropdown_opt___xq9fi",filter_search_btn:"filter_search_btn___1bjou",script_right:"script_right___1GETI",script_right_detail:"script_right_detail___1qM76",script_right_name:"script_right_name___3t6V1",right_code_context:"right_code_context___3TF-4",right_bottom_options:"right_bottom_options___3ewzm",title_detail_item:"title_detail_item___yNd-F",script_version_modal:"script_version_modal___1Af56",code_view_wrapper:"code_view_wrapper___3MbLG",history_left_item:"history_left_item___1hRc5",history_left_item_active:"history_left_item_active___24dKZ",histroy_active_line:"histroy_active_line___29A3d",histroy_left_time:"histroy_left_time___-7q1G",system_form:"system_form___1P9Hc",history_top_info:"history_top_info___OZuro"}},65113:function(se){se.exports={layout:"layout___3rpA5",side:"side___1Eun6",menu:"menu___3HFIQ",menuItem:"menuItem___3mKuU",selected:"selected___1JoUm",tab_style:"tab_style___qheVA"}},17286:function(se,ie,t){"use strict";var ge=t(61679),I=t.n(ge),G=t(4974),Q=t.n(G),d=t(51935),a=t.n(d),ae=t(48304),re=t(59e3),le=t.n(re),ee=t(52454);ie.Z=function(oe){var de=oe.code,He=oe.onChange,ye=oe.readOnly,Fe=ye===void 0?!1:ye,z=oe.mode,xe=z===void 0?"shell":z;return(0,ee.jsx)(ae.fk,{value:de,className:le().code_wrapper,options:{theme:"monokai",keyMap:"sublime",lineNumbers:xe==="yaml",mode:xe,readOnly:Fe},onBeforeChange:function(Ie,je,Ce){return He(Ce)}})}},79638:function(se,ie,t){"use strict";var ge=t(79625),I=t(96584),G=t(20418),Q=t(39190),d=t(488),a=t(41428),ae=t(22374),re=t(97939),le=t(526),ee=t(52454),oe=["title","children","width","color","placement","style"],de,He=re.ZP.div(de||(de=(0,a.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),ye=function(z){var xe=z.title,he=z.children,Ie=z.width,je=z.color,Ce=z.placement,Pe=Ce===void 0?"topLeft":Ce,We=z.style,R=(0,d.Z)(z,oe),ve=(0,ae.useRef)(null),Re=(0,ae.useState)(!1),we=(0,Q.Z)(Re,2),w=we[0],Ke=we[1],ce=(0,le.CR)(),Ue=ce.width,M=function(){var L,Ae,Ze=ve==null||(L=ve.current)===null||L===void 0?void 0:L.clientWidth,Le=ve==null||(Ae=ve.current)===null||Ae===void 0?void 0:Ae.scrollWidth;Ke(Ze<Le)};(0,ae.useEffect)(function(){M()},[xe,Ue]);var E=(0,ee.jsx)(He,(0,G.Z)((0,G.Z)({ref:ve,style:(0,G.Z)({width:Ie,color:je},We)},R),{},{children:he||xe||"-"}));return w?(0,ee.jsx)(I.Z,{title:xe,placement:Pe,overlayStyle:{wordBreak:"break-all"},children:E}):E};ie.Z=ye},75073:function(se,ie,t){"use strict";t.d(ie,{mQ:function(){return le},gM:function(){return ee},nU:function(){return de}});var ge=t(40204),I=t(10724),G=t(41428),Q=t(97939),d,a,ae,re,le=(0,Q.ZP)(I.Z)(d||(d=(0,G.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),ee=(0,Q.ZP)(le)(a||(a=(0,G.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),oe=(0,Q.ZP)(I.Z)(ae||(ae=(0,G.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),de=(0,Q.ZP)(oe)(re||(re=(0,G.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},36480:function(se,ie,t){"use strict";t.r(ie),t.d(ie,{default:function(){return Ct}});var ge=t(46721),I=t(94867),G=t(54905),Q=t(90087),d=t(39190),a=t(22374),ae=t(16832),re=t(69827),le=t(67448),ee=t(47548),oe=t(64510),de=t(87445),He=t(87967),ye=t(65320),Fe=t(52730),z=t(25205),xe=t(57359),he=t(34423),Ie=t(79625),je=t(96584),Ce=t(20632),Pe=t(71853),We=t(14320),R=t(53479),ve=t(8281),Re=t(58591),we=t(70772),w=t(6701),Ke=t(20693),ce=t(3278),Ue=t(31650),M=t(25100),E=t(20418),g=t(35832),L=t(32326),Ae=t(81138),Ze=t(96146),Le=t(88351),r=t.n(Le),et=t(31784),tt=t(2514),$e=t(46601),nt=t(76613),at=t(93980),n=t(22812),ze=function(){var b=(0,L.Z)((0,g.Z)().mark(function m(u){return(0,g.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.WY)("/api/sys/config/",{params:u}));case 1:case"end":return s.stop()}},m)}));return function(u){return b.apply(this,arguments)}}(),Ve=function(){var b=(0,L.Z)((0,g.Z)().mark(function m(u){return(0,g.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.WY)("/api/sys/config/",{method:"post",data:u}));case 1:case"end":return s.stop()}},m)}));return function(u){return b.apply(this,arguments)}}(),Ne=function(){var b=(0,L.Z)((0,g.Z)().mark(function m(u){return(0,g.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.WY)("/api/sys/config/",{method:"put",data:u}));case 1:case"end":return s.stop()}},m)}));return function(u){return b.apply(this,arguments)}}(),Ye=function(){var b=(0,L.Z)((0,g.Z)().mark(function m(u){return(0,g.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.WY)("/api/sys/config/",{method:"delete",data:u}));case 1:case"end":return s.stop()}},m)}));return function(u){return b.apply(this,arguments)}}(),st=function(){var b=(0,L.Z)((0,g.Z)().mark(function m(u){return(0,g.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.WY)("/api/sys/config/history/",{params:u}));case 1:case"end":return s.stop()}},m)}));return function(u){return b.apply(this,arguments)}}(),it=t(79638),Dt=t(88018),Ge=t(58414),Ft=t(88966),be=t(11048),It=t(69230),Qe=t(33821),Rt=t(65790),te=t(17187),Se=t(39935),e=t(52454),rt=(0,a.forwardRef)(function(b,m){var u,P=(0,n.YB)(),s=P.formatMessage,c=te.Z.useForm(),j=(0,d.Z)(c,1),C=j[0],U=(0,a.useState)(!1),_=(0,d.Z)(U,2),x=_[0],O=_[1],N=(0,a.useState)(!1),Z=(0,d.Z)(N,2),k=Z[0],A=Z[1],V=(0,a.useState)("new"),B=(0,d.Z)(V,2),S=B[0],J=B[1],X=(0,a.useState)(),f=(0,d.Z)(X,2),l=f[0],D=f[1],F=(0,a.useState)({}),y=(0,d.Z)(F,2),h=y[0],T=y[1];(0,a.useImperativeHandle)(m,function(){return{show:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A(!0),J(K),T(v),C.setFieldsValue(v)}}});var p=function(){C.resetFields(),O(!1),A(!1),D(void 0)},Y=function(K,v){K===200?(b.onOk(),Ze.default.success(s({id:"operation.success"})),A(!1),C.resetFields()):K===1362?D(s({id:"basic.config.name.already.exists"})):(0,Se.EV)(K,v),O(!1)},H=function(){O(!0),C.validateFields().then(function(){var K=(0,L.Z)((0,g.Z)().mark(function v(ue){var _e,fe,pe;return(0,g.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(S!=="new"){$.next=6;break}return $.next=3,Ve((0,E.Z)({config_type:"script"},ue));case 3:$.t0=$.sent,$.next=7;break;case 6:$.t0=Ne((0,E.Z)({config_type:"script",config_id:h.id},ue));case 7:_e=$.t0,fe=_e.code,pe=_e.$msg,Y(fe,pe);case 11:case"end":return $.stop()}},v)}));return function(v){return K.apply(this,arguments)}}()).catch(function(K){O(!1),console.log(K)})};return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(n._H,{id:"basic.addScript.".concat(S)}),width:"380",onClose:p,visible:k,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(I.Z,{onClick:p,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(I.Z,{type:"primary",disabled:x,onClick:H,children:~S.indexOf("edit")?(0,e.jsx)(n._H,{id:"operation.update"}):(0,e.jsx)(n._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(te.Z,{form:C,layout:"vertical",className:r().system_form,children:[(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.script_name"}),name:"config_key",help:l,rules:[{required:!0,max:32,pattern:/^[A-Za-z0-9\._-]+$/g,message:s({id:"please.enter.message"})}],children:(0,e.jsx)(ce.Z,{autoComplete:"auto",placeholder:s({id:"basic.please.enter.script_name"})})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.atomic_step"}),name:"bind_stage",children:(0,e.jsx)(Qe.Z,{children:(u=b.stage)===null||u===void 0?void 0:u.map(function(W){return(0,e.jsx)(Qe.Z.Option,{value:W.value,children:W.name},W.value)})})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.is_enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)(be.ZP.Group,{children:[(0,e.jsx)(be.ZP,{value:!0,children:(0,e.jsx)(n._H,{id:"basic.enable"})}),(0,e.jsx)(be.ZP,{value:!1,children:(0,e.jsx)(n._H,{id:"basic.stop"})})]})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.desc"}),name:"description",children:(0,e.jsx)(ce.Z.TextArea,{placeholder:s({id:"basic.please.enter.desc"})})})]})})}),lt=t(17286),wt=t(67515),ke=t(12238),ot=t(17395),dt=ot,ct=t(68591),ut=t.n(ct),ft=(0,a.forwardRef)(function(b,m){var u=b.stage,P=(0,a.useState)(!1),s=(0,d.Z)(P,2),c=s[0],j=s[1],C=(0,a.useState)({}),U=(0,d.Z)(C,2),_=U[0],x=U[1],O=(0,a.useState)(innerHeight*.7),N=(0,d.Z)(O,2),Z=N[0],k=N[1],A=(0,n.QT)(function(h){return st(h)},{manual:!0,initialData:[]}),V=A.loading,B=A.run,S=A.data;(0,a.useImperativeHandle)(m,function(){return{show:function(T){j(!0),B({config_key:T.config_key})}}}),(0,a.useEffect)(function(){Object.keys(S).length>0&&x(S[0])},[S]);var J=function(){return k(innerHeight*.7)};(0,a.useEffect)(function(){return window.addEventListener("resize",J),function(){window.removeEventListener("resize",J)}},[]);var X=function(T){return x(T)},f=function(){x({}),j(!1)},l=function(T){var p="";return u.forEach(function(Y){var H=Y.name,W=Y.value;T===W&&(p=H)}),p},D=a.useMemo(function(){return _.config_value?dt.highlightAuto(_.config_value):{}},[_.config_value]),F=D.language,y=D.value;return(0,e.jsx)(ke.Z,{title:(0,e.jsx)(n._H,{id:"basic.historical.version"}),centered:!0,visible:c,onOk:function(){return j(!1)},onCancel:f,width:1e3,className:r().script_version_modal,footer:!1,maskClosable:!1,children:(0,e.jsx)(ee.Z,{spinning:V,children:(0,e.jsxs)(R.Z,{style:{height:Z},children:[(0,e.jsx)("div",{style:{width:210,borderRight:"1px solid #eee",maxHeight:"100%",overflow:"auto"},children:S==null?void 0:S.map(function(h){return(0,e.jsxs)("div",{className:+_.id==+h.id?r().history_left_item_active:r().history_left_item,onClick:function(){return X(h)},children:[(0,e.jsx)("div",{className:r().histroy_left_time,children:h.source_gmt_created}),(0,e.jsx)("div",{className:r().histroy_left_time,children:h.update_user}),+_.id==+h.id&&(0,e.jsx)("div",{className:r().histroy_active_line})]},h.id)})}),(0,e.jsx)("div",{style:{width:"calc( 100% - 210px )",padding:20},children:S.length===0?(0,e.jsx)(de.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{style:{width:"100%",height:50,marginBottom:20},align:"middle",children:(0,e.jsx)(w.Z,{span:24,children:(0,e.jsxs)(R.Z,{children:[(0,e.jsxs)(w.Z,{span:8,className:r().history_top_info,children:[(0,e.jsxs)(M.Z.Text,{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.script_name"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)(je.Z,{title:_.config_key,placement:"bottomLeft",children:_.config_key})})]}),(0,e.jsxs)(w.Z,{span:6,className:r().history_top_info,children:[(0,e.jsxs)(M.Z.Text,{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.atomic_step"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{children:l(_.bind_stage)})]}),(0,e.jsxs)(w.Z,{span:10,className:r().history_top_info,children:[(0,e.jsxs)(M.Z.Text,{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.desc"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{className:r().desc_content_style,children:(0,e.jsx)(je.Z,{title:_.description,placement:"bottomLeft",children:_.description})})]})]})})}),(0,e.jsx)(R.Z,{style:{height:Z-54.6-70-52,overflow:"hidden"},className:r().code_view_wrapper,children:y&&(0,e.jsx)("pre",{children:(0,e.jsx)("code",{className:ut()("hljs language-".concat(F)),dangerouslySetInnerHTML:{__html:y}})})}),(0,e.jsxs)(R.Z,{style:{height:32,marginTop:20},justify:"space-between",children:[(0,e.jsxs)(M.Z.Text,{children:["Comment\uFF1A",_.commit]}),(0,e.jsx)(I.Z,{onClick:f,children:(0,e.jsx)(n._H,{id:"operation.cancel"})})]})]})})]})})})}),mt=(0,a.forwardRef)(function(b,m){var u=b.onOk,P=(0,n.YB)(),s=P.formatMessage,c={config_type:"script"},j=(0,a.useState)(!1),C=(0,d.Z)(j,2),U=C[0],_=C[1],x=(0,a.useState)(!1),O=(0,d.Z)(x,2),N=O[0],Z=O[1],k=(0,a.useState)(""),A=(0,d.Z)(k,2),V=A[0],B=A[1],S=(0,a.useState)({}),J=(0,d.Z)(S,2),X=J[0],f=J[1];(0,a.useImperativeHandle)(m,function(){return{show:function(y){_(!0),f(y)}}});var l=function(){_(!1),B(""),f({}),Z(!1)},D=function(){var F=(0,L.Z)((0,g.Z)().mark(function y(){var h,T,p;return(0,g.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!N){H.next=2;break}return H.abrupt("return");case 2:return Z(!0),H.next=5,Ne((0,E.Z)((0,E.Z)({},c),{},{commit:V,config_value:X.config_value,config_id:X.id}));case 5:h=H.sent,T=h.code,p=h.msg,T===200?(u(),l()):((0,Se.EV)(T,p),Z(!1));case 9:case"end":return H.stop()}},y)}));return function(){return F.apply(this,arguments)}}();return(0,e.jsx)(ke.Z,{title:"Comment",visible:U,onOk:D,onCancel:l,okText:(0,e.jsx)(n._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),maskClosable:!1,children:(0,e.jsx)(ce.Z.TextArea,{placeholder:s({id:"basic.please.enter.comment"}),value:V,rows:4,onChange:function(y){var h=y.target;return B(h.value)}})})}),ht=function(){var b=(0,n.YB)(),m=b.formatMessage,u={config_type:"script",page_num:1,page_size:500},P=(0,a.useState)({}),s=(0,d.Z)(P,2),c=s[0],j=s[1],C=(0,a.useState)(null),U=(0,d.Z)(C,2),_=U[0],x=U[1],O=(0,a.useState)(!1),N=(0,d.Z)(O,2),Z=N[0],k=N[1],A=(0,a.useState)(""),V=(0,d.Z)(A,2),B=V[0],S=V[1],J=(0,a.useState)(!1),X=(0,d.Z)(J,2),f=X[0],l=X[1],D=(0,a.useState)([]),F=(0,d.Z)(D,2),y=F[0],h=F[1],T=(0,a.useRef)(null),p=(0,a.useRef)(null),Y=(0,a.useRef)(null),H=(0,n.QT)(function(o){return ze(o)},{defaultParams:[u],initialData:{data:[],bind_stage:{}},formatResult:function(i){return i}}),W=H.data,K=W.bind_stage,v=W.data,ue=H.refresh,_e=H.loading,fe=H.run,pe=function(i){return j(i)};(0,a.useEffect)(function(){if(v.length>0)if("id"in c){var o=v.findIndex(function(i){var q=i.id;return q===c.id});j(v[o])}else j(v[0]);else j({});JSON.stringify(K)!=="{}"&&h(Object.keys(K).map(function(i){return{name:K[i],value:i}}))},[v]);var Oe=function(){var i;(i=p.current)===null||i===void 0||i.show("new")},$=function(i,q){i===200?(j({}),Ze.default.success(m({id:"operation.success"})),ue()):(0,Se.EV)(i,q)},Je=function(){var o=(0,L.Z)((0,g.Z)().mark(function i(q){var me,Me,qe;return(0,g.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,Ye({config_type:"script",config_id:q.id});case 2:me=Te.sent,Me=me.code,qe=me.msg,$(Me,qe);case 6:case"end":return Te.stop()}},i)}));return function(q){return o.apply(this,arguments)}}(),ne=function(){var i;(i=p.current)===null||i===void 0||i.show("edit",c)},St=function(){Y.current.show(c)},Et=function(){var o=(0,L.Z)((0,g.Z)().mark(function i(){return(0,g.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:fe(u).then(function(Me){Me.code===200&&j(Me.data[0])});case 1:case"end":return me.stop()}},i)}));return function(){return o.apply(this,arguments)}}(),Ot=function(){Ze.default.success(m({id:"operation.success"})),ue()},Mt=function(){k(!Z)},Tt=function(){fe((0,E.Z)((0,E.Z)({},u),{},{config_key:B})),k(!Z)},Ht=function(){B&&fe(u),S(""),k(!Z)},Pt=function(){T.current.show(c)};(0,a.useEffect)(function(){if("id"in c){var o=v.findIndex(function(i){var q=i.id;return q===c.id});l(v[o].config_value==c.config_value)}},[c]);var At=(0,a.useMemo)(function(){var o="";return y.forEach(function(i){var q=i.name,me=i.value;c.bind_stage===me&&(o=q)}),o},[y,c]),Xe=function(i){return f?!1:(i.preventDefault(),i.returnValue=m({id:"basic.save.warning"}))};(0,a.useEffect)(function(){return window.addEventListener("beforeunload",Xe),function(){window.removeEventListener("beforeunload",Xe)}},[f]);var De=function(i){return i&&i.indexOf("TONE_")!==0?"TONE_".concat(i):i};return(0,e.jsxs)(re.Z.Content,{children:[(0,e.jsx)(ee.Z,{spinning:_e,children:(0,e.jsxs)(R.Z,{justify:"space-between",children:[(0,e.jsxs)("div",{className:r().script_left,children:[(0,e.jsx)("div",{className:r().create_button_wrapper,children:(0,e.jsx)(I.Z,{type:"primary",onClick:Oe,children:(0,e.jsx)(n._H,{id:"basic.addScript.new"})})}),(0,e.jsxs)(R.Z,{justify:"space-between",className:r().left_title,children:[(0,e.jsxs)(M.Z.Text,{children:[(0,e.jsx)(n._H,{id:"basic.all.script"}),(v==null?void 0:v.length)&&"(".concat(v==null?void 0:v.length,")")]}),(0,e.jsx)("div",{className:r().filter_icon,onClick:Mt,children:(0,e.jsx)(et.Z,{style:{color:"rgba(0 , 0 , 0 ,.45)"}})}),(0,e.jsxs)(R.Z,{className:r().filter_dropdown,style:Z?{display:"block"}:{display:"none"},children:[(0,e.jsx)(w.Z,{span:24,className:r().filter_search_box,children:(0,e.jsx)(ce.Z,{placeholder:m({id:"basic.support.searching.by.script"}),value:B,onChange:function(i){var q=i.target;return S(q.value)},suffix:(0,e.jsx)(tt.Z,{})})}),(0,e.jsx)(Re.Z,{style:{margin:0}}),(0,e.jsx)(w.Z,{span:24,children:(0,e.jsxs)(R.Z,{justify:"space-between",children:[(0,e.jsx)(w.Z,{span:12,onClick:Tt,className:"".concat(r().filter_dropdown_opt," ").concat(r().filter_search_btn),children:(0,e.jsx)(n._H,{id:"operation.search"})}),(0,e.jsx)(w.Z,{span:12,onClick:Ht,className:r().filter_dropdown_opt,children:(0,e.jsx)(n._H,{id:"operation.reset"})})]})})]})]}),(0,e.jsx)(R.Z,{className:r().all_script,children:v==null?void 0:v.map(function(o){return(0,e.jsx)(w.Z,{span:24,className:+c.id==+o.id?r().script_item_active:r().script_item,onClick:function(){return pe(o)},onMouseEnter:function(){return x(o.id)},onMouseLeave:function(){return x(null)},children:(0,e.jsxs)(R.Z,{justify:"space-between",children:[(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)(it.Z,{width:200,title:De(o.config_key),children:De(o.config_key)})}),(0,e.jsx)(Pe.Z,{title:(0,e.jsx)("div",{style:{color:"red",width:"280px"},children:(0,e.jsx)(n._H,{id:"basic.delete.the.script.warning"})}),onCancel:function(){return Je(o)},okText:(0,e.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(n._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)($e.Z,{style:{color:"red"}}),children:(0,e.jsx)(nt.Z,{className:_===o.id?r().remove_active:r().remove})})]})},o.id)})})]}),(0,e.jsx)("div",{className:r().script_right,children:v.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(R.Z,{className:r().script_right_detail,align:"middle",children:[(0,e.jsx)(w.Z,{span:24,children:(0,e.jsxs)(R.Z,{children:[(0,e.jsxs)(w.Z,{span:8,className:r().history_top_info,children:[(0,e.jsxs)("span",{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.script_name"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)(je.Z,{title:De(c.config_key),placement:"bottomLeft",children:De(c.config_key)})})]}),(0,e.jsxs)(w.Z,{span:6,className:r().history_top_info,children:[(0,e.jsxs)("span",{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.atomic_step"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{children:At||"-"})]}),(0,e.jsxs)(w.Z,{span:10,className:r().history_top_info,children:[(0,e.jsxs)("span",{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.desc"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{className:r().desc_content_style,children:(0,e.jsx)(je.Z,{title:c.description,placement:"bottomLeft",children:c.description})})]})]})}),(0,e.jsx)(w.Z,{span:24,children:(0,e.jsxs)(he.Z,{children:[(0,e.jsxs)(M.Z.Text,{className:r().script_right_name,children:[(0,e.jsx)(n._H,{id:"basic.is_enable"}),"\uFF1A"]}),(0,e.jsx)(M.Z.Text,{children:c.enable?(0,e.jsx)("span",{style:{color:"#10CF2D"},children:(0,e.jsx)(n._H,{id:"basic.enable"})}):(0,e.jsx)("span",{style:{color:"#F5222D"},children:(0,e.jsx)(n._H,{id:"basic.stop"})})})]})}),(0,e.jsx)(ye.Z,{overlayStyle:{cursor:"pointer"},overlay:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(z.Z.Item,{onClick:ne,children:(0,e.jsx)(n._H,{id:"basic.edit.information"})}),(0,e.jsx)(z.Z.Item,{onClick:Pt,children:(0,e.jsx)(n._H,{id:"basic.historical.version"})})]}),children:(0,e.jsx)(at.Z,{style:{cursor:"pointer",position:"absolute",right:0,top:5}})})]}),(0,e.jsx)(R.Z,{className:r().right_code_context,children:(0,e.jsx)(lt.Z,{code:c.config_value,onChange:function(i){return j((0,E.Z)((0,E.Z)({},c),{},{config_value:i}))}})}),(0,e.jsx)(R.Z,{className:r().right_bottom_options,children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(I.Z,{style:{width:80,marginRight:20},onClick:St,disabled:f,type:"primary",children:(0,e.jsx)(n._H,{id:"basic.submit"})}),(0,e.jsxs)(M.Z.Text,{style:{fontSize:12,color:"rgba( 0 , 0 , 0 , .65 )",marginRight:20},children:[(0,e.jsx)(n._H,{id:"basic.last.modified.time"}),"\uFF1A",c.gmt_modified]}),(0,e.jsxs)(M.Z.Text,{style:{fontSize:12,color:"rgba( 0 , 0 , 0 , .65 )",marginRight:20},children:[(0,e.jsx)(n._H,{id:"basic.last.modified.person"}),"\uFF1A",c.update_user]}),c.commit&&(0,e.jsxs)(M.Z.Text,{style:{fontSize:12,color:"rgba( 0 , 0 , 0 , .65 )"},children:["Comment\uFF1A",c.commit]})]})})]}):(0,e.jsx)(de.Z,{})})]})}),(0,e.jsx)(rt,{stage:y,ref:p,onOk:Et}),(0,e.jsx)(ft,{stage:y,ref:T}),(0,e.jsx)(mt,{ref:Y,onOk:Ot})]})},Lt=t(11407),vt=t(68077),Nt=t(90846),_t=t(56511),Ee=t(93299),pt=t(76742),gt=(0,a.forwardRef)(function(b,m){var u=b.onOk,P=(0,n.YB)(),s=P.formatMessage,c=te.Z.useForm(),j=(0,d.Z)(c,1),C=j[0],U=(0,a.useState)(!1),_=(0,d.Z)(U,2),x=_[0],O=_[1],N=(0,a.useState)(!1),Z=(0,d.Z)(N,2),k=Z[0],A=Z[1],V=(0,a.useState)("new"),B=(0,d.Z)(V,2),S=B[0],J=B[1],X=(0,a.useState)({}),f=(0,d.Z)(X,2),l=f[0],D=f[1];(0,a.useImperativeHandle)(m,function(){return{show:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};D(Y),C.setFieldsValue(Y),J(p),O(!0)}}});var F=function(){O(!1),C.resetFields()},y=function(p,Y){p===200?(Ze.default.success(s({id:"operation.success"})),C.resetFields(),O(!1),u()):(0,Se.EV)(p,Y)},h=function(){var T=(0,L.Z)((0,g.Z)().mark(function p(){return(0,g.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:A(!0),C.validateFields().then(function(){var W=(0,L.Z)((0,g.Z)().mark(function K(v){var ue,_e,fe,pe,Oe,$;return(0,g.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(S!=="new"){ne.next=9;break}return ne.next=3,Ve((0,E.Z)({config_type:"sys"},v));case 3:ue=ne.sent,_e=ue.code,fe=ue.msg,y(_e,fe),ne.next=16;break;case 9:if(S!=="edit"){ne.next=16;break}return ne.next=12,Ne((0,E.Z)({config_type:"sys",config_id:l.id},v));case 12:pe=ne.sent,Oe=pe.code,$=pe.msg,y(Oe,$);case 16:A(!1);case 17:case"end":return ne.stop()}},K)}));return function(K){return W.apply(this,arguments)}}()).catch(function(W){console.log(W),A(!1)});case 2:case"end":return H.stop()}},p)}));return function(){return T.apply(this,arguments)}}();return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,open:x,width:"376",title:(0,e.jsx)(n._H,{id:"basic.addConfig.".concat(S)}),onClose:F,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(I.Z,{onClick:F,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(I.Z,{type:"primary",disabled:k,onClick:h,children:S==="edit"?(0,e.jsx)(n._H,{id:"operation.update"}):(0,e.jsx)(n._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(te.Z,{layout:"vertical",form:C,initialValues:{enable:!0},children:[(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.config_key"}),name:"config_key",rules:[{required:!0,min:1,max:32,pattern:/^[A-Za-z0-9\._-]+$/g,message:s({id:"please.enter.message"})}],children:(0,e.jsx)(ce.Z,{autoComplete:"off",placeholder:s({id:"basic.please.enter.config_key"})})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.is_enable"}),name:"enable",children:(0,e.jsxs)(be.ZP.Group,{children:[(0,e.jsx)(be.ZP,{value:!0,children:(0,e.jsx)(n._H,{id:"basic.enable"})}),(0,e.jsx)(be.ZP,{value:!1,children:(0,e.jsx)(n._H,{id:"basic.stop"})})]})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.config_value"}),name:"config_value",children:(0,e.jsx)(ce.Z.TextArea,{style:{height:400},placeholder:s({id:"basic.please.enter.config_value"})})}),(0,e.jsx)(te.Z.Item,{label:(0,e.jsx)(n._H,{id:"basic.desc"}),name:"description",children:(0,e.jsx)(ce.Z.TextArea,{style:{height:110},placeholder:s({id:"basic.please.enter.desc"})})})]})})}),Be=t(6130),xt=function(m,u){var P=(0,n.YB)(),s=P.formatMessage,c=(0,n.Kd)()==="en-US",j=(0,a.useRef)();(0,a.useImperativeHandle)(u,function(){return{openSetting:function(){return j.current.show()}}});var C={config_type:"sys",page_size:10,page_num:1},U=(0,a.useState)(C),_=(0,d.Z)(U,2),x=_[0],O=_[1],N=(0,n.QT)(function(f){return ze(f)},{formatResult:function(l){return l},initialData:{data:[],total:0},defaultParams:[C]}),Z=N.data,k=N.loading,A=N.refresh,V=N.run;(0,a.useEffect)(function(){V(x)},[x]);var B=function(l){j.current.show("edit",l)},S=function(){var f=(0,L.Z)((0,g.Z)().mark(function l(D){var F,y,h;return(0,g.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Ye({config_id:D.id});case 2:F=p.sent,y=F.code,h=F.msg,y===200?(A(),Ze.default.success(s({id:"operation.success"}))):(0,Se.EV)(y,h);case 6:case"end":return p.stop()}},l)}));return function(D){return f.apply(this,arguments)}}(),J=[(0,E.Z)({dataIndex:"config_key",title:(0,e.jsx)(n._H,{id:"basic.config_key"}),ellipsis:{showTitle:!1},render:function(l){return(0,e.jsx)(Be.K,{ellipsis:{tooltip:!0},placement:"topLeft",title:l,children:l})}},(0,Ee.QT)(x,O,"config_key")),(0,E.Z)({dataIndex:"config_value",title:(0,e.jsx)(n._H,{id:"basic.config_value"}),width:160,ellipsis:{showTitle:!1},render:function(l){return(0,e.jsx)(Be.K,{ellipsis:{tooltip:!0},placement:"topLeft",title:l,children:l})}},(0,Ee.QT)(x,O,"config_value")),(0,E.Z)({dataIndex:"enable",title:(0,e.jsx)(n._H,{id:"basic.is_enable"}),width:100,render:function(l){return(0,e.jsx)(_t.Z,{status:l?"success":"error",text:(0,e.jsx)(M.Z.Text,{children:l?(0,e.jsx)(n._H,{id:"basic.enable"}):(0,e.jsx)(n._H,{id:"basic.stop"})})})}},(0,Ee.KW)(x,O,[{name:(0,e.jsx)(n._H,{id:"basic.enable"}),value:1},{name:(0,e.jsx)(n._H,{id:"basic.stop"}),value:0}],"enable")),{dataIndex:"gmt_created",title:(0,e.jsx)(n._H,{id:"basic.gmt_created"}),width:175},{dataIndex:"gmt_modified",title:(0,e.jsx)(n._H,{id:"basic.gmt_modified"}),width:175},(0,E.Z)((0,E.Z)({dataIndex:"creator_name",title:(0,e.jsx)(n._H,{id:"basic.creator"})},(0,Ee.ln)(x,O,"creator")),{},{render:function(l){return(0,e.jsx)(e.Fragment,{children:l||"-"})}}),(0,E.Z)((0,E.Z)({dataIndex:"update_user",title:(0,e.jsx)(n._H,{id:"basic.update_user"})},(0,Ee.ln)(x,O,"update_user")),{},{render:function(l){return(0,e.jsx)(e.Fragment,{children:l||"-"})}}),{dataIndex:"description",title:(0,e.jsx)(n._H,{id:"basic.desc"}),ellipsis:{showTitle:!1},render:function(l){return(0,e.jsx)(Be.K,{ellipsis:{tooltip:!0},placement:"topLeft",title:l,children:l||"-"})}},{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),width:100,fixed:"right",render:function(l){return(0,e.jsxs)(he.Z,{children:[(0,e.jsx)("span",{onClick:function(){return B(l)},style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(Pe.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(n._H,{id:"basic.delete.popconfirm.title"})}),onCancel:function(){return S(l)},okText:(0,e.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(n._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)($e.Z,{style:{color:"red"}}),children:(0,e.jsx)(M.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(n._H,{id:"operation.delete"})})})]})}}],X=function(){return A()};return(0,e.jsxs)(re.Z.Content,{children:[(0,e.jsxs)(ee.Z,{spinning:k,children:[(0,e.jsx)(vt.Z,{rowKey:"id",dataSource:Z==null?void 0:Z.data,columns:J,pagination:!1,size:"small",scroll:c?{x:1200}:void 0}),(0,e.jsx)(pt.Z,{pageSize:x.page_size,currentPage:x.page_num,total:(Z==null?void 0:Z.total)||0,onPageChange:function(l){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.page_num;O((0,E.Z)((0,E.Z)({},x),{},{page_size:D,page_num:l})),V(x)}})]}),(0,e.jsx)(gt,{ref:j,onOk:X})]})},jt=(0,a.forwardRef)(xt),Zt=t(65113),yt=t.n(Zt),bt=t(75073),Ct=function(b){var m=b.location,u=(0,a.useState)(m.query.t||"script"),P=(0,d.Z)(u,2),s=P[0],c=P[1],j=(0,a.useRef)(),C=function(_){c(_)};return(0,e.jsx)(bt.mQ,{title:(0,e.jsxs)(Q.Z,{defaultActiveKey:"script",onTabClick:C,className:yt().tab_style,children:[(0,e.jsx)(Q.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"basic.script"})},"script"),(0,e.jsx)(Q.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"basic.sys"})},"sys")]}),extra:s==="sys"&&(0,e.jsx)(I.Z,{type:"primary",onClick:function(){return j.current.openSetting()},children:(0,e.jsx)(n._H,{id:"basic.new.config"})}),children:s==="sys"?(0,e.jsx)(jt,{ref:j}):(0,e.jsx)(ht,{})})}}}]);
