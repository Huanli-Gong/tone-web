(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5540,2485],{76613:function(Me,Te,n){"use strict";n.d(Te,{Z:function(){return De}});var v=n(45972),T=n(22374),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},s=l,t=n(25078),Fe=function(Re,He){return T.createElement(t.Z,(0,v.Z)((0,v.Z)({},Re),{},{ref:He,icon:s}))};Fe.displayName="MinusCircleOutlined";var De=T.forwardRef(Fe)},66503:function(Me){Me.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},19061:function(Me){Me.exports={product_left:"product_left___3Ol6E",create_button_wrapper:"create_button_wrapper___1Qk2f",all_product:"all_product___d7cbP",text_ellip:"text_ellip___3e-6i",left_title:"left_title___1JRjC",product_item:"product_item___EPS69",product_item_active:"product_item_active___dm44V",remove:"remove___1i9Sm",remove_active:"remove_active___39bgQ",product_right:"product_right___2GpaM",product_right_detail:"product_right_detail___SmtnF",detail_item_row:"detail_item_row___3hZFe",product_right_name:"product_right_name___32Q4S",product_right_all_branch:"product_right_all_branch___1YYFp",public_ellip:"public_ellip___1tlO5",right_branch_context:"right_branch_context___2G6ZI",right_branch_context_wrapper:"right_branch_context_wrapper___31TWm",right_branch_context_box_father:"right_branch_context_box_father___1MJkQ",right_branch_context_box_child:"right_branch_context_box_child___fsKkB",right_branch_context_box_child_empty:"right_branch_context_box_child_empty___2IDAm",right_branch_context_box_child_firstLine:"right_branch_context_box_child_firstLine___3QUc4",right_branch_context_box_child_secondLine:"right_branch_context_box_child_secondLine___3R-uN",title_detail_item:"title_detail_item___e2rIo",title_detail_branch:"title_detail_branch___2A_8I",create_branch_name:"create_branch_name___Tlcv5",title_detail_items:"title_detail_items___ViWhA",title_detail_project:"title_detail_project___2AaiZ",menu_font_color:"menu_font_color___2Pdmo",create_project_name:"create_project_name___3nwfu",modalChange:"modalChange___RLvpQ",drawer_warpper:"drawer_warpper___1JPxX",content_warpper:"content_warpper___3SdPN",product_form:"product_form___2KDzS"}},38508:function(Me){Me.exports={product_left:"product_left___28WNQ",create_button_wrapper:"create_button_wrapper___sEbe_",all_product:"all_product___U38nf",text_ellip:"text_ellip___22QC2",left_title:"left_title____3uk6",product_row:"product_row___1gHkF",move_active:"move_active___3DxD5",move:"move___1zRjx",product_item_default:"product_item_default___2cmv4",product_item_old:"product_item_old___1zGok",product_item:"product_item___doe6B",product_item_active:"product_item_active___374Co",remove:"remove___1xqKH",remove_active:"remove_active___3b9wy",product_right:"product_right___128w5",product_right_detail:"product_right_detail___1-IoG",detail_item_row:"detail_item_row___1K2Tl",title_detail_item:"title_detail_item___sxJPv",product_right_name:"product_right_name___1ntvP",content_warpper:"content_warpper___3QmV0",test_summary_job:"test_summary_job___IcYYj",product_right_all_project:"product_right_all_project___2iBpK",public_ellip:"public_ellip___3QHrH",right_project:"right_project___2nq8b",project_warpper:"project_warpper___2uH_y",project_default_icon:"project_default_icon___jPZm9",project_default_icon_en:"project_default_icon_en___M1yjA",project_child:"project_child___aV2bm",project_name:"project_name___1Sdiy",project_version:"project_version___1Phna",project_icon:"project_icon___1eUqo",project_create:"project_create___3yo3S",project_create_empty:"project_create_empty___13b70",title_detail_project:"title_detail_project___2ebpQ",create_project_name:"create_project_name___2nb-4",title_detail_items:"title_detail_items___2SFWv",drawer_warpper:"drawer_warpper___ocMg6",modal_warpper:"modal_warpper___3b4xK",menu_font_color:"menu_font_color___1u1Ma",modalChange:"modalChange___2R-0x",product_form:"product_form___3dDlg",product_helpForm:"product_helpForm___3ZMsO"}},12280:function(Me){Me.exports={layout:"layout___1Uz98",ws_slider:"ws_slider___1OjDP",ws_menu_styles:"ws_menu_styles___zKo5V",ws_sb_st:"ws_sb_st___rWsNb",content:"content___2zB0f",tab_style:"tab_style___1hBcK"}},80873:function(Me,Te,n){"use strict";n.d(Te,{f:function(){return $e}});var v=n(57359),T=n(34423),l=n(20418),s=n(79625),t=n(96584),Fe=n(488),De=n(22374),Be=n(66503),Re=n.n(Be),He=n(74066),he=n(52454),Ie=["desc","title"],$e=function(Pe){var X=Pe.desc,We=Pe.title,Ce=(0,Fe.Z)(Pe,Ie);return(0,he.jsxs)(T.Z,{children:[(0,he.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:We}),(0,he.jsx)(t.Z,(0,l.Z)((0,l.Z)({overlayClassName:Re().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},Ce),{},{title:X,color:"#fff",children:(0,he.jsx)(He.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},79638:function(Me,Te,n){"use strict";var v=n(79625),T=n(96584),l=n(20418),s=n(39190),t=n(488),Fe=n(41428),De=n(22374),Be=n(97939),Re=n(526),He=n(52454),he=["title","children","width","color","placement","style"],Ie,$e=Be.ZP.div(Ie||(Ie=(0,Fe.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),Ye=function(X){var We=X.title,Ce=X.children,Xe=X.width,Ae=X.color,ze=X.placement,le=ze===void 0?"topLeft":ze,qe=X.style,Y=(0,t.Z)(X,he),Le=(0,De.useRef)(null),Se=(0,De.useState)(!1),C=(0,s.Z)(Se,2),fe=C[0],et=C[1],c=(0,Re.CR)(),o=c.width,a=function(){var Ve,Ue,Qe=Le==null||(Ve=Le.current)===null||Ve===void 0?void 0:Ve.clientWidth,z=Le==null||(Ue=Le.current)===null||Ue===void 0?void 0:Ue.scrollWidth;et(Qe<z)};(0,De.useEffect)(function(){a()},[We,o]);var q=(0,He.jsx)($e,(0,l.Z)((0,l.Z)({ref:Le,style:(0,l.Z)({width:Xe,color:Ae},qe)},Y),{},{children:Ce||We||"-"}));return fe?(0,He.jsx)(T.Z,{title:We,placement:le,overlayStyle:{wordBreak:"break-all"},children:q}):q};Te.Z=Ye},75073:function(Me,Te,n){"use strict";n.d(Te,{mQ:function(){return Re},gM:function(){return He},nU:function(){return Ie}});var v=n(40204),T=n(10724),l=n(41428),s=n(97939),t,Fe,De,Be,Re=(0,s.ZP)(T.Z)(t||(t=(0,l.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),He=(0,s.ZP)(Re)(Fe||(Fe=(0,l.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),he=(0,s.ZP)(T.Z)(De||(De=(0,l.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),Ie=(0,s.ZP)(he)(Be||(Be=(0,l.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},41701:function(Me,Te,n){"use strict";n.r(Te),n.d(Te,{default:function(){return sr}});var v=n(54905),T=n(90087),l=n(39190),s=n(22374),t=n(22812),Fe=n(16832),De=n(69827),Be=n(67448),Re=n(47548),He=n(20693),he=n(3278),Ie=n(87967),$e=n(65320),Ye=n(52730),Pe=n(25205),X=n(20418),We=n(70772),Ce=n(6701),Xe=n(20632),Ae=n(71853),ze=n(14320),le=n(53479),qe=n(31650),Y=n(25100),Le=n(46721),Se=n(94867),C=n(35832),fe=n(32326),et=n(81138),c=n(96146),o=n(65790),a=n(17187),q=n(74495),r=n(46601),Ve=n(76613),Ue=n(93980),Qe=n(24812),z=n(20662),be=n(79638),ir=n(88018),Ge=n(58414),lr=n(57359),Ee=n(34423),ht=n(38508),j=n.n(ht),e=n(52454),_t=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),y=a.Z.useForm(),B=(0,l.Z)(y,1),F=B[0],oe=(0,s.useState)(!1),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)(!1),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useState)(!1),D=(0,l.Z)(re,2),k=D[0],P=D[1],de=(0,s.useState)(),ce=(0,l.Z)(de,2),ue=ce[0],pe=ce[1],A=(0,s.useState)("new"),je=(0,l.Z)(A,2),R=je[0],ie=je[1];(0,s.useImperativeHandle)(d,function(){return{show:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(!0),ie($),pe(i({id:"product.name.message"})),F.setFieldsValue(K),F.setFieldsValue({command:K.command===void 0?"uname -r":K.command})}}});var b=function(){F.resetFields(),P(!1),E(!1),pe(void 0)},J=function($,K,N){$===200?(u.onOk(N),c.default.success(i({id:"operation.success"})),b()):$===1368?(G(!0),pe(i({id:"product.name.existed"}))):c.default.error(K),P(!1)},ne=function(){pe(void 0),P(!0),F.validateFields().then(function(){var $=(0,fe.Z)((0,C.Z)().mark(function K(N){var x,g,se,xe,S,h;return(0,C.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(R!=="new"){O.next=9;break}return O.next=3,(0,z.ry)((0,X.Z)({ws_id:Z},N));case 3:x=O.sent,g=x.code,se=x.msg,J(g,se,R),O.next=16;break;case 9:return N.ws_id=Z,O.next=12,(0,z.nM)((0,X.Z)({prd_id:u.current.id},N));case 12:xe=O.sent,S=xe.code,h=xe.msg,J(S,h,R);case 16:case"end":return O.stop()}},K)}));return function(K){return $.apply(this,arguments)}}()).catch(function($){console.log($),P(!1)})};return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:R==="new"?"product.new.product.info":"product.edit.product.info"}),width:"380",onClose:b,open:p,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Se.Z,{onClick:b,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Se.Z,{type:"primary",disabled:k,onClick:ne,children:R==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(a.Z,{form:F,layout:"vertical",children:[(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.name"}),name:"name",className:_e?j().product_form:j().product_helpForm,help:ue,rules:[{required:!0,message:i({id:"product.name.message"}),pattern:/^[A-Za-z0-9\._-]{1,32}$/g}],children:(0,e.jsx)(he.Z,{placeholder:i({id:"product.please.enter.name"})})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version.command"}),name:"command",className:j().product_helpForm,help:(0,e.jsx)(t._H,{id:"product.version.command.help"}),children:(0,e.jsx)(he.Z,{placeholder:i({id:"product.please.enter.version.command"})})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.description.option"}),name:"description",children:(0,e.jsx)(he.Z.TextArea,{placeholder:i({id:"product.please.enter.comments"}),rows:4})})]})})}),or=n(67515),Je=n(41083),dr=n(11407),ft=n(41604),mt=n(97207),vt=n(5888),jt=n(38755),xt=n(80873),cr=n(88966),Ke=n(11048),Ne=n(39935),gt=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),y=a.Z.useForm(),B=(0,l.Z)(y,1),F=B[0],oe=(0,s.useState)(!1),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)({}),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useState)(!0),D=(0,l.Z)(re,2),k=D[0],P=D[1];(0,s.useImperativeHandle)(d,function(){return{show:function(A){E(!0),P(!0),G(A),F.setFieldsValue(A)}}});var de=function(){E(!1)},ce=function(){P(!1)},ue=function(){var pe=(0,fe.Z)((0,C.Z)().mark(function A(){return(0,C.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:F.validateFields().then(function(){var ie=(0,fe.Z)((0,C.Z)().mark(function b(J){var ne,ae,$;return(0,C.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return J.ws_id=Z,N.next=3,(0,z.ty)((0,X.Z)({project_id:_e.id},J));case 3:ne=N.sent,ae=ne.code,$=ne.msg,ae===200?(u.onOk(),u.setVisible(!1),E(!1)):(0,Ne.EV)(ae,$);case 7:case"end":return N.stop()}},b)}));return function(b){return ie.apply(this,arguments)}}()).catch(function(){return P(!1)});case 1:case"end":return R.stop()}},A)}));return function(){return pe.apply(this,arguments)}}();return(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"product.edit.project"}),open:p,onOk:ue,onCancel:de,maskClosable:!1,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Se.Z,{onClick:de,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Se.Z,{type:"primary",disabled:k,onClick:ue,children:(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(a.Z,{form:F,layout:"vertical",children:[(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.project.name"}),name:"name",rules:[{required:!0,max:64,pattern:/^[A-Za-z0-9\._-]*$/g,message:i({id:"product.project.name.message"})}],children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.project.name"}),onChange:ce})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version"}),name:"product_version",initialValue:"uname -r",children:(0,e.jsx)(he.Z,{autoComplete:"auto",onChange:ce})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"project.description.option"}),name:"description",children:(0,e.jsx)(he.Z.TextArea,{placeholder:i({id:"product.please.enter.comments"}),rows:4,onChange:ce})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.dashboard.count"}),name:"is_show",children:(0,e.jsxs)(Ke.ZP.Group,{onChange:ce,children:[(0,e.jsx)(Ke.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ke.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]})})}),ur=n(13059),Zt=n(53676),yt=n(488),wt=n(41428),bt=n(97939),Ct=["title","children","width","color","placement","style"],lt,St=bt.ZP.div(lt||(lt=(0,wt.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),Pt=function(d){var m=d.title,i=d.children,Z=d.width,y=d.color,B=d.placement,F=B===void 0?"topLeft":B,oe=d.style,V=(0,yt.Z)(d,Ct),p=(0,s.useRef)(null),E=(0,s.useState)(!1),te=(0,l.Z)(E,2),Q=te[0],_e=te[1],G=function(){var k,P,de=p==null||(k=p.current)===null||k===void 0?void 0:k.clientWidth,ce=p==null||(P=p.current)===null||P===void 0?void 0:P.scrollWidth;_e(de<ce)};(0,s.useEffect)(function(){G()},[m]);var re=(0,e.jsx)(St,(0,X.Z)((0,X.Z)({ref:p,style:(0,X.Z)({width:Z,color:y},oe)},V),{},{children:i||m||"-"}));return Q?(0,e.jsx)(Zt.Z,{content:m,placement:F,overlayStyle:{wordBreak:"break-all"},children:re}):re},Et=Pt,pr=n(69230),ot=n(33821),hr=n(79625),nt=n(96584),at=n(72882),Ot=(0,s.forwardRef)(function(u,d){var m,i=(0,t.YB)(),Z=i.formatMessage,y=a.Z.useForm(),B=(0,l.Z)(y,1),F=B[0],oe=(0,s.useState)(!1),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)(!1),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useState)({}),D=(0,l.Z)(re,2),k=D[0],P=D[1],de=(0,s.useState)({}),ce=(0,l.Z)(de,2),ue=ce[0],pe=ce[1],A=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),je={ws_id:A};(0,s.useImperativeHandle)(d,function(){return{show:function(h){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pe(w.data.length),E(!0),P(h),b({ws_id:A})}}});var R=(0,t.QT)(function(S){return(0,z._L)(S)},{manual:!0}),ie=R.data,b=R.run,J=(0,t.QT)(function(S){return(0,z._L)(S)},{manual:!0}),ne=J.run,ae=(0,s.useCallback)(function(S){S&&N({repo_id:S}),ne({repo_id:S}).then(function(h){F.setFieldsValue({gitUrl:h[0].git_url})})},[]),$=(0,t.QT)(function(S){return(0,z.vS)(S)},{defaultParams:[je],initialData:{data:[]},manual:!0,formatResult:function(h){return h}}),K=$.data,N=$.run,x=function(){var S=(0,fe.Z)((0,C.Z)().mark(function h(){return(0,C.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!_e){O.next=2;break}return O.abrupt("return");case 2:G(!0),F.validateFields().then(function(){var me=(0,fe.Z)((0,C.Z)().mark(function ve(W){var M,L,ge,Ze,H,_;return(0,C.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(W.ws_id=A,ue!==0){I.next=10;break}return I.next=4,(0,z.xN)((0,X.Z)({project_id:k.id,is_master:1},W));case 4:M=I.sent,L=M.code,ge=M.msg,g(L,ge),I.next=16;break;case 10:return I.next=12,(0,z.xN)((0,X.Z)({project_id:k.id,is_master:0},W));case 12:Ze=I.sent,H=Ze.code,_=Ze.msg,g(H,_);case 16:case"end":return I.stop()}},ve)}));return function(ve){return me.apply(this,arguments)}}()).catch(function(me){console.log(me),G(!1)});case 4:case"end":return O.stop()}},h)}));return function(){return S.apply(this,arguments)}}(),g=function(h,w){h===200?(c.default.success(Z({id:"operation.success"})),u.onOk(),E(!1),F.resetFields(),K.data=[]):(0,Ne.EV)(h,w),G(!1)},se=function(){E(!1),G(!1),F.resetFields(),K.data=[]},xe=function(){window.location.replace("/ws/".concat(A,"/product?t=code"))};return(0,e.jsxs)(Je.Z,{title:(0,e.jsx)(t._H,{id:"code.add.code"}),open:p,onOk:x,onCancel:se,cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),className:j().modal_warpper,maskClosable:!1,children:[(0,e.jsx)("div",{className:j().content_warpper,children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsxs)(Y.Z.Text,{style:{color:"rgba(0,0,0,0.85)",fontWeight:"bold",fontSize:14},children:[(0,e.jsx)(t._H,{id:"product.project.name"}),"\uFF1A"]}),(0,e.jsx)(nt.Z,{title:k.name,placement:"topLeft",overlayStyle:{wordBreak:"break-all"},children:(0,e.jsx)(Y.Z.Text,{style:{color:"#000",opacity:.65,fontSize:14},children:(0,e.jsx)("div",{className:j().text_ellip,children:k.name})})})]})}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:j().content_warpper,children:(0,e.jsxs)(a.Z,{form:F,layout:"vertical",children:[(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories"}),name:"repo_id",rules:[{required:!0,message:Z({id:"product.repositories.cannot.be.empty"})}],children:(0,e.jsx)(ot.Z,{placeholder:(0,e.jsx)(t._H,{id:"product.please.select.the.repositories"}),notFoundContent:(0,e.jsx)("div",{style:{height:0}}),onChange:ae,options:ie==null?void 0:ie.map(function(S){return{value:S.id,label:S.name}}),filterOption:function(h,w){return w.label.toLowerCase().indexOf(h.toLowerCase())>=0},showSearch:!0,dropdownRender:function(h){return(0,e.jsxs)("div",{children:[h,(0,e.jsx)("div",{style:{display:"inline-block",flexWrap:"nowrap",width:"100%",padding:"8px 0 8px 8px"},onClick:xe,children:(0,e.jsxs)("span",{children:[(0,e.jsx)(at.Z,{style:{marginRight:6,color:"#1890FF"}}),(0,e.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:(0,e.jsx)(t._H,{id:"product.new.repositories"})})]})})]})}})}),(0,e.jsx)(a.Z.Item,{label:"GitUrl",name:"gitUrl",children:(0,e.jsx)(he.Z,{placeholder:Z({id:"product.please.select.gitUrl"}),disabled:!0})}),(0,e.jsx)(a.Z.Item,{label:"Branch",name:"branch_id",rules:[{required:!0,message:Z({id:"product.branch.cannot.be.empty"})}],children:(0,e.jsx)(ot.Z,{allowClear:!0,showSearch:!0,filterOption:function(h,w){return w.label.toLowerCase().indexOf(h.toLowerCase())>=0},placeholder:(0,e.jsx)(t._H,{id:"product.please.select.branch"}),options:(m=K.data)===null||m===void 0?void 0:m.map(function(S){return{value:S.id,label:S.name}})})})]})})]})}),st=n(6130),Dt=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=(0,t.Kd)()==="en-US",y=(0,Qe.UO)(),B=y.ws_id,F=(0,s.useState)(!1),oe=(0,l.Z)(F,2),V=oe[0],p=oe[1],E=(0,s.useState)("detail"),te=(0,l.Z)(E,2),Q=te[0],_e=te[1],G=(0,s.useState)({}),re=(0,l.Z)(G,2),D=re[0],k=re[1],P=(0,s.useRef)(null),de=(0,s.useRef)(null),ce=(0,s.useState)(!1),ue=(0,l.Z)(ce,2),pe=ue[0],A=ue[1];(0,s.useImperativeHandle)(d,function(){return{show:function(w){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),_e(w),k(O),"id"in O&&J({project_id:O.id})}}});var je=(0,t.QT)(function(h){return(0,z.fW)(h)},{formatResult:function(w){return w},initialData:{data:[]},manual:!0}),R=je.data,ie=je.loading,b=je.refresh,J=je.run;(0,s.useEffect)(function(){var h=u.projectData||{},w=h.data,O=w||[],me=O.find(function(ve){return ve.id===D.id});(0,mt.isUndefined)(me)||k(me)},[u.projectData]);var ne=function(){p(!1)},ae=function(){var h=(0,fe.Z)((0,C.Z)().mark(function w(O,me){var ve;return(0,C.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,z.h5)({is_master:1,relation_id:me.id});case 2:ve=M.sent,K(ve);case 4:case"end":return M.stop()}},w)}));return function(O,me){return h.apply(this,arguments)}}(),$=function(){J({project_id:D.id})},K=function(w){w.code===200?(b(),c.default.success(i({id:"operation.success"}))):(0,Ne.EV)(w.code,w.msg)},N=function(){var h=(0,fe.Z)((0,C.Z)().mark(function w(O){var me,ve,W;return(0,C.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,z.yE)({relation_id:O.id});case 2:me=L.sent,ve=me.code,W=me.msg,ve===200?(b(),c.default.success(i({id:"operation.success"}))):(0,Ne.EV)(ve,W);case 6:case"end":return L.stop()}},w)}));return function(O){return h.apply(this,arguments)}}(),x=[{title:(0,e.jsx)(Et,{title:i({id:"product.repositories"}),placement:"top"}),dataIndex:"branch_name",ellipsis:!0,render:function(w){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:w})}},{title:"GitUrl",dataIndex:"git_url",ellipsis:!0,render:function(w){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:w})}},{title:"Branch",dataIndex:"branch_name",ellipsis:!0,render:function(w){return(0,e.jsx)(st.K,{ellipsis:{tooltip:!0},children:w})}},{title:(0,e.jsx)(xt.f,{title:i({id:"product.is_master"}),desc:i({id:"product.is_master.desc"})}),width:Z?160:90,dataIndex:"is_master",render:function(w,O){return O.is_master?(0,e.jsx)(vt.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(jt.Z,{style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"},onClick:function(){return ae(w,O)}})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),width:Z?100:80,render:function(w){return(0,e.jsx)("div",{children:w.is_master?(0,e.jsx)(Ee.Z,{children:(0,e.jsx)(Ae.Z,{title:(0,e.jsx)(t._H,{id:"product.is_master.cannot.be.deleted"}),placement:"bottomLeft",cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.delete"}),okType:"default",okButtonProps:{disabled:!0},children:(0,e.jsx)(Y.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})}):(0,e.jsx)(Ee.Z,{children:(0,e.jsx)(Ae.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),onConfirm:function(){return N(w)},placement:"bottomLeft",cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),children:(0,e.jsx)(Y.Z.Text,{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})})})}}],g=function(){var h=(0,fe.Z)((0,C.Z)().mark(function w(){return(0,C.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,z.th)({project_id:D.id,ws_id:B}).then(function(ve){ve.code===200&&(c.default.success(i({id:"request.delete.success"})),A(!1),p(!1),se())});case 2:case"end":return me.stop()}},w)}));return function(){return h.apply(this,arguments)}}(),se=function(){u.onOk()},xe=function(w){P.current.show(w)},S=function(w){de.current.show(w,R)};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:Q==="detail"?(0,e.jsx)(t._H,{id:"product.detail.product"}):Q,width:"680",onClose:ne,visible:V,className:j().drawer_warpper,children:[(0,e.jsx)($e.Z,{placement:"bottom",overlayStyle:{cursor:"pointer"},overlay:(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(Pe.Z.Item,{onClick:function(){return xe(D)},children:(0,e.jsx)(t._H,{id:"product.edit.project"})}),(0,e.jsx)(Pe.Z.Item,{onClick:function(){return A(!0)},children:(0,e.jsx)("i",{className:j().menu_font_color,children:(0,e.jsx)(t._H,{id:"product.delete.project"})})})]}),children:(0,e.jsx)(Ue.Z,{style:{cursor:"pointer",position:"absolute",right:55,top:21}})}),(0,e.jsxs)("div",{className:j().content_warpper,children:[(0,e.jsxs)(Ee.Z,{className:j().title_detail_items,children:[(0,e.jsxs)(Y.Z.Text,{className:j().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.project.name"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:D.name,width:450})]}),(0,e.jsxs)(Ee.Z,{className:j().title_detail_items,children:[(0,e.jsxs)(Y.Z.Text,{className:j().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.version"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:D.product_version,width:450})]}),(0,e.jsxs)(Ee.Z,{className:j().title_detail_items,children:[(0,e.jsxs)(Y.Z.Text,{className:j().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.project.desc"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:D.description,width:500})]}),(0,e.jsxs)(Ee.Z,{className:j().title_detail_items,children:[(0,e.jsxs)(Y.Z.Text,{className:j().product_right_name,children:[(0,e.jsx)(t._H,{id:"product.dashboard.count"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:D.is_show==1?i({id:"operation.yes"}):i({id:"operation.no"})})]})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsxs)("div",{className:j().content_warpper,children:[(0,e.jsxs)(le.Z,{style:{height:60,lineHeight:"60px"},children:[(0,e.jsx)(Ce.Z,{span:19,style:{color:"#000",fontWeight:"bold"},children:(0,e.jsx)(t._H,{id:"code.manage"})}),(0,e.jsx)(Ce.Z,{span:5,style:{textAlign:"right"},children:(0,e.jsx)(Se.Z,{type:"primary",onClick:function(){return S(D)},children:(0,e.jsx)(t._H,{id:"code.add.code"})})})]}),(0,e.jsx)(ft.Z,{size:"small",rowKey:"id",loading:ie,columns:x,dataSource:R.data,pagination:!1})]}),D.is_default?(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),className:j().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),okButtonProps:{disabled:!0},getContainer:!1,visible:pe,onOk:function(){return g()},onCancel:function(){return A(!1)},width:390,centered:!0,maskClosable:!1,children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"product.the.default.item.cannot.be.deleted"})})}):(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),className:j().modalChange,okType:"danger",okText:(0,e.jsx)(t._H,{id:"operation.delete"}),getContainer:!1,visible:pe,onOk:function(){return g()},onCancel:function(){return A(!1)},width:390,centered:!0,maskClosable:!1,children:(0,e.jsx)("p",{children:i({id:"product.are.you.sure.you.delete.project"},{data:D.name})})}),(0,e.jsx)(gt,{ref:P,onOk:se,setVisible:p}),(0,e.jsx)(Ot,{ref:de,onOk:$})]})}),Rt=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),y=a.Z.useForm(),B=(0,l.Z)(y,1),F=B[0],oe=(0,s.useState)(!1),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)(!1),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useState)(),D=(0,l.Z)(re,2),k=D[0],P=D[1],de=(0,s.useState)("new"),ce=(0,l.Z)(de,2),ue=ce[0],pe=ce[1];(0,s.useImperativeHandle)(d,function(){return{show:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(!0),pe(b),F.setFieldsValue(J)}}});var A=function(){F.resetFields(),G(!1),E(!1),P(void 0)},je=function(b,J){b===200?(u.onOk(),c.default.success(i({id:"operation.success"})),A()):b===1371?P(i({id:"project.name.already.exists"})):c.default.error(J),G(!1)},R=function(){G(!0),F.validateFields().then(function(){var b=(0,fe.Z)((0,C.Z)().mark(function J(ne){var ae,$,K;return(0,C.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(ue!=="new"){x.next=7;break}return x.next=3,(0,z.$L)((0,X.Z)({ws_id:Z,product_id:u.current.id},ne));case 3:ae=x.sent,$=ae.code,K=ae.msg,je($,K);case 7:case"end":return x.stop()}},J)}));return function(J){return b.apply(this,arguments)}}()).catch(function(b){console.log(b),G(!1)})};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:ue==="new"?(0,e.jsx)(t._H,{id:"product.create.project"}):ue,width:"380",onClose:A,visible:p,className:j().drawer_warpper,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Se.Z,{onClick:A,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Se.Z,{type:"primary",disabled:_e,onClick:R,children:(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:[(0,e.jsxs)("div",{className:j().content_warpper,children:[(0,e.jsx)(Ee.Z,{style:{display:"revert",marginBottom:5},children:(0,e.jsx)(Y.Z.Text,{style:{color:"#000",opacity:.85,fontSize:14},children:(0,e.jsx)(t._H,{id:"product.name"})})}),(0,e.jsx)(Ee.Z,{className:j().title_detail_project,children:(0,e.jsx)(be.Z,{title:u.current.name})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:j().content_warpper,children:(0,e.jsxs)(a.Z,{form:F,layout:"vertical",initialValues:{is_show:1},className:j().product_form,children:[(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.project.name"}),name:"name",help:k,rules:[{required:!0,max:64,pattern:/^[A-Za-z0-9\._-]*$/g,message:i({id:"product.project.name.message"})}],children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.project.name"})})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.version.option"}),name:"product_version",children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.version"})})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.description.option"}),name:"description",children:(0,e.jsx)(he.Z.TextArea,{placeholder:i({id:"product.please.enter.desc"}),rows:4})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.dashboard.count"}),name:"is_show",children:(0,e.jsxs)(Ke.ZP.Group,{children:[(0,e.jsx)(Ke.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(Ke.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]})})]})}),it=n(79394),Mt=n(93667),Tt=n(24112),dt,Ft=["svgRef","title"];function tt(){return tt=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(u[i]=m[i])}return u},tt.apply(this,arguments)}function Ht(u,d){if(u==null)return{};var m=kt(u,d),i,Z;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(u);for(Z=0;Z<y.length;Z++)i=y[Z],!(d.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,i)||(m[i]=u[i]))}return m}function kt(u,d){if(u==null)return{};var m={},i=Object.keys(u),Z,y;for(y=0;y<i.length;y++)Z=i[y],!(d.indexOf(Z)>=0)&&(m[Z]=u[Z]);return m}var Bt=function(d){var m=d.svgRef,i=d.title,Z=Ht(d,Ft);return s.createElement("svg",tt({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:m},Z),i?s.createElement("title",null,i):null,dt||(dt=s.createElement("g",{id:"ws\\u7EA7dashboard\\u4F18\\u5316",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"\\u9879\\u76EE\\u52A0\\u7EDF\\u8BA1icon",transform:"translate(-582.000000, -305.000000)",fillRule:"nonzero"},s.createElement("g",{id:"Group-2",transform:"translate(563.000000, 254.000000)"},s.createElement("g",{id:"\\u7EDF\\u8BA1",transform:"translate(19.000000, 51.000000)"},s.createElement("rect",{id:"\\u77E9\\u5F62",fill:"#000000",opacity:0,x:0,y:0,width:16,height:16}),s.createElement("path",{d:"M3,2 L13,2 C13.5522847,2 14,2.44771525 14,3 L14,13 C14,13.5522847 13.5522847,14 13,14 L3,14 C2.44771525,14 2,13.5522847 2,13 L2,3 C2,2.44771525 2.44771525,2 3,2 Z M4,7 L4,12 L6,12 L6,7 L4,7 Z M7,5 L7,12 L9,12 L9,5 L7,5 Z M10,8 L10,12 L12,12 L12,8 L10,8 Z",id:"\\u5F62\\u72B6",fill:"#1890FF"})))))))},$t=s.forwardRef(function(u,d){return s.createElement(Bt,tt({svgRef:d},u))}),_r=n.p+"static/statistical.6ee6bddd.svg",ct,Lt=["svgRef","title"];function rt(){return rt=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(u[i]=m[i])}return u},rt.apply(this,arguments)}function It(u,d){if(u==null)return{};var m=At(u,d),i,Z;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(u);for(Z=0;Z<y.length;Z++)i=y[Z],!(d.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(u,i)||(m[i]=u[i]))}return m}function At(u,d){if(u==null)return{};var m={},i=Object.keys(u),Z,y;for(y=0;y<i.length;y++)Z=i[y],!(d.indexOf(Z)>=0)&&(m[Z]=u[Z]);return m}var Nt=function(d){var m=d.svgRef,i=d.title,Z=It(d,Lt);return s.createElement("svg",rt({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:m},Z),i?s.createElement("title",null,i):null,ct||(ct=s.createElement("g",{id:"ws\\u7EA7dashboard\\u4F18\\u5316",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"\\u9879\\u76EE\\u52A0\\u7EDF\\u8BA1icon",transform:"translate(-904.000000, -443.000000)",fill:"#000000",fillRule:"nonzero"},s.createElement("g",{id:"Group-2-Copy-6",transform:"translate(883.000000, 392.000000)"},s.createElement("g",{id:"\\u4E0D\\u7EDF\\u8BA1",transform:"translate(21.000000, 51.000000)"},s.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:16,height:16}),s.createElement("path",{d:"M3,2 L13,2 C13.5522847,2 14,2.44771525 14,3 L14,13 C14,13.5522847 13.5522847,14 13,14 L3,14 C2.44771525,14 2,13.5522847 2,13 L2,3 C2,2.44771525 2.44771525,2 3,2 Z M4,7 L4,12 L6,12 L6,7 L4,7 Z M7,5 L7,12 L9,12 L9,5 L7,5 Z M10,8 L10,12 L12,12 L12,8 L10,8 Z",id:"\\u5F62\\u72B6",fillOpacity:.25})))))))},Wt=s.forwardRef(function(u,d){return s.createElement(Nt,rt({svgRef:d},u))}),fr=n.p+"static/noStatistical.fceec291.svg",ut={CARD:"card"},Ut=function(d){var m=d.data,i=d.index,Z=d.moveCard,y=d.handleProjecIcon,B=d.hanldeProjectDetail,F=(0,t.YB)(),oe=F.formatMessage,V=(0,t.Kd)()==="en-US",p=m.id,E=m.name,te=m.product_version,Q=m.is_default,_e=m.is_show,G=m.description,re=(0,s.useRef)(null),D=(0,Mt.L)({accept:ut.CARD,collect:function(ie){return{handlerId:ie.getHandlerId()}},hover:function(ie,b){var J;if(!!re.current){var ne=ie.index,ae=i;if(ne!==ae){var $=(J=re.current)===null||J===void 0?void 0:J.getBoundingClientRect(),K=($.bottom-$.top)/2,N=b.getClientOffset(),x=N.y-$.top;ne<ae&&x<K||ne>ae&&x>K||(Z(ne,ae),ie.index=ae)}}}}),k=(0,l.Z)(D,2),P=k[0].handlerId,de=k[1],ce=(0,Tt.c)({type:ut.CARD,item:function(){return{id:p,index:i}},collect:function(ie){return{isDragging:ie.isDragging()}}}),ue=(0,l.Z)(ce,2),pe=ue[0].isDragging,A=ue[1],je=pe?0:1;return A(de(re)),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{ref:re,style:{opacity:je},"data-handler-id":P,className:j().project_warpper,children:[(0,e.jsx)("div",{className:Q?j()["project_default_icon".concat(V?"_en":"")]:j().project_icon,onClick:function(){return y(p)}}),(0,e.jsxs)("div",{className:j().project_child,onClick:function(){return B(m)},children:[(0,e.jsxs)(be.Z,{title:E,children:[(0,e.jsx)(Y.Z.Text,{className:j().project_name,children:E}),(0,e.jsx)("div",{style:{height:6}})]}),(0,e.jsxs)(be.Z,{title:te,children:[(0,e.jsxs)(Y.Z.Text,{className:j().project_version,children:[_e?(0,e.jsx)(nt.Z,{placement:"bottomLeft",title:oe({id:"product.counted.on.the.dashboard"}),children:(0,e.jsx)($t,{style:{marginRight:6,verticalAlign:"text-bottom"}})}):(0,e.jsx)(nt.Z,{placement:"bottomLeft",title:oe({id:"product.not.counted.on.the.dashboard"}),children:(0,e.jsx)(Wt,{style:{marginRight:6,verticalAlign:"text-bottom"}})}),te]}),(0,e.jsx)("div",{style:{height:2}})]}),(0,e.jsxs)(be.Z,{title:G,children:[(0,e.jsx)(Y.Z.Text,{className:j().project_version,children:G}),(0,e.jsx)("div",{style:{height:2}})]})]})]})})},Vt=Ut,Kt={display:"flex",gap:10,flexFlow:"wrap",width:"100%"},Yt=function(d){var m=d.dataSource,i=d.clickType,Z=d.callBackFormTo,y=d.hanldCreateProject,B=d.handleProjecIcon,F=d.hanldeProjectDetail,oe=function(E,te){Z(E,te,m)},V=function(E,te){return(0,e.jsx)(Vt,{data:E,index:te,moveCard:oe,handleProjecIcon:B,hanldeProjectDetail:F},E.id)};return(0,e.jsxs)("div",{style:Kt,children:[m.map(function(p,E){return V(p,E)}),i==="menu"&&(0,e.jsx)("div",{className:j().project_create,onClick:y,children:(0,e.jsxs)("div",{className:j().project_create_empty,children:[(0,e.jsx)(at.Z,{style:{marginRight:6}}),(0,e.jsx)(t._H,{id:"product.create.project"})]})})]})},zt=Yt,Qt=n(59556),Gt=n(16357),Jt=function(){var u,d,m=(0,t.YB)(),i=m.formatMessage,Z=(0,Qe.UO)(),y=Z.ws_id,B=(0,Qe.TH)(),F=B.query,oe=(0,s.useState)({}),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)("menu"),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useState)(null),D=(0,l.Z)(re,2),k=D[0],P=D[1],de=(0,s.useRef)(null),ce=(0,s.useRef)(null),ue=(0,s.useRef)(null),pe=a.Z.useForm(),A=(0,l.Z)(pe,1),je=A[0],R=(0,t.QT)(function(H){return(0,z.OV)(H)},{defaultParams:[{ws_id:y}],initialData:{data:[]},formatResult:function(_){return _}}),ie=R.data.data,b=ie===void 0?[]:ie,J=R.refresh,ne=R.loading,ae=R.run,$=(0,t.QT)(function(H){return(0,z.lk)(H)},{initialData:{data:[]},manual:!0,formatResult:function(_){return _}}),K=$.data,N=$.refresh,x=$.loading,g=$.run,se=function(_){return b.findIndex(function(f){var I=f.id;return I===_-0})};(0,s.useEffect)(function(){b.length>0?"id"in p?E(b[se(p.id)]):E(b[F.current?se(F.current):0]):E({})},[b,F]);var xe=function(_){E(_),G("menu"),je.setFieldsValue({server_type:void 0})},S=function(){var _;(_=de.current)===null||_===void 0||_.show("new")},h=function(_,f){_===200?(E({}),c.default.success(i({id:"operation.success"})),J()):(0,Ne.EV)(_,f)},w=function(){var H=(0,fe.Z)((0,C.Z)().mark(function _(f){var I,ye,U;return(0,C.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,(0,z.Ir)({ws_id:y,prd_id:f.id});case 2:I=Oe.sent,ye=I.code,U=I.msg,h(ye,U);case 6:case"end":return Oe.stop()}},_)}));return function(f){return H.apply(this,arguments)}}(),O=function(){var _;(_=de.current)===null||_===void 0||_.show("edit",p)},me=function(_){var f;(f=ce.current)===null||f===void 0||f.show("detail",_)},ve=function(){var H=(0,fe.Z)((0,C.Z)().mark(function _(f){var I;return(0,C.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,z.ty)({project_id:f,is_default:1});case 2:I=U.sent,I.code===200?(N(),J(),c.default.success("\u4FEE\u6539\u9ED8\u8BA4\u9879\u76EE\u6210\u529F")):(0,Ne.EV)(b.code,b.msg);case 4:case"end":return U.stop()}},_)}));return function(f){return H.apply(this,arguments)}}(),W=function(){var _;(_=ue.current)===null||_===void 0||_.show("new",{})},M=function(){var H=(0,fe.Z)((0,C.Z)().mark(function _(f){return(0,C.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:f=="new"?J().then(function(U){E(U.data[0])}):ae({ws_id:y}).then(function(U){U.code===200&&g({product_id:p.id,ws_id:y})});case 1:case"end":return ye.stop()}},_)}));return function(f){return H.apply(this,arguments)}}(),L=function(_){_===""?G("menu"):(G("searchButton"),g({product_id:p.id,name:_,ws_id:y}))};(0,s.useEffect)(function(){p.id&&g({product_id:p.id,ws_id:y})},[p.id]);var ge=function(){var H=(0,fe.Z)((0,C.Z)().mark(function _(f){var I,ye,U;return(0,C.Z)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(f.destination){Oe.next=2;break}return Oe.abrupt("return");case 2:return Oe.next=4,(0,z.Zf)({ws_id:y,start_id:b[f.source.index].id,end_id:b[f.destination.index].id,from:f.source.index+1,to:f.destination.index+1});case 4:I=Oe.sent,ye=I.code,U=I.msg,ye===200?ae({ws_id:y}).then(function(pt){pt.code===200&&g({product_id:p.id,ws_id:y})}):(0,Ne.EV)(ye,U);case 8:case"end":return Oe.stop()}},_)}));return function(f){return H.apply(this,arguments)}}(),Ze=function(){var H=(0,fe.Z)((0,C.Z)().mark(function _(f,I,ye){var U,we,Oe;return(0,C.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,(0,z.c0)({product_id:p.id,ws_id:y,start_id:ye[f].id,end_id:ye[I].id,from:f+1,to:I+1});case 3:U=ke.sent,we=U.code,Oe=U.msg,we===200?g({product_id:p.id,ws_id:y}):(0,Ne.EV)(we,Oe),ke.next=12;break;case 9:ke.prev=9,ke.t0=ke.catch(0),console.log(ke.t0);case 12:case"end":return ke.stop()}},_,null,[[0,9]])}));return function(f,I,ye){return H.apply(this,arguments)}}();return(0,e.jsxs)(De.Z.Content,{children:[(0,e.jsx)(Re.Z,{spinning:ne,children:(0,e.jsxs)(le.Z,{justify:"space-between",children:[(0,e.jsxs)("div",{className:j().product_left,children:[(0,e.jsx)("div",{className:j().create_button_wrapper,children:(0,e.jsx)(Se.Z,{onClick:S,type:"primary",children:(0,e.jsx)(t._H,{id:"product.new.product"})})}),(0,e.jsx)(le.Z,{justify:"space-between",className:j().left_title,children:(0,e.jsxs)(Y.Z.Text,{children:[(0,e.jsx)(t._H,{id:"product.all.product"})," (",(b==null?void 0:b.length)&&"".concat(b==null?void 0:b.length),")"]})}),(0,e.jsx)(it.Z5,{onDragEnd:ge,children:(0,e.jsx)(it.bK,{droppableId:"droppable",children:function(_){return(0,e.jsxs)("div",(0,X.Z)((0,X.Z)({},_.droppableProps),{},{ref:_.innerRef,className:j().all_product,children:[b==null?void 0:b.map(function(f,I){return(0,e.jsx)(it._l,{index:I,draggableId:String(I+1),product:f.id,children:function(U){return(0,s.createElement)(Ce.Z,(0,X.Z)((0,X.Z)((0,X.Z)({span:24,ref:U.innerRef},U.draggableProps),U.dragHandleProps),{},{key:f.id,onClick:function(){return xe(f)},onMouseEnter:function(){return P(f.id)},onMouseLeave:function(){return P(null)}}),(0,e.jsxs)(le.Z,{className:j().product_row,children:[(0,e.jsx)("div",{className:k===f.id?j().move_active:j().move,children:(0,e.jsx)(q.Z,{})}),(0,e.jsx)("div",{className:f.is_default?j().product_item_default:j().product_item_old}),(0,e.jsxs)(le.Z,{justify:"space-between",className:+p.id==+f.id?j().product_item_active:j().product_item,children:[(0,e.jsx)(be.Z,{title:f.name,width:210,children:(0,e.jsx)(Y.Z.Text,{children:f.name})}),f.is_default?(0,e.jsx)(Ae.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"product.default.products.cannot.be.deleted"})}),onConfirm:function(){return w(f)},cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)(r.Z,{style:{color:"red"}}),okButtonProps:{type:"default",disabled:!0},children:(0,e.jsx)(Ve.Z,{className:k===f.id?j().remove_active:j().remove})}):(0,e.jsx)(Ae.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"product.deletion.has.influence"})}),onCancel:function(){return w(f)},cancelText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),okText:(0,e.jsx)(t._H,{id:"operation.cancel"}),icon:(0,e.jsx)(r.Z,{style:{color:"red"}}),children:(0,e.jsx)(Ve.Z,{className:k===f.id?j().remove_active:j().remove})})]})]}))}},f.key||f.name)}),_.placeholder]}))}})})]}),(0,e.jsxs)("div",{className:j().product_right,children:[(0,e.jsxs)(le.Z,{className:j().product_right_detail,align:"middle",children:[(0,e.jsx)(Ce.Z,{span:24,children:(0,e.jsxs)(le.Z,{children:[(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:j().detail_item_row,children:[(0,e.jsxs)(Y.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.name"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:p.name})]})}),(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:j().detail_item_row,children:[(0,e.jsxs)(Y.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.description"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:p.description})]})}),(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:j().detail_item_row,children:[(0,e.jsxs)(Y.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.version.command"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:p.command})]})})]})}),(0,e.jsx)($e.Z,{overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Pe.Z,{children:(0,e.jsx)(Pe.Z.Item,{onClick:O,children:(0,e.jsx)(t._H,{id:"product.edit.info"})})}),children:(0,e.jsx)(Ue.Z,{style:{cursor:"pointer",position:"absolute",right:0,top:5}})})]}),(0,e.jsxs)(le.Z,{className:j().right_project,children:[(0,e.jsxs)(le.Z,{style:{width:"100%",height:62},children:[(0,e.jsxs)(Y.Z.Text,{className:j().product_right_all_project,children:[(0,e.jsx)(t._H,{id:"product.all.items"})," (",((u=K.data)===null||u===void 0?void 0:u.length)&&"".concat((d=K.data)===null||d===void 0?void 0:d.length),")"]}),(0,e.jsx)(a.Z,{form:je,children:(0,e.jsx)(a.Z.Item,{name:"server_type",children:(0,e.jsx)(he.Z.Search,{placeholder:i({id:"product.search.for.items"}),onSearch:L,allowClear:!0,style:{width:200,height:32,marginTop:15}})})})]}),(0,e.jsx)(Re.Z,{spinning:x,children:(0,e.jsx)(Qt.W,{backend:Gt.PD,children:(0,e.jsx)(zt,{dataSource:K.data,clickType:_e,callBackFormTo:Ze,handleProjecIcon:ve,hanldCreateProject:W,hanldeProjectDetail:me})})})]})]})]})}),(0,e.jsx)(_t,{ref:de,current:p,onOk:M}),(0,e.jsx)(Dt,{ref:ce,onOk:N,projectData:K}),(0,e.jsx)(Rt,{ref:ue,current:p,onOk:N})]})},Xt=n(19061),ee=n.n(Xt),qt=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=a.Z.useForm(),y=(0,l.Z)(Z,1),B=y[0],F=(0,s.useState)(!1),oe=(0,l.Z)(F,2),V=oe[0],p=oe[1],E=(0,s.useState)(!1),te=(0,l.Z)(E,2),Q=te[0],_e=te[1],G=(0,s.useState)("new"),re=(0,l.Z)(G,2),D=re[0],k=re[1],P=(0,s.useState)(),de=(0,l.Z)(P,2),ce=de[0],ue=de[1],pe=(0,s.useState)(),A=(0,l.Z)(pe,2),je=A[0],R=A[1],ie=(0,s.useState)(""),b=(0,l.Z)(ie,2),J=b[0],ne=b[1],ae=(0,s.useState)(void 0),$=(0,l.Z)(ae,2),K=$[0],N=$[1],x=(0,s.useState)(!1),g=(0,l.Z)(x,2),se=g[0],xe=g[1],S=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1");(0,s.useImperativeHandle)(d,function(){return{show:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),k(W),xe(!1),_e(!1),ne(void 0),N(void 0),ue(void 0),R(void 0),B.setFieldsValue(M)}}});var h=function(){B.resetFields(),_e(!1),p(!1)},w=function(){var ve=(0,fe.Z)((0,C.Z)().mark(function W(M){var L,ge,Ze,H;return(0,C.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return L=M.target.value,ge=/^.*\.git$/,f.next=4,(0,z.ff)({check_name:"repo",repo:L});case 4:Ze=f.sent,H=Ze.code,H==200?(ne("success"),xe(!0),R(void 0)):ge.test(L)?(_e(!1),ne("error"),R(i({id:"product.please.check.permission"})),xe(!0)):(ne("warning"),R(i({id:"product.please.enter.right.gitUrl"})),xe(!0));case 7:case"end":return f.stop()}},W)}));return function(M){return ve.apply(this,arguments)}}(),O=function(W,M,L){W===200?(u.onOk(L),c.default.success(i({id:"operation.success"})),p(!1),B.resetFields()):W===1371?(ue(i({id:"product.repositories.already.exists"})),N("error"),_e(!1)):(c.default.error(M),_e(!1))},me=function(){_e(!0),B.validateFields().then(function(){var W=(0,fe.Z)((0,C.Z)().mark(function M(L){var ge,Ze,H,_,f,I;return(0,C.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(D!=="new"){U.next=9;break}return U.next=3,(0,z.h4)((0,X.Z)({ws_id:S},L));case 3:ge=U.sent,Ze=ge.code,H=ge.msg,O(Ze,H,D),U.next=15;break;case 9:return U.next=11,(0,z.GW)((0,X.Z)({ws_id:S,repo_id:B.getFieldValue("id")},L));case 11:_=U.sent,f=_.code,I=_.msg,O(f,I,D);case 15:case"end":return U.stop()}},M)}));return function(M){return W.apply(this,arguments)}}()).catch(function(){return _e(!1)})};return(0,e.jsx)(Ge.Z,{maskClosable:!1,keyboard:!1,title:D==="new"?(0,e.jsx)(t._H,{id:"product.new.repositories"}):(0,e.jsx)(t._H,{id:"product.edit.repositories"}),width:380,onClose:h,open:V,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Se.Z,{onClick:h,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Se.Z,{type:"primary",disabled:Q,onClick:me,children:D==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(a.Z,{form:B,layout:"vertical",className:ee().product_form,children:[(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories"}),name:"name",rules:[{required:!0,message:i({id:"product.please.enter.repositories"})}],help:ce,validateStatus:K,children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.repositories"})})}),(0,e.jsx)(a.Z.Item,{label:"GitUrl",name:"git_url",rules:[{required:!0,message:i({id:"product.please.enter.gitUrl"})}],help:je,validateStatus:J,hasFeedback:se,children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.gitUrl"}),onBlur:function(W){return w(W)}})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.repositories.desc"}),name:"description",children:(0,e.jsx)(he.Z.TextArea,{placeholder:i({id:"product.please.enter.desc"}),rows:4})})]})})}),er=(0,s.forwardRef)(function(u,d){var m=(0,t.YB)(),i=m.formatMessage,Z=a.Z.useForm(),y=(0,l.Z)(Z,1),B=y[0],F=(0,s.useState)(!1),oe=(0,l.Z)(F,2),V=oe[0],p=oe[1],E=(0,s.useState)("new"),te=(0,l.Z)(E,2),Q=te[0],_e=te[1],G=(0,s.useState)(),re=(0,l.Z)(G,2),D=re[0],k=re[1],P=(0,s.useState)(!1),de=(0,l.Z)(P,2),ce=de[0],ue=de[1],pe=(0,s.useState)(void 0),A=(0,l.Z)(pe,2),je=A[0],R=A[1],ie=(0,s.useState)(!1),b=(0,l.Z)(ie,2),J=b[0],ne=b[1],ae=(0,s.useState)(!1),$=(0,l.Z)(ae,2),K=$[0],N=$[1],x=(0,s.useState)({}),g=(0,l.Z)(x,2),se=g[0],xe=g[1];(0,s.useImperativeHandle)(d,function(){return{show:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(!0),_e(M),xe(L),N(!1),ne(!1),R(void 0),k(void 0),B.setFieldsValue(L)}}});var S=function(){B.resetFields(),p(!1)},h=function(){var W=(0,fe.Z)((0,C.Z)().mark(function M(L){var ge,Ze,H;return(0,C.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return ge=L.target.value,f.next=3,(0,z.ff)({check_name:"branch",repo:u.current.git_url,branch:ge});case 3:Ze=f.sent,H=Ze.code,H===200?(R("success"),ne(!0),k(void 0)):(N(!1),R("error"),k(i({id:"product.please.check.whether.exists"})),ne(!1)),ge.replace(/(^\s*)|(\s*$)/g,"")===""&&(R("warning"),k(i({id:"please.enter"})),ne(!0));case 7:case"end":return f.stop()}},M)}));return function(L){return W.apply(this,arguments)}}(),w=function(M,L){M===200?(u.onOk(),c.default.success(i({id:"operation.success"})),S()):M===1376?(k(i({id:"product.branch.already.exists"})),N(!1)):(c.default.error(L),N(!1))},O=function(){N(!0),B.validateFields().then(function(){var M=(0,fe.Z)((0,C.Z)().mark(function L(ge){var Ze,H,_,f,I,ye;return(0,C.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(Q!=="new"){we.next=9;break}return we.next=3,(0,z.Qj)((0,X.Z)({repo_id:u.current.id},ge));case 3:Ze=we.sent,H=Ze.code,_=Ze.msg,w(H,_),we.next=15;break;case 9:return we.next=11,(0,z.o_)((0,X.Z)({branch_id:se.id},ge));case 11:f=we.sent,I=f.code,ye=f.msg,w(I,ye);case 15:case"end":return we.stop()}},L)}));return function(L){return M.apply(this,arguments)}}()).catch(function(M){console.log(M),N(!1)})},me=function(){var W=(0,fe.Z)((0,C.Z)().mark(function M(){var L,ge,Ze;return(0,C.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,z.NA)({branch_id:se.id});case 2:L=_.sent,ge=L.code,Ze=L.msg,ve(ge,Ze);case 6:case"end":return _.stop()}},M)}));return function(){return W.apply(this,arguments)}}(),ve=function(M,L){M===200?(c.default.success(i({id:"operation.success"})),u.onOk(),S(),ue(!1)):c.default.error(L)};return(0,e.jsxs)(Ge.Z,{maskClosable:!1,keyboard:!1,title:Q==="new"?(0,e.jsx)(t._H,{id:"product.new.branch"}):(0,e.jsx)(t._H,{id:"product.edit.branch"}),width:"380",onClose:S,visible:V,className:ee().drawer_warpper,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(Se.Z,{onClick:S,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(Se.Z,{type:"primary",disabled:K,onClick:O,children:Q==="new"?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]})}),children:[Q!=="new"&&(0,e.jsx)($e.Z,{placement:"topLeft",overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Pe.Z,{children:(0,e.jsx)(Pe.Z.Item,{onClick:function(){return ue(!0)},children:(0,e.jsx)("i",{className:ee().menu_font_color,children:(0,e.jsx)(t._H,{id:"product.delete.branch"})})})}),children:(0,e.jsx)(Ue.Z,{style:{cursor:"pointer",position:"absolute",right:55,top:21}})}),(0,e.jsxs)("div",{className:ee().content_warpper,children:[(0,e.jsx)(Ee.Z,{style:{display:"revert",marginBottom:5},children:(0,e.jsx)(Y.Z.Text,{style:{color:"#000",opacity:.85,fontSize:14,fontWeight:"bold"},children:(0,e.jsx)(t._H,{id:"product.repositories"})})}),(0,e.jsx)(Ee.Z,{className:ee().title_detail_branch,children:(0,e.jsx)(be.Z,{title:u.current.name,width:320})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5"}}),(0,e.jsx)("div",{className:ee().content_warpper,children:(0,e.jsxs)(a.Z,{form:B,layout:"vertical",className:ee().product_form,children:[(0,e.jsx)(a.Z.Item,{label:"Branch",rules:[{required:!0,message:i({id:"product.please.enter.branch"})}],name:"name",help:D,validateStatus:je,hasFeedback:J,children:(0,e.jsx)(he.Z,{autoComplete:"auto",placeholder:i({id:"product.please.enter.branch"}),onBlur:function(M){return h(M)}})}),(0,e.jsx)(a.Z.Item,{label:(0,e.jsx)(t._H,{id:"product.branch.desc"}),name:"description",children:(0,e.jsx)(he.Z.TextArea,{placeholder:i({id:"product.please.enter.desc"}),rows:4})})]})}),(0,e.jsx)(Je.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:ee().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),open:ce,onOk:function(){return me()},onCancel:function(){return ue(!1)},width:390,maskClosable:!1,children:(0,e.jsx)("p",{children:i({id:"product.are.you.sure.you.delete.branch"},{data:se.name})})})]})}),tr=function(u){var d,m,i,Z=(0,t.YB)(),y=Z.formatMessage,B=window.location.pathname.replace(/\/ws\/([a-zA-Z0-9]{8})\/.*/,"$1"),F={ws_id:B},oe=(0,s.useState)({}),V=(0,l.Z)(oe,2),p=V[0],E=V[1],te=(0,s.useState)(null),Q=(0,l.Z)(te,2),_e=Q[0],G=Q[1],re=(0,s.useRef)(null),D=(0,s.useRef)(null),k=(0,t.QT)(function(x){return(0,z._L)(x)},{defaultParams:[F],initialData:{data:[]},formatResult:function(g){return g}}),P=k.data.data,de=k.refresh,ce=k.run,ue=k.loading,pe=(0,t.QT)(function(x){return(0,z.vS)(x)},{initialData:{data:[]},formatResult:function(g){return g},manual:!0}),A=pe.data,je=pe.refresh,R=pe.run,ie=function(g){E(g)};(0,s.useEffect)(function(){if(P.length>0)if("id"in p){var x=P.findIndex(function(g){var se=g.id;return se===p.id});E(P[x])}else E(P[0]);else E({})},[P]);var b=function(){var x=(0,fe.Z)((0,C.Z)().mark(function g(se){return(0,C.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:se==="new"?de().then(function(h){E(h.data[0])}):ce({ws_id:B}).then(function(h){h.code===200&&R({repo_id:p.id,ws_id:B})});case 1:case"end":return S.stop()}},g)}));return function(se){return x.apply(this,arguments)}}(),J=function(){var g;(g=re.current)===null||g===void 0||g.show("new")},ne=function(g,se){g===200?(E({}),c.default.success(y({id:"operation.success"})),de()):(0,Ne.EV)(g,se)},ae=function(){var x=(0,fe.Z)((0,C.Z)().mark(function g(se){var xe,S,h;return(0,C.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,z.cQ)({repo_id:se.id});case 2:xe=O.sent,S=xe.code,h=xe.msg,ne(S,h);case 6:case"end":return O.stop()}},g)}));return function(se){return x.apply(this,arguments)}}(),$=function(){var g;(g=re.current)===null||g===void 0||g.show("edit",p)},K=function(g){var se;(se=D.current)===null||se===void 0||se.show("edit",g)},N=function(){var g;(g=D.current)===null||g===void 0||g.show("new",{})};return(0,s.useEffect)(function(){p.id!==void 0&&R({repo_id:p.id})},[p.id]),(0,e.jsxs)(De.Z.Content,{children:[(0,e.jsx)(Re.Z,{spinning:ue,children:(0,e.jsxs)(le.Z,{justify:"space-between",children:[(0,e.jsxs)("div",{className:ee().product_left,children:[(0,e.jsx)("div",{className:ee().create_button_wrapper,children:(0,e.jsx)(Se.Z,{type:"primary",onClick:J,children:(0,e.jsx)(t._H,{id:"product.new.repositories"})})}),(0,e.jsx)(le.Z,{justify:"space-between",className:ee().left_title,children:(0,e.jsxs)(Y.Z.Text,{children:[(0,e.jsx)(t._H,{id:"product.repositories"})," (",(P==null?void 0:P.length)&&"".concat(P==null?void 0:P.length),")"]})}),(0,e.jsx)(le.Z,{className:ee().all_product,children:P==null?void 0:P.map(function(x){return(0,e.jsx)(Ce.Z,{span:24,className:+p.id==+x.id?ee().product_item_active:ee().product_item,onClick:function(){return ie(x)},onMouseEnter:function(){return G(x.id)},onMouseLeave:function(){return G(null)},children:(0,e.jsxs)(le.Z,{justify:"space-between",children:[(0,e.jsx)(be.Z,{title:x.name,width:210,children:(0,e.jsx)(Y.Z.Text,{children:x.name})}),(0,e.jsx)(Ae.Z,{title:(0,e.jsx)(t._H,{id:"product.delete.this.repositories"}),onConfirm:function(){return ae(x)},okText:(0,e.jsx)(t._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),children:(0,e.jsx)(Ve.Z,{className:_e===x.id?ee().remove_active:ee().remove})})]})},x.id)})})]}),(0,e.jsxs)("div",{className:ee().product_right,children:[(0,e.jsxs)(le.Z,{className:ee().product_right_detail,align:"middle",children:[(0,e.jsx)(Ce.Z,{span:24,children:(0,e.jsxs)(le.Z,{children:[(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:ee().detail_item_row,children:[(0,e.jsxs)(Y.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.repositories"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:p.name})]})}),(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:ee().detail_item_row,children:[(0,e.jsx)(Y.Z.Text,{strong:!0,children:"GitUrl\uFF1A"}),(0,e.jsx)(be.Z,{title:p.git_url})]})}),(0,e.jsx)(Ce.Z,{span:8,children:(0,e.jsxs)(le.Z,{className:ee().detail_item_row,children:[(0,e.jsxs)(Y.Z.Text,{strong:!0,children:[(0,e.jsx)(t._H,{id:"product.repositories.desc"}),"\uFF1A"]}),(0,e.jsx)(be.Z,{title:p.description})]})})]})}),P.length?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)($e.Z,{overlayStyle:{cursor:"pointer"},overlay:(0,e.jsx)(Pe.Z,{children:(0,e.jsx)(Pe.Z.Item,{onClick:$,children:(0,e.jsx)(t._H,{id:"product.edit.info"})})}),children:(0,e.jsx)(Ue.Z,{style:{cursor:"pointer",position:"absolute",right:0,top:5}})})}):null]}),(0,e.jsxs)(le.Z,{className:ee().right_branch_context,children:[(0,e.jsx)(le.Z,{style:{width:"100%",height:62},children:(0,e.jsxs)(Y.Z.Text,{className:ee().product_right_all_branch,children:[(0,e.jsx)(t._H,{id:"product.all.branch"})," (",((d=A.data)===null||d===void 0?void 0:d.length)&&"".concat((m=A.data)===null||m===void 0?void 0:m.length),")"]})}),(0,e.jsx)(le.Z,{className:ee().right_branch_context_wrapper,children:(0,e.jsxs)("div",{className:ee().right_branch_context_box_father,children:[(i=A.data)===null||i===void 0?void 0:i.map(function(x){return(0,e.jsx)("div",{style:{width:"22%"},children:(0,e.jsxs)("div",{className:ee().right_branch_context_box_child,onClick:function(){return K(x)},children:[(0,e.jsxs)(be.Z,{title:x.name,children:[(0,e.jsx)(Y.Z.Text,{className:ee().right_branch_context_box_child_firstLine,children:x.name}),(0,e.jsx)("div",{style:{height:6}})]}),(0,e.jsxs)(be.Z,{title:x.description,children:[(0,e.jsx)(Y.Z.Text,{className:ee().right_branch_context_box_child_secondLine,children:x.description}),(0,e.jsx)("div",{style:{height:6}})]})]})},x.id)}),P.length?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:ee().right_branch_context_box_child,children:(0,e.jsx)("div",{className:ee().right_branch_context_box_child_empty,children:(0,e.jsxs)("span",{onClick:N,children:[(0,e.jsx)(at.Z,{}),(0,e.jsx)("i",{children:(0,e.jsx)(t._H,{id:"product.new.branch"})})]})})})}):null]})})]})]})]})}),(0,e.jsx)(qt,{ref:re,onOk:b}),(0,e.jsx)(er,{ref:D,current:p,onOk:je})]})},rr=n(12280),nr=n.n(rr),ar=n(75073),sr=function(u){var d=u.match.params.ws_id,m=u.location,i=(0,s.useState)(m.query.t||"product"),Z=(0,l.Z)(i,2),y=Z[0],B=Z[1],F=function(V){B(V),t.m8.push("/ws/".concat(d,"/product?t=").concat(V))};return(0,e.jsx)(ar.mQ,{title:(0,e.jsxs)(T.Z,{activeKey:y,onChange:F,className:nr().tab_style,children:[(0,e.jsx)(T.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"product.manage"})},"product"),(0,e.jsx)(T.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"code.manage"})},"code")]}),children:y==="product"?(0,e.jsx)(Jt,{}):(0,e.jsx)(tr,{ws_id:d})})}},20662:function(Me,Te,n){"use strict";n.d(Te,{VX:function(){return s},Ir:function(){return t},ry:function(){return Fe},nM:function(){return De},Zf:function(){return Be},OV:function(){return Re},c0:function(){return He},lk:function(){return he},$L:function(){return Ie},YK:function(){return $e},ty:function(){return Ye},th:function(){return Pe},_L:function(){return X},E7:function(){return We},h4:function(){return Ce},GW:function(){return Xe},cQ:function(){return Ae},fW:function(){return ze},xN:function(){return le},h5:function(){return qe},yE:function(){return Y},vS:function(){return Le},Qj:function(){return Se},o_:function(){return C},NA:function(){return fe},ff:function(){return et}});var v=n(35832),T=n(32326),l=n(22812),s=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),t=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/",{method:"delete",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Fe=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),De=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Be=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/drag/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Re=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/product/drag/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),He=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/drag/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),he=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/drag/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Ie=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),$e=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Ye=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Pe=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/project/",{method:"delete",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),X=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/repository/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),We=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/repository/project/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Ce=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/repository/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Xe=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/repository/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Ae=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/repository/",{method:"delete",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),ze=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/relation/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),le=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/relation/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),qe=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/relation/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Y=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/relation/",{method:"delete",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Le=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/",{params:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),Se=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),C=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/",{method:"put",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),fe=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/branch/",{method:"delete",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}(),et=function(){var c=(0,T.Z)((0,v.Z)().mark(function o(a){return(0,v.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.WY)("/api/sys/check/gitlab/",{method:"post",data:a}));case 1:case"end":return r.stop()}},o)}));return function(a){return c.apply(this,arguments)}}()}}]);
