(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3503],{66503:function(Ue){Ue.exports={table_question_tooltip:"table_question_tooltip___2k4VQ"}},91014:function(Ue){Ue.exports={filter:"filter___1AVbu",confirm:"confirm___2X7ZG",domain:"domain___3UWFB"}},19137:function(Ue){Ue.exports={filter:"filter___1IKYx",confirm:"confirm___3RbBO",domain:"domain___1-UgM"}},2111:function(Ue){Ue.exports={suiteTable:"suiteTable___2-p1T",caseTableCls:"caseTableCls___3tt7c",warp:"warp___Lt1_m",batch:"batch___1YjOQ",pagination:"pagination___3PulQ",hidden:"hidden___z5Xys",filter:"filter___2euN7",confirm:"confirm___2mS0-",domain:"domain___2TGdA",edit:"edit___3n0dF",caseTabCls:"caseTabCls___mxoaj",fail_detail_operation:"fail_detail_operation___RxOy2",synchronous:"synchronous___2jXy5",synchronousTime:"synchronousTime___1THPY",modalChange:"modalChange___2t9Zt",cer_tips:"cer_tips___2rRBh",tab_hide_icon:"tab_hide_icon___Jl3CR"}},9173:function(Ue){Ue.exports={addBusiness_drawer:"addBusiness_drawer___1IfNE",server_provider:"server_provider___2V1nE"}},41342:function(Ue){Ue.exports={addConf_drawer:"addConf_drawer___36ETp",server_provider:"server_provider___OCsxL",variableLabel:"variableLabel___1eKJk",Bulk_btn:"Bulk_btn___3dMcP",flexStart:"flexStart___9WXHv",CI_Config_Extra:"CI_Config_Extra___29-5R",ciTypeElement:"ciTypeElement___3BFv5"}},40689:function(Ue){Ue.exports={confList_root:"confList_root___61KFr",deleteAll:"deleteAll___1Dwt5"}},76766:function(Ue){Ue.exports={addConf_drawer:"addConf_drawer___3dU-q",server_provider:"server_provider___3JVSB"}},89279:function(Ue){Ue.exports={suitList_root:"suitList_root___374pA",deleteAll:"deleteAll___B_DuG"}},31122:function(Ue){Ue.exports={business_root:"business_root___IbDzi",businessList:"businessList___2_Sba",deleteAll:"deleteAll___1482L"}},58538:function(Ue){Ue.exports={modalChange:"modalChange___1oHid"}},86811:function(Ue){Ue.exports={warp:"warp___2ZF85",FuncOrPerfConfList_root:"FuncOrPerfConfList_root___YULdo",batch:"batch___19QVf",pagination:"pagination___RoEs7",hidden:"hidden___33mES",filter:"filter____TjRh",confirm:"confirm___2zL5r",domain:"domain___2GpXP",edit:"edit___24iLc",center:"center___2L-P0",fail_detail_operation:"fail_detail_operation___11_i1",synchronous:"synchronous___3Cznp",synchronousTime:"synchronousTime___3EO_W",modalChange:"modalChange___W4bBS",cer_tips:"cer_tips___2GLUt",tab_hide_icon:"tab_hide_icon___3ZICZ"}},42382:function(Ue){Ue.exports={add_baseline_drawer:"add_baseline_drawer___-6P4f",server_provider:"server_provider___3VG8G"}},58496:function(Ue){Ue.exports={warp:"warp___2bW2h",batch:"batch___adrgq",pagination:"pagination___1RATm",hidden:"hidden___21j8X",filter:"filter___2N0s5",confirm:"confirm___22Qfr",domain:"domain___2FJjs",edit:"edit___1YVXH",center:"center___3neC4",fail_detail_operation:"fail_detail_operation___2JXjR",synchronous:"synchronous___3BWZC",synchronousTime:"synchronousTime___3CAwj",modalChange:"modalChange___2aniH",cer_tips:"cer_tips___1aH_F",tab_hide_icon:"tab_hide_icon___3pZw5"}},72415:function(){},57286:function(Ue,St,a){"use strict";a.d(St,{Z:function(){return vt}});var ct=a(64510),V=a(87445),mt=a(67448),ft=a(47548),o=a(65790),n=a(17187),ut=a(69230),t=a(33821),ot=a(35832),kt=a(32326),at=a(22374),ht=a(22812),lt=a(24812);function Ct(Ye){return(0,ht.WY)("/api/auth/user/",{params:Ye})}var $e=a(52454),jt=function(){var st=(0,ht.YB)(),et=st.formatMessage,ze=(0,lt.UO)(),nt=ze.ws_id,Ft=(0,ht.QT)(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Ct({keyword:c,scope:"aligroup",ws_id:nt,page_num:1,page_size:500})},{debounceInterval:300}),Ke=Ft.data,Bt=Ft.loading,Ot=Ft.run,Kt=function(){var c=(0,kt.Z)((0,ot.Z)().mark(function wt(){var L,A=arguments;return(0,ot.Z)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:L=A.length>0&&A[0]!==void 0?A[0]:"",Ot(L);case 2:case"end":return tt.stop()}},wt)}));return function(){return c.apply(this,arguments)}}();return Ke?(0,$e.jsx)(n.Z.Item,{name:"emp_id",label:"Owner",rules:[{required:!0,message:et({id:"please.select"})}],children:(0,$e.jsx)(t.Z,{allowClear:!0,notFoundContent:Bt?(0,$e.jsx)(ft.Z,{size:"small"}):(0,$e.jsx)(V.Z,{image:V.Z.PRESENTED_IMAGE_SIMPLE}),placeholder:et({id:"select.owner"}),filterOption:!1,onSearch:Kt,style:{width:"100%"},showArrow:!0,showSearch:!0,listHeight:160,getPopupContainer:function(wt){return wt.parentNode},children:Ke==null?void 0:Ke.map(function(c,wt){return(0,$e.jsxs)(t.Z.Option,{value:c.emp_id,children:[c.last_name,"(",c.first_name===""?c.last_name:c.first_name,")",!1]},wt)})})}):(0,$e.jsx)(n.Z.Item,{label:"Owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,$e.jsx)(t.Z,{placeholder:"\u8BF7\u9009\u62E9Owner"})})},vt=jt},80873:function(Ue,St,a){"use strict";a.d(St,{f:function(){return lt}});var ct=a(57359),V=a(34423),mt=a(20418),ft=a(79625),o=a(96584),n=a(488),ut=a(22374),t=a(66503),ot=a.n(t),kt=a(74066),at=a(52454),ht=["desc","title"],lt=function($e){var jt=$e.desc,vt=$e.title,Ye=(0,n.Z)($e,ht);return(0,at.jsxs)(V.Z,{children:[(0,at.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:vt}),(0,at.jsx)(o.Z,(0,mt.Z)((0,mt.Z)({overlayClassName:ot().table_question_tooltip,placement:"bottomLeft",arrowPointAtCenter:!0},Ye),{},{title:jt,color:"#fff",children:(0,at.jsx)(kt.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})}))]})}},15122:function(Ue,St,a){"use strict";var ct=a(46721),V=a(94867),mt=a(8281),ft=a(58591),o=a(57359),n=a(34423),ut=a(88966),t=a(11048),ot=a(39190),kt=a(22374),at=a(19137),ht=a.n(at),lt=a(39935),Ct=a(22812),$e=a(52454),jt=function(Ye){var st=Ye.list,et=Ye.confirm,ze=Ye.onConfirm,nt=Ye.roleType,Ft=(0,Ct.YB)(),Ke=Ft.formatMessage,Bt=(0,kt.useState)(),Ot=(0,ot.Z)(Bt,2),Kt=Ot[0],c=Ot[1],wt=function(A){c(A.target.value)};return(0,$e.jsxs)("div",{className:ht().filter,children:[(0,$e.jsx)(t.ZP.Group,{onChange:wt,value:Kt,children:(0,$e.jsx)(n.Z,{direction:"vertical",children:st.map(function(L){return(0,$e.jsx)(t.ZP,{className:ht().domain,value:L.id,children:nt==="role"?(0,lt.u)(L.name,Ke):L.name},L.id)})})}),(0,$e.jsx)(ft.Z,{style:{margin:"10px 0"}}),(0,$e.jsxs)("div",{className:ht().confirm,children:[(0,$e.jsx)(V.Z,{size:"small",type:"link",style:{border:"none"},onClick:function(){et==null||et(),ze(Kt)},children:(0,$e.jsx)(Ct._H,{id:"operation.ok"})}),(0,$e.jsx)(V.Z,{size:"small",type:"text",onClick:function(){et==null||et(),c(void 0),ze(void 0)},children:(0,$e.jsx)(Ct._H,{id:"operation.reset"})})]})]})};St.Z=jt},94376:function(Ue,St,a){"use strict";var ct=a(79625),V=a(96584),mt=a(20418),ft=a(64974),o=a(39190),n=a(488),ut=a(22374),t=a(52454),ot=["list","style"],kt=function(ht){var lt=ht.list,Ct=ht.style,$e=(0,n.Z)(ht,ot),jt=ut.useRef(null),vt=ut.useRef(null),Ye=ut.useState(void 0),st=(0,o.Z)(Ye,2),et=st[0],ze=st[1],nt=ut.useCallback(function(L,A){return L.filter(function(l,tt){return tt<=A}).reduce(function(l,tt){return l+=tt.boundingClientRect.width},0)},[]),Ft=ut.useCallback(function(L){var A=L.reduce(function(l,tt,Ht){var It=tt.rootBounds,Rt=tt.target,bt=It==null?void 0:It.width;if(bt){var ge=nt(L,Ht),Vt=parseInt(getComputedStyle(Rt)["padding-right"])||0,Gt=ge+Vt;if(bt-Gt>0&&Ht===L.length||Gt<bt-32)return l+=1}return l},0);ze(A)},[]),Ke=ut.useState(),Bt=(0,o.Z)(Ke,2),Ot=Bt[0],Kt=Bt[1];ut.useEffect(function(){if(!!vt.current){var L=vt.current.offsetParent;if(!!L){var A=new ResizeObserver(function(l){var tt=(0,ft.Z)(l),Ht;try{for(tt.s();!(Ht=tt.n()).done;){var It=Ht.value;if(It.contentRect){var Rt=It.contentRect.width;Kt(Rt)}}}catch(bt){tt.e(bt)}finally{tt.f()}});return A.observe(L),function(){A.unobserve(L)}}}},[]),ut.useEffect(function(){var L=new IntersectionObserver(Ft,{root:jt.current});if(jt.current){var A=jt.current.childNodes;A.forEach(function(l){return L.observe(l)})}return function(){L.disconnect(),ze(void 0)}},[lt,Ot]);var c=ut.useCallback(function(L){return L.map(function(A,l){return(0,t.jsx)(ut.Fragment,{children:A},l)})},[]),wt=typeof et=="number";return!lt||lt.length===0?(0,t.jsx)(t.Fragment,{children:"-"}):(0,t.jsxs)("div",(0,mt.Z)((0,mt.Z)({ref:vt,style:(0,mt.Z)({position:"relative",userSelect:"none"},Ct)},$e),{},{children:[(0,t.jsx)("div",{style:{width:"100%",height:22,overflow:"hidden",opacity:0},ref:jt,children:c(lt)}),(0,t.jsx)("div",{style:{width:"100%",position:"absolute",left:0,right:0,top:0},children:wt&&(0,t.jsxs)(t.Fragment,{children:[c(lt.filter(function(L,A){return A<et})),et-lt.length!=0&&(0,t.jsx)(V.Z,{color:"#fff",title:c(lt.filter(function(L,A){return A>=et})),children:(0,t.jsxs)("span",{style:{color:"#8c92a4"},children:["+",lt.length-et]})})]})})]}))};St.Z=kt},24874:function(Ue,St,a){"use strict";a.r(St),a.d(St,{default:function(){return oa}});var ct=a(46721),V=a(94867),mt=a(54905),ft=a(90087),o=a(20418),n=a(22374),ut=a(75073),t=a(22812),ot=a(24812),kt=a(88018),at=a(58414),ht=a(67448),lt=a(47548),Ct=a(14320),$e=a(53479),jt=a(36142),vt=a(76837),Ye=a(11407),st=a(41604),et=a(53374),ze=a(31650),nt=a(25100),Ft=a(57359),Ke=a(34423),Bt=a(79625),Ot=a(96584),Kt=a(51937),c=a(35832),wt=a(81138),L=a(96146),A=a(32326),l=a(39190),tt=a(31784),Ht=a(74066),It=a(93329),Rt=a(48766),bt=a(81343),ge=a(53933),Vt=a(7597),Gt=a(44851),hn=a.n(Gt),Jn=a(9620),Qn=a(2111),Zt=a.n(Qn),ca=a(20632),Jt=a(71853),fa=a(67515),_t=a(41083),$t=a(82078),gt=a(46601),pa=a(88966),rt=a(11048),e=a(52454),Xn=function(D){var p=D.onOk,u=D.isBatch,r=(0,n.useState)(!1),f=(0,l.Z)(r,2),m=f[0],Z=f[1],re=(0,n.useState)(0),S=(0,l.Z)(re,2),B=S[0],ee=S[1],T=function(z){ee(0),Z(z)},$=function(){p(B),Z(!1)},F=function(){Z(!0)},le=function(z){var Q=z.target;return ee(Q.value)};return(0,e.jsxs)(e.Fragment,{children:[u?(0,e.jsx)(V.Z,{onClick:F,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}):(0,e.jsx)(V.Z,{style:{padding:0},size:"small",type:"link",onClick:F,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:Zt().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),open:m,onOk:$,onCancel:function(){return T(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)($e.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(rt.ZP.Group,{value:B,onChange:le,children:[(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},vn=Xn,ma=a(39693),Lt=a(1518),ha=a(69230),Je=a(33821),va=a(38519),Et=a(16416),ga=a(8281),gn=a(58591),xa=a(20693),Ne=a(3278),ja=a(65790),W=a(17187),qn=(0,n.forwardRef)(function(I,D){var p=I.onOk,u=I.parentId,r=I.componentType,f=(0,t.YB)(),m=f.formatMessage,Z=(0,n.useState)(""),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)(!1),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=W.Z.useForm(),J=(0,l.Z)(le,1),z=J[0],Q=(0,n.useState)(""),ce=(0,l.Z)(Q,2),oe=ce[0],C=ce[1],U=(0,n.useState)(!1),je=(0,l.Z)(U,2),_e=je[0],Te=je[1],K=n.useState(!1),fe=(0,l.Z)(K,2),Fe=fe[0],te=fe[1],k=n.useState(!1),j=(0,l.Z)(k,2),ae=j[0],ue=j[1],se=n.useState([]),xe=(0,l.Z)(se,2),be=xe[0],Be=xe[1],Me=function(){var me=(0,A.Z)((0,c.Z)().mark(function b(ne){var G,g,_;return(0,c.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,ge.Q9)(ne);case 2:if(G=v.sent,g=G.data,_=G.code,_===200){v.next=7;break}return v.abrupt("return",Be([]));case 7:Be(g);case 8:case"end":return v.stop()}},b)}));return function(ne){return me.apply(this,arguments)}}(),Ze=function(){F(!1),C(""),z.resetFields(),te(!1),ue(!1)};(0,n.useImperativeHandle)(D,function(){return{show:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=r==="suite"?{suite_id:u}:{case_id:u};Me(G),B(b),F(!0),JSON.stringify(ne)!=="{}"&&z.setFieldsValue((0,o.Z)((0,o.Z)({},ne),{},{direction:ne.direction==="\u4E0A\u5347"?"increase":"decline"}))},hide:Ze}});var He=function(){z.validateFields().then(function(b){p(b)}).catch(function(b){return console.log(b)})},pe=function(b){b&&C(b)},Oe=function(){Te(!0);var b=z.getFieldValue("name")||[];te((b==null?void 0:b.length)===be.length),ue(!!(b!=null&&b.length)&&(b==null?void 0:b.length)<be.length)},we=function(){if(oe){var b=z.getFieldValue("name")||[];if(_e)z.setFieldsValue({n:b});else{var ne=Array.from(new Set(b.concat(oe.split(","))));z.setFieldsValue({name:ne})}oe&&!be.map(function(G){var g=G.name;return g}).includes(oe)&&Be(function(G){return G.concat({name:oe})}),C(""),Te(!1)}},Ie=function(){C(""),z.setFieldsValue({name:""})},Se=function(b){var ne=b.target,G=ne.checked?be.map(function(g){return g.name}):[];z.setFieldsValue({name:G}),ue(!1),te(ne.checked)},Re=function(b){te(b.length===be.length),ue(!!b.length&&b.length<be.length)};return(0,e.jsx)(at.Z,{maskClosable:!1,keyboard:!1,className:Zt().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(S)}),width:480,onClose:Ze,open:$,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(V.Z,{onClick:Ze,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{onClick:He,type:"primary",htmlType:"submit",children:S.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(W.Z,{layout:"vertical",form:z,initialValues:{direction:"increase"},children:[~S.indexOf("edit")?(0,e.jsx)(W.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:m({id:"please.enter"})})}):(0,e.jsx)(W.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:m({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{mode:"multiple",allowClear:!0,onSearch:pe,onSelect:Oe,onBlur:we,onClear:Ie,onChange:Re,listHeight:150,dropdownRender:function(b){return(0,e.jsxs)(e.Fragment,{children:[b,(0,e.jsx)(gn.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{padding:"0 8px"},children:(0,e.jsx)(Et.Z,{checked:Fe,indeterminate:ae,onChange:Se,children:"\u5168\u9009"})})]})},children:be.map(function(me){return(0,e.jsxs)(Je.Z.Option,{value:me.name,children:[me.name,me.unit?"\uFF08".concat(me.unit,"\uFF09"):null]},me.name)})})}),(0,e.jsx)(W.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Lt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:m({id:"please.enter"})})}),(0,e.jsx)(W.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Lt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:m({id:"please.enter"})})}),(0,e.jsx)(W.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:m({id:"please.select"})}],children:(0,e.jsxs)(Je.Z,{placeholder:m({id:"please.select"}),children:[(0,e.jsx)(Je.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(Je.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),dt=a(39935),Yt=(0,n.createContext)(null),xn=(0,n.createContext)(null),er=function(D){var p=D.id,u=D.innerKey,r=D.componentType,f=(0,t.YB)(),m=f.formatMessage,Z=n.useContext(Yt),re=Z.setMetricDelInfo,S=Z.metricDelInfo,B=Z.selectedRowKeys,ee=(0,n.useState)(1),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)(10),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)([]),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useState)(!0),_e=(0,l.Z)(je,2),Te=_e[0],K=_e[1],fe=(0,n.useState)(),Fe=(0,l.Z)(fe,2),te=Fe[0],k=Fe[1],j=(0,n.useState)(),ae=(0,l.Z)(j,2),ue=ae[0],se=ae[1],xe=(0,n.useRef)(null),be=(0,t.QT)(ge.ge,{initialData:[]}),Be=be.data,Me=function(){var G=(0,A.Z)((0,c.Z)().mark(function g(_){var X,v;return(0,c.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return U({data:[]}),K(!0),X={page_num:$,page_size:z},X[_]=p,i.next=6,(0,ge.b2)(X);case 6:v=i.sent,U(v),K(!1);case 9:case"end":return i.stop()}},g)}));return function(_){return G.apply(this,arguments)}}();(0,n.useEffect)(function(){Me(u==="1"?"case_id":"suite_id")},[$,z,ue]);var Ze=function(g){Be.forEach(function(_){_.name==g.domain&&(g.domain=_.id)}),k(g.id),xe.current.show("edit",g)},He=function(){var G=(0,A.Z)((0,c.Z)().mark(function g(_){var X,v,h;return(0,c.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!te){s.next=6;break}return s.next=3,(0,ge.Of)(te,_);case 3:s.t0=s.sent,s.next=9;break;case 6:return s.next=8,(0,ge.WM)(_);case 8:s.t0=s.sent;case 9:X=s.t0,v=X.code,h=X.msg,v===200?(xe.current.hide(),se(new Date().getTime())):(0,dt.EV)(v,h);case 13:case"end":return s.stop()}},g)}));return function(_){return G.apply(this,arguments)}}(),pe=function(){var G=(0,A.Z)((0,c.Z)().mark(function g(_,X){var v,h,i,s,d;return(0,c.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(v=_.object_type,h=_.name,u!=="1"){w.next=7;break}return w.next=4,(0,ge.G6)(_.id);case 4:w.t0=w.sent,w.next=10;break;case 7:return w.next=9,(0,ge.G6)(_.id,{is_sync:X,object_id:p,object_type:v,name:h});case 9:w.t0=w.sent;case 10:i=w.t0,s=i.code,d=i.msg,s===200?(console.log("ok"),L.default.success(m({id:"operation.success"})),se(new Date().getTime())):(0,dt.EV)(s,d);case 14:case"end":return w.stop()}},g)}));return function(_,X){return G.apply(this,arguments)}}(),Oe=function(){k(void 0),xe.current.show("new")},we=function(g){var _=m({id:"TestSuite.is_synchronize.all.conf"}),X=m({id:"operation.yes"}),v=m({id:"operation.no"});_t.Z.confirm({title:_,icon:(0,e.jsx)(gt.Z,{}),okText:X,cancelText:v,maskClosable:!1,onOk:function(){He((0,o.Z)((0,o.Z)({},g),{},{is_sync:1}))},onCancel:function(){He((0,o.Z)((0,o.Z)({},g),{},{is_sync:0}))}})},Ie=function(){var G=(0,A.Z)((0,c.Z)().mark(function g(_){var X;return(0,c.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:X=(0,o.Z)((0,o.Z)({},_),{object_id:p,object_type:u==="1"?"case":"suite"}),u==="1"?He(X):we(X);case 2:case"end":return h.stop()}},g)}));return function(_){return G.apply(this,arguments)}}(),Se=function(g){var _=g.row;return u==="1"?(0,e.jsx)(Jt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return pe(_)},overlayStyle:{width:"224px"},children:(0,e.jsx)(V.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(vn,{onOk:function(v){return pe(_,v)}})},Re=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(g){return g&&Number(g).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(g){return g&&Number(g).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)($e.Z,{style:{width:"100%"},justify:"space-between",children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",size:"small",onClick:function(){return Oe()},children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:107,fixed:"right",render:function(g,_){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(nt.Z.Link,{onClick:function(){return Ze(_)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Se,{row:_})]})}}],me=function(g,_){F(g),Q(_)},b=function(g){re({innerKey:u,object_id:p,selectedRowKeys:g,refresh:function(){return Me(u==="1"?"case_id":"suite_id")}})},ne={selectedRowKeys:S==null?void 0:S.selectedRowKeys,getCheckboxProps:function(){return{disabled:!!(B!=null&&B.length)}},onChange:b};return(0,e.jsxs)("div",{className:Zt().warp,children:[(0,e.jsx)($t.Z,{columns:Re,scroll:{x:670},rowKey:"id",name:"sys-suite-manage-basic-metric",loading:Te,dataSource:C.data,rowSelection:ne,page:C.page_num,totalPage:C.total_page,total:C.total,pageSize:C.page_size,handlePage:me}),(0,e.jsx)(qn,{onOk:Ie,ref:xe,parentId:p,componentType:r})]},p)},jn=er,an=(0,n.forwardRef)(function(I,D){var p=I.onOk,u=(0,n.useState)(""),r=(0,l.Z)(u,2),f=r[0],m=r[1],Z=(0,n.useState)(!1),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)({}),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useCallback)(function(){m(""),B(!1),F({})},[]);(0,n.useImperativeHandle)(D,function(){return{show:function(ce){B(!0),m(ce.doc),F(ce)},hide:le}});var J=function(){p((0,o.Z)((0,o.Z)({},$),{},{doc:f}))},z=(0,n.useCallback)(function(Q){var ce=Q.target;return m(ce.value)},[]);return(0,e.jsx)(at.Z,{maskClosable:!1,keyboard:!1,width:376,title:(0,e.jsx)(t._H,{id:"TestSuite.description.details"}),onClose:le,visible:S,footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(V.Z,{onClick:le,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{onClick:J,type:"primary",htmlType:"submit",children:(0,e.jsx)(t._H,{id:"operation.ok"})})]}),children:(0,e.jsx)(Ne.Z.TextArea,{style:{height:"100%"},rows:6,value:f,onChange:z})})}),Pt=a(2656),tr=function(){var D=(0,ot.TH)(),p=D.query,u=p.test_type,r=(0,n.useState)([]),f=(0,l.Z)(r,2),m=f[0],Z=f[1],re=function(){var S=(0,A.Z)((0,c.Z)().mark(function B(){var ee,T;return(0,c.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,ge.ge)({test_type:u});case 2:ee=F.sent,T=ee.data,Z(T||[]);case 5:case"end":return F.stop()}},B)}));return function(){return S.apply(this,arguments)}}();return(0,n.useEffect)(function(){re()},[]),m},Qt=function(){return(0,n.useContext)(xn)},nr=function(D,p){var u=D.onOk,r=n.useState(!1),f=(0,l.Z)(r,2),m=f[0],Z=f[1],re=n.useState(),S=(0,l.Z)(re,2),B=S[0],ee=S[1];n.useImperativeHandle(p,function(){return{show:function(le){le&&ee(le),Z(!0)}}});var T=function(){u==null||u(B),Z(!1)},$=function(){Z(!1)};return(0,e.jsx)(_t.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:m,onCancel:$,footer:[(0,e.jsx)(V.Z,{onClick:T,type:"danger",children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:$,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsx)(nt.Z.Text,{type:"danger",children:(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)(gt.Z,{}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})})},Zn=n.forwardRef(nr),rr=function(D,p){var u=D.onOk,r=D.basePath,f=D.okText,m=D.onCancel,Z=(0,t.YB)(),re=Z.formatMessage,S=n.useState(!1),B=(0,l.Z)(S,2),ee=B[0],T=B[1],$=n.useState(),F=(0,l.Z)($,2),le=F[0],J=F[1];n.useImperativeHandle(p,function(){return{show:function(C){C&&J(C),T(!0)}}});var z=function(){u==null||u(le),T(!1)},Q=function(){T(!1),m==null||m()},ce=function(){var oe=(0,A.Z)((0,c.Z)().mark(function C(){var U,je,_e;return(0,c.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(le){K.next=2;break}return K.abrupt("return");case 2:return U=le.name,je=le.id,K.next=5,(0,dt.MR)({name:U,id:je});case 5:_e=K.sent,_e&&window.open("".concat(r||"/refenerce/suite/","?pk=").concat(_e));case 7:case"end":return K.stop()}},C)}));return function(){return oe.apply(this,arguments)}}();return(0,e.jsx)(_t.Z,{destroyOnClose:!0,title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,open:ee,onCancel:Q,footer:[(0,e.jsx)(V.Z,{onClick:z,type:"danger",children:f||(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:Q,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:600,children:(0,e.jsxs)(Ke.Z,{style:{width:"100%"},direction:"vertical",children:[(0,e.jsx)(nt.Z.Text,{type:"danger",children:(0,e.jsxs)(Ke.Z,{align:"start",children:[(0,e.jsx)(gt.Z,{}),re({id:"TestSuite.suite.delete.warning"},{data:le==null?void 0:le.name})]})}),(0,e.jsx)(nt.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)(nt.Z.Link,{onClick:ce,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})},sn=n.forwardRef(rr),qe=a(6130),ar=(0,n.forwardRef)(function(I,D){var p=I.id,u=(0,t.YB)(),r=u.formatMessage,f=(0,ot.TH)(),m=f.query,Z=Qt(),re=Z.domainList,S=ft.Z.TabPane,B=(0,n.useContext)(Yt),ee=B.setSelectedRowKeys,T=B.setSelectedRow,$=B.selectedRowKeys,F=B.confDrawerShow,le=B.confRefresh,J=B.setConfRefresh,z=B.metricDelInfo,Q=(0,n.useState)("1"),ce=(0,l.Z)(Q,2),oe=ce[0],C=ce[1],U=(0,n.useState)(1),je=(0,l.Z)(U,2),_e=je[0],Te=je[1],K=(0,n.useState)(10),fe=(0,l.Z)(K,2),Fe=fe[0],te=fe[1],k=(0,n.useState)([]),j=(0,l.Z)(k,2),ae=j[0],ue=j[1],se=(0,n.useState)(!0),xe=(0,l.Z)(se,2),be=xe[0],Be=xe[1],Me=(0,n.useState)([]),Ze=(0,l.Z)(Me,2),He=Ze[0],pe=Ze[1],Oe=(0,n.useRef)(null),we=(0,n.useRef)(null),Ie=(0,n.useRef)(null),Se=function(){var i=(0,A.Z)((0,c.Z)().mark(function s(){var d,R;return(0,c.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ue({data:[]}),pe([]),Be(!0),d={suite_id:p,page_num:_e,page_size:Fe},ve.next=6,(0,ge.Sb)(d);case 6:R=ve.sent,ue(R),Be(!1);case 9:case"end":return ve.stop()}},s)}));return function(){return i.apply(this,arguments)}}();(0,n.useImperativeHandle)(D,function(){return{refresh:function(s){var d=s.refreshId;p===d&&Se()}}}),(0,n.useEffect)(function(){Se()},[_e,Fe,le]);var Re=function(s){s.var=s.var?JSON.parse(s.var):[{name:"",val:"",des:""}],s.is_default=s.is_default?1:0;for(var d=s.domain_id_list===""?[]:s.domain_id_list.split(","),R=[],w=0;w<d.length;w++)R.push(Number.parseInt(d[w]));s.domain_list_str=R,re.forEach(function(ve){ve.name==s.domain&&(s.domain=ve.id)}),F("edit",s)},me=function(){var i=(0,A.Z)((0,c.Z)().mark(function s(d){var R,w,ve,Le;return(0,c.Z)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,(0,Pt.Ob)({flag:"pass",case_id_list:d.id});case 2:ve=Ee.sent,Le=ve.code,Le===200?(R=we.current)===null||R===void 0||R.show(d):(w=Ie.current)===null||w===void 0||w.show(d);case 5:case"end":return Ee.stop()}},s)}));return function(d){return i.apply(this,arguments)}}(),b=function(s){C(s),oe!="1"&&J(!le)},ne=function(){var i=(0,A.Z)((0,c.Z)().mark(function s(d){return(0,c.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,ge.tz)(d.id);case 2:L.default.success(r({id:"operation.success"})),J(!le);case 4:case"end":return w.stop()}},s)}));return function(d){return i.apply(this,arguments)}}(),G=function(){F("new",{bentch:!1,test_suite_id:p})},g=+status==0?{selectedRowKeys:$,getCheckboxProps:function(){var s;return{disabled:!!(z!=null&&(s=z.selectedRowKeys)!==null&&s!==void 0&&s.length)}},onChange:function(s,d){T(d),ee(s)}}:void 0,_=function(){var i=(0,A.Z)((0,c.Z)().mark(function s(d){return(0,c.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:pe([d.id]);case 1:case"end":return w.stop()}},s)}));return function(d){return i.apply(this,arguments)}}(),X=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:{showTitle:!1},render:function(s,d){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:d.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(s){return(0,e.jsx)(e.Fragment,{children:s||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",ellipsis:!0,render:function(s){return(0,e.jsx)(e.Fragment,{children:s||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(s,d){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:d.var&&d.var!="[]"?JSON.parse(d.var).map(function(R){return"".concat(R.name,"=").concat(R.val||"-",",").concat(R.des||"-",";")}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),ellipsis:!0,width:100,key:"desc",render:function(s,d){return(0,e.jsx)(Vt.Z,{title:d.doc,width:70,isCode:!0,children:(0,e.jsx)(It.Z,{className:Zt().edit,onClick:function(){return Oe.current.show(d)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(s,d){return d.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(s,d){return d.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(s,d){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:d.gmt_created})}},{title:(0,e.jsxs)($e.Z,{justify:"space-between",style:{width:"100%"},children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",size:"small",onClick:G,children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"option",width:140,fixed:"right",render:function(s,d){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(nt.Z.Link,{onClick:function(){return Re((0,o.Z)({},d))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(nt.Z.Link,{onClick:function(){return me((0,o.Z)({},d))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],v=function(s,d){Te(s),te(d)},h=function(){var i=(0,A.Z)((0,c.Z)().mark(function s(d){var R,w,ve;return(0,c.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,(0,ge.Ft)(d.id,{doc:d.doc});case 2:R=ye.sent,w=R.code,ve=R.msg,w===200?(L.default.success(r({id:"operation.success"})),Oe.current.hide(),J(!le)):(0,dt.EV)(w,ve);case 6:case"end":return ye.stop()}},s)}));return function(d){return i.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(Zt().warp," case_table_wrapper"),children:[m.test_type==="performance"&&(0,e.jsxs)(ft.Z,{defaultActiveKey:"1",activeKey:oe,onChange:function(s){return b(s)},className:Zt().caseTabCls,children:[(0,e.jsx)(S,{tab:"Test Conf"},"1"),(0,e.jsx)(S,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),oe=="1"?(0,e.jsx)($t.Z,{columns:X,name:"sys-suite-manage-case",scroll:{x:1400},rowKey:function(s){return s.id},loading:be,dataSource:(ae==null?void 0:ae.data)||[],page:ae.page_num,rowSelection:g,totalPage:ae.total_page,total:ae.total,pageSize:ae.page_size,handlePage:v,className:Zt().caseTableCls,expandable:m.test_type=="performance"?{expandedRowRender:function(s){return(0,e.jsx)(jn,{componentType:"case",id:s.id,innerKey:oe})},onExpand:function(s,d){s?_(d):pe([])},indentSize:0,expandedRowKeys:He,expandIcon:function(s){var d=s.expanded,R=s.onExpand,w=s.record;return d?(0,e.jsx)(Rt.Z,{onClick:function(Le){return R(w,Le)}}):(0,e.jsx)(bt.Z,{onClick:function(Le){return R(w,Le)}})}}:{}}):(0,e.jsx)(jn,{componentType:"suite",id:p,innerKey:oe}),(0,e.jsx)(an,{ref:Oe,onOk:h}),(0,e.jsx)(sn,{basePath:"/refenerce/conf/",ref:we,onOk:ne}),(0,e.jsx)(Zn,{ref:Ie,onOk:ne})]})}),sr=a(91014),Xt=a.n(sr),ir=function(D){var p=D.list,u=D.confirm,r=D.onConfirm,f=(0,n.useState)([]),m=(0,l.Z)(f,2),Z=m[0],re=m[1],S=(0,n.useState)(!1),B=(0,l.Z)(S,2),ee=B[0],T=B[1],$=(0,n.useState)(!1),F=(0,l.Z)($,2),le=F[0],J=F[1],z=function(C){J(!!C.length&&C.length<p.length),re(C),T(C.length===p.length)},Q=p.map(function(oe){return oe.id}),ce=function(C){re(C.target.checked?Q:[]),T(C.target.checked),J(!1)};return(0,e.jsxs)("div",{className:Xt().filter,children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxHeight:280,overflow:"auto",gap:4},children:[(0,e.jsx)(Et.Z,{indeterminate:le,className:Xt().domain,onChange:ce,checked:ee,children:(0,e.jsx)(t._H,{id:"operation.select.all"})}),(0,e.jsx)(Et.Z.Group,{onChange:z,value:Z,children:(0,e.jsx)(Ke.Z,{direction:"vertical",size:4,children:p.map(function(oe){return(0,e.jsx)(Et.Z,{className:Xt().domain,value:oe.id,children:oe.name},oe.id)})})})]}),(0,e.jsx)(gn.Z,{style:{margin:"10px 0"}}),(0,e.jsxs)("div",{className:Xt().confirm,children:[(0,e.jsx)(V.Z,{size:"small",type:"link",onClick:function(){u==null||u();var C=Z&&Z.join(",");r(C)},children:(0,e.jsx)(t._H,{id:"operation.ok"})}),(0,e.jsx)(V.Z,{size:"small",type:"text",style:{border:"none"},onClick:function(){u==null||u(),re([]),r(void 0),T(!1),J(!1)},children:(0,e.jsx)(t._H,{id:"operation.reset"})})]})]})},_n=ir,ln=a(12590),qt=a(6532),Sn=a(15122),Za=a(70772),it=a(6701),yn=a(57286),Cn=a(80873),lr=(0,n.forwardRef)(function(I,D){var p=I.onOk,u=I.wsList,r=(0,t.YB)(),f=r.formatMessage,m=(0,ot.TH)(),Z=m.query,re=Z.test_type||"functional",S=W.Z.useForm(),B=(0,l.Z)(S,1),ee=B[0],T=Qt(),$=T.domainList,F=T.runList,le=T.viewType,J=(0,n.useState)(!1),z=(0,l.Z)(J,2),Q=z[0],ce=z[1],oe=(0,n.useState)(""),C=(0,l.Z)(oe,2),U=C[0],je=C[1],_e=(0,n.useState)(),Te=(0,l.Z)(_e,2),K=Te[0],fe=Te[1],Fe=(0,n.useState)(!1),te=(0,l.Z)(Fe,2),k=te[0],j=te[1],ae=(0,n.useState)({}),ue=(0,l.Z)(ae,2),se=ue[0],xe=ue[1],be=W.Z.useWatch("visible_range",ee),Be=n.useRef(),Me=function(){ce(!1),j(!1),ee.resetFields(),fe(void 0),je(""),xe({})};(0,n.useImperativeHandle)(D,function(){return{show:function(Re){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ce(!0),j(!1),me&&xe(me),!1)var b;else ee.setFieldsValue((0,o.Z)((0,o.Z)({},me),{},{test_type:re,owner:me.owner_name,certificated:me.certificated?1:0}))},hide:Me}});var Ze=function(){ee.validateFields().then(function(){var Re=(0,A.Z)((0,c.Z)().mark(function me(b){var ne,G,g,_;return(0,c.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!b.name||b.name.replace(/\s+/g,"")=="")){v.next=4;break}return je("error"),fe(f({id:"please.enter"})),v.abrupt("return");case 4:if(b.name=b.name.replace(/\s+/g,""),b.owner===se.owner_name&&(b.owner=se.owner),b.domain_list_str=b.domain_list_str.join(),j(!0),!(se!=null&&se.id)){v.next=15;break}return v.next=12,(0,ge.Fu)(se==null?void 0:se.id,b);case 12:v.t0=v.sent,v.next=18;break;case 15:return v.next=17,(0,ge.xk)(b);case 17:v.t0=v.sent;case 18:if(G=v.t0,g=G.code,_=G.msg,j(!1),g===200){v.next=24;break}return v.abrupt("return",(0,dt.EV)(g,_));case 24:Me(),p==null||p();case 26:case"end":return v.stop()}},me)}));return function(me){return Re.apply(this,arguments)}}()).catch(function(Re){(!Re.values.name||Re.values.name.replace(/\s+/g,"")=="")&&(je("error"),fe(f({id:"please.enter"}))),j(!1)})},He=function(){var Se=(0,A.Z)((0,c.Z)().mark(function Re(){var me,b,ne,G,g,_,X;return(0,c.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!k){h.next=2;break}return h.abrupt("return");case 2:JSON.stringify(se),h.next=15;break;case 11:if(_=h.sent,X=_.code,X!==200){h.next=15;break}return h.abrupt("return",(g=Be.current)===null||g===void 0?void 0:g.show((0,o.Z)((0,o.Z)({},se),{},{path:"visible_range",visible_range:ne})));case 15:Ze();case 16:case"end":return h.stop()}},Re)}));return function(){return Se.apply(this,arguments)}}(),pe=function(){j(!1)},Oe=function(){fe(void 0),je("")},we=(0,n.useMemo)(function(){var Se=JSON.stringify(se)!=="{}"?Z.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.edit"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.edit"}):Z.test_type==="performance"?(0,e.jsx)(t._H,{id:"TestSuite.performance.new"}):(0,e.jsx)(t._H,{id:"TestSuite.functional.new"});return Se},[Z,se]),Ie=(0,n.useMemo)(function(){return JSON.stringify(se)!=="{}"?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})},[]);return(0,e.jsxs)(at.Z,{maskClosable:!1,keyboard:!1,className:Zt().warp,forceRender:!0,destroyOnClose:!0,title:we,width:376,onClose:Me,open:Q,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(V.Z,{onClick:Me,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{onClick:He,loading:k,type:"primary",htmlType:"submit",children:Ie})]}),children:[(0,e.jsx)(W.Z,{layout:"vertical",form:ee,initialValues:{is_default:1,view_type:"Type1",visible_range:"*"},children:(0,e.jsxs)($e.Z,{gutter:16,children:[(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"name",label:"Test Suite",validateStatus:U,help:K,rules:[{required:!0,message:f({id:"please.enter"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:f({id:"please.enter"}),onFocus:pe,onChange:Oe})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"test_type",label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(Je.Z,{placeholder:f({id:"please.select"}),disabled:!0,getPopupContainer:function(Re){return Re.parentNode},children:[(0,e.jsx)(Je.Z.Option,{value:"functional",children:(0,e.jsx)(t._H,{id:"functional.test"})}),(0,e.jsx)(Je.Z.Option,{value:"performance",children:(0,e.jsx)(t._H,{id:"performance.test"})})]})})}),!1,(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"run_mode",label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:f({id:"please.select"}),getPopupContainer:function(Re){return Re.parentNode},children:F.map(function(Se){return(0,e.jsx)(Je.Z.Option,{value:Se.id,children:Se.name},Se.id)})})})}),Z.test_type==="performance"&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"view_type",label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),children:(0,e.jsx)(Je.Z,{placeholder:f({id:"please.select"}),children:le.map(function(Se){return(0,e.jsx)(Je.Z.Option,{value:Se.id,children:Se.name},Se.id)})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:f({id:"please.select"}),mode:"multiple",getPopupContainer:function(Re){return Re.parentNode},filterOption:function(Re,me){return me.label.toLowerCase().indexOf(Re.toLowerCase())>=0},allowClear:!0,options:$.map(function(Se){return{value:Se.id,label:Se.name}})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(yn.Z,{})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"is_default",label:(0,e.jsx)(Cn.f,{title:f({id:"TestSuite.default.case"}),desc:f({id:"TestSuite.auto.join.workspace"})}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"certificated",label:(0,e.jsx)(Cn.f,{title:f({id:"TestSuite.is_certified"}),desc:f({id:"TestSuite.is_certified.ps"})}),rules:[{required:!0,message:f({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"doc",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:f({id:"TestSuite.please.enter.desc"})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:f({id:"please.enter"})})})})]})}),(0,e.jsx)(sn,{ref:Be,onOk:Ze,onCancel:function(){j(!1)},okText:(0,e.jsx)(t._H,{id:"TestSuite.tips.okText"})})]})}),_a=a(49132),Sa=a(72415),en=a(29700),dr=a(77335),ur=a(52318),or=a(31279),cr=a(31762),fr=a(51129),pr=a(42098),mr=a(68591),hr=a.n(mr),wn=a(19032),vr=a(12784),bn=a(53532),gr=a(43378),Tn=a(96164);function xr(I){var D,p=function(f){return function(){D=null,I.apply(void 0,(0,gr.Z)(f))}},u=function(){if(D==null){for(var f=arguments.length,m=new Array(f),Z=0;Z<f;Z++)m[Z]=arguments[Z];D=(0,Tn.Z)(p(m))}};return u.cancel=function(){Tn.Z.cancel(D),D=null},u}function kn(){return function(D,p,u){var r=u.value,f=!1;return{configurable:!0,get:function(){if(f||this===D.prototype||this.hasOwnProperty(p))return r;var Z=xr(r.bind(this));return f=!0,Object.defineProperty(this,p,{value:Z,configurable:!0,writable:!0}),f=!1,Z}}}}var jr=a(97182);function tn(I){return I!==window?I.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function Hn(I,D,p){if(p!==void 0&&D.top>I.top-p)return p+D.top}function In(I,D,p){if(p!==void 0&&D.bottom<I.bottom+p){var u=window.innerHeight-D.bottom;return p+u}}var Dn=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],Wt=[];function ya(){return Wt}function On(I,D){if(!!I){var p=Wt.find(function(u){return u.target===I});p?p.affixList.push(D):(p={target:I,affixList:[D],eventHandlers:{}},Wt.push(p),Dn.forEach(function(u){p.eventHandlers[u]=(0,jr.Z)(I,u,function(){p.affixList.forEach(function(r){r.lazyUpdatePosition()})})}))}}function Rn(I){var D=Wt.find(function(p){var u=p.affixList.some(function(r){return r===I});return u&&(p.affixList=p.affixList.filter(function(r){return r!==I})),u});D&&D.affixList.length===0&&(Wt=Wt.filter(function(p){return p!==D}),Dn.forEach(function(p){var u=D.eventHandlers[p];u&&u.remove&&u.remove()}))}var En=function(I,D,p,u){var r=arguments.length,f=r<3?D:u===null?u=Object.getOwnPropertyDescriptor(D,p):u,m;if((typeof Reflect=="undefined"?"undefined":(0,pr.Z)(Reflect))==="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(I,D,p,u);else for(var Z=I.length-1;Z>=0;Z--)(m=I[Z])&&(f=(r<3?m(f):r>3?m(D,p,f):m(D,p))||f);return r>3&&f&&Object.defineProperty(D,p,f),f};function Zr(){return typeof window!="undefined"?window:null}var Ut;(function(I){I[I.None=0]="None",I[I.Prepare=1]="Prepare"})(Ut||(Ut={}));var nn=function(I){(0,cr.Z)(p,I);var D=(0,fr.Z)(p);function p(){var u;return(0,ur.Z)(this,p),u=D.apply(this,arguments),u.state={status:Ut.None,lastAffix:!1,prevTarget:null},u.getOffsetTop=function(){var r=u.props,f=r.offsetBottom,m=r.offsetTop;return f===void 0&&m===void 0?0:m},u.getOffsetBottom=function(){return u.props.offsetBottom},u.savePlaceholderNode=function(r){u.placeholderNode=r},u.saveFixedNode=function(r){u.fixedNode=r},u.measure=function(){var r=u.state,f=r.status,m=r.lastAffix,Z=u.props.onChange,re=u.getTargetFunc();if(!(f!==Ut.Prepare||!u.fixedNode||!u.placeholderNode||!re)){var S=u.getOffsetTop(),B=u.getOffsetBottom(),ee=re();if(!!ee){var T={status:Ut.None},$=tn(ee),F=tn(u.placeholderNode),le=Hn(F,$,S),J=In(F,$,B);F.top===0&&F.left===0&&F.width===0&&F.height===0||(le!==void 0?(T.affixStyle={position:"fixed",top:le,width:F.width,height:F.height},T.placeholderStyle={width:F.width,height:F.height}):J!==void 0&&(T.affixStyle={position:"fixed",bottom:J,width:F.width,height:F.height},T.placeholderStyle={width:F.width,height:F.height}),T.lastAffix=!!T.affixStyle,Z&&m!==T.lastAffix&&Z(T.lastAffix),u.setState(T))}}},u.prepareMeasure=function(){if(u.setState({status:Ut.Prepare,affixStyle:void 0,placeholderStyle:void 0}),!1)var r},u}return(0,or.Z)(p,[{key:"getTargetFunc",value:function(){var r=this.context.getTargetContainer,f=this.props.target;return f!==void 0?f:r!=null?r:Zr}},{key:"componentDidMount",value:function(){var r=this,f=this.getTargetFunc();f&&(this.timeout=setTimeout(function(){On(f(),r),r.updatePosition()}))}},{key:"componentDidUpdate",value:function(r){var f=this.state.prevTarget,m=this.getTargetFunc(),Z=(m==null?void 0:m())||null;f!==Z&&(Rn(this),Z&&(On(Z,this),this.updatePosition()),this.setState({prevTarget:Z})),(r.offsetTop!==this.props.offsetTop||r.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),Rn(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var r=this.getTargetFunc(),f=this.state.affixStyle;if(r&&f){var m=this.getOffsetTop(),Z=this.getOffsetBottom(),re=r();if(re&&this.placeholderNode){var S=tn(re),B=tn(this.placeholderNode),ee=Hn(B,S,m),T=In(B,S,Z);if(ee!==void 0&&f.top===ee||T!==void 0&&f.bottom===T)return}}this.prepareMeasure()}},{key:"render",value:function(){var r=this,f=this.state,m=f.affixStyle,Z=f.placeholderStyle,re=this.props,S=re.affixPrefixCls,B=re.children,ee=hr()((0,dr.Z)({},S,!!m)),T=(0,vr.Z)(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls"]);return n.createElement(wn.Z,{onResize:function(){r.updatePosition()}},n.createElement("div",(0,en.Z)({},T,{ref:this.savePlaceholderNode}),m&&n.createElement("div",{style:Z,"aria-hidden":"true"}),n.createElement("div",{className:ee,ref:this.saveFixedNode,style:m},n.createElement(wn.Z,{onResize:function(){r.updatePosition()}},B))))}}]),p}(n.Component);nn.contextType=bn.E_,En([kn()],nn.prototype,"updatePosition",null),En([kn()],nn.prototype,"lazyUpdatePosition",null);var _r=n.forwardRef(function(I,D){var p=I.prefixCls,u=n.useContext(bn.E_),r=u.getPrefixCls,f=r("affix",p),m=(0,en.Z)((0,en.Z)({},I),{affixPrefixCls:f});return n.createElement(nn,(0,en.Z)({},m,{ref:D}))}),Pn=_r,Mn=a(41428),Fn=a(97939),Ln,Sr=(0,Fn.ZP)($e.Z)(Ln||(Ln=(0,Mn.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),yr=function(){var D=(0,t.YB)(),p=D.formatMessage,u=(0,n.useContext)(Yt),r=u.selectedRowKeys,f=u.setSelectedRowKeys,m=u.selectedRow,Z=u.confDrawerShow,re=u.confRefresh,S=u.setConfRefresh,B=(0,n.useState)(!1),ee=(0,l.Z)(B,2),T=ee[0],$=ee[1],F=(0,n.useState)(!1),le=(0,l.Z)(F,2),J=le[0],z=le[1],Q=function(){var U=(0,A.Z)((0,c.Z)().mark(function je(){var _e;return(0,c.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,Pt.Ob)({flag:"pass",case_id_list:r.join(",")});case 2:_e=K.sent,_e.code===200?$(!0):z(!0);case 4:case"end":return K.stop()}},je)}));return function(){return U.apply(this,arguments)}}(),ce=function(){var U=(0,A.Z)((0,c.Z)().mark(function je(){var _e;return(0,c.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return _e={id_list:r.join(",")},f([]),K.next=4,(0,ge.TZ)(_e);case 4:S(!re);case 5:case"end":return K.stop()}},je)}));return function(){return U.apply(this,arguments)}}(),oe=function(){Z("batch.edit",{bentch:!0})},C=function(){var U=(0,A.Z)((0,c.Z)().mark(function je(){var _e,Te;return(0,c.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:_e=[],m.map(function(Fe){return _e.push(Fe.name)}),Te=(0,dt.MR)({name:_e.join(","),id:r.join(",")}),Te&&window.open("/refenerce/conf/pk=".concat(Te));case 4:case"end":return fe.stop()}},je)}));return function(){return U.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Pn,{offsetBottom:16,children:(0,e.jsxs)(Sr,{justify:"space-between",children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Et.Z,{indeterminate:!0}),(0,e.jsx)(nt.Z.Text,{children:p({id:"selected.item"},{data:r.length})}),(0,e.jsx)(V.Z,{type:"link",onClick:function(){return f([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:Q,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(V.Z,{type:"primary",onClick:oe,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})}),(0,e.jsxs)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(V.Z,{onClick:ce,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return $(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,visible:T,onCancel:function(){return $(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4}}),(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:C,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,visible:J,onCancel:function(){return z(!1)},footer:[(0,e.jsx)(V.Z,{onClick:ce,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return z(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})})]})},Cr=yr,Ca=a(13059),An=a(53676),Bn=a(53849),Kn=(0,n.forwardRef)(function(I,D){var p=I.onOk,u=(0,t.YB)(),r=u.formatMessage,f=(0,ot.TH)(),m=f.query,Z={repeat:m.test_type==="performance"?3:1,timeout:3600,is_default:1,var:[{name:"",val:"",des:""}]},re=Qt(),S=re.domainList,B=W.Z.useForm(),ee=(0,l.Z)(B,1),T=ee[0],$=(0,n.useState)(!1),F=(0,l.Z)($,2),le=F[0],J=F[1],z=(0,n.useState)(""),Q=(0,l.Z)(z,2),ce=Q[0],oe=Q[1],C=(0,n.useState)(!0),U=(0,l.Z)(C,2),je=U[0],_e=U[1],Te=(0,n.useState)({bentch:!1}),K=(0,l.Z)(Te,2),fe=K[0],Fe=K[1],te=(0,n.useState)(!1),k=(0,l.Z)(te,2),j=k[0],ae=k[1],ue=function(){Fe({bentch:!1}),_e(!0),J(!1),oe(""),T.resetFields(),ae(!1)};(0,n.useImperativeHandle)(D,function(){return{show:function(Ze,He){if(Ze&&oe(Ze),Fe(He),J(!0),!He.bentch){var pe=(0,o.Z)((0,o.Z)((0,o.Z)({},Z),He),{},{certificated:He.certificated?1:0});S.length&&~Ze.indexOf("new")&&S.forEach(function(Oe){var we=Oe.id,Ie=Oe.name;Ie==="\u5176\u4ED6"&&(pe.domain_list_str=[we])}),T.setFieldsValue(pe)}},hide:ue}});var se=function(){j||(ae(!0),T.validateFields().then(function(Ze){var He=fe.id,pe=fe.test_suite_id;p((0,o.Z)((0,o.Z)({},Ze),{},{id:He,test_suite_id:pe,domain_list_str:Ze.domain_list_str?Ze.domain_list_str.join():void 0}),fe.bentch)}).catch(function(Ze){console.log(Ze),ae(!1)}))},xe=function(Ze,He,pe,Oe){var we=T.getFieldValue("var"),Ie=we[Oe];if(Ie.name!==""&&Ie.val!==""&&Ie.des!==""||Ie.name===""&&Ie.val===""&&Ie.des===""){pe();return}else if(He==""){pe(r({id:"please.enter"}));return}pe()},be=function(Ze,He,pe){try{var Oe=JSON.parse(He);if(Object.prototype.toString.call(Oe)==="[object Array]"){for(var we=Oe.length,Ie=0;Ie<we;Ie++)if(Object.prototype.toString.call(Oe[Ie])!=="[object Object]"){pe(r({id:"TestSuite.data.format.error"}));return}}else{pe(r({id:"TestSuite.data.format.error"}));return}}catch(Se){pe(r({id:"TestSuite.data.format.error"}));return}pe()},Be=function(){var Ze=T.getFieldValue("var");if(!je)try{var He=JSON.parse(Ze);if(Object.prototype.toString.call(He)==="[object Array]"){for(var pe=He.length,Oe=0;Oe<pe;Oe++)if(Object.prototype.toString.call(He[Oe])!=="[object Object]"){L.default.error(r({id:"TestSuite.data.format.error"}));return}}else{L.default.error(r({id:"TestSuite.data.format.error"}));return}}catch(we){L.default.error(r({id:"TestSuite.data.format.error"}));return}T.setFieldsValue({var:je?JSON.stringify(Ze,null,4):JSON.parse(Ze)}),_e(!je)};return(0,e.jsx)(at.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(ce)}),className:Zt().warp,forceRender:!0,destroyOnClose:!0,width:376,onClose:ue,open:le,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(V.Z,{onClick:ue,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{onClick:se,type:"primary",htmlType:"submit",children:ce.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsx)(W.Z,{layout:"vertical",form:T,children:(0,e.jsxs)($e.Z,{gutter:16,children:[!fe.bentch&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"name",label:"Test Conf",rules:[{required:!0,message:r({id:"please.enter"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"please.enter"})})})}),!fe.bentch&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"alias",label:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.alias.placeholder"})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"domain_list_str",label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),rules:fe.bentch?[]:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),mode:"multiple",getPopupContainer:function(Ze){return Ze.parentNode},options:S==null?void 0:S.map(function(Me){return{value:Me.id,label:Me.name}})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"timeout",label:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),rules:fe.bentch?[]:[{required:!0,message:r({id:"please.enter"})}],children:(0,e.jsx)(Lt.Z,{style:{width:"100%"},min:0,step:1,placeholder:r({id:"please.enter"})})})}),(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"repeat",label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),children:(0,e.jsx)(Lt.Z,{style:{width:"100%"},min:1,step:1,placeholder:r({id:"please.enter"})})})}),!fe.bentch&&(0,e.jsxs)(it.Z,{span:24,children:[(0,e.jsx)(V.Z,{style:{position:"absolute",right:0,zIndex:99},type:"link",size:"small",onClick:Be,children:je?"Bulk Edit":"Key-Value Edit"}),je?(0,e.jsx)(W.Z.List,{name:"var",children:function(Ze,He){var pe=He.add,Oe=He.remove;return(0,e.jsxs)("div",{children:[Ze.map(function(we,Ie){return(0,e.jsxs)(Ke.Z,{style:{display:"flex",marginBottom:8},align:"start",children:[(0,e.jsx)(W.Z.Item,(0,o.Z)((0,o.Z)({label:Ie==0?(0,e.jsx)(t._H,{id:"TestSuite.var"}):null},we),{},{name:[we.name,"name"],fieldKey:[we.fieldKey,"name"],rules:[{validator:function(Re,me,b){xe(Re,me,b,Ie)}}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"TestSuite.variable.name"})})})),(0,e.jsx)("div",{style:{paddingTop:Ie==0?"33px":"0"},children:"="}),(0,e.jsx)(W.Z.Item,(0,o.Z)((0,o.Z)({label:Ie==0?" ":null},we),{},{name:[we.name,"val"],fieldKey:[we.fieldKey,"val"],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"TestSuite.default"})})})),(0,e.jsx)("div",{style:{paddingTop:Ie==0?"38px":"0"},children:","}),(0,e.jsx)(W.Z.Item,(0,o.Z)((0,o.Z)({label:Ie==0?" ":null},we),{},{name:[we.name,"des"],fieldKey:[we.fieldKey,"des"],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"TestSuite.var.desc"})})})),Ze.length>1?(0,e.jsx)("div",{style:{paddingTop:Ie==0?"30px":"0"},children:(0,e.jsx)(Bn.Z,{className:"dynamic-delete-button",style:{margin:"8px 0"},onClick:function(){Oe(we.name)}})}):(0,e.jsx)("div",{style:{width:"14px"},children:" "})]},we.key)}),(0,e.jsxs)(V.Z,{style:{width:100,padding:0,textAlign:"left",marginBottom:8},type:"link",size:"small",onClick:function(){var Ie=T.getFieldValue("var");Ie.push({name:"",val:"",des:""}),T.setFieldsValue({var:Ie})},block:!0,children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})]})}}):(0,e.jsx)(W.Z.Item,{name:"var",label:(0,e.jsx)(t._H,{id:"TestSuite.var"}),rules:[{validator:be}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:4,style:{width:"100%"},placeholder:"\u683C\u5F0F\uFF1Akey=value, description\uFF0C\u591A\u4E2A\u6362\u884C"})})]}),!fe.bentch&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"is_default",label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),!fe.bentch&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"certificated",label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(An.Z,{overlayClassName:Zt().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)(Ht.Z,{})})]}),rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"operation.yes"})}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})}),!fe.bentch&&(0,e.jsx)(it.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"description",label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),children:(0,e.jsx)(Ne.Z.TextArea,{rows:4,placeholder:r({id:"TestSuite.desc.placeholder"})})})})]})})})}),wr=a(97207),br=a.n(wr),$n,Tr=(0,Fn.ZP)($e.Z)($n||($n=(0,Mn.Z)([`
    padding-right : 20px;
    margin-top: 16px;
    height:64px;
    width:100%;
    line-height: 64px;
    background-color: #fff;
    padding-left:24px;
    box-shadow:0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12);
`]))),kr=function(D){var p=D.selectedRowKeys,u=D.setMetricDelInfo,r=D.onOk,f=D.innerKey,m=(0,t.YB)(),Z=function(B){r==null||r(p,B),u({})},re=function(){u({})};return p!=null&&p.length?(0,e.jsx)(Pn,{offsetBottom:16,children:(0,e.jsxs)(Tr,{justify:"space-between",children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Et.Z,{indeterminate:!0}),(0,e.jsx)(nt.Z.Text,{children:m.formatMessage({id:"selected.item"},{data:p.length})}),(0,e.jsx)(V.Z,{type:"link",onClick:re,children:(0,e.jsx)(t._H,{id:"operation.cancel",defaultMessage:"\u53D6\u6D88"})})]}),(0,e.jsx)(Ke.Z,{children:f==="1"?(0,e.jsx)(Jt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return Z()},overlayStyle:{width:"224px"},children:(0,e.jsx)(V.Z,{children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})}):(0,e.jsx)(vn,{isBatch:!0,onOk:Z})})]})}):(0,e.jsx)(e.Fragment,{})},Hr=kr,Ir=a(44728),wa=a(94376),Dr=null,rn=null,Or=function(D,p){var u,r=(0,t.YB)(),f=r.formatMessage,m=(0,t.Kd)()==="en-US",Z=Qt(),re=Z.domainList,S=Z.runList,B=(0,ot.TH)(),ee=B.query,T=ee.test_type||"functional",$={page_size:10,page_num:1,test_type:T},F=(0,t.QT)(function(){return(0,Ir.Tf)({page_size:999})}),le=F.data,J=(0,n.useState)($),z=(0,l.Z)(J,2),Q=z[0],ce=z[1],oe=(0,n.useState)(!0),C=(0,l.Z)(oe,2),U=C[0],je=C[1],_e=(0,n.useState)(!1),Te=(0,l.Z)(_e,2),K=Te[0],fe=Te[1],Fe=(0,n.useState)([]),te=(0,l.Z)(Fe,2),k=te[0],j=te[1],ae=(0,n.useState)([]),ue=(0,l.Z)(ae,2),se=ue[0],xe=ue[1],be=(0,n.useState)([]),Be=(0,l.Z)(be,2),Me=Be[0],Ze=Be[1],He=(0,n.useState)(!0),pe=(0,l.Z)(He,2),Oe=pe[0],we=pe[1],Ie=(0,n.useState)([]),Se=(0,l.Z)(Ie,2),Re=Se[0],me=Se[1],b=(0,n.useState)(new Date().getTime()),ne=(0,l.Z)(b,2),G=ne[0],g=ne[1],_=(0,n.useState)(),X=(0,l.Z)(_,2),v=X[0],h=X[1],i=n.useState({}),s=(0,l.Z)(i,2),d=s[0],R=s[1],w=[{id:1,name:f({id:"operation.yes"})},{id:0,name:f({id:"operation.no"})}],ve=(0,n.useRef)(null),Le=(0,n.useRef)(null),ye=n.useRef(null),Ee=(0,n.useRef)(null),Tt=n.useRef(null);(0,n.useImperativeHandle)(p,function(){return{openCreateDrawer:Le.current.show}});var yt=function(y,P){rn!==null&&clearTimeout(rn),rn=setTimeout(br().partial(y,Q),P)},xt=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P,Y){var Ce,Ge,Qe,pt,Xe,zt,Ve,Nt,cn,fn,pn,mn,Yn;return(0,c.Z)().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Ce=P.test_suite_id,Ge=P.id,Qe=(0,o.Z)({},P),!Y){We.next=9;break}return pt=(0,o.Z)((0,o.Z)({},Qe),{case_id_list:se.join(",")}),We.next=6,(0,ge.fF)(pt);case 6:xe([]),We.next=58;break;case 9:if(Xe=Qe.var,Object.prototype.toString.call(Qe.var)!=="[object String]"){We.next=35;break}if(We.prev=11,zt=JSON.parse(Xe),Object.prototype.toString.call(zt)!=="[object Array]"){We.next=25;break}Ve=zt.length,Nt=0;case 16:if(!(Nt<Ve)){We.next=23;break}if(Object.prototype.toString.call(zt[Nt])==="[object Object]"){We.next=20;break}return L.default.error(f({id:"TestSuite.data.format.error"})),We.abrupt("return");case 20:Nt++,We.next=16;break;case 23:We.next=27;break;case 25:return L.default.error(f({id:"TestSuite.data.format.error"})),We.abrupt("return");case 27:We.next=33;break;case 29:return We.prev=29,We.t0=We.catch(11),L.default.error(f({id:"TestSuite.data.format.error"})),We.abrupt("return");case 33:We.next=38;break;case 35:cn=[],Xe.map(function(Gn){Gn.name&&cn.push(Gn)}),Xe=JSON.stringify(cn);case 38:if(Qe.var=Xe,fn=(0,o.Z)((0,o.Z)({},Qe),{test_suite_id:Ce}),!Ge){We.next=46;break}return We.next=43,(0,ge.Ft)(Ge,fn);case 43:We.t1=We.sent,We.next=49;break;case 46:return We.next=48,(0,ge.C7)(fn);case 48:We.t1=We.sent;case 49:if(pn=We.t1,mn=pn.code,Yn=pn.msg,mn!=201){We.next=55;break}return L.default.error(f({id:"TestSuite.repeated.suite.name"})),We.abrupt("return");case 55:if(mn!=202){We.next=58;break}return L.default.error(Yn),We.abrupt("return");case 58:ve.current.hide(),L.default.success(f({id:"operation.success"})),we(!Oe);case 61:case"end":return We.stop()}},y,null,[[11,29]])}));return function(P,Y){return E.apply(this,arguments)}}();(0,n.useEffect)(function(){j([]),ce($)},[ee]);var Dt=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(){var P;return(0,c.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,ge.AO)();case 2:P=Ce.sent,P.code===200?h(P.data):L.default.error(P.msg);case 4:case"end":return Ce.stop()}},y)}));return function(){return E.apply(this,arguments)}}(),De=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(){var P;return(0,c.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return je(!0),Ce.next=3,(0,ge.Zu)(Q);case 3:P=Ce.sent,me(P),Dt(),je(!1);case 7:case"end":return Ce.stop()}},y)}));return function(){return E.apply(this,arguments)}}();(0,n.useEffect)(function(){return yt(De,300),function(){clearTimeout(Dr),clearTimeout(rn)}},[Q]);var N=function(y,P){ce((0,o.Z)((0,o.Z)({},Q),{},{page_num:y,page_size:P}))},q=function(y){y.direction=="\u4E0A\u5347"&&(y.domain="increase"),y.is_default=y.is_default?1:0,y.test_type=T;for(var P=y.domain_id_list===""?[]:y.domain_id_list.split(","),Y=[],Ce=0;Ce<P.length;Ce++)Y.push(Number.parseInt(P[Ce]));y.domain_list_str=Y,re.forEach(function(Ge){Ge.name==y.domain&&(y.domain=Ge.id)}),Le.current.show("edit",y)},Ae=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P){var Y,Ce;return(0,c.Z)().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Y=P.doc,Ce=P.id,Qe.next=3,(0,ge.Fu)(Ce,{doc:Y});case 3:L.default.success(f({id:"operation.success"})),Ee.current.hide(),Q.page_num===1?De():ce((0,o.Z)((0,o.Z)({},Q),{},{page_num:1}));case 6:case"end":return Qe.stop()}},y)}));return function(P){return E.apply(this,arguments)}}(),he=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(){return(0,c.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:L.default.success(f({id:"operation.success"})),De();case 2:case"end":return Y.stop()}},y)}));return function(){return E.apply(this,arguments)}}(),ie=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P){var Y,Ce,Ge,Qe;return(0,c.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,(0,Pt.Ob)({flag:"pass",suite_id:P.id});case 2:if(Ge=Xe.sent,Qe=Ge.code,Qe!==200){Xe.next=6;break}return Xe.abrupt("return",(Y=ye.current)===null||Y===void 0?void 0:Y.show(P));case 6:(Ce=Tt.current)===null||Ce===void 0||Ce.show(P);case 7:case"end":return Xe.stop()}},y)}));return function(P){return E.apply(this,arguments)}}(),H=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P){var Y,Ce,Ge,Qe;return(0,c.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,(0,ge.D8)(P.id);case 2:L.default.success(f({id:"operation.success"})),Y=Q.page_size,Ce=Q.page_num,Ge=Re.total%Y==1,Qe=Math.floor(Re.total/Y),Ge&&Qe&&Qe+1<=Ce?ce(function(zt){return(0,o.Z)((0,o.Z)({},zt),{},{page_num:Qe})}):De();case 7:case"end":return Xe.stop()}},y)}));return function(P){return E.apply(this,arguments)}}(),O=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P){var Y,Ce,Ge,Qe;return(0,c.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return fe(!0),Y=L.default.loading({content:f({id:"operation.synchronizing"}),duration:0}),Xe.next=4,(0,ge.PO)(P.id);case 4:if(Ce=Xe.sent,Ge=Ce.code,Qe=Ce.msg,fe(!1),Y(),Ge===200){Xe.next=12;break}return L.default.warning("".concat(f({id:"request.synchronize.failed"}),"\uFF0C").concat(Qe)),Xe.abrupt("return");case 12:L.default.success(f({id:"request.synchronize.success"})),De(),g(new Date().getTime());case 15:case"end":return Xe.stop()}},y)}));return function(P){return E.apply(this,arguments)}}(),M=n.useMemo(function(){return(le||[]).reduce(function(E,y){return E[y.id]=y,E},{})},[le]),x=[{title:"Test Suite",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,filterDropdown:function(y){return(0,e.jsx)(ln.Z,(0,o.Z)((0,o.Z)({},y),{},{onConfirm:function(Y){return ce((0,o.Z)((0,o.Z)({},Q),{},{name:Y,page_num:1}))}}))},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.name?"#1890ff":void 0}})},render:function(y,P){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:P.name},children:(0,e.jsx)(hn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Q.name||""],autoEscape:!0,textToHighlight:P.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",render:function(y){return y==="standalone"?(0,e.jsx)(t._H,{id:"standalone"}):(0,e.jsx)(t._H,{id:"cluster"})},width:m?150:100,filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.run_mode?"#1890ff":void 0}})},filterDropdown:function(y){var P=y.confirm;return(0,e.jsx)(_n,{list:S,confirm:P,onConfirm:function(Ce){ce((0,o.Z)((0,o.Z)({},Q),{},{run_mode:Ce}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:90,ellipsis:!0,filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.domain?"#1890ff":void 0}})},filterDropdown:function(y){var P=y.confirm;return(0,e.jsx)(_n,{list:re,confirm:P,onConfirm:function(Ce){ce((0,o.Z)((0,o.Z)({},Q),{},{domain:Ce}))}})}},!1,T!=="functional"&&{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),(0,e.jsx)(Ot.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.1"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.2"})}),(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.view_type.3"})})]}),placement:"bottomLeft",children:(0,e.jsx)(Ht.Z,{})})]}),dataIndex:"view_type",render:function(y,P){return(0,Jn.o)(y,P)},width:120,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:130,ellipsis:!0,render:function(y,P){return(0,e.jsx)("div",{children:(0,e.jsx)(Vt.Z,{title:P.doc,width:95,isCode:!0,children:(0,e.jsx)(It.Z,{className:Zt().edit,onClick:function(){Ee.current.show(P)}})})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),width:m?130:110,render:function(y,P){return P.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.is_default===1?"#1890ff":void 0}})},filterDropdown:function(y){var P=y.confirm;return(0,e.jsx)(Sn.Z,{list:w,confirm:P,onConfirm:function(Ce){ce((0,o.Z)((0,o.Z)({},Q),{},{is_default:Ce}))}})}},{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),(0,e.jsx)(Ot.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.title"})}),placement:"bottomLeft",children:(0,e.jsx)(Ht.Z,{})})]}),width:120,render:function(y,P){return P.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.certificated===1?"#1890ff":void 0}})},filterDropdown:function(y){var P=y.confirm;return(0,e.jsx)(Sn.Z,{list:w,confirm:P,onConfirm:function(Ce){ce((0,o.Z)((0,o.Z)({},Q),{},{certificated:Ce}))}})}},{title:"Owner",dataIndex:"owner_name",width:100,ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:Q.owner?"#1890ff":void 0}})},filterDropdown:function(y){var P=y.confirm;return(0,e.jsx)(qt.Z,{confirm:P,onConfirm:function(Ce){return ce((0,o.Z)((0,o.Z)({},Q),{},{owner:Ce}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",width:100,ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:200,sorter:!0,render:function(y,P){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:P.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",sorter:!0,width:200,render:function(y,P){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:P.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),dataIndex:"id",width:m?190:140,fixed:"right",render:function(y,P){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(nt.Z.Link,{onClick:function(){return O(P)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})}),(0,e.jsx)(nt.Z.Link,{onClick:function(){return q(P)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(nt.Z.Link,{onClick:function(){return ie(P)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],de=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(){var P;return(0,c.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,ge.yC)();case 2:P=Ce.sent,P.code===200?L.default.success(f({id:"request.synchronize.command.success"})):P.code===201?L.default.warning(P.msg):L.default.error(P.msg);case 4:case"end":return Ce.stop()}},y)}));return function(){return E.apply(this,arguments)}}(),ke=function(y){return!y||y<=0?Zt().hidden:""},Pe=function(){var E=(0,A.Z)((0,c.Z)().mark(function y(P,Y){var Ce,Ge;return(0,c.Z)().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,(0,ge.wx)({id_list:P,is_sync:Y,object_id:d==null?void 0:d.object_id,object_type:(d==null?void 0:d.innerkey)==="1"?"case":"suite"});case 2:if(Ce=pt.sent,Ge=Ce.code,Ge===200){pt.next=6;break}return pt.abrupt("return");case 6:L.default.success(f({id:"operation.success"})),d==null||d.refresh(),R({});case 9:case"end":return pt.stop()}},y)}));return function(P,Y){return E.apply(this,arguments)}}();return(0,e.jsxs)(Yt.Provider,{value:{selectedRowKeys:se,selectedRow:Me,confDrawerShow:(u=ve.current)===null||u===void 0?void 0:u.show,confRefresh:Oe,setConfRefresh:we,setSelectedRowKeys:xe,setSelectedRow:Ze,metricDelInfo:d,setMetricDelInfo:R},children:[(0,e.jsxs)(lt.Z,{spinning:U,children:[!1,(0,e.jsx)(st.Z,{className:Zt().suiteTable,size:"small",onChange:function(y,P,Y){var Ce=Y.order,Ge=Y.field;switch(Ce){case"descend":Ge==="gmt_created"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:"-gmt_created"})),Ge==="gmt_modified"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:"-gmt_modified"}));break;case"ascend":Ge==="gmt_created"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:"gmt_created"})),Ge==="gmt_modified"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:"gmt_modified"}));break;default:Ge==="gmt_created"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:void 0})),Ge==="gmt_modified"&&ce((0,o.Z)((0,o.Z)({},Q),{},{order:void 0}));break}},columns:x.filter(Boolean),dataSource:Re.data,rowKey:function(y){return y.id},pagination:!1,expandable:{indentSize:0,expandedRowRender:function(y){return(0,e.jsx)(ar,{id:y.id,type:T},G)},onExpand:function(y,P){return j(y?[P.id]:[])},expandedRowClassName:function(){return"case_expand_row"},expandedRowKeys:k,expandIcon:function(y){var P=y.expanded,Y=y.onExpand,Ce=y.record;return P?(0,e.jsx)(Rt.Z,{onClick:function(Qe){return Y(Ce,Qe)}}):(0,e.jsx)(bt.Z,{onClick:function(Qe){return Y(Ce,Qe)}})}},scroll:{x:1470}}),se.length>0&&(0,e.jsx)(Cr,{}),Re.total&&(0,e.jsxs)($e.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:f({id:"pagination.total.strip"},{data:Re.total||0})}),(0,e.jsx)(vt.Z,{className:ke(Re.total),showQuickJumper:!0,showSizeChanger:!0,size:"small",current:Q.page_num,defaultCurrent:1,onChange:function(y,P){return N(y,P)},onShowSizeChange:function(y,P){return N(y,P)},total:Re.total})]})]}),(0,e.jsx)(at.Z,{open:K,width:0,getContainer:!1}),(0,e.jsx)(lr,{test_type:T,ref:Le,onOk:he,wsList:le||[]}),(0,e.jsx)(an,{ref:Ee,onOk:Ae}),(0,e.jsx)(Hr,(0,o.Z)((0,o.Z)({},d),{},{setMetricDelInfo:R,onOk:Pe})),(0,e.jsx)(Zn,{ref:Tt,onOk:H}),(0,e.jsx)(sn,{ref:ye,onOk:H}),(0,e.jsx)(Kn,{ref:ve,onOk:xt})]})},Rr=(0,n.forwardRef)(Or),Er=a(58496),zn=a.n(Er),Pr=a(42382),Mr=a.n(Pr),Fr=(0,n.forwardRef)(function(I,D){var p=(0,t.YB)(),u=p.formatMessage,r=W.Z.useForm(),f=(0,l.Z)(r,1),m=f[0],Z=(0,n.useState)(!1),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)(!1),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)("new"),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)({}),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useState)(!0),_e=(0,l.Z)(je,2),Te=_e[0],K=_e[1],fe=(0,n.useState)(!0),Fe=(0,l.Z)(fe,2),te=Fe[0],k=Fe[1];(0,n.useImperativeHandle)(D,function(){return{show:function(){var xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"new",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F(!0),Q(xe),U(be),K(!0),m.setFieldsValue(be)}}});var j=function(){m.resetFields(),B(!1),F(!1),k(!0),K(!0)},ae=function(xe,be,Be){xe===200?(I.onOk(),L.default.success(u({id:"operation.success"})),K(!0),F(!1),m.resetFields()):xe===201?K(!1):L.default.error(be),B(!1)},ue=function(){if(!m.getFieldValue("name")){k(!1);return}B(!0),m.validateFields().then(function(){var xe=(0,A.Z)((0,c.Z)().mark(function be(Be){var Me,Ze,He,pe,Oe,we;return(0,c.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(z!=="new"){Se.next=9;break}return Se.next=3,(0,ge.xW)((0,o.Z)({},Be));case 3:Me=Se.sent,Ze=Me.code,He=Me.msg,ae(Ze,He,"new"),Se.next=15;break;case 9:return Se.next=11,(0,ge.T6)((0,o.Z)({id:C.id},Be));case 11:pe=Se.sent,Oe=pe.code,we=pe.msg,ae(Oe,we,"edit");case 15:case"end":return Se.stop()}},be)}));return function(be){return xe.apply(this,arguments)}}()).catch(function(xe){return console.log(xe)})};return(0,e.jsx)(at.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(t._H,{id:"addScript.title.".concat(z)}),width:"375",onClose:j,visible:$,className:Mr().add_baseline_drawer,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:j,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{type:"primary",disabled:S,onClick:ue,children:C&&C.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(W.Z,{form:m,layout:"vertical",children:[(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),name:"name",validateStatus:(!te||!Te)&&"error",help:!te&&u({id:"TestSuite.domain.name.cannot.be.empty"})||!Te&&u({id:"TestSuite.domain.name.already.exists"}),rules:[{required:!0}],children:(0,e.jsx)(Ne.Z,{autoComplete:"auto",placeholder:u({id:"TestSuite.domain.name.placeholder"}),onChange:function(xe){if(K(!0),!xe.target.value){k(!1);return}k(!0)}})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc.option"}),name:"description",children:(0,e.jsx)(Ne.Z.TextArea,{placeholder:u({id:"TestSuite.please.enter.description"})})})]})})}),Lr=function(D,p){var u=(0,t.YB)(),r=u.formatMessage;(0,n.useImperativeHandle)(p,function(){return{openCreateDrawer:z.current.show}});var f=(0,n.useState)(!0),m=(0,l.Z)(f,2),Z=m[0],re=m[1],S=(0,n.useState)(!0),B=(0,l.Z)(S,2),ee=B[0],T=B[1],$=(0,n.useState)([]),F=(0,l.Z)($,2),le=F[0],J=F[1],z=(0,n.useRef)(null),Q={page_num:1,page_size:10},ce=(0,n.useState)(Q),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=function(){var te=(0,A.Z)((0,c.Z)().mark(function k(){var j;return(0,c.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return re(!0),ue.next=3,(0,ge.ge)(C);case 3:j=ue.sent,J(j),re(!1);case 6:case"end":return ue.stop()}},k)}));return function(){return te.apply(this,arguments)}}(),_e=function(k,j){U((0,o.Z)((0,o.Z)({},C),{},{page_num:k,page_size:j}))};(0,n.useEffect)(function(){je()},[C]);var Te=(0,c.Z)().mark(function te(){var k,j=arguments;return(0,c.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return k=j.length>0&&j[0]!==void 0?j[0]:{},ue.next=3,(0,ge.Ak)({id_list:[k.id]});case 3:case"end":return ue.stop()}},te)}),K=function(k,j){var ae=C.page_num,ue=C.page_size;if(k===200){L.default.success(r({id:"operation.success"}));var se=Math.ceil((le.total-1)/ue)||1,xe=ae;ae>se&&(xe=se),U((0,o.Z)((0,o.Z)({},C),{},{page_num:xe}))}else(0,dt.EV)(k,j)},fe=[{title:(0,e.jsx)(t._H,{id:"TestSuite.domain.name"}),width:300,fixed:"left",dataIndex:"name",ellipsis:{showTitle:!1},filterDropdown:function(k){var j=k.confirm;return(0,e.jsx)(ln.Z,{confirm:j,autoFocus:ee,onConfirm:function(ue){return U((0,o.Z)((0,o.Z)({},C),{},{name:ue}))}})},onFilterDropdownVisibleChange:function(k){k&&T(!ee)},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:C.name?"#1890ff":void 0}})},render:function(k,j){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:j.name},children:(0,e.jsx)(hn(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[C.name||""],autoEscape:!0,textToHighlight:j.name.toString()})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),width:170,dataIndex:"gmt_created",sorter:!0,render:function(k,j){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:j.gmt_created})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),width:170,dataIndex:"gmt_modified",sorter:!0,render:function(k,j){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:j.gmt_modified})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),width:100,dataIndex:"creator",filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:C.creator?"#1890ff":void 0}})},filterDropdown:function(k){var j=k.confirm;return(0,e.jsx)(qt.Z,{confirm:j,onConfirm:function(ue){U((0,o.Z)((0,o.Z)({},C),{},{creator:ue}))}})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.update_user"}),width:100,dataIndex:"update_user",filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:C.update_user?"#1890ff":void 0}})},filterDropdown:function(k){var j=k.confirm;return(0,e.jsx)(qt.Z,{confirm:j,onConfirm:function(ue){return U((0,o.Z)((0,o.Z)({},C),{},{update_user:ue}))}})},render:function(k,j){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:j.update_user||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(k,j){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:j.description||"-"})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),key:"domain_conf",width:130,fixed:"right",render:function(k,j){return(0,e.jsxs)(Ke.Z,{size:"small",children:[(0,e.jsx)("span",{className:zn().fail_detail_operation,onClick:function(){return Fe(j)},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(Jt.Z,{title:(0,e.jsx)("div",{style:{color:"red"},children:(0,e.jsx)(t._H,{id:"TestConf.Suite/Conf.delete.warning"})}),onCancel:function(){var ue=Te(j),se=ue.next();se.value.then(function(xe){var be=xe.code,Be=xe.msg;K(be,Be)})},okText:(0,e.jsx)(t._H,{id:"operation.cancel"}),cancelText:(0,e.jsx)(t._H,{id:"operation.confirm.delete"}),icon:(0,e.jsx)(gt.Z,{style:{color:"red"}}),children:(0,e.jsx)("span",{className:zn().fail_detail_operation,children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],Fe=function(k){var j;(j=z.current)===null||j===void 0||j.show("edit",k)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(lt.Z,{spinning:Z,children:[(0,e.jsx)(st.Z,{size:"small",onChange:function(k,j,ae){var ue=ae.order,se=ae.field;switch(ue){case void 0:if(se==="gmt_created")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_created:void 0}));if(se==="gmt_modified")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_modified:void 0}));case"descend":if(se==="gmt_created")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_created:"-gmt_created"}));if(se==="gmt_modified")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_modified:"-gmt_modified"}));break;case"ascend":if(se==="gmt_created")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_created:"+gmt_created"}));if(se==="gmt_modified")return U((0,o.Z)((0,o.Z)({},C),{},{gmt_modified:"+gmt_modified"}));break;default:break}},columns:fe,dataSource:le.data,rowKey:function(k){return k.id+""},pagination:!1}),le.total&&(0,e.jsxs)($e.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,e.jsx)("div",{children:r({id:"pagination.total.strip"},{data:le.total||0})}),(0,e.jsx)(vt.Z,{showQuickJumper:!0,showSizeChanger:!0,size:"small",current:C.page_num,defaultCurrent:1,onChange:function(k,j){return _e(k,j)},onShowSizeChange:function(k,j){return _e(k,j)},total:le.total})]})]}),(0,e.jsx)(Fr,{ref:z,onOk:je})]})},Ar=(0,n.forwardRef)(Lr),Br=a(9173),Kr=a.n(Br),$r=(0,n.forwardRef)(function(I,D){var p=(0,t.YB)(),u=p.formatMessage,r=W.Z.useForm(),f=(0,l.Z)(r,1),m=f[0],Z=(0,n.useState)(!1),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)(!1),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)(""),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)({}),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useState)({status:!0,message:""}),_e=(0,l.Z)(je,2),Te=_e[0],K=_e[1];(0,n.useImperativeHandle)(D,function(){return{show:function(j){F(!0),Q(u(j?{id:"TestSuite.edit.business"}:{id:"TestSuite.new.business"})),U(j),m.setFieldsValue(j)}}});var fe=function(){m.resetFields(),B(!1),F(!1),K({status:!0,message:""})},Fe=function(j,ae,ue){j===200?(L.default.success(u({id:"operation.success"})),F(!1),m.resetFields(),I.callback()):j===201?K({status:!1,message:u({id:"TestSuite.business.name.already.exists"})}):L.default.error(ae||u({id:"operation.failed"}))},te=function(){m.validateFields().then(function(){var j=(0,A.Z)((0,c.Z)().mark(function ae(ue){var se,xe,be,Be,Me,Ze;return(0,c.Z)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(B(!0),!(C&&C.id)){pe.next=10;break}return pe.next=4,(0,ge.qJ)((0,o.Z)({id:C.id},ue));case 4:se=pe.sent,xe=se.code,be=se.msg,Fe(xe,be,"edit"),pe.next=16;break;case 10:return pe.next=12,(0,ge.sB)((0,o.Z)({},ue));case 12:Be=pe.sent,Me=Be.code,Ze=Be.msg,Fe(Me,Ze,"add");case 16:B(!1);case 17:case"end":return pe.stop()}},ae)}));return function(ae){return j.apply(this,arguments)}}()).catch(function(j){var ae;B(!1),j==null||(ae=j.errorFields)===null||ae===void 0||ae.forEach(function(ue){ue.name[0]==="name"&&K({status:!1,message:ue.errors[0]})})})};return(0,e.jsx)(at.Z,{className:Kr().addBusiness_drawer,title:z,maskClosable:!0,keyboard:!1,width:"375",onClose:fe,visible:$,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:fe,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{type:"primary",disabled:S||!Te.status,onClick:te,children:C&&C.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(W.Z,{form:m,layout:"vertical",children:[(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),name:"name",validateStatus:Te.status?void 0:"error",help:!Te.status&&Te.message,rules:[{required:!0}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:u({id:"please.enter"}),onChange:function(j){if(!j.target.value)K({status:!1,message:u({id:"TestSuite.business.name.cannot.be.empty"})});else{K({status:!0,message:""});var ae=j.target.value;ae.match(/^[A-Za-z0-9\._-]+$/g)&&ae.length<=32||K({status:!1,message:u({id:"please.enter.message"})})}},allowClear:!0})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.description"}),name:"description",rules:[{required:!1},{max:500,message:u({id:"TestSuite.description.message"})}],children:(0,e.jsx)(Ne.Z.TextArea,{placeholder:u({id:"TestSuite.please.enter.description"})})})]})})}),zr=a(25399),dn=a.n(zr),un=a(26388),Nr=a(41342),At=a.n(Nr),Vr=(0,n.forwardRef)(function(I,D){var p,u=(0,t.YB)(),r=u.formatMessage,f=W.Z.useForm(),m=(0,l.Z)(f,1),Z=m[0],re=(0,n.useState)(!1),S=(0,l.Z)(re,2),B=S[0],ee=S[1],T=(0,n.useState)(!1),$=(0,l.Z)(T,2),F=$[0],le=$[1],J=(0,n.useState)(""),z=(0,l.Z)(J,2),Q=z[0],ce=z[1],oe=(0,n.useState)({}),C=(0,l.Z)(oe,2),U=C[0],je=C[1],_e=(0,n.useState)({status:!0,message:""}),Te=(0,l.Z)(_e,2),K=Te[0],fe=Te[1],Fe=(0,n.useState)(!0),te=(0,l.Z)(Fe,2),k=te[0],j=te[1],ae=(0,n.useState)([]),ue=(0,l.Z)(ae,2),se=ue[0],xe=ue[1],be=(0,n.useState)(null),Be=(0,l.Z)(be,2),Me=Be[0],Ze=Be[1];(0,n.useImperativeHandle)(D,function(){return{show:function(h){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le(!0),ce(h),je(i),i.id){var s,d=(s=JSON.parse(i.var))===null||s===void 0?void 0:s.map(function(w,ve){return(0,o.Z)({id:ve+1},w)});Array.isArray(d)&&d.length?xe(d):G(),Ze(i.ci_type);var R=b(i);Z.setFieldsValue(R)}else G()}}});var He=function(){Z.resetFields(),ee(!1),le(!1),ce(""),je({}),fe({status:!0,message:""}),xe([]),Ze(null)},pe=function(){He()},Oe=function(h,i,s){h===200?(He(),L.default.success(r({id:"operation.success"})),I.callback({type:s})):L.default.error(i||r({id:"operation.failed"}))},we=function(){Z.validateFields().then(function(){var h=(0,A.Z)((0,c.Z)().mark(function i(s){var d,R,w,ve,Le;return(0,c.Z)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(ee(!0),d=I.confIds,!(d!=null&&d.length)){Ee.next=13;break}return R=(0,o.Z)((0,o.Z)({case_id_list:d.join()},s),{},{domain_list_str:s.domain_list_str.join()}),Ee.next=6,(0,ge.F8)((0,o.Z)({},R));case 6:if(Ee.t0=Ee.sent,Ee.t0){Ee.next=9;break}Ee.t0={};case 9:w=Ee.t0,ve=w.code,Le=w.msg,Oe(ve,Le,"editAll");case 13:case"end":return Ee.stop()}},i)}));return function(i){return h.apply(this,arguments)}}()).catch(function(h){ee(!1)})},Ie=function(){Z.validateFields().then(function(){var h=(0,A.Z)((0,c.Z)().mark(function i(s){var d,R,w,ve,Le,ye,Ee,Tt,yt,xt,Dt;return(0,c.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(ee(!0),d=I.test_suite_id,R={},w=me(),Object.keys(s).forEach(function(q){!q.match(/^name[0-9]+$/)&&!q.match(/^val[0-9]+$/)&&!q.match(/^des[0-9]+$/)&&(R[q]=s[q])}),ve=(0,o.Z)((0,o.Z)({test_suite_id:d},R),{},{domain_list_str:s.domain_list_str.join(),var:JSON.stringify(w)}),Le=U.id,!Le){N.next=16;break}return N.next=10,(0,ge.qK)((0,o.Z)({id:Le},ve));case 10:ye=N.sent,Ee=ye.code,Tt=ye.msg,Oe(Ee,Tt,"edit"),N.next=22;break;case 16:return N.next=18,(0,ge.co)((0,o.Z)({},ve));case 18:yt=N.sent,xt=yt.code,Dt=yt.msg,Oe(xt,Dt,"add");case 22:ee(!1);case 23:case"end":return N.stop()}},i)}));return function(i){return h.apply(this,arguments)}}()).catch(function(h){var i;ee(!1),h==null||(i=h.errorFields)===null||i===void 0||i.forEach(function(s){s.name[0]==="name"&&fe({status:!1,message:s.errors[0]})})})},Se=function(){j(!k);var h=Re();Z.setFieldsValue({var:JSON.stringify(h,null,4)})},Re=function(){var h=Z.getFieldsValue(!0);return se.map(function(i){return{name:h["name".concat(i.id)]||"",val:h["val".concat(i.id)]||"",des:h["des".concat(i.id)]||""}})},me=function(){var h=Z.getFieldsValue(!0);return se==null?void 0:se.filter(function(i){return h["name".concat(i.id)]}).map(function(i){return{name:h["name".concat(i.id)],val:h["val".concat(i.id)]||"",des:h["des".concat(i.id)]||""}})},b=function(){var h,i,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d={};return(h=JSON.parse(s.var))===null||h===void 0||h.forEach(function(R,w){d["name".concat(w+1)]=R.name,d["val".concat(w+1)]=R.val,d["des".concat(w+1)]=R.des}),(0,o.Z)((0,o.Z)({},s),{},{domain_list_str:((i=s.domain_id_list)===null||i===void 0?void 0:i.split(",").map(function(R){return Number(R)}))||[]},d)},ne=function(h,i,s){try{var d=JSON.parse(i);if(Object.prototype.toString.call(d)==="[object Array]"){for(var R=d.length,w=0;w<R;w++)if(Object.prototype.toString.call(d[w])!=="[object Object]"){s(r({id:"TestSuite.data.format.error"}));return}}else{s(r({id:"TestSuite.data.format.error"}));return}}catch(ve){s(r({id:"TestSuite.data.format.error"}));return}s()},G=function(){var h=se.length,i=h&&se[h-1].id||0,s={id:++i,name:"",val:"",des:""},d=se.concat([s]);xe(d)},g=function(h){if(se.length>1){var i,s=se.filter(function(d){return d.id!==h});xe(s),Z.setFieldsValue((i={},(0,un.Z)(i,"name".concat(h),void 0),(0,un.Z)(i,"val".concat(h),void 0),(0,un.Z)(i,"des".concat(h),void 0),i))}},_=function(h){Ze(h)},X=(0,e.jsxs)("div",{children:[(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),name:"ci_type",rules:[{required:!0,message:r({id:"TestSuite.ci_type.message"})}],extra:Me==="kernel_install"?(0,e.jsx)("div",{className:At().CI_Config_Extra,children:(0,e.jsx)(t._H,{id:"only.installs.the.kernel"})}):void 0,children:(0,e.jsx)(Je.Z,{placeholder:r({id:"TestSuite.ci_type.message"}),onChange:_,children:[{value:"aone"},{value:"jenkins"},{value:"kernel_install"},{value:"script"}].map(function(v){return(0,e.jsx)(Je.Z.Option,{value:v.value,children:v.value},v.value)})})}),(0,e.jsxs)("div",{className:At().ciTypeElement,children:[Me==="aone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:r({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-Pipeline id",name:"pipeline_id",rules:[{required:!0,message:r({id:"TestSuite.pipeline_id.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.pipeline_id.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-ClientKey",name:"user",rules:[{required:!0,message:r({id:"TestSuite.ClientKey.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.ClientKey.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-AccessSecret",name:"token",rules:[{required:!0,message:r({id:"TestSuite.AccessSecret.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.AccessSecret.message"}),autoComplete:"off"})})]}),Me==="jenkins"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:r({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-Project Name",name:"project_name",rules:[{required:!0,message:r({id:"TestSuite.project_name.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.project_name.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-User",name:"user",rules:[{required:!0,message:r({id:"TestSuite.User.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.User.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-ApiToken",name:"token",rules:[{required:!0,message:r({id:"TestSuite.ApiToken.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.ApiToken.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-BuildParams",name:"params",rules:[{required:!0,message:r({id:"TestSuite.BuildParams.message"})}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:r({id:"TestSuite.BuildParams.message"})})})]}),Me==="script"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z.Item,{label:"-Host",name:"host",rules:[{required:!0,message:r({id:"TestSuite.host.message"})}],children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.host.message"}),autoComplete:"off"})}),(0,e.jsx)(W.Z.Item,{label:"-BuildParams(script)",name:"params",rules:[{required:!0,message:r({id:"TestSuite.BuildParams(script).message"})}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:r({id:"TestSuite.BuildParams(script).message"})})})]})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"0 -24px 20px"}})]});return(0,e.jsx)(at.Z,{className:At().addConf_drawer,title:(0,e.jsx)(t._H,{id:"confDrawer.title.".concat(Q)}),maskClosable:!0,keyboard:!1,width:"375",onClose:pe,open:F,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:pe,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{type:"primary",disabled:B||!K.status,onClick:U.editAll?we:Ie,children:U!=null&&U.name||U.editAll?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(W.Z,{layout:"vertical",form:Z,children:[!U.editAll&&(0,e.jsx)(W.Z.Item,{label:"Test Conf",name:"name",validateStatus:K.status?void 0:"error",help:!K.status&&K.message,rules:[{required:!0}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"TestConf.name.placeholder"}),onChange:function(h){if(!h.target.value)fe({status:!1,message:r({id:"TestConf.name.cannot.be.empty"})});else{fe({status:!0,message:""});var i=h.target.value;i.match(/^[A-Za-z0-9\._-]+$/g)&&i.length<=32||fe({status:!1,message:r({id:"please.enter.message"})})}}})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),mode:"multiple",getPopupContainer:function(h){return h.parentNode},children:I==null||(p=I.domainList)===null||p===void 0?void 0:p.map(function(v){return(0,e.jsx)(Je.Z.Option,{value:v.id,children:v.name},v.id)})})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),name:"timeout",rules:[{required:!0,message:r({id:"TestSuite.timeout.message"})}],children:(0,e.jsx)(Lt.Z,{style:{width:"100%"},min:0,step:1,placeholder:r({id:"please.enter"})})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.repeat"}),name:"repeat",rules:[{required:!0,message:r({id:"TestSuite.repeat.message"})}],children:(0,e.jsx)(Lt.Z,{style:{width:"100%"},min:0,step:1,placeholder:r({id:"please.enter"})})}),!U.editAll&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:At().variableLabel,children:[(0,e.jsx)(t._H,{id:"TestSuite.var"}),(0,e.jsx)("span",{className:At().Bulk_btn,onClick:Se,children:k?"Bulk Edit":"Key-Value Edit"})]}),k?(0,e.jsxs)(e.Fragment,{children:[se.map(function(v,h){return(0,e.jsxs)($e.Z,{children:[(0,e.jsxs)(it.Z,{span:8,className:At().flexStart,children:[(0,e.jsx)(W.Z.Item,{name:"name".concat(v.id),children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.variable.name"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:"="})]}),(0,e.jsxs)(it.Z,{span:8,className:At().flexStart,children:[(0,e.jsx)(W.Z.Item,{name:"val".concat(v.id),children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.default"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,padding:"0px 8px"},children:","})]}),(0,e.jsxs)(it.Z,{span:8,className:At().flexStart,children:[(0,e.jsx)(W.Z.Item,{name:"des".concat(v.id),children:(0,e.jsx)(Ne.Z,{placeholder:r({id:"TestSuite.var.desc"}),autoComplete:"off"})}),(0,e.jsx)("span",{style:{marginTop:5,paddingLeft:"8px"},children:se.length>1?(0,e.jsx)(Bn.Z,{onClick:function(){return g(v.id)},style:{color:"#f00"}}):(0,e.jsx)(e.Fragment,{children:"\u2003"})})]})]},h)}),(0,e.jsxs)("a",{onClick:G,children:["+ ",(0,e.jsx)(t._H,{id:"TestSuite.var.add"})]})]}):(0,e.jsx)(W.Z.Item,{name:"var",rules:[{validator:ne}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:4,style:{width:"100%"},placeholder:r({id:"TestSuite.format:key=value"})})})]}),(0,e.jsx)("div",{style:{height:10,backgroundColor:"#f5f5f5",margin:"20px -24px"}}),(I==null?void 0:I.test_type)==="business"?X:null,(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"description",children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:r({id:"TestSuite.desc.placeholder.s"})})})]})]})})}),Wr=a(40689),Nn=a.n(Wr),Ur=(0,n.forwardRef)(function(I,D){var p=I.suite_id,u=I.test_type,r=I.domainList,f=(0,t.YB)(),m=f.formatMessage,Z=(0,n.useState)(!1),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)([]),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)([]),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useRef)(null),_e=(0,n.useState)({visible:!1,success:"",action:""}),Te=(0,l.Z)(_e,2),K=Te[0],fe=Te[1],Fe=(0,n.useState)({}),te=(0,l.Z)(Fe,2),k=te[0],j=te[1],ae=(0,n.useState)(!1),ue=(0,l.Z)(ae,2),se=ue[0],xe=ue[1],be=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(s){var d,R,w,ve;return(0,c.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return B(!0),ye.prev=1,ye.next=4,(0,ge.Rd)((0,o.Z)({suite_id:p},s));case 4:d=ye.sent,R=d||{},w=R.code,ve=R.msg,w===200?F(d):L.default.error(ve||m({id:"request.failed"})),B(!1),ye.next=13;break;case 10:ye.prev=10,ye.t0=ye.catch(1),B(!1);case 13:case"end":return ye.stop()}},i,null,[[1,10]])}));return function(s){return h.apply(this,arguments)}}(),Be=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(){var s,d,R,w,ve;return(0,c.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return xe(!0),ye.prev=1,ye.next=4,(0,ge.tz)(k.id);case 4:if(ye.t0=ye.sent,ye.t0){ye.next=7;break}ye.t0={};case 7:s=ye.t0,d=s.code,R=s.msg,d===200?(L.default.success(m({id:"request.delete.success"})),C.includes(k.id)&&(w=C.filter(function(Ee){return Ee!==k.id}),ve=z.filter(function(Ee){return Ee.id!==k.id}),U(w),Q(ve)),pe(),be({page_num:$.page_num,page_size:$.page_size})):L.default.error(R||m({id:"request.delete.failed"})),xe(!1),ye.next=18;break;case 14:ye.prev=14,ye.t1=ye.catch(1),console.log(ye.t1),xe(!1);case 18:case"end":return ye.stop()}},i,null,[[1,14]])}));return function(){return h.apply(this,arguments)}}(),Me=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(){var s,d,R;return(0,c.Z)().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,ge.TZ)({id_list:C.join()});case 2:if(ve.t0=ve.sent,ve.t0){ve.next=5;break}ve.t0={};case 5:s=ve.t0,d=s.code,R=s.msg,d===200?(Q([]),U([]),pe(),be({page_num:1,page_size:$.page_size})):L.default.error(R||m({id:"operation.batch.delete.failed"}));case 9:case"end":return ve.stop()}},i)}));return function(){return h.apply(this,arguments)}}(),Ze=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(){var s,d,R,w,ve;return(0,c.Z)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(s=K.action,d=[],z.map(function(Ee){return d.push(Ee.name)}),s!="multiple"){ye.next=9;break}return ye.next=6,(0,dt.MR)({name:d.join(","),id:C.join(",")});case 6:R=ye.sent,ye.next=13;break;case 9:return w=k.name,ve=k.id,ye.next=12,(0,dt.MR)({name:w,id:ve});case 12:R=ye.sent;case 13:R&&window.open("/refenerce/conf/?pk=".concat(R));case 14:case"end":return ye.stop()}},i)}));return function(){return h.apply(this,arguments)}}();(0,n.useEffect)(function(){be({page_num:1,page_size:$.page_size})},[]),(0,n.useImperativeHandle)(D,function(){return{refresh:function(i){var s,d=i.refreshId;p===d&&($==null||(s=$.data)===null||s===void 0?void 0:s.length)===0&&be({page_num:1,page_size:$.page_size})}}});var He=function(i,s,d){i.code===200?fe({visible:!0,success:200,action:d}):i.code===201&&fe({visible:!0,success:201,action:d}),j(s)},pe=function(){fe({visible:!1,success:"",action:""}),j({})},Oe=function(){K.action==="single"?Be():K.action==="multiple"&&Me()},we=function(i){var s=i.type,d=i.record,R=d===void 0?{}:d;if(s==="add"){var w;(w=je.current)===null||w===void 0||w.show("new",(0,o.Z)({},R))}else if(s==="edit"){var ve;(ve=je.current)===null||ve===void 0||ve.show("edit",(0,o.Z)({},R))}},Ie=function(i){i.type==="editAll"&&(Q([]),U([])),be({page_num:1,page_size:$.page_size})},Se=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(s){var d,R,w;return(0,c.Z)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return d=s.record,R=d===void 0?{}:d,Le.prev=1,Le.next=4,(0,Pt.Ob)({flag:"pass",case_id_list:R.id});case 4:if(Le.t0=Le.sent,Le.t0){Le.next=7;break}Le.t0={};case 7:w=Le.t0,w.code&&He(w,R,"single"),Le.next=14;break;case 11:Le.prev=11,Le.t1=Le.catch(1),console.log(Le.t1);case 14:case"end":return Le.stop()}},i,null,[[1,11]])}));return function(s){return h.apply(this,arguments)}}(),Re=function(){var h=(0,A.Z)((0,c.Z)().mark(function i(){var s;return(0,c.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,(0,Pt.Ob)({flag:"pass",case_id_list:C.join()});case 3:if(R.t0=R.sent,R.t0){R.next=6;break}R.t0={};case 6:s=R.t0,s.code&&He(s,{},"multiple"),R.next=13;break;case 10:R.prev=10,R.t1=R.catch(0),console.log(R.t1);case 13:case"end":return R.stop()}},i,null,[[0,10]])}));return function(){return h.apply(this,arguments)}}(),me=function(){je.current.show("batch.edit",{editAll:!0})},b=[{title:"Test Conf",dataIndex:"name",fixed:"left",width:150,render:function(i){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:i})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(i){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:i})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:150,render:function(i){return(0,e.jsx)("span",{children:i||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),dataIndex:"repeat",width:110,render:function(i){return(0,e.jsx)("span",{children:i||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.ci_type"}),dataIndex:"ci_type",width:110,render:function(i){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:i})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(i){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:i?dn()(i).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"description",width:200,render:function(i){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:i})}},{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return we({type:"add"})},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),key:"operation",width:150,fixed:"right",render:function(i,s){return(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return we({type:"edit",record:s})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return Se({record:s})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],ne=function(i,s){be({page_num:i,page_size:s})},G={selectedRowKeys:C,onChange:function(i,s){Q(s),U(i)}},g=$.data,_=$.total,X=$.page_num,v=$.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)($t.Z,{className:Nn().confList_root,columns:b,name:"sys-suite-bussiness-conf",refreshDeps:[C],dataSource:g,loading:S,rowKey:"id",page:X,pageSize:v,total:_,handlePage:ne,rowSelection:G,scroll:{x:1100},paginationBottom:!0}),(0,e.jsx)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:K.visible,onCancel:pe,width:["",201].includes(K.success)?300:600,maskClosable:!1,footer:[(0,e.jsx)(V.Z,{onClick:Oe,loading:se,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:pe,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(K.success)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4}}),K.action==="single"?m({id:"TestSuite.conf.name.delete.warning"},{data:k.name}):m({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:Ze,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),C.length>0&&(0,e.jsxs)("div",{className:Nn().deleteAll,children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Et.Z,{indeterminate:!0}),(0,e.jsx)(nt.Z.Text,{children:m({id:"selected.item"},{data:C==null?void 0:C.length})}),(0,e.jsx)(V.Z,{type:"link",onClick:function(){Q([]),U([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:Re,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(V.Z,{type:"primary",onClick:me,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]}),(0,e.jsx)(Vr,{ref:je,callback:Ie,test_suite_id:p,test_type:u,domainList:r,confIds:C})]})}),Yr=a(76766),Vn=a.n(Yr),Gr=(0,n.forwardRef)(function(I,D){var p,u=(0,t.YB)(),r=u.formatMessage,f=W.Z.useForm(),m=(0,l.Z)(f,1),Z=m[0],re=(0,n.useState)(!1),S=(0,l.Z)(re,2),B=S[0],ee=S[1],T=(0,n.useState)(!1),$=(0,l.Z)(T,2),F=$[0],le=$[1],J=(0,n.useState)(""),z=(0,l.Z)(J,2),Q=z[0],ce=z[1],oe=(0,n.useState)({}),C=(0,l.Z)(oe,2),U=C[0],je=C[1],_e=(0,n.useState)({status:!0,message:""}),Te=(0,l.Z)(_e,2),K=Te[0],fe=Te[1],Fe=(0,n.useState)(""),te=(0,l.Z)(Fe,2),k=te[0],j=te[1],ae=(0,n.useState)(!1),ue=(0,l.Z)(ae,2),se=ue[0],xe=ue[1],be=(0,n.useState)([]),Be=(0,l.Z)(be,2),Me=Be[0],Ze=Be[1],He=[{id:"Type1",name:r({id:"TestSuite.view_type.type1"})},{id:"Type2",name:r({id:"TestSuite.view_type.type2"})},{id:"Type3",name:r({id:"TestSuite.view_type.type3"})}],pe=function(){var g=(0,A.Z)((0,c.Z)().mark(function _(){var X,v,h,i,s,d=arguments;return(0,c.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return X=d.length>0&&d[0]!==void 0?d[0]:"",xe(!0),w.prev=2,w.next=5,(0,ge.fP)({keyword:X,scope:"aligroup"});case 5:if(w.t0=w.sent,w.t0){w.next=8;break}w.t0={};case 8:v=w.t0,h=v.code,i=v.data,s=i===void 0?[]:i,h===200&&Ze(s),xe(!1),w.next=19;break;case 16:w.prev=16,w.t1=w.catch(2),xe(!1);case 19:case"end":return w.stop()}},_,null,[[2,16]])}));return function(){return g.apply(this,arguments)}}();(0,n.useImperativeHandle)(D,function(){return{show:function(_){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};le(!0),ce(_),je(X);var v=Oe(X);j(X.test_type),Z.setFieldsValue(v),pe()}}});var Oe=function(){var _,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,o.Z)((0,o.Z)({},X),{},{domain_list_str:((_=X.domain_id_list)===null||_===void 0?void 0:_.split(",").map(function(v){return Number(v)}))||[]})},we=function(){Z.resetFields(),ee(!1),le(!1),ce(""),je({}),fe({status:!0,message:""})},Ie=function(_,X,v){_===200?(L.default.success(r({id:"operation.success"})),we(),I.callback({type:"suite"})):L.default.error(X||r({id:"operation.failed"}))},Se=function(){ee(!0),Z.validateFields().then(function(){var _=(0,A.Z)((0,c.Z)().mark(function X(v){var h,i,s,d,R,w,ve,Le;return(0,c.Z)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(h=U.business_id,i=U.id,!i){Ee.next=10;break}return Ee.next=4,(0,ge.Fu)(i,(0,o.Z)((0,o.Z)({},v),{},{domain_list_str:v.domain_list_str.join()}));case 4:s=Ee.sent,d=s.code,R=s.msg,Ie(d,R,"edit"),Ee.next=16;break;case 10:return Ee.next=12,(0,ge.SS)((0,o.Z)((0,o.Z)({business_id:h},v),{},{domain_list_str:v.domain_list_str.join()}));case 12:w=Ee.sent,ve=w.code,Le=w.msg,Ie(ve,Le,"add");case 16:ee(!1);case 17:case"end":return Ee.stop()}},X)}));return function(X){return _.apply(this,arguments)}}()).catch(function(_){var X;ee(!1),_==null||(X=_.errorFields)===null||X===void 0||X.forEach(function(v){v.name[0]==="name"&&fe({status:!1,message:v.errors[0]})})})},Re=function(){we()},me=function(){var g=(0,A.Z)((0,c.Z)().mark(function _(X,v){var h,i;return(0,c.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return h=U.id?{suite_id:U.id}:{},d.next=3,(0,ge.$X)((0,o.Z)({suite_name:X,test_type:v},h));case 3:if(d.t0=d.sent,d.t0){d.next=6;break}d.t0={};case 6:i=d.t0,i.code===200?fe({status:!0,message:""}):fe({status:!1,message:i.msg});case 8:case"end":return d.stop()}},_)}));return function(X,v){return g.apply(this,arguments)}}(),b=function(_){var X=_.target.value.replace(/\s+/g,"");!X||!k||!K.status||me(X,k)},ne=function(){var g=(0,A.Z)((0,c.Z)().mark(function _(X){return(0,c.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:X&&pe(X);case 1:case"end":return h.stop()}},_)}));return function(X){return g.apply(this,arguments)}}(),G=function(_){j(_);var X=Z.getFieldValue("name");X&&K.status&&me(X,_)};return(0,e.jsx)(at.Z,{className:Vn().addConf_drawer,title:Q,maskClosable:!0,keyboard:!1,width:"375",onClose:Re,visible:F,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:Re,children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{type:"primary",disabled:B||!K.status,onClick:Se,children:U&&U.name?(0,e.jsx)(t._H,{id:"operation.update"}):(0,e.jsx)(t._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(W.Z,{layout:"vertical",form:Z,children:[(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),name:"test_type",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),onChange:G,getPopupContainer:function(_){return _.parentNode},children:dt.oQ.map(function(g){return(0,e.jsx)(Je.Z.Option,{value:g.value,children:r({id:g.value})},g.value)})})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.name"}),name:"name",validateStatus:K.status?void 0:"error",help:!K.status&&K.message,rules:[{required:!0}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:r({id:"TestSuite.name.placeholder"}),onBlur:b,onChange:function(_){if(!_.target.value)fe({status:!1,message:r({id:"TestSuite.name.cannot.be.empty"})});else{fe({status:!0,message:""});var X=_.target.value;X.match(/^[A-Za-z0-9\._-]+$/g)&&X.length<=32||fe({status:!1,message:r({id:"please.enter.message"})})}}})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),name:"domain_list_str",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),mode:"multiple",getPopupContainer:function(_){return _.parentNode},children:I==null||(p=I.domainList)===null||p===void 0?void 0:p.map(function(g){return(0,e.jsx)(Je.Z.Option,{value:g.id,children:g.name},g.id)})})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),name:"run_mode",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),children:dt.ur.map(function(g){return(0,e.jsx)(Je.Z.Option,{value:g.id,children:r({id:g.id})||"-"},g.id)})})}),k==="performance"&&(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.view_type"}),name:"view_type",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{placeholder:r({id:"please.select"}),children:He.map(function(g,_){return(0,e.jsx)(Je.Z.Option,{value:g.id,children:g.name},g.id)})})}),(k==="functional"||k==="performance")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(yn.Z,{}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),initialValue:1,name:"is_default",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsxs)(rt.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),"\xA0",(0,e.jsx)(An.Z,{overlayClassName:Vn().cer_tips,content:(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.is_certified.ps"})})}),placement:"bottomLeft",destroyTooltipOnHide:!0,children:(0,e.jsx)(Ht.Z,{})})]}),initialValue:0,name:"certificated",rules:[{required:!0,message:r({id:"please.select"})}],children:(0,e.jsxs)(rt.ZP.Group,{children:[(0,e.jsxs)(rt.ZP,{value:1,children:[(0,e.jsx)(t._H,{id:"operation.yes"})," "]}),(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"operation.no"})})]})})]}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),name:"doc",rules:[{required:!1}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:r({id:"TestSuite.desc.placeholder.s"})})}),(0,e.jsx)(W.Z.Item,{label:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),name:"description",rules:[{required:!1},{max:500,message:r({id:"TestSuite.remarks.message"})}],children:(0,e.jsx)(Ne.Z.TextArea,{rows:3,placeholder:r({id:"TestSuite.please.enter.remarks"})})})]})})}),Jr=a(58538),Qr=a.n(Jr),Xr=function(I){var D=I.onOk,p=(0,t.YB)(),u=p.formatMessage,r=(0,n.useState)(!1),f=(0,l.Z)(r,2),m=f[0],Z=f[1],re=function(z){F(0),Z(z)},S=function(){D($),Z(!1)},B=function(){Z(!0)},ee=(0,n.useState)(0),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=function(z){var Q=z.target;return F(Q.value)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(V.Z,{style:{padding:0},size:"small",type:"link",onClick:B,children:(0,e.jsx)(t._H,{id:"operation.delete"})}),(0,e.jsxs)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),okType:"danger",centered:!0,className:Qr().modalChange,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),visible:m,onOk:S,onCancel:function(){return re(!1)},width:480,maskClosable:!1,children:[(0,e.jsx)("p",{children:(0,e.jsx)(t._H,{id:"TestSuite.metric.delete.range"})}),(0,e.jsx)($e.Z,{style:{width:224,marginBottom:10},children:(0,e.jsxs)(rt.ZP.Group,{value:$,onChange:le,children:[(0,e.jsx)(rt.ZP,{value:0,children:(0,e.jsx)(t._H,{id:"TestSuite.delete.only"})}),(0,e.jsx)(rt.ZP,{value:1,children:(0,e.jsx)(t._H,{id:"TestSuite.synchronize.delete"})})]})})]})]})},qr=a(86811),Mt=a.n(qr),ea=(0,n.forwardRef)(function(I,D){var p=I.onOk,u=I.parentId,r=I.componentType,f=(0,t.YB)(),m=f.formatMessage,Z=(0,n.useState)(""),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)(!1),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=W.Z.useForm(),J=(0,l.Z)(le,1),z=J[0],Q=(0,n.useState)(""),ce=(0,l.Z)(Q,2),oe=ce[0],C=ce[1],U=(0,t.QT)(ge.Q9,{initialData:[],manual:!0}),je=U.data,_e=U.run;(0,n.useImperativeHandle)(D,function(){return{show:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=r==="suite"?{suite_id:u}:{case_id:u};_e(ue),B(j),F(!0),z.setFieldsValue((0,o.Z)((0,o.Z)({},ae),{},{direction:ae==="\u4E0A\u5347"?"increase":"decline"}))},hide:K}});var Te=function(){z.validateFields().then(function(j){p(j)}).catch(function(j){return console.log(j)})},K=function(){F(!1),C(""),z.resetFields()},fe=function(j){j&&C(j)},Fe=function(){if(oe){var j=z.getFieldValue("name")||[],ae=Array.from(new Set(j.concat(oe.split(","))));z.setFieldsValue({name:ae})}},te=function(){C(""),z.setFieldsValue({name:""})};return(0,e.jsx)(at.Z,{maskClosable:!1,keyboard:!1,className:Mt().warp,title:(0,e.jsx)(t._H,{id:"metricEditer.title.".concat(S)}),width:376,onClose:K,visible:$,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(V.Z,{onClick:K,style:{marginRight:8},children:(0,e.jsx)(t._H,{id:"operation.cancel"})}),(0,e.jsx)(V.Z,{onClick:Te,type:"primary",htmlType:"submit",children:S.indexOf("new")>-1?(0,e.jsx)(t._H,{id:"operation.ok"}):(0,e.jsx)(t._H,{id:"operation.update"})})]}),children:(0,e.jsxs)(W.Z,{layout:"vertical",form:z,children:[~S.indexOf("edit")?(0,e.jsx)(W.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"off",placeholder:m({id:"please.enter"})})}):(0,e.jsx)(W.Z.Item,{name:"name",label:"Metric",rules:[{required:!0,message:m({id:"please.select"})}],children:(0,e.jsx)(Je.Z,{mode:"multiple",allowClear:!0,onSearch:fe,onBlur:Fe,onClear:te,children:je.map(function(k){return(0,e.jsxs)(Je.Z.Option,{value:k.name,children:[k.name,k.unit?"\uFF08".concat(k.unit,"\uFF09"):null]},k.name)})})}),(0,e.jsx)(W.Z.Item,{name:"cmp_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Lt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:m({id:"please.enter"})})}),(0,e.jsx)(W.Z.Item,{name:"cv_threshold",label:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),rules:[{required:!0,message:m({id:"please.enter"})}],children:(0,e.jsx)(Lt.Z,{precision:2,style:{width:"100%"},min:0,step:1,placeholder:m({id:"please.enter"})})}),(0,e.jsx)(W.Z.Item,{name:"direction",label:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),rules:[{required:!0,message:m({id:"please.select"})}],children:(0,e.jsxs)(Je.Z,{placeholder:m({id:"please.select"}),children:[(0,e.jsx)(Je.Z.Option,{value:"increase",children:(0,e.jsx)(t._H,{id:"TestSuite.increase"})}),(0,e.jsx)(Je.Z.Option,{value:"decline",children:(0,e.jsx)(t._H,{id:"TestSuite.decline"})})]})})]})})}),ta=function(D){var p=D.id,u=D.innerKey,r=D.componentType,f=(0,t.YB)(),m=f.formatMessage,Z=(0,n.useState)(1),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)(10),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)([]),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)(!0),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useState)(),_e=(0,l.Z)(je,2),Te=_e[0],K=_e[1],fe=(0,n.useState)(),Fe=(0,l.Z)(fe,2),te=Fe[0],k=Fe[1],j=(0,n.useState)(new Date().getTime()),ae=(0,l.Z)(j,2),ue=ae[0],se=ae[1],xe=(0,n.useRef)(null),be=(0,t.QT)(ge.ge,{initialData:[]}),Be=be.data,Me=function(){var me=(0,A.Z)((0,c.Z)().mark(function b(ne,G){var g,_;return(0,c.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return Q({data:[]}),U(!0),g={page_num:S,page_size:$},g[G]=ne,v.next=6,(0,ge.b2)(g);case 6:_=v.sent,Q(_),U(!1);case 9:case"end":return v.stop()}},b)}));return function(ne,G){return me.apply(this,arguments)}}();(0,n.useEffect)(function(){Me(p,u=="1"?"case_id":"suite_id")},[S,$,ue]);var Ze=function(b,ne){K(b),Be.forEach(function(G){G.name==ne.domain&&(ne.domain=G.id)}),k(ne.id),xe.current.show("edit",ne)},He=function(){var me=(0,A.Z)((0,c.Z)().mark(function b(ne){var G;return(0,c.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:G=(0,o.Z)((0,o.Z)({},ne),{object_id:Te,object_type:u==1?"case":"suite"}),u==1?Oe(G):pe(G);case 2:case"end":return _.stop()}},b)}));return function(ne){return me.apply(this,arguments)}}(),pe=function(b){var ne=m({id:"TestSuite.is_synchronize.all.conf"}),G=m({id:"operation.yes"}),g=m({id:"operation.no"});_t.Z.confirm({title:ne,icon:(0,e.jsx)(gt.Z,{}),okText:G,cancelText:g,maskClosable:!1,onOk:function(){Oe((0,o.Z)((0,o.Z)({},b),{},{is_sync:1}))},onCancel:function(){Oe((0,o.Z)((0,o.Z)({},b),{},{is_sync:0}))}})},Oe=function(){var me=(0,A.Z)((0,c.Z)().mark(function b(ne){var G,g,_;return(0,c.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!te){v.next=6;break}return v.next=3,(0,ge.Of)(te,ne);case 3:v.t0=v.sent,v.next=9;break;case 6:return v.next=8,(0,ge.WM)(ne);case 8:v.t0=v.sent;case 9:G=v.t0,g=G.code,_=G.msg,g===200?(xe.current.hide(),se(new Date().getTime())):(0,dt.EV)(g,_);case 13:case"end":return v.stop()}},b)}));return function(ne){return me.apply(this,arguments)}}(),we=function(){var me=(0,A.Z)((0,c.Z)().mark(function b(ne,G){var g,_,X,v,h,i;return(0,c.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(g=ne.object_type,_=ne.object_id,X=ne.name,u!=1){d.next=7;break}return d.next=4,(0,ge.G6)(ne.id);case 4:d.t0=d.sent,d.next=10;break;case 7:return d.next=9,(0,ge.G6)(ne.id,{is_sync:G,object_id:_,object_type:g,name:X});case 9:d.t0=d.sent;case 10:v=d.t0,h=v.code,i=v.msg,h===200?(L.default.success(m({id:"operation.success"})),se(new Date().getTime())):(0,dt.EV)(h,i);case 14:case"end":return d.stop()}},b)}));return function(ne,G){return me.apply(this,arguments)}}(),Ie=function(b){K(b),k(void 0),xe.current.show("new")},Se=[{title:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"}),dataIndex:"name",width:300,fixed:"left"},{title:(0,e.jsx)(t._H,{id:"TestSuite.cmp_threshold"}),dataIndex:"cmp_threshold",width:130,render:function(b){return b&&Number(b).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.cv_threshold"}),dataIndex:"cv_threshold",width:130,render:function(b){return b&&Number(b).toFixed(2)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.direction"}),dataIndex:"direction",width:130},{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return Ie(p)},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"id",width:180,fixed:"right",render:function(b,ne){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return Ze(p,(0,o.Z)({},ne))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),u==1?(0,e.jsx)(Jt.Z,{title:(0,e.jsx)(t._H,{id:"delete.prompt"}),okText:(0,e.jsx)(t._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),onConfirm:function(){return we(ne)},overlayStyle:{width:"224px"},children:(0,e.jsx)(V.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,e.jsx)(t._H,{id:"operation.delete"})})}):(0,e.jsx)(Xr,{onOk:function(g){return we(ne,g)}})]})}}],Re=function(b,ne){B(b),F(ne)};return(0,e.jsxs)("div",{className:Mt().warp,children:[(0,e.jsx)($t.Z,{className:Mt().FuncOrPerfConfList_root,columns:Se,name:"sys-business-fun-or-per-conf-metric",loading:C,dataSource:z.data,page:z.page_num,totalPage:z.total_page,total:z.total,pageSize:z.page_size,handlePage:Re,paginationBottom:!0,scroll:{x:670}}),(0,e.jsx)(ea,{onOk:He,ref:xe,parentId:p,componentType:r})]},p)},Wn=ta,Un=ft.Z.TabPane,na=(0,n.forwardRef)(function(I,D){var p=I.id,u=I.type,r=I.domainList,f=(0,t.YB)(),m=f.formatMessage,Z=(0,n.useState)([]),re=(0,l.Z)(Z,2),S=re[0],B=re[1],ee=(0,n.useState)([]),T=(0,l.Z)(ee,2),$=T[0],F=T[1],le=(0,n.useState)("1"),J=(0,l.Z)(le,2),z=J[0],Q=J[1],ce=(0,n.useState)(!1),oe=(0,l.Z)(ce,2),C=oe[0],U=oe[1],je=(0,n.useState)(!1),_e=(0,l.Z)(je,2),Te=_e[0],K=_e[1],fe=(0,n.useState)({}),Fe=(0,l.Z)(fe,2),te=Fe[0],k=Fe[1],j=(0,n.useState)(1),ae=(0,l.Z)(j,2),ue=ae[0],se=ae[1],xe=(0,n.useState)(10),be=(0,l.Z)(xe,2),Be=be[0],Me=be[1],Ze=(0,n.useState)([]),He=(0,l.Z)(Ze,2),pe=He[0],Oe=He[1],we=(0,n.useState)(!0),Ie=(0,l.Z)(we,2),Se=Ie[0],Re=Ie[1],me=(0,n.useState)([]),b=(0,l.Z)(me,2),ne=b[0],G=b[1],g=(0,n.useRef)(null),_=(0,n.useRef)(null),X=(0,n.useState)(!1),v=(0,l.Z)(X,2),h=v[0],i=v[1];(0,n.useImperativeHandle)(D,function(){return{refresh:function(H){var O=H.refreshId;p===O&&s()}}});var s=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(){var O,M,x,de=arguments;return(0,c.Z)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return O=de.length>0&&de[0]!==void 0?de[0]:{},Oe({data:[]}),G([]),Re(!0),M=(0,o.Z)({suite_id:p,page_num:ue,page_size:Be},O),Pe.next=7,(0,ge.Sb)(M);case 7:x=Pe.sent,Oe(x),Re(!1);case 10:case"end":return Pe.stop()}},H)}));return function(){return ie.apply(this,arguments)}}(),d=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(){var O,M,x,de,ke;return(0,c.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,(0,ge.tz)(te.id);case 3:if(E.t0=E.sent,E.t0){E.next=6;break}E.t0={};case 6:O=E.t0,M=O.code,x=O.msg,M===200?(L.default.success(m({id:"request.delete.success"})),S.includes(te.id)&&(de=S.filter(function(y){return y!==te.id}),ke=$.filter(function(y){return y.id!==te.id}),B(de),F(ke)),U(!1),K(!1),k({}),s()):L.default.error(x||m({id:"request.delete.failed"})),E.next=15;break;case 12:E.prev=12,E.t1=E.catch(0),console.log(E.t1);case 15:case"end":return E.stop()}},H,null,[[0,12]])}));return function(){return ie.apply(this,arguments)}}(),R=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(){var O,M,x;return(0,c.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,(0,ge.TZ)({id_list:S.join()});case 2:if(ke.t0=ke.sent,ke.t0){ke.next=5;break}ke.t0={};case 5:O=ke.t0,M=O.code,x=O.msg,M===200?(F([]),B([]),U(!1),K(!1),s({page_num:1})):L.default.error(x||m({id:"operation.batch.delete.failed"}));case 9:case"end":return ke.stop()}},H)}));return function(){return ie.apply(this,arguments)}}();(0,n.useEffect)(function(){s()},[ue,Be,h]);var w=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(O,M){var x,de,ke,Pe,E,y,P,Y,Ce,Ge,Qe,pt,Xe;return(0,c.Z)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(x=O.test_suite_id,de=O.id,ke=(0,o.Z)({},O),!M){Ve.next=10;break}return Pe=(0,o.Z)((0,o.Z)({},ke),{case_id_list:S.join(",")}),Ve.next=6,(0,ge.fF)(Pe);case 6:B([]),F([]),Ve.next=59;break;case 10:if(E=ke.var,Object.prototype.toString.call(ke.var)!=="[object String]"){Ve.next=36;break}if(Ve.prev=12,y=JSON.parse(E),Object.prototype.toString.call(y)!=="[object Array]"){Ve.next=26;break}P=y.length,Y=0;case 17:if(!(Y<P)){Ve.next=24;break}if(Object.prototype.toString.call(y[Y])==="[object Object]"){Ve.next=21;break}return L.default.error(m({id:"TestSuite.data.format.error"})),Ve.abrupt("return");case 21:Y++,Ve.next=17;break;case 24:Ve.next=28;break;case 26:return L.default.error(m({id:"TestSuite.data.format.error"})),Ve.abrupt("return");case 28:Ve.next=34;break;case 30:return Ve.prev=30,Ve.t0=Ve.catch(12),L.default.error(m({id:"TestSuite.data.format.error"})),Ve.abrupt("return");case 34:Ve.next=39;break;case 36:Ce=[],E.map(function(Nt){Nt.name&&Ce.push(Nt)}),E=JSON.stringify(Ce);case 39:if(ke.var=E,Ge=(0,o.Z)((0,o.Z)({},ke),{test_suite_id:x}),!de){Ve.next=47;break}return Ve.next=44,(0,ge.Ft)(de,Ge);case 44:Ve.t1=Ve.sent,Ve.next=50;break;case 47:return Ve.next=49,(0,ge.C7)(Ge);case 49:Ve.t1=Ve.sent;case 50:if(Qe=Ve.t1,pt=Qe.code,Xe=Qe.msg,pt!=201){Ve.next=56;break}return L.default.error(m({id:"TestSuite.repeated.suite.name"})),Ve.abrupt("return");case 56:if(pt!=202){Ve.next=59;break}return L.default.error(Xe),Ve.abrupt("return");case 59:_.current.hide(),L.default.success(m({id:"operation.success"})),i(!h);case 62:case"end":return Ve.stop()}},H,null,[[12,30]])}));return function(O,M){return ie.apply(this,arguments)}}(),ve=function(H){H.var=H.var?JSON.parse(H.var):[{name:"",val:"",des:""}],H.is_default=H.is_default?1:0;for(var O=H.domain_id_list===""?[]:H.domain_id_list.split(","),M=[],x=0;x<O.length;x++)M.push(Number.parseInt(O[x]));H.domain_list_str=M,r.forEach(function(de){de.name==H.domain&&(H.domain=de.id)}),_.current.show("edit",H)},Le=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(O){var M;return(0,c.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,(0,Pt.Ob)({flag:"pass",case_id_list:O.id});case 2:M=de.sent,M.code===200?U(!0):K(!0),k(O);case 5:case"end":return de.stop()}},H)}));return function(O){return ie.apply(this,arguments)}}(),ye=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(){var O;return(0,c.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,(0,Pt.Ob)({flag:"pass",case_id_list:S.join()});case 3:if(x.t0=x.sent,x.t0){x.next=6;break}x.t0={};case 6:O=x.t0,O.code===200?U(!0):K(!0),k({}),x.next=14;break;case 11:x.prev=11,x.t1=x.catch(0),console.log(x.t1);case 14:case"end":return x.stop()}},H,null,[[0,11]])}));return function(){return ie.apply(this,arguments)}}(),Ee=function(){_.current.show("batch.edit",{bentch:!0,test_suite_id:p})},Tt=function(H,O){Q(H),z!="1"&&i(!h)},yt=function(){te.id?d():R()},xt=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(){var O,M,x,de;return(0,c.Z)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(O=[],$.foreach(function(E){return O.push(E.name)}),te.id){Pe.next=8;break}return Pe.next=5,(0,dt.MR)({name:O.join(","),id:S.join(",")});case 5:M=Pe.sent,Pe.next=12;break;case 8:return x=te.name,de=te.id,Pe.next=11,(0,dt.MR)({name:x,id:de});case 11:M=Pe.sent;case 12:M&&window.open("/refenerce/conf/?pk=".concat(M));case 13:case"end":return Pe.stop()}},H)}));return function(){return ie.apply(this,arguments)}}(),Dt=function(){_.current.show("new",{bentch:!1,test_suite_id:p})},De=+status==0?{selectedRowKeys:S,onChange:function(H,O){F(O),B(H)}}:void 0,N=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(O){return(0,c.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:G([O.id]);case 1:case"end":return x.stop()}},H)}));return function(O){return ie.apply(this,arguments)}}(),q=[{title:"Test Conf",dataIndex:"name",width:300,fixed:"left",ellipsis:!0,render:function(H,O){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:O.name})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.alias"}),dataIndex:"alias",width:100,ellipsis:!0,render:function(H){return(0,e.jsx)(e.Fragment,{children:H||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),width:100,dataIndex:"domain_name_list",render:function(H){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:H||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.timeout"}),dataIndex:"timeout",width:160},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.repeat"}),width:"120px",dataIndex:"repeat",ellipsis:!0},{title:(0,e.jsx)(t._H,{id:"TestSuite.var"}),ellipsis:{showTitle:!1},key:"var",width:100,render:function(H,O){return(0,e.jsx)(nt.Z.Text,{ellipsis:{tooltip:!0},children:O.var&&O.var!="[]"?JSON.parse(O.var).map(function(M){return"".concat(M.name,"=").concat(M.val||"-",",").concat(M.des||"-",";")}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),key:"desc",ellipsis:!0,width:100,render:function(H,O){return(0,e.jsx)(Vt.Z,{title:O.doc,width:70,isCode:!0,children:(0,e.jsx)(It.Z,{className:Mt().edit,onClick:function(){return g.current.show(O)}})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"doc",width:"80px",render:function(H,O){return O.is_default?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",width:"80px",render:function(H,O){return O.certificated?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",ellipsis:{showTitle:!1},width:"190px",render:function(H,O){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:O.gmt_created})}},{title:(0,e.jsxs)(Ke.Z,{align:"center",children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",onClick:Dt,size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),valueType:"option",dataIndex:"operation",width:150,fixed:"right",render:function(H,O){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(nt.Z.Link,{onClick:function(){return ve((0,o.Z)({},O))},children:(0,e.jsx)(t._H,{id:"operation.edit"})}),(0,e.jsx)(nt.Z.Link,{onClick:function(){return Le((0,o.Z)({},O))},children:(0,e.jsx)(t._H,{id:"operation.delete"})})]})}}],Ae=function(H,O){se(H),Me(O)},he=function(){var ie=(0,A.Z)((0,c.Z)().mark(function H(O){var M,x,de;return(0,c.Z)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,(0,ge.Ft)(O.id,{doc:O.doc});case 2:M=Pe.sent,x=M.code,de=M.msg,x===200?(L.default.success(m({id:"operation.success"})),g.current.hide(),i(!h)):(0,dt.EV)(x,de);case 6:case"end":return Pe.stop()}},H)}));return function(O){return ie.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"".concat(Mt().warp," case_table_wrapper"),children:[u==="performance"&&(0,e.jsxs)(ft.Z,{defaultActiveKey:"1",activeKey:z,onChange:function(H){return Tt(H,p)},children:[(0,e.jsx)(Un,{tab:"Test Conf"},"1"),(0,e.jsx)(Un,{tab:(0,e.jsx)(t._H,{id:"TestSuite.conf.metric"})},"2")]}),z=="1"?(0,e.jsx)($t.Z,{className:Mt().FuncOrPerfConfList_root,columns:q,name:"sys-suite-business-fun-or-perf-conf",scroll:{x:1400},rowKey:"id",loading:Se,dataSource:pe.data,page:pe.page_num,rowSelection:De,totalPage:pe.total_page,total:pe.total,pageSize:pe.page_size,paginationBottom:!0,handlePage:Ae,expandable:u=="performance"?{expandedRowRender:function(H){return(0,e.jsx)(Wn,{componentType:"case",id:H.id,innerKey:z})},onExpand:function(H,O){H?N(O):G([])},expandedRowKeys:ne,expandIcon:function(H){var O=H.expanded,M=H.onExpand,x=H.record;return O?(0,e.jsx)(Rt.Z,{onClick:function(ke){return M(x,ke)}}):(0,e.jsx)(bt.Z,{onClick:function(ke){return M(x,ke)}})}}:{}}):(0,e.jsx)(Wn,{componentType:"suite",id:p,innerKey:z}),(0,e.jsx)(Kn,{ref:_,onOk:w}),(0,e.jsx)(an,{ref:g,onOk:he}),(0,e.jsxs)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),footer:[(0,e.jsx)(V.Z,{onClick:yt,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return U(!1)},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],centered:!0,className:Mt().modalChange,visible:C,onCancel:function(){return U(!1)},width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4}}),te.name?m({id:"TestSuite.conf.name.delete.warning"},{data:te.name}):m({id:"TestSuite.have.conf.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.conf.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:xt,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]}),(0,e.jsx)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,className:Mt().modalChange,visible:Te,onCancel:function(){return K(!1)},footer:[(0,e.jsx)(V.Z,{onClick:yt,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){K(!1),k({})},children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),S.length>0&&(0,e.jsxs)("div",{className:Mt().batch,children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Et.Z,{indeterminate:!0}),(0,e.jsx)(nt.Z.Text,{children:m({id:"selected.item"},{data:S==null?void 0:S.length})}),(0,e.jsx)(V.Z,{type:"link",onClick:function(){F([]),B([])},children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(V.Z,{onClick:ye,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})}),(0,e.jsx)(V.Z,{type:"primary",onClick:Ee,children:(0,e.jsx)(t._H,{id:"operation.batch.edit"})})]})]})]})}),ra=a(89279),aa=a.n(ra),sa=(0,n.forwardRef)(function(I,D){var p=I.business_id,u=I.rowSelectionCallback,r=u===void 0?function(){}:u,f=I.restId,m=I.restFlag,Z=I.deleteAllId,re=(0,t.YB)(),S=re.formatMessage,B=(0,n.useState)(!1),ee=(0,l.Z)(B,2),T=ee[0],$=ee[1],F=(0,n.useState)({data:[],total:0,page_num:1,page_size:10}),le=(0,l.Z)(F,2),J=le[0],z=le[1],Q=(0,n.useState)([]),ce=(0,l.Z)(Q,2),oe=ce[0],C=ce[1],U=(0,n.useState)([]),je=(0,l.Z)(U,2),_e=je[0],Te=je[1],K=(0,n.useState)([]),fe=(0,l.Z)(K,2),Fe=fe[0],te=fe[1],k=(0,n.useState)([]),j=(0,l.Z)(k,2),ae=j[0],ue=j[1],se=(0,n.useRef)(null),xe=(0,n.useRef)(null),be=(0,n.useRef)(null),Be=(0,n.useState)({visible:!1,result:"",action:""}),Me=(0,l.Z)(Be,2),Ze=Me[0],He=Me[1],pe=(0,n.useState)({}),Oe=(0,l.Z)(pe,2),we=Oe[0],Ie=Oe[1],Se=(0,n.useState)(!1),Re=(0,l.Z)(Se,2),me=Re[0],b=Re[1],ne=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(q){var Ae,he,ie,H;return(0,c.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return $(!0),M.prev=1,M.next=4,(0,ge.J1)((0,o.Z)({business_id:p},q));case 4:Ae=M.sent,he=Ae||{},ie=he.code,H=he.msg,ie===200?z(Ae):L.default.error(H||S({id:"request.failed"})),$(!1),M.next=13;break;case 10:M.prev=10,M.t0=M.catch(1),$(!1);case 13:case"end":return M.stop()}},N,null,[[1,10]])}));return function(q){return De.apply(this,arguments)}}(),G=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(){var q,Ae,he,ie,H;return(0,c.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,(0,ge.ge)(null);case 3:if(M.t0=M.sent,M.t0){M.next=6;break}M.t0={};case 6:q=M.t0,Ae=q.code,he=q.data,ie=he===void 0?[]:he,H=q.msg,Ae===200?ue(ie):L.default.error(H||S({id:"request.failed"})),M.next=17;break;case 14:M.prev=14,M.t1=M.catch(0),console.log(M.t1);case 17:case"end":return M.stop()}},N,null,[[0,14]])}));return function(){return De.apply(this,arguments)}}(),g=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(q){var Ae,he,ie,H,O;return(0,c.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return $(!0),x.prev=1,x.next=4,(0,ge.PO)(q);case 4:if(x.t0=x.sent,x.t0){x.next=7;break}x.t0={};case 7:Ae=x.t0,he=Ae.code,ie=Ae.msg,he===200?(L.default.success(S({id:"request.synchronize.success"})),ne({page_num:J.page_num,page_size:J.page_size}),Fe.includes(q)?(H=xe.current)===null||H===void 0||H.refresh({refreshId:q}):(O=Fe.concat([q]),te(O))):L.default.error(ie||S({id:"request.synchronize.failed"})),$(!1),x.next=17;break;case 14:x.prev=14,x.t1=x.catch(1),$(!1);case 17:case"end":return x.stop()}},N,null,[[1,14]])}));return function(q){return De.apply(this,arguments)}}(),_=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(){var q,Ae,he,ie,H;return(0,c.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return b(!0),M.prev=1,M.next=4,(0,ge.D8)(we.id);case 4:if(M.t0=M.sent,M.t0){M.next=7;break}M.t0={};case 7:q=M.t0,Ae=q.code,he=q.msg,Ae===200?(L.default.success(S({id:"request.delete.success"})),_e.includes(we.id)&&(ie=_e.filter(function(x){return x!==we.id}),H=oe.filter(function(x){return x.id!==we.id}),Te(ie),C(H),ie.length?r({business_id:p,selectedRowKeys:ie}):r({})),i(),ne({page_num:J.page_num,page_size:J.page_size})):L.default.error(he||S({id:"request.delete.failed"})),b(!1),M.next=18;break;case 14:M.prev=14,M.t1=M.catch(1),console.log(M.t1),b(!1);case 18:case"end":return M.stop()}},N,null,[[1,14]])}));return function(){return De.apply(this,arguments)}}(),X=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(){var q;return(0,c.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(!_e.length){he.next=16;break}return $(!0),he.prev=2,he.next=5,(0,ge.d9)({id_list:_e.join()});case 5:if(he.t0=he.sent,he.t0){he.next=8;break}he.t0={};case 8:q=he.t0,q.code===200?(L.default.success(S({id:"operation.batch.delete.success"})),C([]),Te([]),i(),ne({page_num:1,page_size:J.page_size}),r({})):L.default.error(q.msg||S({id:"operation.batch.delete.failed"})),$(!1),he.next=16;break;case 13:he.prev=13,he.t1=he.catch(2),$(!1);case 16:case"end":return he.stop()}},N,null,[[2,13]])}));return function(){return De.apply(this,arguments)}}(),v=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(){var q,Ae,he,ie,H,O;return(0,c.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(q=Ze.action,Ae=[],oe.map(function(de){return Ae.push(de.name)}),q!=="multiple"){x.next=10;break}return x.next=6,(0,dt.MR)({name:Ae.join(","),id:_e.join(",")});case 6:he=x.sent,window.open("/refenerce/conf/?pk=".concat(he)),x.next=16;break;case 10:if(q!=="single"){x.next=16;break}return ie=we.name,H=we.id,x.next=14,(0,dt.MR)({name:ie,id:H});case 14:O=x.sent,window.open("/refenerce/suite/?pk=".concat(O));case 16:case"end":return x.stop()}},N)}));return function(){return De.apply(this,arguments)}}(),h=function(N,q,Ae){N.code===200?He({visible:!0,result:200,action:Ae}):N.code===201&&He({visible:!0,result:201,action:Ae}),Ie(q)},i=function(){He({visible:!1,result:"",action:""}),Ie({})},s=function(){Ze.action==="single"?_():Ze.action==="multiple"&&X()};(0,n.useEffect)(function(){ne({page_num:1,page_size:J.page_size}),G()},[]),(0,n.useEffect)(function(){f&&p===f&&(C([]),Te([]))},[f,m]),(0,n.useEffect)(function(){p===Z&&Z&&ve()},[Z]),(0,n.useImperativeHandle)(D,function(){return{refresh:function(N){var q,Ae=N.refreshId;p===Ae&&(J==null||(q=J.data)===null||q===void 0?void 0:q.length)===0&&(ne({page_num:1,page_size:J.page_size}),G())}}});var d=function(N){var q=N.type,Ae=N.record,he=Ae===void 0?{}:Ae;if(q==="add"){var ie;(ie=se.current)===null||ie===void 0||ie.show(S({id:"TestSuite.new.suite"}),(0,o.Z)({business_id:p},he))}else if(q==="edit"){var H,O=(0,o.Z)((0,o.Z)({},he),{},{is_default:he.is_default?1:0,certificated:he.certificated?1:0});(H=se.current)===null||H===void 0||H.show(S({id:"TestSuite.edit.suite"}),(0,o.Z)({business_id:p},O))}},R=function(){ne({page_num:1,page_size:J.page_size})},w=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(q){var Ae,he,ie;return(0,c.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Ae=q.record,he=Ae===void 0?{}:Ae,O.prev=1,O.next=4,(0,Pt.Ob)({flag:"pass",suite_id:he.id});case 4:if(O.t0=O.sent,O.t0){O.next=7;break}O.t0={};case 7:ie=O.t0,ie.code&&h(ie,he,"single"),O.next=14;break;case 11:O.prev=11,O.t1=O.catch(1),console.log(O.t1);case 14:case"end":return O.stop()}},N,null,[[1,11]])}));return function(q){return De.apply(this,arguments)}}(),ve=function(){var De=(0,A.Z)((0,c.Z)().mark(function N(){var q;return(0,c.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.prev=0,he.next=3,(0,ge.eq)({flag:"pass",suite_id_list:_e.join()});case 3:if(he.t0=he.sent,he.t0){he.next=6;break}he.t0={};case 6:q=he.t0,q.code&&h(q,{},"multiple"),he.next=13;break;case 10:he.prev=10,he.t1=he.catch(0),console.log(he.t1);case 13:case"end":return he.stop()}},N,null,[[0,10]])}));return function(){return De.apply(this,arguments)}}(),Le=[{title:"Test Suite",dataIndex:"name",fixed:"left",width:120,render:function(N){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:N})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.domain"}),dataIndex:"domain_name_list",width:100,render:function(N){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:N||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.test_type"}),dataIndex:"test_type",onCell:function(){return{style:{maxWidth:100}}},render:function(N){return dt.oQ.map(function(q){return q.value===N?(0,e.jsx)("span",{children:S({id:q.value})||"-"},q.value):null})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.default.case"}),dataIndex:"is_default",render:function(N){return(0,e.jsx)("span",{children:N?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.is_certified"}),dataIndex:"certificated",onCell:function(){return{style:{maxWidth:100}}},render:function(N){return(0,e.jsx)("span",{children:N?(0,e.jsx)(t._H,{id:"operation.yes"}):(0,e.jsx)(t._H,{id:"operation.no"})})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.run_mode"}),dataIndex:"run_mode",onCell:function(){return{style:{maxWidth:100}}},render:function(N){return dt.ur.map(function(q){return q.id===N?(0,e.jsx)("span",{children:S({id:q.id})||"-"},q.id):!1}).filter(Boolean)}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",width:170,render:function(N){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:N||"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.desc"}),dataIndex:"doc",width:150,render:function(N){return(0,e.jsx)("div",{children:N?(0,e.jsx)(Vt.Z,{title:N,width:150,isCode:!0,children:(0,e.jsx)("span",{children:null})}):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.remarks"}),dataIndex:"description",onCell:function(){return{style:{maxWidth:150}}},render:function(N){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:N})}},{title:(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(t._H,{id:"Table.columns.operation"}),(0,e.jsx)(V.Z,{type:"primary",onClick:function(){return d({type:"add"})},style:{marginLeft:8},size:"small",children:(0,e.jsx)(t._H,{id:"operation.new"})})]}),width:150,fixed:"right",key:"operation",render:function(N,q){return(0,e.jsxs)(Ke.Z,{children:[q.test_type==="business"?(0,e.jsx)("span",{children:"\u2003\u2003"}):(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return g(q.id)},children:(0,e.jsx)(t._H,{id:"operation.synchronize"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return d({type:"edit",record:q})},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return w({record:q})},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],ye=function(N,q){ne({page_num:N,page_size:q})},Ee={selectedRowKeys:_e,onChange:function(N,q){C(q),Te(N),r({business_id:p,selectedRowKeys:N})}},Tt=J.data,yt=J.total,xt=J.page_num,Dt=J.page_size;return(0,e.jsxs)("div",{children:[(0,e.jsx)($t.Z,{className:aa().suitList_root,columns:Le,name:"sys-suite-business-suite",rowKey:"id",dataSource:Tt,loading:T,page:xt,pageSize:Dt,total:yt,handlePage:ye,rowSelection:Ee,expandable:{expandedRowRender:function(N){var q=N.test_type;return q==="functional"||q==="performance"?(0,e.jsx)(na,{id:N.id,type:q,domainList:ae,ref:xe}):q==="business"?(0,e.jsx)(Ur,(0,o.Z)((0,o.Z)({suite_id:N.id},N),{},{domainList:ae,ref:be})):(0,e.jsx)("div",{children:null})},columnWidth:35,onExpand:function(N,q){if(N){var Ae;te([q.id]),(Ae=be.current)===null||Ae===void 0||Ae.refresh({refreshId:q.id})}else te([])},expandedRowKeys:Fe,expandIcon:function(N){var q=N.expanded,Ae=N.onExpand,he=N.record;return q?(0,e.jsx)(Rt.Z,{onClick:function(H){return Ae(he,H)}}):(0,e.jsx)(bt.Z,{onClick:function(H){return Ae(he,H)}})}},scroll:{x:1250},paginationBottom:!0}),(0,e.jsx)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:Ze.visible,onCancel:i,width:["",201].includes(Ze.result)?300:600,maskClosable:!1,footer:[(0,e.jsx)(V.Z,{onClick:s,loading:me,children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:i,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsx)(e.Fragment,{children:["",201].includes(Ze.result)?(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4}}),Ze.action==="single"?S({id:"TestSuite.suite.delete.warning"},{data:"deleteRow.name"}):S({id:"TestSuite.have.suite.delete.warning"})]}),(0,e.jsx)("div",{style:{color:"rgba(0,0,0,0.45)",marginBottom:5},children:(0,e.jsx)(t._H,{id:"TestSuite.suite.delete.range"})}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:v,children:(0,e.jsx)(t._H,{id:"view.reference.details"})})]})})}),(0,e.jsx)(Gr,{ref:se,callback:R,domainList:ae})]})}),ia=a(31122),on=a.n(ia),la=a(526),da=(0,n.forwardRef)(function(I,D){var p,u,r=(0,t.YB)(),f=r.formatMessage,m=(0,n.useState)(!0),Z=(0,l.Z)(m,2),re=Z[0],S=Z[1],B=(0,n.useState)({data:[],total:0,page_num:1}),ee=(0,l.Z)(B,2),T=ee[0],$=ee[1],F=(0,n.useState)(10),le=(0,l.Z)(F,2),J=le[0],z=le[1],Q=(0,n.useState)([]),ce=(0,l.Z)(Q,2),oe=ce[0],C=ce[1],U=(0,n.useState)({}),je=(0,l.Z)(U,2),_e=je[0],Te=je[1],K=(0,n.useState)(!0),fe=(0,l.Z)(K,2),Fe=fe[0],te=fe[1],k=(0,n.useState)(""),j=(0,l.Z)(k,2),ae=j[0],ue=j[1],se=(0,n.useState)(),xe=(0,l.Z)(se,2),be=xe[0],Be=xe[1],Me=(0,n.useState)(!1),Ze=(0,l.Z)(Me,2),He=Ze[0],pe=Ze[1],Oe=(0,n.useState)({}),we=(0,l.Z)(Oe,2),Ie=we[0],Se=we[1],Re=(0,n.useRef)(null),me=(0,n.useState)({businessId:"",selectedSuiteKeys:[]}),b=(0,l.Z)(me,2),ne=b[0],G=b[1],g=(0,n.useState)(""),_=(0,l.Z)(g,2),X=_[0],v=_[1],h=(0,n.useState)(!1),i=(0,l.Z)(h,2),s=i[0],d=i[1],R=(0,n.useState)(""),w=(0,l.Z)(R,2),ve=w[0],Le=w[1],ye=(0,n.useRef)(),Ee=function(){var x=(0,A.Z)((0,c.Z)().mark(function de(ke){var Pe,E,y;return(0,c.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return S(!0),Y.prev=1,Y.next=4,(0,ge.p4)((0,o.Z)((0,o.Z)({},_e),ke));case 4:if(Y.t0=Y.sent,Y.t0){Y.next=7;break}Y.t0={};case 7:Pe=Y.t0,E=Pe.code,y=Pe.msg,E===200?$(Pe):L.default.error(y||f({id:"request.failed"})),S(!1),Y.next=16;break;case 13:Y.prev=13,Y.t1=Y.catch(1),S(!1);case 16:case"end":return Y.stop()}},de,null,[[1,13]])}));return function(ke){return x.apply(this,arguments)}}();(0,n.useEffect)(function(){var x={page_num:1,page_size:J,name:ae,creator:be};Te(x),Ee(x)},[ae,be]),(0,n.useImperativeHandle)(D,function(){return{refresh:function(){ae||be?(ue(""),Be(void 0)):Ee({page_num:1,page_size:J})},openCreateDrawer:ye.current.show}});var Tt=function(){var x=(0,A.Z)((0,c.Z)().mark(function de(ke){var Pe,E,y;return(0,c.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return S(!0),xt==null||xt(),Y.prev=2,Y.next=5,(0,ge.AE)(ke);case 5:if(Y.t0=Y.sent,Y.t0){Y.next=8;break}Y.t0={};case 8:Pe=Y.t0,E=Pe.code,y=Pe.msg,E===200?(L.default.success(f({id:"request.delete.success"})),Ee(_e)):L.default.error(y||f({id:"request.delete.failed"})),S(!1),Y.next=18;break;case 15:Y.prev=15,Y.t1=Y.catch(2),S(!1);case 18:case"end":return Y.stop()}},de,null,[[2,15]])}));return function(ke){return x.apply(this,arguments)}}(),yt=function(de){pe(!0),Se(de)},xt=function(){pe(!1),Se({})},Dt=[{title:(0,e.jsx)(t._H,{id:"TestSuite.business.name"}),dataIndex:"name",fixed:"left",width:"auto",filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:ae?"#1890ff":void 0}})},filterDropdown:function(de){var ke=de.confirm;return(0,e.jsx)(ln.Z,{confirm:ke,autoFocus:Fe,onConfirm:function(E){ue(E)}})},onFilterDropdownVisibleChange:function(de){de&&te(!Fe)},render:function(de){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:de})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_created"}),dataIndex:"gmt_created",onCell:function(){return{style:{minWidth:170}}},render:function(de){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:de?dn()(de).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.gmt_modified"}),dataIndex:"gmt_modified",onCell:function(){return{style:{minWidth:170}}},render:function(de){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:de?dn()(de).format("YYYY-MM-DD HH:mm:ss"):"-"})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.creator_name"}),dataIndex:"creator_name",onCell:function(){return{style:{minWidth:150}}},filterIcon:function(){return(0,e.jsx)(tt.Z,{style:{color:be?"#1890ff":void 0}})},filterDropdown:function(de){var ke=de.confirm;return(0,e.jsx)(qt.Z,{confirm:ke,onConfirm:function(E){Be(E)}})},onFilterDropdownVisibleChange:function(de){de&&te(!Fe)},render:function(de){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:de})}},{title:(0,e.jsx)(t._H,{id:"TestSuite.description"}),dataIndex:"description",render:function(de){return(0,e.jsx)(qe.K,{ellipsis:{tooltip:!0},children:de})}},{title:(0,e.jsx)(t._H,{id:"Table.columns.operation"}),width:150,fixed:"right",key:"operation",render:function(de,ke){return(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return ye.current.show(ke)},children:(0,e.jsx)(t._H,{id:"operation.edit"})})}),(0,e.jsx)("a",{children:(0,e.jsx)("span",{onClick:function(){return yt(ke)},children:(0,e.jsx)(t._H,{id:"operation.delete"})})})]})}}],De=function(de,ke){Ee({page_num:de,page_size:ke})},N=function(de){var ke=de.business_id,Pe=de.selectedRowKeys,E=Pe===void 0?[]:Pe;ke&&E.length?(ke!==ne.businessId&&(v(ne.businessId),d(!s)),G({businessId:ke,selectedSuiteKeys:E})):G({businessId:"",selectedSuiteKeys:[]})},q=function(){v(ne.businessId),d(!s),G({businessId:"",selectedSuiteKeys:[]})},Ae=function(){Le(ne.businessId)},he=(0,la.CR)(),ie=he.width,H=T.data,O=T.total,M=T.page_num;return console.log(oe),(0,e.jsx)(Yt.Provider,{value:{selectedRowKeys:[],selectedRow:[]},children:(0,e.jsxs)("div",{className:on().business_root,children:[(0,e.jsx)($t.Z,{className:on().businessList,columns:Dt,name:"sys-suite-business-list",rowKey:"id",refreshDeps:[ae,be,Fe,oe,ne,X,s,ve],dataSource:H,scroll:{x:"100%"},loading:re,page:M,pageSize:J,total:O,handlePage:De,expandable:{expandedRowRender:function(de){return(0,e.jsx)(sa,{business_id:de.id,ref:Re,rowSelectionCallback:N,restId:X,restFlag:s,deleteAllId:ve})},onExpand:function(de,ke){if(de){var Pe;C([ke.id]),(Pe=Re.current)===null||Pe===void 0||Pe.refresh({refreshId:ke.id})}else C([])},expandedRowKeys:oe,expandIcon:function(de){var ke=de.expanded,Pe=de.onExpand,E=de.record;return ke?(0,e.jsx)(Rt.Z,{onClick:function(P){return Pe(E,P)}}):(0,e.jsx)(bt.Z,{onClick:function(P){return Pe(E,P)}})}}}),(0,e.jsx)(_t.Z,{title:(0,e.jsx)(t._H,{id:"delete.tips"}),centered:!0,okText:(0,e.jsx)(t._H,{id:"operation.delete"}),cancelText:(0,e.jsx)(t._H,{id:"operation.cancel"}),open:He,onCancel:xt,width:300,maskClosable:!1,footer:[(0,e.jsx)(V.Z,{onClick:function(){return Tt(Ie)},children:(0,e.jsx)(t._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(V.Z,{type:"primary",onClick:xt,children:(0,e.jsx)(t._H,{id:"operation.cancel"})},"back")],children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(gt.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(t._H,{id:"delete.prompt"})]})}),((p=ne.selectedSuiteKeys)===null||p===void 0?void 0:p.length)>0&&(0,e.jsxs)("div",{className:on().deleteAll,style:{width:ie-199-88},children:[(0,e.jsxs)(Ke.Z,{children:[(0,e.jsx)(Et.Z,{indeterminate:!0}),(0,e.jsx)(nt.Z.Text,{children:f({id:"selected.item"},{data:(u=ne.selectedSuiteKeys)===null||u===void 0?void 0:u.length})}),(0,e.jsx)(V.Z,{type:"link",onClick:q,children:(0,e.jsx)(t._H,{id:"operation.cancel"})})]}),(0,e.jsx)(Ke.Z,{children:(0,e.jsx)(V.Z,{onClick:Ae,children:(0,e.jsx)(t._H,{id:"operation.batch.delete"})})})]}),(0,e.jsx)($r,{ref:ye,callback:Ee})]})})}),ua=function(){var D=(0,t.YB)(),p=D.formatMessage,u=(0,ot.TH)(),r=u.query,f=(0,n.useMemo)(function(){return r.test_type?r.test_type:"functional"},[r]),m=tr(),Z=function($){t.m8.push("".concat(location.pathname,"?test_type=").concat($))},re=(0,n.useRef)(),S=(0,n.useRef)(),B=(0,n.useRef)(),ee=function(){(f==="functional"||f==="performance")&&re.current.openCreateDrawer(),f==="business"&&S.current.openCreateDrawer(),f==="domainconf"&&B.current.openCreateDrawer()};return(0,e.jsx)(xn.Provider,{value:{domainList:m,runList:dt.ur.map(function(T){return(0,o.Z)((0,o.Z)({},T),{},{name:p({id:T.id})})}),viewType:[{id:"Type1",name:p({id:"TestSuite.view_type.type1"})},{id:"Type2",name:p({id:"TestSuite.view_type.type2"})},{id:"Type3",name:p({id:"TestSuite.view_type.type3"})}]},children:(0,e.jsxs)(ut.mQ,{title:(0,e.jsxs)(ft.Z,{defaultActiveKey:r.test_type||"functional",onChange:Z,activeKey:f,children:[(0,e.jsx)(ft.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"functional.test"})},"functional"),(0,e.jsx)(ft.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"performance.test"})},"performance"),null,(0,e.jsx)(ft.Z.TabPane,{tab:(0,e.jsx)(t._H,{id:"TestSuite.domain.conf"})},"domainconf")]}),extra:(0,e.jsx)(V.Z,{type:"primary",onClick:ee,children:(0,e.jsx)(t._H,{id:"TestSuite.create.".concat(f)})}),children:[f!=="business"&&f!=="domainconf"&&(0,e.jsx)(Rr,{ref:re}),f==="business"&&(0,e.jsx)(da,{ref:S}),f==="domainconf"&&(0,e.jsx)(Ar,{ref:B})]})})},oa=ua},44728:function(Ue,St,a){"use strict";a.d(St,{Tf:function(){return ft},LM:function(){return n},Xd:function(){return t},um:function(){return kt},IT:function(){return Ct},eB:function(){return jt}});var ct=a(35832),V=a(32326),mt=a(22812);function ft(Ye){return o.apply(this,arguments)}function o(){return o=(0,V.Z)((0,ct.Z)().mark(function Ye(st){return(0,ct.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",(0,mt.WY)("/api/sys/workspace/",{params:st}));case 1:case"end":return ze.stop()}},Ye)})),o.apply(this,arguments)}function n(Ye){return ut.apply(this,arguments)}function ut(){return ut=(0,V.Z)((0,ct.Z)().mark(function Ye(st){return(0,ct.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",(0,mt.WY)("/api/sys/workspace/",{method:"DELETE",data:{id:st.id}}));case 1:case"end":return ze.stop()}},Ye)})),ut.apply(this,arguments)}function t(){return ot.apply(this,arguments)}function ot(){return ot=(0,V.Z)((0,ct.Z)().mark(function Ye(){return(0,ct.Z)().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.abrupt("return",(0,mt.WY)("/api/sys/workspace/quantity/"));case 1:case"end":return et.stop()}},Ye)})),ot.apply(this,arguments)}function kt(Ye){return at.apply(this,arguments)}function at(){return at=(0,V.Z)((0,ct.Z)().mark(function Ye(st){return(0,ct.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",(0,mt.WY)("/api/sys/workspace/detail/".concat(st,"/")));case 1:case"end":return ze.stop()}},Ye)})),at.apply(this,arguments)}function ht(Ye){return lt.apply(this,arguments)}function lt(){return lt=_asyncToGenerator(_regeneratorRuntime().mark(function Ye(st){return _regeneratorRuntime().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",request("/api/auth/personal_center/",{params:st}));case 1:case"end":return ze.stop()}},Ye)})),lt.apply(this,arguments)}function Ct(Ye){return $e.apply(this,arguments)}function $e(){return $e=(0,V.Z)((0,ct.Z)().mark(function Ye(st){return(0,ct.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",(0,mt.WY)("/api/sys/workspace/list_select/",{data:st,method:"put"}));case 1:case"end":return ze.stop()}},Ye)})),$e.apply(this,arguments)}function jt(Ye){return vt.apply(this,arguments)}function vt(){return vt=(0,V.Z)((0,ct.Z)().mark(function Ye(st){return(0,ct.Z)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.abrupt("return",(0,mt.WY)("/api/sys/workspace/all/list/",{params:st}));case 1:case"end":return ze.stop()}},Ye)})),vt.apply(this,arguments)}}}]);
