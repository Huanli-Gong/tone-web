(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[7224,2485],{25034:function(ze){ze.exports={row_class:"row_class___6tLb-",table:"table___3FWk8",dorp_button:"dorp_button___Z-5ot",add_server_form:"add_server_form___1rEVL"}},45969:function(ze){ze.exports={table:"table___NcH1_",pro_table_card:"pro_table_card___1Cnyd"}},3485:function(ze){ze.exports={form_wrapper_body:"form_wrapper_body___yzUOT",form_styles:"form_styles___3dqrf",btn_style:"btn_style___1RvGA",select_ips:"select_ips___23miq"}},48524:function(ze){ze.exports={ip_td:"ip_td___1G32k",dorp_button:"dorp_button___190mR",pro_table_card:"pro_table_card___3PTns"}},51812:function(){},87706:function(ze,tr,s){"use strict";s.r(tr),s.d(tr,{default:function(){return rt}});var i=s(20418),hr=s(46721),re=s(94867),mr=s(54905),rr=s(90087),o=s(39190),xr=s(41428),n=s(22374),Me=s(24812),r=s(22812),Zr=s(67448),Ke=s(47548),gr=s(67515),sr=s(41083),jr=s(38519),qe=s(16416),Ye=s(87967),Ir=s(52730),Or=s(31650),le=s(25100),Dr=s(51937),ar=s(34516),yr=s(57359),xe=s(34423),er=s(79625),We=s(96584),Tr=s(14320),U=s(53479),or=s(81138),ue=s(96146),u=s(35832),Q=s(32326),Ne=s(31784),Rr=s(74066),Er=s(46601),tt=s(88018),nr=s(58414),st=s(16832),Qe=s(69827),at=s(70772),m=s(6701),ln=s(64139),ce=s.n(ln),Fr=s(55704),de=s(77033),ir=s(6895),e=s(52454),dn=(0,n.forwardRef)(function(w,I){var H=(0,Me.UO)(),y=H.ws_id,l=(0,n.useState)(),O=(0,o.Z)(l,2),t=O[0],V=O[1],J=(0,n.useState)(!1),ne=(0,o.Z)(J,2),C=ne[0],Z=ne[1],j=(0,n.useState)(!0),k=(0,o.Z)(j,2),te=k[0],K=k[1],W=(0,n.useState)(!1),g=(0,o.Z)(W,2),D=g[0],se=g[1],fe=(0,n.useRef)(null),ge=function(){var G=(0,Q.Z)((0,u.Z)().mark(function R(E){var je,Y,pe,X,ye,q;return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return K(!0),A.next=3,(0,de.jc)(E);case 3:return je=A.sent,Y=je.data,pe=Y===void 0?{}:Y,V(pe),A.next=9,(0,de.vq)({ip:pe.ip,channel_type:pe.channel_type});case 9:X=A.sent,ye=X.code,q=X.data,Z(ye===200?q:pe.channel_state),K(!1);case 14:case"end":return A.stop()}},R)}));return function(E){return G.apply(this,arguments)}}();(0,n.useImperativeHandle)(I,function(){return{show:function(R){se(!0),ge(R)}}});var ve=function(){se(!1),V(null)},T=function(){var R;(R=fe.current)===null||R===void 0||R.show((0,i.Z)((0,i.Z)({},t),{},{detailData:[t==null?void 0:t.ip]}))},be=function(){};return(0,e.jsxs)(nr.Z,{maskClosable:!1,keyboard:!1,forceRender:!0,title:(0,e.jsx)(r._H,{id:"device.details"}),width:"510",open:D,onClose:ve,children:[(0,e.jsxs)(Ke.Z,{spinning:te,children:[(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.hardware"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsx)(m.Z,{span:6,children:"SN:"}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.sn})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.host.name"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.hostname})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.ip.address"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.ip})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.test.server.type"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.device_type})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsx)(m.Z,{span:6,children:"IDC:"}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.idc})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.manufacturer"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.manufacturer})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.model"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.device_mode})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.model.type"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.sm_name})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.security.domain"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.security_domain})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsx)(m.Z,{span:6,children:"CPU:"}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.cpu})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.CPU.device"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.cpu_device})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.memory"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.memory})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.memory.device"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.memory_device})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.storage"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.storage})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.network"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.network})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.network.device"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.net_device})]})]}),(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.software"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.operating.system"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.platform})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.kernel_version"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.kernel})]})]}),(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.application.group"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.application.group"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.app_group})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.application.state"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.app_state})]})]}),(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.usage.state"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.server.state"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:(0,ir.Ul)(t==null?void 0:t.state,t,y)})]})]}),(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.channel_type"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsx)(m.Z,{span:6,children:"Channel:"}),(0,e.jsxs)(m.Z,{span:18,children:[(0,e.jsx)("span",{children:t==null?void 0:t.channel_type}),!1]})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.state"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:C==null?void 0:C.toString()})]})]}),(0,e.jsxs)(Qe.Z.Content,{style:{marginBottom:30},children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.scheduling.label"})}),(0,e.jsx)(U.Z,{style:{marginTop:10},children:(t==null?void 0:t.tag_list)&&(t==null?void 0:t.tag_list.map(function(G){return(0,e.jsx)(ar.Z,{color:G.tag_color,children:G.name},G.id)}))})]}),(0,e.jsxs)(Qe.Z.Content,{children:[(0,e.jsx)(le.Z.Text,{strong:!0,children:(0,e.jsx)(r._H,{id:"device.others.info"})}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.machine.name"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.name})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsx)(m.Z,{span:6,children:"Owner:"}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.owner_name})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.creation_time"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.gmt_created})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.modify_time"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.gmt_modified})]}),(0,e.jsxs)(U.Z,{gutter:20,className:ce().row,children:[(0,e.jsxs)(m.Z,{span:6,children:[(0,e.jsx)(r._H,{id:"device.description"}),":"]}),(0,e.jsx)(m.Z,{span:18,children:t==null?void 0:t.description})]})]})]}),(0,e.jsx)(Fr.Z,{ref:fe,callback:be})]})}),Mr=dn,it=s(90846),Ge=s(56511),lt=s(20693),Le=s(3278),dt=s(69230),Ie=s(33821),ot=s(65790),z=s(17187),on=s(97207),Pr=s.n(on),Sr=s(57286),un=(0,n.forwardRef)(function(w,I){var H=(0,r.YB)(),y=H.formatMessage,l=w.handleOk,O=(0,n.useState)(!1),t=(0,o.Z)(O,2),V=t[0],J=t[1],ne=(0,n.useState)(null),C=(0,o.Z)(ne,2),Z=C[0],j=C[1],k=z.Z.useForm(),te=(0,o.Z)(k,1),K=te[0];(0,n.useImperativeHandle)(I,function(){return{show:function(se){J(!0),j(se)}}});var W=function(){j(null),J(!1),K.resetFields()},g=function(){K.validateFields().then(function(){var se=(0,Q.Z)((0,u.Z)().mark(function fe(ge){return(0,u.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,de.iu)((0,i.Z)((0,i.Z)({},ge),{},{server_id:Z}));case 2:l(),W();case 4:case"end":return T.stop()}},fe)}));return function(fe){return se.apply(this,arguments)}}()).catch(function(se){console.log(se)})};return(0,e.jsx)(nr.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(r._H,{id:"device.deploy"}),forceRender:!0,open:V,width:"376",onClose:W,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:W,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{type:"primary",onClick:g,children:(0,e.jsx)(r._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(z.Z,{layout:"vertical",form:K,children:[(0,e.jsx)(z.Z.Item,{name:"deploy_user",label:(0,e.jsx)(r._H,{id:"device.deploy_user"}),rules:[{required:!0,message:y({id:"device.deploy_user.message"})}],children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:y({id:"device.deploy_user.placeholder"})})}),(0,e.jsx)(z.Z.Item,{name:"deploy_pass",label:(0,e.jsx)(r._H,{id:"device.deploy_pass"}),rules:[{required:!0,message:y({id:"device.deploy_pass.message"})}],children:(0,e.jsx)(Le.Z.Password,{autoComplete:"off",placeholder:y({id:"device.deploy_pass.placeholder"}),visibilityToggle:!1})})]})})}),cn=un,fn=s(3485),Cr=s.n(fn),ur=s(53919),Lr=s(8476),Vr=s(94870),vn=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=(0,Me.UO)(),t=O.ws_id,V=I.onFinish,J=(0,r.tT)("disclaimer"),ne=J.openModal,C=J.handleDisclaimerOpen,Z=(0,n.useState)(!1),j=(0,o.Z)(Z,2),k=j[0],te=j[1],K=(0,n.useState)(null),W=(0,o.Z)(K,2),g=W[0],D=W[1],se=(0,n.useRef)(null),fe=(0,n.useRef)(null),ge=z.Z.useForm(),ve=(0,o.Z)(ge,1),T=ve[0],be=(0,n.useState)({success:[],errors:[]}),G=(0,o.Z)(be,2),R=G[0],E=G[1],je=(0,n.useState)(""),Y=(0,o.Z)(je,2),pe=Y[0],X=Y[1],ye=(0,n.useState)(!1),q=(0,o.Z)(ye,2),Oe=q[0],A=q[1],Ve=(0,n.useState)(!1),Pe=(0,o.Z)(Ve,2),_=Pe[0],v=Pe[1],F=(0,n.useState)(""),N=(0,o.Z)(F,2),ke=N[0],$=N[1],p=(0,n.useState)([]),d=(0,o.Z)(p,2),x=d[0],b=d[1],a=(0,n.useState)({}),B=(0,o.Z)(a,2),De=B[0],_e=B[1],Ae=(0,n.useState)(!1),ee=(0,o.Z)(Ae,2),M=ee[0],Ze=ee[1],Fe=l({id:"device.machine.IP.placeholder1"}),he=(0,n.useState)({list:[],isQuery:""}),Be=(0,o.Z)(he,2),ae=Be[0],fr=Be[1],Je=function(){T.resetFields(),te(!1),D(null),_e({}),X(""),b([]),$(""),E({success:[],errors:[]})};(0,n.useImperativeHandle)(H,function(){return{show:function(L){if(Je(),te(!0),L&&D(Pr()),L){D(L),Ze(Pr().get(L,"opreateType")==="moreEdit"),L.ip&&T.setFieldsValue({ips:[L.ip]});var oe=[];L.tag_list&&(oe=L.tag_list.map(function(ie){return ie.id})),fr((0,i.Z)((0,i.Z)({},ae),{},{isQuery:"edit",list:oe}))}else fr((0,i.Z)((0,i.Z)({},ae),{},{isQuery:"add",list:[]}))}}});var kr=(0,n.useMemo)(function(){return g&&g.state==="Occupied"},[g]),vr=function(){A(!0),T.validateFields().then(function(){var L=(0,Q.Z)((0,u.Z)().mark(function oe(ie){var He;return(0,u.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ie.owner="",g){Se.next=7;break}return Se.next=4,(0,de.xG)((0,i.Z)((0,i.Z)({},ie),{},{ws_id:t}));case 4:He=Se.sent,Se.next=13;break;case 7:return ie.owner===g.owner_name&&(ie.owner=g.owner),kr&&(delete ie.channel_type,delete ie.ip),ie.ws_id=t,Se.next=12,(0,de.rQ)(g.id,ie);case 12:He=Se.sent;case 13:He.code===200?(ue.default.success(l({id:"operation.success"})),V(),Je()):ue.default.error(He.msg||l({id:"operation.failed"})),A(!1);case 15:case"end":return Se.stop()}},oe)}));return function(oe){return L.apply(this,arguments)}}()).catch(function(L){A(!1)})},br=function(){A(!0),T.validateFields().then(function(){var L=(0,Q.Z)((0,u.Z)().mark(function oe(ie){var He;return(0,u.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ie.ws_id=t,ie.server_ids=g.selectRowKeys,ie.description=ie.description||"",Se.next=5,(0,de.X4)(ie);case 5:He=Se.sent,He.code===200?(ue.default.success(l({id:"operation.success"})),V(),Je()):ue.default.error(He.msg||l({id:"operation.failed"})),A(!1);case 8:case"end":return Se.stop()}},oe)}));return function(oe){return L.apply(this,arguments)}}()).catch(function(L){A(!1),console.log(L)})},tn=(0,n.useCallback)(function(me){me&&vr(),A(!1)},[]),sn=function(L){var oe;(oe=fe.current)===null||oe===void 0||oe.show((0,i.Z)((0,i.Z)({},L),{},{detailData:L.errors||[]}))},Hr=function(L){var oe=L.success_servers,ie=oe===void 0?[]:oe,He=ie==null?void 0:ie.map(function(Ue){return Ue.ip});He!=null&&He.length&&(E({success:He,errors:[]}),T.setFieldsValue({ips:He}))},h=function(L){var oe=L.data;return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)("span",{children:oe.msg[0]}),(0,e.jsx)(We.Z,{title:oe.msg[1],children:(0,e.jsx)("span",{style:{color:"#1890ff"},children:(0,e.jsx)(r._H,{id:"device.detail.info"})})})]})},f=function(L){var oe=L.data,ie=L.channelType;return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)("span",{children:oe.msg[0]}),(0,e.jsx)(We.Z,{title:oe.msg[1],children:(0,e.jsx)("span",{style:{color:"#1890ff"},children:(0,e.jsx)(r._H,{id:"device.detail.info"})})}),(0,e.jsx)(e.Fragment,{})]})},c=function(){var me=(0,Q.Z)((0,u.Z)().mark(function L(oe){var ie,He,Ue,Se,Xe;return(0,u.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!_){Ce.next=2;break}return Ce.abrupt("return");case 2:if(De.error&&_e({}),v(!0),ie=T.getFieldValue("$")||[],He=T.getFieldValue("ip"),Ue=oe,!(Ue&&ie&&ie.length>0)){Ce.next=17;break}return Ce.next=10,(0,de.bD)({ips:ie,channel_type:Ue,ws_id:t});case 10:if(Ce.t0=Ce.sent,Ce.t0){Ce.next=13;break}Ce.t0={};case 13:Se=Ce.t0,Se.code===200&&(E((0,i.Z)({},Se.data)),X((0,e.jsx)(f,{data:Se,channelType:Ue})),T.setFieldsValue({ips:Se.data.success}),b(Se.data.success),$("")),Ce.next=25;break;case 17:if(!(Ue&&He&&He.length>0)){Ce.next=25;break}return Ce.next=20,(0,de.bD)({ws_id:t,ips:He,channel_type:Ue,server_id:g.id});case 20:if(Ce.t1=Ce.sent,Ce.t1){Ce.next=23;break}Ce.t1={};case 23:Xe=Ce.t1,Xe.code===200&&Xe.data&&Xe.data.errors&&Xe.data.errors.length&&_e((0,i.Z)((0,i.Z)({},Xe),{},{error:!0}));case 25:v(!1);case 26:case"end":return Ce.stop()}},L)}));return function(oe){return me.apply(this,arguments)}}(),P=function(L){c(L)},S=(0,n.useCallback)(function(){},[]);(0,n.useEffect)(function(){if(!g||M)T.resetFields();else if("id"in g){var me=g.ip,L=g.private_ip,oe=g.description,ie=g.tag_list,He=g.state,Ue=g.name,Se=g.channel_type,Xe=g.emp_id,an=g.sn;T.setFieldsValue({ip:me,private_ip:L,description:oe,tags:ie.map(function(Ce){var nt=Ce.id;return nt}),state:He,emp_id:Xe,name:Ue||"SN",channel_type:Se,sn:an})}},[I.visible,g]);var Re=function(L){$(L)},Ee=function(){if(ke.length>0){if(ke.indexOf("\uFF0C")>1){ue.default.error("\u673A\u5668ip\u53C2\u6570\u683C\u5F0F\u4E0D\u6B63\u786E");return}var L=ke.trim().split(/,|\s/)||[],oe=Array.from(new Set(L.concat(x)));b(oe),T.setFieldsValue({ips:oe});var ie=T.getFieldValue("channel_type")}},Te=function(){E({success:[],errors:[]}),X("")},pr=function(L){b(L),$(L.toString())};return(0,e.jsxs)(nr.Z,{keyboard:!1,maskClosable:!1,forceRender:!0,title:g?(0,e.jsx)(r._H,{id:"device.device.edit"}):(0,e.jsx)(r._H,{id:"device.add.btn"}),width:"376",open:k,destroyOnClose:!0,onClose:Oe?function(){}:Je,className:Cr().form_wrapper_body,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:Je,disabled:Oe,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{onClick:M?br:g?vr:C,type:"primary",loading:Oe,children:g?(0,e.jsx)(r._H,{id:"operation.update"}):(0,e.jsx)(r._H,{id:"operation.ok"})})]})}),children:[(0,e.jsx)(Ke.Z,{spinning:_,children:(0,e.jsxs)(z.Z,{layout:"vertical",form:T,className:Cr().form_styles,initialValues:{channel_type:"toneagent"},children:[!M&&(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.channel_type"}),name:"channel_type",rules:[{required:!0,message:l({id:"device.channel_type.message"})}],validateStatus:De.error?"error":"",help:De.msg&&De.msg.length&&(0,e.jsx)(h,{data:De}),children:(0,e.jsx)(ur.k,{onChange:P,disabled:!0,placeholder:l({id:"device.channel_type.message"})})}),!M&&!g&&(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.machine.IP"}),name:"ips",validateStatus:R.errors.length>0?"error":void 0,help:R.errors.length>0?pe:void 0,rules:[{required:!0,message:l({id:"device.please.enter.correct.server.IP"})}],children:(0,e.jsx)(Ie.Z,{mode:"multiple",placeholder:Fe,onBlur:Ee,onFocus:Te,onSearch:Re,onChange:pr,notFoundContent:null,className:Cr().select_ips,children:R.success.map(function(me){return(0,e.jsx)(Ie.Z.Option,{value:me,children:me},me)})})}),!M&&g&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(z.Z.Item,{name:"ip",label:(0,e.jsx)(r._H,{id:"device.machine"}),children:(0,e.jsx)(Le.Z,{disabled:!0})}),(0,e.jsx)(z.Z.Item,{name:"name",label:(0,e.jsx)(r._H,{id:"device.machine.name"}),rules:[{required:!0,message:l({id:"device.machine.message"})}],initialValue:"SN",children:(0,e.jsx)(Le.Z,{autoComplete:"off"})}),(0,e.jsx)(z.Z.Item,{name:"sn",label:"SN",style:{display:"none"},children:(0,e.jsx)(Le.Z,{autoComplete:"off",type:"hidden"})})]}),!M&&(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.usage.state"}),name:"state",rules:[{required:!0,message:l({id:"device.usage.state.message"})}],initialValue:"Available",children:(0,e.jsxs)(Ie.Z,{placeholder:l({id:"device.usage.state.message"}),disabled:kr,children:[(0,e.jsx)(Ie.Z.Option,{value:"Available",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Available"})}),(0,e.jsx)(Ie.Z.Option,{value:"Reserved",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Reserved"})}),(0,e.jsx)(Ie.Z.Option,{value:"Unusable",children:(0,e.jsx)(Ge.Z,{status:"default",text:"Unusable"})})]})}),!M&&(0,e.jsx)(Sr.Z,{}),!M&&(0,e.jsx)(Lr.Z,(0,i.Z)({},ae)),(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.description"}),name:"description",children:(0,e.jsx)(Le.Z.TextArea,{placeholder:l({id:"device.description.placeholder"})})})]})}),(0,e.jsx)(cn,{ref:se,handleOk:S}),(0,e.jsx)(Fr.Z,{ref:fe,callback:Hr}),ne&&(0,e.jsx)(Vr.Z,{onOk:tn})]})},pn=(0,n.forwardRef)(vn),lr=s(12590),Ar=s(27787),hn=s(42847),Nr=s(76742),_r=s(76123),mn=s(79638),$r=s(46444),Br,Ur,xn=["svgRef","title"];function cr(){return cr=Object.assign?Object.assign.bind():function(w){for(var I=1;I<arguments.length;I++){var H=arguments[I];for(var y in H)Object.prototype.hasOwnProperty.call(H,y)&&(w[y]=H[y])}return w},cr.apply(this,arguments)}function Zn(w,I){if(w==null)return{};var H=gn(w,I),y,l;if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(w);for(l=0;l<O.length;l++)y=O[l],!(I.indexOf(y)>=0)&&(!Object.prototype.propertyIsEnumerable.call(w,y)||(H[y]=w[y]))}return H}function gn(w,I){if(w==null)return{};var H={},y=Object.keys(w),l,O;for(O=0;O<y.length;O++)l=y[O],!(I.indexOf(l)>=0)&&(H[l]=w[l]);return H}var jn=function(I){var H=I.svgRef,y=I.title,l=Zn(I,xn);return n.createElement("svg",cr({width:"21px",height:"54px",viewBox:"0 0 21 54",ref:H},l),y?n.createElement("title",null,y):null,Br||(Br=n.createElement("desc",null,"Created with Sketch.")),Ur||(Ur=n.createElement("g",{id:"\\u673A\\u5668\\u7BA1\\u7406",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"7-\\u4E91\\u4E0A-\\u96C6\\u7FA4",transform:"translate(-262.000000, -266.000000)",fill:"#D9D9D9"},n.createElement("g",{id:"\\u8868\\u683C",transform:"translate(238.000000, 112.000000)"},n.createElement("g",{transform:"translate(24.000000, 154.000000)",id:"\\u7F16\\u7EC4-3"},n.createElement("g",null,n.createElement("g",{id:"\\u7F16\\u7EC4-4"},n.createElement("g",null,n.createElement("path",{d:"M1,54 L0,54 L0,0 L1,0 L1,27 L21,27 L21,28 L1,28 L1,54 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408"}))))))))))},yn=n.forwardRef(function(w,I){return n.createElement(jn,cr({svgRef:I},w))}),ut=s.p+"static/tree.d51cabc6.svg",Sn=s(48524),zr=s.n(Sn),we=s(39935),dr=s(94649),ct=s(11407),Kr=s(41604),ft=s(53374),Cn=s(61674),_n=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=I.onOk,t=(0,Me.UO)(),V=t.ws_id,J=(0,n.useState)(!1),ne=(0,o.Z)(J,2),C=ne[0],Z=ne[1],j=(0,n.useState)(null),k=(0,o.Z)(j,2),te=k[0],K=k[1],W=(0,n.useState)([]),g=(0,o.Z)(W,2),D=g[0],se=g[1],fe=(0,n.useState)([]),ge=(0,o.Z)(fe,2),ve=ge[0],T=ge[1],be=(0,n.useState)(!0),G=(0,o.Z)(be,2),R=G[0],E=G[1],je=(0,n.useState)("toneagent"),Y=(0,o.Z)(je,2),pe=Y[0],X=Y[1],ye=(0,n.useState)({type:void 0,message:null}),q=(0,o.Z)(ye,2),Oe=q[0],A=q[1],Ve=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(x){var b,a,B,De;return(0,u.Z)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return E(!0),Ae.next=3,(0,r.WY)("/api/server/sync_vm/?server_id=".concat(x));case 3:if(b=Ae.sent,a=b.code,B=b.msg,De=b.data,E(!1),a===200){Ae.next=11;break}return(0,we.EV)(a,B),Ae.abrupt("return");case 11:T(De),Z(!0),K(x);case 14:case"end":return Ae.stop()}},d)}));return function(x){return p.apply(this,arguments)}}();(0,n.useImperativeHandle)(H,function(){return{show:function(d){Ve(d)}}});var Pe=(0,n.useCallback)(function(){Z(!1),E(!0),K(null),se([]),T([]),A({type:void 0,message:null})},[]),_=[{dataIndex:"ip",title:"IP"},{dataIndex:"sn",title:"SN"},{dataIndex:"hostname",title:(0,e.jsx)(r._H,{id:"device.machine.name"})},{dataIndex:"idc",title:"IDC"},{dataIndex:"app_group",title:(0,e.jsx)(r._H,{id:"device.app_group"})}],v=(0,n.useCallback)(function(p){se(p)},[]),F=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(){var x,b,a,B,De,_e;return(0,u.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,de.bD)({ips:D,ws_id:V,channel_type:pe});case 2:if(x=ee.sent,b=x.code,a=x.msg,B=x.data,b===200){ee.next=9;break}return(0,we.EV)(b,a),ee.abrupt("return",!1);case 9:if(De=B.success,_e=B.errors,JSON.stringify(_e)==="[]"){ee.next=13;break}return A({type:"error",message:JSON.stringify(a)!=="[]"?a.reduce(function(M,Ze){return M+=Ze},""):""}),ee.abrupt("return",!1);case 13:if(JSON.stringify(De)==="[]"){ee.next=15;break}return ee.abrupt("return",!0);case 15:return ee.abrupt("return",!1);case 16:case"end":return ee.stop()}},d)}));return function(){return p.apply(this,arguments)}}(),N=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(){var x,b,a,B;return(0,u.Z)().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(JSON.stringify(D)==="[]"){_e.next=20;break}return A({type:void 0,message:null}),E(!0),_e.next=5,F();case 5:if(x=_e.sent,!x){_e.next=19;break}return _e.next=9,(0,r.WY)("/api/server/sync_vm/",{method:"post",data:{server_id:te,ips:D,ws_id:V}});case 9:if(b=_e.sent,a=b.code,B=b.msg,a===200){_e.next=16;break}return E(!1),(0,we.EV)(a,B),_e.abrupt("return");case 16:Pe(),O(),ue.default.success(l({id:"operation.success"}));case 19:E(!1);case 20:case"end":return _e.stop()}},d)}));return function(){return p.apply(this,arguments)}}(),ke=(0,n.useCallback)(function(p){X(p)},[]),$=(0,n.useMemo)(function(){return D.length!==0&&ve.length!==0&&!R},[D,ve,R]);return(0,e.jsx)(sr.Z,{open:C,title:(0,e.jsx)(r._H,{id:"device.select.virtual.machine"}),width:800,onCancel:Pe,footer:!1,children:(0,e.jsxs)(Ke.Z,{spinning:R,children:[Oe.message&&(0,e.jsx)(Cn.Z,{style:{marginBottom:16},showIcon:!0,closable:!0,type:Oe.type,message:Oe.message}),(0,e.jsxs)(xe.Z,{style:{marginBottom:16},children:[(0,e.jsxs)(le.Z.Text,{children:[(0,e.jsx)(r._H,{id:"device.channel_type"}),"\uFF1A"]}),(0,e.jsx)(ur.k,{value:pe,onChange:ke,placeholder:l({id:"device.channel_type.message"})})]}),(0,e.jsx)(Kr.Z,{dataSource:ve,columns:_,rowKey:"ip",pagination:!1,size:"small",rowSelection:{selectedRowKeys:D,onChange:v},scroll:{y:200}}),(0,e.jsx)(U.Z,{justify:"end",style:{marginTop:16},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{type:"default",onClick:Pe,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{type:"primary",onClick:N,disabled:!$,children:(0,e.jsx)(r._H,{id:"operation.ok"})})]})})]})})},wn=(0,n.forwardRef)(_n),kn=s(22911),Wr=s(94376),Gr=s(79390),wr=s(6130),Yr=s(77740),Qr=s(20905),bn=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=(0,r.Kd)()==="en-US",t=(0,Me.UO)(),V=t.ws_id,J=(0,Me.TH)(),ne=J.query,C=(0,r.md)(),Z=(0,n.useState)([]),j=(0,o.Z)(Z,2),k=j[0],te=j[1],K=(0,n.useState)(!0),W=(0,o.Z)(K,2),g=W[0],D=W[1],se=(0,n.useState)([]),fe=(0,o.Z)(se,2),ge=fe[0],ve=fe[1],T=(0,n.useState)(!1),be=(0,o.Z)(T,2),G=be[0],R=be[1],E=(0,n.useState)(0),je=(0,o.Z)(E,2),Y=je[0],pe=je[1],X=(0,n.useState)([]),ye=(0,o.Z)(X,2),q=ye[0],Oe=ye[1],A=(0,n.useState)(!1),Ve=(0,o.Z)(A,2),Pe=Ve[0],_=Ve[1],v=(0,n.useState)({}),F=(0,o.Z)(v,2),N=F[0],ke=F[1],$=(0,n.useRef)(null),p=(0,n.useRef)(null),d=n.useRef(null);(0,n.useImperativeHandle)(H,function(){return{open:p.current.show}});var x=(0,n.useState)((0,i.Z)({ws_id:V,page_size:10,page_num:1},ne)),b=(0,o.Z)(x,2),a=b[0],B=b[1],De=(0,n.useRef)(),_e=(0,n.useRef)(),Ae=[{id:"phy_server",name:l({id:"device.standalone.phy_server"})},{id:"vm",name:l({id:"device.standalone.vm"})}],ee=[{value:"toneagent",label:"ToneAgent"}].map(function(h){return{id:h.value,name:h.label}}),M=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(){var c,P,S;return(0,u.Z)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return r.m8.replace("/ws/".concat(V,"/device/group?").concat((0,Qr.stringify)(a))),D(!0),Ee.next=4,(0,de.Zu)(a);case 4:if(Ee.t0=Ee.sent,Ee.t0){Ee.next=7;break}Ee.t0={};case 7:c=Ee.t0,D(!1),P=c.data,S=P===void 0?[]:P,te(S),pe(c.total),ve(S.map(function(Te){return Te.id}));case 13:case"end":return Ee.stop()}},f)}));return function(){return h.apply(this,arguments)}}(),Ze=function(f){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;B((0,i.Z)((0,i.Z)({},a),{},{page_size:c,page_num:f}))},Fe=(0,n.useCallback)(function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(c){var P;return(0,u.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return R(!0),Re.next=3,(0,de.EK)(c);case 3:P=Re.sent,P.code===200?(ue.default.success(l({id:"operation.success"})),_(!1)):(0,we.EV)(P.code,P.msg),R(!1);case 6:case"end":return Re.stop()}},f)}));return function(f){return h.apply(this,arguments)}}(),[]),he=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(c){var P,S,Re,Ee,Te;return(0,u.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return ke(c),me.next=3,(0,de.Z9)({server_id:c.id,run_mode:"standalone",server_provider:"aligroup"});case 3:P=me.sent,S=P.data,Re=P.code,Ee=P.msg,Re===200?S.length>0?_(!0):(Te=d.current)===null||Te===void 0||Te.show(c,"(".concat(c.ip,")")):(0,we.EV)(Re,Ee);case 8:case"end":return me.stop()}},f)}));return function(c){return h.apply(this,arguments)}}(),Be=function(f,c){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,S=Math.ceil(Number(f-1)/P);return c>S&&S>0?S:c},ae=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(c){var P,S,Re;return(0,u.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return P={ws_id:V},Te.next=3,(0,de.Ld)(c,P);case 3:S=Te.sent,Re=Be(Y,a==null?void 0:a.page_num,a==null?void 0:a.page_size),S.code===200?(ue.default.success(l({id:"operation.success"})),Oe(q.filter(function(pr){return pr!==c})),_(!1),B((0,i.Z)((0,i.Z)({},a),{},{page_num:Re}))):(0,we.EV)(S.code,S.msg);case 6:case"end":return Te.stop()}},f)}));return function(c){return h.apply(this,arguments)}}();(0,n.useEffect)(function(){M()},[a]);var fr=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(){var c;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,we.MR)({name:N.name,id:N.id});case 2:c=S.sent,c&&window.open("/ws/".concat(V,"/refenerce/4/?pk=").concat(c));case 4:case"end":return S.stop()}},f)}));return function(){return h.apply(this,arguments)}}(),Je=(0,n.useCallback)(function(h){p.current.show(h)},[]),kr=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(){var c;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return R(!0),S.next=3,(0,de.lr)({pks:q});case 3:c=S.sent,R(!1),c.code===200?(M(),ue.default.success(l({id:"synchronization.success"}))):ue.default.warning(c.msg);case 6:case"end":return S.stop()}},f)}));return function(){return h.apply(this,arguments)}}(),vr=function(){var h=(0,Q.Z)((0,u.Z)().mark(function f(c){var P,S,Re;return(0,u.Z)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,(0,de.vu)({server_id:c.id,server_provider:"aligroup"});case 2:P=Te.sent,S=P.code,Re=P.msg,S===200?(ue.default.success(l({id:"device.synchronization.state.success"})),M()):(0,we.EV)(S,Re);case 6:case"end":return Te.stop()}},f)}));return function(c){return h.apply(this,arguments)}}(),br=(0,n.useCallback)(function(h){Oe(h)},[]),tn=function(f,c){switch(f.key){case"data":return Fe(c.id);case"vm":return De.current.show(c.id);default:return!1}},sn=(0,n.useCallback)(function(h){_e.current.show(h)},[]),Hr=[{title:"IP",width:176,fixed:"left",dataIndex:"ip",className:zr().ip_td,ellipsis:{showTitle:!1},render:function(f,c){return c.sub_server_list?(0,e.jsx)(dr.Z,{val:f,provider:"aligroup"}):(0,e.jsxs)(U.Z,{justify:"start",align:"middle",children:[(0,e.jsx)(yn,{style:{marginRight:8,height:40}}),(0,e.jsx)(dr.Z,{val:f,provider:"aligroup"})]})},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.ip?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(lr.Z,{value:a==null?void 0:a.ip,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{ip:S,page_num:1}))}})}},{title:"SN",dataIndex:"sn",width:130,ellipsis:{shwoTitle:!1},render:function(f){return(0,e.jsx)(dr.Z,{val:f,provider:"aligroup"})},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.sn?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(lr.Z,{value:a.sn,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{sn:S,page_num:1}))}})}},{title:"TSN",dataIndex:"tsn",width:130,ellipsis:{shwoTitle:!1},render:function(f){return(0,e.jsx)(wr.K,{ellipsis:{tooltip:!0},children:f})}},!1,!1,!1,!1,!1,{title:(0,e.jsx)(r._H,{id:"device.channel_type"}),dataIndex:"channel_type",width:100,ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.channel_type?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(hn.Z,{value:a==null?void 0:a.channel_type,list:ee,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{channel_type:S,page_num:1}))}})}},!1,{title:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(r._H,{id:"device.usage.state"}),(0,e.jsx)(We.Z,{title:l({id:"device.usage.state.Tooltip"}),children:(0,e.jsx)(Rr.Z,{})})]}),dataIndex:"state",width:120+30,ellipsis:{showTitle:!1},render:function(f,c){return(0,ir.Ul)(f,c,V)},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.state?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)($r.Z,{value:a==null?void 0:a.state,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{state:S,page_num:1}))},dataArr:["Available","Occupied","Broken","Reserved","Unusable"]})}},{title:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(r._H,{id:"device.real_state"}),(0,e.jsx)(We.Z,{title:l({id:"device.real_state.Tooltip"}),children:(0,e.jsx)(Rr.Z,{})})]}),width:120+30,dataIndex:"real_state",ellipsis:{showTitle:!1},render:function(f,c){return(0,ir.Ul)(f,c,V)},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.real_state?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)($r.Z,{value:a==null?void 0:a.real_state,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{real_state:S,page_num:1}))},dataArr:["Online","Offline"]})}},{title:"Owner",width:100,dataIndex:"owner_name",ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.owner?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(kn.Z,{value:a==null?void 0:a.owner,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{page_num:1,owner:S}))}})}},{title:(0,e.jsx)(r._H,{id:"device.description"}),dataIndex:"description",filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.description?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(lr.Z,{value:a==null?void 0:a.description,confirm:c,onConfirm:function(S){return B((0,i.Z)((0,i.Z)({},a),{},{description:S,page_num:1}))}})},width:160,ellipsis:{showTitle:!1},render:function(f){return(0,e.jsx)(mn.Z,{title:f})}},{title:(0,e.jsx)(r._H,{id:"device.tag"}),dataIndex:"tag_list",width:240,ellipsis:{showTitle:!1},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:a!=null&&a.tags&&(a==null?void 0:a.tags.length)>0?"#1890ff":void 0}})},filterDropdown:function(f){var c=f.confirm;return(0,e.jsx)(Ar.Z,{value:a==null?void 0:a.tags,ws_id:V,run_mode:"standalone",confirm:c,onConfirm:function(S){B((0,i.Z)((0,i.Z)({},a),{},{page_num:1,tags:S}))}})},render:function(f){return(0,e.jsx)(Wr.Z,{list:f.map(function(c){return(0,e.jsx)(ar.Z,{color:c.tag_color,children:c.name},c.name)})})}},{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),fixed:"right",width:O?320:260,key:"operation",ellipsis:{showTitle:!1},render:function(f,c){return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(le.Z.Link,{onClick:function(){return $.current.show(f.id)},children:(0,e.jsx)(r._H,{id:"operation.detail"})}),(0,e.jsx)(r.Nv,{accessible:C.WsMemberOperateSelf(c.owner),fallback:(0,e.jsxs)(xe.Z,{onClick:function(){return(0,we.WR)()},children:[(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"device.synchronization.state"})}),(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"operation.delete"})}),(0,e.jsx)(le.Z.Link,{onClick:c.sub_server_list&&c.device_type==="\u7269\u7406\u673A"?function(){return!1}:function(){return(0,we.WR)()},children:(0,e.jsx)(r._H,{id:"device.synchronization"})})]}),children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(le.Z.Link,{onClick:function(){return vr(f)},children:(0,e.jsx)(r._H,{id:"device.synchronization.state"})}),(0,e.jsx)(le.Z.Link,{onClick:function(){return Je(f)},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(le.Z.Link,{onClick:function(){return he((0,i.Z)({},c))},children:(0,e.jsx)(r._H,{id:"operation.delete"})}),!1]})}),(0,e.jsx)(le.Z.Link,{onClick:function(){return sn(f.id)},children:(0,e.jsx)(r._H,{id:"operation.log"})})]})}}];return(0,e.jsxs)(Ke.Z,{spinning:G,tip:l({id:"device.Synchronizing"}),children:[(0,e.jsx)(Gr.sL,{loading:g,rowKey:"id",columns:Hr,name:"ws-server-group-standalone-list",refreshDeps:[a,V,C,O],pagination:!1,size:"small",className:zr().pro_table_card,dataSource:k,rowSelection:{selectedRowKeys:q,onChange:br},expandable:{childrenColumnName:"sub_server_list",defaultExpandAllRows:!0,expandedRowKeys:ge,expandIcon:function(){return!1}},scroll:{x:"100%",y:innerHeight-50-66-30-20}}),(0,e.jsx)(Nr.Z,{pageSize:a==null?void 0:a.page_size,currentPage:a==null?void 0:a.page_num,total:Y,onPageChange:Ze}),(0,e.jsx)(_r.Z,{ref:_e,operation_object:"machine_test_server"}),Array.isArray(q)&&!!q.length?(0,e.jsxs)(U.Z,{justify:"space-between",style:{paddingRight:20,height:64,position:"absolute",left:0,bottom:-24,width:"100%",background:"#fff",paddingLeft:24,boxShadow:"0 -9px 28px 8px rgba(0,0,0,0.05), 0 -6px 16px 0 rgba(0,0,0,0.08), 0 -3px 6px -4px rgba(0,0,0,0.12)"},children:[(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(qe.Z,{indeterminate:!0}),(0,e.jsx)(le.Z.Text,{children:l({id:"device.selected.item"},{data:q.length})}),(0,e.jsx)(re.Z,{type:"link",onClick:function(){return Oe([])},children:(0,e.jsx)(r._H,{id:"operation.cancel"})})]}),(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:function(){return Je({selectRowKeys:q,opreateType:"moreEdit"})},children:(0,e.jsx)(r._H,{id:"batch.edit"})}),!1]})]}):null,(0,e.jsx)(pn,{onFinish:M,run_environment:"aligroup",run_mode:"standalone",ref:p}),(0,e.jsx)(Mr,{ref:$}),(0,e.jsxs)(sr.Z,{title:(0,e.jsx)(r._H,{id:"delete.tips"}),centered:!0,open:Pe,onCancel:function(){return _(!1)},footer:[(0,e.jsx)(re.Z,{onClick:function(){return ae(N.id)},children:(0,e.jsx)(r._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(re.Z,{type:"primary",onClick:function(){return _(!1)},children:(0,e.jsx)(r._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(Er.Z,{style:{marginRight:4}}),(0,e.jsx)(r._H,{id:"device.delete.tips"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:fr,children:(0,e.jsx)(r._H,{id:"view.quote.details"})})]}),(0,e.jsx)(Yr.Z,{ref:d,onOk:function(f){return ae(f.id)}}),(0,e.jsx)(wn,{ref:De,onOk:M})]})},Hn=(0,n.forwardRef)(bn),In=s(45969),Jr=s.n(In),On=s(81343),vt=s(8281),Dn=s(58591),Tn=s(29197),Rn=(0,n.memo)(function(w){var I=(0,n.useState)([]),H=(0,o.Z)(I,2),y=H[0],l=H[1],O=(0,n.useState)([]),t=(0,o.Z)(O,2),V=t[0],J=t[1],ne=function(){var Z=(0,Q.Z)((0,u.Z)().mark(function j(){var k,te,K,W=arguments;return(0,u.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return k=W.length>0&&W[0]!==void 0?W[0]:"",D.next=3,(0,Tn.tR)({keyword:k,scope:"aligroup"});case 3:te=D.sent,K=te.data,l(K);case 6:case"end":return D.stop()}},j)}));return function(){return Z.apply(this,arguments)}}();(0,n.useEffect)(function(){ne()},[]);var C=function(){var j;(j=w.confirm)===null||j===void 0||j.call(w),w.onOk(V)};return(0,e.jsxs)(U.Z,{style:{padding:8,width:170},children:[(0,e.jsx)("div",{style:{width:"100%"},children:(0,e.jsx)(Ie.Z,{style:{width:"100%"},onSearch:ne,size:"small",mode:"multiple",value:V,onChange:function(j){return J(j)},children:y.map(function(Z){return(0,e.jsx)(Ie.Z.Option,{value:Z.id,children:Z.last_name},Z.id)})})}),(0,e.jsx)(Dn.Z,{style:{margin:"5px 0"}}),(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{size:"small",type:"link",style:{width:75},onClick:C,children:(0,e.jsx)(r._H,{id:"operation.search"})}),(0,e.jsx)(re.Z,{size:"small",type:"link",style:{width:75},onClick:function(){return J([])},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})]})}),pt=null,En=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=(0,Me.UO)(),t=O.ws_id,V=I.onFinish,J=(0,n.useState)({list:[],isQuery:""}),ne=(0,o.Z)(J,2),C=ne[0],Z=ne[1],j=(0,n.useState)(!1),k=(0,o.Z)(j,2),te=k[0],K=k[1],W=(0,n.useState)(!1),g=(0,o.Z)(W,2),D=g[0],se=g[1],fe=(0,n.useState)(null),ge=(0,o.Z)(fe,2),ve=ge[0],T=ge[1],be=z.Z.useForm(),G=(0,o.Z)(be,1),R=G[0],E=function(){R.resetFields(),se(!1),T(null)};(0,n.useImperativeHandle)(H,function(){return{show:function(pe){if(se(!0),pe){T(pe);var X=pe,ye=X.tag_list.map(function(q){return q.id});X.tags=ye,Z((0,i.Z)((0,i.Z)({},C),{},{isQuery:"edit",list:ye})),R.setFieldsValue(X)}else Z((0,i.Z)((0,i.Z)({},C),{},{isQuery:"add",list:[]}))}}});var je=function(){K(!0),R.validateFields().then(function(){var pe=(0,Q.Z)((0,u.Z)().mark(function X(ye){var q;return(0,u.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(ve){A.next=6;break}return A.next=3,(0,de.iv)((0,i.Z)((0,i.Z)({},ye),{},{cluster_type:"aligroup",ws_id:t}));case 3:q=A.sent,A.next=9;break;case 6:return A.next=8,(0,de.Oq)(ve.id,(0,i.Z)((0,i.Z)({},ye),{},{ws_id:t}));case 8:q=A.sent;case 9:q.code===200?(ue.default.success(l({id:"operation.success"})),V(),E()):(0,we.EV)(q.code,q.msg),K(!1);case 11:case"end":return A.stop()}},X)}));return function(X){return pe.apply(this,arguments)}}()).catch(function(pe){console.log(pe),K(!1)})};return(0,e.jsx)(nr.Z,{maskClosable:!1,keyboard:!1,title:ve?(0,e.jsx)(r._H,{id:"device.cluster.edit"}):(0,e.jsx)(r._H,{id:"device.cluster.btn"}),forceRender:!0,open:D,onClose:E,width:"376",destroyOnClose:!0,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:E,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{type:"primary",disabled:te,onClick:je,children:ve?(0,e.jsx)(r._H,{id:"operation.update"}):(0,e.jsx)(r._H,{id:"operation.ok"})})]})}),children:(0,e.jsxs)(z.Z,{layout:"vertical",form:R,name:"createGroup",children:[(0,e.jsx)(z.Z.Item,{name:"name",label:(0,e.jsx)(r._H,{id:"device.cluster.name.s"}),rules:[{message:l({id:"device.cluster.name.s.message"}),required:!0}],children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:l({id:"please.enter"})})}),D&&(0,e.jsx)(Sr.Z,{}),(0,e.jsx)(Lr.Z,(0,i.Z)({},C)),(0,e.jsx)(z.Z.Item,{name:"description",label:(0,e.jsx)(r._H,{id:"device.description"}),children:(0,e.jsx)(Le.Z.TextArea,{placeholder:l({id:"device.description.placeholder"})})})]})})},Fn=(0,n.forwardRef)(En),ht=s(88966),$e=s(11048),mt=s(47721),Mn=s(47152),Pn=s(25034),Xr=s.n(Pn),Ln=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=(0,r.tT)("disclaimer"),t=O.openModal,V=O.handleDisclaimerOpen,J=I.onFinish,ne=(0,Me.UO)(),C=ne.ws_id,Z=z.Z.useForm(),j=(0,o.Z)(Z,1),k=j[0],te=(0,n.useState)([]),K=(0,o.Z)(te,2),W=K[0],g=K[1],D=(0,n.useState)({success:[],errors:[]}),se=(0,o.Z)(D,2),fe=se[0],ge=se[1],ve=(0,n.useState)(""),T=(0,o.Z)(ve,2),be=T[0],G=T[1],R=(0,n.useState)(!0),E=(0,o.Z)(R,2),je=E[0],Y=E[1],pe=(0,n.useState)(!1),X=(0,o.Z)(pe,2),ye=X[0],q=X[1],Oe=(0,n.useState)(!1),A=(0,o.Z)(Oe,2),Ve=A[0],Pe=A[1],_={ws_id:C,page_num:1,page_size:500},v=(0,n.useState)(null),F=(0,o.Z)(v,2),N=F[0],ke=F[1],$=function(){var ee=(0,Q.Z)((0,u.Z)().mark(function M(Ze){return(0,u.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,de.Zu)(Ze);case 2:return he.abrupt("return",he.sent);case 3:case"end":return he.stop()}},M)}));return function(Ze){return ee.apply(this,arguments)}}();(0,n.useImperativeHandle)(H,function(){return{show:function(M){Pe(!0),Y(!0),$(_).then(function(Ze){if(Ze.code===200){var Fe=[];!!Ze.data.length&&Ze.data.map(function(he){Fe.push({value:he.ip}),he.sub_server_list.length&&he.sub_server_list.map(function(Be){return Fe.push({value:Be.ip})})}),g(Fe)}else(0,we.EV)(Ze.code,Ze.msg);Y(!1)}),M&&ke(M)}}});var p=function(M){var Ze=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,Fe=Ze.test(M);Fe&&$((0,i.Z)((0,i.Z)({},_),{},{ip:M})).then(function(he){if(he.code===200&&!!he.data.length){var Be=he.data[0];Be.in_pool?(ge({success:[],errors:[]}),k.setFieldsValue({channel_type:Be.channel_type}),k.setFieldsValue({state:Be.state}),q(!0)):q(!1)}else q(!1)})},d=function(M){p(M)},x=function(M){p(M)},b=function(){k.resetFields(),q(!1),Pe(!1),ke(null)},a=function(){k.validateFields().then(function(){var M=(0,Q.Z)((0,u.Z)().mark(function Ze(Fe){var he;return(0,u.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,de.O3)((0,i.Z)((0,i.Z)({},Fe),{},{ws_id:C,cluster_id:N.id,cluster_type:"aligroup"}));case 2:he=ae.sent,he.code===200?(J(N.id),ue.default.success(l({id:"operation.success"})),b()):(0,we.EV)(he.code,he.msg);case 4:case"end":return ae.stop()}},Ze)}));return function(Ze){return M.apply(this,arguments)}}()).catch(function(M){console.log(M)})},B=(0,n.useCallback)(function(ee){ee&&a()},[N]),De=function(M){var Ze=M.data;return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)("span",{children:Ze.msg[0]}),(0,e.jsx)(We.Z,{title:Ze.msg[1],children:(0,e.jsx)("span",{style:{color:"#1890ff"},children:(0,e.jsx)(r._H,{id:"device.detail.info"})})})]})},_e=function(){var ee=(0,Q.Z)((0,u.Z)().mark(function M(){var Ze,Fe,he;return(0,u.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!je){ae.next=2;break}return ae.abrupt("return");case 2:if(Y(!0),Ze=k.getFieldValue("ip"),Fe=k.getFieldValue("channel_type"),!(Fe&&Ze&&Ze.length>0)){ae.next=19;break}return ae.prev=6,ae.next=9,(0,de.bD)({ips:[Ze],channel_type:Fe,ws_id:C});case 9:if(ae.t0=ae.sent,ae.t0){ae.next=12;break}ae.t0={};case 12:he=ae.t0,he.code===200&&(ge((0,i.Z)({},he.data)),G((0,e.jsx)(De,{data:he}))),ae.next=19;break;case 16:ae.prev=16,ae.t1=ae.catch(6),Y(!1);case 19:Y(!1);case 20:case"end":return ae.stop()}},M,null,[[6,16]])}));return function(){return ee.apply(this,arguments)}}(),Ae=function(){k.getFieldValue("channel_type")};return(0,e.jsxs)(nr.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(r._H,{id:"device.add.btn"}),forceRender:!0,open:Ve,width:"376",onClose:b,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:b,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{type:"primary",onClick:V,children:(0,e.jsx)(r._H,{id:"operation.ok"})})]})}),children:[(0,e.jsx)(Ke.Z,{spinning:je,children:(0,e.jsxs)(z.Z,{layout:"vertical",form:k,className:Xr().add_server_form,children:[ye&&(0,e.jsx)(U.Z,{style:{marginBottom:10},children:(0,e.jsxs)(m.Z,{children:[(0,e.jsx)("span",{style:{color:"red",marginRight:10},children:"*"}),(0,e.jsx)(r._H,{id:"device.poolFlag"})]})}),(0,e.jsx)(z.Z.Item,{name:"ip",label:(0,e.jsx)(r._H,{id:"device.machine"}),validateStatus:fe.errors.length>0?"error":"",help:fe.errors.length>0?be:void 0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9IP".concat("")}],children:(0,e.jsx)(Mn.Z,{options:W,style:{width:"100%"},onSelect:d,onSearch:x,onBlur:function(){return Ae()},placeholder:l({id:"device.machine.select.message"})})}),(0,e.jsx)(z.Z.Item,{name:"channel_type",initialValue:"toneagent",label:(0,e.jsx)(r._H,{id:"device.channel_type"}),rules:[{required:!0,message:l({id:"device.channel_type.message"})}],children:(0,e.jsx)(ur.k,{disabled:"opensource"})}),(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.usage.state"}),name:"state",rules:[{required:!0,message:l({id:"device.usage.state.message"})}],initialValue:"Available",children:(0,e.jsxs)(Ie.Z,{placeholder:(0,e.jsx)(r._H,{id:"device.usage.state.message"}),disabled:ye,children:[(0,e.jsx)(Ie.Z.Option,{value:"Available",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Available"})}),(0,e.jsx)(Ie.Z.Option,{value:"Reserved",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Reserved"})}),(0,e.jsx)(Ie.Z.Option,{value:"Unusable",children:(0,e.jsx)(Ge.Z,{status:"default",text:"Unusable"})})]})}),(0,e.jsx)(z.Z.Item,{name:"private_ip",label:(0,e.jsx)(r._H,{id:"device.private_ip"}),children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:l({id:"device.private_ip.placeholder"})})}),(0,e.jsx)(z.Z.Item,{name:"role",label:(0,e.jsx)(r._H,{id:"device.role"}),rules:[{required:!0,message:l({id:"placeholder.enter.device.role"})}],children:(0,e.jsxs)(Ie.Z,{getPopupContainer:function(M){return M.parentNode},placeholder:(0,e.jsx)(r._H,{id:"device.role.placeholder"}),children:[(0,e.jsx)(Ie.Z.Option,{value:"local",children:"local"}),(0,e.jsx)(Ie.Z.Option,{value:"remote",children:"remote"})]})}),(0,e.jsx)(Sr.Z,{}),(0,e.jsx)(z.Z.Item,{name:"baseline_server",label:(0,e.jsx)(r._H,{id:"device.baseline_server"}),initialValue:!1,children:(0,e.jsxs)($e.ZP.Group,{children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(r._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(r._H,{id:"operation.no"})})]})}),(0,e.jsx)(z.Z.Item,{name:"kernel_install",label:(0,e.jsx)(r._H,{id:"device.kernel_install"}),initialValue:!1,children:(0,e.jsxs)($e.ZP.Group,{children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(r._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(r._H,{id:"operation.no"})})]})}),(0,e.jsx)(z.Z.Item,{name:"var_name",label:(0,e.jsx)(r._H,{id:"device.var_name"}),rules:[{required:!0,message:l({id:"placeholder.enter.device.var_name"})}],children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:l({id:"please.enter"})})})]})}),t&&(0,e.jsx)(Vr.Z,{onOk:B})]})},Vn=(0,n.forwardRef)(Ln),xt=s(20632),An=s(71853),Nn=s(488),qr=s(5888),en=s(38755),$n=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=I.handleOk,t=(0,Me.UO)(),V=t.ws_id,J=z.Z.useForm(),ne=(0,o.Z)(J,1),C=ne[0],Z=(0,n.useState)(!1),j=(0,o.Z)(Z,2),k=j[0],te=j[1],K=(0,n.useState)(null),W=(0,o.Z)(K,2),g=W[0],D=W[1],se=(0,n.useState)(!1),fe=(0,o.Z)(se,2),ge=fe[0],ve=fe[1];(0,n.useImperativeHandle)(H,function(){return{show:function(R){if(ve(!0),R){D(R);var E=R.test_server,je=E.ip,Y=E.private_ip;C.setFieldsValue((0,i.Z)((0,i.Z)({},R),{},{ip:je,private_ip:Y}))}}}});var T=function(){ve(!1),D(null),C.resetFields()},be=function(){te(!0),C.validateFields().then(function(){var R=(0,Q.Z)((0,u.Z)().mark(function E(je){var Y;return(0,u.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,de.AW)(g.id,(0,i.Z)((0,i.Z)({},je),{},{ws_id:V}));case 2:Y=X.sent,Y.code===200?(O(),T()):(0,we.EV)(Y.code,Y.msg),te(!1);case 5:case"end":return X.stop()}},E)}));return function(E){return R.apply(this,arguments)}}()).catch(function(){te(!1)})};return(0,e.jsx)(nr.Z,{maskClosable:!1,keyboard:!1,title:(0,e.jsx)(r._H,{id:"device.device.edit"}),forceRender:!0,open:ge,width:"376",destroyOnClose:!0,onClose:T,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{onClick:T,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(re.Z,{type:"primary",disabled:k,onClick:be,children:(0,e.jsx)(r._H,{id:"operation.update"})})]})}),children:(0,e.jsxs)(z.Z,{layout:"vertical",form:C,children:[(0,e.jsx)(z.Z.Item,{name:"ip",label:(0,e.jsx)(r._H,{id:"device.machine"}),children:(0,e.jsx)(Le.Z,{disabled:!0})}),(0,e.jsx)(z.Z.Item,{name:"private_ip",label:(0,e.jsx)(r._H,{id:"device.private_ip.ip"}),children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:l({id:"device.private_ip.ip.placeholder"})})}),(0,e.jsx)(z.Z.Item,{name:"channel_type",initialValue:"toneagent",label:(0,e.jsx)(r._H,{id:"device.channel_type"}),rules:[{required:!0,message:l({id:"device.channel_type.message"})}],children:(0,e.jsx)(ur.k,{disabled:"opensource"})}),(0,e.jsx)(z.Z.Item,{label:(0,e.jsx)(r._H,{id:"device.usage.state"}),name:"state",hasFeedback:!0,rules:[{required:!0,message:l({id:"device.usage.state.message"})}],initialValue:"Available",children:(0,e.jsxs)(Ie.Z,{placeholder:l({id:"device.usage.state.message"}),children:[(0,e.jsx)(Ie.Z.Option,{value:"Available",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Available"})}),(0,e.jsx)(Ie.Z.Option,{value:"Reserved",children:(0,e.jsx)(Ge.Z,{status:"success",text:"Reserved"})}),(0,e.jsx)(Ie.Z.Option,{value:"Unusable",children:(0,e.jsx)(Ge.Z,{status:"default",text:"Unusable"})})]})}),(0,e.jsx)(z.Z.Item,{name:"baseline_server",label:(0,e.jsx)(r._H,{id:"device.baseline_server"}),children:(0,e.jsxs)($e.ZP.Group,{children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(r._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(r._H,{id:"operation.no"})})]})}),(0,e.jsx)(z.Z.Item,{name:"kernel_install",label:(0,e.jsx)(r._H,{id:"device.kernel_install"}),children:(0,e.jsxs)($e.ZP.Group,{children:[(0,e.jsx)($e.ZP,{value:!0,children:(0,e.jsx)(r._H,{id:"operation.yes"})}),(0,e.jsx)($e.ZP,{value:!1,children:(0,e.jsx)(r._H,{id:"operation.no"})})]})}),(0,e.jsx)(z.Z.Item,{name:"var_name",label:(0,e.jsx)(r._H,{id:"device.var_name"}),rules:[{required:!0,message:l({id:"placeholder.enter.device.var_name"})}],children:(0,e.jsx)(Le.Z,{autoComplete:"off",placeholder:l({id:"please.enter"})})})]})})},Bn=(0,n.forwardRef)($n),Un=s(2368),rn=s.n(Un),zn=["test_server"],Kn=function(w){var I=(0,r.YB)(),H=I.formatMessage,y=(0,r.Kd)()==="en-US",l=(0,Me.UO)(),O=l.ws_id,t=(0,r.md)(),V=(0,n.useState)(!0),J=(0,o.Z)(V,2),ne=J[0],C=J[1],Z=(0,n.useState)([]),j=(0,o.Z)(Z,2),k=j[0],te=j[1],K=(0,n.useState)(),W=(0,o.Z)(K,2),g=W[0],D=W[1],se=(0,n.useState)({first:46.6,next:49}),fe=(0,o.Z)(se,2),ge=fe[0],ve=fe[1],T="url(".concat(rn(),") no-repeat center center / 100% 100%"),be="url(".concat(rn(),") no-repeat center center / 98% 100%"),G=(0,n.useRef)(),R=(0,n.useRef)(),E=(0,n.useRef)(),je=(0,n.useCallback)(function(_){E.current.show(_)},[]),Y=function(){var _=(0,Q.Z)((0,u.Z)().mark(function v(){var F,N;return(0,u.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return C(!0),$.next=3,(0,de.Y_)(w.id);case 3:F=$.sent,N=F.data,te(N),C(!1);case 7:case"end":return $.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),pe=function(){var _=(0,Q.Z)((0,u.Z)().mark(function v(F){var N,ke,$;return(0,u.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,de.vu)({server_id:F.server_id,server_provider:"aligroup"});case 2:N=d.sent,ke=N.code,$=N.msg,ke===200?(ue.default.success(H({id:"device.synchronization.state.success"})),D(new Date().getTime())):(0,we.EV)(ke,$);case 6:case"end":return d.stop()}},v)}));return function(F){return _.apply(this,arguments)}}(),X=(0,n.useCallback)(function(_){G.current.show(_)},[]),ye=function(v){v.code===200?(D(new Date().getTime()),ue.default.success(H({id:"operation.success"}))):(0,we.EV)(v.code,v.msg)},q=(0,n.useCallback)(function(){var _=(0,Q.Z)((0,u.Z)().mark(function v(F){var N;return(0,u.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return w.onSyncServer(!0),$.next=3,(0,de.EK)(F);case 3:N=$.sent,ye(N),w.onSyncServer(!1);case 6:case"end":return $.stop()}},v)}));return function(v){return _.apply(this,arguments)}}(),[]),Oe=function(){var _=(0,Q.Z)((0,u.Z)().mark(function v(F){var N;return(0,u.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,de.Du)(F,{ws_id:O});case 2:N=$.sent,ye(N);case 4:case"end":return $.stop()}},v)}));return function(F){return _.apply(this,arguments)}}(),A=(0,n.useCallback)((0,Q.Z)((0,u.Z)().mark(function _(){return(0,u.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Y();case 1:case"end":return F.stop()}},_)})),[]);(0,n.useEffect)(function(){w.size==="middle"?ve({first:46.6,next:49}):w.size==="small"?ve({first:39,next:41}):w.size==="large"&&ve({first:54.6,next:57})},[w.size]);var Ve=function(){var _=(0,Q.Z)((0,u.Z)().mark(function v(F,N){var ke,$,p,d,x;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return ke=F.test_server,$=(0,Nn.Z)(F,zn),p=(0,i.Z)((0,i.Z)({},$),ke),d=N==="role"?(0,i.Z)((0,i.Z)({},p),{},{role:"local"}):(0,i.Z)((0,i.Z)({},p),{},{baseline_server:1}),a.next=5,(0,de.AW)(F.id,d);case 5:x=a.sent,x.code===200?(ue.default.success(H({id:"operation.success"})),Y()):(0,we.EV)(x.code,x.msg);case 7:case"end":return a.stop()}},v)}));return function(F,N){return _.apply(this,arguments)}}(),Pe=[{title:"IP",width:170,fixed:"left",key:"ip",render:function(v){return(0,e.jsx)(dr.Z,{provider:"aligroup",val:v.test_server.ip})}},{title:"SN",width:150,ellipsis:{showTitle:!1},key:"sn",render:function(v){return(0,e.jsx)(dr.Z,{provider:"aligroup",val:v.test_server.sn})}},{title:"TSN",width:150,ellipsis:{showTitle:!1},key:"tsn",render:function(v){return(0,e.jsx)(wr.K,{ellipsis:{tooltip:!0},children:v.test_server.tsn})}},!1,{title:(0,e.jsx)(r._H,{id:"device.private_ip.s"}),width:160,key:"private_ip",render:function(v){return v.test_server.private_ip||"-"}},!1,{title:(0,e.jsx)(r._H,{id:"device.channel_type"}),width:100,key:"channel_type",render:function(v,F){return F.test_server.channel_type||"-"}},{title:(0,e.jsx)(r._H,{id:"device.local.server"}),dataIndex:"role",width:120,align:"center",render:function(v,F){return F.role==="local"?(0,e.jsx)(qr.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(en.Z,{onClick:function(){return Ve(F,"role")},style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"}})}},{title:(0,e.jsx)(r._H,{id:"device.baseline_server"}),dataIndex:"baseline_server",width:y?150:120,align:"center",render:function(v,F){return v?(0,e.jsx)(qr.Z,{style:{width:17.5,height:17.5,color:"#1890ff"}}):(0,e.jsx)(en.Z,{onClick:function(){return Ve(F,"baseline_server")},style:{cursor:"pointer",width:17.5,height:17.5,color:"rgba(0,0,0,.1)"}})}},{title:(0,e.jsx)(r._H,{id:"device.kernel_install"}),dataIndex:"kernel_install",width:130,render:function(v){return v?(0,e.jsx)(r._H,{id:"operation.yes"}):(0,e.jsx)(r._H,{id:"operation.no"})}},{title:(0,e.jsx)(r._H,{id:"device.var_name"}),dataIndex:"var_name",width:y?160:120,render:function(v){return v||"-"}},{title:(0,e.jsx)(r._H,{id:"device.usage.state"}),width:120,key:"state",render:function(v){return(0,ir.Ul)(v.test_server.state,v.test_server,O)}},{title:(0,e.jsx)(r._H,{id:"device.real_state"}),width:160,key:"real_state",render:function(v){return(0,ir.Ul)(v.test_server.real_state,v.test_server,O)}},{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),fixed:"right",width:y?260:230,align:"center",key:"operation",render:function(v,F){return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(le.Z.Link,{onClick:function(){return R.current.show(v.test_server.id)},children:(0,e.jsx)(r._H,{id:"operation.detail"})}),(0,e.jsx)(r.Nv,{accessible:t.WsMemberOperateSelf(F.test_server.owner),fallback:(0,e.jsxs)(xe.Z,{onClick:function(){return(0,we.WR)()},children:[(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"device.synchronization.state"})}),(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"operation.delete"})}),!1]}),children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(le.Z.Link,{onClick:function(){return pe(v)},children:(0,e.jsx)(r._H,{id:"device.synchronization.state"})}),(0,e.jsx)(le.Z.Link,{onClick:function(){return je(v)},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(An.Z,{title:H({id:"delete.prompt"},{data:F.test_server.ip}),okText:(0,e.jsx)(r._H,{id:"operation.ok"}),cancelText:(0,e.jsx)(r._H,{id:"operation.cancel"}),onConfirm:function(){return Oe(v.id)},children:(0,e.jsx)(le.Z.Link,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})}),!1]})}),(0,e.jsx)(le.Z.Link,{onClick:function(){return X(v.id)},children:(0,e.jsx)(r._H,{id:"operation.log"})})]})}}];return(0,n.useEffect)(function(){Y()},[g]),(0,n.useEffect)(function(){w.refreshChild===w.id&&(Y(),setTimeout(function(){return w.resetRefresh(null)},300))},[w.refreshChild]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,e.jsxs)("div",{style:{width:47,background:"#fff"},children:[(0,e.jsx)("div",{style:{height:ge.first,background:be}}),k.length>0&&k.map(function(_,v){return(0,e.jsx)("div",{style:{height:ge.next,background:T}},v)})]}),(0,e.jsx)("div",{style:{width:"calc(100% - 47px)"},children:(0,e.jsx)(Gr.sL,{rowKey:"id",columns:Pe,name:"ws-server-group-cluster-child",refreshDeps:[t,O,y],loading:ne,dataSource:k,size:"small",pagination:!1,rowClassName:function(){return Xr().row_class}})})]}),(0,e.jsx)(_r.Z,{ref:G,operation_object:"machine_cluster_aligroup_server"}),(0,e.jsx)(Mr,{ref:R}),(0,e.jsx)(Bn,{handleOk:A,ref:E})]})},Wn=function(){var I=(0,Me.TH)(),H=I.query,y=(0,Me.UO)(),l=y.ws_id,O={ws_id:l,page_num:1,page_size:10,cluster_type:"aligroup"},t=(0,n.useState)(!0),V=(0,o.Z)(t,2),J=V[0],ne=V[1],C=(0,n.useState)((0,i.Z)((0,i.Z)({},O),H)),Z=(0,o.Z)(C,2),j=Z[0],k=Z[1],te=(0,n.useState)(),K=(0,o.Z)(te,2),W=K[0],g=K[1],D=(0,n.useState)(),se=(0,o.Z)(D,2),fe=se[0],ge=se[1],ve=function(){var T=(0,Q.Z)((0,u.Z)().mark(function be(){var G;return(0,u.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return ne(!0),E.next=3,(0,de.wV)(j);case 3:G=E.sent,ne(!1),ge(G),r.m8.replace("/ws/".concat(l,"/device/group?").concat((0,Qr.stringify)(j)));case 7:case"end":return E.stop()}},be)}));return function(){return T.apply(this,arguments)}}();return(0,n.useEffect)(function(){ve()},[W,j]),{loading:J,params:j,dataSource:fe,refresh:W,setRefresh:g,setParams:k}},Gn=s(91959),Yn=function(I,H){var y=(0,r.YB)(),l=y.formatMessage,O=(0,Me.UO)(),t=O.ws_id,V=(0,r.md)(),J=Wn(),ne=J.loading,C=J.dataSource,Z=J.params,j=J.setParams,k=J.setRefresh,te=(0,n.useState)(!1),K=(0,o.Z)(te,2),W=K[0],g=K[1],D=(0,n.useState)(null),se=(0,o.Z)(D,2),fe=se[0],ge=se[1],ve=(0,n.useState)(!1),T=(0,o.Z)(ve,2),be=T[0],G=T[1],R=(0,n.useState)({}),E=(0,o.Z)(R,2),je=E[0],Y=E[1],pe=(0,n.useRef)(),X=(0,n.useRef)(null),ye=(0,n.useRef)(null),q=(0,n.useRef)(null);(0,n.useImperativeHandle)(H,function(){return{open:X.current.show}});var Oe=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(x){var b;return(0,u.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return Y(x),B.next=3,(0,de.Z9)({server_id:x.id,run_mode:"cluster",server_provider:"aligroup"});case 3:b=B.sent,b.data.length>0?G(!0):q.current.show(x,"(".concat(x.name,")"));case 5:case"end":return B.stop()}},d)}));return function(x){return p.apply(this,arguments)}}(),A=function(d){d.code===200?(k(new Date().getTime()),ue.default.success(l({id:"operation.success"})),G(!1)):(0,we.EV)(d.code,d.msg)},Ve=function(d){ye.current.show(d)},Pe=(0,n.useCallback)(function(p){X.current.show(p)},[]),_=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(x){var b;return(0,u.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,de.Rq)(x);case 2:b=B.sent,A(b);case 4:case"end":return B.stop()}},d)}));return function(x){return p.apply(this,arguments)}}(),v=function(){var p=(0,Q.Z)((0,u.Z)().mark(function d(){var x;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,we.MR)({name:je.name,id:je.id});case 2:x=a.sent,x&&window.open("/ws/".concat(t,"/refenerce/5/?pk=").concat(x));case 4:case"end":return a.stop()}},d)}));return function(){return p.apply(this,arguments)}}(),F=function(d){ge(d)},N=(0,n.useCallback)(function(p){pe.current.show(p)},[]),ke=(0,n.useCallback)(function(p){g(p)},[]),$=[{title:(0,e.jsx)(r._H,{id:"device.cluster.name"}),dataIndex:"name",render:function(d){return(0,e.jsx)(le.Z.Text,{ellipsis:{tooltip:!0},children:d})},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:Z!=null&&Z.name?"#1890ff":void 0}})},filterDropdown:function(d){var x=d.confirm;return(0,e.jsx)(lr.Z,{confirm:x,onConfirm:function(a){return j((0,i.Z)((0,i.Z)({},Z),{},{page_num:1,name:a}))}})}},{title:"Owner",width:150,dataIndex:"owner_name",filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:Z!=null&&Z.owner?"#1890ff":void 0}})},filterDropdown:function(d){var x=d.confirm;return(0,e.jsx)(Rn,{confirm:x,onOk:function(a){return j((0,i.Z)((0,i.Z)({},Z),{},{page_num:1,owner:a}))}})}},{title:(0,e.jsx)(r._H,{id:"device.tag"}),dataIndex:"tag_list",width:240,render:function(d){return(0,e.jsx)(Wr.Z,{list:d.map(function(x){return(0,e.jsx)(ar.Z,{color:x.tag_color,children:x.name},(0,Gn.Z)())})})},filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:Z!=null&&Z.tags?"#1890ff":void 0}})},filterDropdown:function(d){var x=d.confirm;return(0,e.jsx)(Ar.Z,{ws_id:t,confirm:x,onConfirm:function(a){j((0,i.Z)((0,i.Z)({},Z),{},{page_num:1,tags:a}))}})}},{title:(0,e.jsx)(r._H,{id:"device.description"}),width:300,dataIndex:"description",filterIcon:function(){return(0,e.jsx)(Ne.Z,{style:{color:Z!=null&&Z.description?"#1890ff":void 0}})},filterDropdown:function(d){var x=d.confirm;return(0,e.jsx)(lr.Z,{confirm:x,onConfirm:function(a){return j((0,i.Z)((0,i.Z)({},Z),{},{page_num:1,description:a}))}})},render:function(d){return(0,e.jsx)(wr.K,{ellipsis:{tooltip:!0},children:d})}},{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),width:190,render:function(d,x){return(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return Ve(d)},children:(0,e.jsx)(r._H,{id:"operation.add"})}),(0,e.jsx)(r.Nv,{accessible:V.WsMemberOperateSelf(x.owner),fallback:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return(0,we.WR)()},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return(0,we.WR)()},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return Pe(d)},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return Oe((0,i.Z)({},x))},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]})}),(0,e.jsx)(re.Z,{type:"link",style:{padding:0},onClick:function(){return N(d.id)},children:(0,e.jsx)(r._H,{id:"operation.log"})})]})}}];return(0,e.jsxs)(Qe.Z.Content,{className:Jr().table,children:[(0,e.jsxs)(Ke.Z,{spinning:W,tip:l({id:"device.Synchronizing"}),children:[(0,e.jsx)(Kr.Z,{style:{width:"100%"},loading:ne,rowKey:"id",columns:$,dataSource:(C==null?void 0:C.data)||[],pagination:!1,scroll:{y:innerHeight-50-66-30-20},size:"small",className:Jr().pro_table_card,expandable:{expandedRowRender:function(d){return(0,e.jsx)(Kn,(0,i.Z)((0,i.Z)({refreshChild:fe},d),{},{resetRefresh:ge,size:"small",onSyncServer:ke}),d.id)},expandIcon:function(d){var x=d.expanded,b=d.onExpand,a=d.record;return(0,e.jsx)(On.Z,{rotate:x?90:0,style:{cursor:"pointer"},onClick:function(De){return b(a,De)}})}}}),(0,e.jsx)(Nr.Z,{pageSize:C==null?void 0:C.page_size,currentPage:C==null?void 0:C.page_num,total:C==null?void 0:C.total,onPageChange:function(d){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;j((0,i.Z)((0,i.Z)({},Z),{},{page_num:d,page_size:x}))}})]}),(0,e.jsx)(_r.Z,{ref:pe,operation_object:"machine_cluster_aligroup"}),(0,e.jsx)(Fn,{run_environment:"aligroup",run_mode:"cluster",ref:X,onFinish:function(){k(new Date().getTime())}}),(0,e.jsx)(Vn,{onFinish:F,run_environment:"aligroup",run_mode:"cluster",ref:ye}),(0,e.jsxs)(sr.Z,{title:(0,e.jsx)(r._H,{id:"delete.tips"}),centered:!0,open:be,onCancel:function(){return G(!1)},footer:[(0,e.jsx)(re.Z,{onClick:function(){return _(je.id)},children:(0,e.jsx)(r._H,{id:"operation.confirm.delete"})},"submit"),(0,e.jsx)(re.Z,{type:"primary",onClick:function(){return G(!1)},children:(0,e.jsx)(r._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)(Er.Z,{style:{marginRight:4}}),(0,e.jsx)(r._H,{id:"device.cluster.delete.tips"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:v,children:(0,e.jsx)(r._H,{id:"view.quote.details"})})]}),(0,e.jsx)(Yr.Z,{ref:q,onOk:function(d){var x=d.id;return _(x)}})]})},Qn=(0,n.forwardRef)(Yn),Jn=s(75073),Xn=s(97939),nn,qn=(0,Xn.ZP)(Jn.mQ)(nn||(nn=(0,xr.Z)([`
    margin-bottom: 20px !important;
    .ant-card-body {
        padding: 0;
    }
`]))),et=function(I){var H=(0,Me.TH)(),y=H.query.t,l=(0,n.useState)(y!=null?y:"standalone"),O=(0,o.Z)(l,2),t=O[0],V=O[1],J=(0,n.useState)(new Date().getTime()),ne=(0,o.Z)(J,2),C=ne[0],Z=ne[1],j=function(D){V(D),Z(new Date().getTime())},k=(0,n.useRef)(null),te=(0,n.useRef)(),K=(0,n.useCallback)(function(){k.current.open()},[]),W=(0,n.useCallback)(function(){te.current.open()},[]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qn,{title:(0,e.jsxs)(rr.Z,{defaultActiveKey:"standalone",activeKey:t,onTabClick:j,children:[(0,e.jsx)(rr.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"standalone"})},"standalone"),(0,e.jsx)(rr.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"cluster"})},"cluster")]}),extra:t==="standalone"?(0,e.jsx)(re.Z,{type:"primary",onClick:K,children:(0,e.jsx)(r._H,{id:"device.add.btn"})},"1"):(0,e.jsx)(re.Z,{type:"primary",onClick:W,children:(0,e.jsx)(r._H,{id:"device.cluster.btn"})},"2")}),(0,e.jsx)("div",{style:{paddingLeft:20,paddingRight:20},children:t==="standalone"?(0,e.jsx)(Hn,(0,i.Z)((0,i.Z)({ref:k},I),{},{onTabClick:j})):(0,e.jsx)(Qn,(0,i.Z)((0,i.Z)({ref:te},I),{},{onTabClick:j}))},C)]})},rt=et},47152:function(ze,tr,s){"use strict";var i=s(29700),hr=s(42098),re=s(85628),mr=s(68591),rr=s.n(mr),o=s(1155),xr=s(12784),n=s(22374),Me=s(53532),r=s(33821),Zr=s(83325),Ke=r.Z.Option;function gr(qe){return qe&&qe.type&&(qe.type.isSelectOption||qe.type.isSelectOptGroup)}var sr=function(Ye,Ir){var Or=Ye.prefixCls,le=Ye.className,Dr=Ye.popupClassName,ar=Ye.dropdownClassName,yr=Ye.children,xe=Ye.dataSource,er=(0,o.Z)(yr),We;if(er.length===1&&(0,Zr.l$)(er[0])&&!gr(er[0])){var Tr=(0,re.Z)(er,1);We=Tr[0]}var U=We?function(){return We}:void 0,or;return er.length&&gr(er[0])?or=yr:or=xe?xe.map(function(ue){if((0,Zr.l$)(ue))return ue;switch((0,hr.Z)(ue)){case"string":return n.createElement(Ke,{key:ue,value:ue},ue);case"object":{var u=ue.value;return n.createElement(Ke,{key:u,value:u},ue.text)}default:return}}):[],n.createElement(Me.C,null,function(ue){var u=ue.getPrefixCls,Q=u("select",Or);return n.createElement(r.Z,(0,i.Z)({ref:Ir},(0,xr.Z)(Ye,["dataSource"]),{prefixCls:Q,popupClassName:Dr||ar,className:rr()("".concat(Q,"-auto-complete"),le),mode:r.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:U}),or)})},jr=n.forwardRef(sr);jr.Option=Ke,tr.Z=jr},47721:function(ze,tr,s){"use strict";var i=s(49132),hr=s.n(i),re=s(51812),mr=s.n(re),rr=s(69230)}}]);
