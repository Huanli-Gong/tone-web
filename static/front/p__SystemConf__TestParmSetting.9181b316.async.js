(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5837],{95779:function(B,Y,t){"use strict";t.d(Y,{Z:function(){return X}});var J=t(45972),W=t(22374),$={icon:function(Q,H){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:Q}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z",fill:H}},{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:Q}}]}},name:"plus-circle",theme:"twotone"},L=$,oe=t(25078),G=function(Q,H){return W.createElement(oe.Z,(0,J.Z)((0,J.Z)({},Q),{},{ref:H,icon:L}))};G.displayName="PlusCircleTwoTone";var X=W.forwardRef(G)},51672:function(B){B.exports={ellipsis:"ellipsis___2ZImK"}},4730:function(B){B.exports={part_title:"part_title___2o2oM",line:"line___2hjGI"}},32147:function(B){B.exports={test_parm:"test_parm___HRe5n",config_lable:"config_lable___3XLR1",config_lable_push:"config_lable_push___2giuz",del_icon:"del_icon___30JHH",add_space:"add_space___1IT_B",add_pushconfig:"add_pushconfig___2G_0W",push_config_row:"push_config_row___3SS5S",push_config_box:"push_config_box___3E4PJ",push_check_row:"push_check_row___gMqWM",button:"button___2YGss",sync_info:"sync_info___20iwE",question_tip_layout:"question_tip_layout___ONP1G",question_icon:"question_icon___ISexc",question_tip_wrapper:"question_tip_wrapper___1yfJD",w_384:"w_384___3azkB",question_tip_container:"question_tip_container___R8sXr",push_job_modal:"push_job_modal___26Rmv",modal_Title:"modal_Title___2BiKa",option_label_item:"option_label_item___RsbXx",option_label_item_success:"option_label_item_success___3xGGm",success_icon:"success_icon___3fzcl"}},44180:function(B){B.exports={compare_job:"compare_job___3bD8C",title:"title___fU75R",content:"content___fD2Mn",nogroup_content:"nogroup_content___1lRs0",group_box:"group_box___ohHG2",group_content:"group_content___B4Aqq",compare_title:"compare_title___1mL_U",title_text:"title_text___1xccI",create_group:"create_group___2li-H",popover:"popover___2MjY4",nogroup_info:"nogroup_info___3kXOZ",first_part:"first_part___1QwZk",group_type:"group_type___SKwoZ",cancle_group:"cancle_group___38Xwx",rightExpandButtom:"rightExpandButtom___2Akb0",group_info:"group_info___2-DfG",line:"line___2BHWZ",workspace_name:"workspace_name___18spx",workspace_name_en:"workspace_name_en___3kpLu",baseGroupColorFn:"baseGroupColorFn___1RhBy",baselineColorFn:"baselineColorFn___2mVC-",current:"current___1RrBA",icon:"icon___2u2fe",base_workspace_name:"base_workspace_name___3dTrN",opreate_button:"opreate_button___2hxuY",baseTag:"baseTag___2OLNv",blink:"blink___zmN1S",second_part:"second_part___L6lxW",create_job_type:"create_job_type___1Uj1t",footer_part:"footer_part___g710Y",bottom:"bottom___29-Uz",popover_group:"popover_group___10k1j",popover_mark:"popover_mark___7LgCY",popover_create:"popover_create___3wNKi",master_prover:"master_prover___QOpDL",addJobBtn:"addJobBtn___29Lxo",eidt_marked:"eidt_marked___3dU2f",list_container:"list_container___1USu2",select_product:"select_product___bYxsb",job_text:"job_text___RZHzC",job_test:"job_test___2jx_p",footer:"footer___2OO2k",text_cancle:"text_cancle___34wHS",text_num:"text_num___3midy",footer_line:"footer_line___3luii",baseline_group_modal:"baseline_group_modal___32ciF",bottom_button:"bottom_button___gSnZ5",job_Modal:"job_Modal___qvF1C",suit_detail:"suit_detail___R4Sh8",tab_title:"tab_title___2qXLL",Panel:"Panel___Dv6t6",conf_item_box:"conf_item_box___3BROC",ellipsis:"ellipsis___1yBlF",add_baseline_drawer:"add_baseline_drawer___1cq-K",pers_select:"pers_select___3n1ZU",steps:"steps___3aKRN",steps_en:"steps_en___S_YTZ",popover_job:"popover_job___fyg3-",scroll:"scroll___39SXB",ConfColum:"ConfColum___fIZho",groupOptionIconStyle:"groupOptionIconStyle___2l2p0"}},89901:function(B,Y,t){"use strict";var J=t(79625),W=t(96584),$=t(39190),L=t(22374),oe=t(51672),G=t.n(oe),X=t(52454),te=function(H){var ve=H.title,ie=H.width,Ee=ie===void 0?"100%":ie,k=H.children,Se=H.refData,Z=H.customStyle,ge=Z||{width:Ee},U=(0,L.useRef)(null),we=(0,L.useState)(!1),ce=(0,$.Z)(we,2),Te=ce[0],ue=ce[1],Pe=function(){var z=U.current.clientWidth,Ne=U.current.scrollWidth;ue(z<Ne)};(0,L.useEffect)(function(){Pe()},[Se]);var de=function(){return k?L.cloneElement(k):ve||"-"};return Te?(0,X.jsx)(W.Z,{placement:"topLeft",title:ve,children:(0,X.jsx)("div",{ref:U,className:G().ellipsis,style:ge,children:de()})}):(0,X.jsx)("div",{ref:U,className:G().ellipsis,style:ge,children:de()})};Y.Z=te},78974:function(B,Y,t){"use strict";var J=t(4730),W=t.n(J),$=t(52454);Y.Z=function(L){return(0,$.jsxs)("div",{className:W().part_title,children:[L.text,L.children,(0,$.jsx)("div",{className:W().line})]})}},14202:function(B,Y,t){"use strict";t.r(Y),t.d(Y,{default:function(){return Ut}});var J=t(16832),W=t(69827),$=t(67448),L=t(47548),oe=t(46721),G=t(94867),X=t(57359),te=t(34423),Q=t(8281),H=t(58591),ve=t(40118),ie=t(29966),Ee=t(14320),k=t(53479),Se=t(70772),Z=t(6701),ge=t(88966),U=t(11048),we=t(53374),ce=t(61674),Te=t(67515),ue=t(12238),Pe=t(20693),de=t(3278),Fe=t(69230),z=t(33821),Ne=t(81138),_e=t(96146),ne=t(26388),m=t(35832),S=t(32326),Ge=t(65790),b=t(17187),j=t(13059),P=t(53676),C=t(73124),w=t(91771),v=t(20418),E=t(39190),ye=t(31650),fe=t(25100),_=t(22374),q=t(74066),je=t(95779),pe,Ze=["svgRef","title"];function ae(){return ae=Object.assign?Object.assign.bind():function(f){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(f[g]=c[g])}return f},ae.apply(this,arguments)}function Xe(f,u){if(f==null)return{};var c=Oe(f,u),g,i;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(f);for(i=0;i<A.length;i++)g=A[i],!(u.indexOf(g)>=0)&&(!Object.prototype.propertyIsEnumerable.call(f,g)||(c[g]=f[g]))}return c}function Oe(f,u){if(f==null)return{};var c={},g=Object.keys(f),i,A;for(A=0;A<g.length;A++)i=g[A],!(u.indexOf(i)>=0)&&(c[i]=f[i]);return c}var Ie=function(u){var c=u.svgRef,g=u.title,i=Xe(u,Ze);return _.createElement("svg",ae({width:"20px",height:"20px",viewBox:"0 0 20 20",ref:c},i),g?_.createElement("title",null,g):null,pe||(pe=_.createElement("g",{id:"\\u4F7F\\u7528\\u5E2E\\u52A9",stroke:"none",strokeWidth:1,fillRule:"evenodd"},_.createElement("g",{id:"\\u6309\\u4E0B\\u62D6\\u52A8\\u8C03\\u6392\\u5E8F",transform:"translate(-329.000000, -243.000000)",fillRule:"nonzero"},_.createElement("g",{id:"\\u4F7F\\u7528\\u5E2E\\u52A9",transform:"translate(21.000000, 105.000000)"},_.createElement("g",{id:"\\u5185\\u5BB9\\u533A",transform:"translate(0.000000, 57.000000)"},_.createElement("g",{id:"\\u4E8C\\u7EA7\\u83DC\\u5355-\\u9009\\u4E2D",transform:"translate(0.000000, 73.000000)"},_.createElement("g",{id:"ellipsis",transform:"translate(318.000000, 18.000000) rotate(-270.000000) translate(-318.000000, -18.000000) translate(308.000000, 8.000000)"},_.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:19.2,height:19.2}),_.createElement("path",{d:"M3.3,9.58125 C3.3,9.95637887 3.50012886,10.3030123 3.82499999,10.4905767 C4.14987113,10.6781411 4.55012887,10.6781411 4.87500001,10.4905767 C5.19987114,10.3030123 5.4,9.95637887 5.4,9.58125 C5.4,9.20612113 5.19987114,8.85948775 4.87500001,8.67192331 C4.55012887,8.48435887 4.14987113,8.48435887 3.82499999,8.67192331 C3.50012886,8.85948775 3.3,9.20612113 3.3,9.58125 L3.3,9.58125 Z M8.55,9.58125 C8.55,10.161149 9.02010101,10.63125 9.6,10.63125 C10.179899,10.63125 10.65,10.161149 10.65,9.58125 C10.65,9.00135101 10.179899,8.53125 9.6,8.53125 C9.02010101,8.53125 8.55,9.00135101 8.55,9.58125 Z M13.8,9.58125 C13.8,10.161149 14.270101,10.63125 14.85,10.63125 C15.429899,10.63125 15.9,10.161149 15.9,9.58125 C15.9,9.00135101 15.429899,8.53125 14.85,8.53125 C14.270101,8.53125 13.8,9.00135101 13.8,9.58125 Z",id:"\\u5F62\\u72B6",opacity:.449999988})))))))))},ee=_.forwardRef(function(f,u){return _.createElement(Ie,ae({svgRef:u},f))}),Qe=t.p+"static/ellipsis.e53dfdb5.svg",re=t(89901),Ce=t(78974),De=t(32147),T=t.n(De),qe=t(97207),h=t.n(qe),Me=t(68591),et=t.n(Me),y=t(22812),M=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(){return(0,m.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,y.WY)("/api/sys/test_farm/"));case 1:case"end":return g.stop()}},u)}));return function(){return f.apply(this,arguments)}}(),tt=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/test_farm/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),nt=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/push_config/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),at=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/push_config/",{method:"put",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),Le=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/push_config/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),Ae=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/workspace/list/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),rt=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/project/list/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),st=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/portal_test/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),se=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/push_job/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),K=function(){var f=(0,S.Z)((0,m.Z)().mark(function u(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,y.WY)("/api/sys/push_job/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return f.apply(this,arguments)}}(),le=t(25399),pt=t.n(le),Rt=t(44180),lt=t.n(Rt),e=t(52454),Wt=function(f){var u=(0,_.useState)(!1),c=(0,E.Z)(u,2),g=c[0],i=c[1],A=f.current,x=f.currentIndex,xe=f.contentMark,$e=f.handleEllipsis,He=f.currentEditGroupIndex,be=f.iconStyles,ot=be===void 0?{}:be,Be=f.typeName,Re=function(){i(!1)};(0,_.useEffect)(function(){return window.addEventListener("click",Re,!1),function(){window.removeEventListener("click",Re,!1)}},[]);var it=function(We){We.stopPropagation(),i(!0),$e(A,x)};return(0,e.jsx)(P.Z,{trigger:"click",placement:"bottom",content:xe,overlayClassName:"".concat(lt().popover_mark," ").concat(lt()[Be]),open:g&&He===x,children:(0,e.jsx)(ee,{className:lt().icon,onClick:it,style:ot})})},me=t(39935),mt=fe.Z.Text,kt=function(u){var c=(0,_.useState)(!1),g=(0,E.Z)(c,2),i=g[0],A=g[1],x=u.style||{};return(0,e.jsx)("div",{className:T().question_tip_container,children:(0,e.jsxs)("span",{className:T().question_tip_layout,onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},children:[(0,e.jsx)(q.Z,{className:T().question_icon}),(0,e.jsx)("div",{style:(0,v.Z)({display:i?"block":"none"},x),className:et()(T().question_tip_wrapper,T().w_384),children:(0,e.jsx)("p",{children:u.tip})})]})})},Yt=function(){var u=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.ZP,{status:"success",className:T().success_icon}),(0,e.jsx)("span",{className:T().icon_des,children:(0,e.jsx)(y._H,{id:"testfarm.job.has.been.pushed"})})]})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:T().modal_Title,children:(0,e.jsx)(y._H,{id:"testfarm.manual.push"})}),(0,e.jsx)(P.Z,{content:u,children:(0,e.jsx)(q.Z,{className:T().question_icon})})]})},Ve=null;function Jt(f,u){Ve&&clearTimeout(Ve),Ve=setTimeout(function(){f(1,u),Ve=null},200)}var Ut=function(f){var u=(0,y.YB)(),c=u.formatMessage,g=(0,y.Kd)()==="en-US",i=b.Z.useForm(),A=(0,E.Z)(i,1),x=A[0],xe=(0,_.useState)({}),$e=(0,E.Z)(xe,2),He=$e[0],be=$e[1],ot=(0,_.useState)([]),Be=(0,E.Z)(ot,2),Re=Be[0],it=Be[1],ct=(0,_.useState)({}),We=(0,E.Z)(ct,2),O=We[0],ut=We[1],zt=(0,_.useState)(!0),ht=(0,E.Z)(zt,2),Kt=ht[0],ke=ht[1],Gt=(0,_.useState)(0),vt=(0,E.Z)(Gt,2),gt=vt[0],_t=vt[1],Xt=(0,_.useState)(!1),yt=(0,E.Z)(Xt,2),Qt=yt[0],jt=yt[1],qt=(0,_.useState)([]),Zt=(0,E.Z)(qt,2),Ct=Zt[0],Ye=Zt[1],en=(0,_.useState)(1),xt=(0,E.Z)(en,2),bt=xt[0],Et=xt[1],tn=(0,_.useState)(""),St=(0,E.Z)(tn,2),wt=St[0],Tt=St[1],nn=(0,_.useState)(!1),Pt=(0,E.Z)(nn,2),an=Pt[0],Ft=Pt[1],rn=(0,_.useState)(!1),Nt=(0,E.Z)(rn,2),sn=Nt[0],Ot=Nt[1],ln=(0,_.useState)(!0),It=(0,E.Z)(ln,2),on=It[0],Dt=It[1],Je=(0,_.useRef)(null),Mt=function(a){switch(a){case"url":return c({id:"testfarm.url.placeholder"});case"token":return c({id:"please.enter"});case"job":return c({id:"testfarm.job.name.rules.placeholder"});case"project":return c({id:"testfarm.project.placeholder"});default:return c({id:"please.enter"})}},cn=function(a){switch(a){case"job":return(0,e.jsx)(y._H,{id:"testfarm.job.name.rules"});case"token":return"Token";case"url":return(0,e.jsx)(y._H,{id:"testfarm.testfarm.url"});case"systemName":return(0,e.jsx)(y._H,{id:"testfarm.systemName"});default:return""}},un=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(){var n,s;return(0,m.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,M();case 2:return n=l.sent,s=n.data,l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),dt=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(){var n,s,r,l;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,M();case 2:if(n=d.sent,s=n.data,r=n.code,l=n.msg,r===200){d.next=8;break}return d.abrupt("return",(0,me.EV)(r,l));case 8:ut(s);case 9:case"end":return d.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),dn=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(){var n,s;return(0,m.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Ae({page_num:1,page_size:200});case 2:return n=l.sent,s=n.data,l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),Lt=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n){var s,r,l,p,d,I,V,F,N;return(0,m.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(s=n.ws_id,r=n.project_id,l=n.job_name_rule,p=n.index,d=n.sync_start_time,!s){D.next=8;break}return D.next=4,rt({ws_id:s});case 4:I=D.sent,V=I.data,F=I.code,F===200&&be(function(R){return(0,v.Z)((0,v.Z)({},R),{},(0,ne.Z)({},s,V))});case 8:N=h().cloneDeep(x.getFieldsValue()),N&&N.pushconfig&&(N.pushconfig[p]={workspace:s,project:Number(r)||void 0,job:l,startTime:d&&pt()(d)}),x.setFieldsValue(N);case 11:case"end":return D.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),Ue=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n){var s,r,l;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,tt(n);case 2:s=d.sent,r=s.code,l=s.data,r===200&&ut(l);case 6:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),fn=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n){var s,r,l;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,at(n);case 2:s=d.sent,r=s.code,l=s.msg,r===200&&dt(),r!==200&&(0,me.EV)(r,l);case 7:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}();(0,_.useEffect)(function(){Promise.all([un(),dn()]).then(function(o){var a=h().cloneDeep(x.getFieldsValue());a.siteconfig=[{primarySite:o[0].is_major?1:0,url:o[0].site_url||"",token:o[0].site_token||"",systemName:o[0].business_system_name||""}],x.setFieldsValue(a),ut(o[0]),it(o[1]),ke(!1)}).catch(function(o){ke(!1),_e.default.error(c({id:"request.failed"})),console.log(o)})},[]),(0,_.useEffect)(function(){if(h().isArray(O.push_config_list))O.push_config_list.forEach(function(a,n){a&&Lt({ws_id:a.ws_id,project_id:a.project_id,job_name_rule:a.job_name_rule,index:n,sync_start_time:a.sync_start_time})});else{var o=h().cloneDeep(x.getFieldsValue());o.pushconfig=[{workspace:void 0,project:void 0,job:"",startTime:void 0}],x.setFieldsValue(o),be({})}},[O]);var ze=function(a,n){var s={},r=h().get(a,"pushconfig[".concat(n,"]"));if(r){var l="";h().isArray(r.project)?r.project.forEach(function(d,I){I===0&&(l=d),I>0&&(l="".concat(l,",").concat(d))}):l=r.project,s={ws_id:r.workspace,project_id:l||"",job_name_rule:r.job,sync_start_time:r.startTime&&pt()(r.startTime).format("YYYY-MM-DD HH:mm:ss")}}var p=h().get(O,"push_config_list[".concat(n,"].id"));fn((0,v.Z)((0,v.Z)({},s),{},{push_config_id:p}))},pn=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n){var s,r,l;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Le(n);case 2:s=d.sent,r=s.code,l=s.msg,r===200&&dt(),r!==200&&(0,me.EV)(r,l);case 7:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),mn=function(a){var n=h().cloneDeep(x.getFieldsValue());n.siteconfig=[(0,v.Z)((0,v.Z)({},n.siteconfig[0]),{},{primarySite:a.target.value})],x.setFieldsValue(n),Ue({is_major:!!a.target.value,site_id:O.id})},At=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n,s,r,l){var p,d,I,V,F,N;return(0,m.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:p=h().cloneDeep(x.getFieldsValue()),l==="workspace"?(Lt({job_name_rule:(d=p.pushconfig[r])===null||d===void 0?void 0:d.job,ws_id:n,project_id:"",index:r,sync_start_time:(I=p.pushconfig[r])===null||I===void 0?void 0:I.startTime}),p.pushconfig[r]=(0,v.Z)((0,v.Z)({},p.pushconfig[r]),{},(V={},(0,ne.Z)(V,l,n||""),(0,ne.Z)(V,"project",void 0),V)),ze(p,r)):(F="",h().isArray(n)?n.forEach(function(R,Bt){Bt===0&&(F=R),Bt>0&&(F="".concat(F,",").concat(R))}):F=n,N=h().cloneDeep(p),p.pushconfig[r]=(0,v.Z)((0,v.Z)({},p.pushconfig[r]),{},(0,ne.Z)({},l,n||void 0)),N.pushconfig[r]=(0,v.Z)((0,v.Z)({},p.pushconfig[r]),{},(0,ne.Z)({},l,F||"")),x.setFieldsValue(p),ze(N,r));case 2:case"end":return D.stop()}},a)}));return function(n,s,r,l){return o.apply(this,arguments)}}(),hn=function(a){var n=a.map(function(s){return s.disabled=!1,s});return n},vn=function(a,n,s){var r=[];if(h().isArray(x.getFieldsValue().pushconfig)&&x.getFieldsValue().pushconfig[n]){var l=x.getFieldsValue().pushconfig[n].workspace;r=h().isArray(He[l])?He[l]:[]}return(0,e.jsx)(b.Z.Item,{name:[a.name,s],children:(0,e.jsx)(z.Z,{showSearch:!0,allowClear:!0,onChange:h().partial(At,h(),h(),n,s),placeholder:Mt(s),filterOption:function(d,I){return I.children.toLowerCase().indexOf(d.toLowerCase())>=0},optionFilterProp:"children",children:r.map(function(p){return(0,e.jsx)(z.Z.Option,{value:p.id,children:p.name},p.id)})})})},Vt=function(a,n,s){var r=h().cloneDeep(x.getFieldsValue());n==="url"&&(r.siteconfig=[(0,v.Z)((0,v.Z)({},r.siteconfig[0]),{},{url:a.target.value})],x.setFieldsValue(r),Ue({site_url:a.target.value,site_id:O.id})),n==="token"&&(r.siteconfig=[(0,v.Z)((0,v.Z)({},r.siteconfig[0]),{},{token:a.target.value})],x.setFieldsValue(r),Ue({site_token:a.target.value,site_id:O.id})),n==="systemName"&&(r.siteconfig=[(0,v.Z)((0,v.Z)({},r.siteconfig[0]),{},{systemName:a.target.value})],x.setFieldsValue(r),Ue({business_system_name:a.target.value,site_id:O.id})),n==="job"&&(r.pushconfig[s]=(0,v.Z)((0,v.Z)({},r.pushconfig[s]),{},{job:a.target.value}),x.setFieldsValue(r),ze(r,s))},gn=function(a,n,s){a.target.value||Vt(a,n,s)},Ke=function(a,n,s){return(0,e.jsx)(b.Z.Item,{name:[a.name,s],label:cn(s),required:s==="job",children:(0,e.jsx)(de.Z,{allowClear:!0,onChange:h().partial(gn,h(),s,n),placeholder:Mt(s),onBlur:h().partial(Vt,h(),s,n)})})},_n=function(a,n,s){var r=h().cloneDeep(x.getFieldsValue());r.pushconfig[s]=(0,v.Z)((0,v.Z)({},r.pushconfig[s]),{},{startTime:a}),x.setFieldsValue(r),ze(r,s)},$t=function(){Tt(""),Et(1),Ft(!1),_t(0),Ye([]),jt(!1),ue.Z.destroyAll()},yn=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(){var n,s,r;return(0,m.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return Ot(!0),p.next=3,K({job_id:wt});case 3:n=p.sent,s=n.code,r=n.msg,Ot(!1),s===200&&(_e.default.success(r||c({id:"push.success"})),$t()),s!==200&&(0,me.EV)(s,r);case 9:case"end":return p.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),ft=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(){var n,s,r,l,p,d,I,V,F,N=arguments;return(0,m.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(n=N.length>0&&N[0]!==void 0?N[0]:1,s=N.length>1&&N[1]!==void 0?N[1]:void 0,!(O&&h().isArray(O.push_config_list))){D.next=14;break}return r=h().get(O.push_config_list[gt],"id"),Dt(!0),D.next=7,se({push_config_id:r,page_num:n,filter_job:s});case 7:l=D.sent,p=l.code,d=l.data,I=l.msg,V=l.page_num,Dt(!1),p===200?(F=h().isArray(d)?d:[],F=F.map(function(R){return(0,v.Z)((0,v.Z)({},R),{},{name:"#".concat(R.id,"  ").concat(R.name)})}),n===1&&Ye(F),n!==1&&Ye(function(R){return h().unionBy(R,F,"id")}),Et(V+1),F.length||Ft(!0)):(Ye([]),(0,me.EV)(p,I));case 14:case"end":return D.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),jn=function(a){var n=x.getFieldsValue(),s=n&&n.pushconfig,r=!0;return h().isArray(s)&&s.length&&(r=!h().get(s[a],"workspace")),r},Zn=function(a){var n=h().get(O,"push_config_list[".concat(a,"].job_info"));return n},Cn=function(){ft(),jt(!0)},xn=function(a,n){_t(n)},bn=function(a){var n=a.target,s=n.clientHeight,r=n.scrollHeight,l=n.scrollTop;s+l+1>=r&&!h().isNaN(bt)&&!an&&ft(bt,Je.current)},En=function(a){Tt(h().get(a,"value")||"")},Ht=function(a){var n=a&&a.replace(/\s*/g,"");Je&&Je.current===n||(Je.current=n,Jt(ft,n))},Sn=function(){Ht()},wn=function(){var o=(0,S.Z)((0,m.Z)().mark(function a(n){var s,r,l;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,nt({site_id:O==null?void 0:O.id});case 2:s=d.sent,r=s.code,r===200&&(dt(),l=h().cloneDeep(x.getFieldsValue()),l.pushconfig.push({workspace:"",project:void 0,job:""}),n());case 5:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}();return(0,e.jsx)(W.Z.Content,{children:(0,e.jsx)(L.Z,{spinning:Kt,children:(0,e.jsxs)("div",{className:T().test_parm,children:[(0,e.jsxs)(b.Z,{form:x,initialValues:{siteconfig:[{primarySite:"",url:"",token:"",systemName:""}],pushconfig:[{workspace:"",project:"",job:""}]},labelCol:{span:4},wrapperCol:{span:g?20:14},colon:!1,requiredMark:!0,children:[(0,e.jsxs)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:T().site_config_row,children:[(0,e.jsx)(Ce.Z,{text:(0,e.jsx)(y._H,{id:"testfarm.site.selection"})}),(0,e.jsx)(ce.Z,{message:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y._H,{id:"testfarm.last.synchronization.time"}),"\uFF1A",O.last_sync_time||"-"]}),type:"success",showIcon:!0,style:{marginBottom:16,width:"100%"}}),(0,e.jsx)(b.Z.Item,{label:"",children:(0,e.jsx)(b.Z.List,{name:"siteconfig",children:function(a){return a.map(function(n,s){return(0,e.jsxs)(k.Z,{gutter:10,style:{marginBottom:8},children:[(0,e.jsx)(Z.Z,{span:24,style:{display:"flex"},children:(0,e.jsx)(b.Z.Item,{name:[n.name,"primarySite"],label:(0,e.jsx)(y._H,{id:"testfarm.is_main_site"}),children:(0,e.jsxs)(U.ZP.Group,{onChange:mn,children:[(0,e.jsx)(U.ZP,{value:1,children:(0,e.jsx)(y._H,{id:"operation.yes"})}),(0,e.jsx)(U.ZP,{value:0,children:(0,e.jsx)(y._H,{id:"operation.no"})})]})})}),(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[Ke(n,s,"url"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(ee,{})})]}),(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[Ke(n,s,"token"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(ee,{})})]}),(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[Ke(n,s,"systemName"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(ee,{})})]})]},n.key)})}})})]}),(0,e.jsxs)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:T().push_config_row,children:[(0,e.jsx)(Ce.Z,{text:c({id:"testfarm.push.configuration"}),children:(0,e.jsx)(kt,{tip:c({id:"testfarm.specify.project"}),style:{lineHeight:"20px",textAlign:"left",width:"250px"}})}),(0,e.jsx)(b.Z.Item,{label:"",labelAlign:"left",children:(0,e.jsx)(b.Z.List,{name:"pushconfig",children:function(a,n){var s=n.add,r=n.remove;return a.map(function(l,p){var d,I=jn(p),V=Zn(p);return(0,e.jsxs)("div",{className:T().push_config_box,children:[(O==null||(d=O.push_config_list)===null||d===void 0?void 0:d.length)>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[(0,e.jsx)(b.Z.Item,{name:[l.name,"workspace"],label:"Workspace",labelAlign:"left",required:!0,children:(0,e.jsx)(z.Z,{showSearch:!0,onChange:h().partial(At,h(),h(),p,"workspace"),placeholder:(0,e.jsx)(y._H,{id:"please.select.workspace"}),allowClear:!0,filterOption:function(N,he){return he.children.toLowerCase().indexOf(N.toLowerCase())>=0},optionFilterProp:"children",children:hn(h().cloneDeep(Re)).map(function(F){return(0,e.jsx)(z.Z.Option,{value:F.id,disabled:F.disabled,children:F.show_name},F.id)})})}),(0,e.jsx)(Wt,{iconStyles:{transform:"translateY(6px)",cursor:"pointer",marginLeft:2},currentIndex:p,contentMark:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{onClick:I?function(){return null}:h().partial(Cn),style:{cursor:I?"default":"pointer",color:I?"rgba(0,0,0,0.35)":"rgba(0,0,0,0.85)"},children:(0,e.jsx)(y._H,{id:"testfarm.manual.push"})}),p>0&&(0,e.jsx)("p",{style:{color:"#FF4D4F"},onClick:function(){var N=h().cloneDeep(x.getFieldsValue());N.pushconfig=N.pushconfig.filter(function(D,R){return R!==p});var he=h().get(O,"push_config_list[".concat(p,"].id"));pn({push_config_id:he}),r(l.name)},children:(0,e.jsx)(y._H,{id:"operation.remove"})})]}),handleEllipsis:xn,typeName:g?"master_prover_en":"master_prover",currentEditGroupIndex:gt})]}),(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[(0,e.jsx)(b.Z.Item,{name:[l.name,"project"],label:"Project",required:!0,children:vn(l,p,"project")}),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(ee,{})})]}),(0,e.jsxs)(Z.Z,{span:24,style:{display:"flex"},children:[Ke(l,p,"job"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(ee,{})})]}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(b.Z.Item,{name:[l.name,"startTime"],label:(0,e.jsx)(y._H,{id:"testfarm.synchronization.start_time"}),children:(0,e.jsx)(ie.Z,{allowClear:!1,onChange:h().partial(_n,h(),h(),p),showTime:!0,placeholder:g?"Start Time":void 0})})}),(0,e.jsx)(Z.Z,{span:24,style:{display:"flex"},children:V&&(0,e.jsxs)(mt,{className:T().sync_info,children:[(0,e.jsx)(y._H,{id:"testfarm.job.information"}),"\uFF1A#".concat(V.job_id,"  ").concat(V.job_name)]})})]}),p<a.length-1&&(0,e.jsx)(H.Z,{dashed:!0,style:{margin:"22px 0 22px 0"}}),p===a.length-1&&(0,e.jsxs)(te.Z,{className:T().add_space,onClick:h().partial(wn,s),children:[(0,e.jsx)(je.Z,{}),(0,e.jsx)(mt,{className:T().add_pushconfig,children:(0,e.jsx)(y._H,{id:"testfarm.push.configuration.add"})})]})]},l.key)})}})})]}),(0,e.jsx)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:T().push_check_row,children:(0,e.jsxs)(Z.Z,{span:24,children:[(0,e.jsx)(Ce.Z,{text:(0,e.jsx)(y._H,{id:"testfarm.push.validation"})}),(0,e.jsx)(b.Z.Item,{children:(0,e.jsxs)("div",{className:T().button,children:[(0,e.jsx)(G.Z,{type:"primary",onClick:(0,S.Z)((0,m.Z)().mark(function o(){var a,n,s;return(0,m.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return ke(!0),l.next=3,st();case 3:a=l.sent,n=a.code,s=a.msg,n===200?_e.default.success(c({id:"testfarm.data.link.is.normal"})):(0,me.EV)(n,s||c({id:"testfarm.data.link.is.abnormal"})),ke(!1);case 8:case"end":return l.stop()}},o)})),children:(0,e.jsx)(y._H,{id:"testfarm.Test"})}),(0,e.jsx)("p",{children:(0,e.jsx)(y._H,{id:"testfarm.confirm.whether.the.process.is.feasible"})})]})})]})})]}),(0,e.jsx)(ue.Z,{title:Yt(),open:Qt,maskClosable:!1,width:480,className:T().push_job_modal,destroyOnClose:!0,onCancel:$t,onOk:yn,confirmLoading:sn,centered:!0,okButtonProps:{disabled:!wt},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{marginBottom:8},children:(0,e.jsx)(y._H,{id:"testfarm.job"})}),(0,e.jsx)(z.Z,(0,v.Z)((0,v.Z)({allowClear:!0,style:{width:"100%"},placeholder:(0,e.jsx)(y._H,{id:"testfarm.please.select.job"}),showSearchnotFoundContent:on?(0,e.jsx)(L.Z,{size:"small"}):null,onChange:En,labelInValue:!0,filterOption:!1,showSearch:!0,onSearch:Ht,onPopupScroll:bn,onClear:Sn,showArrow:!1,autoFocus:!0,optionLabelProp:"label"},f),{},{children:Ct.map(function(o){return(0,e.jsx)(z.Z.Option,{value:o.id,label:o.name,children:(0,e.jsxs)("div",{className:T().option_label_item,children:[(0,e.jsx)(re.Z,{customStyle:{width:"calc(100% - 32px)"},title:o.name,refData:Ct,children:(0,e.jsx)("span",{"aria-label":o.name,children:o.name})}),o.sync_time&&(0,e.jsx)("span",{role:"img","aria-label":o.name,className:T().option_label_item_success,children:(0,e.jsx)(w.ZP,{status:"success"})})]})},o.id)})}))]})})]})})})}},61674:function(B,Y,t){"use strict";t.d(Y,{Z:function(){return Ge}});var J=t(29700),W=t(85628),$=t(77335),L=t(5888),oe=t(38755),G=t(11273),X=t(90770),te=t(53770),Q=t(13598),H=t(46601),ve=t(25407),ie=t(51767),Ee=t(68591),k=t.n(Ee),Se=t(51572),Z=t(22374),ge=t(53532),U=t(24875),we=t(83325),ce=t(52318),Te=t(31279),ue=t(31762),Pe=t(51129),de=function(b){(0,ue.Z)(P,b);var j=(0,Pe.Z)(P);function P(){var C;return(0,ce.Z)(this,P),C=j.apply(this,arguments),C.state={error:void 0,info:{componentStack:""}},C}return(0,Te.Z)(P,[{key:"componentDidCatch",value:function(w,v){this.setState({error:w,info:v})}},{key:"render",value:function(){var w=this.props,v=w.message,E=w.description,ye=w.children,fe=this.state,_=fe.error,q=fe.info,je=q&&q.componentStack?q.componentStack:null,pe=typeof v=="undefined"?(_||"").toString():v,Ze=typeof E=="undefined"?je:E;return _?Z.createElement(Ge,{type:"error",message:pe,description:Z.createElement("pre",null,Ze)}):ye}}]),P}(Z.Component),Fe=de,z=function(b,j){var P={};for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&j.indexOf(C)<0&&(P[C]=b[C]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,C=Object.getOwnPropertySymbols(b);w<C.length;w++)j.indexOf(C[w])<0&&Object.prototype.propertyIsEnumerable.call(b,C[w])&&(P[C[w]]=b[C[w]]);return P},Ne={success:L.Z,info:ve.Z,error:G.Z,warning:Q.Z},_e={success:oe.Z,info:ie.Z,error:X.Z,warning:H.Z},ne=function(j){var P=j.description,C=j.icon,w=j.prefixCls,v=j.type,E=(P?_e:Ne)[v]||null;return C?(0,we.wm)(C,Z.createElement("span",{className:"".concat(w,"-icon")},C),function(){return{className:k()("".concat(w,"-icon"),(0,$.Z)({},C.props.className,C.props.className))}}):Z.createElement(E,{className:"".concat(w,"-icon")})},m=function(j){var P=j.isClosable,C=j.closeText,w=j.prefixCls,v=j.closeIcon,E=j.handleClose;return P?Z.createElement("button",{type:"button",onClick:E,className:"".concat(w,"-close-icon"),tabIndex:0},C?Z.createElement("span",{className:"".concat(w,"-close-text")},C):v):null},S=function(j){var P,C=j.description,w=j.prefixCls,v=j.message,E=j.banner,ye=j.className,fe=ye===void 0?"":ye,_=j.style,q=j.onMouseEnter,je=j.onMouseLeave,pe=j.onClick,Ze=j.afterClose,ae=j.showIcon,Xe=j.closable,Oe=j.closeText,Ie=j.closeIcon,ee=Ie===void 0?Z.createElement(te.Z,null):Ie,Qe=j.action,re=z(j,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),Ce=Z.useState(!1),De=(0,W.Z)(Ce,2),T=De[0],qe=De[1],h=Z.useRef(),Me=Z.useContext(ge.E_),et=Me.getPrefixCls,y=Me.direction,M=et("alert",w),tt=function(K){var le;qe(!0),(le=re.onClose)===null||le===void 0||le.call(re,K)},nt=function(){var K=re.type;return K!==void 0?K:E?"warning":"info"},at=Oe?!0:Xe,Le=nt(),Ae=E&&ae===void 0?!0:ae,rt=k()(M,"".concat(M,"-").concat(Le),(P={},(0,$.Z)(P,"".concat(M,"-with-description"),!!C),(0,$.Z)(P,"".concat(M,"-no-icon"),!Ae),(0,$.Z)(P,"".concat(M,"-banner"),!!E),(0,$.Z)(P,"".concat(M,"-rtl"),y==="rtl"),P),fe),st=(0,U.Z)(re);return Z.createElement(Se.Z,{visible:!T,motionName:"".concat(M,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(K){return{maxHeight:K.offsetHeight}},onLeaveEnd:Ze},function(se){var K=se.className,le=se.style;return Z.createElement("div",(0,J.Z)({ref:h,"data-show":!T,className:k()(rt,K),style:(0,J.Z)((0,J.Z)({},_),le),onMouseEnter:q,onMouseLeave:je,onClick:pe,role:"alert"},st),Ae?Z.createElement(ne,{description:C,icon:re.icon,prefixCls:M,type:Le}):null,Z.createElement("div",{className:"".concat(M,"-content")},v?Z.createElement("div",{className:"".concat(M,"-message")},v):null,C?Z.createElement("div",{className:"".concat(M,"-description")},C):null),Qe?Z.createElement("div",{className:"".concat(M,"-action")},Qe):null,Z.createElement(m,{isClosable:!!at,closeText:Oe,prefixCls:M,closeIcon:ee,handleClose:tt}))})};S.ErrorBoundary=Fe;var Ge=S}}]);
