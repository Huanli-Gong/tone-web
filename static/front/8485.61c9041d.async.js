(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[8485],{30420:function(X){X.exports={log_td:"log_td___3ViXg",log_table:"log_table___3W2Yo",cell:"cell___1iA9a",no_margin_line:"no_margin_line___1Z9Kp"}},52322:function(X){X.exports={picker:"picker___1AJZx",waves:"waves___x8EzR"}},45455:function(X){X.exports={warp:"warp___1iSnC",batch:"batch___3c3eO",pagination:"pagination___nMn8w",hidden:"hidden___3Wpsc",pro_table_card:"pro_table_card___37ouO"}},79638:function(X,ue,e){"use strict";var K=e(79625),_=e(96584),Y=e(20418),G=e(39190),fe=e(488),ye=e(41428),re=e(22374),ve=e(97939),Q=e(526),T=e(52454),Ae=["title","children","width","color","placement","style"],b,me=ve.ZP.div(b||(b=(0,ye.Z)([`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`]))),o=function(m){var W=m.title,Ze=m.children,Te=m.width,d=m.color,Ne=m.placement,Le=Ne===void 0?"topLeft":Ne,ge=m.style,I=(0,fe.Z)(m,Ae),l=(0,re.useRef)(null),s=(0,re.useState)(!1),n=(0,G.Z)(s,2),De=n[0],k=n[1],be=(0,Q.CR)(),y=be.width,a=function(){var j,R,N=l==null||(j=l.current)===null||j===void 0?void 0:j.clientWidth,V=l==null||(R=l.current)===null||R===void 0?void 0:R.scrollWidth;k(N<V)};(0,re.useEffect)(function(){a()},[W,y]);var g=(0,T.jsx)(me,(0,Y.Z)((0,Y.Z)({ref:l,style:(0,Y.Z)({width:Te,color:d},ge)},I),{},{children:Ze||W||"-"}));return De?(0,T.jsx)(_.Z,{title:W,placement:Le,overlayStyle:{wordBreak:"break-all"},children:g}):g};ue.Z=o},76123:function(X,ue,e){"use strict";e.d(ue,{Z:function(){return Le}});var K=e(88018),_=e(58414),Y=e(11407),G=e(68077),fe=e(20418),ye=e(8281),re=e(58591),ve=e(14320),Q=e(53479),T=e(35832),Ae=e(32326),b=e(39190),me=e(22374),o=e(22812);function C(ge){return(0,o.WY)("/api/sys/operation/log/",{params:ge})}var m=e(79638),W=e(30420),Ze=e.n(W),Te=e(97207),d=e(52454),Ne=function(I){return I==="0"?(0,d.jsx)(o._H,{id:"operation.not.release"}):I==="1"?(0,d.jsx)(o._H,{id:"operation.release"}):I==="2"?(0,d.jsx)(o._H,{id:"device.failed.save"}):I==="cloud"?(0,d.jsx)(o._H,{id:"device.cloud"}):I==="cloud_efficiency"?(0,d.jsx)(o._H,{id:"device.cloud_efficiency"}):I==="cloud_ssd"?(0,d.jsx)(o._H,{id:"device.cloud_ssd"}):I==="cloud_essd"?(0,d.jsx)(o._H,{id:"device.cloud_essd"}):I},Le=(0,me.forwardRef)(function(ge,I){var l=ge.operation_object,s=(0,o.YB)(),n=s.formatMessage,De=(0,me.useState)({}),k=(0,b.Z)(De,2),be=k[0],y=k[1],a=(0,me.useState)(!1),g=(0,b.Z)(a,2),Z=g[0],j=g[1],R=(0,me.useState)(!0),N=(0,b.Z)(R,2),V=N[0],he=N[1],Me=function(){var L=(0,Ae.Z)((0,T.Z)().mark(function x(w){var J;return(0,T.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return he(!0),B.next=3,C({operation_object:l,pid:w});case 3:J=B.sent,y(J||{}),he(!1);case 6:case"end":return B.stop()}},x)}));return function(w){return L.apply(this,arguments)}}();(0,me.useImperativeHandle)(I,function(){return{show:function(x){j(!0),Me(x)}}});var ie=function(x){var w=[{fieldName:"template_name",text:"\u914D\u7F6E\u540D\u79F0"},{fieldName:"release_rule",text:"\u7528\u5B8C\u91CA\u653E"},{fieldName:"manufacturer",text:"\u4E91\u5382\u5546/Ak"},{fieldName:"zone",text:"Region/Zone"},{fieldName:"instance_type",text:"\u89C4\u683C"},{fieldName:"storage_type",text:"\u6570\u636E\u76D8"},{fieldName:"image",text:"\u955C\u50CF"},{fieldName:"system_disk_category",text:"\u7CFB\u7EDF\u76D8"},{fieldName:"bandwidth",text:"\u5E26\u5BBD"},{fieldName:"extra_param",text:"\u6269\u5C55\u5B57\u6BB5"},{fieldName:"image_name",text:"\u955C\u50CF"},{fieldName:"channel_type",text:"\u63A7\u5236\u901A\u9053"},{fieldName:"ips",text:"\u673A\u5668"},{fieldName:"ip",text:"\u673A\u5668"},{fieldName:"name",text:"\u673A\u5668\u540D\u79F0"},{fieldName:"state",text:"\u4F7F\u7528\u72B6\u6001"},{fieldName:"description",text:"\u5907\u6CE8"},{fieldName:"owner",text:"Owner"},{fieldName:"tag",text:"\u6807\u7B7E"},{fieldName:"private_ip",text:"\u79C1\u7F51IP"}],J=w.filter(function(c){return x===c.fieldName});return J.length?n({id:"log.listName.".concat(J[0].fieldName)}):Ne(x)},se=function(x){return x.map(function(w,J){var c="";return(0,Te.isArray)(w)&&!!w.length?c=JSON.stringify(w):c=String(w),(0,d.jsxs)(Q.Z,{justify:"center",children:[(0,d.jsx)(Q.Z,{justify:"center",className:Ze().cell,children:c&&!!c.length?(0,d.jsx)(m.Z,{title:ie(c),width:160,children:ie(c)}):"-"}),J!==x.length-1&&(0,d.jsx)(re.Z,{className:Ze().no_margin_line})]},J)})},oe={align:"center",className:"log_td"},Ce=[{title:(0,d.jsx)(o._H,{id:"log.columns.operation_type"}),align:"center",dataIndex:"operation_type"},{title:(0,d.jsx)(o._H,{id:"log.columns.edit.content"}),align:"center",children:[(0,fe.Z)({title:(0,d.jsx)(o._H,{id:"log.columns.fieldName"}),render:function(x){return se(Object.keys(JSON.parse(x.new_values)))}},oe),(0,fe.Z)({title:(0,d.jsx)(o._H,{id:"log.columns.old_values"}),render:function(x){return se(Object.values(JSON.parse(x.old_values)))}},oe),(0,fe.Z)({title:(0,d.jsx)(o._H,{id:"log.columns.new_values"}),render:function(x){return se(Object.values(JSON.parse(x.new_values)))}},oe)]},{title:(0,d.jsx)(o._H,{id:"log.columns.creator"}),align:"center",dataIndex:"creator"},{title:(0,d.jsx)(o._H,{id:"log.columns.gmt_created"}),align:"center",dataIndex:"gmt_created"}],le=function(){j(!1),y({})};return(0,d.jsx)(_.Z,{maskClosable:!1,keyboard:!1,visible:Z,forceRender:!0,title:(0,d.jsx)(o._H,{id:"log.operation.title"}),onClose:le,width:"910",children:(0,d.jsx)(G.Z,{loading:V,rowKey:"id",size:"small",className:Ze().log_table,bordered:!0,pagination:{pageSize:be.page_size||10},columns:Ce,dataSource:be.data&&be.data.filter(function(L){return L.new_values!=="{}"})})})})},75073:function(X,ue,e){"use strict";e.d(ue,{mQ:function(){return Q},gM:function(){return T},nU:function(){return b}});var K=e(40204),_=e(10724),Y=e(41428),G=e(97939),fe,ye,re,ve,Q=(0,G.ZP)(_.Z)(fe||(fe=(0,Y.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),T=(0,G.ZP)(Q)(ye||(ye=(0,Y.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),Ae=(0,G.ZP)(_.Z)(re||(re=(0,Y.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),b=(0,G.ZP)(Ae)(ve||(ve=(0,Y.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},18485:function(X,ue,e){"use strict";e.r(ue),e.d(ue,{ResizeTag:function(){return Ve},default:function(){return st}});var K=e(67448),_=e(47548),Y=e(14320),G=e(53479),fe=e(36142),ye=e(76837),re=e(57359),ve=e(34423),Q=e(20632),T=e(71853),Ae=e(46721),b=e(94867),me=e(81138),o=e(96146),C=e(35832),m=e(20418),W=e(32326),Ze=e(79625),Te=e(96584),d=e(51937),Ne=e(34516),Le=e(31650),ge=e(25100),I=e(64974),l=e(39190),s=e(22374),n=e(22812);function De(D){return k.apply(this,arguments)}function k(){return k=(0,W.Z)((0,C.Z)().mark(function D(O){return(0,C.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{params:O}));case 1:case"end":return h.stop()}},D)})),k.apply(this,arguments)}function be(D){return y.apply(this,arguments)}function y(){return y=(0,W.Z)((0,C.Z)().mark(function D(O){return(0,C.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.WY)("/api/server/server_tag/",{method:"POST",data:(0,m.Z)({},O)}));case 1:case"end":return h.stop()}},D)})),y.apply(this,arguments)}function a(D,O){return g.apply(this,arguments)}function g(){return g=(0,W.Z)((0,C.Z)().mark(function D(O,P){return(0,C.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(O,"/"),{method:"PUT",data:(0,m.Z)({},P)}));case 1:case"end":return z.stop()}},D)})),g.apply(this,arguments)}function Z(D){return request("/api/auth/user/",{params:D})}function j(D,O){return R.apply(this,arguments)}function R(){return R=(0,W.Z)((0,C.Z)().mark(function D(O,P){return(0,C.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",(0,n.WY)("/api/server/server_tag/detail/".concat(O,"/"),{method:"DELETE",data:{ws_id:P}}));case 1:case"end":return z.stop()}},D)})),R.apply(this,arguments)}var N=e(45455),V=e.n(N),he=e(12590),Me=e(76123),ie=e(31784),se=e(46601),oe=e(75073),Ce=e(24812),le=e(88018),L=e(58414),x=e(20693),w=e(3278),J=e(65790),c=e(17187),B=e(8281),Qe=e(58591),ke=e(79236),qe=e(98540),et=e(60061),pe=e(52322),S=e.n(pe),xe=e(95844),Re=e.n(xe),t=e(52454),Je=function(O){var P=O.value,h=O.onChange,z=(0,s.useState)(!1),M=(0,l.Z)(z,2),We=M[0],Oe=M[1],ze=(0,s.useState)(!1),p=(0,l.Z)(ze,2),q=p[0],Ee=p[1],we=(0,s.useState)({r:255,g:157,b:78,a:1}),A=(0,l.Z)(we,2),E=A[0],Se=A[1],Pe=[{r:255,g:157,b:78,a:1},{r:91,g:216,b:166,a:1},{r:91,g:143,b:249,a:1},{r:247,g:102,b:78,a:1},{r:255,g:134,b:183,a:1},{r:43,g:158,b:157,a:1},{r:146,g:112,b:202,a:1},{r:109,g:200,b:236,a:1},{r:102,g:119,b:150,a:1},{r:245,g:188,b:22,a:1},{r:231,g:107,b:242,a:1}],je=function(){Oe(!We)},de=function(){Oe(!1)},Ie=function(u){var F=u.rgb;Se(F);var ce="rgb(".concat(F.r,",").concat(F.g,",").concat(F.b,",").concat(F.a,")");h&&h(ce)};(0,s.useEffect)(function(){var f={r:255,g:157,b:78,a:1};if(P){var u=P.slice(4,P.length-1).split(",");f={r:Number(u[0]),g:Number(u[1]),b:Number(u[2]),a:Number(u[3])}}Se(f)},[P]);var U=function(u){Se(u),Ee(!1);var F="rgb(".concat(u.r,",").concat(u.g,",").concat(u.b,",").concat(u.a,")");h&&h(F)},H=(0,ke.ZP)({default:{color:{position:"relative",width:"22px",height:"22px",borderRadius:"2px",background:"rgba(".concat(E.r,", ").concat(E.g,", ").concat(E.b,", ").concat(E.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},warp:{position:"absolute",paddingTop:"16px",paddingBottom:"6px",background:"#fff",boxShadow:"-12px 0 48px 16px rgba(0,0,0,0.03), -9px 0 28px 0 rgba(0,0,0,0.05), -6px 0 16px -8px rgba(0,0,0,0.08)",borderRadius:"2px",zIndex:9999}}});return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:H.swatch,className:S().click,onClick:je,children:(0,t.jsx)("div",{style:H.color,className:S().waves})}),We?(0,t.jsxs)("div",{style:H.popover,children:[(0,t.jsx)("div",{style:H.cover,onClick:de}),(0,t.jsxs)("div",{style:H.warp,children:[(0,t.jsxs)("div",{style:{background:"#fff",width:244,paddingLeft:"16px"},children:[Pe.map(function(f,u){return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:S().waves,style:{position:"relative",float:"left",marginRight:"16px",marginBottom:"16px",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden",background:"rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(f.a,")")},onClick:function(){return U(f)},children:JSON.stringify(E)==JSON.stringify(f)&&(0,t.jsx)(et.Z,{style:{position:"absolute",top:"5px",left:"5px",color:"#fff"}})})},u)}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:S().waves,style:{float:"left",marginRight:"16px",marginBottom:"16px",position:"relative",width:"22px",height:"22px",borderRadius:"2px",overflow:"hidden"},onClick:function(){return Ee(!q)},children:[(0,t.jsx)("img",{src:Re(),style:{position:"absolute",width:"22px"}}),(0,t.jsx)("div",{style:{position:"absolute",left:"4px",top:"4px",width:"14px",height:"14px",borderRadius:"2px",background:"rgba(".concat(E.r,", ").concat(E.g,", ").concat(E.b,", ").concat(E.a,")")}})]})})]}),q&&(0,t.jsx)(Qe.Z,{style:{margin:0}}),q&&(0,t.jsx)("div",{style:{padding:"6px"},children:(0,t.jsx)(qe.xS,{className:S().picker,width:212,color:E,onChange:Ie,presetColors:[]})})]})]}):null]})},Be=Je,tt=/^[A-Za-z0-9\._-]{0,32}$/,Ue=function(O,P){var h=O.callback,z=(0,n.YB)(),M=z.formatMessage,We=(0,Ce.UO)(),Oe=We.ws_id,ze=c.Z.useForm(),p=(0,l.Z)(ze,1),q=p[0],Ee=s.useState(!1),we=(0,l.Z)(Ee,2),A=we[0],E=we[1],Se=s.useState(!1),Pe=(0,l.Z)(Se,2),je=Pe[0],de=Pe[1],Ie=s.useState({}),U=(0,l.Z)(Ie,2),H=U[0],f=U[1];s.useImperativeHandle(P,function(){return{show:function(ee){ee&&(f(ee||{}),q.setFieldsValue(ee)),E(!0)}}});var u=function(){f({}),E(!1),de(!1),q.resetFields()},F=function(){je||(de(!0),q.validateFields().then(function(){var ee=(0,W.Z)((0,C.Z)().mark(function te(at){var Fe,$e,_e,Xe;return(0,C.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Fe=(0,m.Z)({ws_id:Oe},at),!H.id){$.next=7;break}return $.next=4,a(H.id,Fe);case 4:$.t0=$.sent,$.next=10;break;case 7:return $.next=9,be(Fe);case 9:$.t0=$.sent;case 10:if($e=$.t0,_e=$e.code,Xe=$e.msg,_e===200){$.next=17;break}return de(!1),o.default.error(Xe),$.abrupt("return");case 17:o.default.success(M({id:"operation.success"})),h(),u();case 20:case"end":return $.stop()}},te)}));return function(te){return ee.apply(this,arguments)}}()).catch(function(){de(!1)}))};return(0,t.jsx)(L.Z,{maskClosable:!1,keyboard:!1,title:H.id?(0,t.jsx)(n._H,{id:"device.edit.tag"}):(0,t.jsx)(n._H,{id:"device.create.tag"}),width:376,onClose:u,destroyOnClose:!0,open:A,bodyStyle:{paddingBottom:80},footer:(0,t.jsxs)("div",{style:{textAlign:"right"},children:[(0,t.jsx)(b.Z,{onClick:u,style:{marginRight:8},children:(0,t.jsx)(n._H,{id:"operation.cancel"})}),(0,t.jsx)(b.Z,{onClick:F,type:"primary",htmlType:"submit",children:H.id?(0,t.jsx)(n._H,{id:"operation.update"}):(0,t.jsx)(n._H,{id:"operation.ok"})})]}),children:(0,t.jsxs)(c.Z,{layout:"vertical",form:q,initialValues:{tag_color:"rgb(255,157,78,1)"},children:[(0,t.jsx)(c.Z.Item,{name:"tag_color",label:(0,t.jsx)(n._H,{id:"device.tag_color"}),rules:[{required:!0,message:M({id:"please.select"})}],children:(0,t.jsx)(Be,{})}),(0,t.jsx)(c.Z.Item,{name:"name",label:(0,t.jsx)(n._H,{id:"device.tag.name"}),required:!0,rules:[{validator:function(ee,te){return te?te.replace(/\s+/g,"")?tt.test(te)?Promise.resolve():Promise.reject(M({id:"device.name.message"})):Promise.reject(M({id:"device.tag.name.message"})):Promise.reject(M({id:"device.tag.name.message"}))}}],children:(0,t.jsx)(w.Z,{placeholder:M({id:"please.enter"}),autoComplete:"off"})}),(0,t.jsx)(c.Z.Item,{name:"description",label:(0,t.jsx)(n._H,{id:"device.description"}),children:(0,t.jsx)(w.Z.TextArea,{rows:3,placeholder:M({id:"device.description.placeholder"})})})]})})},Ke=s.forwardRef(Ue),He=e(6130),nt=e(79390),Ve=function(O){var P=O.name,h=O.tag_color,z=s.useRef(),M=s.useRef(),We=s.useState(),Oe=(0,l.Z)(We,2),ze=Oe[0],p=Oe[1],q=s.useState(!1),Ee=(0,l.Z)(q,2),we=Ee[0],A=Ee[1],E=s.useState(!1),Se=(0,l.Z)(E,2),Pe=Se[0],je=Se[1];s.useEffect(function(){var U=z.current.offsetParent;if(!!U){var H=new ResizeObserver(function(f){var u=(0,I.Z)(f),F;try{for(u.s();!(F=u.n()).done;){var ce=F.value;if(ce.contentRect){var ee=ce.contentRect.width;p(ee)}}}catch(te){u.e(te)}finally{u.f()}});return H.observe(U),function(){H.unobserve(U)}}},[]),s.useEffect(function(){if(!!M.current){var U=M.current,H=U.scrollWidth,f=U.clientWidth;je(f<H)}},[ze]);var de=function(){Pe&&A(!0)},Ie=function(){A(!1)};return(0,t.jsx)("div",{ref:z,onMouseOver:de,onMouseLeave:Ie,children:(0,t.jsx)(Te.Z,{title:P,open:we,children:(0,t.jsx)(Ne.Z,{color:h,style:{marginRight:0},children:(0,t.jsx)(ge.Z.Text,{ref:M,ellipsis:!0,style:{maxWidth:ze-20,color:h&&"#fff"},children:P})})})})},it=function(){var O=(0,n.YB)(),P=O.formatMessage,h=(0,Ce.UO)(),z=h.ws_id,M=(0,n.md)(),We={ws_id:z,page_num:1,page_size:10},Oe=(0,s.useState)({}),ze=(0,l.Z)(Oe,2),p=ze[0],q=ze[1],Ee=s.useState(We),we=(0,l.Z)(Ee,2),A=we[0],E=we[1],Se=s.useState(!1),Pe=(0,l.Z)(Se,2),je=Pe[0],de=Pe[1],Ie=(0,s.useState)(),U=(0,l.Z)(Ie,2),H=U[0],f=U[1],u=(0,s.useState)(!0),F=(0,l.Z)(u,2),ce=F[0],ee=F[1],te=(0,s.useRef)(),at=function(){var v=(0,W.Z)((0,C.Z)().mark(function r(){var i,ne,ae=arguments;return(0,C.Z)().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return i=ae.length>0&&ae[0]!==void 0?ae[0]:A,ee(!0),Ye.next=4,De((0,m.Z)({},i));case 4:ne=Ye.sent,ne&&q(ne.code!==200?{}:ne),ee(!1);case 7:case"end":return Ye.stop()}},r)}));return function(){return v.apply(this,arguments)}}();(0,s.useEffect)(function(){at()},[A,H]);var Fe=function(r,i){E(function(ne){return(0,m.Z)((0,m.Z)({},ne),{},{page_num:r,page_size:i})})},$e=(0,s.useRef)(),_e=(0,s.useCallback)(function(v){$e.current.show(v)},[]),Xe=function(){var r;(r=te.current)===null||r===void 0||r.show()},rt=function(){f(new Date().getTime())},$=function(r){var i;(i=te.current)===null||i===void 0||i.show(r)},ot=function(){var v=(0,W.Z)((0,C.Z)().mark(function r(i){return(0,C.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,j(i.id,z);case 2:o.default.success(P({id:"operation.success"})),f(new Date().getTime());case 4:case"end":return ae.stop()}},r)}));return function(i){return v.apply(this,arguments)}}(),lt=[{title:(0,t.jsx)(n._H,{id:"device.tag.name"}),dataIndex:"name",width:170,filterDropdown:function(r){var i=r.confirm;return(0,t.jsx)(he.Z,{confirm:i,autoFocus:je,onConfirm:function(ae){return E(function(Ge){return(0,m.Z)((0,m.Z)({},Ge),{},{page_num:1,name:ae})})}})},ellipsis:{showTitle:!1},onFilterDropdownVisibleChange:function(r){r&&de(!je)},filterIcon:function(){return(0,t.jsx)(ie.Z,{style:{color:A!=null&&A.name?"#1890ff":void 0}})},render:function(r,i){return(0,t.jsx)(Ve,(0,m.Z)({},i))}},{title:(0,t.jsx)(n._H,{id:"device.description"}),dataIndex:"description",ellipsis:{showTitle:!1},width:100,filterIcon:function(){return(0,t.jsx)(ie.Z,{style:{color:A!=null&&A.description?"#1890ff":void 0}})},filterDropdown:function(r){var i=r.confirm;return(0,t.jsx)(he.Z,{confirm:i,autoFocus:je,onConfirm:function(ae){return E(function(Ge){return(0,m.Z)((0,m.Z)({},Ge),{},{page_num:1,description:ae})})}})},onFilterDropdownVisibleChange:function(r){r&&de(!je)},render:function(r,i){return(0,t.jsx)(He.K,{ellipsis:{tooltip:!0},children:i.description})}},{title:(0,t.jsx)(n._H,{id:"device.create_user"}),dataIndex:"create_user",width:90,ellipsis:{showTitle:!1},render:function(r){return(0,t.jsx)(He.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.update_user"}),dataIndex:"update_user",ellipsis:{showTitle:!1},width:90,render:function(r){return(0,t.jsx)(He.K,{ellipsis:{tooltip:!0},children:r||"-"})}},{title:(0,t.jsx)(n._H,{id:"device.gmt_created"}),dataIndex:"gmt_created",width:200,render:function(r,i){return i.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(He.K,{ellipsis:{tooltip:!0},children:i.gmt_created}):"-"}},{title:(0,t.jsx)(n._H,{id:"device.gmt_modified"}),dataIndex:"gmt_modified",width:200,render:function(r,i){return i.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"?(0,t.jsx)(He.K,{ellipsis:{tooltip:!0},children:i.gmt_modified}):"-"}},{title:(0,t.jsx)(n._H,{id:"Table.columns.operation"}),valueType:"option",dataIndex:"id",width:150,render:function(r,i){return i.create_user!=="\u7CFB\u7EDF\u9884\u8BBE"&&(0,t.jsxs)(ve.Z,{children:[(0,t.jsx)(n.Nv,{accessible:M.WsMemberOperateSelf(),children:(0,t.jsxs)(ve.Z,{children:[(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return $(i)},children:(0,t.jsx)(n._H,{id:"operation.edit"})}),(0,t.jsx)(T.Z,{title:(0,t.jsx)("div",{style:{color:"red"},children:(0,t.jsx)(n._H,{id:"device.tag.delete.tips"})}),placement:"topRight",okText:(0,t.jsx)(n._H,{id:"operation.cancel"}),cancelText:(0,t.jsx)(n._H,{id:"operation.confirm.delete"}),onCancel:function(){return ot(i)},icon:(0,t.jsx)(se.Z,{style:{color:"red"}}),overlayStyle:{width:"300px"},children:(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},children:(0,t.jsx)(n._H,{id:"operation.delete"})})})]})}),(0,t.jsx)(b.Z,{type:"link",style:{padding:0,height:"auto"},onClick:function(){return _e(i.id)},children:(0,t.jsx)(n._H,{id:"operation.log"})})]})}}];return(0,t.jsxs)(oe.gM,{title:(0,t.jsx)(n._H,{id:"device.dispatch.tag"}),extra:(0,t.jsx)(n.Nv,{accessible:M.WsMemberOperateSelf(),children:(0,t.jsxs)(b.Z,{type:"primary",onClick:Xe,children:[" ",(0,t.jsx)(n._H,{id:"device.create.tag"})," "]},"3")}),children:[(0,t.jsxs)(_.Z,{spinning:ce,children:[(0,t.jsx)(nt.sL,{name:"ws-device-dispatch-list",refreshDeps:[p,A],loading:ce,scroll:{x:"100%"},size:"small",className:V().pro_table_card,columns:lt,dataSource:(p==null?void 0:p.data)||[],pagination:!1,rowKey:"id"}),(0,t.jsxs)(G.Z,{justify:"space-between",style:{padding:"16px 20px 0"},children:[(0,t.jsx)("div",{className:p!=null&&p.total?"":V().hidden,children:P({id:"pagination.total.strip"},{data:(p==null?void 0:p.total)||0})}),(0,t.jsx)(ye.Z,{size:"small",className:p!=null&&p.total?"":V().hidden,showQuickJumper:!0,showSizeChanger:!0,current:A.page_num,defaultCurrent:1,onChange:function(r,i){return Fe(r,i)},onShowSizeChange:function(r,i){return Fe(r,i)},total:(p==null?void 0:p.total)||0})]})]}),(0,t.jsx)(Me.Z,{ref:$e,operation_object:"machine_server_tag"}),(0,t.jsx)(Ke,{ref:te,callback:rt})]})},st=it},79390:function(X,ue,e){"use strict";e.d(ue,{sL:function(){return be},ny:function(){return De},Fu:function(){return k}});var K=e(20418),_=e(39190),Y=e(488),G=e(26388),fe=e(11407),ye=e(68077),re=e(2605),ve=e(74127),Q=e(41428),T=e(22374),Ae=e(48434),b=e(97939),me=e(99648),o=e(52454),C=["width","onResizeStart","onResize","onResizeStop","resize"],m=["columns","name","onColumnsChange"],W,Ze,Te,d=b.ZP.div(W||(W=(0,Q.Z)([`
    position: relative;
    width: 100%;
`]))),Ne=b.ZP.div.attrs(function(y){return{style:{left:y.left,height:y==null?void 0:y.height}}})(Ze||(Ze=(0,Q.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),Le=(0,b.ZP)(Ae.Resizable)(Te||(Te=(0,Q.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(y){var a=y.resize;return a?"col-resize":"default"}),ge=function(a){var g=a.width,Z=a.onResizeStart,j=a.onResize,R=a.onResizeStop,N=a.resize,V=(0,Y.Z)(a,C);return(0,o.jsx)(Le,(0,K.Z)((0,K.Z)({width:g||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:Z,onResize:j,onResizeStop:R,resize:N?1:0},V),{},{children:(0,o.jsx)("th",(0,K.Z)({},V))}))},I=function(a){var g=a.columns,Z=g===void 0?[]:g,j=a.name,R=a.onColumnsChange,N=(0,Y.Z)(a,m),V=T.useState(0),he=(0,_.Z)(V,2),Me=he[0],ie=he[1],se=T.useState(0),oe=(0,_.Z)(se,2),Ce=oe[0],le=oe[1],L=T.useState(!1),x=(0,_.Z)(L,2),w=x[0],J=x[1],c=T.useRef(null),B=(0,me.Z)(c),Qe=function(S){return function(xe,Re){var t;if((0,ve.Z)(Re),!!Z[S].ellipsis){var Je=xe.clientX,Be=Je-((t=c.current)===null||t===void 0?void 0:t.getBoundingClientRect().x);le(Be),ie(Be),J(!0)}}},ke=function(){return function(S){var xe,Re=S.clientX,t=Re-((xe=c.current)===null||xe===void 0?void 0:xe.getBoundingClientRect().x);ie(t)}},qe=function(S){return function(xe,Re){var t,Je=Re.size,Be=xe.clientX,tt=Be-((t=c.current)===null||t===void 0?void 0:t.getBoundingClientRect().x),Ue=(0,re.Z)(Z);if(Ue[S].ellipsis){var Ke=Je.width+=tt-Ce,He=Ue[S],nt=He.dataIndex,Ve=He.key;Ke>20&&(Ue[S]=(0,K.Z)((0,K.Z)({},Ue[S]),{},{width:Ke}),j&&k(j,nt||Ve,Ke),R==null||R())}ie(0),le(0),J(!1)}},et=T.useMemo(function(){return Z.reduce(function(pe,S){return S.width?pe+=S==null?void 0:S.width:pe},0)},[Z]);return(0,o.jsxs)(d,{ref:c,className:"resize-table-wrapper",children:[(0,o.jsx)(ye.Z,(0,K.Z)((0,K.Z)({},N),{},{components:{header:{cell:ge}},scroll:(a==null?void 0:a.scroll)||{x:et||(B==null?void 0:B.width)},columns:Z.filter(Boolean).map(function(pe,S){return(0,K.Z)((0,K.Z)({},pe),{},{onHeaderCell:function(Re){return{resize:!!pe.ellipsis,width:Re.width,onResizeStart:Qe(S),onResize:ke(),onResizeStop:qe(S)}}})})})),w&&(0,o.jsx)(Ne,{height:B==null?void 0:B.height,left:Me||Ce})]})},l=I,s=["name","columns","refreshDeps","onColumnsChange"],n="umi_locale",De=function(a,g){var Z=localStorage.getItem(a),j=localStorage.getItem(n)||"zh-CN";if(!!Z)return JSON.parse(Z)["".concat(j,"-").concat(g)]},k=function(a,g,Z){var j=localStorage.getItem(a),R=localStorage.getItem(n)||"zh-CN",N=(0,G.Z)({},"".concat(R,"-").concat(g),Z);j?localStorage.setItem(a,JSON.stringify(Object.assign(JSON.parse(j),N))):localStorage.setItem(a,JSON.stringify(N))},be=function(a){var g=a.name,Z=a.columns,j=a.refreshDeps,R=j===void 0?[]:j,N=a.onColumnsChange,V=(0,Y.Z)(a,s),he=T.useState([]),Me=(0,_.Z)(he,2),ie=Me[0],se=Me[1],oe=function(){return(Z==null?void 0:Z.filter(Boolean).map(function(le){var L=le.dataIndex,x=le.key,w=le.width,J=L||x,c=De(g,J);!c&&w&&k(g,J,w);var B=c||w;return B&&(le.width=B),le}))||[]};return T.useEffect(function(){se(oe())},R),(0,o.jsx)(l,(0,K.Z)({name:g,columns:ie,setColumns:se,size:"small",onColumnsChange:function(){N==null||N(),se(oe())}},V))}},95844:function(X){X.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAABUlJREFUWAnVmT1yHDcQhRvAzO7yR1U2HbGKsUPzCsxUOoIPYGVWyBs4YSiXE/kAOoJSXcE+A8uM7Mgkd2d3Bv5eA6Ak+wCEUYttoAcYPDw0enowwUjXf15fzPu/b1JYrkZbzqNlW4W9Sa7DglxsEw+WkNKnkO3YilxHJPqTKjeS9DnluvoP02RxzhbuZwuHxdLDbEY9Pe4tSL9Fr/rDwfVxWrxu24OFhf77cGfz8jHldB3ePN4OPwL2cZp+G4KdWQ4MHkw/umkuyJK4NcMLglnmbwm6TkEKihL/SWrYEoOXzii4qe6mbODXBFrySait2pDzPJ9T/j7vdy/z26PLYX+INxbGs8zNI8wFgxHaRxud2cSdEqVdhh2Vw+B3OjCYJrcwIt34j9SEqUApANBoxoDSNb8yoxCgPQpIjdQDOe5KO2MVNAEW0gHHic6owrSc2fbxZpgtXelGS4iMtlTmyj0NncZTEnz1FCEixpxhALMqkbJUrW1rUhqqRvJlKUVvrcZ00rJ7R64Hb6M6ZdfXa2pb2l8Nkw3nDOkDRtYg5PDhaLV6/dM3N7fl9s/zz/JfzNP+HTb9ysFqRRY7jzAMq9o2JRtgb54ZrCjSBkur8bWDbQwj4z4e2aQc1ljvyn7uAGxbU4F2Wxe71eYHOS1tCN9SbpeteSfyM3bF9jCFYwCz2aJ8ga52luQ9BAuPoo0mL+EcF6fVGVjB+TfDu7hxhof8f2E4Djwo8K/4QAyjP4rl+DGFxvSwJSrwZz6PmuL+O8P8uQ3Dp9vw4gHOyEOjY4bbptvFU2f2sEx9MrytJiE/LC9R/HAmUINhhUe9JdmwYCkL8EN84cymTHzq1t0Z4vsC9AmwwnIBbeFfZ3CfmPUwUQxvK8NT0/SG+LEyrE1HGhb8sOLQZstF3dF/3WxurWL43k4cXerRfoWsMVz9AV5Crzy6AvweQTe3ViGGsNO7SK0h8jo5/KJ7/v88fsnikJeGr8nnB/kFgoPeJT+lYXwoFb35Kk1FdPOf118XS/V3fs4pQnUXDriC7gatgMSRP4DpjRqQQ6q7sFfAefNVAbzwjAbzEPyggYnUaEiT6io1hgmChXgY27O6MN4VVoHJazGME555gmAWg8puDi2y7w1ywoYVp0OogD/ZcGqPwM4A59ULB2qHyrB7CZlDY7ozwNYY1gklTA+81DnYjEn0GL/nEYYFjnNnB9yiyn69BLFOxkMsmABBz5BqcOE2LF1nKa9OAcsZtJvGjB8WSNlvpyZhxOs6p7alPJI/2TB1d2+dMWyJeB0bzhwJFxuuDHNQ7Ez3hteS2BUqAWbvBU5WlIeav3ubL3oBnV/9epGHY8vjMUg3nmOU/das8m6ydz2AFthpPrzTw9jZTTCceP/89pf8ByZyLjcn4JGAWHKgrgmskAl5VOtHXPe6VgT9CdGeS7wN5152ynWXO3Y0a3lsD3x5OthxvGdRZ773FXnCWV5ip6+NOgOu4pbwhuv+fXDmeyBfs/QoZvl1fm17Bsz5Tm0+CpjbCVJl5cZ6kt3UrLI/05FPelSKo7Rhn0JUtSNVQakc0ZS6Wpej8/JyptdfjiP5GiV92UqCGCgXnfTadCHGjwOWcb3f20smdCaQ8scaeIXXECgxLUbHyvBGerVrkhE0Qf+GpyHpo9ySjmiUdWCu4bXEqh8chN5wdC6t/mtA62sfx2a0ltS09nzGkExj+GuV0nX8/U24HRe7BOR78h3tCrsakbIzSdFBCUjN0gu4J8oC6W+Fuv6UXFNrKhemSzftekGRDkk/6QVVuiJhP4Q7pvF+k9Jl+PDD7T9Qqao1PwZEZwAAAABJRU5ErkJggg=="}}]);
