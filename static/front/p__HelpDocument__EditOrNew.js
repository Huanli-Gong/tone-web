(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{XoUT:function(k,x,t){"use strict";t.r(x);var V=t("T2oS"),ae=t("W9HT"),I=t("DYRE"),F=t("zeV3"),ue=t("+L6B"),Q=t("2/Rp"),me=t("B9cy"),fe=t("Ol7k"),Y=t("sRBo"),ne=t("kaz8"),Ee=t("7Kak"),z=t("9yH6"),y=t("sPJy"),m=t("bE4q"),p=t("k1fw"),M=t("miYZ"),g=t("tsqr"),D=t("9og8"),ht=t("y8nQ"),$=t("Vl3Y"),w=t("tJVT"),gt=t("OaEy"),pe=t("2fM7"),Ot=t("5NDa"),Ie=t("5rEg"),Re=t("WmNS"),R=t.n(Re),b=t("q1tI"),r=t.n(b),j=t("9kvl"),je=t("sE86"),c=t.n(je),le=t("j8us"),We=t("b60y"),Ue=t.n(We),Fe=t("LvDl"),W=t.n(Fe),Ke=t("hZgC"),we=t("c+yx"),Se=t("kzew"),Ne=t.n(Se),He=Ie.a.TextArea,ke=pe.a.Option,ve='url("'.concat(Ne.a,'") center center / 16px 16px'),_=null,G=null,U=null,S=null,he=null,re=[];x.default=function(X){var Z=X.match.params.help_id,B=X.match.path==="/help_doc/:help_id/edit"||X.match.path==="/notice/:help_id/edit"?"edit":"new",T=/^\/help_doc/.test(X.match.path)?"help_doc":"notice",Ve=Object(b.useState)(""),ge=Object(w.a)(Ve,2),N=ge[0],Oe=ge[1],ze=Object(b.useState)(!1),De=Object(w.a)(ze,2),$e=De[0],q=De[1],Ge=Object(b.useState)(!0),Ce=Object(w.a)(Ge,2),Je=Ce[0],Pe=Ce[1],Qe=Object(b.useState)(0),ye=Object(w.a)(Qe,2),Ye=ye[0],Xe=ye[1],Ze=Object(b.useState)(0),Me=Object(w.a)(Ze,2),qe=Me[0],et=Me[1],tt=Object(Ke.e)(),ee=tt.height,at=$.a.useForm(),nt=Object(w.a)(at,1),H=nt[0],te=Object(b.useRef)(null),be=Object(j.l)(function(l){return Object(le.c)(l)},{formatResult:function(e){return W.a.get(e,"code")===200?e.data:[]},initialData:[],defaultParams:[{id:Number(Z)}]}),lt=be.loading,E=be.data;Object(b.useEffect)(function(){re.forEach(function(l){var e=document.getElementById(l.id);e&&(e.innerHTML=l.text)})},[qe]),Object(b.useEffect)(function(){var l=H.getFieldsValue();if(B==="new"&&(l.active=1),B==="edit"&&E&&E[0]){l.active=E[0].active?1:0,l.is_top=E[0].order_id===1,l.tags=E[0].tags;var e=document.querySelector("#text-container-title #text_title");if(G&&e){var a=e.clientHeight;Xe(a)}l.active?q(E[0].order_id===1):(q(!1),Pe(l.active),l.is_top=!1)}if(H.setFieldsValue(l),_&&E&&E[0]){var o=/^(\<p\>\<br\>\<\/p\>)+|(\<p\>\<br\>\<\/p\>)+$/g,n=E[0].content.replace(o,"");_.txt.html(E[0]&&n)}E&&E[0]&&(Oe(E[0].title),E[0].title||(U.placeholder="\u8BF7\u8F93\u5165\u6807\u9898(1~30\u5B57)",U.focus())),_&&E&&!E[0]&&(_.txt.html(""),_.txt.text(""),U.placeholder="\u8BF7\u8F93\u5165\u6807\u9898(1~30\u5B57)",U.focus())},[E]);var Dt=function l(e,a,o,n,v){n=Number(n);var h=a[n+1].tag,f=h.replace("H","");if(!(Number(o)>=Number(f))){var i=v.parentNode.parentNode.nextElementSibling;if(!i||(e.removeChild(i),n=n+1,n>=a.length-1))return;l(e,a,o,n,v)}},Ct=function l(e,a,o,n,v,h){n=Number(n);var f=a[n+1].tag,i=f.replace("H","");if(Number(o)<Number(i)){var s=document.createElement("li"),C=document.createElement("a"),d=document.createElement("div"),P=document.createElement("span");P.className="".concat(c.a.catalogIcon),C.href="javascript:void(0)",C.innerText=a[n+1].text,d.style.paddingLeft=(Number(i)-1)*.6+"rem",P.setAttribute("index",n+1),C.onclick=function(){_.scrollToHead(a[n+1].id)},d.appendChild(P),d.appendChild(C),s.id=a[n+1].id,s.appendChild(d);var O=he,A=null;O&&e.lastChild!==O?A=O.previousElementSibling:(A=e.lastChild,he=A);var L="",u="";n<=0,L=a[n].tag,u=L.replace("H","");var K=a[n+1].tag,ie=K.replace("H","");if(Number(u)<Number(ie)){var _e=a[n].id,ce=document.querySelector("#".concat(_e," span"));ce.style.background=ve,O=null}if(Number(n)===a.length-1&&(P.style.background=""),n=n+1,O?e.insertBefore(s,O):e.appendChild(s),n>=a.length-1)return;s.appendChild(d),l(e,a,o,n,v,a[n+1])}else return};Object(b.useEffect)(function(){_=new Ue.a("#toolbar-container","#text-container-text"),_.config.pasteFilterStyle=!1,_.config.minHeight=500,_.config.placeholder="",_.config.onCatalogChange=function(e){var a=document.getElementById("catalogBox");if(!!a){a.innerHTML="";var o="<div style='font-size: 20px;padding-bottom: 10px; border-bottom:1px solid rgba(0,0,0,0.1);margin-bottom: 15px' >\u5927\u7EB2</div>";a.innerHTML=o;var n=1,v={1:"",2:"-",3:"--",4:"---",5:"----"};e=e.filter(function(i){return i&&i.text.trim()});var h=!1;if(re.length!==e.length&&(et(+new Date),re=W.a.cloneDeep(e)),e.forEach(function(i,s){if(s>0){var C=e[s-1].tag,d=e[s].tag,P=+d.replace("H",""),O=C.replace("H","");P>O&&P<=5&&n++,P<O&&(n=1)}i.level=n;var A=document.createElement("li"),L=document.createElement("a"),u=document.createElement("div"),K=document.createElement("span");if(s<e.length-1){var ie=e[s+1].tag,_e=e[s].tag,ce=+_e.replace("H",""),ut=ie.replace("H","");ce<ut&&(K.style.background=ve,h=!0)}K.className="".concat(c.a.catalogIcon);var mt=i.text.split("&nbsp;"),se="";mt.forEach(function(J){J.trim()&&(se=se+J+" ")}),i.text=se,L.innerText=i.text;var ft=e[s].tag,Et=ft.replace("H","");u.style.paddingLeft=(Number(Et)-1)*.6+"rem",K.setAttribute("index",s),L.href="javascript:void(0)",L.onclick=function(J){J.stopPropagation();var pt=document.querySelectorAll("#catalogBox li a");Array.from(pt).forEach(function(vt){vt.style.color="rgba(0, 0, 0, 0.85)"}),J.target.style.color="#1890FF",_.scrollToHead(i.id);var xe=document.getElementById(i.id);xe&&(te.current=xe.offsetTop);var de=0;return de=S.scrollTop,te.current<=de&&(S.scrollTop=te.current-16<0?0:te.current-16),de},i.level===5&&(K.style.background=""),u.appendChild(K),u.appendChild(L),A.id=i.id,A.appendChild(u),a.appendChild(A)}),!h){var f=document.querySelectorAll("#catalogBox span");Array.from(f).forEach(function(i){return i.style.display="none"})}}},_.config.languageType=["Bash","C","C#","C++","CSS","Java","JavaScript","JSON","TypeScript","Plain text","Html","XML","SQL","Go","Kotlin","Lua","Markdown","PHP","Python","Shell Session","Ruby"],_.config.languageTab="    ",_.config.fontNames=["\u9ED1\u4F53","\u4EFF\u5B8B","\u6977\u4F53","\u6807\u6977\u4F53","\u534E\u6587\u4EFF\u5B8B","\u534E\u6587\u6977\u4F53","\u5B8B\u4F53","\u5FAE\u8F6F\u96C5\u9ED1","Arial","Tahoma","Verdana","Times New Roman","Courier New"],_.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","justify","quote","emoticon","table","code","splitLine"],_.config.linkCheck=function(e,a){return!0},_.config.showLinkImg=!1,_.config.pasteTextHandle=function(e){var a=e.trim().indexOf("<img");if(a!==0)return e},_.txt.eventHooks.pasteEvents.push(function(){var e=Object(D.a)(R.a.mark(function a(o){var n,v,h,f,i,s;return R.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=o.clipboardData.files,!(n&&n.length>0)){d.next=18;break}v=0,h=n.length;case 3:if(!(v<h)){d.next=18;break}return f=new FormData,f.append("file",n[v]),f.append("file_type","doc_img"),d.next=9,Object(j.g)("/api/sys/upload/",{method:"post",data:f});case 9:return i=d.sent,s=document.createElement("img"),s.src=i&&i.link,s.alt=" ",rt(s),d.abrupt("break",18);case 15:v++,d.next=3;break;case 18:case"end":return d.stop()}},a)}));return function(a){return e.apply(this,arguments)}}()),_.create(),G=document.querySelector("#text-container-text"),U=document.querySelector("#text_title"),S=G.querySelector(".w-e-text"),B==="new"&&U&&U.focus();var l=G.querySelector('div[contenteditable = "true"]');return S.addEventListener("blur",Le,!1),l.addEventListener("click",Ae,!1),window.addEventListener("click",Be,!1),window.addEventListener("resize",Te,!1),function(){_.destroy(),S.removeEventListener("blur",Le,!1),l.removeEventListener("click",Ae,!1),window.removeEventListener("click",Be,!1),window.addEventListener("resize",Te,!1)}},[]);var Pt=function(){var l=Object(D.a)(R.a.mark(function e(a){return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a.stopPropagation(),a.preventDefault();case 2:case"end":return n.stop()}},e)}));return function(a){return l.apply(this,arguments)}}(),rt=function(e){var a,o;if(window.getSelection){if(a=window.getSelection(),a.getRangeAt&&a.rangeCount){o=a.getRangeAt(0),o.deleteContents();var n=document.createElement("div");n.appendChild(e);for(var v=document.createDocumentFragment(),h,f;h=n.firstChild;)f=v.appendChild(h);o.insertNode(v),f&&(o=o.cloneRange(),o.setStartAfter(f),o.collapse(!0),a.removeAllRanges(),a.addRange(o))}}else document.selection&&document.selection.type!="Control"},Be=function(){var e=document.getElementById("image_box");e&&(e.style.width=0,e.style.height=0)},Te=function(){var e=document.querySelector("#image_box img");e&&innerWidth<=1280&&(e.style.maxWidth="80%"),e&&innerWidth>1280&&(e.style.maxWidth="70%")},Ae=function(e){e.stopPropagation();var a=e.target.getAttribute("src");if(!!a){var o=document.getElementById("image_box"),n=document.querySelector("#image_box img");n||(o.innerHTML="<div class=".concat(c.a.scale_box,"><img class=").concat(c.a.scale_image,' alt="  " /></div>'),n=document.querySelector("#image_box img")),o.style.width="100%",o.style.height="100%",innerWidth<=1280&&(n.style.maxWidth="80%"),n.src=a}},Le=function(){var e=document.createElement("p");e.innerHTML="<br/>",S.appendChild(e)},ot=function(e){e.target.blur()},it=function(e){Oe(e.target.value)},_t=function(e,a,o){if(e===200){g.default.success("\u64CD\u4F5C\u6210\u529F!"),G.blur(),U.blur(),B==="edit"&&j.e.push("/".concat(T,"/").concat(Z)),B==="new"&&j.e.push("/".concat(T,"/").concat(o.id));return}Object(we.r)(e,a)},ct=function(){var l=Object(D.a)(R.a.mark(function e(){return R.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:H.validateFields().then(function(){var n=Object(D.a)(R.a.mark(function v(h){var f,i,s,C,d,P,O,A;return R.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/ig,s=(f=_.txt.html())===null||f===void 0?void 0:f.replace(i,""),C=Object(p.a)(Object(p.a)({},h),{},{title:N,content:s,doc_type:T}),B!=="edit"){u.next=9;break}return u.next=6,Object(le.d)(Object(p.a)(Object(p.a)({},C),{},{id:Number(Z)}));case 6:u.t0=u.sent,u.next=12;break;case 9:return u.next=11,Object(le.a)(C);case 11:u.t0=u.sent;case 12:d=u.t0,P=d.code,O=d.msg,A=d.data,_t(P,O,A);case 17:case"end":return u.stop()}},v)}));return function(v){return n.apply(this,arguments)}}()).catch(function(n){return console.log(n)});case 1:case"end":return o.stop()}},e)}));return function(){return l.apply(this,arguments)}}(),st=function(){B==="edit"&&j.e.push("/".concat(T,"/").concat(Z)),B==="new"&&j.e.push("/".concat(T))},oe=function(e,a){var o=H.getFieldsValue();a==="tags"&&(o[a]=e),a==="active"&&(o[a]=e.target.value,Pe(e.target.value),e.target.value||(q(!1),o.is_top=!1)),a==="is_top"&&(o[a]=e.target.checked,q(e.target.checked)),H.setFieldsValue(o)},yt={height:ee-228},dt=T==="help_doc"?[{id:"mustRead",name:"\u5FC5\u770B"},{id:"course",name:"\u6559\u7A0B"},{id:"docs",name:"\u6587\u6863"}]:[{id:"maintain",name:"\u7EF4\u62A4"},{id:"notice",name:"\u901A\u77E5"},{id:"upgrade",name:"\u5347\u7EA7"},{id:"stop",name:"\u6682\u505C"}];return r.a.createElement("div",{className:c.a.container},r.a.createElement(ae.a,{spinning:lt},r.a.createElement(fe.a,{className:c.a.layout},r.a.createElement("div",null,r.a.createElement(m.a,{style:{marginBottom:"20px"}},r.a.createElement(m.a.Item,null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return j.e.push("/")}},"\u9996\u9875")),r.a.createElement(m.a.Item,null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return j.e.push("/".concat(T))}},T==="help_doc"?"\u4F7F\u7528\u5E2E\u52A9":"\u516C\u544A")),T==="help_doc"&&r.a.createElement(m.a.Item,null,B==="new"?N||"\u65B0\u5EFA\u6587\u6863":N||"\u7F16\u8F91\u6587\u6863"),T!=="help_doc"&&r.a.createElement(m.a.Item,null,B==="new"?N||"\u65B0\u5EFA\u516C\u544A":N||"\u7F16\u8F91\u516C\u544A"))),r.a.createElement("div",{className:c.a.container_box},r.a.createElement("div",{style:{height:246},className:c.a.new_script_left},r.a.createElement($.a,{layout:"vertical",form:H},r.a.createElement($.a.Item,{label:"\u662F\u5426\u751F\u6548",name:"active",rules:[{required:!0}]},r.a.createElement(z.a.Group,{onChange:W.a.partial(oe,W.a,"active")},r.a.createElement(z.a,{value:1},"\u662F"),r.a.createElement(z.a,{value:0},"\u5426"))),r.a.createElement($.a.Item,{label:"\u7C7B\u578B",name:"tags",rules:[{required:!0}]},r.a.createElement(pe.a,{showSearch:!0,allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",optionFilterProp:"children",style:{width:"100%"},onChange:W.a.partial(oe,W.a,"tags"),showArrow:!0,filterOption:function(e,a){return a.children.toLowerCase().indexOf(e.toLowerCase())>=0}},dt.map(function(l){return r.a.createElement(ke,{value:l.id,key:l.id},l.name)}))),r.a.createElement($.a.Item,{label:"",name:"is_top"},r.a.createElement(ne.a,{onChange:W.a.partial(oe,W.a,"is_top"),checked:$e,disabled:!Je},"\u7F6E\u9876\u8BE5\u6587\u6863")))),r.a.createElement("div",{className:c.a.fixed_part},r.a.createElement("div",{id:"toolbar-container",className:c.a.toolbar})),r.a.createElement("div",{className:"".concat(c.a.script_middle," ").concat(c.a.script_eidt_middle),style:{margin:"auto"}},r.a.createElement("div",{className:c.a.editor_content,style:{height:ee-230}},r.a.createElement("div",{id:"text-container-title",className:c.a.text_title},r.a.createElement(He,{id:"text_title",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",rows:1,maxLength:30,autoSize:!0,onPressEnter:ot,onChange:it,value:N,style:{resize:"none",width:"100%",border:"none",outline:"none"}})),r.a.createElement("div",{id:"text-container-text",className:"".concat(c.a.showContentBox," ").concat(c.a.showContentBox2),style:{height:ee-305,paddingBottom:Ye}},r.a.createElement("h1",{className:c.a.placeholder},"    ")))),r.a.createElement("ul",{id:"catalogBox",style:{height:ee-187},className:"".concat(c.a.catalogBox2," ").concat(c.a.catalogBox)})),r.a.createElement("div",{className:c.a.image_box,id:"image_box"})),r.a.createElement("div",{className:c.a.footer_part},r.a.createElement("div",{className:c.a.bottom},r.a.createElement(F.b,null,r.a.createElement(Q.a,{onClick:st},"\u53D6\u6D88"),r.a.createElement(Q.a,{type:"primary",onClick:ct},"\u53D1\u5E03"))))))}},j8us:function(k,x,t){"use strict";t.d(x,"c",function(){return me}),t.d(x,"a",function(){return ne}),t.d(x,"d",function(){return Ee}),t.d(x,"b",function(){return z});var V=t("9og8"),ae=t("WmNS"),I=t.n(ae),F=t("9kvl"),ue=t("LvDl"),Q=t.n(ue),me=function(){var y=Object(V.a)(I.a.mark(function m(p){var M;return I.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(M=p&&p.id,!Q.a.isNaN(M)){D.next=3;break}return D.abrupt("return");case 3:return D.abrupt("return",Object(F.g)("/api/sys/help_doc/",{params:p}));case 4:case"end":return D.stop()}},m)}));return function(p){return y.apply(this,arguments)}}();function fe(y){return Y.apply(this,arguments)}function Y(){return Y=Object(V.a)(I.a.mark(function y(m){return I.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Object(F.g)("/api/auth/personal_center/",{params:m}));case 1:case"end":return M.stop()}},y)})),Y.apply(this,arguments)}var ne=function(m){return Object(F.g)("/api/sys/help_doc/",{method:"post",data:m})},Ee=function(){var y=Object(V.a)(I.a.mark(function m(p){return I.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Object(F.g)("/api/sys/help_doc/",{method:"put",data:p}));case 1:case"end":return g.stop()}},m)}));return function(p){return y.apply(this,arguments)}}(),z=function(){var y=Object(V.a)(I.a.mark(function m(p){return I.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Object(F.g)("/api/sys/help_doc/",{method:"delete",data:p}));case 1:case"end":return g.stop()}},m)}));return function(p){return y.apply(this,arguments)}}()},kzew:function(k,x,t){k.exports=t.p+"static/dropDown.340bfd91.svg"},sE86:function(k,x,t){k.exports={container:"container___3rlzG",layout:"layout___2WTlQ",footer_part:"footer_part___1n1F8",bottom:"bottom___1QeTK",image_box:"image_box___4FYzP",scale_box:"scale_box___D-oKo",scale_image:"scale_image___3sa1p",script_left:"script_left___wQKXQ",catalogBox2:"catalogBox2___3q041",fixed_part:"fixed_part___1ARCg",script_top:"script_top___A1Z8c",toolbar:"toolbar___3Umtb",new_script_left:"new_script_left___3AQ0j",use_help:"use_help___1YxRJ",add_help:"add_help___1C87s",noDataTable:"noDataTable___2Tu07",dataTable:"dataTable___vtlRh",del_doc_icon:"del_doc_icon___jkfKb",type:"type___3AJc2",edit_doc:"edit_doc___2xOjZ",edit_doc_title:"edit_doc_title___GRCAT",create_time:"create_time___X3uCI",edit_doc_botton:"edit_doc_botton___1tfE4",script_middle:"script_middle___2fTHE",center_content:"center_content___mvo-M",editor_content:"editor_content___1zByU",show_content:"show_content___3XB4V",content_right:"content_right___3g58G",title:"title___3mV8V",text_title:"text_title___2Dffa","ant-input":"ant-input___GxR6L",showContentBox:"showContentBox___2p_Iy",showContentBox2:"showContentBox2___2tPzB",script_right:"script_right___3tP-i",script_eidt_middle:"script_eidt_middle___x6WFG",placeholder:"placeholder___1Z5_2",doc_del_parent:"doc_del_parent___Vzkep",doc_del:"doc_del___1w2cP",doc_drag:"doc_drag___2NucL",addDocTitle:"addDocTitle___EJV8V",item_doc:"item_doc___10OAd",item_active:"item_active___3YNLN",selected:"selected___1BFYG",catalogIcon:"catalogIcon___1UVe7",catalogBox:"catalogBox___211M0",catalogBox3:"catalogBox3___3uTCH",ellipsis:"ellipsis___3ib5C",show_title:"show_title___3pPHQ"}}}]);
