(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{XoUT:function(e,t,a){"use strict";a.r(t);a("T2oS");var n=a("W9HT"),c=(a("DYRE"),a("zeV3")),r=(a("+L6B"),a("2/Rp")),o=(a("B9cy"),a("Ol7k")),i=(a("sRBo"),a("kaz8")),l=(a("7Kak"),a("9yH6")),d=(a("sPJy"),a("bE4q")),s=a("k1fw"),u=(a("miYZ"),a("tsqr")),_=a("9og8"),p=(a("y8nQ"),a("Vl3Y")),m=a("tJVT"),f=(a("OaEy"),a("2fM7")),h=(a("5NDa"),a("5rEg")),g=a("WmNS"),v=a.n(g),b=a("q1tI"),x=a.n(b),w=a("9kvl"),y=a("sE86"),E=a.n(y),k=a("j8us"),C=a("b60y"),O=a.n(C),j=a("LvDl"),T=a.n(j),B=a("hZgC"),N=a("c+yx"),S=a("kzew"),L=a.n(S),H=h["a"].TextArea,I=f["a"].Option,A='url("'.concat(L.a,'") center center / 16px 16px'),R=null,q=null,D=null,z=null,F=[];t["default"]=function(e){var t=e.match.params.help_id,a="/help_doc/:help_id/edit"===e.match.path||"/notice/:help_id/edit"===e.match.path?"edit":"new",h=/^\/help_doc/.test(e.match.path)?"help_doc":"notice",g=Object(b["useState"])(""),y=Object(m["a"])(g,2),C=y[0],j=y[1],S=Object(b["useState"])(!1),L=Object(m["a"])(S,2),P=L[0],V=L[1],J=Object(b["useState"])(!0),W=Object(m["a"])(J,2),M=W[0],G=W[1],Q=Object(b["useState"])(0),K=Object(m["a"])(Q,2),Y=K[0],X=K[1],Z=Object(b["useState"])(0),U=Object(m["a"])(Z,2),$=U[0],ee=U[1],te=Object(B["d"])(),ae=p["a"].useForm(),ne=Object(m["a"])(ae,1),ce=ne[0],re=Object(b["useRef"])(null),oe=Object(w["n"])((function(e){return Object(k["c"])(e)}),{formatResult:function(e){return 200===T.a.get(e,"code")?e.data:[]},initialData:[],defaultParams:[{id:Number(t)}]}),ie=oe.loading,le=oe.data;Object(b["useEffect"])((function(){F.forEach((function(e){var t=document.getElementById(e.id);t&&(t.innerHTML=e.text)}))}),[$]),Object(b["useEffect"])((function(){var e=ce.getFieldsValue();if("new"===a&&(e["active"]=1),"edit"===a&&le&&le[0]){e["active"]=le[0].active?1:0,e["is_top"]=1===le[0].order_id,e["tags"]=le[0].tags;var t=document.querySelector("#text-container-title #text_title");if(q&&t){var n=t.clientHeight;X(n)}e["active"]?V(1===le[0].order_id):(V(!1),G(e["active"]),e["is_top"]=!1)}if(ce.setFieldsValue(e),R&&le&&le[0]){var c=/^(\<p\>\<br\>\<\/p\>)+|(\<p\>\<br\>\<\/p\>)+$/g,r=le[0].content.replace(c,"");R.txt.html(le[0]&&r)}le&&le[0]&&(j(le[0].title),le[0].title||(D.placeholder="\u8bf7\u8f93\u5165\u6807\u9898(1~30\u5b57)",D.focus())),R&&le&&!le[0]&&(R.txt.html(""),R.txt.text(""),D.placeholder="\u8bf7\u8f93\u5165\u6807\u9898(1~30\u5b57)",D.focus())}),[le]);Object(b["useEffect"])((function(){R=new O.a("#toolbar-container","#text-container-text"),R.config.pasteFilterStyle=!1,R.config.minHeight=500,R.config.placeholder="",R.config.onCatalogChange=function(e){var t=document.getElementById("catalogBox");if(t){t.innerHTML="";var a="<div style='font-size: 20px;padding-bottom: 10px; border-bottom:1px solid rgba(0,0,0,0.1);margin-bottom: 15px' >\u5927\u7eb2</div>";t.innerHTML=a;var n=1;e=e.filter((function(e){return e&&e.text.trim()}));var c=!1;if(F.length!==e.length&&(ee(+new Date),F=T.a.cloneDeep(e)),e.forEach((function(a,r){if(r>0){var o=e[r-1].tag,i=e[r].tag,l=+i.replace("H",""),d=o.replace("H","");l>d&&l<=5&&n++,l<d&&(n=1)}a.level=n;var s=document.createElement("li"),u=document.createElement("a"),_=document.createElement("div"),p=document.createElement("span");if(r<e.length-1){var m=e[r+1].tag,f=e[r].tag,h=+f.replace("H",""),g=m.replace("H","");h<g&&(p.style.background=A,c=!0)}p.className="".concat(E.a.catalogIcon);var v=a.text.split("&nbsp;"),b="";v.forEach((function(e){e.trim()&&(b=b+e+" ")})),a.text=b,u.innerText=a.text;var x=e[r].tag,w=x.replace("H","");_.style.paddingLeft=.6*(Number(w)-1)+"rem",p.setAttribute("index",r),u.href="javascript:void(0)",u.onclick=function(e){e.stopPropagation();var t=document.querySelectorAll("#catalogBox li a");Array.from(t).forEach((function(e){e.style.color="rgba(0, 0, 0, 0.85)"})),e.target.style.color="#1890FF",R.scrollToHead(a.id);var n=document.getElementById(a.id);n&&(re.current=n.offsetTop);var c=0;return c=z.scrollTop,re.current<=c&&(z.scrollTop=re.current-16<0?0:re.current-16),c},5===a.level&&(p.style.background=""),_.appendChild(p),_.appendChild(u),s.id=a.id,s.appendChild(_),t.appendChild(s)})),!c){var r=document.querySelectorAll("#catalogBox span");Array.from(r).forEach((function(e){return e.style.display="none"}))}}},R.config.languageType=["Bash","C","C#","C++","CSS","Java","JavaScript","JSON","TypeScript","Plain text","Html","XML","SQL","Go","Kotlin","Lua","Markdown","PHP","Python","Shell Session","Ruby"],R.config.languageTab="    ",R.config.fontNames=["\u9ed1\u4f53","\u4eff\u5b8b","\u6977\u4f53","\u6807\u6977\u4f53","\u534e\u6587\u4eff\u5b8b","\u534e\u6587\u6977\u4f53","\u5b8b\u4f53","\u5fae\u8f6f\u96c5\u9ed1","Arial","Tahoma","Verdana","Times New Roman","Courier New"],R.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","justify","quote","emoticon","table","code","splitLine"],R.config.linkCheck=function(e,t){return!0},R.config.showLinkImg=!1,R.config.pasteTextHandle=function(e){var t=e.trim().indexOf("<img");if(0!==t)return e},R.txt.eventHooks.pasteEvents.push(function(){var e=Object(_["a"])(v.a.mark((function e(t){var a,n,c,r,o,i;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.clipboardData.files,!(a&&a.length>0)){e.next=17;break}n=0,c=a.length;case 3:if(!(n<c)){e.next=17;break}return r=new FormData,r.append("file",a[n]),e.next=8,Object(w["h"])("/api/sys/upload/",{method:"post",data:r});case 8:return o=e.sent,i=document.createElement("img"),i.src=o&&o.link,i.alt=" ",de(i),e.abrupt("break",17);case 14:n++,e.next=3;break;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R.create(),q=document.querySelector("#text-container-text"),D=document.querySelector("#text_title"),z=q.querySelector(".w-e-text"),"new"===a&&D&&D.focus();var e=q.querySelector('div[contenteditable = "true"]');return z.addEventListener("blur",pe,!1),e.addEventListener("click",_e,!1),window.addEventListener("click",se,!1),window.addEventListener("resize",ue,!1),function(){R.destroy(),z.removeEventListener("blur",pe,!1),e.removeEventListener("click",_e,!1),window.removeEventListener("click",se,!1),window.addEventListener("resize",ue,!1)}}),[]);var de=function(e){var t,a;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0),a.deleteContents();var n=document.createElement("div");n.appendChild(e);var c,r,o=document.createDocumentFragment();while(c=n.firstChild)r=o.appendChild(c);a.insertNode(o),r&&(a=a.cloneRange(),a.setStartAfter(r),a.collapse(!0),t.removeAllRanges(),t.addRange(a))}}else document.selection&&document.selection.type},se=function(){var e=document.getElementById("image_box");e&&(e.style.width=0,e.style.height=0)},ue=function(){var e=document.querySelector("#image_box img");e&&innerWidth<=1280&&(e.style.maxWidth="80%"),e&&innerWidth>1280&&(e.style.maxWidth="70%")},_e=function(e){e.stopPropagation();var t=e.target.getAttribute("src");if(t){var a=document.getElementById("image_box"),n=document.querySelector("#image_box img");n||(a.innerHTML="<div class=".concat(E.a.scale_box,"><img class=").concat(E.a.scale_image,' alt="  " /></div>'),n=document.querySelector("#image_box img")),a.style.width="100%",a.style.height="100%",innerWidth<=1280&&(n.style.maxWidth="80%"),n.src=t}},pe=function(){var e=document.createElement("p");e.innerHTML="<br/>",z.appendChild(e)},me=function(e){e.target.blur()},fe=function(e){j(e.target.value)},he=function(e,n,c){if(200===e)return u["default"].success("\u64cd\u4f5c\u6210\u529f!"),q.blur(),D.blur(),"edit"===a&&w["f"].push("/".concat(h,"/").concat(t)),void("new"===a&&w["f"].push("/".concat(h,"/").concat(c.id)));Object(N["m"])(e,n)},ge=function(){var e=Object(_["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ce.validateFields().then(function(){var e=Object(_["a"])(v.a.mark((function e(n){var c,r,o,i,l,d;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=Object(s["a"])(Object(s["a"])({},n),{},{title:C,content:R.txt.html(),doc_type:h}),r=k["a"],"edit"===a&&(r=k["d"],c.id=Number(t)),e.next=5,r(c);case 5:o=e.sent,i=o.code,l=o.msg,d=o.data,he(i,l,d);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){"edit"===a&&w["f"].push("/".concat(h,"/").concat(t)),"new"===a&&w["f"].push("/".concat(h))},be=function(e,t){var a=ce.getFieldsValue();"tags"===t&&(a[t]=e),"active"===t&&(a[t]=e.target.value,G(e.target.value),e.target.value||(V(!1),a["is_top"]=!1)),"is_top"===t&&(a[t]=e.target.checked,V(e.target.checked)),ce.setFieldsValue(a)},xe="help_doc"===h?[{id:"mustRead",name:"\u5fc5\u770b"},{id:"course",name:"\u6559\u7a0b"},{id:"docs",name:"\u6587\u6863"}]:[{id:"maintain",name:"\u7ef4\u62a4"},{id:"notice",name:"\u901a\u77e5"},{id:"upgrade",name:"\u5347\u7ea7"},{id:"stop",name:"\u6682\u505c"}];return x.a.createElement("div",{className:E.a.container},x.a.createElement(n["a"],{spinning:ie},x.a.createElement(o["a"],{className:E.a.layout},x.a.createElement("div",null,x.a.createElement(d["a"],{style:{marginBottom:"20px"}},x.a.createElement(d["a"].Item,null,x.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return w["f"].push("/")}},"\u9996\u9875")),x.a.createElement(d["a"].Item,null,x.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return w["f"].push("/".concat(h))}},"help_doc"===h?"\u4f7f\u7528\u5e2e\u52a9":"\u516c\u544a")),"help_doc"===h&&x.a.createElement(d["a"].Item,null,"new"===a?C||"\u65b0\u5efa\u6587\u6863":C||"\u7f16\u8f91\u6587\u6863"),"help_doc"!==h&&x.a.createElement(d["a"].Item,null,"new"===a?C||"\u65b0\u5efa\u516c\u544a":C||"\u7f16\u8f91\u516c\u544a"))),x.a.createElement("div",{className:E.a.container_box},x.a.createElement("div",{style:{height:246},className:E.a.new_script_left},x.a.createElement(p["a"],{form:ce,layout:"vertical"},x.a.createElement(p["a"].Item,{label:"\u662f\u5426\u751f\u6548",name:"active",rules:[{required:!0}]},x.a.createElement(l["a"].Group,{onChange:T.a.partial(be,T.a,"active")},x.a.createElement(l["a"],{value:1},"\u662f"),x.a.createElement(l["a"],{value:0},"\u5426"))),x.a.createElement(p["a"].Item,{label:"\u7c7b\u578b",name:"tags",rules:[{required:!0}]},x.a.createElement(f["a"],{showSearch:!0,allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b",optionFilterProp:"children",style:{width:"100%"},onChange:T.a.partial(be,T.a,"tags"),showArrow:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},xe.map((function(e){return x.a.createElement(I,{value:e.id,key:e.id},e.name)})))),x.a.createElement(p["a"].Item,{label:"",name:"is_top"},x.a.createElement(i["a"],{onChange:T.a.partial(be,T.a,"is_top"),checked:P,disabled:!M},"\u7f6e\u9876\u8be5\u6587\u6863")))),x.a.createElement("div",{className:E.a.fixed_part},x.a.createElement("div",{id:"toolbar-container",className:E.a.toolbar})),x.a.createElement("div",{style:{margin:"auto"},className:"".concat(E.a.script_middle," ").concat(E.a.script_eidt_middle)},x.a.createElement("div",{className:E.a.editor_content,style:{height:te-230}},x.a.createElement("div",{id:"text-container-title",className:E.a.text_title},x.a.createElement(H,{id:"text_title",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",rows:1,maxLength:30,autoSize:!0,onPressEnter:me,onChange:fe,value:C,style:{resize:"none",width:"100%",border:"none",outline:"none"}})),x.a.createElement("div",{id:"text-container-text",className:"".concat(E.a.showContentBox," ").concat(E.a.showContentBox2),style:{height:te-305,paddingBottom:Y}},x.a.createElement("h1",{className:E.a.placeholder},"    ")))),x.a.createElement("ul",{id:"catalogBox",style:{height:te-187},className:"".concat(E.a.catalogBox2," ").concat(E.a.catalogBox)})),x.a.createElement("div",{className:E.a.image_box,id:"image_box"})),x.a.createElement("div",{className:E.a.footer_part},x.a.createElement("div",{className:E.a.bottom},x.a.createElement(c["b"],null,x.a.createElement(r["a"],{onClick:ve},"\u53d6\u6d88"),x.a.createElement(r["a"],{type:"primary",onClick:ge},"\u53d1\u5e03"))))))}},hkKa:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("J4zp"),c=a.n(n),r=a("q1tI");function o(){var e=r["useReducer"]((function(e){return e+1}),0),t=c()(e,2),a=t[1];return a}},j8us:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return _}));var n=a("9og8"),c=a("WmNS"),r=a.n(c),o=a("9kvl"),i=a("LvDl"),l=a.n(i),d=function(){var e=Object(n["a"])(r.a.mark((function e(t){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t&&t.id,!l.a.isNaN(a)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",Object(o["h"])("/api/sys/help_doc/",{params:t}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var s=function(e){return Object(o["h"])("/api/sys/help_doc/",{method:"post",data:e})},u=function(){var e=Object(n["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["h"])("/api/sys/help_doc/",{method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(n["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["h"])("/api/sys/help_doc/",{method:"delete",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},kzew:function(e,t,a){e.exports=a.p+"static/dropDown.54d6dc97.svg"},sE86:function(e,t,a){e.exports={container:"container___3rlzG",layout:"layout___2WTlQ",footer_part:"footer_part___1n1F8",bottom:"bottom___1QeTK",image_box:"image_box___4FYzP",scale_box:"scale_box___D-oKo",scale_image:"scale_image___3sa1p",script_left:"script_left___wQKXQ",catalogBox2:"catalogBox2___3q041",fixed_part:"fixed_part___1ARCg",script_top:"script_top___A1Z8c",toolbar:"toolbar___3Umtb",new_script_left:"new_script_left___3AQ0j",use_help:"use_help___1YxRJ",add_help:"add_help___1C87s",noDataTable:"noDataTable___2Tu07",dataTable:"dataTable___vtlRh",del_doc_icon:"del_doc_icon___jkfKb",type:"type___3AJc2",edit_doc:"edit_doc___2xOjZ",edit_doc_title:"edit_doc_title___GRCAT",create_time:"create_time___X3uCI",edit_doc_botton:"edit_doc_botton___1tfE4",script_middle:"script_middle___2fTHE",center_content:"center_content___mvo-M",editor_content:"editor_content___1zByU",show_content:"show_content___3XB4V",content_right:"content_right___3g58G",title:"title___3mV8V",text_title:"text_title___2Dffa","ant-input":"ant-input___GxR6L",showContentBox:"showContentBox___2p_Iy",showContentBox2:"showContentBox2___2tPzB",script_right:"script_right___3tP-i",script_eidt_middle:"script_eidt_middle___x6WFG",placeholder:"placeholder___1Z5_2",doc_del_parent:"doc_del_parent___Vzkep",doc_del:"doc_del___1w2cP",doc_drag:"doc_drag___2NucL",addDocTitle:"addDocTitle___EJV8V",item_doc:"item_doc___10OAd",item_active:"item_active___3YNLN",selected:"selected___1BFYG",catalogIcon:"catalogIcon___1UVe7",catalogBox:"catalogBox___211M0",catalogBox3:"catalogBox3___3uTCH",ellipsis:"ellipsis___3ib5C",show_title:"show_title___3pPHQ"}}}]);