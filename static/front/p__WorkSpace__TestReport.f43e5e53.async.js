(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3604],{76710:function(Fe){Fe.exports={cover:"cover___vymB3"}},97170:function(Fe){Fe.exports={cover:"cover___3TUxU"}},22054:function(Fe,Pe,t){"use strict";t.r(Pe),t.d(Pe,{default:function(){return pt}});var g=t(16832),$=t(69827),Y=t(54905),Ce=t(90087),Ve=t(46721),q=t(94867),C=t(39190),p=t(22374),we=t(526),r=t(22812),pe=t(41428),ee=t(97939),$e,fe=ee.ZP.div($e||($e=(0,pe.Z)([`
    width:`,`px;
    height:`,`px;
    overflow-y:scrollY;
    background:#fff;
    width:100%;
    .ant-tabs {
        background: #fff;
        .ant-tabs-content-holder{
            padding-left: 20px;
            padding-right: 20px;
        }
        button{
            margin-right: 20px;
        }
    }
`])),function(H){var x=H.width;return x},function(H){var x=H.height;return x}),Be=t(67448),Re=t(47548),Te=t(20632),Le=t(71853),ze=t(57359),te=t(34423),Oe=t(8281),xe=t(58591),Ie=t(81138),ge=t(96146),d=t(20418),n=t(35832),a=t(32326),c=t(40118),u=t(29966),i=t(11407),re=t(41604),j,A,L,b=ee.ZP.span(j||(j=(0,pe.Z)([`
    color:#1890FF;
    cursor:pointer;
    // display:`,`;
`])),function(H){var x=H.isDefault;return x?"none":"inline-block"}),ne=`
    tr {
        &:hover {
            td.no_tourist {
                cursor: pointer;
                color : #1890FF;
                span {
                    cursor: pointer;
                    color : #1890FF;
                }
            }
        }
    }
`,oe=(0,ee.ZP)(re.Z)(A||(A=(0,pe.Z)([`
    `,`
`])),ne),Ze=ee.ZP.div(L||(L=(0,pe.Z)([`
    `,`
`])),ne),je=t(31784),De=t(44851),ye=t.n(De),ke=t(69230),me=t(33821),_e=function(){var H=(0,a.Z)((0,n.Z)().mark(function x(Z){return(0,n.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,r.WY)("/api/sys/project/",{params:Z}));case 1:case"end":return S.stop()}},x)}));return function(Z){return H.apply(this,arguments)}}(),he=t(97170),Ee=t.n(he),e=t(52454),be=function(x){var Z=x.confirm,w=x.onConfirm,S=x.page_size,_=x.ws_id,M=(0,p.useState)([]),B=(0,C.Z)(M,2),y=B[0],F=B[1],R=(0,p.useState)(),z=(0,C.Z)(R,2),G=z[0],U=z[1],W=(0,p.useState)(),J=(0,C.Z)(W,2),K=J[0],Q=J[1],ce=(0,p.useState)(!0),ae=(0,C.Z)(ce,2),de=ae[0],se=ae[1],ve=(0,p.useState)(!1),ie=(0,C.Z)(ve,2),f=ie[0],l=ie[1],m=me.Z.Option,h=function(){var s=(0,a.Z)((0,n.Z)().mark(function v(I){var P,Se,E;return(0,n.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(P=I&&I.replace(/\s*/g,""),!(G&&G==P)){D.next=3;break}return D.abrupt("return");case 3:return U(P),se(!0),D.next=7,_e({name:P,page_size:S||10,page_num:1,ws_id:_});case 7:Se=D.sent,E=Se.data,F(Array.isArray(E)?E:[]),se(!1);case 11:case"end":return D.stop()}},v)}));return function(I){return s.apply(this,arguments)}}(),o=function(){h()};return(0,p.useEffect)(function(){h()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Ee().cover,onClick:function(){f||Z==null||Z()}}),(0,e.jsx)(me.Z,{allowClear:!0,notFoundContent:de?(0,e.jsx)(Re.Z,{size:"small"}):null,filterOption:!1,showSearch:!0,dropdownMatchSelectWidth:!0,onSearch:h,style:{width:"100%"},onChange:function(v){return Q(v)},onDeselect:o,onClear:o,showArrow:!1,autoFocus:!0,value:K,onFocus:function(){l(!0)},onBlur:function(){setTimeout(function(){l(!1)},200)},children:y.map(function(s){return(0,e.jsx)(m,{value:s.id,children:s.name},s.id)})}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(q.Z,{onClick:function(){Z==null||Z(),w(K)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(r._H,{id:"operation.search"})}),(0,e.jsx)(q.Z,{type:"text",onClick:function(){Z==null||Z(),Q(void 0),w(void 0),h()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})]})},He=be,le=function(){var H=(0,a.Z)((0,n.Z)().mark(function x(Z){return(0,n.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,r.WY)("/api/get/product/version/",{params:Z}));case 1:case"end":return S.stop()}},x)}));return function(Z){return H.apply(this,arguments)}}(),ue=t(76710),Xe=t.n(ue),Ge=function(x){var Z=x.confirm,w=x.onConfirm,S=x.page_size,_=x.ws_id,M=(0,p.useState)([]),B=(0,C.Z)(M,2),y=B[0],F=B[1],R=(0,p.useState)(),z=(0,C.Z)(R,2),G=z[0],U=z[1],W=(0,p.useState)(!0),J=(0,C.Z)(W,2),K=J[0],Q=J[1],ce=(0,p.useState)(!1),ae=(0,C.Z)(ce,2),de=ae[0],se=ae[1],ve=me.Z.Option,ie=function(){var f=(0,a.Z)((0,n.Z)().mark(function l(){var m,h,o;return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return Q(!0),v.next=3,le({page_size:S||10,page_num:1,ws_id:_});case 3:m=v.sent,h=m.data,o=Array.isArray(h)?h:[],o=o.filter(function(I){return I}),F(o),Q(!1);case 9:case"end":return v.stop()}},l)}));return function(){return f.apply(this,arguments)}}();return(0,p.useEffect)(function(){ie()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Xe().cover,onClick:function(){de||Z==null||Z()}}),(0,e.jsx)(me.Z,{showSearch:!0,allowClear:!0,notFoundContent:K?(0,e.jsx)(Re.Z,{size:"small"}):null,style:{width:"100%"},onChange:function(l){return U(l)},placeholder:(0,e.jsx)(r._H,{id:"report.select.productVersion"}),optionFilterProp:"children",showArrow:!1,autoFocus:!0,value:G,onFocus:function(){se(!0)},onBlur:function(){setTimeout(function(){se(!1)},200)},filterOption:function(l,m){return m.children.toLowerCase().indexOf(l.toLowerCase())>=0},children:y.map(function(f){return(0,e.jsx)(ve,{value:f,children:f},f)})}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(q.Z,{onClick:function(){Z==null||Z(),w(G)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(r._H,{id:"operation.search"})}),(0,e.jsx)(q.Z,{type:"text",onClick:function(){Z==null||Z(),U(void 0),w(void 0),ie()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})]})},Ue=Ge,Ae=t(76742),X=t(992),k=t(97207),O=t.n(k),T=t(39935),V=t(93299),Me=t(79390),N=t(6130),Je=u.Z.RangePicker,We=function(x){var Z=(0,r.YB)(),w=Z.formatMessage,S=(0,r.md)(),_=x.ws_id,M=(0,p.useState)({page_num:1,page_size:10,ws_id:_}),B=(0,C.Z)(M,2),y=B[0],F=B[1],R=(0,p.useState)(!1),z=(0,C.Z)(R,2),G=z[0],U=z[1],W=(0,p.useState)({}),J=(0,C.Z)(W,2),K=J[0],Q=J[1],ce=(0,T.YM)(y),ae=function(){var f=(0,a.Z)((0,n.Z)().mark(function l(){var m;return(0,n.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return U(!0),o.next=3,(0,X.vP)(y);case 3:m=o.sent,m.code===200?Q(m||{}):(0,T.EV)(m.code,m.msg),U(!1);case 6:case"end":return o.stop()}},l)}));return function(){return f.apply(this,arguments)}}();(0,p.useEffect)(function(){ae()},[y]);var de=(0,T.YM)(K),se=function(){var f=(0,a.Z)((0,n.Z)().mark(function l(m){var h,o,s,v;return(0,n.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return h=ce.current.page_size,P.next=3,(0,X.tp)({report_id:m});case 3:o=P.sent,s=o.code,v=o.msg,s===200?(F((0,d.Z)((0,d.Z)({},y),{},{page_num:(0,T.NG)(ce,de),page_size:h})),ge.default.success(w({id:"request.delete.success"}))):(0,T.EV)(s,v);case 7:case"end":return P.stop()}},l)}));return function(m){return f.apply(this,arguments)}}(),ve=function(l,m,h){var o=m[0],s=m[1];!o&&!s&&F((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:null})),o&&s&&F((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:JSON.stringify({start_time:o,end_time:s})})),h==null||h()},ie=[(0,d.Z)((0,d.Z)({dataIndex:"name",title:(0,e.jsx)(r._H,{id:"report.columns.name"}),width:200,ellipsis:{shwoTitle:!1},className:"no_tourist"},(0,V.QT)(y,F,"name",w({id:"report.columns.name.placeholder"}))),{},{render:function(l,m){return(0,e.jsx)(N.K,{ellipsis:{tooltip:l},children:(0,e.jsx)(ye(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[y.name||""],autoEscape:!0,textToHighlight:l||"-",onClick:function(){return window.open("/ws/".concat(_,"/test_report/").concat(m.id))}})})}}),{title:(0,e.jsx)(r._H,{id:"report.columns.project"}),ellipsis:{shwoTitle:!1},width:150,dataIndex:"project",filterDropdown:function(l){var m=l.confirm;return(0,e.jsx)(He,{confirm:m,onConfirm:function(o){return F((0,d.Z)((0,d.Z)({},y),{},{project_id:o,page_num:1}))},page_size:9999,ws_id:_})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.project_id?"#1890ff":void 0}})},render:function(l){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:l||"-"})}},{dataIndex:"product_version",ellipsis:{shwoTitle:!1},width:150,title:(0,e.jsx)(r._H,{id:"report.columns.product_version"}),filterDropdown:function(l){var m=l.confirm;return(0,e.jsx)(Ue,{confirm:m,onConfirm:function(o){return F((0,d.Z)((0,d.Z)({},y),{},{product_version:o,page_num:1}))},page_size:9999,ws_id:_})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.product_version?"#1890ff":void 0}})},render:function(l){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:l||"-"})}},(0,d.Z)((0,d.Z)({dataIndex:"creator",width:150,title:(0,e.jsx)(r._H,{id:"report.columns.creator"})},(0,V.ln)(y,F,"creator")),{},{render:function(l){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:l||"-"})}}),{dataIndex:"description",width:200,title:(0,e.jsx)(r._H,{id:"report.columns.description"}),ellipsis:{shwoTitle:!1},render:function(l){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:l||"-"})}},{dataIndex:"gmt_modified",width:200,title:(0,e.jsx)(r._H,{id:"report.columns.gmt_modified"}),filterDropdown:function(l){var m=l.confirm;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Je,{size:"middle",showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",onChange:O().partial(ve,O(),O(),m)}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsx)(q.Z,{type:"text",onClick:function(){return F((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:void 0}))},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.gmt_modified?"#1890ff":void 0}})},ellipsis:!0,render:function(l){return l||"-"}},S.WsTourist()&&{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),width:200,fixed:"right",render:function(l){var m=O().get(l,"id");return(0,e.jsx)(r.Nv,{accessible:S.WsMemberOperateSelf(l.creator_id),fallback:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(b,{onClick:function(){return(0,T.WR)()},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(b,{onClick:function(){return(0,T.WR)()},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(b,{onClick:function(){return window.open("/ws/".concat(_,"/test_report/").concat(m,"/edit"))},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(Le.Z,{title:(0,e.jsx)(r._H,{id:"report.report.delete.prompt"}),okText:(0,e.jsx)(r._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(r._H,{id:"operation.cancel"}),onConfirm:O().partial(se,m||""),children:(0,e.jsx)(b,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})})]})})}}].filter(Boolean);return(0,e.jsxs)(Re.Z,{spinning:G,children:[(0,e.jsx)(Ze,{children:(0,e.jsx)(Me.sL,{size:"small",name:"ws-test-report-list",refreshDeps:[S,_,y],rowKey:"id",columns:ie,pagination:!1,dataSource:K.data||[]})}),(0,e.jsx)(Ae.Z,{total:K.total,pageSize:y.page_size,currentPage:y.page_num,onPageChange:function(l,m){F((0,d.Z)((0,d.Z)({},y),{},{page_num:l,page_size:m}))}})]})},Ye=(0,p.memo)(We),Qe=t(20693),Ne=t(3278),qe=t(31650),et=t(25100),mt=t(65790),Ke=t(17187),ht=t(88018),at=t(58414),tt,rt,nt,st=(0,ee.ZP)(at.Z)(tt||(tt=(0,pe.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`]))),it=ee.ZP.div(rt||(rt=(0,pe.Z)([`
    width: calc(100% + 48px);
    transform: translateX(-24px);
`]))),ot=(0,ee.ZP)(xe.Z)(nt||(nt=(0,pe.Z)([`
    border-top: '10px solid #F5F5F5';
`]))),lt=function(){return new Array(4).fill("").reduce(function(x,Z){return x.concat(String.fromCharCode(97+Math.ceil(Math.random()*25)))},"")},ut=(0,p.forwardRef)(function(H,x){var Z=(0,r.YB)(),w=Z.formatMessage,S=Ke.Z.useForm(),_=(0,C.Z)(S,1),M=_[0],B=(0,p.useState)(!1),y=(0,C.Z)(B,2),F=y[0],R=y[1],z=(0,p.useState)(!1),G=(0,C.Z)(z,2),U=G[0],W=G[1],J=(0,p.useState)({}),K=(0,C.Z)(J,2),Q=K[0],ce=K[1],ae=(0,p.useState)(""),de=(0,C.Z)(ae,2),se=de[0],ve=de[1];(0,p.useImperativeHandle)(x,function(){return{show:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o="".concat(h.name,"-copy-").concat(lt());W(!0),ce((0,d.Z)((0,d.Z)({},h),{},{name:o})),ve(h.name),M.setFieldsValue((0,d.Z)((0,d.Z)({},h),{},{name:o}))}}});var ie=function(){M.resetFields(),R(!1),W(!1)},f=function(h,o){if(h===200)H.onOk(),ge.default.success(w({id:"request.copy.success"})),W(!1),M.resetFields();else if(h===201){var s=w({id:"report.template.already.exists"});M.setFields([{name:"name",errors:[s]}])}else ge.default.error(o);R(!1)},l=function(){!M.getFieldValue("name")||(R(!0),M.validateFields().then(function(){var h=(0,a.Z)((0,n.Z)().mark(function o(s){var v,I,P;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,X.rj)((0,d.Z)((0,d.Z)({ws_id:H.ws_id},Q),s));case 2:v=E.sent,I=v.code,P=v.msg,f(I,P);case 6:case"end":return E.stop()}},o)}));return function(o){return h.apply(this,arguments)}}()).catch(function(h){return console.log(h)}))};return(0,e.jsxs)(st,{title:(0,e.jsx)(r._H,{id:"report.template.copy"}),width:"375",onClose:ie,visible:U,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(q.Z,{onClick:ie,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(q.Z,{type:"primary",disabled:F,onClick:l,children:Q&&Q.name?(0,e.jsx)(r._H,{id:"operation.update"}):(0,e.jsx)(r._H,{id:"operation.confirm"})})]})}),children:[(0,e.jsx)("div",{className:"server_provider",children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(et.Z.Text,{className:"script_right_name",strong:!0,children:(0,e.jsx)(r._H,{id:"report.original.template"})}),(0,e.jsx)(et.Z.Text,{children:se})]})}),(0,e.jsx)(it,{children:(0,e.jsx)(ot,{})}),(0,e.jsxs)(Ke.Z,{form:M,layout:"vertical",children:[(0,e.jsx)(Ke.Z.Item,{label:(0,e.jsx)(r._H,{id:"report.new.template"}),name:"name",rules:[{required:!0,pattern:/^[\u4E00-\u9FA5A-Za-z0-9\._-]{1,64}$/g,message:w({id:"report.new.template.message"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"auto",placeholder:w({id:"report.new.template.placeholder"})})}),(0,e.jsx)(Ke.Z.Item,{label:(0,e.jsx)(r._H,{id:"report.description.input"}),name:"description",children:(0,e.jsx)(Ne.Z.TextArea,{placeholder:w({id:"report.description.placeholder"})})})]})]})}),ct=function(x){var Z=(0,r.YB)(),w=Z.formatMessage,S=x.ws_id,_=x.tab,M=(0,r.md)(),B={name:"",creator:"",update_user:"",page_num:1,page_size:10,ws_id:S},y=(0,p.useState)(B),F=(0,C.Z)(y,2),R=F[0],z=F[1],G=(0,p.useState)({}),U=(0,C.Z)(G,2),W=U[0],J=U[1],K=(0,p.useState)(!1),Q=(0,C.Z)(K,2),ce=Q[0],ae=Q[1],de=(0,p.useRef)(null),se=(0,T.YM)(R),ve=function(){var o=(0,a.Z)((0,n.Z)().mark(function s(){var v,I,P;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return ae(!0),E.next=3,(0,X.MD)(R);case 3:v=E.sent,I=v.code,P=v.msg,I===200?(J(v),ae(!1)):(0,T.EV)(I,P);case 6:case"end":return E.stop()}},s)}));return function(){return o.apply(this,arguments)}}(),ie=(0,T.YM)(W);(0,p.useEffect)(function(){ve()},[R]),(0,p.useEffect)(function(){z(B)},[_]);var f=function(){var o=(0,a.Z)((0,n.Z)().mark(function s(v){var I,P,Se,E;return(0,n.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return I=se.current.page_size,D.prev=1,D.next=4,(0,X.in)({id:v});case 4:P=D.sent,Se=P.code,E=P.msg,Se===200?(z((0,d.Z)((0,d.Z)({},R),{},{page_num:(0,T.NG)(se,ie),page_size:I})),ge.default.success(w({id:"request.delete.success"}))):(0,T.EV)(Se,E),D.next=14;break;case 10:D.prev=10,D.t0=D.catch(1),console.log(D.t0),ge.default.error(w({id:"request.delete.failed"}));case 14:case"end":return D.stop()}},s,null,[[1,10]])}));return function(v){return o.apply(this,arguments)}}(),l=function(s){var v;(v=de.current)===null||v===void 0||v.show(s)},m=(0,p.useMemo)(function(){return W&&O().isArray(W.data)?W.data:[]},[W]),h=[(0,d.Z)((0,d.Z)({dataIndex:"name",title:(0,e.jsx)(r._H,{id:"report.columns.template"}),ellipsis:{shwoTitle:!1},width:200},(0,V.QT)(R,z,"name",w({id:"report.columns.template.placeholder"}))),{},{render:function(s,v){return(0,e.jsx)(N.K,{ellipsis:{tooltip:s},children:(0,e.jsx)(ye(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[R.name||""],autoEscape:!0,textToHighlight:s||"-"})})}}),(0,d.Z)((0,d.Z)({dataIndex:"creator_name",ellipsis:{shwoTitle:!1},width:180,title:(0,e.jsx)(r._H,{id:"report.columns.creator_name"})},(0,V.ln)(R,z,"creator")),{},{render:function(s){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:s||"-"})}}),(0,d.Z)((0,d.Z)({dataIndex:"update_user_name",width:180,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.update_user_name"})},(0,V.ln)(R,z,"update_user")),{},{render:function(s){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:s||"-"})}}),{dataIndex:"description",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.description"}),render:function(s){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{dataIndex:"gmt_created",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.gmt_created"}),render:function(s){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{dataIndex:"gmt_modified",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.gmt_modified.s"}),render:function(s){return(0,e.jsx)(N.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),fixed:"right",key:"operation",width:200,render:function(s){var v=O().get(s,"is_default");return(0,e.jsxs)(te.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,T.N1)("/ws/".concat(S,"/test_report/template/").concat(s.id,"/preview"))},children:(0,e.jsx)(r._H,{id:"operation.preview"})}),(0,e.jsx)(r.Nv,{accessible:M.WsMemberOperateSelf(s.creator),fallback:(0,e.jsxs)(te.Z,{onClick:function(){return(0,T.WR)()},children:[!v&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(b,{children:(0,e.jsx)(r._H,{id:"operation.copy"})}),!v&&(0,e.jsx)(b,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(te.Z,{children:[!v&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,T.N1)("/ws/".concat(S,"/test_report/template/").concat(s.id))},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(b,{onClick:O().partial(l,s),children:(0,e.jsx)(r._H,{id:"operation.copy"})}),!v&&(0,e.jsx)(Le.Z,{title:(0,e.jsx)(r._H,{id:"report.template.delete.prompt"}),okText:(0,e.jsx)(r._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(r._H,{id:"operation.cancel"}),onConfirm:O().partial(f,O().get(s,"id")||""),children:(0,e.jsx)(b,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})})]})})]})}}];return(0,e.jsxs)(Re.Z,{spinning:ce,children:[(0,e.jsx)(Ze,{children:(0,e.jsx)(Me.sL,{size:"small",rowKey:"id",columns:h,name:"ws-report-template-table",loading:ce,dataSource:m,pagination:!1})}),(0,e.jsx)(Ae.Z,{total:W.total,currentPage:R.page_num,pageSize:R.page_size,onPageChange:function(s,v){return z((0,d.Z)((0,d.Z)({},R),{},{page_num:s,page_size:v}))}}),(0,e.jsx)(ut,{ref:de,onOk:ve,ws_id:S})]})},dt=(0,p.memo)(ct),pt=function(H){var x=H.match,Z=H.location,w=x.params.ws_id,S="menu.Workspace.TestReport.".concat(H.route.name),_=(0,r.md)();(0,we.jk)(S);var M=(0,we.CR)(),B=M.height,y=M.width,F=(0,p.useState)(Z.query.t||"list"),R=(0,C.Z)(F,2),z=R[0],G=R[1],U=(0,p.useCallback)(function(K){G(K),r.m8.push(Z.pathname+"?t=".concat(K))},[]),W=(0,p.useCallback)(function(){r.m8.push("/ws/".concat(w,"/test_report/compare"))},[]),J=(0,p.useCallback)(function(){r.m8.push("/ws/".concat(w,"/test_report/template"))},[]);return(0,e.jsx)($.Z.Content,{children:(0,e.jsx)(fe,{width:y-40,height:B-50,children:(0,e.jsxs)(Ce.Z,{defaultActiveKey:z,onTabClick:U,tabBarStyle:{height:64,background:"#FAFBFC"},tabBarExtraContent:z==="list"?_.IsWsSetting()&&(0,e.jsx)(q.Z,{type:"primary",onClick:W,children:(0,e.jsx)(r._H,{id:"report.create.report"})}):_.IsWsSetting()&&(0,e.jsx)(q.Z,{type:"primary",onClick:J,children:(0,e.jsx)(r._H,{id:"report.create.template"})}),children:[(0,e.jsx)(Ce.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"report.test.report"}),children:(0,e.jsx)(Ye,{ws_id:w,tab:z,tableHeght:B-80})},"list"),_.IsWsSetting()&&(0,e.jsx)(Ce.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"report.template"}),children:(0,e.jsx)(dt,{ws_id:w,tab:z,tableHeght:B-80})},"template")]})})})}},992:function(Fe,Pe,t){"use strict";t.d(Pe,{MD:function(){return Ce},rj:function(){return Ve},in:function(){return q},vP:function(){return C},tp:function(){return p},iE:function(){return ee},PL:function(){return $e},AX:function(){return fe},Me:function(){return Be},ow:function(){return te},nP:function(){return xe},MC:function(){return ge}});var g=t(35832),$=t(32326),Y=t(22812),Ce=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/template/list/",{params:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),Ve=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/template/copy/",{method:"post",data:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),q=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/template/detail/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),C=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/test/report/",{params:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),p=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/test/report/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),we=null,r=null,pe=null,ee=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/test/report/",{method:"post",data:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),$e=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/template/detail/",{params:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),fe=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/test/report/detail/",{params:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}(),Be=function(){var n=(0,$.Z)((0,g.Z)().mark(function a(c){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Y.WY)("/api/report/test/report/",{method:"put",data:c}));case 1:case"end":return i.stop()}},a)}));return function(c){return n.apply(this,arguments)}}();function Re(n){return Te.apply(this,arguments)}function Te(){return Te=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/auth/user/",{params:a}));case 1:case"end":return u.stop()}},n)})),Te.apply(this,arguments)}function Le(n){return ze.apply(this,arguments)}function ze(){return ze=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/job/result/compare/chart/",{data:a,method:"post"}));case 1:case"end":return u.stop()}},n)})),ze.apply(this,arguments)}function te(n){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,$.Z)((0,g.Z)().mark(function n(a){return(0,g.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Y.WY)("/api/report/test/report/item_suite/",{data:a,method:"post"}));case 1:case"end":return u.stop()}},n)})),Oe.apply(this,arguments)}function xe(n){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,$.Z)((0,g.Z)().mark(function n(a){return(0,g.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Y.WY)("/api/report/test/report/update_desc/",{data:a,method:"post"}));case 1:case"end":return u.stop()}},n)})),Ie.apply(this,arguments)}function ge(n){return d.apply(this,arguments)}function d(){return d=(0,$.Z)((0,g.Z)().mark(function n(a){return(0,g.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,Y.WY)("/api/report/test/report/item/update_desc/",{method:"post",data:a}));case 1:case"end":return u.stop()}},n)})),d.apply(this,arguments)}},79390:function(Fe,Pe,t){"use strict";t.d(Pe,{sL:function(){return i},ny:function(){return c},Fu:function(){return u}});var g=t(20418),$=t(39190),Y=t(488),Ce=t(26388),Ve=t(11407),q=t(41604),C=t(2605),p=t(74127),we=t(41428),r=t(22374),pe=t(48434),ee=t(97939),$e=t(99648),fe=t(52454),Be=["width","onResizeStart","onResize","onResizeStop","resize"],Re=["columns","name","onColumnsChange"],Te,Le,ze,te=ee.ZP.div(Te||(Te=(0,we.Z)([`
    position: relative;
    width: 100%;
`]))),Oe=ee.ZP.div.attrs(function(re){return{style:{left:re.left,height:re==null?void 0:re.height}}})(Le||(Le=(0,we.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),xe=(0,ee.ZP)(pe.Resizable)(ze||(ze=(0,we.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(re){var j=re.resize;return j?"col-resize":"default"}),Ie=function(j){var A=j.width,L=j.onResizeStart,b=j.onResize,ne=j.onResizeStop,oe=j.resize,Ze=(0,Y.Z)(j,Be);return(0,fe.jsx)(xe,(0,g.Z)((0,g.Z)({width:A||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:L,onResize:b,onResizeStop:ne,resize:oe?1:0},Ze),{},{children:(0,fe.jsx)("th",(0,g.Z)({},Ze))}))},ge=function(j){var A=j.columns,L=A===void 0?[]:A,b=j.name,ne=j.onColumnsChange,oe=(0,Y.Z)(j,Re),Ze=r.useState(0),je=(0,$.Z)(Ze,2),De=je[0],ye=je[1],ke=r.useState(0),me=(0,$.Z)(ke,2),_e=me[0],he=me[1],Ee=r.useState(!1),e=(0,$.Z)(Ee,2),be=e[0],He=e[1],le=r.useRef(null),ue=(0,$e.Z)(le),Xe=function(k){return function(O,T){var V;if((0,p.Z)(T),!!L[k].ellipsis){var Me=O.clientX,N=Me-((V=le.current)===null||V===void 0?void 0:V.getBoundingClientRect().x);he(N),ye(N),He(!0)}}},Ge=function(){return function(k){var O,T=k.clientX,V=T-((O=le.current)===null||O===void 0?void 0:O.getBoundingClientRect().x);ye(V)}},Ue=function(k){return function(O,T){var V,Me=T.size,N=O.clientX,Je=N-((V=le.current)===null||V===void 0?void 0:V.getBoundingClientRect().x),We=(0,C.Z)(L);if(We[k].ellipsis){var Ye=Me.width+=Je-_e,Qe=We[k],Ne=Qe.dataIndex,qe=Qe.key;Ye>20&&(We[k]=(0,g.Z)((0,g.Z)({},We[k]),{},{width:Ye}),b&&u(b,Ne||qe,Ye),ne==null||ne())}ye(0),he(0),He(!1)}},Ae=r.useMemo(function(){return L.reduce(function(X,k){return k.width?X+=k==null?void 0:k.width:X},0)},[L]);return(0,fe.jsxs)(te,{ref:le,className:"resize-table-wrapper",children:[(0,fe.jsx)(q.Z,(0,g.Z)((0,g.Z)({},oe),{},{components:{header:{cell:Ie}},scroll:(j==null?void 0:j.scroll)||{x:Ae||(ue==null?void 0:ue.width)},columns:L.filter(Boolean).map(function(X,k){return(0,g.Z)((0,g.Z)({},X),{},{onHeaderCell:function(T){return{resize:!!X.ellipsis,width:T.width,onResizeStart:Xe(k),onResize:Ge(),onResizeStop:Ue(k)}}})})})),be&&(0,fe.jsx)(Oe,{height:ue==null?void 0:ue.height,left:De||_e})]})},d=ge,n=["name","columns","refreshDeps","onColumnsChange"],a="umi_locale",c=function(j,A){var L=localStorage.getItem(j),b=localStorage.getItem(a)||"zh-CN";if(!!L)return JSON.parse(L)["".concat(b,"-").concat(A)]},u=function(j,A,L){var b=localStorage.getItem(j),ne=localStorage.getItem(a)||"zh-CN",oe=(0,Ce.Z)({},"".concat(ne,"-").concat(A),L);b?localStorage.setItem(j,JSON.stringify(Object.assign(JSON.parse(b),oe))):localStorage.setItem(j,JSON.stringify(oe))},i=function(j){var A=j.name,L=j.columns,b=j.refreshDeps,ne=b===void 0?[]:b,oe=j.onColumnsChange,Ze=(0,Y.Z)(j,n),je=r.useState([]),De=(0,$.Z)(je,2),ye=De[0],ke=De[1],me=function(){return(L==null?void 0:L.filter(Boolean).map(function(he){var Ee=he.dataIndex,e=he.key,be=he.width,He=Ee||e,le=c(A,He);!le&&be&&u(A,He,be);var ue=le||be;return ue&&(he.width=ue),he}))||[]};return r.useEffect(function(){ke(me())},ne),(0,fe.jsx)(d,(0,g.Z)({name:A,columns:ye,setColumns:ke,size:"small",onColumnsChange:function(){oe==null||oe(),ke(me())}},Ze))}}}]);
