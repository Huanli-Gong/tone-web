(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3604],{76710:function(be){be.exports={cover:"cover___vymB3"}},97170:function(be){be.exports={cover:"cover___3TUxU"}},22054:function(be,He,t){"use strict";t.r(He),t.d(He,{default:function(){return pt}});var g=t(16832),I=t(69827),B=t(54905),ye=t(90087),Ke=t(46721),Q=t(94867),S=t(39190),d=t(22374),Se=t(526),n=t(22812),de=t(41428),q=t(97939),Fe,pe=q.ZP.div(Fe||(Fe=(0,de.Z)([`
    width:`,`px;
    height:`,`px;
    overflow-y:scrollY;
    background:#fff;
    width:100%;
    .ant-tabs {
        background: #fff;
        .ant-tabs-content-holder{
            padding-left: 20px;
            padding-right: 20px;
        }
        button{
            margin-right: 20px;
        }
    }
`])),function(b){var Z=b.width;return Z},function(b){var Z=b.height;return Z}),Be=t(67448),Ce=t(47548),we=t(20632),Pe=t(71853),Re=t(57359),ee=t(34423),$e=t(8281),ge=t(58591),Le=t(81138),c=t(96146),r=t(20418),a=t(35832),l=t(32326),i=t(40118),Ee=t(29966),Qe=t(11407),te=t(68077),x,Y,P,z=q.ZP.span(x||(x=(0,de.Z)([`
    color:#1890FF;
    cursor:pointer;
    // display:`,`;
`])),function(b){var Z=b.isDefault;return Z?"none":"inline-block"}),re=`
    tr {
        &:hover {
            td.no_tourist {
                cursor: pointer;
                color : #1890FF;
                span {
                    cursor: pointer;
                    color : #1890FF;
                }
            }
        }
    }
`,ie=(0,q.ZP)(te.Z)(Y||(Y=(0,de.Z)([`
    `,`
`])),re),ve=q.ZP.div(P||(P=(0,de.Z)([`
    `,`
`])),re),Ze=t(31784),Oe=t(44851),xe=t.n(Oe),Ie=t(69230),fe=t(33821),De=function(){var b=(0,l.Z)((0,a.Z)().mark(function Z(v){return(0,a.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,n.WY)("/api/sys/project/",{params:v}));case 1:case"end":return y.stop()}},Z)}));return function(v){return b.apply(this,arguments)}}(),me=t(97170),Me=t.n(me),e=t(52454),Te=function(Z){var v=Z.confirm,C=Z.onConfirm,y=Z.page_size,k=Z.ws_id,_=(0,d.useState)([]),W=(0,S.Z)(_,2),j=W[0],H=W[1],w=(0,d.useState)(),T=(0,S.Z)(w,2),X=T[0],G=T[1],E=(0,d.useState)(),U=(0,S.Z)(E,2),N=U[0],J=U[1],ue=(0,d.useState)(!0),ne=(0,S.Z)(ue,2),ce=ne[0],ae=ne[1],he=(0,d.useState)(!1),se=(0,S.Z)(he,2),p=se[0],u=se[1],f=fe.Z.Option,m=function(){var s=(0,l.Z)((0,a.Z)().mark(function h(L){var F,je,M;return(0,a.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(F=L&&L.replace(/\s*/g,""),!(X&&X==F)){O.next=3;break}return O.abrupt("return");case 3:return G(F),ae(!0),O.next=7,De({name:F,page_size:y||10,page_num:1,ws_id:k});case 7:je=O.sent,M=je.data,H(Array.isArray(M)?M:[]),ae(!1);case 11:case"end":return O.stop()}},h)}));return function(L){return s.apply(this,arguments)}}(),o=function(){m()};return(0,d.useEffect)(function(){m()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Me().cover,onClick:function(){p||v==null||v()}}),(0,e.jsx)(fe.Z,{allowClear:!0,notFoundContent:ce?(0,e.jsx)(Ce.Z,{size:"small"}):null,filterOption:!1,showSearch:!0,dropdownMatchSelectWidth:!0,onSearch:m,style:{width:"100%"},onChange:function(h){return J(h)},onDeselect:o,onClear:o,showArrow:!1,autoFocus:!0,value:N,onFocus:function(){u(!0)},onBlur:function(){setTimeout(function(){u(!1)},200)},children:j.map(function(s){return(0,e.jsx)(f,{value:s.id,children:s.name},s.id)})}),(0,e.jsx)(ge.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(Q.Z,{onClick:function(){v==null||v(),C(N)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(n._H,{id:"operation.search"})}),(0,e.jsx)(Q.Z,{type:"text",onClick:function(){v==null||v(),J(void 0),C(void 0),m()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(n._H,{id:"operation.reset"})})]})]})},ze=Te,oe=function(){var b=(0,l.Z)((0,a.Z)().mark(function Z(v){return(0,a.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,n.WY)("/api/get/product/version/",{params:v}));case 1:case"end":return y.stop()}},Z)}));return function(v){return b.apply(this,arguments)}}(),le=t(76710),Ve=t.n(le),Xe=function(Z){var v=Z.confirm,C=Z.onConfirm,y=Z.page_size,k=Z.ws_id,_=(0,d.useState)([]),W=(0,S.Z)(_,2),j=W[0],H=W[1],w=(0,d.useState)(),T=(0,S.Z)(w,2),X=T[0],G=T[1],E=(0,d.useState)(!0),U=(0,S.Z)(E,2),N=U[0],J=U[1],ue=(0,d.useState)(!1),ne=(0,S.Z)(ue,2),ce=ne[0],ae=ne[1],he=fe.Z.Option,se=function(){var p=(0,l.Z)((0,a.Z)().mark(function u(){var f,m,o;return(0,a.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return J(!0),h.next=3,oe({page_size:y||10,page_num:1,ws_id:k});case 3:f=h.sent,m=f.data,o=Array.isArray(m)?m:[],o=o.filter(function(L){return L}),H(o),J(!1);case 9:case"end":return h.stop()}},u)}));return function(){return p.apply(this,arguments)}}();return(0,d.useEffect)(function(){se()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Ve().cover,onClick:function(){ce||v==null||v()}}),(0,e.jsx)(fe.Z,{showSearch:!0,allowClear:!0,notFoundContent:N?(0,e.jsx)(Ce.Z,{size:"small"}):null,style:{width:"100%"},onChange:function(u){return G(u)},placeholder:(0,e.jsx)(n._H,{id:"report.select.productVersion"}),optionFilterProp:"children",showArrow:!1,autoFocus:!0,value:X,onFocus:function(){ae(!0)},onBlur:function(){setTimeout(function(){ae(!1)},200)},filterOption:function(u,f){return f.children.toLowerCase().indexOf(u.toLowerCase())>=0},children:j.map(function(p){return(0,e.jsx)(he,{value:p,children:p},p)})}),(0,e.jsx)(ge.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(Q.Z,{onClick:function(){v==null||v(),C(X)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(n._H,{id:"operation.search"})}),(0,e.jsx)(Q.Z,{type:"text",onClick:function(){v==null||v(),G(void 0),C(void 0),se()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(n._H,{id:"operation.reset"})})]})]})},Ge=Xe,Ye=t(76742),V=t(992),D=t(97207),$=t.n(D),R=t(39935),K=t(93299),ke=t(79390),A=t(6130),Ue=Ee.Z.RangePicker,_e=function(Z){var v=(0,n.YB)(),C=v.formatMessage,y=(0,n.md)(),k=Z.ws_id,_=(0,d.useState)({page_num:1,page_size:10,ws_id:k}),W=(0,S.Z)(_,2),j=W[0],H=W[1],w=(0,d.useState)(!1),T=(0,S.Z)(w,2),X=T[0],G=T[1],E=(0,d.useState)({}),U=(0,S.Z)(E,2),N=U[0],J=U[1],ue=(0,R.YM)(j),ne=function(){var p=(0,l.Z)((0,a.Z)().mark(function u(){var f;return(0,a.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return G(!0),o.next=3,(0,V.vP)(j);case 3:f=o.sent,f.code===200?J(f||{}):(0,R.EV)(f.code,f.msg),G(!1);case 6:case"end":return o.stop()}},u)}));return function(){return p.apply(this,arguments)}}();(0,d.useEffect)(function(){ne()},[j]);var ce=(0,R.YM)(N),ae=function(){var p=(0,l.Z)((0,a.Z)().mark(function u(f){var m,o,s,h;return(0,a.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return m=ue.current.page_size,F.next=3,(0,V.tp)({report_id:f});case 3:o=F.sent,s=o.code,h=o.msg,s===200?(H((0,r.Z)((0,r.Z)({},j),{},{page_num:(0,R.NG)(ue,ce),page_size:m})),c.default.success(C({id:"request.delete.success"}))):(0,R.EV)(s,h);case 7:case"end":return F.stop()}},u)}));return function(f){return p.apply(this,arguments)}}(),he=function(u,f,m){var o=f[0],s=f[1];!o&&!s&&H((0,r.Z)((0,r.Z)({},j),{},{gmt_modified:null})),o&&s&&H((0,r.Z)((0,r.Z)({},j),{},{gmt_modified:JSON.stringify({start_time:o,end_time:s})})),m==null||m()},se=[(0,r.Z)((0,r.Z)({dataIndex:"name",title:(0,e.jsx)(n._H,{id:"report.columns.name"}),width:200,ellipsis:{shwoTitle:!1},className:"no_tourist"},(0,K.QT)(j,H,"name",C({id:"report.columns.name.placeholder"}))),{},{render:function(u,f){return(0,e.jsx)(A.K,{ellipsis:{tooltip:u},children:(0,e.jsx)(xe(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[j.name||""],autoEscape:!0,textToHighlight:u||"-",onClick:function(){return window.open("/ws/".concat(k,"/test_report/").concat(f.id,"/"))}})})}}),{title:(0,e.jsx)(n._H,{id:"report.columns.project"}),ellipsis:{shwoTitle:!1},width:150,dataIndex:"project",filterDropdown:function(u){var f=u.confirm;return(0,e.jsx)(ze,{confirm:f,onConfirm:function(o){return H((0,r.Z)((0,r.Z)({},j),{},{project_id:o,page_num:1}))},page_size:9999,ws_id:k})},filterIcon:function(){return(0,e.jsx)(Ze.Z,{style:{color:j.project_id?"#1890ff":void 0}})},render:function(u){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:u||"-"})}},{dataIndex:"product_version",ellipsis:{shwoTitle:!1},width:150,title:(0,e.jsx)(n._H,{id:"report.columns.product_version"}),filterDropdown:function(u){var f=u.confirm;return(0,e.jsx)(Ge,{confirm:f,onConfirm:function(o){return H((0,r.Z)((0,r.Z)({},j),{},{product_version:o,page_num:1}))},page_size:9999,ws_id:k})},filterIcon:function(){return(0,e.jsx)(Ze.Z,{style:{color:j.product_version?"#1890ff":void 0}})},render:function(u){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:u||"-"})}},(0,r.Z)((0,r.Z)({dataIndex:"creator",width:150,title:(0,e.jsx)(n._H,{id:"report.columns.creator"})},(0,K.ln)(j,H,"creator")),{},{render:function(u){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:u||"-"})}}),{dataIndex:"description",width:200,title:(0,e.jsx)(n._H,{id:"report.columns.description"}),ellipsis:{shwoTitle:!1},render:function(u){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:u||"-"})}},{dataIndex:"gmt_modified",width:200,title:(0,e.jsx)(n._H,{id:"report.columns.gmt_modified"}),filterDropdown:function(u){var f=u.confirm;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ue,{size:"middle",showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",onChange:$().partial(he,$(),$(),f)}),(0,e.jsx)(ge.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsx)(Q.Z,{type:"text",onClick:function(){return H((0,r.Z)((0,r.Z)({},j),{},{gmt_modified:void 0}))},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(n._H,{id:"operation.reset"})})]})},filterIcon:function(){return(0,e.jsx)(Ze.Z,{style:{color:j.gmt_modified?"#1890ff":void 0}})},ellipsis:!0,render:function(u){return u||"-"}},y.WsTourist()&&{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),width:200,fixed:"right",render:function(u){var f=$().get(u,"id");return(0,e.jsx)(n.Nv,{accessible:y.WsMemberOperateSelf(u.creator_id),fallback:(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(z,{onClick:function(){return(0,R.WR)()},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(z,{onClick:function(){return(0,R.WR)()},children:(0,e.jsx)(n._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(z,{onClick:function(){return window.open("/ws/".concat(k,"/test_report/").concat(f,"/edit"))},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(Pe.Z,{title:(0,e.jsx)(n._H,{id:"report.report.delete.prompt"}),okText:(0,e.jsx)(n._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),onConfirm:$().partial(ae,f||""),children:(0,e.jsx)(z,{children:(0,e.jsx)(n._H,{id:"operation.delete"})})})]})})}}].filter(Boolean);return(0,e.jsxs)(Ce.Z,{spinning:X,children:[(0,e.jsx)(ve,{children:(0,e.jsx)(ke.sL,{size:"small",name:"ws-test-report-list",refreshDeps:[y,k,j],rowKey:"id",columns:se,pagination:!1,dataSource:N.data||[]})}),(0,e.jsx)(Ye.Z,{total:N.total,pageSize:j.page_size,currentPage:j.page_num,onPageChange:function(u,f){H((0,r.Z)((0,r.Z)({},j),{},{page_num:u,page_size:f}))}})]})},We=(0,d.memo)(_e),Je=t(20693),Ae=t(3278),qe=t(31650),et=t(25100),mt=t(65790),Ne=t(17187),ht=t(88018),at=t(58414),tt,rt,nt,st=(0,q.ZP)(at.Z)(tt||(tt=(0,de.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`]))),it=q.ZP.div(rt||(rt=(0,de.Z)([`
    width: calc(100% + 48px);
    transform: translateX(-24px);
`]))),ot=(0,q.ZP)(ge.Z)(nt||(nt=(0,de.Z)([`
    border-top: '10px solid #F5F5F5';
`]))),lt=function(){return new Array(4).fill("").reduce(function(Z,v){return Z.concat(String.fromCharCode(97+Math.ceil(Math.random()*25)))},"")},ut=(0,d.forwardRef)(function(b,Z){var v=(0,n.YB)(),C=v.formatMessage,y=Ne.Z.useForm(),k=(0,S.Z)(y,1),_=k[0],W=(0,d.useState)(!1),j=(0,S.Z)(W,2),H=j[0],w=j[1],T=(0,d.useState)(!1),X=(0,S.Z)(T,2),G=X[0],E=X[1],U=(0,d.useState)({}),N=(0,S.Z)(U,2),J=N[0],ue=N[1],ne=(0,d.useState)(""),ce=(0,S.Z)(ne,2),ae=ce[0],he=ce[1];(0,d.useImperativeHandle)(Z,function(){return{show:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o="".concat(m.name,"-copy-").concat(lt());E(!0),ue((0,r.Z)((0,r.Z)({},m),{},{name:o})),he(m.name),_.setFieldsValue((0,r.Z)((0,r.Z)({},m),{},{name:o}))}}});var se=function(){_.resetFields(),w(!1),E(!1)},p=function(m,o){if(m===200)b.onOk(),c.default.success(C({id:"request.copy.success"})),E(!1),_.resetFields();else if(m===201){var s=C({id:"report.template.already.exists"});_.setFields([{name:"name",errors:[s]}])}else c.default.error(o);w(!1)},u=function(){!_.getFieldValue("name")||(w(!0),_.validateFields().then(function(){var m=(0,l.Z)((0,a.Z)().mark(function o(s){var h,L,F;return(0,a.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,V.rj)((0,r.Z)((0,r.Z)({ws_id:b.ws_id},J),s));case 2:h=M.sent,L=h.code,F=h.msg,p(L,F);case 6:case"end":return M.stop()}},o)}));return function(o){return m.apply(this,arguments)}}()).catch(function(m){return console.log(m)}))};return(0,e.jsxs)(st,{title:(0,e.jsx)(n._H,{id:"report.template.copy"}),width:"375",onClose:se,visible:G,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(Q.Z,{onClick:se,children:(0,e.jsx)(n._H,{id:"operation.cancel"})}),(0,e.jsx)(Q.Z,{type:"primary",disabled:H,onClick:u,children:J&&J.name?(0,e.jsx)(n._H,{id:"operation.update"}):(0,e.jsx)(n._H,{id:"operation.confirm"})})]})}),children:[(0,e.jsx)("div",{className:"server_provider",children:(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)(et.Z.Text,{className:"script_right_name",strong:!0,children:(0,e.jsx)(n._H,{id:"report.original.template"})}),(0,e.jsx)(et.Z.Text,{children:ae})]})}),(0,e.jsx)(it,{children:(0,e.jsx)(ot,{})}),(0,e.jsxs)(Ne.Z,{form:_,layout:"vertical",children:[(0,e.jsx)(Ne.Z.Item,{label:(0,e.jsx)(n._H,{id:"report.new.template"}),name:"name",rules:[{required:!0,pattern:/^[\u4E00-\u9FA5A-Za-z0-9\._-]{1,64}$/g,message:C({id:"report.new.template.message"})}],children:(0,e.jsx)(Ae.Z,{autoComplete:"auto",placeholder:C({id:"report.new.template.placeholder"})})}),(0,e.jsx)(Ne.Z.Item,{label:(0,e.jsx)(n._H,{id:"report.description.input"}),name:"description",children:(0,e.jsx)(Ae.Z.TextArea,{placeholder:C({id:"report.description.placeholder"})})})]})]})}),ct=function(Z){var v=(0,n.YB)(),C=v.formatMessage,y=Z.ws_id,k=Z.tab,_=(0,n.md)(),W={name:"",creator:"",update_user:"",page_num:1,page_size:10,ws_id:y},j=(0,d.useState)(W),H=(0,S.Z)(j,2),w=H[0],T=H[1],X=(0,d.useState)({}),G=(0,S.Z)(X,2),E=G[0],U=G[1],N=(0,d.useState)(!1),J=(0,S.Z)(N,2),ue=J[0],ne=J[1],ce=(0,d.useRef)(null),ae=(0,R.YM)(w),he=function(){var o=(0,l.Z)((0,a.Z)().mark(function s(){var h,L,F;return(0,a.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return ne(!0),M.next=3,(0,V.MD)(w);case 3:h=M.sent,L=h.code,F=h.msg,L===200?(U(h),ne(!1)):(0,R.EV)(L,F);case 6:case"end":return M.stop()}},s)}));return function(){return o.apply(this,arguments)}}(),se=(0,R.YM)(E);(0,d.useEffect)(function(){he()},[w]),(0,d.useEffect)(function(){T(W)},[k]);var p=function(){var o=(0,l.Z)((0,a.Z)().mark(function s(h){var L,F,je,M;return(0,a.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return L=ae.current.page_size,O.prev=1,O.next=4,(0,V.in)({id:h});case 4:F=O.sent,je=F.code,M=F.msg,je===200?(T((0,r.Z)((0,r.Z)({},w),{},{page_num:(0,R.NG)(ae,se),page_size:L})),c.default.success(C({id:"request.delete.success"}))):(0,R.EV)(je,M),O.next=14;break;case 10:O.prev=10,O.t0=O.catch(1),console.log(O.t0),c.default.error(C({id:"request.delete.failed"}));case 14:case"end":return O.stop()}},s,null,[[1,10]])}));return function(h){return o.apply(this,arguments)}}(),u=function(s){var h;(h=ce.current)===null||h===void 0||h.show(s)},f=(0,d.useMemo)(function(){return E&&$().isArray(E.data)?E.data:[]},[E]),m=[(0,r.Z)((0,r.Z)({dataIndex:"name",title:(0,e.jsx)(n._H,{id:"report.columns.template"}),ellipsis:{shwoTitle:!1},width:200},(0,K.QT)(w,T,"name",C({id:"report.columns.template.placeholder"}))),{},{render:function(s,h){return(0,e.jsx)(A.K,{ellipsis:{tooltip:s},children:(0,e.jsx)(xe(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[w.name||""],autoEscape:!0,textToHighlight:s||"-"})})}}),(0,r.Z)((0,r.Z)({dataIndex:"creator_name",ellipsis:{shwoTitle:!1},width:180,title:(0,e.jsx)(n._H,{id:"report.columns.creator_name"})},(0,K.ln)(w,T,"creator")),{},{render:function(s){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:s||"-"})}}),(0,r.Z)((0,r.Z)({dataIndex:"update_user_name",width:180,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(n._H,{id:"report.columns.update_user_name"})},(0,K.ln)(w,T,"update_user")),{},{render:function(s){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:s||"-"})}}),{dataIndex:"description",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(n._H,{id:"report.columns.description"}),render:function(s){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{dataIndex:"gmt_created",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(n._H,{id:"report.columns.gmt_created"}),render:function(s){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{dataIndex:"gmt_modified",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(n._H,{id:"report.columns.gmt_modified.s"}),render:function(s){return(0,e.jsx)(A.K,{ellipsis:{tooltip:!0},children:s||"-"})}},{title:(0,e.jsx)(n._H,{id:"Table.columns.operation"}),fixed:"right",key:"operation",width:200,render:function(s){var h=$().get(s,"is_default");return(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,R.N1)("/ws/".concat(y,"/test_report/template/").concat(s.id,"/preview"))},children:(0,e.jsx)(n._H,{id:"operation.preview"})}),(0,e.jsx)(n.Nv,{accessible:_.WsMemberOperateSelf(s.creator),fallback:(0,e.jsxs)(ee.Z,{onClick:function(){return(0,R.WR)()},children:[!h&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(z,{children:(0,e.jsx)(n._H,{id:"operation.copy"})}),!h&&(0,e.jsx)(z,{children:(0,e.jsx)(n._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(ee.Z,{children:[!h&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,R.N1)("/ws/".concat(y,"/test_report/template/").concat(s.id))},children:(0,e.jsx)(n._H,{id:"operation.edit"})}),(0,e.jsx)(z,{onClick:$().partial(u,s),children:(0,e.jsx)(n._H,{id:"operation.copy"})}),!h&&(0,e.jsx)(Pe.Z,{title:(0,e.jsx)(n._H,{id:"report.template.delete.prompt"}),okText:(0,e.jsx)(n._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(n._H,{id:"operation.cancel"}),onConfirm:$().partial(p,$().get(s,"id")||""),children:(0,e.jsx)(z,{children:(0,e.jsx)(n._H,{id:"operation.delete"})})})]})})]})}}];return(0,e.jsxs)(Ce.Z,{spinning:ue,children:[(0,e.jsx)(ve,{children:(0,e.jsx)(ke.sL,{size:"small",rowKey:"id",columns:m,name:"ws-report-template-table",loading:ue,dataSource:f,pagination:!1})}),(0,e.jsx)(Ye.Z,{total:E.total,currentPage:w.page_num,pageSize:w.page_size,onPageChange:function(s,h){return T((0,r.Z)((0,r.Z)({},w),{},{page_num:s,page_size:h}))}}),(0,e.jsx)(ut,{ref:ce,onOk:he,ws_id:y})]})},dt=(0,d.memo)(ct),pt=function(b){var Z=b.match,v=b.location,C=Z.params.ws_id,y="menu.Workspace.TestReport.".concat(b.route.name),k=(0,n.md)();(0,Se.jk)(y);var _=(0,Se.CR)(),W=_.height,j=_.width,H=(0,d.useState)(v.query.t||"list"),w=(0,S.Z)(H,2),T=w[0],X=w[1],G=(0,d.useCallback)(function(N){X(N),n.m8.push(v.pathname+"?t=".concat(N))},[]),E=(0,d.useCallback)(function(){n.m8.push("/ws/".concat(C,"/test_report/compare"))},[]),U=(0,d.useCallback)(function(){n.m8.push("/ws/".concat(C,"/test_report/template"))},[]);return(0,e.jsx)(I.Z.Content,{children:(0,e.jsx)(pe,{width:j-40,height:W-50,children:(0,e.jsxs)(ye.Z,{defaultActiveKey:T,onTabClick:G,tabBarStyle:{height:64,background:"#FAFBFC"},tabBarExtraContent:T==="list"?k.IsWsSetting()&&(0,e.jsx)(Q.Z,{type:"primary",onClick:E,children:(0,e.jsx)(n._H,{id:"report.create.report"})}):k.IsWsSetting()&&(0,e.jsx)(Q.Z,{type:"primary",onClick:U,children:(0,e.jsx)(n._H,{id:"report.create.template"})}),children:[(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"report.test.report"}),children:(0,e.jsx)(We,{ws_id:C,tab:T,tableHeght:W-80})},"list"),k.IsWsSetting()&&(0,e.jsx)(ye.Z.TabPane,{tab:(0,e.jsx)(n._H,{id:"report.template"}),children:(0,e.jsx)(dt,{ws_id:C,tab:T,tableHeght:W-80})},"template")]})})})}},992:function(be,He,t){"use strict";t.d(He,{MD:function(){return ye},rj:function(){return Ke},in:function(){return Q},vP:function(){return S},tp:function(){return d},iE:function(){return q},PL:function(){return Fe},AX:function(){return pe},Me:function(){return Be},ow:function(){return ee},nP:function(){return ge}});var g=t(35832),I=t(32326),B=t(22812),ye=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/list/",{params:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),Ke=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/copy/",{method:"post",data:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),Q=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/detail/",{method:"delete",data:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),S=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{params:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),d=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"delete",data:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),Se=null,n=null,de=null,q=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"post",data:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),Fe=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/detail/",{params:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),pe=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/detail/",{params:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}(),Be=function(){var c=(0,I.Z)((0,g.Z)().mark(function r(a){return(0,g.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"put",data:a}));case 1:case"end":return i.stop()}},r)}));return function(a){return c.apply(this,arguments)}}();function Ce(c){return we.apply(this,arguments)}function we(){return we=_asyncToGenerator(_regeneratorRuntime().mark(function c(r){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/auth/user/",{params:r}));case 1:case"end":return l.stop()}},c)})),we.apply(this,arguments)}function Pe(c){return Re.apply(this,arguments)}function Re(){return Re=_asyncToGenerator(_regeneratorRuntime().mark(function c(r){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/job/result/compare/chart/",{data:r,method:"post"}));case 1:case"end":return l.stop()}},c)})),Re.apply(this,arguments)}function ee(c){return $e.apply(this,arguments)}function $e(){return $e=(0,I.Z)((0,g.Z)().mark(function c(r){return(0,g.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,B.WY)("/api/report/test/report/item_suite/",{data:r,method:"post"}));case 1:case"end":return l.stop()}},c)})),$e.apply(this,arguments)}function ge(c){return Le.apply(this,arguments)}function Le(){return Le=(0,I.Z)((0,g.Z)().mark(function c(r){return(0,g.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,B.WY)("/api/report/test/report/update_desc/",{data:r,method:"post"}));case 1:case"end":return l.stop()}},c)})),Le.apply(this,arguments)}},79390:function(be,He,t){"use strict";t.d(He,{sL:function(){return Qe},ny:function(){return i},Fu:function(){return Ee}});var g=t(20418),I=t(39190),B=t(488),ye=t(26388),Ke=t(11407),Q=t(68077),S=t(2605),d=t(74127),Se=t(41428),n=t(22374),de=t(48434),q=t(97939),Fe=t(99648),pe=t(52454),Be=["width","onResizeStart","onResize","onResizeStop","resize"],Ce=["columns","name","onColumnsChange"],we,Pe,Re,ee=q.ZP.div(we||(we=(0,Se.Z)([`
    position: relative;
    width: 100%;
`]))),$e=q.ZP.div.attrs(function(te){return{style:{left:te.left,height:te==null?void 0:te.height}}})(Pe||(Pe=(0,Se.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),ge=(0,q.ZP)(de.Resizable)(Re||(Re=(0,Se.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(te){var x=te.resize;return x?"col-resize":"default"}),Le=function(x){var Y=x.width,P=x.onResizeStart,z=x.onResize,re=x.onResizeStop,ie=x.resize,ve=(0,B.Z)(x,Be);return(0,pe.jsx)(ge,(0,g.Z)((0,g.Z)({width:Y||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:P,onResize:z,onResizeStop:re,resize:ie?1:0},ve),{},{children:(0,pe.jsx)("th",(0,g.Z)({},ve))}))},c=function(x){var Y=x.columns,P=Y===void 0?[]:Y,z=x.name,re=x.onColumnsChange,ie=(0,B.Z)(x,Ce),ve=n.useState(0),Ze=(0,I.Z)(ve,2),Oe=Ze[0],xe=Ze[1],Ie=n.useState(0),fe=(0,I.Z)(Ie,2),De=fe[0],me=fe[1],Me=n.useState(!1),e=(0,I.Z)(Me,2),Te=e[0],ze=e[1],oe=n.useRef(null),le=(0,Fe.Z)(oe),Ve=function(D){return function($,R){var K;if((0,d.Z)(R),!!P[D].ellipsis){var ke=$.clientX,A=ke-((K=oe.current)===null||K===void 0?void 0:K.getBoundingClientRect().x);me(A),xe(A),ze(!0)}}},Xe=function(){return function(D){var $,R=D.clientX,K=R-(($=oe.current)===null||$===void 0?void 0:$.getBoundingClientRect().x);xe(K)}},Ge=function(D){return function($,R){var K,ke=R.size,A=$.clientX,Ue=A-((K=oe.current)===null||K===void 0?void 0:K.getBoundingClientRect().x),_e=(0,S.Z)(P);if(_e[D].ellipsis){var We=ke.width+=Ue-De,Je=_e[D],Ae=Je.dataIndex,qe=Je.key;We>20&&(_e[D]=(0,g.Z)((0,g.Z)({},_e[D]),{},{width:We}),z&&Ee(z,Ae||qe,We),re==null||re())}xe(0),me(0),ze(!1)}},Ye=n.useMemo(function(){return P.reduce(function(V,D){return D.width?V+=D==null?void 0:D.width:V},0)},[P]);return(0,pe.jsxs)(ee,{ref:oe,className:"resize-table-wrapper",children:[(0,pe.jsx)(Q.Z,(0,g.Z)((0,g.Z)({},ie),{},{components:{header:{cell:Le}},scroll:(x==null?void 0:x.scroll)||{x:Ye||(le==null?void 0:le.width)},columns:P.filter(Boolean).map(function(V,D){return(0,g.Z)((0,g.Z)({},V),{},{onHeaderCell:function(R){return{resize:!!V.ellipsis,width:R.width,onResizeStart:Ve(D),onResize:Xe(),onResizeStop:Ge(D)}}})})})),Te&&(0,pe.jsx)($e,{height:le==null?void 0:le.height,left:Oe||De})]})},r=c,a=["name","columns","refreshDeps","onColumnsChange"],l="umi_locale",i=function(x,Y){var P=localStorage.getItem(x),z=localStorage.getItem(l)||"zh-CN";if(!!P)return JSON.parse(P)["".concat(z,"-").concat(Y)]},Ee=function(x,Y,P){var z=localStorage.getItem(x),re=localStorage.getItem(l)||"zh-CN",ie=(0,ye.Z)({},"".concat(re,"-").concat(Y),P);z?localStorage.setItem(x,JSON.stringify(Object.assign(JSON.parse(z),ie))):localStorage.setItem(x,JSON.stringify(ie))},Qe=function(x){var Y=x.name,P=x.columns,z=x.refreshDeps,re=z===void 0?[]:z,ie=x.onColumnsChange,ve=(0,B.Z)(x,a),Ze=n.useState([]),Oe=(0,I.Z)(Ze,2),xe=Oe[0],Ie=Oe[1],fe=function(){return(P==null?void 0:P.filter(Boolean).map(function(me){var Me=me.dataIndex,e=me.key,Te=me.width,ze=Me||e,oe=i(Y,ze);!oe&&Te&&Ee(Y,ze,Te);var le=oe||Te;return le&&(me.width=le),me}))||[]};return n.useEffect(function(){Ie(fe())},re),(0,pe.jsx)(r,(0,g.Z)({name:Y,columns:xe,setColumns:Ie,size:"small",onColumnsChange:function(){ie==null||ie(),Ie(fe())}},ve))}}}]);
