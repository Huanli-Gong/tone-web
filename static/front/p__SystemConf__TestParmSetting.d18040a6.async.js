(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5837],{42579:function(H,J,t){"use strict";t.d(J,{Z:function(){return ne}});var U=t(28991),W=t(67294),$={icon:function(L,G){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:L}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z",fill:G}},{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:L}}]}},name:"plus-circle",theme:"twotone"},M=$,ce=t(27029),Q=function(L,G){return W.createElement(ce.Z,(0,U.Z)((0,U.Z)({},L),{},{ref:G,icon:M}))},q=W.forwardRef(Q),ne=q},72726:function(H){H.exports={ellipsis:"ellipsis___2ZImK"}},12540:function(H){H.exports={part_title:"part_title___2o2oM",line:"line___2hjGI"}},29989:function(H){H.exports={test_parm:"test_parm___HRe5n",config_lable:"config_lable___3XLR1",config_lable_push:"config_lable_push___2giuz",del_icon:"del_icon___30JHH",add_space:"add_space___1IT_B",add_pushconfig:"add_pushconfig___2G_0W",push_config_row:"push_config_row___3SS5S",push_config_box:"push_config_box___3E4PJ",push_check_row:"push_check_row___gMqWM",button:"button___2YGss",sync_info:"sync_info___20iwE",question_tip_layout:"question_tip_layout___ONP1G",question_icon:"question_icon___ISexc",question_tip_wrapper:"question_tip_wrapper___1yfJD",w_384:"w_384___3azkB",question_tip_container:"question_tip_container___R8sXr",push_job_modal:"push_job_modal___26Rmv",modal_Title:"modal_Title___2BiKa",option_label_item:"option_label_item___RsbXx",option_label_item_success:"option_label_item_success___3xGGm",success_icon:"success_icon___3fzcl"}},88843:function(H){H.exports={compare_job:"compare_job___3bD8C",title:"title___fU75R",content:"content___fD2Mn",nogroup_content:"nogroup_content___1lRs0",group_box:"group_box___ohHG2",group_content:"group_content___B4Aqq",compare_title:"compare_title___1mL_U",title_text:"title_text___1xccI",create_group:"create_group___2li-H",popover:"popover___2MjY4",nogroup_info:"nogroup_info___3kXOZ",first_part:"first_part___1QwZk",group_type:"group_type___SKwoZ",cancle_group:"cancle_group___38Xwx",rightExpandButtom:"rightExpandButtom___2Akb0",group_info:"group_info___2-DfG",line:"line___2BHWZ",workspace_name:"workspace_name___18spx",workspace_name_en:"workspace_name_en___3kpLu",baseGroupColorFn:"baseGroupColorFn___1RhBy",baselineColorFn:"baselineColorFn___2mVC-",current:"current___1RrBA",icon:"icon___2u2fe",base_workspace_name:"base_workspace_name___3dTrN",opreate_button:"opreate_button___2hxuY",baseTag:"baseTag___2OLNv",blink:"blink___zmN1S",second_part:"second_part___L6lxW",create_job_type:"create_job_type___1Uj1t",footer_part:"footer_part___g710Y",bottom:"bottom___29-Uz",popover_group:"popover_group___10k1j",popover_mark:"popover_mark___7LgCY",popover_create:"popover_create___3wNKi",master_prover:"master_prover___QOpDL",addJobBtn:"addJobBtn___29Lxo",eidt_marked:"eidt_marked___3dU2f",list_container:"list_container___1USu2",select_product:"select_product___bYxsb",job_text:"job_text___RZHzC",job_test:"job_test___2jx_p",footer:"footer___2OO2k",text_cancle:"text_cancle___34wHS",text_num:"text_num___3midy",footer_line:"footer_line___3luii",baseline_group_modal:"baseline_group_modal___32ciF",bottom_button:"bottom_button___gSnZ5",job_Modal:"job_Modal___qvF1C",suit_detail:"suit_detail___R4Sh8",tab_title:"tab_title___2qXLL",Panel:"Panel___Dv6t6",conf_item_box:"conf_item_box___3BROC",ellipsis:"ellipsis___1yBlF",add_baseline_drawer:"add_baseline_drawer___1cq-K",pers_select:"pers_select___3n1ZU",steps:"steps___3aKRN",steps_en:"steps_en___S_YTZ",popover_job:"popover_job___fyg3-",scroll:"scroll___39SXB",ConfColum:"ConfColum___fIZho",groupOptionIconStyle:"groupOptionIconStyle___2l2p0"}},40166:function(H,J,t){"use strict";var U=t(22385),W=t(89456),$=t(2824),M=t(67294),ce=t(72726),Q=t.n(ce),q=t(85893),ne=function(L){var G=L.title,ue=L.width,Ee=ue===void 0?"100%":ue,k=L.children,Se=L.refData,C=L.customStyle,_e=C||{width:Ee},z=(0,M.useRef)(null),Pe=(0,M.useState)(!1),de=(0,$.Z)(Pe,2),we=de[0],fe=de[1],Te=function(){var K=z.current.clientWidth,Ne=z.current.scrollWidth;fe(K<Ne)};(0,M.useEffect)(function(){Te()},[Se]);var ae=function(){return k?M.cloneElement(k):G||"-"};return we?(0,q.jsx)(W.Z,{placement:"topLeft",title:G,children:(0,q.jsx)("div",{ref:z,className:Q().ellipsis,style:_e,children:ae()})}):(0,q.jsx)("div",{ref:z,className:Q().ellipsis,style:_e,children:ae()})};J.Z=ne},54969:function(H,J,t){"use strict";var U=t(12540),W=t.n(U),$=t(85893);J.Z=function(M){return(0,$.jsxs)("div",{className:W().part_title,children:[M.text,M.children,(0,$.jsx)("div",{className:W().line})]})}},44027:function(H,J,t){"use strict";t.r(J),t.d(J,{default:function(){return Ut}});var U=t(24793),W=t(97183),$=t(20228),M=t(11382),ce=t(57663),Q=t(71577),q=t(49111),ne=t(19650),ge=t(48736),L=t(27049),G=t(14965),ue=t(36577),Ee=t(13062),k=t(71230),Se=t(89032),C=t(15746),_e=t(88983),z=t(47933),Pe=t(17462),de=t(76772),we=t(71194),fe=t(50146),Te=t(47673),ae=t(4107),Fe=t(43358),K=t(34041),Ne=t(34792),ye=t(48086),re=t(32059),v=t(39428),b=t(3182),mt=t(9715),I=t(20526),Ke=t(20136),je=t(55241),O=t(57106),g=t(99683),f=t(11849),_=t(2824),P=t(402),R=t(97272),y=t(67294),se=t(1870),pe=t(42579),ee,Ze=["svgRef","title"];function te(){return te=Object.assign?Object.assign.bind():function(p){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var j in c)Object.prototype.hasOwnProperty.call(c,j)&&(p[j]=c[j])}return p},te.apply(this,arguments)}function Ce(p,u){if(p==null)return{};var c=Oe(p,u),j,i;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(i=0;i<A.length;i++)j=A[i],!(u.indexOf(j)>=0)&&(!Object.prototype.propertyIsEnumerable.call(p,j)||(c[j]=p[j]))}return c}function Oe(p,u){if(p==null)return{};var c={},j=Object.keys(p),i,A;for(A=0;A<j.length;A++)i=j[A],!(u.indexOf(i)>=0)&&(c[i]=p[i]);return c}var Ge=function(u){var c=u.svgRef,j=u.title,i=Ce(u,Ze);return y.createElement("svg",te({width:"20px",height:"20px",viewBox:"0 0 20 20",ref:c},i),j?y.createElement("title",null,j):null,ee||(ee=y.createElement("g",{id:"\\u4F7F\\u7528\\u5E2E\\u52A9",stroke:"none",strokeWidth:1,fillRule:"evenodd"},y.createElement("g",{id:"\\u6309\\u4E0B\\u62D6\\u52A8\\u8C03\\u6392\\u5E8F",transform:"translate(-329.000000, -243.000000)",fillRule:"nonzero"},y.createElement("g",{id:"\\u4F7F\\u7528\\u5E2E\\u52A9",transform:"translate(21.000000, 105.000000)"},y.createElement("g",{id:"\\u5185\\u5BB9\\u533A",transform:"translate(0.000000, 57.000000)"},y.createElement("g",{id:"\\u4E8C\\u7EA7\\u83DC\\u5355-\\u9009\\u4E2D",transform:"translate(0.000000, 73.000000)"},y.createElement("g",{id:"ellipsis",transform:"translate(318.000000, 18.000000) rotate(-270.000000) translate(-318.000000, -18.000000) translate(308.000000, 8.000000)"},y.createElement("rect",{id:"\\u77E9\\u5F62",opacity:0,x:0,y:0,width:19.2,height:19.2}),y.createElement("path",{d:"M3.3,9.58125 C3.3,9.95637887 3.50012886,10.3030123 3.82499999,10.4905767 C4.14987113,10.6781411 4.55012887,10.6781411 4.87500001,10.4905767 C5.19987114,10.3030123 5.4,9.95637887 5.4,9.58125 C5.4,9.20612113 5.19987114,8.85948775 4.87500001,8.67192331 C4.55012887,8.48435887 4.14987113,8.48435887 3.82499999,8.67192331 C3.50012886,8.85948775 3.3,9.20612113 3.3,9.58125 L3.3,9.58125 Z M8.55,9.58125 C8.55,10.161149 9.02010101,10.63125 9.6,10.63125 C10.179899,10.63125 10.65,10.161149 10.65,9.58125 C10.65,9.00135101 10.179899,8.53125 9.6,8.53125 C9.02010101,8.53125 8.55,9.00135101 8.55,9.58125 Z M13.8,9.58125 C13.8,10.161149 14.270101,10.63125 14.85,10.63125 C15.429899,10.63125 15.9,10.161149 15.9,9.58125 C15.9,9.00135101 15.429899,8.53125 14.85,8.53125 C14.270101,8.53125 13.8,9.00135101 13.8,9.58125 Z",id:"\\u5F62\\u72B6",opacity:.449999988})))))))))},X=y.forwardRef(function(p,u){return y.createElement(Ge,te({svgRef:u},p))}),Xe=t.p+"static/ellipsis.29f977a1.svg",Qe=t(40166),me=t(54969),le=t(29989),E=t.n(le),Ie=t(96486),h=t.n(Ie),qe=t(94184),et=t.n(qe),Z=t(16917),De=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(){return(0,v.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,Z.WY)("/api/sys/test_farm/"));case 1:case"end":return j.stop()}},u)}));return function(){return p.apply(this,arguments)}}(),tt=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/test_farm/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),D=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/push_config/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),nt=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/push_config/",{method:"put",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),at=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/push_config/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),rt=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/workspace/list/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),Me=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/project/list/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),Le=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/portal_test/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),st=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/push_job/",{params:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),lt=function(){var p=(0,b.Z)((0,v.Z)().mark(function u(c){return(0,v.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.WY)("/api/sys/push_job/",{method:"post",data:c}));case 1:case"end":return i.stop()}},u)}));return function(c){return p.apply(this,arguments)}}(),oe=t(30381),Y=t.n(oe),ie=t(88843),ot=t.n(ie),e=t(85893),Wt=function(p){var u=(0,y.useState)(!1),c=(0,_.Z)(u,2),j=c[0],i=c[1],A=p.current,x=p.currentIndex,xe=p.contentMark,Ve=p.handleEllipsis,$e=p.currentEditGroupIndex,be=p.iconStyles,it=be===void 0?{}:be,He=p.typeName,Re=function(){i(!1)};(0,y.useEffect)(function(){return window.addEventListener("click",Re,!1),function(){window.removeEventListener("click",Re,!1)}},[]);var ct=function(Be){Be.stopPropagation(),i(!0),Ve(A,x)};return(0,e.jsx)(je.Z,{trigger:"click",placement:"bottom",content:xe,overlayClassName:"".concat(ot().popover_mark," ").concat(ot()[He]),open:j&&$e===x,children:(0,e.jsx)(X,{className:ot().icon,onClick:ct,style:it})})},ve=t(24480),vt=R.Z.Text,kt=function(u){var c=(0,y.useState)(!1),j=(0,_.Z)(c,2),i=j[0],A=j[1],x=u.style||{};return(0,e.jsx)("div",{className:E().question_tip_container,children:(0,e.jsxs)("span",{className:E().question_tip_layout,onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},children:[(0,e.jsx)(se.Z,{className:E().question_icon}),(0,e.jsx)("div",{style:(0,f.Z)({display:i?"block":"none"},x),className:et()(E().question_tip_wrapper,E().w_384),children:(0,e.jsx)("p",{children:u.tip})})]})})},Yt=function(){var u=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.ZP,{status:"success",className:E().success_icon}),(0,e.jsx)("span",{className:E().icon_des,children:(0,e.jsx)(Z._H,{id:"testfarm.job.has.been.pushed"})})]})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:E().modal_Title,children:(0,e.jsx)(Z._H,{id:"testfarm.manual.push"})}),(0,e.jsx)(je.Z,{content:u,children:(0,e.jsx)(se.Z,{className:E().question_icon})})]})},Ae=null;function Jt(p,u){Ae&&clearTimeout(Ae),Ae=setTimeout(function(){p(1,u),Ae=null},200)}var Ut=function(p){var u=(0,Z.YB)(),c=u.formatMessage,j=(0,Z.Kd)()==="en-US",i=I.Z.useForm(),A=(0,_.Z)(i,1),x=A[0],xe=(0,y.useState)({}),Ve=(0,_.Z)(xe,2),$e=Ve[0],be=Ve[1],it=(0,y.useState)([]),He=(0,_.Z)(it,2),Re=He[0],ct=He[1],ut=(0,y.useState)({}),Be=(0,_.Z)(ut,2),T=Be[0],dt=Be[1],zt=(0,y.useState)(!0),ht=(0,_.Z)(zt,2),Kt=ht[0],We=ht[1],Gt=(0,y.useState)(0),gt=(0,_.Z)(Gt,2),_t=gt[0],yt=gt[1],Xt=(0,y.useState)(!1),jt=(0,_.Z)(Xt,2),Qt=jt[0],Zt=jt[1],qt=(0,y.useState)([]),Ct=(0,_.Z)(qt,2),xt=Ct[0],ke=Ct[1],en=(0,y.useState)(1),bt=(0,_.Z)(en,2),Et=bt[0],St=bt[1],tn=(0,y.useState)(""),Pt=(0,_.Z)(tn,2),wt=Pt[0],Tt=Pt[1],nn=(0,y.useState)(!1),Ft=(0,_.Z)(nn,2),an=Ft[0],Nt=Ft[1],rn=(0,y.useState)(!1),Ot=(0,_.Z)(rn,2),sn=Ot[0],It=Ot[1],ln=(0,y.useState)(!0),Dt=(0,_.Z)(ln,2),on=Dt[0],Mt=Dt[1],Ye=(0,y.useRef)(null),Lt=function(a){switch(a){case"url":return c({id:"testfarm.url.placeholder"});case"token":return c({id:"please.enter"});case"job":return c({id:"testfarm.job.name.rules.placeholder"});case"project":return c({id:"testfarm.project.placeholder"});default:return c({id:"please.enter"})}},cn=function(a){switch(a){case"job":return(0,e.jsx)(Z._H,{id:"testfarm.job.name.rules"});case"token":return"Token";case"url":return(0,e.jsx)(Z._H,{id:"testfarm.testfarm.url"});case"systemName":return(0,e.jsx)(Z._H,{id:"testfarm.systemName"});default:return""}},un=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(){var n,s;return(0,v.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,De();case 2:return n=l.sent,s=n.data,l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),ft=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(){var n,s,r,l;return(0,v.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,De();case 2:if(n=d.sent,s=n.data,r=n.code,l=n.msg,r===200){d.next=8;break}return d.abrupt("return",(0,ve.EV)(r,l));case 8:dt(s);case 9:case"end":return d.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),dn=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(){var n,s;return(0,v.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,rt({page_num:1,page_size:200});case 2:return n=l.sent,s=n.data,l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),At=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n){var s,r,l,m,d,F,V,S,w;return(0,v.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(s=n.ws_id,r=n.project_id,l=n.job_name_rule,m=n.index,d=n.sync_start_time,!s){N.next=8;break}return N.next=4,Me({ws_id:s});case 4:F=N.sent,V=F.data,S=F.code,S===200&&be(function(B){return(0,f.Z)((0,f.Z)({},B),{},(0,re.Z)({},s,V))});case 8:w=h().cloneDeep(x.getFieldsValue()),w&&w.pushconfig&&(w.pushconfig[m]={workspace:s,project:Number(r)||void 0,job:l,startTime:d&&Y()(d)}),x.setFieldsValue(w);case 11:case"end":return N.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),Je=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n){var s,r,l;return(0,v.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,tt(n);case 2:s=d.sent,r=s.code,l=s.data,r===200&&dt(l);case 6:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),fn=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n){var s,r,l;return(0,v.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,nt(n);case 2:s=d.sent,r=s.code,l=s.msg,r===200&&ft(),r!==200&&(0,ve.EV)(r,l);case 7:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}();(0,y.useEffect)(function(){Promise.all([un(),dn()]).then(function(o){var a=h().cloneDeep(x.getFieldsValue());a.siteconfig=[{primarySite:o[0].is_major?1:0,url:o[0].site_url||"",token:o[0].site_token||"",systemName:o[0].business_system_name||""}],x.setFieldsValue(a),dt(o[0]),ct(o[1]),We(!1)}).catch(function(o){We(!1),ye.default.error(c({id:"request.failed"})),console.log(o)})},[]),(0,y.useEffect)(function(){if(h().isArray(T.push_config_list))T.push_config_list.forEach(function(a,n){a&&At({ws_id:a.ws_id,project_id:a.project_id,job_name_rule:a.job_name_rule,index:n,sync_start_time:a.sync_start_time})});else{var o=h().cloneDeep(x.getFieldsValue());o.pushconfig=[{workspace:void 0,project:void 0,job:"",startTime:void 0}],x.setFieldsValue(o),be({})}},[T]);var Ue=function(a,n){var s={},r=h().get(a,"pushconfig[".concat(n,"]"));if(r){var l="";h().isArray(r.project)?r.project.forEach(function(d,F){F===0&&(l=d),F>0&&(l="".concat(l,",").concat(d))}):l=r.project,s={ws_id:r.workspace,project_id:l||"",job_name_rule:r.job,sync_start_time:r.startTime&&Y()(r.startTime).format("YYYY-MM-DD HH:mm:ss")}}var m=h().get(T,"push_config_list[".concat(n,"].id"));fn((0,f.Z)((0,f.Z)({},s),{},{push_config_id:m}))},pn=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n){var s,r,l;return(0,v.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,at(n);case 2:s=d.sent,r=s.code,l=s.msg,r===200&&ft(),r!==200&&(0,ve.EV)(r,l);case 7:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),mn=function(a){var n=h().cloneDeep(x.getFieldsValue());n.siteconfig=[(0,f.Z)((0,f.Z)({},n.siteconfig[0]),{},{primarySite:a.target.value})],x.setFieldsValue(n),Je({is_major:!!a.target.value,site_id:T.id})},Vt=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n,s,r,l){var m,d,F,V,S,w;return(0,v.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:m=h().cloneDeep(x.getFieldsValue()),l==="workspace"?(At({job_name_rule:(d=m.pushconfig[r])===null||d===void 0?void 0:d.job,ws_id:n,project_id:"",index:r,sync_start_time:(F=m.pushconfig[r])===null||F===void 0?void 0:F.startTime}),m.pushconfig[r]=(0,f.Z)((0,f.Z)({},m.pushconfig[r]),{},(V={},(0,re.Z)(V,l,n||""),(0,re.Z)(V,"project",void 0),V)),Ue(m,r)):(S="",h().isArray(n)?n.forEach(function(B,Bt){Bt===0&&(S=B),Bt>0&&(S="".concat(S,",").concat(B))}):S=n,w=h().cloneDeep(m),m.pushconfig[r]=(0,f.Z)((0,f.Z)({},m.pushconfig[r]),{},(0,re.Z)({},l,n||void 0)),w.pushconfig[r]=(0,f.Z)((0,f.Z)({},m.pushconfig[r]),{},(0,re.Z)({},l,S||"")),x.setFieldsValue(m),Ue(w,r));case 2:case"end":return N.stop()}},a)}));return function(n,s,r,l){return o.apply(this,arguments)}}(),vn=function(a){var n=a.map(function(s){return s.disabled=!1,s});return n},hn=function(a,n,s){var r=[];if(h().isArray(x.getFieldsValue().pushconfig)&&x.getFieldsValue().pushconfig[n]){var l=x.getFieldsValue().pushconfig[n].workspace;r=h().isArray($e[l])?$e[l]:[]}return(0,e.jsx)(I.Z.Item,{name:[a.name,s],children:(0,e.jsx)(K.Z,{showSearch:!0,allowClear:!0,onChange:h().partial(Vt,h(),h(),n,s),placeholder:Lt(s),filterOption:function(d,F){return F.children.toLowerCase().indexOf(d.toLowerCase())>=0},optionFilterProp:"children",children:r.map(function(m){return(0,e.jsx)(K.Z.Option,{value:m.id,children:m.name},m.id)})})})},$t=function(a,n,s){var r=h().cloneDeep(x.getFieldsValue());n==="url"&&(r.siteconfig=[(0,f.Z)((0,f.Z)({},r.siteconfig[0]),{},{url:a.target.value})],x.setFieldsValue(r),Je({site_url:a.target.value,site_id:T.id})),n==="token"&&(r.siteconfig=[(0,f.Z)((0,f.Z)({},r.siteconfig[0]),{},{token:a.target.value})],x.setFieldsValue(r),Je({site_token:a.target.value,site_id:T.id})),n==="systemName"&&(r.siteconfig=[(0,f.Z)((0,f.Z)({},r.siteconfig[0]),{},{systemName:a.target.value})],x.setFieldsValue(r),Je({business_system_name:a.target.value,site_id:T.id})),n==="job"&&(r.pushconfig[s]=(0,f.Z)((0,f.Z)({},r.pushconfig[s]),{},{job:a.target.value}),x.setFieldsValue(r),Ue(r,s))},gn=function(a,n,s){a.target.value||$t(a,n,s)},ze=function(a,n,s){return(0,e.jsx)(I.Z.Item,{name:[a.name,s],label:cn(s),required:s==="job",children:(0,e.jsx)(ae.Z,{allowClear:!0,onChange:h().partial(gn,h(),s,n),placeholder:Lt(s),onBlur:h().partial($t,h(),s,n)})})},_n=function(a,n,s){var r=h().cloneDeep(x.getFieldsValue());r.pushconfig[s]=(0,f.Z)((0,f.Z)({},r.pushconfig[s]),{},{startTime:a}),x.setFieldsValue(r),Ue(r,s)},Ht=function(){Tt(""),St(1),Nt(!1),yt(0),ke([]),Zt(!1),fe.Z.destroyAll()},yn=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(){var n,s,r;return(0,v.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return It(!0),m.next=3,lt({job_id:wt});case 3:n=m.sent,s=n.code,r=n.msg,It(!1),s===200&&(ye.default.success(r||c({id:"push.success"})),Ht()),s!==200&&(0,ve.EV)(s,r);case 9:case"end":return m.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),pt=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(){var n,s,r,l,m,d,F,V,S,w=arguments;return(0,v.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(n=w.length>0&&w[0]!==void 0?w[0]:1,s=w.length>1&&w[1]!==void 0?w[1]:void 0,!(T&&h().isArray(T.push_config_list))){N.next=14;break}return r=h().get(T.push_config_list[_t],"id"),Mt(!0),N.next=7,st({push_config_id:r,page_num:n,filter_job:s});case 7:l=N.sent,m=l.code,d=l.data,F=l.msg,V=l.page_num,Mt(!1),m===200?(S=h().isArray(d)?d:[],S=S.map(function(B){return(0,f.Z)((0,f.Z)({},B),{},{name:"#".concat(B.id,"  ").concat(B.name)})}),n===1&&ke(S),n!==1&&ke(function(B){return h().unionBy(B,S,"id")}),St(V+1),S.length||Nt(!0)):(ke([]),(0,ve.EV)(m,F));case 14:case"end":return N.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),jn=function(a){var n=x.getFieldsValue(),s=n&&n.pushconfig,r=!0;return h().isArray(s)&&s.length&&(r=!h().get(s[a],"workspace")),r},Zn=function(a){var n=h().get(T,"push_config_list[".concat(a,"].job_info"));return n},Cn=function(){pt(),Zt(!0)},xn=function(a,n){yt(n)},bn=function(a){var n=a.target,s=n.clientHeight,r=n.scrollHeight,l=n.scrollTop;s+l+1>=r&&!h().isNaN(Et)&&!an&&pt(Et,Ye.current)},En=function(a){Tt(h().get(a,"value")||"")},Rt=function(a){var n=a&&a.replace(/\s*/g,"");Ye&&Ye.current===n||(Ye.current=n,Jt(pt,n))},Sn=function(){Rt()},Pn=function(){var o=(0,b.Z)((0,v.Z)().mark(function a(n){var s,r,l;return(0,v.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,D({site_id:T==null?void 0:T.id});case 2:s=d.sent,r=s.code,r===200&&(ft(),l=h().cloneDeep(x.getFieldsValue()),l.pushconfig.push({workspace:"",project:void 0,job:""}),n());case 5:case"end":return d.stop()}},a)}));return function(n){return o.apply(this,arguments)}}();return(0,e.jsx)(W.Z.Content,{children:(0,e.jsx)(M.Z,{spinning:Kt,children:(0,e.jsxs)("div",{className:E().test_parm,children:[(0,e.jsxs)(I.Z,{form:x,initialValues:{siteconfig:[{primarySite:"",url:"",token:"",systemName:""}],pushconfig:[{workspace:"",project:"",job:""}]},labelCol:{span:4},wrapperCol:{span:j?20:14},colon:!1,requiredMark:!0,children:[(0,e.jsxs)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:E().site_config_row,children:[(0,e.jsx)(me.Z,{text:(0,e.jsx)(Z._H,{id:"testfarm.site.selection"})}),(0,e.jsx)(de.Z,{message:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Z._H,{id:"testfarm.last.synchronization.time"}),"\uFF1A",T.last_sync_time||"-"]}),type:"success",showIcon:!0,style:{marginBottom:16,width:"100%"}}),(0,e.jsx)(I.Z.Item,{label:"",children:(0,e.jsx)(I.Z.List,{name:"siteconfig",children:function(a){return a.map(function(n,s){return(0,e.jsxs)(k.Z,{gutter:10,style:{marginBottom:8},children:[(0,e.jsx)(C.Z,{span:24,style:{display:"flex"},children:(0,e.jsx)(I.Z.Item,{name:[n.name,"primarySite"],label:(0,e.jsx)(Z._H,{id:"testfarm.is_main_site"}),children:(0,e.jsxs)(z.ZP.Group,{onChange:mn,children:[(0,e.jsx)(z.ZP,{value:1,children:(0,e.jsx)(Z._H,{id:"operation.yes"})}),(0,e.jsx)(z.ZP,{value:0,children:(0,e.jsx)(Z._H,{id:"operation.no"})})]})})}),(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[ze(n,s,"url"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(X,{})})]}),(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[ze(n,s,"token"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(X,{})})]}),(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[ze(n,s,"systemName"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(X,{})})]})]},n.key)})}})})]}),(0,e.jsxs)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:E().push_config_row,children:[(0,e.jsx)(me.Z,{text:c({id:"testfarm.push.configuration"}),children:(0,e.jsx)(kt,{tip:c({id:"testfarm.specify.project"}),style:{lineHeight:"20px",textAlign:"left",width:"250px"}})}),(0,e.jsx)(I.Z.Item,{label:"",labelAlign:"left",children:(0,e.jsx)(I.Z.List,{name:"pushconfig",children:function(a,n){var s=n.add,r=n.remove;return a.map(function(l,m){var d,F=jn(m),V=Zn(m);return(0,e.jsxs)("div",{className:E().push_config_box,children:[(T==null||(d=T.push_config_list)===null||d===void 0?void 0:d.length)>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[(0,e.jsx)(I.Z.Item,{name:[l.name,"workspace"],label:"Workspace",labelAlign:"left",required:!0,children:(0,e.jsx)(K.Z,{showSearch:!0,onChange:h().partial(Vt,h(),h(),m,"workspace"),placeholder:(0,e.jsx)(Z._H,{id:"please.select.workspace"}),allowClear:!0,filterOption:function(w,he){return he.children.toLowerCase().indexOf(w.toLowerCase())>=0},optionFilterProp:"children",children:vn(h().cloneDeep(Re)).map(function(S){return(0,e.jsx)(K.Z.Option,{value:S.id,disabled:S.disabled,children:S.show_name},S.id)})})}),(0,e.jsx)(Wt,{iconStyles:{transform:"translateY(6px)",cursor:"pointer",marginLeft:2},currentIndex:m,contentMark:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{onClick:F?function(){return null}:h().partial(Cn),style:{cursor:F?"default":"pointer",color:F?"rgba(0,0,0,0.35)":"rgba(0,0,0,0.85)"},children:(0,e.jsx)(Z._H,{id:"testfarm.manual.push"})}),m>0&&(0,e.jsx)("p",{style:{color:"#FF4D4F"},onClick:function(){var w=h().cloneDeep(x.getFieldsValue());w.pushconfig=w.pushconfig.filter(function(N,B){return B!==m});var he=h().get(T,"push_config_list[".concat(m,"].id"));pn({push_config_id:he}),r(l.name)},children:(0,e.jsx)(Z._H,{id:"operation.remove"})})]}),handleEllipsis:xn,typeName:j?"master_prover_en":"master_prover",currentEditGroupIndex:_t})]}),(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[(0,e.jsx)(I.Z.Item,{name:[l.name,"project"],label:"Project",required:!0,children:hn(l,m,"project")}),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(X,{})})]}),(0,e.jsxs)(C.Z,{span:24,style:{display:"flex"},children:[ze(l,m,"job"),(0,e.jsx)("span",{style:{opacity:0},children:(0,e.jsx)(X,{})})]}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsx)(I.Z.Item,{name:[l.name,"startTime"],label:(0,e.jsx)(Z._H,{id:"testfarm.synchronization.start_time"}),children:(0,e.jsx)(ue.Z,{allowClear:!1,onChange:h().partial(_n,h(),h(),m),showTime:!0,placeholder:j?"Start Time":void 0})})}),(0,e.jsx)(C.Z,{span:24,style:{display:"flex"},children:V&&(0,e.jsxs)(vt,{className:E().sync_info,children:[(0,e.jsx)(Z._H,{id:"testfarm.job.information"}),"\uFF1A#".concat(V.job_id,"  ").concat(V.job_name)]})})]}),m<a.length-1&&(0,e.jsx)(L.Z,{dashed:!0,style:{margin:"22px 0 22px 0"}}),m===a.length-1&&(0,e.jsxs)(ne.Z,{className:E().add_space,onClick:h().partial(Pn,s),children:[(0,e.jsx)(pe.Z,{}),(0,e.jsx)(vt,{className:E().add_pushconfig,children:(0,e.jsx)(Z._H,{id:"testfarm.push.configuration.add"})})]})]},l.key)})}})})]}),(0,e.jsx)(k.Z,{gutter:20,style:{paddingLeft:24,paddingRight:24,backgroundColor:"#fff",margin:"0 0 10px"},className:E().push_check_row,children:(0,e.jsxs)(C.Z,{span:24,children:[(0,e.jsx)(me.Z,{text:(0,e.jsx)(Z._H,{id:"testfarm.push.validation"})}),(0,e.jsx)(I.Z.Item,{children:(0,e.jsxs)("div",{className:E().button,children:[(0,e.jsx)(Q.Z,{type:"primary",onClick:(0,b.Z)((0,v.Z)().mark(function o(){var a,n,s;return(0,v.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return We(!0),l.next=3,Le();case 3:a=l.sent,n=a.code,s=a.msg,n===200?ye.default.success(c({id:"testfarm.data.link.is.normal"})):(0,ve.EV)(n,s||c({id:"testfarm.data.link.is.abnormal"})),We(!1);case 8:case"end":return l.stop()}},o)})),children:(0,e.jsx)(Z._H,{id:"testfarm.Test"})}),(0,e.jsx)("p",{children:(0,e.jsx)(Z._H,{id:"testfarm.confirm.whether.the.process.is.feasible"})})]})})]})})]}),(0,e.jsx)(fe.Z,{title:Yt(),open:Qt,maskClosable:!1,width:480,className:E().push_job_modal,destroyOnClose:!0,onCancel:Ht,onOk:yn,confirmLoading:sn,centered:!0,okButtonProps:{disabled:!wt},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{marginBottom:8},children:(0,e.jsx)(Z._H,{id:"testfarm.job"})}),(0,e.jsx)(K.Z,(0,f.Z)((0,f.Z)({allowClear:!0,style:{width:"100%"},placeholder:(0,e.jsx)(Z._H,{id:"testfarm.please.select.job"}),showSearchnotFoundContent:on?(0,e.jsx)(M.Z,{size:"small"}):null,onChange:En,labelInValue:!0,filterOption:!1,showSearch:!0,onSearch:Rt,onPopupScroll:bn,onClear:Sn,showArrow:!1,autoFocus:!0,optionLabelProp:"label"},p),{},{children:xt.map(function(o){return(0,e.jsx)(K.Z.Option,{value:o.id,label:o.name,children:(0,e.jsxs)("div",{className:E().option_label_item,children:[(0,e.jsx)(Qe.Z,{customStyle:{width:"calc(100% - 32px)"},title:o.name,refData:xt,children:(0,e.jsx)("span",{"aria-label":o.name,children:o.name})}),o.sync_time&&(0,e.jsx)("span",{role:"img","aria-label":o.name,className:E().option_label_item_success,children:(0,e.jsx)(g.ZP,{status:"success"})})]})},o.id)})}))]})})]})})})}},76772:function(H,J,t){"use strict";t.d(J,{Z:function(){return je}});var U=t(22122),W=t(28481),$=t(96156),M=t(38819),ce=t(15873),Q=t(43061),q=t(73218),ne=t(54549),ge=t(68855),L=t(57119),G=t(40847),ue=t(68628),Ee=t(94184),k=t.n(Ee),Se=t(4733),C=t(67294),_e=t(53124),z=t(5467),Pe=t(96159),de=t(6610),we=t(5991),fe=t(46070),Te=t(51814),ae=t(77608),Fe=t(10379);function K(O,g,f){return g=(0,ae.Z)(g),(0,fe.Z)(O,(0,Te.Z)()?Reflect.construct(g,f||[],(0,ae.Z)(O).constructor):g.apply(O,f))}var Ne=function(O){(0,Fe.Z)(g,O);function g(){var f;return(0,de.Z)(this,g),f=K(this,g,arguments),f.state={error:void 0,info:{componentStack:""}},f}return(0,we.Z)(g,[{key:"componentDidCatch",value:function(_,P){this.setState({error:_,info:P})}},{key:"render",value:function(){var _=this.props,P=_.message,R=_.description,y=_.children,se=this.state,pe=se.error,ee=se.info,Ze=ee&&ee.componentStack?ee.componentStack:null,te=typeof P=="undefined"?(pe||"").toString():P,Ce=typeof R=="undefined"?Ze:R;return pe?C.createElement(je,{type:"error",message:te,description:C.createElement("pre",null,Ce)}):y}}]),g}(C.Component),ye=Ne,re=function(O,g){var f={};for(var _ in O)Object.prototype.hasOwnProperty.call(O,_)&&g.indexOf(_)<0&&(f[_]=O[_]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,_=Object.getOwnPropertySymbols(O);P<_.length;P++)g.indexOf(_[P])<0&&Object.prototype.propertyIsEnumerable.call(O,_[P])&&(f[_[P]]=O[_[P]]);return f},v={success:M.Z,info:G.Z,error:Q.Z,warning:ge.Z},b={success:ce.Z,info:ue.Z,error:q.Z,warning:L.Z},mt=function(g){var f=g.description,_=g.icon,P=g.prefixCls,R=g.type,y=(f?b:v)[R]||null;return _?(0,Pe.wm)(_,C.createElement("span",{className:"".concat(P,"-icon")},_),function(){return{className:k()("".concat(P,"-icon"),(0,$.Z)({},_.props.className,_.props.className))}}):C.createElement(y,{className:"".concat(P,"-icon")})},I=function(g){var f=g.isClosable,_=g.closeText,P=g.prefixCls,R=g.closeIcon,y=g.handleClose;return f?C.createElement("button",{type:"button",onClick:y,className:"".concat(P,"-close-icon"),tabIndex:0},_?C.createElement("span",{className:"".concat(P,"-close-text")},_):R):null},Ke=function(g){var f=g.description,_=g.prefixCls,P=g.message,R=g.banner,y=g.className,se=y===void 0?"":y,pe=g.style,ee=g.onMouseEnter,Ze=g.onMouseLeave,te=g.onClick,Ce=g.afterClose,Oe=g.showIcon,Ge=g.closable,X=g.closeText,Xe=g.closeIcon,Qe=Xe===void 0?C.createElement(ne.Z,null):Xe,me=g.action,le=re(g,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),E=C.useState(!1),Ie=(0,W.Z)(E,2),h=Ie[0],qe=Ie[1],et=C.useRef(),Z=C.useContext(_e.E_),De=Z.getPrefixCls,tt=Z.direction,D=De("alert",_),nt=function(Y){var ie;qe(!0),(ie=le.onClose)===null||ie===void 0||ie.call(le,Y)},at=function(){var Y=le.type;return Y!==void 0?Y:R?"warning":"info"},rt=X?!0:Ge,Me=at(),Le=R&&Oe===void 0?!0:Oe,st=k()(D,"".concat(D,"-").concat(Me),(0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)({},"".concat(D,"-with-description"),!!f),"".concat(D,"-no-icon"),!Le),"".concat(D,"-banner"),!!R),"".concat(D,"-rtl"),tt==="rtl"),se),lt=(0,z.Z)(le);return C.createElement(Se.ZP,{visible:!h,motionName:"".concat(D,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(Y){return{maxHeight:Y.offsetHeight}},onLeaveEnd:Ce},function(oe){var Y=oe.className,ie=oe.style;return C.createElement("div",(0,U.Z)({ref:et,"data-show":!h,className:k()(st,Y),style:(0,U.Z)((0,U.Z)({},pe),ie),onMouseEnter:ee,onMouseLeave:Ze,onClick:te,role:"alert"},lt),Le?C.createElement(mt,{description:f,icon:le.icon,prefixCls:D,type:Me}):null,C.createElement("div",{className:"".concat(D,"-content")},P?C.createElement("div",{className:"".concat(D,"-message")},P):null,f?C.createElement("div",{className:"".concat(D,"-description")},f):null),me?C.createElement("div",{className:"".concat(D,"-action")},me):null,C.createElement(I,{isClosable:!!rt,closeText:X,prefixCls:D,closeIcon:Qe,handleClose:nt}))})};Ke.ErrorBoundary=ye;var je=Ke}}]);
