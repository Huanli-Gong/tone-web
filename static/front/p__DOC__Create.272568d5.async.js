(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[1614],{40620:function(Ie,K,e){"use strict";e.r(K),e.d(K,{default:function(){return ut}});var T=e(47673),$=e(4107),w=e(57663),A=e(71577),J=e(34792),j=e(48086),y=e(39428),D=e(11849),t=e(3182),n=e(2824),i=e(13062),c=e(71230),o=e(20310),r=e(67294),v=e(12788),h=e(20009),x=e(16917),Re=e(60035),a=e(85893),Pe,Fe=(0,v.ZP)(c.Z)(Pe||(Pe=(0,o.Z)([`
    width: 100%;
    height: `,`;
    display: flex;
    flex-direction: column;
`])),function(ee){var O=ee.height;return O?O+"px":"100%"}),se=function(O){var M=O.children,f=(0,Re.CR)(),R=f.height;return(0,a.jsx)(Fe,{height:R-50,children:M})},b=se,U=e(99185),ue=e(63185),X=e(9676),de=e(43358),V=e(34041),ce=e(88983),z=e(47933),Le=e(48736),fe=e(27049),Se=e(36017),ve=e(35247),He=e(402),k=e(97272),Ae=e(9715),p=e(20526),C=e(73727),he,N=(0,v.ZP)(c.Z)(he||(he=(0,o.Z)([`
    background-color: #fff;
    position: absolute;
    left: 20px;
    top: 60px;
    width:240px;
    .ant-form-item {
        margin-bottom: 8px;
    }
`]))),s=[{id:"mustRead",name:"\u5FC5\u770B"},{id:"course",name:"\u6559\u7A0B"},{id:"docs",name:"\u6587\u6863"}],pe=[{id:"maintain",name:"\u7EF4\u62A4"},{id:"notice",name:"\u901A\u77E5"},{id:"upgrade",name:"\u5347\u7EA7"},{id:"stop",name:"\u6682\u505C"}],Q={help_doc:s,notice:pe},me=function(O,M){var f=p.Z.useForm(),R=(0,n.Z)(f,1),Ce=R[0],te=(0,h.UO)(),P=te.doc_type,ne=te.doc_id,Te=(0,r.useState)(!0),re=(0,n.Z)(Te,2),ae=re[0],Y=re[1];(0,r.useImperativeHandle)(M,function(){return(0,D.Z)({},Ce)});var u=function(m){Y(m.target.value)};return(0,a.jsx)(N,{children:(0,a.jsxs)(c.Z,{style:{flexDirection:"column",width:"100%"},children:[(0,a.jsx)(c.Z,{align:"middle",style:{padding:"8px 20px",gap:6},children:(0,a.jsxs)(ve.Z,{children:[(0,a.jsx)(ve.Z.Item,{children:(0,a.jsx)(C.rU,{to:"/".concat(P),children:(0,a.jsx)(k.Z.Link,{style:{cursor:"pointer"},children:P==="help_doc"?"\u5E2E\u52A9\u6587\u6863":"\u516C\u544A"})})}),(0,a.jsx)(ve.Z.Item,{children:(0,a.jsx)(k.Z.Text,{children:ne?"\u7F16\u8F91":"\u65B0\u5EFA"})})]})}),(0,a.jsx)(fe.Z,{style:{margin:0}}),(0,a.jsxs)(p.Z,{form:Ce,style:{width:"100%",padding:20},layout:"vertical",initialValues:{active:1,is_top:!1,tags:Q[P][0].id},children:[(0,a.jsx)(p.Z.Item,{label:"\u662F\u5426\u751F\u6548",name:"active",required:!0,children:(0,a.jsxs)(z.ZP.Group,{onChange:u,children:[(0,a.jsx)(z.ZP,{value:1,children:"\u662F"}),(0,a.jsx)(z.ZP,{value:0,children:"\u5426"})]})}),(0,a.jsx)(p.Z.Item,{label:"\u7C7B\u578B",name:"tags",required:!0,children:(0,a.jsx)(V.Z,{children:Q[P].map(function(l){return(0,a.jsx)(V.Z.Option,{value:l.id,children:l.name},l.id)})})}),(0,a.jsx)(p.Z.Item,{noStyle:!0,name:"is_top",valuePropName:"checked",children:(0,a.jsx)(X.Z,{disabled:!ae,children:"\u7F6E\u9876\u8BE5\u6587\u6863"})})]})]})})},We=(0,r.forwardRef)(me),$e=e(49111),ge=e(19650),xe=e(43951),_,q,ye=v.ZP.div(_||(_=(0,o.Z)([`
    position: absolute;
    right: 20px;
    top: 60px;
    width:250px;
`]))),Ze=v.ZP.span(q||(q=(0,o.Z)([`
    cursor: pointer;
    display: inline-flex;
    text-indent: `,`;
    &:hover span {
        color: #1890ff;
    }
`])),function(ee){var O=ee.textIndent;return O>1?O-1+"rem":"unset"}),B=function(O){var M=O.json;if(!M)return(0,a.jsx)(a.Fragment,{});var f=M.content;if(!f)return(0,a.jsx)(a.Fragment,{});var R=f==null?void 0:f.filter(function(u){var l=u.type;return l==="heading"}).reduce(function(u,l,m){var F=l.attrs,G=F.level;if(!l.content)return u;var oe=l.content.reduce(function(ie,le){return ie+=le.text},"");return u.concat({level:G,text:oe,node:l,index:m})},[]),Ce=r.useCallback(function(u){var l=u.content,m=u.attrs,F=m.level;document.querySelectorAll(".ProseMirror h".concat(F)).forEach(function(G){var oe=l.reduce(function(ie,le){return ie+=le.text},"");G.innerText===oe&&(0,xe.Z)(G,{behavior:"smooth",block:"start",inline:"start"})})},[M]),te=r.useMemo(function(){var u;return(R==null||(u=R.map(function(l){var m=l.level;return m}).sort(function(l,m){return l-m}))===null||u===void 0?void 0:u[0])||0},[R]),P=r.useState(0),ne=(0,n.Z)(P,2),Te=ne[0],re=ne[1],ae=r.useRef(null),Y=function(){var l,m,F;!ae.current||re(((l=document.body)===null||l===void 0||(m=l.getBoundingClientRect())===null||m===void 0?void 0:m.height)-((F=ae.current.getBoundingClientRect())===null||F===void 0?void 0:F.y)-20)};return r.useEffect(function(){return Y(),window.addEventListener("resize",Y),function(){window.removeEventListener("resize",Y)}},[]),(0,a.jsx)(ye,{children:(0,a.jsxs)(ge.Z,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsx)(k.Z.Title,{level:4,style:{fontWeight:"normal",margin:0},children:"\u5927\u7EB2"}),(0,a.jsx)(fe.Z,{style:{margin:0}}),(0,a.jsx)("div",{ref:ae,style:{overflowY:"scroll",overflowX:"hidden",height:Te,width:250},children:R==null?void 0:R.filter(function(u){var l=u.text;return l&&!!l.trim()}).map(function(u){var l=u.level,m=u.text,F=u.index,G=u.node;return(0,a.jsx)(Ze,{textIndent:l-te,onClick:function(){return Ce(G)},children:(0,a.jsx)(k.Z.Text,{ellipsis:{tooltip:{placement:"left"}},style:{width:250},children:m})},F)})})]})})},I=B,je=e(6700),be=e(24458),we=e(52638),Ee=e(81284),De,Me,ze,Ye,Ge,rt=v.ZP.div(De||(De=(0,o.Z)([`
    width: 100%;
    height: calc(100% - 50px - 10px);
`]))),at=v.ZP.div(Me||(Me=(0,o.Z)([`
    width: 850px;
    margin: 10px auto;
    height: 100%;
    background-color: #ffffff;
    box-shadow: 0 2px 10px rgb(0 0 0 / 12%);
    padding: 20px;
    /* overflow: auto; */
`]))),ot=v.ZP.div(ze||(ze=(0,o.Z)([`
    padding: 0 0 20px 0;
    /* border-bottom: 1px solid #e8e8e8; */
    input {
        outline: none;
        border:0 !important;
        box-shadow: unset!important;
        font-size: 30px;
        width: 100%;
        line-height: 1;
    }
`]))),it=v.ZP.div(Ye||(Ye=(0,o.Z)([`
    width: 100%;
    height: calc(100% - 64px );
`]))),lt=(0,v.ZP)(c.Z)(Ge||(Ge=(0,o.Z)([`
    background-color: #fff;
    height: 50px;
    padding:0 20px;
`]))),st=function(){var O=(0,h.UO)(),M=O.doc_type,f=O.doc_id,R=(0,x.md)(),Ce=(0,r.useState)(""),te=(0,n.Z)(Ce,2),P=te[0],ne=te[1],Te=(0,r.useState)(!0),re=(0,n.Z)(Te,2),ae=re[0],Y=re[1],u=r.useState(""),l=(0,n.Z)(u,2),m=l[0],F=l[1],G=r.useState(),oe=(0,n.Z)(G,2),ie=oe[0],le=oe[1],dt=r.useState(),Je=(0,n.Z)(dt,2),ct=Je[0],Xe=Je[1],ft=r.useState(!1),ke=(0,n.Z)(ft,2),Qe=ke[0],Ue=ke[1],Ne=(0,r.useRef)(),vt=(0,r.useRef)(),ht=(0,r.useRef)(),pt=function(){var H=(0,t.Z)((0,y.Z)().mark(function g(){var d,L,Z,S,Oe;return(0,y.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(Y(!0),!f){W.next=13;break}return W.next=4,(0,U.Z0)({id:f});case 4:if(d=W.sent,L=d.code,Z=d.data,L!==200){W.next=13;break}if(!(!!Z.length&&JSON.stringify(Z[0])!=="{}")){W.next=12;break}return Oe=Z[0].active,(S=Ne.current)===null||S===void 0||S.setFieldsValue((0,D.Z)((0,D.Z)({},Z[0]),{},{active:Oe?1:0})),W.abrupt("return",Z[0]);case 12:return W.abrupt("return",{});case 13:return W.abrupt("return",!1);case 14:case"end":return W.stop()}},g)}));return function(){return H.apply(this,arguments)}}(),mt=function(g){var d=g.title,L=g.content;d&&ne(d),L&&F((0,Ee.l5)(L))},gt=function(){var H=(0,t.Z)((0,y.Z)().mark(function g(){var d;return(0,y.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(R.IsSysTestAdmin()){Z.next=2;break}return Z.abrupt("return",x.m8.push("/"));case 2:return Z.next=4,pt();case 4:d=Z.sent,Y(!1),mt(d);case 7:case"end":return Z.stop()}},g)}));return function(){return H.apply(this,arguments)}}();(0,r.useEffect)(function(){gt()},[f]),r.useEffect(function(){return function(){le(void 0)}},[]);var xt=function(g){var d=g.target;return ne((d==null?void 0:d.value)||"")},yt=function(){x.m8.push("/".concat(M).concat(f?"/"+f:""))},Zt=function(){var H=(0,t.Z)((0,y.Z)().mark(function g(){var d,L;return(0,y.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(d=(0,Ee.uY)((ie==null?void 0:ie.getHTML())||""),d){S.next=3;break}return S.abrupt("return",j.default.warning("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A\uFF01"));case 3:if(P){S.next=5;break}return S.abrupt("return",j.default.warning("\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A\uFF01"));case 5:if(L=Ne.current,!Qe){S.next=8;break}return S.abrupt("return");case 8:Ue(!0),L==null||L.validateFields().then(function(){var Oe=(0,t.Z)((0,y.Z)().mark(function Ke(W){var Ve,Be,_e,qe,et,tt,nt;return(0,y.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(Ve=(0,D.Z)({title:P,content:d,doc_type:M},W),f){E.next=7;break}return E.next=4,(0,U.do)(Ve);case 4:E.t0=E.sent,E.next=10;break;case 7:return E.next=9,(0,U.r7)((0,D.Z)((0,D.Z)({},Ve),{},{id:f}));case 9:E.t0=E.sent;case 10:if(Be=E.t0,_e=Be.code,qe=Be.msg,et=Be.data,_e===200){E.next=18;break}return Ue(!1),j.default.error(qe),E.abrupt("return");case 18:Ue(!1),tt=f?"/".concat(f):"/".concat(et.id),nt="/".concat(M).concat(tt),x.m8.push(nt);case 22:case"end":return E.stop()}},Ke)}));return function(Ke){return Oe.apply(this,arguments)}}()).catch(function(Oe){console.log(Oe)});case 10:case"end":return S.stop()}},g)}));return function(){return H.apply(this,arguments)}}(),jt=(0,r.useMemo)(function(){return"".concat(f?"\u7F16\u8F91":"\u65B0\u5EFA").concat(M==="notice"?"\u516C\u544A":"\u5E2E\u52A9\u6587\u6863"," \u2014 T-One")},[P,f]);return(0,a.jsxs)(b,{children:[(0,a.jsx)(x.ql,{children:(0,a.jsx)("title",{children:jt})}),(0,a.jsxs)(rt,{children:[(0,a.jsxs)(lt,{justify:"space-between",align:"middle",children:[(0,a.jsx)("span",{style:{cursor:"pointer"},onClick:yt,children:(0,a.jsx)(je.Z,{style:{fontSize:20}})}),(0,a.jsx)(A.Z,{type:"primary",onClick:Zt,loading:Qe,children:f?"\u66F4\u65B0":"\u53D1\u5E03"})]}),(0,a.jsxs)(at,{ref:ht,children:[(0,a.jsx)(ot,{children:(0,a.jsx)($.Z,{value:P,placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",autoComplete:"off",onChange:xt})}),(0,a.jsx)(it,{ref:vt,children:(0,a.jsx)(we.Z,{content:m,placeholder:"\u8BF4\u70B9\u4EC0\u4E48\uFF1F",onCreate:function(g){var d=g.editor;le(d),Xe(d.getJSON())},onUpdate:function(g){var d=g.editor;le(d),Xe(d.getJSON())}})})]}),(0,a.jsx)(We,{ref:Ne}),(0,a.jsx)(I,{json:ct})]}),(0,a.jsx)(be.Z,{loading:ae})]})},ut=st},24458:function(Ie,K,e){"use strict";var T=e(20228),$=e(11382),w=e(20310),A=e(67294),J=e(12788),j=e(85893),y,D,t=J.ZP.div(y||(y=(0,w.Z)([`
    width : 100%;
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
`]))),n=J.ZP.div(D||(D=(0,w.Z)([`
    position: absolute;
    background-color: #fff;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
`]))),i=function(o){var r=o.loading;return r?(0,j.jsx)(n,{children:(0,j.jsx)(t,{children:(0,j.jsx)($.Z,{spinning:r})})}):(0,j.jsx)(j.Fragment,{})};K.Z=i},99185:function(Ie,K,e){"use strict";e.d(K,{Z0:function(){return A},do:function(){return J},r7:function(){return j},oe:function(){return y}});var T=e(39428),$=e(3182),w=e(16917),A=function(){var t=(0,$.Z)((0,T.Z)().mark(function n(i){return(0,T.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.WY)("/api/sys/help_doc/",{params:i}));case 1:case"end":return o.stop()}},n)}));return function(i){return t.apply(this,arguments)}}(),J=function(n){return(0,w.WY)("/api/sys/help_doc/",{method:"post",data:n})},j=function(){var t=(0,$.Z)((0,T.Z)().mark(function n(i){return(0,T.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.WY)("/api/sys/help_doc/",{method:"put",data:i}));case 1:case"end":return o.stop()}},n)}));return function(i){return t.apply(this,arguments)}}(),y=function(){var t=(0,$.Z)((0,T.Z)().mark(function n(i){return(0,T.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.WY)("/api/sys/help_doc/",{method:"delete",data:i}));case 1:case"end":return o.stop()}},n)}));return function(i){return t.apply(this,arguments)}}(),D=null},43951:function(Ie,K,e){"use strict";e.d(K,{Z:function(){return D}});const T=t=>typeof t=="object"&&t!=null&&t.nodeType===1,$=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",w=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const i=getComputedStyle(t,null);return $(i.overflowY,n)||$(i.overflowX,n)||(c=>{const o=(r=>{if(!r.ownerDocument||!r.ownerDocument.defaultView)return null;try{return r.ownerDocument.defaultView.frameElement}catch(v){return null}})(c);return!!o&&(o.clientHeight<c.scrollHeight||o.clientWidth<c.scrollWidth)})(t)}return!1},A=(t,n,i,c,o,r,v,h)=>r<t&&v>n||r>t&&v<n?0:r<=t&&h<=i||v>=n&&h>=i?r-t-c:v>n&&h<i||r<t&&h>i?v-n+o:0,J=t=>{const n=t.parentElement;return n==null?t.getRootNode().host||null:n},j=(t,n)=>{var i,c,o,r;if(typeof document=="undefined")return[];const{scrollMode:v,block:h,inline:x,boundary:Re,skipOverflowHiddenElements:a}=n,Pe=typeof Re=="function"?Re:N=>N!==Re;if(!T(t))throw new TypeError("Invalid target");const Fe=document.scrollingElement||document.documentElement,se=[];let b=t;for(;T(b)&&Pe(b);){if(b=J(b),b===Fe){se.push(b);break}b!=null&&b===document.body&&w(b)&&!w(document.documentElement)||b!=null&&w(b,a)&&se.push(b)}const U=(c=(i=window.visualViewport)==null?void 0:i.width)!=null?c:innerWidth,ue=(r=(o=window.visualViewport)==null?void 0:o.height)!=null?r:innerHeight,{scrollX:X,scrollY:de}=window,{height:V,width:ce,top:z,right:Le,bottom:fe,left:Se}=t.getBoundingClientRect(),{top:ve,right:He,bottom:k,left:Ae}=(N=>{const s=window.getComputedStyle(N);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(t);let p=h==="start"||h==="nearest"?z-ve:h==="end"?fe+k:z+V/2-ve+k,C=x==="center"?Se+ce/2-Ae+He:x==="end"?Le+He:Se-Ae;const he=[];for(let N=0;N<se.length;N++){const s=se[N],{height:pe,width:Q,top:me,right:We,bottom:$e,left:ge}=s.getBoundingClientRect();if(v==="if-needed"&&z>=0&&Se>=0&&fe<=ue&&Le<=U&&z>=me&&fe<=$e&&Se>=ge&&Le<=We)return he;const xe=getComputedStyle(s),_=parseInt(xe.borderLeftWidth,10),q=parseInt(xe.borderTopWidth,10),ye=parseInt(xe.borderRightWidth,10),Ze=parseInt(xe.borderBottomWidth,10);let B=0,I=0;const je="offsetWidth"in s?s.offsetWidth-s.clientWidth-_-ye:0,be="offsetHeight"in s?s.offsetHeight-s.clientHeight-q-Ze:0,we="offsetWidth"in s?s.offsetWidth===0?0:Q/s.offsetWidth:0,Ee="offsetHeight"in s?s.offsetHeight===0?0:pe/s.offsetHeight:0;if(Fe===s)B=h==="start"?p:h==="end"?p-ue:h==="nearest"?A(de,de+ue,ue,q,Ze,de+p,de+p+V,V):p-ue/2,I=x==="start"?C:x==="center"?C-U/2:x==="end"?C-U:A(X,X+U,U,_,ye,X+C,X+C+ce,ce),B=Math.max(0,B+de),I=Math.max(0,I+X);else{B=h==="start"?p-me-q:h==="end"?p-$e+Ze+be:h==="nearest"?A(me,$e,pe,q,Ze+be,p,p+V,V):p-(me+pe/2)+be/2,I=x==="start"?C-ge-_:x==="center"?C-(ge+Q/2)+je/2:x==="end"?C-We+ye+je:A(ge,We,Q,_,ye+je,C,C+ce,ce);const{scrollLeft:De,scrollTop:Me}=s;B=Ee===0?0:Math.max(0,Math.min(Me+B/Ee,s.scrollHeight-pe/Ee+be)),I=we===0?0:Math.max(0,Math.min(De+I/we,s.scrollWidth-Q/we+je)),p+=Me-B,C+=De-I}he.push({el:s,top:B,left:I})}return he},y=t=>t===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(t)?t:{block:"start",inline:"nearest"};function D(t,n){if(!t.isConnected||!(o=>{let r=o;for(;r&&r.parentNode;){if(r.parentNode===document)return!0;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1})(t))return;const i=(o=>{const r=window.getComputedStyle(o);return{top:parseFloat(r.scrollMarginTop)||0,right:parseFloat(r.scrollMarginRight)||0,bottom:parseFloat(r.scrollMarginBottom)||0,left:parseFloat(r.scrollMarginLeft)||0}})(t);if((o=>typeof o=="object"&&typeof o.behavior=="function")(n))return n.behavior(j(t,n));const c=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:o,top:r,left:v}of j(t,y(n))){const h=r-i.top+i.bottom,x=v-i.left+i.right;o.scroll({top:h,left:x,behavior:c})}}}}]);
