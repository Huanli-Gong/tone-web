(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"2f0R":function(e,t,a){e.exports={paragraph:"paragraph___1ysHh"}},SHue:function(e,t,a){e.exports={part_title:"part_title___2o2oM",line:"line___2hjGI"}},TQtp:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("SHue"),l=a.n(c);t["a"]=function(e){return r.a.createElement("div",{className:l.a.part_title},e.text,e.children,r.a.createElement("div",{className:l.a.line}))}},Tqne:function(e,t,a){e.exports={paragraph:"paragraph___1X3JJ",full_width:"full_width___3YGWb",row_box:"row_box___3X3ac",first_part:"first_part___2FLAG",second_part:"second_part___39Rw6",transferOwnerWs:"transferOwnerWs___1TIGZ",cancleWs:"cancleWs___3O_vj"}},"YMq/":function(e,t,a){"use strict";a.r(t);a("B9cy");var n=a("Ol7k"),r=(a("Q9mQ"),a("diRs")),c=(a("jCWc"),a("kPKH")),l=(a("DYRE"),a("zeV3")),i=(a("Telt"),a("Tckk")),s=(a("y8nQ"),a("Vl3Y")),o=(a("14J3"),a("BMrR")),m=(a("DZo9"),a("8z0m")),u=(a("+L6B"),a("2/Rp")),p=a("0Owb"),d=a("k1fw"),b=(a("miYZ"),a("tsqr")),f=a("9og8"),h=a("tJVT"),g=(a("tU7J"),a("wFql")),w=a("WmNS"),_=a.n(w),E=a("q1tI"),v=a.n(E),y=(a("/zsF"),a("PArb")),O=(a("OaEy"),a("2fM7")),j=(a("fOrg"),a("+KLJ")),x=(a("5NDa"),a("5rEg")),k=(a("7Kak"),a("9yH6")),N=a("jrin"),S=a("2f0R"),C=a.n(S);var T=function(e){var t=Object(E["useState"])(!1),a=Object(h["a"])(t,2),n=a[0],r=a[1];Object(E["useEffect"])((function(){r(e.title)}),[e.title]);var c=function(t){r(t.target.value);var a=Object(N["a"])({},e.keyName,t.target.value);e.changeText(a)};return v.a.createElement(l["b"],null,v.a.createElement(k["a"].Group,{onChange:c,value:n,disabled:e.disabled},v.a.createElement(k["a"],{value:!0},"\u516c\u5f00"),v.a.createElement(k["a"],{value:!1},"\u79c1\u5bc6")))},R=function(e){var t=e.name,a=(e.ws_id,e.keyName,e.size),n=void 0===a?"small":a,r=e.type,c=void 0===r?"input":r,l=(e.auth,e.disabled),i=e.inputType,s=e.setErrorReg,o=e.errorReg,m=e.changeText,u=Object(E["useState"])(t),p=Object(h["a"])(u,2),b=p[0],f=p[1];Object(E["useEffect"])((function(){f(t)}),[t]);var g=function(e){f(e.target.value);var t=e.target.value,a=/^([\w\W])+$/,n="";"name"===i&&(a=/^[a-z0-9_-]{1,20}$/,n="regName"),"show_name"===i&&(a=/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,20}$/g,n="regShowName"),"description"===i&&(a=/^([\w\W]){1,200}$/,n="regDescription");var r=a.test(t);s(Object(d["a"])(Object(d["a"])({},o),{},Object(N["a"])({},n,!r))),m(Object(N["a"])({},i,t))};return v.a.createElement(v.a.Fragment,null,"input"===c?v.a.createElement(x["a"],{autoComplete:"off",style:{width:480,height:32},defaultValue:b,value:b,disabled:l,onChange:g}):v.a.createElement(x["a"].TextArea,{size:n,style:{width:480},defaultValue:b,disabled:l,value:b,onChange:g}))},W=function(e){var t=Object(E["useState"])(null),a=Object(h["a"])(t,2),r=a[0],c=a[1],i=function(e){var t=e.first_name,a=e.last_name;return t&&a?"".concat(t,"\uff08").concat(a,"\uff09"):t&&!a?t:!t&&a?a:void 0};return v.a.createElement(n["a"].Content,{style:{width:400}},v.a.createElement(o["a"],{style:{marginTop:4,marginBottom:24},className:C.a.full_width},v.a.createElement(j["a"],{message:"Workspace\u6743\u9650\u8f6c\u79fb\uff0c\u5c06\u7a7a\u95f4\u6240\u6709\u6743\u9650\u8f6c\u4ea4\u7ed9\u6307\u5b9a\u6210\u5458",type:"warning",showIcon:!0,style:{width:"100%",height:32}})),v.a.createElement(o["a"],{className:C.a.full_width},v.a.createElement(g["a"].Text,{strong:!0},"\u7528\u6237")),v.a.createElement(o["a"],{style:{marginTop:6},className:C.a.full_width},v.a.createElement(O["a"],{style:{width:"100%"},onChange:function(e){return c(e)},placeholder:"\u8f93\u5165\u82b1\u540d\u3001\u59d3\u540d"},e.member.map((function(e){return v.a.createElement(O["a"].Option,{key:e.user_info.id,value:e.user_id},i(e.user_info))})))),v.a.createElement(y["a"],{style:{marginTop:24,marginBottom:10,width:"calc(100% + 48px)",transform:"translateX(-24px)"}}),v.a.createElement(o["a"],{justify:"end",className:C.a.full_width},v.a.createElement(l["b"],null,v.a.createElement(u["a"],{onClick:e.handleCancel},"\u53d6\u6d88"),v.a.createElement(u["a"],{type:"primary",onClick:function(){return e.handleSubmit(r)}},"\u786e\u5b9a"))))},B=function(e){var t=Object(E["useState"])(""),a=Object(h["a"])(t,2),r=a[0];a[1];return v.a.createElement(n["a"].Content,{style:{width:400}},v.a.createElement(o["a"],null,v.a.createElement(g["a"].Text,{style:{color:"(0,0,0,0.65)",lineHeight:"22px"}},"\u4e00\u65e6\u4f60\u5220\u9664Workspace\uff0c\u91cc\u9762\u6240\u6709Job\u7ed3\u679c\u3001\u6d4b\u8bd5\u8ba1\u5212\u3001\u6d4b\u8bd5\u5206\u6790\u3001\u6d4b\u8bd5\u62a5\u544a\u4e2d\u6240\u6709\u5185\u5bb9\u4ee5\u53ca\u6240\u5173\u8054\u7684\u6240\u6709\u6587\u6863\u90fd\u5c06\u4f1a\u88ab\u6c38\u4e45\u5220\u9664\u3002\u8fd9\u662f\u4e00\u4e2a\u4e0d\u53ef\u6062\u590d\u7684\u64cd\u4f5c\uff0c\u8bf7\u8c28\u614e\u5bf9\u5f85\uff01")),v.a.createElement(y["a"],{style:{marginTop:24,marginBottom:10,width:"calc(100% + 48px)",transform:"translateX(-24px)"}}),v.a.createElement(o["a"],{justify:"end",className:C.a.full_width},v.a.createElement(l["b"],null,v.a.createElement(u["a"],{onClick:e.handleCancel},"\u53d6\u6d88"),v.a.createElement(u["a"],{type:"primary",onClick:function(){return e.handleSubmit(r)}},"\u6ce8\u9500"))))},I=a("9kvl"),A=a("eRi9"),D=a("sGWT"),z=a("skNQ"),J=a("TQtp"),L=a("Tqne"),q=a.n(L),V=a("LvDl"),G=a.n(V),Q=a("c+yx"),$=g["a"].Text;t["default"]=function(e){var t=e.match.params.ws_id,a=Object(I["k"])(),w=Object(I["m"])("@@initialState"),y=w.initialState,O=w.setInitialState,j=Object(E["useState"])(!1),x=Object(h["a"])(j,2),k=x[0],N=x[1],S=Object(E["useState"])(!1),C=Object(h["a"])(S,2),L=C[0],V=C[1],F=Object(E["useState"])([]),H=Object(h["a"])(F,2),M=H[0],Y=H[1],X=Object(E["useState"])(!1),Z=Object(h["a"])(X,2),K=Z[0],U=Z[1],P=Object(E["useState"])(""),ee=Object(h["a"])(P,2),te=ee[0],ae=ee[1],ne=Object(E["useState"])({logo:"",show_name:"",name:"",description:"",is_public:!1,owner_name:"",proposer_dep:"",gmt_created:"",member_count:0}),re=Object(h["a"])(ne,2),ce=re[0],le=re[1],ie=Object(E["useState"])({regName:!1,regShowName:!1,regDescription:!1}),se=Object(h["a"])(ie,2),oe=se[0],me=se[1],ue=Object(E["useState"])({logo:"",show_name:"",name:"",description:"",is_public:!1,owner_name:"",proposer_dep:"",gmt_created:"",member_count:0}),pe=Object(h["a"])(ue,2),de=pe[0],be=pe[1],fe=function(){var e=Object(f["a"])(_.a.mark((function e(){var a,n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ee(),e.next=3,Object(A["r"])(t);case 3:a=e.sent,n=a.data,r=a.code,c=a.msg,200===r?(le(G.a.cloneDeep(n)),he(n),be(n)):Object(Q["m"])(r,c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E["useEffect"])((function(){fe()}),[location.pathname]);var he=function(e){var t=e.show_name,a=e.name,n=e.description,r=!/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,20}$/g.test(t),c=!/^[a-z0-9_-]{1,20}$/.test(a),l=!/^([\w\W]){1,200}$/.test(n);me({regShowName:r,regName:c,regDescription:l})},ge={labelCol:{span:4},wrapperCol:{span:20}},we=function(){var e=Object(f["a"])(_.a.mark((function e(){var a,n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["t"])({ws_id:t});case 2:a=e.sent,n=a.data,r=a.code,c=a.msg,200===r?(Y(n),N(!0)):Object(Q["m"])(r,c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e={name:"file",action:"/api/sys/upload/",beforeUpload:function(e){var t=new FileReader;return t.onload=function(e){ae(e.target.result),U(!0)},t.readAsDataURL(e),!1},onChange:function(){var e=Object(f["a"])(_.a.mark((function e(a){var n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("done"!==a.file.status){e.next=9;break}return e.next=3,Object(A["w"])({id:t,logo:a.file.response.path});case 3:n=e.sent,r=n.code,c=n.msg,200===r?(fe(),b["default"].success("\u66f4\u65b0\u6210\u529f\uff01")):Object(Q["m"])(r,c),e.next=10;break;case 9:"error"===a.file.status&&b["default"].error("".concat(a.file.name," file upload failed."));case 10:case"end":return e.stop()}}),e)})));function a(t){return e.apply(this,arguments)}return a}()},Ee=function(){O(Object(d["a"])(Object(d["a"])({},y),{},{refreshWorkspaceList:!(null!==y&&void 0!==y&&y.refreshWorkspaceList)}))},ve=function(){var e=Object(f["a"])(_.a.mark((function e(){var a,n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={show_name:ce.show_name,name:ce.name,description:ce.description,id:t,is_public:ce.is_public},e.next=3,Object(A["w"])(a);case 3:n=e.sent,r=n.code,c=n.msg,200===r?(fe(),b["default"].success("\u6210\u529f\u4fdd\u5b58")):Object(Q["m"])(r,c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(e){le(Object(d["a"])(Object(d["a"])({},ce),e))},Oe=oe.regShowName||oe.regShowName||oe.regDescription;Oe=Oe||G.a.get(ce,"show_name")===G.a.get(de,"show_name")&&G.a.get(ce,"name")===G.a.get(de,"name")&&G.a.get(ce,"description")===G.a.get(de,"description")&&G.a.get(ce,"is_public")===G.a.get(de,"is_public");var je=window.localStorage.getItem("role_ws_title");return v.a.createElement(n["a"].Content,{style:{background:"#f5f5f5"}},v.a.createElement(o["a"],{className:q.a.row_box},v.a.createElement(s["a"],Object(p["a"])({},ge,{colon:!0,layout:"vertical",style:{width:"100%"}}),v.a.createElement(J["a"],{text:"\u5c01\u9762\u4fe1\u606f"}),v.a.createElement(s["a"].Item,{label:""},v.a.createElement(o["a"],{style:{width:"100%",marginBottom:0}},v.a.createElement(z["a"],Object(p["a"])({size:"large"},ce)),v.a.createElement("div",{style:{width:"calc(100% - 96px - 20px)",marginLeft:16},className:q.a.first_part},v.a.createElement(o["a"],{style:{marginBottom:8}},v.a.createElement(I["a"],{accessible:a.canSysTestAdmin(),fallback:v.a.createElement(u["a"],{disabled:!0},"\u66f4\u65b0\u5c01\u9762")},v.a.createElement(m["a"],_e,v.a.createElement(u["a"],null,"\u66f4\u65b0\u5c01\u9762")))),v.a.createElement(o["a"],{style:{marginBottom:4}},v.a.createElement(g["a"].Text,null,"\u652f\u6301\u56fe\u7247\u7c7b\u578b\uff1ajpg\u3001png\uff0c\u5c01\u9762\u5927\u5c0f\uff1a96*96\u3002")),v.a.createElement(o["a"],null,v.a.createElement(g["a"].Text,null))))),v.a.createElement(s["a"].Item,{label:"\u663e\u793a\u540d ",name:"show_name",validateStatus:oe.regShowName?"error":void 0,help:oe.regShowName&&"\u957f\u5ea6\u6700\u591a20\u4f4d,\u4ec5\u5141\u8bb8\u5305\u542b\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3001\u4e2d\u5212\u7ebf\u3001\u70b9"},v.a.createElement(R,{ws_id:t,keyName:"show_name",auth:je,name:ce.show_name,changeText:ye,errorReg:oe,inputType:"show_name",setErrorReg:me})),v.a.createElement(s["a"].Item,{label:"\u540d\u79f0 ",name:"name",validateStatus:oe.regName?"error":void 0,help:oe.regName&&"\u53ea\u5141\u8bb8\u82f1\u6587\u5c0f\u5199\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\uff0c\u6700\u591a20\u4e2a\u5b57\u7b26"},v.a.createElement(R,{ws_id:t,keyName:"show_name",auth:je,name:ce.name,changeText:ye,disabled:!0,inputType:"name",errorReg:oe,setErrorReg:me})),v.a.createElement(s["a"].Item,{validateStatus:oe.regDescription?"error":void 0,help:oe.regDescription&&"\u957f\u5ea6\u6700\u591a200\u4f4d",label:"\u4ecb\u7ecd ",name:"description"},v.a.createElement(R,{ws_id:t,type:"textarea",size:"large",auth:je,keyName:"description",name:ce.description,changeText:ye,inputType:"description",errorReg:oe,setErrorReg:me})),v.a.createElement(s["a"].Item,{label:"\u662f\u5426\u516c\u5f00 ",style:{marginBottom:16},name:"is_public"},v.a.createElement(T,{ws_id:t,title:ce.is_public,keyName:"is_public",disabled:G.a.get(ce,"is_common"),auth:je,changeText:ye})),v.a.createElement(I["a"],{accessible:a.canSysTestAdmin(),fallback:v.a.createElement(u["a"],{style:{marginBottom:16},disabled:!0,type:"primary"},"\u786e\u5b9a")},v.a.createElement(u["a"],{style:{marginBottom:16},disabled:Oe,onClick:Oe?function(){}:ve,type:"primary"},"\u786e\u5b9a")))),v.a.createElement(o["a"],{className:q.a.row_box},v.a.createElement(s["a"],Object(p["a"])({},ge,{colon:!0,style:{width:"100%"}}),v.a.createElement(J["a"],{text:"Workspace\u4fe1\u606f"}),v.a.createElement("div",{className:q.a.second_part},v.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u6240\u6709\u8005\uff1a"),v.a.createElement(o["a"],{style:{width:"calc(100% - 70px)"}},v.a.createElement(c["a"],{span:24},v.a.createElement(l["b"],null,v.a.createElement(i["a"],{size:25,src:ce.creator_avatar}),v.a.createElement($,null,ce.owner_name))),v.a.createElement(c["a"],{span:24},v.a.createElement($,{style:{color:"rgba(0,0,0,0.5)"}},ce.proposer_dep)))),v.a.createElement("div",{className:q.a.second_part},v.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u521b\u5efa\u65f6\u95f4\uff1a"),v.a.createElement($,null,ce.gmt_created)),v.a.createElement("div",{className:q.a.second_part,style:{marginBottom:16}},v.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u4eba\u6570\uff1a"),v.a.createElement($,null,ce.member_count)))),v.a.createElement(I["a"],{accessible:a.canSuperAdmin()},v.a.createElement(o["a"],{className:q.a.row_box},v.a.createElement(s["a"],Object(p["a"])({},ge,{colon:!1,layout:"vertical",style:{width:"100%"},className:q.a.three_part}),v.a.createElement(J["a"],{text:"\u66f4\u591a\u64cd\u4f5c"}),v.a.createElement(s["a"].Item,null,v.a.createElement(l["b"],null,v.a.createElement(r["a"],{content:v.a.createElement(W,{handleCancel:function(){return N(!1)},handleSubmit:function(){var e=Object(f["a"])(_.a.mark((function e(a){var n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["w"])({id:t,owner:a});case 2:n=e.sent,r=n.code,c=n.msg,200===r?(N(!1),fe(),b["default"].success("\u64cd\u4f5c\u6210\u529f\uff01")):Object(Q["m"])(r,c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),member:M}),trigger:"click",title:"\u8f6c\u4ea4\u6240\u6709\u6743",onVisibleChange:function(e){return N(e)},visible:k,overlayClassName:q.a.transferOwnerWs},v.a.createElement(I["a"],{accessible:a.canSysTestAdmin(),fallback:v.a.createElement(u["a"],{disabled:!0},"\u6240\u6709\u6743\u8f6c\u4ea4")},v.a.createElement(u["a"],{onClick:we},"\u6240\u6709\u6743\u8f6c\u4ea4"))),!G.a.get(ce,"is_common")&&v.a.createElement(r["a"],{content:v.a.createElement(B,{handleCancel:function(){return V(!1)},handleSubmit:function(){var e=Object(f["a"])(_.a.mark((function e(a){var n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["g"])({id:t,reason:a});case 2:n=e.sent,r=n.code,c=n.msg,200===r?(I["f"].push("/"),V(!1)):Object(Q["m"])(r,c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),visible:L,onVisibleChange:function(e){return V(e)},overlayClassName:q.a.cancleWs,trigger:"click",title:"\u63d0\u793a"},v.a.createElement(u["a"],{onClick:function(){return V(!0)}},"\u6ce8\u9500"))))))),K&&v.a.createElement(D["a"],{visible:K,url:te,onCancel:function(){return U(!1)},onOk:function(){var e=Object(f["a"])(_.a.mark((function e(a){var n,r,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["w"])({id:t,logo:a.path});case 2:n=e.sent,r=n.code,c=n.msg,200===r?(fe(),U(!1),b["default"].success("\u66f4\u65b0\u6210\u529f\uff01")):Object(Q["m"])(r,c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}},sGWT:function(e,t,a){"use strict";a("2qtc");var n=a("kLXV"),r=(a("14J3"),a("BMrR")),c=a("9og8"),l=a("WmNS"),i=a.n(l),s=a("q1tI"),o=a.n(s),m=(a("YQfW"),a("wyMu")),u=a.n(m),p=a("9kvl");t["a"]=function(e){var t=e.visible,a=e.url,l=Object(s["useRef"])(null),m=function(){e.onCancel()},d=function(){l.current.getCroppedCanvas().toBlob(function(){var t=Object(c["a"])(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("file",a),t.next=4,Object(p["h"])("/api/sys/upload/",{method:"post",data:n});case 4:r=t.sent,console.log(r),e.onOk(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return o.a.createElement(n["a"],{visible:t,onCancel:m,onOk:d,title:"\u56fe\u7247\u88c1\u5207",maskClosable:!1},o.a.createElement(r["a"],null,o.a.createElement(u.a,{ref:l,src:a,style:{height:200,width:200},aspectRatio:1,guides:!0,preview:".preview"}),o.a.createElement("div",{className:"preview",style:{width:"calc(100% - 200px - 20px)",height:100,overflow:"hidden",marginLeft:20}})))}}}]);