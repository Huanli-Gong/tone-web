(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"2f0R":function(J,$,a){J.exports={paragraph:"paragraph___1ysHh"}},SHue:function(J,$,a){J.exports={part_title:"part_title___2o2oM",line:"line___2hjGI"}},TQtp:function(J,$,a){"use strict";var ve=a("q1tI"),k=a.n(ve),Ee=a("SHue"),X=a.n(Ee);$.a=function(le){return k.a.createElement("div",{className:X.a.part_title},le.text,le.children,k.a.createElement("div",{className:X.a.line}))}},Tqne:function(J,$,a){J.exports={paragraph:"paragraph___1X3JJ",full_width:"full_width___3YGWb",row_box:"row_box___3X3ac",first_part:"first_part___2FLAG",second_part:"second_part___39Rw6",transferOwnerWs:"transferOwnerWs___1TIGZ",cancleWs:"cancleWs___3O_vj"}},"YMq/":function(J,$,a){"use strict";a.r($);var ve=a("B9cy"),k=a("Ol7k"),Ee=a("jCWc"),X=a("kPKH"),le=a("DYRE"),G=a("zeV3"),ge=a("Telt"),pe=a("Tckk"),he=a("14J3"),p=a("BMrR"),R=a("0Owb"),we=a("+L6B"),U=a("2/Rp"),_e=a("y8nQ"),A=a("Vl3Y"),Ae=a("miYZ"),Z=a("tsqr"),K=a("k1fw"),W=a("9og8"),w=a("tJVT"),We=a("tU7J"),q=a("wFql"),Me=a("WmNS"),g=a.n(Me),_=a("q1tI"),e=a.n(_),Pe=a("/zsF"),de=a("PArb"),Ce=a("OaEy"),Oe=a("2fM7"),ye=a("T2oS"),be=a("W9HT"),je=a("fOrg"),De=a("+KLJ"),Te=a("5NDa"),ue=a("5rEg"),Se=a("7Kak"),oe=a("9yH6"),ne=a("jrin"),ie=a("2f0R"),H=a.n(ie),Fe=a("LvDl"),O=a.n(Fe),I=a("eRi9"),ce=a("Ty5D"),S=a("9kvl"),ee=a("c+yx"),xe=function(n){var r=Object(_.useState)(!1),s=Object(w.a)(r,2),d=s[0],u=s[1];Object(_.useEffect)(function(){u(n.title)},[n.title]);var h=function(v){u(v.target.value);var t=Object(ne.a)({},n.keyName,v.target.value);n.changeText(t)};return e.a.createElement(G.b,null,e.a.createElement(oe.a.Group,{onChange:h,value:d,disabled:n.disabled},e.a.createElement(oe.a,{value:!0},"\u516C\u5F00"),e.a.createElement(oe.a,{value:!1},"\u79C1\u5BC6")))},Be=function(n){var r=n.name,s=n.size,d=s===void 0?"small":s,u=n.type,h=u===void 0?"input":u,f=n.disabled,v=n.inputType,t=n.setErrorReg,E=n.errorReg,y=n.changeText,o=Object(_.useState)(r),c=Object(w.a)(o,2),l=c[0],x=c[1];Object(_.useEffect)(function(){x(r)},[r]);var b=function(L){x(L.target.value);var M=L.target.value,j=/^([\w\W])+$/,F="";v==="name"&&(j=/^[a-z0-9_-]{1,20}$/,F="regName"),v==="show_name"&&(j=/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,20}$/g,F="regShowName"),v==="description"&&(j=/^([\w\W]){1,200}$/,F="regDescription");var D=j.test(M);t(Object(K.a)(Object(K.a)({},E),{},Object(ne.a)({},F,!D))),y(Object(ne.a)({},v,M))};return e.a.createElement(e.a.Fragment,null,h==="input"?e.a.createElement(ue.a,{autoComplete:"off",style:{width:480,height:32},defaultValue:l,value:l,disabled:f,onChange:b}):e.a.createElement(ue.a.TextArea,{size:d,style:{width:480},defaultValue:l,disabled:f,value:l,onChange:b}))},Le=function(n){var r=n.first_name,s=n.last_name;return r&&s?"".concat(r,"\uFF08").concat(s,"\uFF09"):r&&!s?r:!r&&s?s:""},$e=function(n){var r=Object(ce.h)(),s=r.ws_id,d=n.refresh,u=Object(_.useState)(null),h=Object(w.a)(u,2),f=h[0],v=h[1],t=e.a.useState([]),E=Object(w.a)(t,2),y=E[0],o=E[1],c=e.a.useState(!1),l=Object(w.a)(c,2),x=l[0],b=l[1],i=function(){var M=Object(W.a)(g.a.mark(function j(){var F,D,ae;return g.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(f){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,Object(I.x)({id:s,owner:f});case 4:if(F=C.sent,D=F.code,ae=F.msg,D===200){C.next=10;break}return Object(ee.r)(D,ae),C.abrupt("return");case 10:d&&d();case 11:case"end":return C.stop()}},j)}));return function(){return M.apply(this,arguments)}}();e.a.useEffect(function(){return L(),function(){o([]),v(null)}},[]);var L=function(){var M=Object(W.a)(g.a.mark(function j(){var F,D,ae,re,C,z=arguments;return g.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return F=z.length>0&&z[0]!==void 0?z[0]:"",o([]),b(!0),m.next=5,Object(I.u)({ws_id:s,keyword:F});case 5:if(D=m.sent,ae=D.data,re=D.code,C=D.msg,re===200){m.next=13;break}return b(!1),Object(ee.r)(re,C),m.abrupt("return");case 13:b(!1),o(ae.map(function(B){return{value:B.user_info.id,label:Le(B.user_info)}}));case 15:case"end":return m.stop()}},j)}));return function(){return M.apply(this,arguments)}}();return e.a.createElement(k.a.Content,{style:{width:400}},e.a.createElement(p.a,{style:{marginTop:4,marginBottom:24},className:H.a.full_width},e.a.createElement(De.a,{message:"Workspace\u6743\u9650\u8F6C\u79FB\uFF0C\u5C06\u7A7A\u95F4\u6240\u6709\u6743\u9650\u8F6C\u4EA4\u7ED9\u6307\u5B9A\u6210\u5458",type:"warning",showIcon:!0,style:{width:"100%",height:32}})),e.a.createElement(p.a,{className:H.a.full_width},e.a.createElement(q.a.Text,{strong:!0},"\u7528\u6237")),e.a.createElement(p.a,{style:{marginTop:6},className:H.a.full_width},e.a.createElement(Oe.a,{style:{width:"100%"},onChange:function(j){return v(j)},value:f,showSearch:!0,onSearch:O.a.debounce(L,500),placeholder:"\u8F93\u5165\u82B1\u540D\u3001\u59D3\u540D",notFoundContent:x?e.a.createElement(be.a,{size:"small"}):null,filterOption:!1,options:y})),e.a.createElement(de.a,{style:{marginTop:24,marginBottom:10,width:"calc(100% + 48px)",transform:"translateX(-24px)"}}),e.a.createElement(p.a,{justify:"end",className:H.a.full_width},e.a.createElement(G.b,null,e.a.createElement(U.a,{onClick:n.handleCancel},"\u53D6\u6D88"),e.a.createElement(U.a,{type:"primary",onClick:function(){return i()}},"\u786E\u5B9A"))))},Ue=function(n){var r=Object(ce.h)(),s=r.ws_id,d=n.handleCancel,u=function(){var h=Object(W.a)(g.a.mark(function f(){var v,t,E,y,o=arguments;return g.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return v=o.length>0&&o[0]!==void 0?o[0]:"",l.next=3,Object(I.h)({id:s,reason:v});case 3:if(t=l.sent,E=t.code,y=t.msg,E===200){l.next=9;break}return Object(ee.r)(E,y),l.abrupt("return");case 9:S.e.push("/"),d&&d();case 11:case"end":return l.stop()}},f)}));return function(){return h.apply(this,arguments)}}();return e.a.createElement(k.a.Content,{style:{width:400}},e.a.createElement(p.a,null,e.a.createElement(q.a.Text,{style:{color:"(0,0,0,0.65)",lineHeight:"22px"}},"\u4E00\u65E6\u4F60\u6CE8\u9500Workspace\uFF0C\u91CC\u9762\u6240\u6709Job\u7ED3\u679C\u3001\u6D4B\u8BD5\u8BA1\u5212\u3001\u6D4B\u8BD5\u5206\u6790\u3001\u6D4B\u8BD5\u62A5\u544A\u4E2D\u6240\u6709\u5185\u5BB9\u4EE5\u53CA\u6240\u5173\u8054\u7684\u6240\u6709\u6587\u6863\u90FD\u5C06\u4F1A\u88AB\u6C38\u4E45\u5220\u9664\u3002\u8FD9\u662F\u4E00\u4E2A\u4E0D\u53EF\u6062\u590D\u7684\u64CD\u4F5C\uFF0C\u8BF7\u8C28\u614E\u5BF9\u5F85\uFF01")),e.a.createElement(de.a,{style:{marginTop:24,marginBottom:10,width:"calc(100% + 48px)",transform:"translateX(-24px)"}}),e.a.createElement(p.a,{justify:"end",className:H.a.full_width},e.a.createElement(G.b,null,e.a.createElement(U.a,{onClick:d},"\u53D6\u6D88"),e.a.createElement(U.a,{type:"primary",onClick:function(){return u&&u()}},"\u6CE8\u9500"))))},Re=a("TQtp"),Ke=a("Tqne"),N=a.n(Ke),qe=a("Q9mQ"),Ie=a("diRs"),ze=function(n,r){var s=n.refresh,d=e.a.useState(!1),u=Object(w.a)(d,2),h=u[0],f=u[1],v=function(){s(),f(!1)};return e.a.createElement(Ie.a,{content:e.a.createElement($e,{handleCancel:function(){return f(!1)},refresh:v}),trigger:"click",title:"\u8F6C\u4EA4\u6240\u6709\u6743",onVisibleChange:function(E){return f(E)},visible:h,overlayClassName:N.a.transferOwnerWs},e.a.createElement(U.a,{onClick:function(){return f(!0)}},"\u6240\u6709\u6743\u8F6C\u4EA4"))},Ve=e.a.forwardRef(ze),Je=function(){var n=e.a.useState(!1),r=Object(w.a)(n,2),s=r[0],d=r[1];return e.a.createElement(Ie.a,{content:e.a.createElement(Ue,{handleCancel:function(){return d(!1)}}),visible:s,onVisibleChange:function(h){return d(h)},overlayClassName:N.a.cancleWs,trigger:"click",title:"\u63D0\u793A"},e.a.createElement(U.a,{onClick:function(){return d(!0)}},"\u6CE8\u9500"))},ke=Je,ea=a("DZo9"),Ge=a("8z0m"),He=a("skNQ"),Qe=a("sGWT"),Ye=function(n){var r=n.refresh,s=n.intro,d=Object(S.i)(),u=Object(ce.h)(),h=u.ws_id,f=e.a.useRef(null),v={name:"file",action:"/api/sys/upload/",beforeUpload:function(E){var y=new FileReader;return y.onload=function(o){var c;(c=f.current)===null||c===void 0||c.show(o.target.result)},y.readAsDataURL(E),!1},onChange:function(){var t=Object(W.a)(g.a.mark(function y(o){var c,l,x;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o.file.status!=="done"){i.next=9;break}return i.next=3,Object(I.x)({id:h,logo:o.file.response.path});case 3:c=i.sent,l=c.code,x=c.msg,l===200?(r(),Z.default.success("\u66F4\u65B0\u6210\u529F\uFF01")):Object(ee.r)(l,x),i.next=10;break;case 9:o.file.status==="error"&&Z.default.error("".concat(o.file.name," file upload failed."));case 10:case"end":return i.stop()}},y)}));function E(y){return t.apply(this,arguments)}return E}()};return e.a.createElement(e.a.Fragment,null,e.a.createElement(A.a.Item,{label:""},e.a.createElement(p.a,{style:{width:"100%",marginBottom:0}},e.a.createElement(He.a,Object(R.a)({size:"large"},s)),e.a.createElement("div",{style:{width:"calc(100% - 96px - 20px)",marginLeft:16},className:N.a.first_part},e.a.createElement(p.a,{style:{marginBottom:8}},e.a.createElement(S.a,{accessible:d.WsBtnPermission()},e.a.createElement(Ge.a,v,e.a.createElement(U.a,null,"\u66F4\u65B0\u5C01\u9762")))),e.a.createElement(p.a,{style:{marginBottom:4}},e.a.createElement(q.a.Text,null,"\u652F\u6301\u56FE\u7247\u7C7B\u578B\uFF1Ajpg\u3001png\uFF0C\u5C01\u9762\u5927\u5C0F\uFF1A96*96\u3002")),e.a.createElement(p.a,null,e.a.createElement(q.a.Text,null))))),e.a.createElement(Qe.a,{ref:f,onOk:function(){var t=Object(W.a)(g.a.mark(function E(y){var o,c,l;return g.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Object(I.x)({id:h,logo:y.path});case 2:o=b.sent,c=o.code,l=o.msg,c===200?(r(),Z.default.success("\u66F4\u65B0\u6210\u529F\uFF01")):Object(ee.r)(c,l);case 6:case"end":return b.stop()}},E)}));return function(E){return t.apply(this,arguments)}}()}))},Xe=Ye,fe=q.a.Text,Ze=function(){var n=Object(ce.h)(),r=n.ws_id,s=Object(S.i)(),d=Object(S.k)("@@initialState"),u=d.initialState,h=d.setInitialState,f=Object(_.useState)(),v=Object(w.a)(f,2),t=v[0],E=v[1],y=Object(_.useState)(),o=Object(w.a)(y,2),c=o[0],l=o[1],x=Object(_.useState)({regName:!1,regShowName:!1,regDescription:!1}),b=Object(w.a)(x,2),i=b[0],L=b[1],M=function(){var V=Object(W.a)(g.a.mark(function m(){var B,T,Y,te;return g.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Object(I.s)(r);case 2:B=P.sent,T=B.data,Y=B.code,te=B.msg,Y===200?(E(O.a.cloneDeep(T)),F(T),l(T)):Object(ee.r)(Y,te);case 7:case"end":return P.stop()}},m)}));return function(){return V.apply(this,arguments)}}(),j=function(){var V=Object(W.a)(g.a.mark(function m(){return g.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,M();case 2:ae();case 3:case"end":return T.stop()}},m)}));return function(){return V.apply(this,arguments)}}();Object(_.useEffect)(function(){M()},[location.pathname]);var F=function(m){var B=m.show_name,T=m.name,Y=m.description,te=!/^[A-Za-z0-9\u4e00-\u9fa5\._-]{1,30}$/g.test(B),se=!/^[a-z0-9_-]{1,30}$/.test(T),P=!/^([\w\W]){1,200}$/.test(Y);L({regShowName:te,regName:se,regDescription:P})},D={labelCol:{span:4},wrapperCol:{span:20}},ae=function(){h(Object(K.a)(Object(K.a)({},u),{},{refreshWorkspaceList:!(u!=null&&u.refreshWorkspaceList)}))},re=function(){var V=Object(W.a)(g.a.mark(function m(){var B,T,Y,te,se,P,Ne;return g.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return B=t.show_name,T=t.description,Y=t.name,te=t.is_public,me.next=3,Object(I.x)({show_name:B,name:Y,is_public:te,description:T,id:r});case 3:se=me.sent,P=se.code,Ne=se.msg,P===200?(j(),Z.default.success("\u6210\u529F\u4FDD\u5B58")):Object(ee.r)(P,Ne);case 7:case"end":return me.stop()}},m)}));return function(){return V.apply(this,arguments)}}(),C=function(m){E(Object(K.a)(Object(K.a)({},t),m))},z=i.regShowName||i.regShowName||i.regDescription;return z=z||O.a.get(t,"show_name")===O.a.get(c,"show_name")&&O.a.get(t,"name")===O.a.get(c,"name")&&O.a.get(t,"description")===O.a.get(c,"description")&&O.a.get(t,"is_public")===O.a.get(c,"is_public"),e.a.createElement(k.a.Content,{style:{background:"#f5f5f5",overflowY:"auto"}},e.a.createElement(p.a,{className:N.a.row_box},e.a.createElement(A.a,Object(R.a)({},D,{layout:"vertical",style:{width:"100%"}}),e.a.createElement(Re.a,{text:"\u5C01\u9762\u4FE1\u606F"}),e.a.createElement(Xe,{intro:t,refresh:j}),e.a.createElement(A.a.Item,{label:"\u663E\u793A\u540D ",name:"show_name",validateStatus:i.regShowName?"error":void 0,help:i.regShowName?"\u957F\u5EA6\u6700\u591A30\u4F4D,\u4EC5\u5141\u8BB8\u5305\u542B\u6C49\u5B57\u3001\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\u3001\u4E2D\u5212\u7EBF\u3001\u70B9":void 0},e.a.createElement(Be,{keyName:"show_name",name:t==null?void 0:t.show_name,changeText:C,errorReg:i,inputType:"show_name",setErrorReg:L})),e.a.createElement(A.a.Item,{label:"\u540D\u79F0 ",name:"name",validateStatus:i.regName?"error":void 0,help:i.regName?"\u53EA\u5141\u8BB8\u82F1\u6587\u5C0F\u5199\u3001\u4E0B\u5212\u7EBF\u548C\u6570\u5B57\uFF0C\u6700\u591A30\u4E2A\u5B57\u7B26":void 0},e.a.createElement(Be,{keyName:"show_name",name:t==null?void 0:t.name,changeText:C,disabled:!0,inputType:"name",errorReg:i,setErrorReg:L})),e.a.createElement(A.a.Item,{validateStatus:i.regDescription?"error":void 0,help:i.regDescription?"\u957F\u5EA6\u6700\u591A200\u4F4D":void 0,label:"\u4ECB\u7ECD ",name:"description"},e.a.createElement(Be,{type:"textarea",size:"large",keyName:"description",name:t==null?void 0:t.description,changeText:C,inputType:"description",errorReg:i,setErrorReg:L})),e.a.createElement(A.a.Item,{label:"\u662F\u5426\u516C\u5F00 ",style:{marginBottom:16},name:"is_public"},e.a.createElement(xe,{title:t==null?void 0:t.is_public,keyName:"is_public",disabled:O.a.get(t,"is_common"),changeText:C})),e.a.createElement(S.a,{accessible:s.WsBtnPermission()},e.a.createElement(U.a,{style:{marginBottom:16},disabled:z,onClick:z?function(){}:re,type:"primary"},"\u786E\u5B9A")))),e.a.createElement(p.a,{className:N.a.row_box},e.a.createElement(A.a,Object(R.a)({},D,{style:{width:"100%"}}),e.a.createElement(Re.a,{text:"Workspace\u4FE1\u606F"}),e.a.createElement("div",{className:N.a.second_part},e.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u6240\u6709\u8005\uFF1A"),e.a.createElement(p.a,{style:{width:"calc(100% - 70px)"}},e.a.createElement(X.a,{span:24},e.a.createElement(G.b,null,e.a.createElement(pe.a,{size:25,src:t==null?void 0:t.owner_avatar}),e.a.createElement(fe,null,t==null?void 0:t.owner_name))),e.a.createElement(X.a,{span:24},e.a.createElement(fe,{style:{color:"rgba(0,0,0,0.5)"}},t==null?void 0:t.proposer_dep)))),e.a.createElement("div",{className:N.a.second_part},e.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u521B\u5EFA\u65F6\u95F4\uFF1A"),e.a.createElement(fe,null,t==null?void 0:t.gmt_created)),e.a.createElement("div",{className:N.a.second_part,style:{marginBottom:16}},e.a.createElement("span",{style:{width:70,textAlign:"right"}},"\u4EBA\u6570\uFF1A"),e.a.createElement(fe,null,t==null?void 0:t.member_count)))),e.a.createElement(S.a,{accessible:s.WsTransfer()},e.a.createElement(p.a,{className:N.a.row_box},e.a.createElement(A.a,Object(R.a)({},D,{colon:!1,layout:"vertical",style:{width:"100%"},className:N.a.three_part}),e.a.createElement(Re.a,{text:"\u66F4\u591A\u64CD\u4F5C"}),e.a.createElement(A.a.Item,null,e.a.createElement(G.b,null,e.a.createElement(Ve,{refresh:j}),!O.a.get(t,"is_common")&&e.a.createElement(ke,null)))))))},aa=$.default=Ze},sGWT:function(J,$,a){"use strict";var ve=a("2qtc"),k=a("kLXV"),Ee=a("14J3"),X=a("BMrR"),le=a("9og8"),G=a("tJVT"),ge=a("qqnG"),pe=a("WmNS"),he=a.n(pe),p=a("q1tI"),R=a.n(p),we=a("YQfW"),U=a.n(we),_e=a("wyMu"),A=a.n(_e),Ae=a("9kvl"),Z=a("vOnD"),K,W,w=Z.a.div(K||(K=Object(ge.a)([`
    width: calc(100% - 200px - 20px);
    height: 100px;
    overflow: hidden;
    margin-left: 20px;
`]))),We=Object(Z.a)(A.a)(W||(W=Object(ge.a)([`
    & {
        height: 200px;
        width: 200px;  
    }
`]))),q=function(g,_){var e=g.onCancel,Pe=g.onOk,de=R.a.useState(""),Ce=Object(G.a)(de,2),Oe=Ce[0],ye=Ce[1];R.a.useImperativeHandle(_,function(){return{show:function(ie){Te(!0),ye(ie)}}});var be=R.a.useState(!1),je=Object(G.a)(be,2),De=je[0],Te=je[1],ue=Object(p.useRef)(null),Se=function(){Te(!1),ye(""),e&&e()},oe=function(){ue.current.getCroppedCanvas().toBlob(function(){var ie=Object(le.a)(he.a.mark(function H(Fe){var O,I;return he.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return O=new FormData,O.append("file",Fe),S.next=4,Object(Ae.g)("/api/sys/upload/",{method:"post",data:O});case 4:I=S.sent,Pe(I),Se();case 7:case"end":return S.stop()}},H)}));return function(H){return ie.apply(this,arguments)}}())};return R.a.createElement(k.a,{visible:De,onCancel:Se,onOk:oe,title:"\u56FE\u7247\u88C1\u5207",maskClosable:!1},R.a.createElement(X.a,null,R.a.createElement(We,{ref:ue,src:Oe,aspectRatio:1,guides:!0,preview:".preview"}),R.a.createElement(w,{className:"preview"})))};$.a=Object(p.forwardRef)(q)}}]);
