(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[5443,2485],{86252:function(Ee){Ee.exports={test_result_name:"test_result_name___1RBzL",test_summary_item:"test_summary_item___3-Yoh",test_summary_item_right:"test_summary_item_right___2UQVi",test_summary_item_right_unellipsis:"test_summary_item_right_unellipsis___2cRIc",test_summary_job:"test_summary_job___2a2-P",test_summary_row:"test_summary_row___1zXMg",detail_collection:"detail_collection___1_th-",offline_flag:"offline_flag___3BdpH",ellips_column_refclass:"ellips_column_refclass___30H4W",tag_popover_style:"tag_popover_style___1x8MG",table_question_tooltip:"table_question_tooltip___1Ur7e",join_baseline:"join_baseline___Jgafh",select_baseline:"select_baseline___2nHPA"}},88429:function(Ee){Ee.exports={job_test_form:"job_test_form___1bVwL"}},75073:function(Ee,je,t){"use strict";t.d(je,{mQ:function(){return _e},gM:function(){return F},nU:function(){return C}});var w=t(40204),P=t(10724),ue=t(41428),O=t(97939),h,be,Te,V,_e=(0,O.ZP)(P.Z)(h||(h=(0,ue.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .common_pagination { padding-bottom:0 ;}
`]))),F=(0,O.ZP)(_e)(be||(be=(0,ue.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`]))),De=(0,O.ZP)(P.Z)(Te||(Te=(0,ue.Z)([`
    border:none !important;
    .ant-card-head {
        min-height: 48px;
        padding: 0 32px;
        .ant-tabs-tab { min-height : 48px; }
        .ant-card-head-title{
            padding: 0;
        }
        .ant-card-extra {
            padding: 0;
        }
    }
    .ant-card-body{
        padding: 24px 24px 24px 0px;
    }
    .common_pagination { padding-bottom:0 ;}
`]))),C=(0,O.ZP)(De)(V||(V=(0,ue.Z)([`
    border:none!important;
    .ant-card-head .ant-card-head-wrapper { min-height:48px; }
    .ant-card-head-title { font-weight: normal; font-size:14px;}
    .commom_pagination { margin-bottom:0 ;}
    .ant-tabs-nav { margin : 0 ;}
    .ant-spin-nested-loading > div > .ant-spin {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
`])))},78358:function(Ee,je,t){"use strict";t.d(je,{gN:function(){return Z},tZ:function(){return r},yQ:function(){return M},Pc:function(){return j},cQ:function(){return W},YV:function(){return z},Nq:function(){return Ze},JQ:function(){return fe},iK:function(){return B},fD:function(){return A},QN:function(){return J}});var w=t(57359),P=t(34423),ue=t(13059),O=t(53676),h=t(20418),be=t(51937),Te=t(34516),V=t(41428),_e=t(70772),F=t(6701),De=t(14320),C=t(53479),Ke=t(79625),D=t(96584),K=t(89963),se=t(70077),d=t(22374),S=t(86252),u=t.n(S),s=t(93329),Me=t(74066),me=t(24812),$=t(22812),Fe=t(97939),ze=t(39935),Ie=t(526),ye=t(6130),a=t(52454),ve,Pe=new Map([["success","#81BF84"],["pass","#81BF84"],["running","#649FF6"],["fail","#C84C5A"]]),Z=function(n){var i=(0,me.UO)(),l=i.ws_id;return(0,a.jsxs)(se.Z,{style:{marginBottom:n.bottomHeight},children:[(0,a.jsx)(se.Z.Item,{children:(0,a.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return $.m8.push("/ws/".concat(l,"/test_result"))},children:(0,a.jsx)($._H,{id:"ws.result.details.test.result"})})}),(0,a.jsx)(se.Z.Item,{children:(0,a.jsx)($._H,{id:"ws.result.details.result.details"})})]})},r=function(n){return n==="success"||n===!0?(0,a.jsx)("span",{style:{fontWeight:500,color:"#81BF84"},children:"Success"}):n==="fail"||n===!1?(0,a.jsx)("span",{style:{fontWeight:500,color:"#C84C5A"},children:"Fail"}):n==="running"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#649FF6"},children:"Running"}):n==="stop"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Stop"}):n==="pending"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Pending"}):n==="skip"?(0,a.jsx)("span",{style:{fontWeight:500,color:"#1D1D1D"},children:"Skip"}):(0,a.jsx)(a.Fragment,{})},M=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(l){return l?(0,a.jsx)(ye.K,{ellipsis:{tooltip:!0},children:l}):n}}},j=function(n){var i=n.title,l=n.width,p=l===void 0?"100%":l,L=n.onEdit,f=n.access,m=(0,d.useRef)(),_=f?(0,a.jsx)(s.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:L}):(0,a.jsx)(s.Z,{style:{marginLeft:6,cursor:"pointer"},onClick:function(){return(0,ze.WR)()}});return(0,a.jsx)("div",{ref:m,style:{width:p},children:(0,a.jsxs)(C.Z,{style:{width:p},justify:"start",align:"middle",children:[(0,a.jsx)(D.Z,{placement:"topLeft",title:i,children:(0,a.jsx)("span",{style:{maxWidth:54,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i||"-"})}),_]})})},e=function(n){return Pe.get(n)||"#D9D9D9"},N=function(n){var i=n.text,l=(0,$.YB)(),p=(0,Ie.oM)(l.formatMessage({id:"request.copy.success"}));return(0,a.jsx)("span",{style:{cursor:"pointer",color:"#1890ff"},onClick:function(){return p(i)},children:l.formatMessage({id:"operation.copy",defaultMessage:"\u590D\u5236"})})},W=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-";return{ellipsis:{showTitle:!1},render:function(l){return l?(0,a.jsx)(D.Z,{overlayClassName:u().tootip_overflow,placement:"topLeft",title:(0,a.jsxs)(C.Z,{children:[(0,a.jsx)(F.Z,{span:24,children:l}),(0,a.jsx)(F.Z,{span:24,children:(0,a.jsx)(C.Z,{justify:"center",children:(0,a.jsx)(N,{text:l})})})]}),children:l}):n}}},z=function(n){return n==="decline"?"#C84C5A":n==="normal"?"#000000":n==="increase"?"#81BF84":""},Ze=function(n,i,l){return n==="decline"?(0,a.jsx)("span",{style:{color:"#C84C5A"},children:l({id:"ws.result.details.".concat(n)})}):n==="normal"?(0,a.jsx)("span",{style:{color:"#000000"},children:l({id:"ws.result.details.".concat(n)})}):n==="increase"?(0,a.jsx)("span",{style:{color:"#81BF84"},children:l({id:"ws.result.details.".concat(n)})}):i||"-"},re=(0,Fe.ZP)(Te.Z)(ve||(ve=(0,V.Z)([`
    font-weight: 500;
    width: 72px;
    text-align: center;
    `,`
    text-transform: capitalize;
`])),function(o){var n=o.no_margin;return n?"margin-right: 0;":""}),pe=function(n){return(0,a.jsx)(re,(0,h.Z)({},n))},I=function(n){var i=(0,$.YB)(),l=i.formatMessage;return(0,a.jsx)(D.Z,{title:l({id:"ws.result.details.job_state"}),placement:"bottom",children:(0,a.jsx)(re,(0,h.Z)({},n))})},Y=function(n){var i=n.title;return(0,a.jsx)(O.Z,{title:i,placement:"right",trigger:"hover",overlayClassName:u().tag_popover_style,children:(0,a.jsx)(Me.Z,{style:{color:"rgba(0, 0, 0, 0.65)",verticalAlign:"middle"}})})},U=function(n){var i=n.state;return(0,a.jsx)(pe,(0,h.Z)((0,h.Z)({},n),{},{color:e(i),style:!Pe.get(i)&&{color:"#1d1d1d"},children:i==="success"?"complete":i}))},E=function(n){var i=n.state;return(0,a.jsx)(I,(0,h.Z)((0,h.Z)({},n),{},{color:e(i),style:!Pe.get(i)&&{color:"#1d1d1d"},children:i==="success"?"complete":i}))},fe=function(n){var i=(0,$.YB)(),l=i.formatMessage,p=n.state,L=n.run_state,f=L===void 0?"":L,m=n.state_desc,_=(0,me.UO)(),b=_.ws_id;return p==="running"?m?(0,a.jsxs)(P.Z,{size:0,children:[(0,a.jsx)(U,(0,h.Z)((0,h.Z)({},n),{},{children:p})),(0,a.jsx)(Y,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:m.replace(/(\d+)/g,'<a href="/ws/'.concat(b,'/test_result/$1" target="_blank">$1</a>'))}})})]}):f?(0,a.jsxs)(P.Z,{size:0,children:[(0,a.jsx)(U,(0,h.Z)((0,h.Z)({},n),{},{children:p})),(0,a.jsx)(Y,{title:l({id:"ws.result.details.not.assigned.server"})})]}):(0,a.jsxs)(P.Z,{size:0,children:[(0,a.jsx)(U,(0,h.Z)((0,h.Z)({},n),{},{children:p})),(0,a.jsx)(Y,{title:l({id:"ws.result.details.running,please.wait"})})]}):p==="pending"&&m?(0,a.jsxs)(P.Z,{size:0,children:[(0,a.jsx)(U,(0,h.Z)((0,h.Z)({},n),{},{children:p})),(0,a.jsx)(Y,{title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:m.replace(/(\d+)/g,'<a href="/ws/'.concat(b,'/test_result/$1" target="_blank">$1</a>'))}})})]}):(0,a.jsx)(U,(0,h.Z)({},n))},B=function(n){return(0,a.jsx)(E,(0,h.Z)((0,h.Z)({},n),{},{no_margin:1}))},A=function(n){var i=n.title,l=n.desc,p=n.placement,L=p===void 0?"bottom":p;return(0,a.jsxs)(P.Z,{children:[(0,a.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.85)"},children:i}),(0,a.jsx)(D.Z,{overlayClassName:u().table_question_tooltip,placement:L,arrowPointAtCenter:!0,title:l,color:"#fff",children:(0,a.jsx)(Me.Z,{style:{color:"rgba(0, 0, 0, 0.65)"}})})]})},J=function(n){var i=n.title,l=n.test_value,p=n.value_list,L=n.cv_value,f=n.max_value,m=n.min_value,_=n.metric,b=n.result,T=(0,$.YB)(),he=T.formatMessage,G=(0,Ie.oM)(he({id:"request.copy.success"})),R=function(Q){return Q?new Number(Q).toFixed(2):null},k=R(f),ie=R(m),q=L,oe=R(l),le=p.map(function(te){return R(te)}),ge="".concat(_," ").concat(i,`:
Avg: `).concat(oe,`
CV:  `).concat(q);ge+=k?`
Max: `.concat(k):"",ge+=ie?`
Min: `.concat(ie):"",ge+=le.length?`
Test Record
`:"",ge+=le.reduce(function(te,Q,Oe){return te.concat("(".concat(Oe+1,") ").concat(Q,`
`))},"");var Ce="".concat(oe,"\xB1").concat(q),ee=function(){return b==="decline"?(0,a.jsx)("span",{className:u().result_popover_span,style:{color:"#C84C5A"},children:Ce}):b==="increase"?(0,a.jsx)("span",{className:u().result_popover_span,style:{color:"#81BF84"},children:Ce}):(0,a.jsx)("span",{className:u().result_popover_span,style:{color:"rgba(0, 0, 0, 0.65)"},children:Ce})};return(0,a.jsx)(O.Z,{overlayClassName:u().metric_list_copy,title:(0,a.jsxs)(C.Z,{justify:"space-between",children:[(0,a.jsx)("b",{children:i}),(0,a.jsx)("span",{onClick:function(){return G(ge)},style:{color:"#1890FF",cursor:"pointer",marginLeft:"8px"},children:(0,a.jsx)($._H,{id:"operation.copy"})})]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("b",{children:"Avg\uFF1A"}),(0,a.jsx)("span",{children:oe})]}),(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("b",{children:"CV\uFF1A"}),(0,a.jsx)("span",{children:q})]}),(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("b",{children:"Max\uFF1A"}),(0,a.jsx)("span",{children:k})]}),(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("b",{children:"Min\uFF1A"}),(0,a.jsx)("span",{children:ie})]}),le.length>0&&(0,a.jsx)(C.Z,{style:{marginTop:16},children:(0,a.jsx)("b",{children:"Test Record"})}),le.map(function(te,Q){return(0,a.jsx)(C.Z,{children:"(".concat(Q+1,")").concat(te)},Q)})]}),children:ee()})}},16625:function(Ee,je,t){"use strict";t.r(je),t.d(je,{default:function(){return Y}});var w=t(67515),P=t(41083),ue=t(46721),O=t(94867),h=t(67448),be=t(47548),Te=t(57359),V=t(34423),_e=t(90846),F=t(56511),De=t(31650),C=t(25100),Ke=t(81138),D=t(96146),K=t(35832),se=t(32326),d=t(20418),S=t(39190),u=t(22374),s=t(22812),Me=t(24812),me=t(32237),$=t(46601),Fe=t(88018),ze=t(58414),Ie=t(88966),ye=t(11048),a=t(20693),ve=t(3278),Pe=t(65790),Z=t(17187),r=t(39935),M=t(88429),j=t.n(M),e=t(52454),N=(0,u.forwardRef)(function(U,E){var fe=U.onOk,B=(0,s.YB)(),A=B.formatMessage,J=(0,u.useState)(!1),o=(0,S.Z)(J,2),n=o[0],i=o[1],l=(0,u.useState)(!1),p=(0,S.Z)(l,2),L=p[0],f=p[1],m=(0,u.useState)(""),_=(0,S.Z)(m,2),b=_[0],T=_[1],he=(0,u.useState)(""),G=(0,S.Z)(he,2),R=G[0],k=G[1],ie=(0,u.useState)({}),q=(0,S.Z)(ie,2),oe=q[0],le=q[1],ge=Z.Z.useForm(),Ce=(0,S.Z)(ge,1),ee=Ce[0],te=function(){return new Array(4).fill("").reduce(function(X){return X.concat(String.fromCharCode(97+Math.ceil(Math.random()*25)))},"")};(0,u.useImperativeHandle)(E,function(){return{show:function(X){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(X&&k(X),X==="copy"){T(H.name);var Se="".concat(H.name,"-copy-").concat(te());console.log(Se),ee.setFieldsValue({name:Se})}else ee.setFieldsValue({name:H.name,description:H.description,enable:H.enable});i(!0),le(H)}}});var Q=function(){i(!1),ee.resetFields()},Oe=function(X,H){H===200?(fe(),i(!1),ee.resetFields(),D.default.success(A({id:"operation.success"}))):(0,r.EV)(H,X),f(!1)},Be=function(){f(!0),ee.validateFields().then(function(){var X=(0,se.Z)((0,K.Z)().mark(function H(Se){var Ae,We,Le,y,de,$e;return(0,K.Z)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(console.log(Se,oe),R!=="copy"){ce.next=10;break}return ce.next=4,(0,me.cg)((0,d.Z)((0,d.Z)({},Se),{},{template_id:oe.id}));case 4:Ae=ce.sent,We=Ae.msg,Le=Ae.code,Oe(We,Le),ce.next=16;break;case 10:return ce.next=12,(0,me.iM)((0,d.Z)((0,d.Z)({},Se),{},{template_id:oe.id,update_item:"template"}));case 12:y=ce.sent,de=y.msg,$e=y.code,Oe(de,$e);case 16:case"end":return ce.stop()}},H)}));return function(H){return X.apply(this,arguments)}}()).catch(function(X){console.log(X),f(!1)})};return(0,e.jsxs)(ze.Z,{title:(0,e.jsx)(s._H,{id:"job.templates.".concat(R)}),maskClosable:!1,keyboard:!1,visible:n,width:"380",onClose:Q,bodyStyle:{paddingTop:12},footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(O.Z,{onClick:Q,children:(0,e.jsx)(s._H,{id:"operation.cancel"})}),(0,e.jsx)(O.Z,{type:"primary",disabled:L,onClick:Be,children:~R.indexOf("edit")?(0,e.jsx)(s._H,{id:"operation.update"}):(0,e.jsx)(s._H,{id:"operation.ok"})})]})}),children:[R==="copy"&&(0,e.jsxs)(V.Z,{style:{paddingBottom:12},children:[(0,e.jsx)("div",{style:{color:"rgba(0,0,0,.8)",fontWeight:600},children:(0,e.jsx)(s._H,{id:"job.templates.original.name"})}),(0,e.jsx)("div",{style:{color:" rgba(0,0,0,0.65)"},children:b})]}),(0,e.jsxs)(Z.Z,{layout:"vertical",form:ee,className:j().job_test_form,children:[(0,e.jsx)(Z.Z.Item,{label:R==="edit"?(0,e.jsx)(s._H,{id:"job.templates.template.name"}):(0,e.jsx)(s._H,{id:"job.templates.new.template.name"}),name:"name",rules:[{required:!0,message:A({id:"job.templates.template.name.message"}),pattern:/^[A-Za-z0-9\._-]{1,64}$/g}],children:(0,e.jsx)(ve.Z,{autoComplete:"off",placeholder:A({id:"job.templates.template.name.message"})})}),(0,e.jsx)(Z.Z.Item,{label:(0,e.jsx)(s._H,{id:"job.templates.templates.desc"}),name:"description",children:(0,e.jsx)(ve.Z.TextArea,{rows:3,placeholder:A({id:"job.templates.templates.desc.placeholder"})})}),(0,e.jsx)(Z.Z.Item,{label:(0,e.jsx)(s._H,{id:"job.templates.enable"}),name:"enable",initialValue:!0,children:(0,e.jsxs)(ye.ZP.Group,{children:[(0,e.jsx)(ye.ZP,{value:!0,children:(0,e.jsx)(s._H,{id:"operation.yes"})}),(0,e.jsx)(ye.ZP,{value:!1,children:(0,e.jsx)(s._H,{id:"operation.no"})})]})})]})]})}),W=t(76742),z=t(93299),Ze=t(75073),re=t(97207),pe=t(79390),I=t(78358),Y=function(){var U=(0,s.YB)(),E=U.formatMessage,fe=(0,Me.UO)(),B=fe.ws_id,A=(0,s.md)(),J={page_num:1,page_size:10,ws_id:B},o=(0,s.tT)("@@initialState"),n=o.initialState,i=o.setInitialState,l=(0,u.useState)(!1),p=(0,S.Z)(l,2),L=p[0],f=p[1],m=(0,u.useState)(!1),_=(0,S.Z)(m,2),b=_[0],T=_[1],he=(0,u.useState)({data:[],total:0}),G=(0,S.Z)(he,2),R=G[0],k=G[1],ie=(0,u.useState)(!1),q=(0,S.Z)(ie,2),oe=q[0],le=q[1],ge=(0,u.useState)({}),Ce=(0,S.Z)(ge,2),ee=Ce[0],te=Ce[1],Q=(0,u.useRef)(),Oe=(0,Me.TH)(),Be=Oe.state,Re=(0,u.useRef)(),X=(0,u.useState)(0),H=(0,S.Z)(X,2),Se=H[0],Ae=H[1],We=(0,u.useState)(Be&&JSON.stringify(Be)!=="{}"?(0,d.Z)((0,d.Z)({},J),Be):J),Le=(0,S.Z)(We,2),y=Le[0],de=Le[1],$e=(0,r.YM)(y),Ue=function(){var g=(0,se.Z)((0,K.Z)().mark(function c(){var v,x,ne;return(0,K.Z)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return le(!0),xe.next=3,(0,me.qi)(y);case 3:v=xe.sent,x=v.code,ne=v.msg,x===200?k(v):(0,r.EV)(x,ne),le(!1);case 7:case"end":return xe.stop()}},c)}));return function(){return g.apply(this,arguments)}}(),ce=function(){Ue()};(0,u.useEffect)(function(){Ue()},[y]);var Ye=function(){var g=(0,se.Z)((0,K.Z)().mark(function c(v){var x;return(0,K.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return te(v),ae.next=3,(0,me.pi)({template_id:v.id});case 3:x=ae.sent,x.data.length>0?f(!0):T(!0);case 5:case"end":return ae.stop()}},c)}));return function(v){return g.apply(this,arguments)}}(),Qe=function(){var g=(0,se.Z)((0,K.Z)().mark(function c(){var v,x,ne,ae,xe,Xe,Ve,we;return(0,K.Z)().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:return He.next=2,(0,me.Ug)({template_id:ee.id,ws_id:B});case 2:v=He.sent,x=v.code,ne=v.msg,x===200?(ae=(0,re.cloneDeep)(y),xe=ae.page_size,Xe=ae.page_num,Ve=(0,re.get)(R,"total")%xe==1,we=Math.floor((0,re.get)(R,"total")/xe),Ve&&we&&we+1<=Xe?(ae.page_num=we,de(ae)):Ue(),i((0,d.Z)((0,d.Z)({},n),{},{refreshMenu:!(n!=null&&n.refreshMenu)})),f(!1),T(!1),D.default.success(E({id:"operation.success"}))):(0,r.EV)(x,ne);case 6:case"end":return He.stop()}},c)}));return function(){return g.apply(this,arguments)}}(),Je=function(){var g=(0,se.Z)((0,K.Z)().mark(function c(){var v;return(0,K.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,r.MR)({name:ee.name,id:ee.id});case 2:v=ne.sent,v&&window.open("/ws/".concat(B,"/refenerce/3/?pk=").concat(v));case 4:case"end":return ne.stop()}},c)}));return function(){return g.apply(this,arguments)}}(),Ge=function(c){var v=c.id,x=c.job_type;if(!x)return D.default.warning(E({id:"job.templates.delete.the.problem.template"}));s.m8.push({pathname:"/ws/".concat(B,"/test_template/").concat(v,"/preview"),state:y})},ke=function(c){Q.current.show("copy",c)},qe=[(0,d.Z)((0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.name"}),dataIndex:"name",fixed:"left",width:240},(0,z.QT)(y,de,"name")),(0,I.yQ)("-")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.description"}),width:150,dataIndex:"description"},(0,z.QT)(y,de,"description")),(0,I.yQ)("-")),(0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.enable"}),ellipsis:!0,width:80,dataIndex:"enable",render:function(c){return(0,e.jsx)(F.Z,{status:c?"success":"error",text:(0,e.jsx)(C.Z.Text,{children:c?(0,e.jsx)(s._H,{id:"job.templates.enable"}):(0,e.jsx)(s._H,{id:"job.templates.stop"})})})}},(0,z.KW)(y,de,[{name:E({id:"job.templates.enable"}),value:1},{name:E({id:"job.templates.stop"}),value:0}],"enable")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.job_type"}),dataIndex:"job_type",width:130},(0,I.yQ)("-")),(0,z.Ht)(y,de,n==null?void 0:n.jobTypeList.map(function(g){var c=g.id,v=g.name;return{name:v,value:c}}),"job_type_id")),(0,d.Z)((0,d.Z)({width:90,title:(0,e.jsx)(s._H,{id:"job.templates.creator_name"})},(0,I.yQ)("-")),{},{dataIndex:"creator_name"},(0,z.ln)(y,de,"creator")),(0,d.Z)((0,d.Z)({width:90},(0,I.yQ)("-")),{},{title:(0,e.jsx)(s._H,{id:"job.templates.update_user"}),dataIndex:"update_user"},(0,z.ln)(y,de,"update_user")),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.gmt_created"}),width:120},(0,I.yQ)("-")),{},{dataIndex:"gmt_created"}),(0,d.Z)((0,d.Z)({title:(0,e.jsx)(s._H,{id:"job.templates.gmt_modified"}),width:120},(0,I.yQ)("-")),{},{dataIndex:"gmt_modified"}),{title:(0,e.jsx)(s._H,{id:"Table.columns.operation"}),width:155,fixed:"right",key:"operation",render:function(c,v){return(0,e.jsxs)(V.Z,{children:[(0,e.jsx)("span",{onClick:function(){return Ge(c)},style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(s._H,{id:"operation.preview"})}),(0,e.jsx)(s.Nv,{accessible:A.WsMemberOperateSelf(v.creator),fallback:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,r.WR)()},children:(0,e.jsx)(s._H,{id:"operation.copy"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,r.WR)()},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,r.WR)()},children:(0,e.jsx)(s._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return ke(c)},children:(0,e.jsx)(s._H,{id:"operation.copy"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return et(c)},children:(0,e.jsx)(s._H,{id:"operation.edit"})}),(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return Ye((0,d.Z)({},v))},children:(0,e.jsx)(s._H,{id:"operation.delete"})})]})})]})}}],et=function(c){var v=c.id,x=c.job_type;if(!x)return D.default.warning(E({id:"job.templates.delete.the.problem.template"}));s.m8.push({pathname:"/ws/".concat(B,"/test_template/").concat(v,"/edit"),state:y})},Ne=function(){return Ae(Re.current.clientWidth)};return(0,u.useEffect)(function(){return Ne(),window.addEventListener("resize",Ne),function(){window.removeEventListener("resize",Ne)}},[]),(0,e.jsxs)(Ze.gM,{title:(0,e.jsx)(s._H,{id:"job.templates.list"}),children:[(0,e.jsxs)(be.Z,{spinning:oe,children:[(0,e.jsx)("div",{ref:Re,children:(0,e.jsx)(pe.sL,{name:"ws-job-template-manage",size:"small",dataSource:R.data,columns:qe,pagination:!1,refreshDeps:[y,A,n==null?void 0:n.jobTypeList,B],scroll:{x:Se}})}),(0,e.jsx)(W.Z,{pageSize:y.page_size,currentPage:y.page_num,total:R.total,onPageChange:function(c,v){return de((0,d.Z)((0,d.Z)({},y),{},{page_size:v,page_num:c}))}})]}),(0,e.jsx)(N,{ref:Q,onOk:ce}),(0,e.jsxs)(P.Z,{title:(0,e.jsx)(s._H,{id:"job.templates.delete.prompt"}),centered:!0,open:L,onCancel:function(){return f(!1)},footer:[(0,e.jsx)(O.Z,{onClick:Qe,children:(0,e.jsx)(s._H,{id:"operation.delete"})},"submit"),(0,e.jsx)(O.Z,{type:"primary",onClick:function(){return f(!1)},children:(0,e.jsx)(s._H,{id:"operation.cancel"})},"back")],width:600,maskClosable:!1,children:[(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)($.Z,{style:{marginRight:4}}),(0,e.jsx)(s._H,{id:"job.templates.delete.prompt.ps"})]}),(0,e.jsx)("div",{style:{color:"#1890FF",cursor:"pointer"},onClick:Je,children:(0,e.jsx)(s._H,{id:"job.templates.view.details"})})]}),(0,e.jsx)(P.Z,{title:(0,e.jsx)(s._H,{id:"job.templates.delete.prompt"}),centered:!0,open:b,onCancel:function(){return T(!1)},footer:[(0,e.jsx)(O.Z,{onClick:Qe,children:(0,e.jsx)(s._H,{id:"operation.delete"})},"submit"),(0,e.jsx)(O.Z,{type:"primary",onClick:function(){return T(!1)},children:(0,e.jsx)(s._H,{id:"operation.cancel"})},"back")],width:300,children:(0,e.jsxs)("div",{style:{color:"red",marginBottom:5},children:[(0,e.jsx)($.Z,{style:{marginRight:4,verticalAlign:"middle"}}),(0,e.jsx)(s._H,{id:"delete.prompt"})]})})]})}},79390:function(Ee,je,t){"use strict";t.d(je,{sL:function(){return Pe},ny:function(){return a},Fu:function(){return ve}});var w=t(20418),P=t(39190),ue=t(488),O=t(26388),h=t(11407),be=t(41604),Te=t(2605),V=t(74127),_e=t(41428),F=t(22374),De=t(48434),C=t(97939),Ke=t(99648),D=t(52454),K=["width","onResizeStart","onResize","onResizeStop","resize"],se=["columns","name","onColumnsChange"],d,S,u,s=C.ZP.div(d||(d=(0,_e.Z)([`
    position: relative;
    width: 100%;
`]))),Me=C.ZP.div.attrs(function(Z){return{style:{left:Z.left,height:Z==null?void 0:Z.height}}})(S||(S=(0,_e.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),me=(0,C.ZP)(De.Resizable)(u||(u=(0,_e.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(Z){var r=Z.resize;return r?"col-resize":"default"}),$=function(r){var M=r.width,j=r.onResizeStart,e=r.onResize,N=r.onResizeStop,W=r.resize,z=(0,ue.Z)(r,K);return(0,D.jsx)(me,(0,w.Z)((0,w.Z)({width:M||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:j,onResize:e,onResizeStop:N,resize:W?1:0},z),{},{children:(0,D.jsx)("th",(0,w.Z)({},z))}))},Fe=function(r){var M=r.columns,j=M===void 0?[]:M,e=r.name,N=r.onColumnsChange,W=(0,ue.Z)(r,se),z=F.useState(0),Ze=(0,P.Z)(z,2),re=Ze[0],pe=Ze[1],I=F.useState(0),Y=(0,P.Z)(I,2),U=Y[0],E=Y[1],fe=F.useState(!1),B=(0,P.Z)(fe,2),A=B[0],J=B[1],o=F.useRef(null),n=(0,Ke.Z)(o),i=function(m){return function(_,b){var T;if((0,V.Z)(b),!!j[m].ellipsis){var he=_.clientX,G=he-((T=o.current)===null||T===void 0?void 0:T.getBoundingClientRect().x);E(G),pe(G),J(!0)}}},l=function(){return function(m){var _,b=m.clientX,T=b-((_=o.current)===null||_===void 0?void 0:_.getBoundingClientRect().x);pe(T)}},p=function(m){return function(_,b){var T,he=b.size,G=_.clientX,R=G-((T=o.current)===null||T===void 0?void 0:T.getBoundingClientRect().x),k=(0,Te.Z)(j);if(k[m].ellipsis){var ie=he.width+=R-U,q=k[m],oe=q.dataIndex,le=q.key;ie>20&&(k[m]=(0,w.Z)((0,w.Z)({},k[m]),{},{width:ie}),e&&ve(e,oe||le,ie),N==null||N())}pe(0),E(0),J(!1)}},L=F.useMemo(function(){return j.reduce(function(f,m){return m.width?f+=m==null?void 0:m.width:f},0)},[j]);return(0,D.jsxs)(s,{ref:o,className:"resize-table-wrapper",children:[(0,D.jsx)(be.Z,(0,w.Z)((0,w.Z)({},W),{},{components:{header:{cell:$}},scroll:(r==null?void 0:r.scroll)||{x:L||(n==null?void 0:n.width)},columns:j.filter(Boolean).map(function(f,m){return(0,w.Z)((0,w.Z)({},f),{},{onHeaderCell:function(b){return{resize:!!f.ellipsis,width:b.width,onResizeStart:i(m),onResize:l(),onResizeStop:p(m)}}})})})),A&&(0,D.jsx)(Me,{height:n==null?void 0:n.height,left:re||U})]})},ze=Fe,Ie=["name","columns","refreshDeps","onColumnsChange"],ye="umi_locale",a=function(r,M){var j=localStorage.getItem(r),e=localStorage.getItem(ye)||"zh-CN";if(!!j)return JSON.parse(j)["".concat(e,"-").concat(M)]},ve=function(r,M,j){var e=localStorage.getItem(r),N=localStorage.getItem(ye)||"zh-CN",W=(0,O.Z)({},"".concat(N,"-").concat(M),j);e?localStorage.setItem(r,JSON.stringify(Object.assign(JSON.parse(e),W))):localStorage.setItem(r,JSON.stringify(W))},Pe=function(r){var M=r.name,j=r.columns,e=r.refreshDeps,N=e===void 0?[]:e,W=r.onColumnsChange,z=(0,ue.Z)(r,Ie),Ze=F.useState([]),re=(0,P.Z)(Ze,2),pe=re[0],I=re[1],Y=function(){return(j==null?void 0:j.filter(Boolean).map(function(E){var fe=E.dataIndex,B=E.key,A=E.width,J=fe||B,o=a(M,J);!o&&A&&ve(M,J,A);var n=o||A;return n&&(E.width=n),E}))||[]};return F.useEffect(function(){I(Y())},N),(0,D.jsx)(ze,(0,w.Z)({name:M,columns:pe,setColumns:I,size:"small",onColumnsChange:function(){W==null||W(),I(Y())}},z))}}}]);
