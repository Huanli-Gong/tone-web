(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[3604],{23723:function(Fe){Fe.exports={cover:"cover___vymB3"}},31480:function(Fe){Fe.exports={cover:"cover___3TUxU"}},27216:function(Fe,Pe,t){"use strict";t.r(Pe),t.d(Pe,{default:function(){return pt}});var m=t(24793),L=t(97183),B=t(18106),we=t(73272),Ve=t(57663),J=t(71577),w=t(2824),p=t(67294),Ce=t(60035),r=t(16917),fe=t(20310),Q=t(12788),$e,me=Q.ZP.div($e||($e=(0,fe.Z)([`
    width:`,`px;
    height:`,`px;
    overflow-y:scrollY;
    background:#fff;
    width:100%;
    .ant-tabs {
        background: #fff;
        .ant-tabs-content-holder{
            padding-left: 20px;
            padding-right: 20px;
        }
        button{
            margin-right: 20px;
        }
    }
`])),function(F){var x=F.width;return x},function(F){var x=F.height;return x}),Ae=t(20228),Re=t(11382),Te=t(62350),Le=t(24565),ze=t(49111),q=t(19650),Oe=t(48736),xe=t(27049),Ie=t(34792),ge=t(48086),d=t(11849),a=t(39428),s=t(3182),c=t(14965),o=t(36577),i=t(66456),ee=t(79764),Z,N,O,H=Q.ZP.span(Z||(Z=(0,fe.Z)([`
    color:#1890FF;
    cursor:pointer;
    // display:`,`;
`])),function(F){var x=F.isDefault;return x?"none":"inline-block"}),ae=`
    tr {
        &:hover {
            td.no_tourist {
                cursor: pointer;
                color : #1890FF;
                span {
                    cursor: pointer;
                    color : #1890FF;
                }
            }
        }
    }
`,oe=(0,Q.ZP)(ee.Z)(N||(N=(0,fe.Z)([`
    `,`
`])),ae),Ze=Q.ZP.div(O||(O=(0,fe.Z)([`
    `,`
`])),ae),je=t(99069),De=t(37763),ye=t.n(De),ke=t(43358),he=t(34041),Me=function(){var F=(0,s.Z)((0,a.Z)().mark(function x(v){return(0,a.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,r.WY)("/api/sys/project/",{params:v}));case 1:case"end":return S.stop()}},x)}));return function(v){return F.apply(this,arguments)}}(),ve=t(31480),Ye=t.n(ve),e=t(85893),be=function(x){var v=x.confirm,C=x.onConfirm,S=x.page_size,E=x.ws_id,D=(0,p.useState)([]),V=(0,w.Z)(D,2),y=V[0],P=V[1],R=(0,p.useState)(),z=(0,w.Z)(R,2),U=z[0],te=z[1],k=(0,p.useState)(),re=(0,w.Z)(k,2),A=re[0],ne=re[1],se=(0,p.useState)(!0),ce=(0,w.Z)(se,2),ie=ce[0],de=ce[1],pe=(0,p.useState)(!1),b=(0,w.Z)(pe,2),j=b[0],l=b[1],h=he.Z.Option,f=function(){var n=(0,s.Z)((0,a.Z)().mark(function g(_){var $,Se,Y;return(0,a.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if($=_&&_.replace(/\s*/g,""),!(U&&U==$)){M.next=3;break}return M.abrupt("return");case 3:return te($),de(!0),M.next=7,Me({name:$,page_size:S||10,page_num:1,ws_id:E});case 7:Se=M.sent,Y=Se.data,P(Array.isArray(Y)?Y:[]),de(!1);case 11:case"end":return M.stop()}},g)}));return function(_){return n.apply(this,arguments)}}(),u=function(){f()};return(0,p.useEffect)(function(){f()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Ye().cover,onClick:function(){j||v==null||v()}}),(0,e.jsx)(he.Z,{allowClear:!0,notFoundContent:ie?(0,e.jsx)(Re.Z,{size:"small"}):null,filterOption:!1,showSearch:!0,dropdownMatchSelectWidth:!0,onSearch:f,style:{width:"100%"},onChange:function(g){return ne(g)},onDeselect:u,onClear:u,showArrow:!1,autoFocus:!0,value:A,onFocus:function(){l(!0)},onBlur:function(){setTimeout(function(){l(!1)},200)},children:y.map(function(n){return(0,e.jsx)(h,{value:n.id,children:n.name},n.id)})}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(J.Z,{onClick:function(){v==null||v(),C(A)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(r._H,{id:"operation.search"})}),(0,e.jsx)(J.Z,{type:"text",onClick:function(){v==null||v(),ne(void 0),C(void 0),f()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})]})},He=be,le=function(){var F=(0,s.Z)((0,a.Z)().mark(function x(v){return(0,a.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,r.WY)("/api/report/test/report/product/version/",{params:v}));case 1:case"end":return S.stop()}},x)}));return function(v){return F.apply(this,arguments)}}(),ue=t(23723),Xe=t.n(ue),Ge=function(x){var v=x.confirm,C=x.onConfirm,S=x.ws_id,E=(0,p.useState)([]),D=(0,w.Z)(E,2),V=D[0],y=D[1],P=(0,p.useState)(),R=(0,w.Z)(P,2),z=R[0],U=R[1],te=(0,p.useState)(!0),k=(0,w.Z)(te,2),re=k[0],A=k[1],ne=(0,p.useState)(!1),se=(0,w.Z)(ne,2),ce=se[0],ie=se[1],de=he.Z.Option,pe=function(){var b=(0,s.Z)((0,a.Z)().mark(function j(){var l,h,f;return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return A(!0),n.next=3,le({ws_id:S});case 3:l=n.sent,h=l.data,f=Array.isArray(h)?h:[],f=f.filter(function(g){return g}),y(f),A(!1);case 9:case"end":return n.stop()}},j)}));return function(){return b.apply(this,arguments)}}();return(0,p.useEffect)(function(){pe()},[]),(0,e.jsxs)("div",{style:{padding:8},children:[(0,e.jsx)("div",{className:Xe().cover,onClick:function(){ce||v==null||v()}}),(0,e.jsx)(he.Z,{showSearch:!0,allowClear:!0,notFoundContent:re?(0,e.jsx)(Re.Z,{size:"small"}):null,style:{width:"100%"},onChange:function(j){return U(j)},placeholder:(0,e.jsx)(r._H,{id:"report.select.productVersion"}),optionFilterProp:"children",showArrow:!1,autoFocus:!0,value:z,onFocus:function(){ie(!0)},onBlur:function(){setTimeout(function(){ie(!1)},200)},filterOption:function(j,l){return l.children.toLowerCase().indexOf(j.toLowerCase())>=0},children:V.map(function(b){return(0,e.jsx)(de,{value:b,children:b},b)})}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(J.Z,{onClick:function(){v==null||v(),C(z)},type:"link",size:"small",style:{width:75},children:(0,e.jsx)(r._H,{id:"operation.search"})}),(0,e.jsx)(J.Z,{type:"text",onClick:function(){v==null||v(),U(void 0),C(void 0),pe()},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})]})},Ue=Ge,_e=t(86213),G=t(50310),W=t(96486),I=t.n(W),T=t(24480),X=t(78037),We=t(85450),K=t(10753),Je=o.Z.RangePicker,Ee=function(x){var v=(0,r.YB)(),C=v.formatMessage,S=(0,r.md)(),E=x.ws_id,D=(0,p.useState)({page_num:1,page_size:10,ws_id:E}),V=(0,w.Z)(D,2),y=V[0],P=V[1],R=(0,p.useState)(!1),z=(0,w.Z)(R,2),U=z[0],te=z[1],k=(0,p.useState)({}),re=(0,w.Z)(k,2),A=re[0],ne=re[1],se=(0,T.YM)(y),ce=function(){var j=(0,s.Z)((0,a.Z)().mark(function l(){var h;return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return te(!0),u.next=3,(0,G.vP)(y);case 3:h=u.sent,h.code===200?ne(h||{}):(0,T.EV)(h.code,h.msg),te(!1);case 6:case"end":return u.stop()}},l)}));return function(){return j.apply(this,arguments)}}();(0,p.useEffect)(function(){ce()},[y]);var ie=(0,T.YM)(A),de=function(){var j=(0,s.Z)((0,a.Z)().mark(function l(h){var f,u,n,g;return(0,a.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return f=se.current.page_size,$.next=3,(0,G.tp)({report_id:h});case 3:u=$.sent,n=u.code,g=u.msg,n===200?(P((0,d.Z)((0,d.Z)({},y),{},{page_num:(0,T.NG)(se,ie),page_size:f})),ge.default.success(C({id:"request.delete.success"}))):(0,T.EV)(n,g);case 7:case"end":return $.stop()}},l)}));return function(h){return j.apply(this,arguments)}}(),pe=function(l,h,f){var u=h[0],n=h[1];!u&&!n&&P((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:null})),u&&n&&P((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:JSON.stringify({start_time:u,end_time:n})})),f==null||f()},b=[(0,d.Z)((0,d.Z)({dataIndex:"name",title:(0,e.jsx)(r._H,{id:"report.columns.name"}),width:200,ellipsis:{shwoTitle:!1},className:"no_tourist"},(0,X.QT)(y,P,"name",C({id:"report.columns.name.placeholder"}))),{},{render:function(l,h){return(0,e.jsx)(K.K,{ellipsis:{tooltip:l},children:(0,e.jsx)(ye(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[y.name||""],autoEscape:!0,textToHighlight:l||"-",onClick:function(){return window.open("/ws/".concat(E,"/test_report/").concat(h.id))}})})}}),{title:(0,e.jsx)(r._H,{id:"report.columns.project"}),ellipsis:{shwoTitle:!1},width:150,dataIndex:"project",filterDropdown:function(l){var h=l.confirm;return(0,e.jsx)(He,{confirm:h,onConfirm:function(u){return P((0,d.Z)((0,d.Z)({},y),{},{project_id:u,page_num:1}))},page_size:9999,ws_id:E})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.project_id?"#1890ff":void 0}})},render:function(l){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:l||"-"})}},{dataIndex:"product_version",ellipsis:{shwoTitle:!1},width:150,title:(0,e.jsx)(r._H,{id:"report.columns.product_version"}),filterDropdown:function(l){var h=l.confirm;return(0,e.jsx)(Ue,{confirm:h,onConfirm:function(u){return P((0,d.Z)((0,d.Z)({},y),{},{product_version:u,page_num:1}))},ws_id:E})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.product_version?"#1890ff":void 0}})},render:function(l){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:l||"-"})}},(0,d.Z)((0,d.Z)({dataIndex:"creator",width:150,title:(0,e.jsx)(r._H,{id:"report.columns.creator"})},(0,X.ln)(y,P,"creator")),{},{render:function(l){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:l||"-"})}}),{dataIndex:"description",width:200,title:(0,e.jsx)(r._H,{id:"report.columns.description"}),ellipsis:{shwoTitle:!1},render:function(l){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:l||"-"})}},{dataIndex:"gmt_modified",width:200,title:(0,e.jsx)(r._H,{id:"report.columns.gmt_modified"}),filterDropdown:function(l){var h=l.confirm;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Je,{size:"middle",showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",onChange:I().partial(pe,I(),I(),h)}),(0,e.jsx)(xe.Z,{style:{marginTop:"10px",marginBottom:"4px"}}),(0,e.jsx)(J.Z,{type:"text",onClick:function(){return P((0,d.Z)((0,d.Z)({},y),{},{gmt_modified:void 0}))},size:"small",style:{width:75,border:"none"},children:(0,e.jsx)(r._H,{id:"operation.reset"})})]})},filterIcon:function(){return(0,e.jsx)(je.Z,{style:{color:y.gmt_modified?"#1890ff":void 0}})},ellipsis:!0,render:function(l){return l||"-"}},S.WsTourist()&&{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),width:200,fixed:"right",render:function(l){var h=I().get(l,"id");return(0,e.jsx)(r.Nv,{accessible:S.WsMemberOperateSelf(l.creator_id),fallback:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(H,{onClick:function(){return(0,T.WR)()},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(H,{onClick:function(){return(0,T.WR)()},children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(H,{onClick:function(){return window.open("/ws/".concat(E,"/test_report/").concat(h,"/edit"))},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(Le.Z,{title:(0,e.jsx)(r._H,{id:"report.report.delete.prompt"}),okText:(0,e.jsx)(r._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(r._H,{id:"operation.cancel"}),onConfirm:I().partial(de,h||""),children:(0,e.jsx)(H,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})})]})})}}].filter(Boolean);return(0,e.jsxs)(Re.Z,{spinning:U,children:[(0,e.jsx)(Ze,{children:(0,e.jsx)(We.sL,{size:"small",name:"ws-test-report-list",refreshDeps:[S,E,y],rowKey:"id",columns:b,pagination:!1,dataSource:A.data||[]})}),(0,e.jsx)(_e.Z,{total:A.total,pageSize:y.page_size,currentPage:y.page_num,onPageChange:function(l,h){P((0,d.Z)((0,d.Z)({},y),{},{page_num:l,page_size:h}))}})]})},Be=(0,p.memo)(Ee),Qe=t(47673),Ne=t(4107),qe=t(402),et=t(97272),mt=t(9715),Ke=t(20526),ht=t(57338),at=t(440),tt,rt,nt,st=(0,Q.ZP)(at.Z)(tt||(tt=(0,fe.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`]))),it=Q.ZP.div(rt||(rt=(0,fe.Z)([`
    width: calc(100% + 48px);
    transform: translateX(-24px);
`]))),ot=(0,Q.ZP)(xe.Z)(nt||(nt=(0,fe.Z)([`
    border-top: '10px solid #F5F5F5';
`]))),lt=function(){return new Array(4).fill("").reduce(function(x,v){return x.concat(String.fromCharCode(97+Math.ceil(Math.random()*25)))},"")},ut=(0,p.forwardRef)(function(F,x){var v=(0,r.YB)(),C=v.formatMessage,S=Ke.Z.useForm(),E=(0,w.Z)(S,1),D=E[0],V=(0,p.useState)(!1),y=(0,w.Z)(V,2),P=y[0],R=y[1],z=(0,p.useState)(!1),U=(0,w.Z)(z,2),te=U[0],k=U[1],re=(0,p.useState)({}),A=(0,w.Z)(re,2),ne=A[0],se=A[1],ce=(0,p.useState)(""),ie=(0,w.Z)(ce,2),de=ie[0],pe=ie[1];(0,p.useImperativeHandle)(x,function(){return{show:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u="".concat(f.name,"-copy-").concat(lt());k(!0),se((0,d.Z)((0,d.Z)({},f),{},{name:u})),pe(f.name),D.setFieldsValue((0,d.Z)((0,d.Z)({},f),{},{name:u}))}}});var b=function(){D.resetFields(),R(!1),k(!1)},j=function(f,u){if(f===200)F.onOk(),ge.default.success(C({id:"request.copy.success"})),k(!1),D.resetFields();else if(f===201){var n=C({id:"report.template.already.exists"});D.setFields([{name:"name",errors:[n]}])}else ge.default.error(u);R(!1)},l=function(){!D.getFieldValue("name")||(R(!0),D.validateFields().then(function(){var f=(0,s.Z)((0,a.Z)().mark(function u(n){var g,_,$;return(0,a.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,G.rj)((0,d.Z)((0,d.Z)({ws_id:F.ws_id},ne),n));case 2:g=Y.sent,_=g.code,$=g.msg,j(_,$);case 6:case"end":return Y.stop()}},u)}));return function(u){return f.apply(this,arguments)}}()).catch(function(f){return console.log(f)}))};return(0,e.jsxs)(st,{title:(0,e.jsx)(r._H,{id:"report.template.copy"}),width:"375",onClose:b,visible:te,footer:(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(J.Z,{onClick:b,children:(0,e.jsx)(r._H,{id:"operation.cancel"})}),(0,e.jsx)(J.Z,{type:"primary",disabled:P,onClick:l,children:ne&&ne.name?(0,e.jsx)(r._H,{id:"operation.update"}):(0,e.jsx)(r._H,{id:"operation.confirm"})})]})}),children:[(0,e.jsx)("div",{className:"server_provider",children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(et.Z.Text,{className:"script_right_name",strong:!0,children:(0,e.jsx)(r._H,{id:"report.original.template"})}),(0,e.jsx)(et.Z.Text,{children:de})]})}),(0,e.jsx)(it,{children:(0,e.jsx)(ot,{})}),(0,e.jsxs)(Ke.Z,{form:D,layout:"vertical",children:[(0,e.jsx)(Ke.Z.Item,{label:(0,e.jsx)(r._H,{id:"report.new.template"}),name:"name",rules:[{required:!0,pattern:/^[\u4E00-\u9FA5A-Za-z0-9\._-]{1,64}$/g,message:C({id:"report.new.template.message"})}],children:(0,e.jsx)(Ne.Z,{autoComplete:"auto",placeholder:C({id:"report.new.template.placeholder"})})}),(0,e.jsx)(Ke.Z.Item,{label:(0,e.jsx)(r._H,{id:"report.description.input"}),name:"description",children:(0,e.jsx)(Ne.Z.TextArea,{placeholder:C({id:"report.description.placeholder"})})})]})]})}),ct=function(x){var v=(0,r.YB)(),C=v.formatMessage,S=x.ws_id,E=x.tab,D=(0,r.md)(),V={name:"",creator:"",update_user:"",page_num:1,page_size:10,ws_id:S},y=(0,p.useState)(V),P=(0,w.Z)(y,2),R=P[0],z=P[1],U=(0,p.useState)({}),te=(0,w.Z)(U,2),k=te[0],re=te[1],A=(0,p.useState)(!1),ne=(0,w.Z)(A,2),se=ne[0],ce=ne[1],ie=(0,p.useRef)(null),de=(0,T.YM)(R),pe=function(){var u=(0,s.Z)((0,a.Z)().mark(function n(){var g,_,$;return(0,a.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return ce(!0),Y.next=3,(0,G.MD)(R);case 3:g=Y.sent,_=g.code,$=g.msg,_===200?(re(g),ce(!1)):(0,T.EV)(_,$);case 6:case"end":return Y.stop()}},n)}));return function(){return u.apply(this,arguments)}}(),b=(0,T.YM)(k);(0,p.useEffect)(function(){pe()},[R]),(0,p.useEffect)(function(){z(V)},[E]);var j=function(){var u=(0,s.Z)((0,a.Z)().mark(function n(g){var _,$,Se,Y;return(0,a.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return _=de.current.page_size,M.prev=1,M.next=4,(0,G.in)({id:g});case 4:$=M.sent,Se=$.code,Y=$.msg,Se===200?(z((0,d.Z)((0,d.Z)({},R),{},{page_num:(0,T.NG)(de,b),page_size:_})),ge.default.success(C({id:"request.delete.success"}))):(0,T.EV)(Se,Y),M.next=14;break;case 10:M.prev=10,M.t0=M.catch(1),console.log(M.t0),ge.default.error(C({id:"request.delete.failed"}));case 14:case"end":return M.stop()}},n,null,[[1,10]])}));return function(g){return u.apply(this,arguments)}}(),l=function(n){var g;(g=ie.current)===null||g===void 0||g.show(n)},h=(0,p.useMemo)(function(){return k&&I().isArray(k.data)?k.data:[]},[k]),f=[(0,d.Z)((0,d.Z)({dataIndex:"name",title:(0,e.jsx)(r._H,{id:"report.columns.template"}),ellipsis:{shwoTitle:!1},width:200},(0,X.QT)(R,z,"name",C({id:"report.columns.template.placeholder"}))),{},{render:function(n,g){return(0,e.jsx)(K.K,{ellipsis:{tooltip:n},children:(0,e.jsx)(ye(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[R.name||""],autoEscape:!0,textToHighlight:n||"-"})})}}),(0,d.Z)((0,d.Z)({dataIndex:"creator_name",ellipsis:{shwoTitle:!1},width:180,title:(0,e.jsx)(r._H,{id:"report.columns.creator_name"})},(0,X.ln)(R,z,"creator")),{},{render:function(n){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:n||"-"})}}),(0,d.Z)((0,d.Z)({dataIndex:"update_user_name",width:180,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.update_user_name"})},(0,X.ln)(R,z,"update_user")),{},{render:function(n){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:n||"-"})}}),{dataIndex:"description",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.description"}),render:function(n){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:n||"-"})}},{dataIndex:"gmt_created",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.gmt_created"}),render:function(n){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:n||"-"})}},{dataIndex:"gmt_modified",width:200,ellipsis:{shwoTitle:!1},title:(0,e.jsx)(r._H,{id:"report.columns.gmt_modified.s"}),render:function(n){return(0,e.jsx)(K.K,{ellipsis:{tooltip:!0},children:n||"-"})}},{title:(0,e.jsx)(r._H,{id:"Table.columns.operation"}),fixed:"right",key:"operation",width:200,render:function(n){var g=I().get(n,"is_default");return(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,T.N1)("/ws/".concat(S,"/test_report/template/").concat(n.id,"/preview"))},children:(0,e.jsx)(r._H,{id:"operation.preview"})}),(0,e.jsx)(r.Nv,{accessible:D.WsMemberOperateSelf(n.creator),fallback:(0,e.jsxs)(q.Z,{onClick:function(){return(0,T.WR)()},children:[!g&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(H,{children:(0,e.jsx)(r._H,{id:"operation.copy"})}),!g&&(0,e.jsx)(H,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})]}),children:(0,e.jsxs)(q.Z,{children:[!g&&(0,e.jsx)("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return(0,T.N1)("/ws/".concat(S,"/test_report/template/").concat(n.id))},children:(0,e.jsx)(r._H,{id:"operation.edit"})}),(0,e.jsx)(H,{onClick:I().partial(l,n),children:(0,e.jsx)(r._H,{id:"operation.copy"})}),!g&&(0,e.jsx)(Le.Z,{title:(0,e.jsx)(r._H,{id:"report.template.delete.prompt"}),okText:(0,e.jsx)(r._H,{id:"operation.confirm"}),cancelText:(0,e.jsx)(r._H,{id:"operation.cancel"}),onConfirm:I().partial(j,I().get(n,"id")||""),children:(0,e.jsx)(H,{children:(0,e.jsx)(r._H,{id:"operation.delete"})})})]})})]})}}];return(0,e.jsxs)(Re.Z,{spinning:se,children:[(0,e.jsx)(Ze,{children:(0,e.jsx)(We.sL,{size:"small",rowKey:"id",columns:f,name:"ws-report-template-table",loading:se,dataSource:h,pagination:!1})}),(0,e.jsx)(_e.Z,{total:k.total,currentPage:R.page_num,pageSize:R.page_size,onPageChange:function(n,g){return z((0,d.Z)((0,d.Z)({},R),{},{page_num:n,page_size:g}))}}),(0,e.jsx)(ut,{ref:ie,onOk:pe,ws_id:S})]})},dt=(0,p.memo)(ct),pt=function(F){var x=F.match,v=F.location,C=x.params.ws_id,S="menu.Workspace.TestReport.".concat(F.route.name),E=(0,r.md)();(0,Ce.jk)(S);var D=(0,Ce.CR)(),V=D.height,y=D.width,P=(0,p.useState)(v.query.t||"list"),R=(0,w.Z)(P,2),z=R[0],U=R[1],te=(0,p.useCallback)(function(A){U(A),r.m8.push(v.pathname+"?t=".concat(A))},[]),k=(0,p.useCallback)(function(){r.m8.push("/ws/".concat(C,"/test_report/compare"))},[]),re=(0,p.useCallback)(function(){r.m8.push("/ws/".concat(C,"/test_report/template"))},[]);return(0,e.jsx)(L.Z.Content,{children:(0,e.jsx)(me,{width:y-40,height:V-50,children:(0,e.jsxs)(we.Z,{defaultActiveKey:z,onTabClick:te,tabBarStyle:{height:64,background:"#FAFBFC"},tabBarExtraContent:z==="list"?E.IsWsSetting()&&(0,e.jsx)(J.Z,{type:"primary",onClick:k,children:(0,e.jsx)(r._H,{id:"report.create.report"})}):E.IsWsSetting()&&(0,e.jsx)(J.Z,{type:"primary",onClick:re,children:(0,e.jsx)(r._H,{id:"report.create.template"})}),children:[(0,e.jsx)(we.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"report.test.report"}),children:(0,e.jsx)(Be,{ws_id:C,tab:z,tableHeght:V-80})},"list"),E.IsWsSetting()&&(0,e.jsx)(we.Z.TabPane,{tab:(0,e.jsx)(r._H,{id:"report.template"}),children:(0,e.jsx)(dt,{ws_id:C,tab:z,tableHeght:V-80})},"template")]})})})}},50310:function(Fe,Pe,t){"use strict";t.d(Pe,{MD:function(){return we},rj:function(){return Ve},in:function(){return J},vP:function(){return w},tp:function(){return p},iE:function(){return Q},PL:function(){return $e},AX:function(){return me},Me:function(){return Ae},ow:function(){return q},nP:function(){return xe},MC:function(){return ge}});var m=t(39428),L=t(3182),B=t(16917),we=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/list/",{params:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),Ve=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/copy/",{method:"post",data:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),J=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/detail/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),w=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{params:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),p=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"delete",data:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),Ce=null,r=null,fe=null,Q=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"post",data:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),$e=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/template/detail/",{params:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),me=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/detail/",{params:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}(),Ae=function(){var a=(0,L.Z)((0,m.Z)().mark(function s(c){return(0,m.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.WY)("/api/report/test/report/",{method:"put",data:c}));case 1:case"end":return i.stop()}},s)}));return function(c){return a.apply(this,arguments)}}();function Re(a){return Te.apply(this,arguments)}function Te(){return Te=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/api/auth/user/",{params:s}));case 1:case"end":return o.stop()}},a)})),Te.apply(this,arguments)}function Le(a){return ze.apply(this,arguments)}function ze(){return ze=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/api/job/result/compare/chart/",{data:s,method:"post"}));case 1:case"end":return o.stop()}},a)})),ze.apply(this,arguments)}function q(a){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,L.Z)((0,m.Z)().mark(function a(s){return(0,m.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.WY)("/api/report/test/report/item_suite/",{data:s,method:"post"}));case 1:case"end":return o.stop()}},a)})),Oe.apply(this,arguments)}function xe(a){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,L.Z)((0,m.Z)().mark(function a(s){return(0,m.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.WY)("/api/report/test/report/update_desc/",{data:s,method:"post"}));case 1:case"end":return o.stop()}},a)})),Ie.apply(this,arguments)}function ge(a){return d.apply(this,arguments)}function d(){return d=(0,L.Z)((0,m.Z)().mark(function a(s){return(0,m.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.WY)("/api/report/test/report/item/update_desc/",{method:"post",data:s}));case 1:case"end":return o.stop()}},a)})),d.apply(this,arguments)}},85450:function(Fe,Pe,t){"use strict";t.d(Pe,{sL:function(){return i},ny:function(){return c},Fu:function(){return o}});var m=t(11849),L=t(2824),B=t(93224),we=t(32059),Ve=t(66456),J=t(79764),w=t(86582),p=t(19273),Ce=t(20310),r=t(67294),fe=t(1706),Q=t(12788),$e=t(57392),me=t(85893),Ae=["width","onResizeStart","onResize","onResizeStop","resize"],Re=["columns","name","onColumnsChange"],Te,Le,ze,q=Q.ZP.div(Te||(Te=(0,Ce.Z)([`
    position: relative;
    width: 100%;
`]))),Oe=Q.ZP.div.attrs(function(ee){return{style:{left:ee.left,height:ee==null?void 0:ee.height}}})(Le||(Le=(0,Ce.Z)([`
    width: 0px;
    position: absolute;
    left: 0;
    top: 0;
    border-left: 1px dashed #d9d9d9;
    z-index: 99;
`]))),xe=(0,Q.ZP)(fe.Resizable)(ze||(ze=(0,Ce.Z)([`
    user-select: none;
    &::before {
        position: absolute;
        top: 50%;
        right: 0;
        width: 1px;
        height: 1.6em;
        background-color: rgba(0,0,0,.06);
        transform: translateY(-50%);
        transition: background-color .3s;
        content: "";
    }
    
    &:last-child::before {
        display: none;
    }

    .react-resizable {
        position: relative;
        background-clip: padding-box;
    }
    
    .react-resizable-handle {
        position: absolute;
        width: 10px;
        height: 100%;
        bottom: 0;
        right: -5px;
        cursor: `,`;
        background-image:none;
        z-index: 1;
    }
`])),function(ee){var Z=ee.resize;return Z?"col-resize":"default"}),Ie=function(Z){var N=Z.width,O=Z.onResizeStart,H=Z.onResize,ae=Z.onResizeStop,oe=Z.resize,Ze=(0,B.Z)(Z,Ae);return(0,me.jsx)(xe,(0,m.Z)((0,m.Z)({width:N||100,height:0,draggableOpts:{enableUserSelectHack:!1},onResizeStart:O,onResize:H,onResizeStop:ae,resize:oe?1:0},Ze),{},{children:(0,me.jsx)("th",(0,m.Z)({},Ze))}))},ge=function(Z){var N=Z.columns,O=N===void 0?[]:N,H=Z.name,ae=Z.onColumnsChange,oe=(0,B.Z)(Z,Re),Ze=r.useState(0),je=(0,L.Z)(Ze,2),De=je[0],ye=je[1],ke=r.useState(0),he=(0,L.Z)(ke,2),Me=he[0],ve=he[1],Ye=r.useState(!1),e=(0,L.Z)(Ye,2),be=e[0],He=e[1],le=r.useRef(null),ue=(0,$e.Z)(le),Xe=function(W){return function(I,T){var X;if((0,p.Z)(T),!!O[W].ellipsis){var We=I.clientX,K=We-((X=le.current)===null||X===void 0?void 0:X.getBoundingClientRect().x);ve(K),ye(K),He(!0)}}},Ge=function(){return function(W){var I,T=W.clientX,X=T-((I=le.current)===null||I===void 0?void 0:I.getBoundingClientRect().x);ye(X)}},Ue=function(W){return function(I,T){var X,We=T.size,K=I.clientX,Je=K-((X=le.current)===null||X===void 0?void 0:X.getBoundingClientRect().x),Ee=(0,w.Z)(O);if(Ee[W].ellipsis){var Be=We.width+=Je-Me,Qe=Ee[W],Ne=Qe.dataIndex,qe=Qe.key;Be>20&&(Ee[W]=(0,m.Z)((0,m.Z)({},Ee[W]),{},{width:Be}),H&&o(H,Ne||qe,Be),ae==null||ae())}ye(0),ve(0),He(!1)}},_e=r.useMemo(function(){return O.reduce(function(G,W){return W.width?G+=W==null?void 0:W.width:G},0)},[O]);return(0,me.jsxs)(q,{ref:le,className:"resize-table-wrapper",children:[(0,me.jsx)(J.Z,(0,m.Z)((0,m.Z)({},oe),{},{components:{header:{cell:Ie}},scroll:(Z==null?void 0:Z.scroll)||{x:_e||(ue==null?void 0:ue.width)},columns:O.filter(Boolean).map(function(G,W){return(0,m.Z)((0,m.Z)({},G),{},{onHeaderCell:function(T){return{resize:!!G.ellipsis,width:T.width,onResizeStart:Xe(W),onResize:Ge(),onResizeStop:Ue(W)}}})})})),be&&(0,me.jsx)(Oe,{height:ue==null?void 0:ue.height,left:De||Me})]})},d=ge,a=["name","columns","refreshDeps","onColumnsChange"],s="umi_locale",c=function(Z,N){var O=localStorage.getItem(Z),H=localStorage.getItem(s)||"zh-CN";if(!!O)return JSON.parse(O)["".concat(H,"-").concat(N)]},o=function(Z,N,O){var H=localStorage.getItem(Z),ae=localStorage.getItem(s)||"zh-CN",oe=(0,we.Z)({},"".concat(ae,"-").concat(N),O);H?localStorage.setItem(Z,JSON.stringify(Object.assign(JSON.parse(H),oe))):localStorage.setItem(Z,JSON.stringify(oe))},i=function(Z){var N=Z.name,O=Z.columns,H=Z.refreshDeps,ae=H===void 0?[]:H,oe=Z.onColumnsChange,Ze=(0,B.Z)(Z,a),je=r.useState([]),De=(0,L.Z)(je,2),ye=De[0],ke=De[1],he=function(){return(O==null?void 0:O.filter(Boolean).map(function(ve){var Ye=ve.dataIndex,e=ve.key,be=ve.width,He=Ye||e,le=c(N,He);!le&&be&&o(N,He,be);var ue=le||be;return ue&&(ve.width=ue),ve}))||[]};return r.useEffect(function(){ke(he())},ae),(0,me.jsx)(d,(0,m.Z)({name:N,columns:ye,setColumns:ke,size:"small",onColumnsChange:function(){oe==null||oe(),ke(he())}},Ze))}}}]);
