(self.webpackChunktone_front=self.webpackChunktone_front||[]).push([[2974],{2488:function(st,se,t){"use strict";t.d(se,{Z:function(){return Y}});var le=t(45972),C=t(22374),ye={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},J=ye,me=t(25078),d=function(y,L){return C.createElement(me.Z,(0,le.Z)((0,le.Z)({},y),{},{ref:L,icon:J}))};d.displayName="CaretRightOutlined";var Y=C.forwardRef(d)},99193:function(st,se,t){"use strict";t.d(se,{Z:function(){return Y}});var le=t(45972),C=t(22374),ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},J=ye,me=t(25078),d=function(y,L){return C.createElement(me.Z,(0,le.Z)((0,le.Z)({},y),{},{ref:L,icon:J}))};d.displayName="UpOutlined";var Y=C.forwardRef(d)},5733:function(st,se,t){"use strict";t.r(se),t.d(se,{default:function(){return et}});var le=t(70772),C=t(6701),ye=t(46721),J=t(94867),me=t(26388),d=t(20418),Y=t(81138),U=t(96146),y=t(35832),L=t(32326),h=t(39190),a=t(22374),w=t(68210),$=t(24812),i=t(22812),te=t(65081),_t=t(99193),Ft=t(45227);function xt(R){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function R(f){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/sys/workspace/",{params:f}));case 1:case"end":return n.stop()}},R)})),N.apply(this,arguments)}function Ht(R){return Qe.apply(this,arguments)}function Qe(){return Qe=_asyncToGenerator(_regeneratorRuntime().mark(function R(f){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/job/result/compare/chart/",{data:f,method:"post"}));case 1:case"end":return n.stop()}},R)})),Qe.apply(this,arguments)}function jt(R){return Q.apply(this,arguments)}function Q(){return Q=(0,L.Z)((0,y.Z)().mark(function R(f){return(0,y.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)("/api/job/result/compare/form/",{data:f,method:"post"}));case 1:case"end":return n.stop()}},R)})),Q.apply(this,arguments)}function re(R){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,L.Z)((0,y.Z)().mark(function R(f){return(0,y.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.WY)("/api/job/result/compare/form/",{params:f}));case 1:case"end":return n.stop()}},R)})),Xe.apply(this,arguments)}var lt=t(15401),j=(0,a.createContext)(null),Ce=t(99788),s=t(395),gt=t(72069),e=t(52454),yt=function(){var f=(0,a.useContext)(j),r=f.envData,n=f.environmentResult,l=f.group,c=(0,i.Kd)()==="en-US";return(0,e.jsxs)(s.KP,{id:"need_test_env",children:[(0,e.jsxs)(s.DK,{children:[(0,e.jsx)("span",{className:"line"}),(0,e.jsx)(i._H,{id:"analysis.test.env"})]}),(0,e.jsxs)(s.HA,{children:[(0,e.jsx)(s.i1,{enLocale:c,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{enLocale:c,envData:r,group:l})]}),(0,e.jsx)(gt.c,{envData:r,environmentResult:n,group:l})]})},Zt=(0,a.memo)(yt),Ze=t(64510),ie=t(87445),Ut=t(79625),St=t(96584),Wt=t(14320),X=t(53479),Gt=t(57359),V=t(34423),Bt=t(31650),W=t(25100),Et=t(41428),it=t(69230),Le=t(33821),ke=t(22598),ot=t(15363),ut=t(74066),ae=t(36338),dt=t(24492),qe=t(89638),Dt=t(97207),he=t.n(Dt),ct=t(81849),Se=t(79638),Rt=t(97939),Te=t(526),_e=t(39935),xe,je=Le.Z.Option,Ot=Rt.ZP.div(xe||(xe=(0,Et.Z)([`
    background: #fff;
    position: absolute;
    top: 57px;
    height: 50px;
    // willChange: transform;
    border: 1px solid rgba(0,0,0,0.10);
    z-index: 5;
    width:`,`px;
    transform:translateY(`,`px);
`])),function(R){var f=R.width;return f||0},function(R){var f=R.y;return f||0}),ft=function(f){var r=f.groupRowRef,n=f.parentDom,l=f.groupLen,c=f.envData,Z=(0,te.Z)(document.querySelector(".ant-layout-has-sider .ant-layout")),M=Z.top,g=r.current,oe=n.current;if(!g&&!oe)return(0,e.jsx)(e.Fragment,{});var b=oe.offsetTop||0,ge=g==null?void 0:g.offsetWidth,G=M>b+g.offsetTop;return G?(0,e.jsx)(Ot,{width:ge,y:M-b-g.offsetTop,children:(0,e.jsx)(s.ER,{style:{border:"none",paddingLeft:18,paddingRight:15},children:(0,e.jsxs)(s.ZA,{children:[(0,e.jsx)(s.Ll,{gLen:l,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{envData:c,group:l,isData:!0})]})})}):(0,e.jsx)(e.Fragment,{})},Ee=["decline","increase","normal","invalid","na"],Pt=function(f){return function(r,n){return r[f]-n[f]}},Ct=function(f){var r=(0,i.YB)(),n=r.formatMessage,l=(0,a.useContext)(j),c=l.compareResult,Z=l.allGroupData,M=l.environmentResult,g=l.baselineGroupIndex,oe=l.envData,b=l.group,ge=l.wsId,G=l.containerRef,Ae=f.parentDom,be=f.scrollLeft,Fe=(0,a.useState)([]),ce=(0,h.Z)(Fe,2),Re=ce[0],Oe=ce[1],He=(0,a.useState)([]),Ue=(0,h.Z)(He,2),fe=Ue[0],ne=Ue[1],pe=(0,a.useState)(!0),We=(0,h.Z)(pe,2),k=We[0],Ge=We[1],Be=(0,a.useState)(""),q=(0,h.Z)(Be,2),Ke=q[0],Ne=q[1],ue=(0,a.useState)("all"),ee=(0,h.Z)(ue,2),we=ee[0],$e=ee[1],de=(0,a.useRef)(null),B=c.perf_data_result,Ve=(0,a.useMemo)(function(){return g===-1?0:g},[g]);(0,a.useEffect)(function(){var I=he().cloneDeep(B);ne(k?I:I.map(function(_){return(0,d.Z)((0,d.Z)({},_),{},{chartType:"1"})}))},[B,k]);var tt=function(){Ge(!k)};(0,a.useEffect)(function(){Ne(k?"chart":"list")},[k]);var ze=function(){return(0,e.jsx)(s.JI,{children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(J.Z,{onClick:tt,children:(0,e.jsx)(i._H,{id:Ke==="chart"?"analysis.chart.mode":"analysis.list.mode"})}),k&&(0,e.jsxs)(V.Z,{children:[(0,e.jsxs)(W.Z.Text,{children:[(0,e.jsx)(i._H,{id:"analysis.filter"}),": "]}),(0,e.jsxs)(Le.Z,{defaultValue:"all",style:{width:200},value:we,onSelect:rt,children:[(0,e.jsx)(je,{value:"all",children:(0,e.jsx)(i._H,{id:"analysis.all"})}),(0,e.jsx)(je,{value:"invalid",children:(0,e.jsx)(i._H,{id:"analysis.invalid"})}),(0,e.jsx)(je,{value:"volatility",title:n({id:"analysis.volatility"}),children:(0,e.jsx)(i._H,{id:"analysis.volatility"})}),(0,e.jsx)(je,{value:"increase",children:(0,e.jsx)(i._H,{id:"analysis.increase"})}),(0,e.jsx)(je,{value:"decline",children:(0,e.jsx)(i._H,{id:"analysis.decline"})}),(0,e.jsx)(je,{value:"normal",children:(0,e.jsx)(i._H,{id:"analysis.normal"})})]})]})]})})},Je=function(_,x,m){if(Re.includes(m.conf_id)){var u=c.perf_data_result;Oe(function(p){return p.filter(function(E){return E!==m.conf_id})}),ne(function(p){return p.map(function(E){if(E.suite_id===_.suite_id){var v;return(0,d.Z)((0,d.Z)({},E),{},{conf_list:(v=u.filter(function(O){return O.suite_id===_.suite_id})[0])===null||v===void 0?void 0:v.conf_list})}return E})});return}Oe(function(p){return p.concat(m.conf_id)});var S=_.conf_list.reduce(function(p,E){return E.conf_id===m.conf_id?p.concat((0,d.Z)((0,d.Z)({},E),{},{metric_list:E.metric_list.reduce(function(v,O){var P=O.compare_data[x].compare_result,Ye=4;if(P){var vt=Ee.indexOf(P);Ye=vt}return v.concat((0,d.Z)((0,d.Z)({},O),{},{sortNum:Ye}))},[]).sort(Pt("sortNum"))})):p.concat(E)},[]);ne(fe.map(function(p){return p.suite_id===_.suite_id?(0,d.Z)((0,d.Z)({},p),{},{conf_list:S}):p}))},rt=function(_){$e(_);var x=he().cloneDeep(B);ne(_==="all"?x:x.map(function(m){var u=m.conf_list.map(function(S){return(0,d.Z)((0,d.Z)({},S),{},{metric_list:S.metric_list.filter(function(p){return(0,qe.w)(p.compare_data,_)})})});return(0,d.Z)((0,d.Z)({},m),{},{conf_list:u})}))},at=function(_){var x=_.conf_compare_data||_.compare_conf_list||[];return x.map(function(m,u){return(0,e.jsx)(s.r0,{gLen:b,children:(0,_e.cO)(m)?(0,e.jsx)("div",{style:{height:38}}):(0,e.jsx)(Te.zA,{ws_id:ge,job_id:m.obj_id||m})},u)})},ve=(0,te.Z)(G);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.ER,{ref:de,children:(0,e.jsxs)(s.ZA,{style:{border:"1px solid rgba(0,0,0,0.10)"},children:[(0,e.jsx)(s.Ll,{gLen:b,children:(0,e.jsx)(i._H,{id:"analysis.comparison.group.name"})}),(0,e.jsx)(Ce.Z,{envData:oe,group:b,isData:!0})]})}),(0,e.jsx)(ft,{groupRowRef:de,parentDom:Ae,envData:oe,groupLen:b}),(0,e.jsxs)(X.Z,{style:{maxWidth:document.body.clientWidth-40+be},children:[(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(s.Xb,{id:"perf_item",children:(0,e.jsx)(i._H,{id:"performance.test"})})}),(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(ze,{})})]}),(0,e.jsx)(s.Rr,{children:fe&&!!fe.length?fe.map(function(I,_){return(0,e.jsxs)(s.gb,{children:[(0,e.jsxs)(s.yO,{style:{textIndent:ve==null?void 0:ve.left},children:[I.suite_name,(0,e.jsx)(ct.Z,{containerScroll:ve,btn:k,isReport:!1,obj:fe,suiteId:I.suite_id,setPerData:ne})]}),(0,e.jsx)(s.uP,{children:k?I.conf_list&&I.conf_list.length?I.conf_list.map(function(x,m){return!!x.metric_list.length&&(0,e.jsxs)("div",{children:[(0,e.jsxs)(s.h$,{children:[(0,e.jsx)(s.h,{gLen:b,children:(0,e.jsx)(i._H,{id:"analysis.TestConf/metric"})}),Z==null?void 0:Z.map(function(u,S){return(0,e.jsx)(s.iM,{gLen:b,children:S!==Ve?(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(W.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:(0,e.jsx)(i._H,{id:"analysis.result"})})}),(0,e.jsx)(C.Z,{span:12,children:(0,e.jsxs)(s.Qz,{children:[(0,e.jsx)(i._H,{id:"analysis.comparison/tracking.results"}),(0,e.jsx)("span",{onClick:function(){return Je(I,S,x)},style:{margin:"0 5px 0 3px",verticalAlign:"middle",cursor:"pointer"},children:Re.includes(x.conf_id)?(0,e.jsx)(ot.r,{}):(0,e.jsx)(ke.r,{})}),(0,e.jsx)(St.Z,{color:"#fff",overlayStyle:{minWidth:350},title:(0,e.jsxs)("span",{style:{color:"rgba(0,0,0,0.65)"},children:[(0,e.jsx)(i._H,{id:"analysis.the.greater.difference"}),(0,e.jsx)("br",{}),(0,e.jsx)(i._H,{id:"analysis.rules"}),"\uFF1A",(0,e.jsx)("br",{}),(0,e.jsx)(i._H,{id:"analysis.decline"}),">",(0,e.jsx)(i._H,{id:"analysis.increase"}),">",(0,e.jsx)(i._H,{id:"analysis.fluctuation"}),">",(0,e.jsx)(i._H,{id:"analysis.invalid"})]}),children:(0,e.jsx)(ut.Z,{})})]})})]}):(0,e.jsx)(W.Z.Text,{style:{color:"rgba(0,0,0,0.45)"},children:Z.length>1?(0,e.jsx)(i._H,{id:"analysis.benchmark"}):(0,e.jsx)(i._H,{id:"analysis.result"})})},S)})]}),(0,e.jsxs)("div",{style:{border:"1px solid rgba(0,0,0,0.10)"},children:[(0,e.jsxs)(s.TG,{children:[(0,e.jsx)(s.j3,{gLen:b,children:(0,e.jsx)(Se.Z,{title:x.conf_name})}),at(x)]}),x.metric_list.map(function(u,S){var p,E;return(0,e.jsxs)(s.WF,{children:[(0,e.jsx)(s.KW,{gLen:b,children:(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(C.Z,{span:16,children:(0,e.jsx)(X.Z,{justify:"start",children:(0,e.jsx)(Se.Z,{title:"".concat(u.metric).concat(u.unit?"("+u.unit+")":""),children:(0,e.jsxs)(W.Z.Text,{style:{color:"rgba(0,0,0,0.65)"},children:[u.metric,u.unit&&(0,e.jsxs)("span",{children:["(",u.unit,")"]})]})})})}),(0,e.jsx)(C.Z,{span:8,children:(0,e.jsx)(X.Z,{justify:"end",children:(0,e.jsxs)(s.Qz,{children:["(","".concat((0,ae.gt)(u.cv_threshold),"/").concat((0,ae.gt)(u.cmp_threshold)),")"]})})})]})}),Array.isArray(u.compare_data)&&!!u.compare_data.length&&((p=u.compare_data)===null||p===void 0||(E=p.slice(0,b))===null||E===void 0?void 0:E.map(function(v,O){return(0,e.jsx)(s.LQ,{gLen:b,children:(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsx)(C.Z,{span:v&&v.compare_result?12:20,children:(0,e.jsx)(X.Z,{justify:"start",children:(0,e.jsx)(Se.Z,{title:(0,qe.U)(v),children:(0,e.jsx)(W.Z.Text,{style:{color:"rgba(0,0,0,0.65)"},children:(0,qe.U)(v)})})})}),v&&v.compare_result&&(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(X.Z,{justify:"end",children:(0,e.jsxs)(s.Qz,{children:[(0,e.jsx)("span",{className:(0,ae.B1)(v.compare_result),children:v.compare_value||"-"}),(0,e.jsx)("span",{className:(0,ae.B1)(v.compare_result),style:{padding:" 0px 9px "},children:(0,ae.PV)(v.compare_result)})]})})})]})},O)}))]},S)})]})]},m)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE}):(0,e.jsx)(dt.Z,(0,d.Z)((0,d.Z)({},I),{},{envData:M,base_index:Ve}))})]},_)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},pt=(0,a.memo)(Ct),De=t(27165),Me=Le.Z.Option,Lt=function(f){var r=(0,i.YB)(),n=r.formatMessage,l=(0,a.useContext)(j),c=l.allGroupData,Z=l.compareResult,M=l.baselineGroupIndex,g=l.group,oe=l.wsId,b=l.containerRef,ge=f.scrollLeft,G=Z.func_data_result,Ae=(0,a.useState)(""),be=(0,h.Z)(Ae,2),Fe=be[0],ce=be[1],Re=(0,a.useState)(0),Oe=(0,h.Z)(Re,2),He=Oe[0],Ue=Oe[1],fe=(0,a.useState)(!1),ne=(0,h.Z)(fe,2),pe=ne[0],We=ne[1],k=(0,a.useState)("All"),Ge=(0,h.Z)(k,2),Be=Ge[0],q=Ge[1],Ke=(0,a.useState)([]),Ne=(0,h.Z)(Ke,2),ue=Ne[0],ee=Ne[1],we=(0,a.useState)([]),$e=(0,h.Z)(we,2),de=$e[0],B=$e[1];(0,a.useEffect)(function(){Array.isArray(G)&&!!G.length&&B(G)},[G]);var Ve=function(x){var m=x.sub_case_list,u=x.conf_id,S=ue.includes(u);return(0,e.jsx)(e.Fragment,{children:S&&(m==null?void 0:m.map(function(p,E){var v,O;return(0,e.jsxs)(s.GH,{children:[(0,e.jsx)(s.ly,{gLen:g,children:(0,e.jsx)(W.Z.Text,{children:(0,e.jsx)(Se.Z,{title:p.sub_case_name})})}),p.compare_data.length?(v=p.compare_data)===null||v===void 0||(O=v.slice(0,g))===null||O===void 0?void 0:O.map(function(P,Ye){return(0,e.jsx)(s.bH,{gLen:g,children:(0,e.jsx)(W.Z.Text,{style:{color:(0,ae.Sh)(P)},children:P||"-"})},Ye)}):(0,e.jsx)(s.bH,{gLen:g,children:(0,e.jsx)(W.Z.Text,{children:"-"})})]},E)}))})},tt=function(x){var m=ue.includes(x);ee(m?ue.filter(function(u){return u!==x}):ue.concat(x))},ze=function(x,m){console.log("func test handleArrow"),Ue(m),ce(x.suite_id);for(var u=[],S=0;S<5;S++)u.push([]);var p=m>Je?m-1:m,E=x.conf_list.map(function(v){var O;return v.sub_case_list.forEach(function(P){P.result==="Pass"&&P.compare_data[p]==="Fail"?u[0].push(P):P.result==="Fail"&&P.compare_data[p]==="Pass"?u[1].push(P):P.result==="Fail"&&P.compare_data[p]==="Fail"?u[2].push(P):P.result==="Pass"&&P.compare_data[p]==="Pass"?u[3].push(P):u[4].push(P)}),(0,d.Z)((0,d.Z)({},v),{},{sub_case_list:(O=[]).concat.apply(O,u)})});B(de.map(function(v){return v.suite_id==x.suite_id?(0,d.Z)((0,d.Z)({},v),{},{conf_list:E}):v}))},Je=(0,a.useMemo)(function(){return M===-1?0:M},[M]),rt=function(){We(!pe)};(0,a.useEffect)(function(){ee([]),ee(pe?de.reduce(function(_,x){return _.concat(x.conf_list.map(function(m){return m.conf_id}))},[]):[])},[pe]);var at=function(x){q(x);var m=he().cloneDeep(G),u=[];x=="All"?B(m):(m.map(function(S){var p=[];S.conf_list.map(function(E){var v=E.sub_case_list.filter(function(O){return O.compare_data.includes(x)});p.push((0,d.Z)((0,d.Z)({},E),{},{sub_case_list:v}))}),u.push((0,d.Z)((0,d.Z)({},S),{},{conf_list:p}))}),B(u))},ve=function(){return(0,e.jsx)(s.JI,{children:(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(J.Z,{onClick:rt,children:(0,e.jsx)(i._H,{id:pe?"analysis.folded.all":"analysis.expand.all"})}),(0,e.jsxs)(V.Z,{children:[(0,e.jsxs)(W.Z.Text,{children:[(0,e.jsx)(i._H,{id:"analysis.filter"}),": "]}),(0,e.jsxs)(Le.Z,{defaultValue:"All",style:{width:200},value:Be,onSelect:at,children:[(0,e.jsx)(Me,{value:"All",children:(0,e.jsx)(i._H,{id:"analysis.all"})}),(0,e.jsx)(Me,{value:"Pass",children:(0,e.jsx)(i._H,{id:"analysis.pass"})}),(0,e.jsx)(Me,{value:"Fail",children:(0,e.jsx)(i._H,{id:"analysis.fail"})}),(0,e.jsx)(Me,{value:"Skip",children:(0,e.jsx)(i._H,{id:"analysis.skip"})})]})]})]})})},I=(0,te.Z)(b);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(X.Z,{style:{maxWidth:document.body.clientWidth-40+ge},children:[(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(s.Xb,{id:"func_item",children:(0,e.jsx)(i._H,{id:"functional.test"})})}),(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(ve,{})})]}),(0,e.jsx)(s.Rr,{children:de.length?de.map(function(_,x){var m;return(0,e.jsx)(a.Fragment,{children:(0,e.jsxs)(s.gb,{children:[(0,e.jsx)(s.yO,{style:{textIndent:I==null?void 0:I.left},children:_.suite_name}),(0,e.jsx)(s.h$,{children:_.conf_list&&_.conf_list.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.h,{gLen:g,children:"Conf"}),c==null?void 0:c.map(function(u,S){return(0,e.jsx)(s.iM,{gLen:g,children:(0,e.jsxs)(X.Z,{children:[(0,e.jsx)(C.Z,{span:12,children:(0,e.jsx)(i._H,{id:"analysis.total/pass/fail"})}),S!==Je&&(0,e.jsxs)(C.Z,{span:12,style:{textAlign:"right",paddingRight:10},children:[(0,e.jsx)(i._H,{id:"analysis.comparison.results"}),(0,e.jsx)("span",{onClick:function(){return ze(_,S)},style:{margin:"0 5px 0 3px",verticalAlign:"middle",cursor:"pointer"},children:Fe==_.suite_id&&He==S?(0,e.jsx)(ot.r,{}):(0,e.jsx)(ke.r,{title:n({id:"analysis.differentiated.sorting"})})}),(0,e.jsx)(De.F,{})]})]})},S)})]}):null}),(0,e.jsx)(s.uP,{children:_.conf_list&&_.conf_list.length?(m=_.conf_list)===null||m===void 0?void 0:m.map(function(u,S){var p,E=ue.includes(u.conf_id),v=u.conf_compare_data||u.compare_conf_list;return(0,e.jsxs)(a.Fragment,{children:[(0,e.jsxs)(s.lu,{expand:E,children:[(0,e.jsx)(s.Km,{gLen:g,children:(0,e.jsxs)(Se.Z,{title:u.conf_name,children:[(0,e.jsx)(s.Qq,{rotate:E?90:0,onClick:function(){return tt(u.conf_id)}}),(0,e.jsx)(W.Z.Text,{style:{marginLeft:"12px"},children:u.conf_name})]})}),v==null||(p=v.slice(0,g))===null||p===void 0?void 0:p.map(function(O,P){return(0,e.jsx)(s.Lc,{gLen:g,children:(0,e.jsxs)(V.Z,{size:16,children:[(0,e.jsx)(W.Z.Text,{style:{color:"#649FF6"},children:(0,ae.YL)(O.all_case)}),(0,e.jsx)(W.Z.Text,{style:{color:"#81BF84"},children:(0,ae.YL)(O.success_case)}),(0,e.jsx)(W.Z.Text,{style:{color:"#C84C5A"},children:(0,ae.YL)(O.fail_case)}),O&&!O.is_baseline?(0,e.jsx)(Te.zA,{ws_id:oe,job_id:O.obj_id,style:{paddingLeft:10}}):(0,e.jsx)(e.Fragment,{})]})},P)})]}),(0,e.jsx)(Ve,(0,d.Z)({},u))]},S)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},x)}):(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE})})]})},Tt=(0,a.memo)(Lt),Ie=t(28739),Mt=function(){var f=(0,$.TH)(),r=f.state,n=(0,i.YB)(),l=n.formatMessage,c=(0,$.UO)(),Z=c.ws_id,M=c.form_id,g=(0,i.md)(),oe=(0,a.useRef)(null),b=(0,a.useState)({}),ge=(0,h.Z)(b,2),G=ge[0],Ae=ge[1],be=(0,a.useState)({}),Fe=(0,h.Z)(be,2),ce=Fe[0],Re=Fe[1],Oe=(0,a.useState)({}),He=(0,h.Z)(Oe,2),Ue=He[0],fe=He[1],ne=(0,a.useState)({}),pe=(0,h.Z)(ne,2),We=pe[0],k=pe[1],Ge=(0,a.useState)([]),Be=(0,h.Z)(Ge,2),q=Be[0],Ke=Be[1],Ne=(0,a.useState)(0),ue=(0,h.Z)(Ne,2),ee=ue[0],we=ue[1],$e=(0,a.useState)({}),de=(0,h.Z)($e,2),B=de[0],Ve=de[1],tt=(0,a.useState)([]),ze=(0,h.Z)(tt,2),Je=ze[0],rt=ze[1],at=(0,a.useState)(void 0),ve=(0,h.Z)(at,2),I=ve[0],_=ve[1],x=(0,a.useState)(1),m=(0,h.Z)(x,2),u=m[0],S=m[1],p=(0,a.useState)(0),E=(0,h.Z)(p,2),v=E[0],O=E[1],P=(0,a.useRef)(null),Ye=a.useState(void 0),vt=(0,h.Z)(Ye,2),Xt=vt[0],kt=vt[1],qt=a.useState(!1),Kt=(0,h.Z)(qt,2),er=Kt[0],Nt=Kt[1],tr=document.querySelector(".ant-layout-has-sider .ant-layout"),rr=(0,te.Z)(tr),ar=rr.top,nr=(0,Te.CR)(),sr=nr.height,lr=function(){var A=(0,L.Z)((0,y.Z)().mark(function D(){var o,F,T;return(0,y.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,re({form_id:M});case 2:if(o=H.sent,o.code!=200){H.next=13;break}if(o!=null&&o.data){H.next=6;break}return H.abrupt("return");case 6:Ae(o==null?void 0:o.data.testDataParam),Re(o==null?void 0:o.data.envDataParam),Ke(o==null?void 0:o.data.allGroupData),we(o==null?void 0:o.data.baselineGroupIndex),_(o==null||(F=o.data.allGroupData[0])===null||F===void 0||(T=F.members[0])===null||T===void 0?void 0:T.ws_id),H.next=14;break;case 13:o.code===500?(0,_e.CT)(500):(0,_e.EV)(o.code,o.msg);case 14:case"end":return H.stop()}},D)}));return function(){return A.apply(this,arguments)}}();(0,a.useEffect)(function(){M?lr():r&&JSON.stringify(r)!=="{}"&&(Ae(r==null?void 0:r.testDataParam),Re(r==null?void 0:r.envDataParam),k(r==null?void 0:r.compareGroupData),Ke(r==null?void 0:r.allGroupData),we(r==null?void 0:r.baselineGroupIndex),fe(r==null?void 0:r.domainGroupResult))},[M,r]);var It=q==null?void 0:q.length,ir=function(){return document.querySelector(".ant-layout-has-sider .ant-layout").scrollTop=0},or=(0,a.useState)({func_data_result:[],perf_data_result:[]}),wt=(0,h.Z)(or,2),nt=wt[0],ur=wt[1],dr=function(){var A=(0,L.Z)((0,y.Z)().mark(function D(o){var F;return(0,y.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,lt.on)(o);case 2:return F=z.sent,z.abrupt("return",F);case 4:case"end":return z.stop()}},D)}));return function(o){return A.apply(this,arguments)}}(),cr=function(){var A=(0,L.Z)((0,y.Z)().mark(function D(){var o,F,T,z,H,Pe;return(0,y.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,lt.gQ)(ce);case 2:if(o=K.sent,o.code==200&&Ve(o.data),o.code!==1358){K.next=7;break}return U.default.error(l({id:"analysis.please.add.comparison.group"})),K.abrupt("return");case 7:o.code!==200&&U.default.error(o.msg),F=G.perf_suite_dic,T=G.func_suite_dic,z=[],H=[],F&&JSON.stringify(F)!=="{}"&&(z=(0,Ie.$7)(F)),T&&JSON.stringify(T)!=="{}"&&(H=(0,Ie.$7)(T)),Pe=[],Pe=z.concat(H),S(Pe.length),Pe.map(function(mt){return dr(mt).then(function(ht){var At=ht.code,bt=ht.data;if(o.code===500){(0,_e.CT)(500);return}if(o.code!==200){U.default.error(o.msg);return}var Jt=bt.test_type;if(At===200&&JSON.stringify(bt)!=="{}"&&["functional","performance"].includes(Jt)){var Yt=Jt==="functional"?"func_data_result":"perf_data_result";ur(function(Qt){return(0,d.Z)((0,d.Z)({},Qt),{},(0,me.Z)({},Yt,Qt[Yt].concat(bt)))})}})});case 17:case"end":return K.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),$t=(0,a.useMemo)(function(){var A=nt.func_data_result,D=nt.perf_data_result,o=D.length,F=A.length;return o+F},[nt]);(0,a.useEffect)(function(){JSON.stringify(G)!=="{}"&&JSON.stringify(ce)!=="{}"&&cr()},[G,ce]);var fr=function(){var A=(0,L.Z)((0,y.Z)().mark(function D(){var o,F,T,z,H,Pe;return(0,y.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return o=q.map(function(mt){var ht=mt.members.map(function(At){return At.id});return(0,d.Z)((0,d.Z)({},mt),{},{members:ht})}),F={allGroupData:o,baselineGroupIndex:ee,testDataParam:G,envDataParam:ce},K.next=4,jt({form_data:F});case 4:if(T=K.sent,z=T.data,H=T.code,Pe=T.msg,H===200){K.next=11;break}return(0,_e.EV)(H,Pe),K.abrupt("return");case 11:return K.abrupt("return",z);case 12:case"end":return K.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),pr=(0,Te.oM)(l({id:"analysis.copy.sharing.link.succeeded"})),vr=function(){var A=(0,L.Z)((0,y.Z)().mark(function D(){var o;return(0,y.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!er){T.next=2;break}return T.abrupt("return");case 2:if(o=Xt,o){T.next=9;break}return Nt(!0),T.next=7,fr();case 7:o=T.sent,Nt(!1);case 9:kt(o),pr(location.origin+"/share/analysis_result/".concat(o));case 11:case"end":return T.stop()}},D)}));return function(){return A.apply(this,arguments)}}(),mr=function(){var D;(D=P.current)===null||D===void 0||D.show({})},hr=function(D){i.m8.push({pathname:"/ws/".concat(Z,"/test_create_report"),state:{environmentResult:B,baselineGroupIndex:ee,allGroupData:q,testDataParam:he().cloneDeep(G),compareResult:he().cloneDeep(nt),compareGroupData:We,domainGroupResult:Ue,saveReportData:D}})},Vt=function(D){var o=D.srcElement.scrollLeft||0;O(o)};(0,a.useEffect)(function(){return window.addEventListener("scroll",Vt,!0),function(){window.removeEventListener("scroll",Vt,!0)}},[]),(0,a.useEffect)(function(){if(JSON.stringify(B)!=="{}"){var A=he().cloneDeep(B);A.base_group&&(A.base_group.is_group=!0);var D=A.compare_groups,o=A.base_group;D.splice(ee,0,o),rt(D)}},[B.compare_groups]);var zt=a.useRef(null);return(0,e.jsx)(j.Provider,{value:{allGroupData:q,baselineGroupIndex:ee,environmentResult:B,compareResult:nt,envData:Je,group:It,wsId:Z||I,containerRef:zt},children:(0,e.jsxs)("div",{style:{width:"100%",minHeight:sr-50,position:"relative",overflow:"auto",background:"#f5f5f5"},ref:zt,children:[$t!==u&&(0,e.jsx)(s.he,{children:(0,e.jsxs)("span",{className:"my-loading-span",children:[(0,e.jsx)("i",{}),(0,e.jsx)("i",{}),(0,e.jsx)("i",{}),(0,e.jsx)("i",{})]})}),(0,e.jsx)(s.dv,{style:{width:It>3?It*390:1200},children:(0,e.jsxs)(C.Z,{span:24,children:[(0,e.jsxs)(s.BK,{style:{maxWidth:document.body.clientWidth-40+v},children:[(0,e.jsx)(s.ZI,{children:(0,e.jsx)(i._H,{id:"analysis.comparison.result"})}),(0,e.jsxs)("span",{className:"btn",children:[(0,e.jsx)("span",{className:"test_result_copy_link"}),!M&&(0,e.jsxs)("span",{onClick:vr,style:{cursor:"pointer"},children:[(0,e.jsx)(w.r,{style:{marginRight:5}}),(0,e.jsx)(i._H,{id:"operation.share"})]}),(0,e.jsx)(i.Nv,{accessible:g.IsWsSetting(),children:!M&&(0,e.jsx)(J.Z,{type:"primary",loading:$t!==u,onClick:mr,style:{marginLeft:8},children:(0,e.jsx)(i._H,{id:"analysis.create.report"})})})]})]}),(0,e.jsxs)(s.Xv,{children:[B&&JSON.stringify(B)!=="{}"&&(0,e.jsx)(Zt,{}),(0,e.jsxs)(s.KP,{style:{position:"relative"},id:"test_data",ref:oe,children:[(0,e.jsxs)(s.DK,{children:[(0,e.jsx)("span",{className:"line"}),(0,e.jsx)(i._H,{id:"analysis.job.data"})]}),(0,e.jsx)(pt,{parentDom:oe,scrollLeft:v}),(0,e.jsx)(Tt,{scrollLeft:v})]})]})]})}),ar>600&&(0,e.jsx)("div",{style:{width:44,height:44,borderRadius:2,backgroundColor:"rgb(0, 0, 0, 0.1)",position:"fixed",bottom:10,right:20},onClick:ir,children:(0,e.jsx)(_t.Z,{style:{fontSize:30,padding:7,color:"rgb(0, 0, 0, 0.7)"}})}),Z&&(0,e.jsx)(Ft.Z,{ref:P,onOk:hr,allGroup:q})]})})},et=(0,a.memo)(Mt)},45227:function(st,se,t){"use strict";var le=t(67448),C=t(47548),ye=t(20693),J=t(3278),me=t(57359),d=t(34423),Y=t(46721),U=t(94867),y=t(20418),L=t(35832),h=t(32326),a=t(65790),w=t(17187),$=t(39190),i=t(88018),te=t(58414),_t=t(41428),Ft=t(69230),xt=t(33821),N=t(22374),Ht=t(992),Qe=t(97939),jt=t(97207),Q=t.n(jt),re=t(22812),Xe=t(24812),lt=t(39935),j=t(52454),Ce,s=xt.Z.Option,gt=(0,Qe.ZP)(te.Z)(Ce||(Ce=(0,_t.Z)([`
    .ant-drawer-title{
        font-weight: 600;
    }
    .server_provider {
        margin-bottom: 5px;  
    }
    .script_right_name{
        font-size: 14px;
        color: rgba(0,0,0,0.85);
    }
`])));se.Z=(0,N.forwardRef)(function(e,yt){var Zt=(0,re.YB)(),Ze=Zt.formatMessage,ie=(0,Xe.UO)(),Ut=ie.ws_id,St=e.onOk,Wt=e.allGroup,X=w.Z.useForm(),Gt=(0,$.Z)(X,1),V=Gt[0],Bt=(0,N.useState)(!1),W=(0,$.Z)(Bt,2),Et=W[0],it=W[1],Le=(0,N.useState)(!1),ke=(0,$.Z)(Le,2),ot=ke[0],ut=ke[1],ae=(0,N.useState)({}),dt=(0,$.Z)(ae,2),qe=dt[0],Dt=dt[1],he=(0,N.useState)(!0),ct=(0,$.Z)(he,2),Se=ct[0],Rt=ct[1],Te=(0,N.useState)([]),_e=(0,$.Z)(Te,2),xe=_e[0],je=_e[1],Ot=(0,N.useState)([]),ft=(0,$.Z)(Ot,2),Ee=ft[0],Pt=ft[1],Ct=(0,N.useState)([]),pt=(0,$.Z)(Ct,2),De=pt[0],Me=pt[1];(0,N.useImperativeHandle)(yt,function(){return{show:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(!0),Dt(r),V.setFieldsValue(r),Tt()}}});var Lt=function(){var f=(0,h.Z)((0,L.Z)().mark(function r(){var n,l,c,Z;return(0,L.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,Ht.MD)({page_size:9999,page_num:1,ws_id:Ut});case 2:n=g.sent,l=n.data,c=n.code,Z=n.msg,c===200&&Me(l),Rt(!1),c!==200&&(0,lt.EV)(c,Z);case 9:case"end":return g.stop()}},r)}));return function(){return f.apply(this,arguments)}}();(0,N.useEffect)(function(){Lt()},[]),(0,N.useEffect)(function(){var f=Q().find(De,"is_default"),r=null;f&&(r=f.id);var n=null;Ee.length===1&&(n=Ee[0]);var l=null;xe.length===1&&(l=xe[0].id);var c=V.getFieldsValue();c.template=r,c.productVersion=n,c.project=l,V.setFieldsValue(c)},[De,Ee,xe]);var Tt=function(){var r=[],n=[];try{Wt.forEach(function(l,c){l&&Q().isArray(l.members)&&l.members.length&&(r.push(l.members[0].product_version),l.members.forEach(function(Z){return n.push({id:Z.project_id,name:Z.project_name})}))}),r=Q().uniq(r),n=Q().uniqWith(n,Q().isEqual),n=n.filter(function(l){return l.id!==void 0}),Pt(r),je(n)}catch(l){console.log(l)}},Ie=function(){V.resetFields(),it(!1),ut(!1)},Mt=function(){it(!0),V.validateFields().then(function(){var r=(0,h.Z)((0,L.Z)().mark(function n(l){var c,Z;return(0,L.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:c=l.template,Z=Q().find(De,{id:c}),St((0,y.Z)((0,y.Z)({},l),{},{is_default:Q().get(Z,"is_default")}),qe),Ie();case 4:case"end":return g.stop()}},n)}));return function(n){return r.apply(this,arguments)}}()).catch(function(r){console.log(r),it(!1)})},et=function(r){var n="",l=De;if(r==="template"){var c=Q().find(l,"is_default");c&&(n=c.id)}return r==="productVersion"&&(l=Ee.filter(function(Z){return Z}),l.length===1&&(n=l[0])),r==="project"&&(l=xe,l.length===1&&(n=l[0].id)),n},R=function(r){var n="",l=De;return r==="template"&&(n=Ze({id:"report.please.select.template"})),r==="productVersion"&&(l=Ee.filter(function(c){return c}),n=Ze({id:"report.select.productVersion"})),r==="project"&&(l=xe,n=Ze({id:"report.select.project"})),(0,j.jsx)(xt.Z,{showSearch:!0,allowClear:!0,placeholder:n,optionFilterProp:"children",style:{width:"100%"},onChange:function(Z){var M=V.getFieldsValue();M[r]=Z,V.setFieldsValue(M)},showArrow:!0,filterOption:function(Z,M){return M.children.toLowerCase().indexOf(Z.toLowerCase())>=0},children:l.map(function(c){return r==="productVersion"?(0,j.jsx)(s,{value:c,children:c},c):(0,j.jsx)(s,{value:c.id,children:c.name},c.id)})})};return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(C.Z,{spinning:Se,children:(0,j.jsx)(gt,{title:(0,j.jsx)(re._H,{id:"report.generate.report"}),width:"375",onClose:Ie,visible:ot,footer:(0,j.jsx)("div",{style:{textAlign:"right"},children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(U.Z,{onClick:Ie,children:(0,j.jsx)(re._H,{id:"operation.cancel"})}),(0,j.jsx)(U.Z,{type:"primary",disabled:Et,onClick:Mt,children:(0,j.jsx)(re._H,{id:"operation.ok"})})]})}),children:(0,j.jsxs)(w.Z,{form:V,layout:"vertical",initialValues:{template:et("template"),productVersion:et("productVersion"),project:et("project")},children:[(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(re._H,{id:"report.columns.name"}),name:"name",rules:[{required:!0,message:Ze({id:"report.please.enter.name"})}],children:(0,j.jsx)(J.Z,{autoComplete:"auto",placeholder:Ze({id:"report.please.enter.name"})})}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(re._H,{id:"report.select.template"}),name:"template",rules:[{required:!0}],children:R("template")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(re._H,{id:"report.columns.product_version"}),name:"productVersion",children:R("productVersion")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(re._H,{id:"report.columns.project"}),name:"project",children:R("project")}),(0,j.jsx)(w.Z.Item,{label:(0,j.jsx)(re._H,{id:"report.description.input"}),name:"description",children:(0,j.jsx)(J.Z.TextArea,{placeholder:Ze({id:"report.description.placeholder"})})})]})})})})})},65081:function(st,se,t){"use strict";var le=t(22374),C=t(44293),ye=t(23101),J=function(d,Y){var U=typeof Symbol=="function"&&d[Symbol.iterator];if(!U)return d;var y=U.call(d),L,h=[],a;try{for(;(Y===void 0||Y-- >0)&&!(L=y.next()).done;)h.push(L.value)}catch(w){a={error:w}}finally{try{L&&!L.done&&(U=y.return)&&U.call(y)}finally{if(a)throw a.error}}return h};function me(d,Y){Y===void 0&&(Y=function(){return!0});var U=J((0,le.useState)({left:NaN,top:NaN}),2),y=U[0],L=U[1],h=(0,C.Z)(Y);return(0,le.useEffect)(function(){var a=(0,ye.n)(d,document);if(!a)return;function w(i){var te;if(i===document){if(!document.scrollingElement)return;te={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}}else te={left:i.scrollLeft,top:i.scrollTop};h(te)&&L(te)}w(a);function $(i){!i.target||w(i.target)}return a.addEventListener("scroll",$),function(){a.removeEventListener("scroll",$)}},[d,h]),y}se.Z=me}}]);
